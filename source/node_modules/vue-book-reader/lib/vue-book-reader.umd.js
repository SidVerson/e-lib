(function(){"use strict";try{if(typeof document<"u"){var o=document.createElement("style");o.appendChild(document.createTextNode('.reader[data-v-27a30866]{position:absolute;top:50px;right:50px;bottom:20px;left:50px}.viewHolder[data-v-27a30866]{height:100%;width:100%;position:relative}#viewer[data-v-27a30866]{height:100%}.container{overflow:hidden;position:relative;height:100%}.containerExpanded{transform:translate(256px)}.readerArea{position:relative;z-index:1;height:100%;width:100%;transition:all .3s ease}.container .titleArea{position:absolute;top:20px;left:50px;right:50px;text-align:center;color:#999;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.tocBackground{position:absolute;left:256px;top:0;bottom:0;right:0;z-index:1}.tocArea{position:absolute;left:0;top:0;bottom:0;z-index:0;width:256px;overflow-y:auto;-webkit-overflow-scrolling:touch;background:#f2f2f2;padding:10px 0}.tocArea::-webkit-scrollbar{width:5px;height:5px}.tocArea::-webkit-scrollbar-thumb:vertical{height:5px;background-color:#0000001a;border-radius:.5rem}.tocArea .tocAreaButton{-webkit-user-select:none;user-select:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:none;border:none;display:block;font-family:sans-serif;width:100%;font-size:.9em;text-align:left;padding:.9em 1em;border-bottom:1px solid #ddd;color:#aaa;box-sizing:border-box;outline:none;cursor:pointer;position:relative}.tocArea .tocAreaButton:hover{background:#0000000d}.tocArea .tocAreaButton:active{background:#0000001a}.tocArea .active{color:#1565c0;border-bottom:2px solid #1565c0}.tocArea .tocAreaButton .expansion{cursor:pointer;transform:translateY(-50%);top:50%;right:12px;position:absolute;width:10px;background-color:#a2a5b4;transition:transform .3s ease-in-out,top .3s ease-in-out}.tocArea .tocAreaButton .expansion:after,.tocArea .tocAreaButton .expansion:before{content:"";position:absolute;width:6px;height:2px;background-color:currentcolor;border-radius:2px;transition:transform .3s ease-in-out,top .3s ease-in-out}.tocArea .tocAreaButton .expansion:before{transform:rotate(-45deg) translate(2.5px)}.tocArea .tocAreaButton .expansion:after{transform:rotate(45deg) translate(-2.5px)}.tocArea .tocAreaButton .open:before{transform:rotate(45deg) translate(2.5px)}.tocArea .tocAreaButton .open:after{transform:rotate(-45deg) translate(-2.5px)}.tocButton{background:none;border:none;width:32px;height:32px;position:absolute;top:10px;left:10px;border-radius:2px;outline:none;cursor:pointer}.tocButtonBar{position:absolute;width:60%;background:#ccc;height:2px;left:50%;margin:-1px -30%;top:50%;transition:all .5s ease}.tocButtonExpanded{background:#f2f2f2}.arrow{outline:none;border:none;background:none;position:absolute;top:50%;margin-top:-32px;font-size:64px;padding:0 10px;color:#e2e2e2;font-family:arial,sans-serif;cursor:pointer;-webkit-user-select:none;user-select:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;font-weight:400}.arrow:hover{color:#777}.arrow:disabled{cursor:not-allowed;color:#e2e2e2}.prev{left:1px}.next{right:1px}.loadingView{position:absolute;top:50%;left:10%;right:10%;color:#ccc;text-align:center;margin-top:-.5em}')),document.head.appendChild(o)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();
(function(da,xa){typeof exports=="object"&&typeof module<"u"?xa(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],xa):(da=typeof globalThis<"u"?globalThis:da||self,xa(da["vue-book-reader"]={},da.Vue))})(this,function(exports,vue){"use strict";var su=Object.defineProperty;var au=(da,xa,pa)=>xa in da?su(da,xa,{enumerable:!0,configurable:!0,writable:!0,value:pa}):da[xa]=pa;var ta=(da,xa,pa)=>(au(da,typeof xa!="symbol"?xa+"":xa,pa),pa),Gc=(da,xa,pa)=>{if(!xa.has(da))throw TypeError("Cannot "+pa)};var vi=(da,xa,pa)=>(Gc(da,xa,"read from private field"),pa?pa.call(da):xa.get(da)),Ki=(da,xa,pa)=>{if(xa.has(da))throw TypeError("Cannot add the same private member more than once");xa instanceof WeakSet?xa.add(da):xa.set(da,pa)},ds=(da,xa,pa,_a)=>(Gc(da,xa,"write to private field"),_a?_a.call(da,pa):xa.set(da,pa),pa);var wr=(da,xa,pa,_a)=>({set _(Ra){ds(da,xa,Ra,pa)},get _(){return vi(da,xa,_a)}}),Qi=(da,xa,pa)=>(Gc(da,xa,"access private method"),pa);var da,Hh,pa,_a,Ra,La,B0,rr,Wa,kr,or,Ga,Ar,$0,Xh,U0,zh,j0,Wh,ao,kc,H0,Gh,X0,qh,z0,Vh,Kl,$r,zo,cr,Cr,ro,qa,Va,Ka,Tr,oo,Cc,Ur,L0,Wo,Dl,Go,Nl,qo,Bl,co,Tc,Vo,Na,ka,Ko,Ta,Ma,Yo,lo,er,ho,lr,Jo,hr,jr,Ba,Er,Hr,ma,ja,Ya,ur,tr,dr,uo,Xr,Zo,Qo,e0,fo,Fr,zr,go,W0,Kh,t0,$l,n0,Ul,i0,jl,s0,Hl,Wr,D0,G0,Yh,Ir,Uo,Or,jo,q0,Jh,V0,Zh,Gr,N0,a0,Xl,r0,zl,po,Ec,K0,Qh,Y0,eu,fr,no,o0,Wl,Ca,mo,$a,Ja,gr,xo,nr,c0,bo,Fc,_r,Ho,Mr,l0,qr,Ha,Da,Oa,h0,u0,J0,tu,yo,Ic,Pr,Xo,pr,io,d0,Gl,wo,Oc,mr,so,f0,So,g0,xr,br,ir,Vr,Ao,Za,vr,vo,ko,Co,p0,m0,x0,To,b0,y0,ql,Z0,nu,Kr,Eo,Yr,Rr,w0,S0,sr,Fo,Jr,Zr,Qr,Lr,Dr,yr,Q0,ec,Nr,A0,v0,Vl;(function($n,Pn){typeof exports=="object"&&typeof module=="object"?module.exports=$n.pdfjsWorker=Pn():typeof define=="function"&&define.amd?define("pdfjs-dist/build/pdf.worker",[],()=>$n.pdfjsWorker=Pn()):typeof exports=="object"?exports["pdfjs-dist/build/pdf.worker"]=$n.pdfjsWorker=Pn():$n["pdfjs-dist/build/pdf.worker"]=$n.pdfjsWorker=Pn()})(globalThis,()=>(()=>{var ki=[,(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.WorkerTask=Mn.WorkerMessageHandler=void 0;var In=ti(2),Ln=ti(3),jn=ti(4),Cn=ti(6),Tn=ti(10),Rn=ti(68),ui=ti(73),si=ti(104),ei=ti(105),Bn=ti(72);class Nn{constructor(Xn){this.name=Xn,this.terminated=!1,this._capability=new In.PromiseCapability}get finished(){return this._capability.promise}finish(){this._capability.resolve()}terminate(){this.terminated=!0}ensureNotTerminated(){if(this.terminated)throw new Error("Worker task was terminated")}}Mn.WorkerTask=Nn;class Hn{static setup(Xn,ii){let ri=!1;Xn.on("test",function(di){ri||(ri=!0,Xn.send("test",di instanceof Uint8Array))}),Xn.on("configure",function(di){(0,In.setVerbosityLevel)(di.verbosity)}),Xn.on("GetDocRequest",function(di){return Hn.createDocumentHandler(di,ii)})}static createDocumentHandler(Xn,ii){let ri,di=!1,fi=null;const wi=new Set,Jn=(0,In.getVerbosityLevel)(),{docId:pi,apiVersion:Zn}=Xn,Gn="3.11.174";if(Zn!==Gn)throw new Error(`The API version "${Zn}" does not match the Worker version "${Gn}".`);const mi=[];for(const Qn in[])mi.push(Qn);if(mi.length)throw new Error("The `Array.prototype` contains unexpected enumerable properties: "+mi.join(", ")+"; thus breaking e.g. `for...in` iteration of `Array`s.");const Wn=pi+"_worker";let ni=new si.MessageHandler(Wn,pi,ii);function li(){if(di)throw new Error("Worker was terminated")}function Ai(Qn){wi.add(Qn)}function gi(Qn){Qn.finish(),wi.delete(Qn)}async function yi(Qn){await ri.ensureDoc("checkHeader"),await ri.ensureDoc("parseStartXRef"),await ri.ensureDoc("parse",[Qn]),await ri.ensureDoc("checkFirstPage",[Qn]),await ri.ensureDoc("checkLastPage",[Qn]);const ai=await ri.ensureDoc("isPureXfa");if(ai){const bi=new Nn("loadXfaFonts");Ai(bi),await Promise.all([ri.loadXfaFonts(ni,bi).catch(Ci=>{}).then(()=>gi(bi)),ri.loadXfaImages()])}const[Vn,Yn]=await Promise.all([ri.ensureDoc("numPages"),ri.ensureDoc("fingerprints")]),ci=ai?await ri.ensureDoc("htmlForXfa"):null;return{numPages:Vn,fingerprints:Yn,htmlForXfa:ci}}function Ii({data:Qn,password:ai,disableAutoFetch:Vn,rangeChunkSize:Yn,length:ci,docBaseUrl:bi,enableXfa:Ci,evaluatorOptions:Fi}){const zi={source:null,disableAutoFetch:Vn,docBaseUrl:bi,docId:pi,enableXfa:Ci,evaluatorOptions:Fi,handler:ni,length:ci,password:ai,rangeChunkSize:Yn},_i=new In.PromiseCapability;let ji;if(Qn){try{zi.source=Qn,ji=new Cn.LocalPdfManager(zi),_i.resolve(ji)}catch(Mi){_i.reject(Mi)}return _i.promise}let Pi,Ni=[];try{Pi=new ei.PDFWorkerStream(ni)}catch(Mi){return _i.reject(Mi),_i.promise}const Si=Pi.getFullReader();Si.headersReady.then(function(){if(Si.isRangeSupported){zi.source=Pi,zi.length=Si.contentLength,zi.disableAutoFetch||(zi.disableAutoFetch=Si.isStreamingSupported),ji=new Cn.NetworkPdfManager(zi);for(const Mi of Ni)ji.sendProgressiveData(Mi);Ni=[],_i.resolve(ji),fi=null}}).catch(function(Mi){_i.reject(Mi),fi=null});let Ti=0;const Ri=function(){const Mi=(0,Ln.arrayBuffersToBytes)(Ni);ci&&Mi.length!==ci&&(0,In.warn)("reported HTTP length is different from actual");try{zi.source=Mi,ji=new Cn.LocalPdfManager(zi),_i.resolve(ji)}catch(Ui){_i.reject(Ui)}Ni=[]};return new Promise(function(Mi,Ui){const Hi=function({value:Li,done:Ei}){try{if(li(),Ei){ji||Ri(),fi=null;return}Ti+=Li.byteLength,Si.isStreamingSupported||ni.send("DocProgress",{loaded:Ti,total:Math.max(Ti,Si.contentLength||0)}),ji?ji.sendProgressiveData(Li):Ni.push(Li),Si.read().then(Hi,Ui)}catch($i){Ui($i)}};Si.read().then(Hi,Ui)}).catch(function(Mi){_i.reject(Mi),fi=null}),fi=function(Mi){Pi.cancelAllRequests(Mi)},_i.promise}function xi(Qn){function ai(ci){li(),ni.send("GetDoc",{pdfInfo:ci})}function Vn(ci){if(li(),ci instanceof In.PasswordException){const bi=new Nn(`PasswordException: response ${ci.code}`);Ai(bi),ni.sendWithPromise("PasswordRequest",ci).then(function({password:Ci}){gi(bi),ri.updatePassword(Ci),Yn()}).catch(function(){gi(bi),ni.send("DocException",ci)})}else ci instanceof In.InvalidPDFException||ci instanceof In.MissingPDFException||ci instanceof In.UnexpectedResponseException||ci instanceof In.UnknownErrorException?ni.send("DocException",ci):ni.send("DocException",new In.UnknownErrorException(ci.message,ci.toString()))}function Yn(){li(),yi(!1).then(ai,function(ci){if(li(),!(ci instanceof Ln.XRefParseException)){Vn(ci);return}ri.requestLoadedStream().then(function(){li(),yi(!0).then(ai,Vn)})})}li(),Ii(Qn).then(function(ci){if(di)throw ci.terminate(new In.AbortException("Worker was terminated.")),new Error("Worker was terminated");ri=ci,ri.requestLoadedStream(!0).then(bi=>{ni.send("DataLoaded",{length:bi.bytes.byteLength})})}).then(Yn,Vn)}return ni.on("GetPage",function(Qn){return ri.getPage(Qn.pageIndex).then(function(ai){return Promise.all([ri.ensure(ai,"rotate"),ri.ensure(ai,"ref"),ri.ensure(ai,"userUnit"),ri.ensure(ai,"view")]).then(function([Vn,Yn,ci,bi]){return{rotate:Vn,ref:Yn,userUnit:ci,view:bi}})})}),ni.on("GetPageIndex",function(Qn){const ai=jn.Ref.get(Qn.num,Qn.gen);return ri.ensureCatalog("getPageIndex",[ai])}),ni.on("GetDestinations",function(Qn){return ri.ensureCatalog("destinations")}),ni.on("GetDestination",function(Qn){return ri.ensureCatalog("getDestination",[Qn.id])}),ni.on("GetPageLabels",function(Qn){return ri.ensureCatalog("pageLabels")}),ni.on("GetPageLayout",function(Qn){return ri.ensureCatalog("pageLayout")}),ni.on("GetPageMode",function(Qn){return ri.ensureCatalog("pageMode")}),ni.on("GetViewerPreferences",function(Qn){return ri.ensureCatalog("viewerPreferences")}),ni.on("GetOpenAction",function(Qn){return ri.ensureCatalog("openAction")}),ni.on("GetAttachments",function(Qn){return ri.ensureCatalog("attachments")}),ni.on("GetDocJSActions",function(Qn){return ri.ensureCatalog("jsActions")}),ni.on("GetPageJSActions",function({pageIndex:Qn}){return ri.getPage(Qn).then(function(ai){return ri.ensure(ai,"jsActions")})}),ni.on("GetOutline",function(Qn){return ri.ensureCatalog("documentOutline")}),ni.on("GetOptionalContentConfig",function(Qn){return ri.ensureCatalog("optionalContentConfig")}),ni.on("GetPermissions",function(Qn){return ri.ensureCatalog("permissions")}),ni.on("GetMetadata",function(Qn){return Promise.all([ri.ensureDoc("documentInfo"),ri.ensureCatalog("metadata")])}),ni.on("GetMarkInfo",function(Qn){return ri.ensureCatalog("markInfo")}),ni.on("GetData",function(Qn){return ri.requestLoadedStream().then(function(ai){return ai.bytes})}),ni.on("GetAnnotations",function({pageIndex:Qn,intent:ai}){return ri.getPage(Qn).then(function(Vn){const Yn=new Nn(`GetAnnotations: page ${Qn}`);return Ai(Yn),Vn.getAnnotationsData(ni,Yn,ai).then(ci=>(gi(Yn),ci),ci=>{throw gi(Yn),ci})})}),ni.on("GetFieldObjects",function(Qn){return ri.ensureDoc("fieldObjects")}),ni.on("HasJSActions",function(Qn){return ri.ensureDoc("hasJSActions")}),ni.on("GetCalculationOrderIds",function(Qn){return ri.ensureDoc("calculationOrderIds")}),ni.on("SaveDocument",async function({isPureXfa:Qn,numPages:ai,annotationStorage:Vn,filename:Yn}){const ci=[ri.requestLoadedStream(),ri.ensureCatalog("acroForm"),ri.ensureCatalog("acroFormRef"),ri.ensureDoc("startXRef"),ri.ensureDoc("xref"),ri.ensureDoc("linearization"),ri.ensureCatalog("structTreeRoot")],bi=[],Ci=Qn?null:(0,Ln.getNewAnnotationsMap)(Vn),[Fi,zi,_i,ji,Pi,Ni,Si]=await Promise.all(ci),Ti=Pi.trailer.getRaw("Root")||null;let Ri;if(Ci){Si?await Si.canUpdateStructTree({pdfManager:ri,newAnnotationsByPage:Ci})&&(Ri=Si):await Bn.StructTreeRoot.canCreateStructureTree({catalogRef:Ti,pdfManager:ri,newAnnotationsByPage:Ci})&&(Ri=null);const Xi=Tn.AnnotationFactory.generateImages(Vn.values(),Pi,ri.evaluatorOptions.isOffscreenCanvasSupported),Gi=Ri===void 0?bi:[];for(const[qi,ns]of Ci)Gi.push(ri.getPage(qi).then(is=>{const as=new Nn(`Save (editor): page ${qi}`);return is.saveNewAnnotations(ni,as,ns,Xi).finally(function(){gi(as)})}));Ri===null?bi.push(Promise.all(Gi).then(async qi=>(await Bn.StructTreeRoot.createStructureTree({newAnnotationsByPage:Ci,xref:Pi,catalogRef:Ti,pdfManager:ri,newRefs:qi}),qi))):Ri&&bi.push(Promise.all(Gi).then(async qi=>(await Ri.updateStructureTree({newAnnotationsByPage:Ci,pdfManager:ri,newRefs:qi}),qi)))}if(Qn)bi.push(ri.serializeXfaData(Vn));else for(let Xi=0;Xi<ai;Xi++)bi.push(ri.getPage(Xi).then(function(Gi){const qi=new Nn(`Save: page ${Xi}`);return Gi.save(ni,qi,Vn).finally(function(){gi(qi)})}));const Mi=await Promise.all(bi);let Ui=[],Hi=null;if(Qn){if(Hi=Mi[0],!Hi)return Fi.bytes}else if(Ui=Mi.flat(2),Ui.length===0)return Fi.bytes;const Li=_i&&zi instanceof jn.Dict&&Ui.some(Xi=>Xi.needAppearances),Ei=zi instanceof jn.Dict&&zi.get("XFA")||null;let $i=null,Bi=!1;if(Array.isArray(Ei)){for(let Xi=0,Gi=Ei.length;Xi<Gi;Xi+=2)Ei[Xi]==="datasets"&&($i=Ei[Xi+1],Bi=!0);$i===null&&($i=Pi.getNewTemporaryRef())}else Ei&&(0,In.warn)("Unsupported XFA type.");let Oi=Object.create(null);if(Pi.trailer){const Xi=Object.create(null),Gi=Pi.trailer.get("Info")||null;Gi instanceof jn.Dict&&Gi.forEach((qi,ns)=>{typeof ns=="string"&&(Xi[qi]=(0,In.stringToPDFString)(ns))}),Oi={rootRef:Ti,encryptRef:Pi.trailer.getRaw("Encrypt")||null,newRef:Pi.getNewTemporaryRef(),infoRef:Pi.trailer.getRaw("Info")||null,info:Xi,fileIds:Pi.trailer.get("ID")||null,startXRef:Ni?ji:Pi.lastXRefStreamPos??ji,filename:Yn}}return(0,ui.incrementalUpdate)({originalData:Fi.bytes,xrefInfo:Oi,newRefs:Ui,xref:Pi,hasXfa:!!Ei,xfaDatasetsRef:$i,hasXfaDatasetsEntry:Bi,needAppearances:Li,acroFormRef:_i,acroForm:zi,xfaData:Hi}).finally(()=>{Pi.resetNewTemporaryRef()})}),ni.on("GetOperatorList",function(Qn,ai){const Vn=Qn.pageIndex;ri.getPage(Vn).then(function(Yn){const ci=new Nn(`GetOperatorList: page ${Vn}`);Ai(ci);const bi=Jn>=In.VerbosityLevel.INFOS?Date.now():0;Yn.getOperatorList({handler:ni,sink:ai,task:ci,intent:Qn.intent,cacheKey:Qn.cacheKey,annotationStorage:Qn.annotationStorage}).then(function(Ci){gi(ci),bi&&(0,In.info)(`page=${Vn+1} - getOperatorList: time=${Date.now()-bi}ms, len=${Ci.length}`),ai.close()},function(Ci){gi(ci),!ci.terminated&&ai.error(Ci)})})}),ni.on("GetTextContent",function(Qn,ai){const{pageIndex:Vn,includeMarkedContent:Yn,disableNormalization:ci}=Qn;ri.getPage(Vn).then(function(bi){const Ci=new Nn("GetTextContent: page "+Vn);Ai(Ci);const Fi=Jn>=In.VerbosityLevel.INFOS?Date.now():0;bi.extractTextContent({handler:ni,task:Ci,sink:ai,includeMarkedContent:Yn,disableNormalization:ci}).then(function(){gi(Ci),Fi&&(0,In.info)(`page=${Vn+1} - getTextContent: time=${Date.now()-Fi}ms`),ai.close()},function(zi){gi(Ci),!Ci.terminated&&ai.error(zi)})})}),ni.on("GetStructTree",function(Qn){return ri.getPage(Qn.pageIndex).then(function(ai){return ri.ensure(ai,"getStructTree")})}),ni.on("FontFallback",function(Qn){return ri.fontFallback(Qn.id,ni)}),ni.on("Cleanup",function(Qn){return ri.cleanup(!0)}),ni.on("Terminate",function(Qn){di=!0;const ai=[];if(ri){ri.terminate(new In.AbortException("Worker was terminated."));const Vn=ri.cleanup();ai.push(Vn),ri=null}else(0,Rn.clearGlobalCaches)();fi&&fi(new In.AbortException("Worker was terminated."));for(const Vn of wi)ai.push(Vn.finished),Vn.terminate();return Promise.all(ai).then(function(){ni.destroy(),ni=null})}),ni.on("Ready",function(Qn){xi(Xn),Xn=null}),Wn}static initializeFromPort(Xn){const ii=new si.MessageHandler("worker","main",Xn);Hn.setup(ii,Xn),ii.send("ready",null)}}Mn.WorkerMessageHandler=Hn;function On(hi){return typeof hi.postMessage=="function"&&"onmessage"in hi}typeof window>"u"&&!In.isNodeJS&&typeof self<"u"&&On(self)&&Hn.initializeFromPort(self)},(oi,Mn)=>{var us;Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.VerbosityLevel=Mn.Util=Mn.UnknownErrorException=Mn.UnexpectedResponseException=Mn.TextRenderingMode=Mn.RenderingIntentFlag=Mn.PromiseCapability=Mn.PermissionFlag=Mn.PasswordResponses=Mn.PasswordException=Mn.PageActionEventType=Mn.OPS=Mn.MissingPDFException=Mn.MAX_IMAGE_SIZE_TO_CACHE=Mn.LINE_FACTOR=Mn.LINE_DESCENT_FACTOR=Mn.InvalidPDFException=Mn.ImageKind=Mn.IDENTITY_MATRIX=Mn.FormatError=Mn.FeatureTest=Mn.FONT_IDENTITY_MATRIX=Mn.DocumentActionEventType=Mn.CMapCompressionType=Mn.BaseException=Mn.BASELINE_FACTOR=Mn.AnnotationType=Mn.AnnotationReplyType=Mn.AnnotationPrefix=Mn.AnnotationMode=Mn.AnnotationFlag=Mn.AnnotationFieldFlag=Mn.AnnotationEditorType=Mn.AnnotationEditorPrefix=Mn.AnnotationEditorParamsType=Mn.AnnotationBorderStyleType=Mn.AnnotationActionEventType=Mn.AbortException=void 0,Mn.assert=xi,Mn.bytesToString=Pi,Mn.createValidAbsoluteUrl=ai,Mn.getModificationDate=ns,Mn.getUuid=Vi,Mn.getVerbosityLevel=Ai,Mn.info=gi,Mn.isArrayBuffer=Gi,Mn.isArrayEqual=qi,Mn.isNodeJS=void 0,Mn.normalizeUnicode=Yi,Mn.objectFromMap=Ri,Mn.objectSize=Ti,Mn.setVerbosityLevel=li,Mn.shadow=Vn,Mn.string32=Si,Mn.stringToBytes=Ni,Mn.stringToPDFString=Bi,Mn.stringToUTF8String=Oi,Mn.unreachable=Ii,Mn.utf8StringToString=Xi,Mn.warn=yi;const ti=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");Mn.isNodeJS=ti;const In=[1,0,0,1,0,0];Mn.IDENTITY_MATRIX=In;const Ln=[.001,0,0,.001,0,0];Mn.FONT_IDENTITY_MATRIX=Ln;const jn=1e7;Mn.MAX_IMAGE_SIZE_TO_CACHE=jn;const Cn=1.35;Mn.LINE_FACTOR=Cn;const Tn=.35;Mn.LINE_DESCENT_FACTOR=Tn;const Rn=Tn/Cn;Mn.BASELINE_FACTOR=Rn;const ui={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};Mn.RenderingIntentFlag=ui;const si={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};Mn.AnnotationMode=si;const ei="pdfjs_internal_editor_";Mn.AnnotationEditorPrefix=ei;const Bn={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};Mn.AnnotationEditorType=Bn;const Nn={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};Mn.AnnotationEditorParamsType=Nn;const Hn={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};Mn.PermissionFlag=Hn;const On={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};Mn.TextRenderingMode=On;const hi={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};Mn.ImageKind=hi;const Xn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};Mn.AnnotationType=Xn;const ii={GROUP:"Group",REPLY:"R"};Mn.AnnotationReplyType=ii;const ri={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};Mn.AnnotationFlag=ri;const di={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};Mn.AnnotationFieldFlag=di;const fi={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};Mn.AnnotationBorderStyleType=fi;const wi={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};Mn.AnnotationActionEventType=wi;const Jn={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};Mn.DocumentActionEventType=Jn;const pi={O:"PageOpen",C:"PageClose"};Mn.PageActionEventType=pi;const Zn={ERRORS:0,WARNINGS:1,INFOS:5};Mn.VerbosityLevel=Zn;const Gn={NONE:0,BINARY:1};Mn.CMapCompressionType=Gn;const mi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};Mn.OPS=mi;const Wn={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};Mn.PasswordResponses=Wn;let ni=Zn.WARNINGS;function li(ts){Number.isInteger(ts)&&(ni=ts)}function Ai(){return ni}function gi(ts){ni>=Zn.INFOS&&console.log(`Info: ${ts}`)}function yi(ts){ni>=Zn.WARNINGS&&console.log(`Warning: ${ts}`)}function Ii(ts){throw new Error(ts)}function xi(ts,es){ts||Ii(es)}function Qn(ts){switch(ts==null?void 0:ts.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ai(ts,es=null,rs=null){if(!ts)return null;try{if(rs&&typeof ts=="string"){if(rs.addDefaultProtocol&&ts.startsWith("www.")){const os=ts.match(/\./g);(os==null?void 0:os.length)>=2&&(ts=`http://${ts}`)}if(rs.tryConvertEncoding)try{ts=Oi(ts)}catch{}}const ss=es?new URL(ts,es):new URL(ts);if(Qn(ss))return ss}catch{}return null}function Vn(ts,es,rs,ss=!1){return Object.defineProperty(ts,es,{value:rs,enumerable:!ss,configurable:!0,writable:!1}),rs}const Yn=function(){function es(rs,ss){this.constructor===es&&Ii("Cannot initialize BaseException."),this.message=rs,this.name=ss}return es.prototype=new Error,es.constructor=es,es}();Mn.BaseException=Yn;class ci extends Yn{constructor(es,rs){super(es,"PasswordException"),this.code=rs}}Mn.PasswordException=ci;class bi extends Yn{constructor(es,rs){super(es,"UnknownErrorException"),this.details=rs}}Mn.UnknownErrorException=bi;class Ci extends Yn{constructor(es){super(es,"InvalidPDFException")}}Mn.InvalidPDFException=Ci;class Fi extends Yn{constructor(es){super(es,"MissingPDFException")}}Mn.MissingPDFException=Fi;class zi extends Yn{constructor(es,rs){super(es,"UnexpectedResponseException"),this.status=rs}}Mn.UnexpectedResponseException=zi;class _i extends Yn{constructor(es){super(es,"FormatError")}}Mn.FormatError=_i;class ji extends Yn{constructor(es){super(es,"AbortException")}}Mn.AbortException=ji;function Pi(ts){(typeof ts!="object"||(ts==null?void 0:ts.length)===void 0)&&Ii("Invalid argument for bytesToString");const es=ts.length,rs=8192;if(es<rs)return String.fromCharCode.apply(null,ts);const ss=[];for(let os=0;os<es;os+=rs){const ks=Math.min(os+rs,es),xs=ts.subarray(os,ks);ss.push(String.fromCharCode.apply(null,xs))}return ss.join("")}function Ni(ts){typeof ts!="string"&&Ii("Invalid argument for stringToBytes");const es=ts.length,rs=new Uint8Array(es);for(let ss=0;ss<es;++ss)rs[ss]=ts.charCodeAt(ss)&255;return rs}function Si(ts){return String.fromCharCode(ts>>24&255,ts>>16&255,ts>>8&255,ts&255)}function Ti(ts){return Object.keys(ts).length}function Ri(ts){const es=Object.create(null);for(const[rs,ss]of ts)es[rs]=ss;return es}function Mi(){const ts=new Uint8Array(4);return ts[0]=1,new Uint32Array(ts.buffer,0,1)[0]===1}function Ui(){try{return new Function(""),!0}catch{return!1}}class Hi{static get isLittleEndian(){return Vn(this,"isLittleEndian",Mi())}static get isEvalSupported(){return Vn(this,"isEvalSupported",Ui())}static get isOffscreenCanvasSupported(){return Vn(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Vn(this,"platform",{isWin:!1,isMac:!1}):Vn(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var es,rs;return Vn(this,"isCSSRoundSupported",(rs=(es=globalThis.CSS)==null?void 0:es.supports)==null?void 0:rs.call(es,"width: round(1.5px, 1px)"))}}Mn.FeatureTest=Hi;const Li=[...Array(256).keys()].map(ts=>ts.toString(16).padStart(2,"0"));class Ei{static makeHexColor(es,rs,ss){return`#${Li[es]}${Li[rs]}${Li[ss]}`}static scaleMinMax(es,rs){let ss;es[0]?(es[0]<0&&(ss=rs[0],rs[0]=rs[1],rs[1]=ss),rs[0]*=es[0],rs[1]*=es[0],es[3]<0&&(ss=rs[2],rs[2]=rs[3],rs[3]=ss),rs[2]*=es[3],rs[3]*=es[3]):(ss=rs[0],rs[0]=rs[2],rs[2]=ss,ss=rs[1],rs[1]=rs[3],rs[3]=ss,es[1]<0&&(ss=rs[2],rs[2]=rs[3],rs[3]=ss),rs[2]*=es[1],rs[3]*=es[1],es[2]<0&&(ss=rs[0],rs[0]=rs[1],rs[1]=ss),rs[0]*=es[2],rs[1]*=es[2]),rs[0]+=es[4],rs[1]+=es[4],rs[2]+=es[5],rs[3]+=es[5]}static transform(es,rs){return[es[0]*rs[0]+es[2]*rs[1],es[1]*rs[0]+es[3]*rs[1],es[0]*rs[2]+es[2]*rs[3],es[1]*rs[2]+es[3]*rs[3],es[0]*rs[4]+es[2]*rs[5]+es[4],es[1]*rs[4]+es[3]*rs[5]+es[5]]}static applyTransform(es,rs){const ss=es[0]*rs[0]+es[1]*rs[2]+rs[4],os=es[0]*rs[1]+es[1]*rs[3]+rs[5];return[ss,os]}static applyInverseTransform(es,rs){const ss=rs[0]*rs[3]-rs[1]*rs[2],os=(es[0]*rs[3]-es[1]*rs[2]+rs[2]*rs[5]-rs[4]*rs[3])/ss,ks=(-es[0]*rs[1]+es[1]*rs[0]+rs[4]*rs[1]-rs[5]*rs[0])/ss;return[os,ks]}static getAxialAlignedBoundingBox(es,rs){const ss=this.applyTransform(es,rs),os=this.applyTransform(es.slice(2,4),rs),ks=this.applyTransform([es[0],es[3]],rs),xs=this.applyTransform([es[2],es[1]],rs);return[Math.min(ss[0],os[0],ks[0],xs[0]),Math.min(ss[1],os[1],ks[1],xs[1]),Math.max(ss[0],os[0],ks[0],xs[0]),Math.max(ss[1],os[1],ks[1],xs[1])]}static inverseTransform(es){const rs=es[0]*es[3]-es[1]*es[2];return[es[3]/rs,-es[1]/rs,-es[2]/rs,es[0]/rs,(es[2]*es[5]-es[4]*es[3])/rs,(es[4]*es[1]-es[5]*es[0])/rs]}static singularValueDecompose2dScale(es){const rs=[es[0],es[2],es[1],es[3]],ss=es[0]*rs[0]+es[1]*rs[2],os=es[0]*rs[1]+es[1]*rs[3],ks=es[2]*rs[0]+es[3]*rs[2],xs=es[2]*rs[1]+es[3]*rs[3],Rs=(ss+xs)/2,ms=Math.sqrt((ss+xs)**2-4*(ss*xs-ks*os))/2,Bs=Rs+ms||1,ws=Rs-ms||1;return[Math.sqrt(Bs),Math.sqrt(ws)]}static normalizeRect(es){const rs=es.slice(0);return es[0]>es[2]&&(rs[0]=es[2],rs[2]=es[0]),es[1]>es[3]&&(rs[1]=es[3],rs[3]=es[1]),rs}static intersect(es,rs){const ss=Math.max(Math.min(es[0],es[2]),Math.min(rs[0],rs[2])),os=Math.min(Math.max(es[0],es[2]),Math.max(rs[0],rs[2]));if(ss>os)return null;const ks=Math.max(Math.min(es[1],es[3]),Math.min(rs[1],rs[3])),xs=Math.min(Math.max(es[1],es[3]),Math.max(rs[1],rs[3]));return ks>xs?null:[ss,ks,os,xs]}static bezierBoundingBox(es,rs,ss,os,ks,xs,Rs,ms){const Bs=[],ws=[[],[]];let Ts,Is,ls,Wi,Ji,cs,fs,ps;for(let _s=0;_s<2;++_s){if(_s===0?(Is=6*es-12*ss+6*ks,Ts=-3*es+9*ss-9*ks+3*Rs,ls=3*ss-3*es):(Is=6*rs-12*os+6*xs,Ts=-3*rs+9*os-9*xs+3*ms,ls=3*os-3*rs),Math.abs(Ts)<1e-12){if(Math.abs(Is)<1e-12)continue;Wi=-ls/Is,0<Wi&&Wi<1&&Bs.push(Wi);continue}fs=Is*Is-4*ls*Ts,ps=Math.sqrt(fs),!(fs<0)&&(Ji=(-Is+ps)/(2*Ts),0<Ji&&Ji<1&&Bs.push(Ji),cs=(-Is-ps)/(2*Ts),0<cs&&cs<1&&Bs.push(cs))}let gs=Bs.length,bs;const vs=gs;for(;gs--;)Wi=Bs[gs],bs=1-Wi,ws[0][gs]=bs*bs*bs*es+3*bs*bs*Wi*ss+3*bs*Wi*Wi*ks+Wi*Wi*Wi*Rs,ws[1][gs]=bs*bs*bs*rs+3*bs*bs*Wi*os+3*bs*Wi*Wi*xs+Wi*Wi*Wi*ms;return ws[0][vs]=es,ws[1][vs]=rs,ws[0][vs+1]=Rs,ws[1][vs+1]=ms,ws[0].length=ws[1].length=vs+2,[Math.min(...ws[0]),Math.min(...ws[1]),Math.max(...ws[0]),Math.max(...ws[1])]}}Mn.Util=Ei;const $i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Bi(ts){if(ts[0]>="ï"){let rs;if(ts[0]==="þ"&&ts[1]==="ÿ"?rs="utf-16be":ts[0]==="ÿ"&&ts[1]==="þ"?rs="utf-16le":ts[0]==="ï"&&ts[1]==="»"&&ts[2]==="¿"&&(rs="utf-8"),rs)try{const ss=new TextDecoder(rs,{fatal:!0}),os=Ni(ts);return ss.decode(os)}catch(ss){yi(`stringToPDFString: "${ss}".`)}}const es=[];for(let rs=0,ss=ts.length;rs<ss;rs++){const os=$i[ts.charCodeAt(rs)];es.push(os?String.fromCharCode(os):ts.charAt(rs))}return es.join("")}function Oi(ts){return decodeURIComponent(escape(ts))}function Xi(ts){return unescape(encodeURIComponent(ts))}function Gi(ts){return typeof ts=="object"&&(ts==null?void 0:ts.byteLength)!==void 0}function qi(ts,es){if(ts.length!==es.length)return!1;for(let rs=0,ss=ts.length;rs<ss;rs++)if(ts[rs]!==es[rs])return!1;return!0}function ns(ts=new Date){return[ts.getUTCFullYear().toString(),(ts.getUTCMonth()+1).toString().padStart(2,"0"),ts.getUTCDate().toString().padStart(2,"0"),ts.getUTCHours().toString().padStart(2,"0"),ts.getUTCMinutes().toString().padStart(2,"0"),ts.getUTCSeconds().toString().padStart(2,"0")].join("")}class is{constructor(){Ki(this,us,!1);this.promise=new Promise((es,rs)=>{this.resolve=ss=>{ds(this,us,!0),es(ss)},this.reject=ss=>{ds(this,us,!0),rs(ss)}})}get settled(){return vi(this,us)}}us=new WeakMap,Mn.PromiseCapability=is;let as=null,hs=null;function Yi(ts){return as||(as=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,hs=new Map([["ﬅ","ſt"]])),ts.replaceAll(as,(es,rs,ss)=>rs?rs.normalize("NFKC"):hs.get(ss))}function Vi(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const ts=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(ts);else for(let es=0;es<32;es++)ts[es]=Math.floor(Math.random()*255);return Pi(ts)}const Zi="pdfjs_internal_id_";Mn.AnnotationPrefix=Zi},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.XRefParseException=Mn.XRefEntryException=Mn.ParserEOFException=Mn.PDF_VERSION_REGEXP=Mn.MissingDataException=void 0,Mn.arrayBuffersToBytes=Bn,Mn.collectActions=Zn,Mn.encodeToXmlString=mi,Mn.escapePDFName=wi,Mn.escapeString=Jn,Mn.getInheritableProperty=Nn,Mn.getLookupTableFactory=Tn,Mn.getNewAnnotationsMap=gi,Mn.getRotationMatrix=Qn,Mn.isAscii=yi,Mn.isWhiteSpace=di,Mn.log2=hi,Mn.numberToString=Ai,Mn.parseXFAPath=fi,Mn.readInt8=Xn,Mn.readUint16=ii,Mn.readUint32=ri,Mn.recoverJsURL=li,Mn.stringToUTF16HexString=Ii,Mn.stringToUTF16String=xi,Mn.toRomanNumerals=On,Mn.validateCSSFont=ni,Mn.validateFontName=Wn;var In=ti(2),Ln=ti(4),jn=ti(5);const Cn=/^[1-9]\.\d$/;Mn.PDF_VERSION_REGEXP=Cn;function Tn(ai){let Vn;return function(){return ai&&(Vn=Object.create(null),ai(Vn),ai=null),Vn}}class Rn extends In.BaseException{constructor(Vn,Yn){super(`Missing data [${Vn}, ${Yn})`,"MissingDataException"),this.begin=Vn,this.end=Yn}}Mn.MissingDataException=Rn;class ui extends In.BaseException{constructor(Vn){super(Vn,"ParserEOFException")}}Mn.ParserEOFException=ui;class si extends In.BaseException{constructor(Vn){super(Vn,"XRefEntryException")}}Mn.XRefEntryException=si;class ei extends In.BaseException{constructor(Vn){super(Vn,"XRefParseException")}}Mn.XRefParseException=ei;function Bn(ai){const Vn=ai.length;if(Vn===0)return new Uint8Array(0);if(Vn===1)return new Uint8Array(ai[0]);let Yn=0;for(let Ci=0;Ci<Vn;Ci++)Yn+=ai[Ci].byteLength;const ci=new Uint8Array(Yn);let bi=0;for(let Ci=0;Ci<Vn;Ci++){const Fi=new Uint8Array(ai[Ci]);ci.set(Fi,bi),bi+=Fi.byteLength}return ci}function Nn({dict:ai,key:Vn,getArray:Yn=!1,stopWhenFound:ci=!0}){let bi;const Ci=new Ln.RefSet;for(;ai instanceof Ln.Dict&&!(ai.objId&&Ci.has(ai.objId));){ai.objId&&Ci.put(ai.objId);const Fi=Yn?ai.getArray(Vn):ai.get(Vn);if(Fi!==void 0){if(ci)return Fi;(bi||(bi=[])).push(Fi)}ai=ai.get("Parent")}return bi}const Hn=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];function On(ai,Vn=!1){(0,In.assert)(Number.isInteger(ai)&&ai>0,"The number should be a positive integer.");const Yn=[];let ci;for(;ai>=1e3;)ai-=1e3,Yn.push("M");ci=ai/100|0,ai%=100,Yn.push(Hn[ci]),ci=ai/10|0,ai%=10,Yn.push(Hn[10+ci]),Yn.push(Hn[20+ai]);const bi=Yn.join("");return Vn?bi.toLowerCase():bi}function hi(ai){return ai<=0?0:Math.ceil(Math.log2(ai))}function Xn(ai,Vn){return ai[Vn]<<24>>24}function ii(ai,Vn){return ai[Vn]<<8|ai[Vn+1]}function ri(ai,Vn){return(ai[Vn]<<24|ai[Vn+1]<<16|ai[Vn+2]<<8|ai[Vn+3])>>>0}function di(ai){return ai===32||ai===9||ai===13||ai===10}function fi(ai){const Vn=/(.+)\[(\d+)\]$/;return ai.split(".").map(Yn=>{const ci=Yn.match(Vn);return ci?{name:ci[1],pos:parseInt(ci[2],10)}:{name:Yn,pos:0}})}function wi(ai){const Vn=[];let Yn=0;for(let ci=0,bi=ai.length;ci<bi;ci++){const Ci=ai.charCodeAt(ci);(Ci<33||Ci>126||Ci===35||Ci===40||Ci===41||Ci===60||Ci===62||Ci===91||Ci===93||Ci===123||Ci===125||Ci===47||Ci===37)&&(Yn<ci&&Vn.push(ai.substring(Yn,ci)),Vn.push(`#${Ci.toString(16)}`),Yn=ci+1)}return Vn.length===0?ai:(Yn<ai.length&&Vn.push(ai.substring(Yn,ai.length)),Vn.join(""))}function Jn(ai){return ai.replaceAll(/([()\\\n\r])/g,Vn=>Vn===`
`?"\\n":Vn==="\r"?"\\r":`\\${Vn}`)}function pi(ai,Vn,Yn,ci){if(!ai)return;let bi=null;if(ai instanceof Ln.Ref){if(ci.has(ai))return;bi=ai,ci.put(bi),ai=Vn.fetch(ai)}if(Array.isArray(ai))for(const Ci of ai)pi(Ci,Vn,Yn,ci);else if(ai instanceof Ln.Dict){if((0,Ln.isName)(ai.get("S"),"JavaScript")){const Ci=ai.get("JS");let Fi;Ci instanceof jn.BaseStream?Fi=Ci.getString():typeof Ci=="string"&&(Fi=Ci),Fi&&(Fi=(0,In.stringToPDFString)(Fi).replaceAll("\0","")),Fi&&Yn.push(Fi)}pi(ai.getRaw("Next"),Vn,Yn,ci)}bi&&ci.remove(bi)}function Zn(ai,Vn,Yn){const ci=Object.create(null),bi=Nn({dict:Vn,key:"AA",stopWhenFound:!1});if(bi)for(let Ci=bi.length-1;Ci>=0;Ci--){const Fi=bi[Ci];if(Fi instanceof Ln.Dict)for(const zi of Fi.getKeys()){const _i=Yn[zi];if(!_i)continue;const ji=Fi.getRaw(zi),Pi=new Ln.RefSet,Ni=[];pi(ji,ai,Ni,Pi),Ni.length>0&&(ci[_i]=Ni)}}if(Vn.has("A")){const Ci=Vn.get("A"),Fi=new Ln.RefSet,zi=[];pi(Ci,ai,zi,Fi),zi.length>0&&(ci.Action=zi)}return(0,In.objectSize)(ci)>0?ci:null}const Gn={60:"&lt;",62:"&gt;",38:"&amp;",34:"&quot;",39:"&apos;"};function mi(ai){const Vn=[];let Yn=0;for(let ci=0,bi=ai.length;ci<bi;ci++){const Ci=ai.codePointAt(ci);if(32<=Ci&&Ci<=126){const Fi=Gn[Ci];Fi&&(Yn<ci&&Vn.push(ai.substring(Yn,ci)),Vn.push(Fi),Yn=ci+1)}else Yn<ci&&Vn.push(ai.substring(Yn,ci)),Vn.push(`&#x${Ci.toString(16).toUpperCase()};`),Ci>55295&&(Ci<57344||Ci>65533)&&ci++,Yn=ci+1}return Vn.length===0?ai:(Yn<ai.length&&Vn.push(ai.substring(Yn,ai.length)),Vn.join(""))}function Wn(ai,Vn=!1){const Yn=/^("|').*("|')$/.exec(ai);if(Yn&&Yn[1]===Yn[2]){if(new RegExp(`[^\\\\]${Yn[1]}`).test(ai.slice(1,-1)))return Vn&&(0,In.warn)(`FontFamily contains unescaped ${Yn[1]}: ${ai}.`),!1}else for(const ci of ai.split(/[ \t]+/))if(/^(\d|(-(\d|-)))/.test(ci)||!/^[\w-\\]+$/.test(ci))return Vn&&(0,In.warn)(`FontFamily contains invalid <custom-ident>: ${ai}.`),!1;return!0}function ni(ai){const Vn="14",Yn="400",ci=new Set(["100","200","300","400","500","600","700","800","900","1000","normal","bold","bolder","lighter"]),{fontFamily:bi,fontWeight:Ci,italicAngle:Fi}=ai;if(!Wn(bi,!0))return!1;const zi=Ci?Ci.toString():"";ai.fontWeight=ci.has(zi)?zi:Yn;const _i=parseFloat(Fi);return ai.italicAngle=isNaN(_i)||_i<-90||_i>90?Vn:Fi.toString(),!0}function li(ai){const Vn=["app.launchURL","window.open","xfa.host.gotoURL"],ci=new RegExp("^\\s*("+Vn.join("|").replaceAll(".","\\.")+`)\\((?:'|")([^'"]*)(?:'|")(?:,\\s*(\\w+)\\)|\\))`,"i").exec(ai);if(ci!=null&&ci[2]){const bi=ci[2];let Ci=!1;return ci[3]==="true"&&ci[1]==="app.launchURL"&&(Ci=!0),{url:bi,newWindow:Ci}}return null}function Ai(ai){if(Number.isInteger(ai))return ai.toString();const Vn=Math.round(ai*100);return Vn%100===0?(Vn/100).toString():Vn%10===0?ai.toFixed(1):ai.toFixed(2)}function gi(ai){if(!ai)return null;const Vn=new Map;for(const[Yn,ci]of ai){if(!Yn.startsWith(In.AnnotationEditorPrefix))continue;let bi=Vn.get(ci.pageIndex);bi||(bi=[],Vn.set(ci.pageIndex,bi)),bi.push(ci)}return Vn.size>0?Vn:null}function yi(ai){return/^[\x00-\x7F]*$/.test(ai)}function Ii(ai){const Vn=[];for(let Yn=0,ci=ai.length;Yn<ci;Yn++){const bi=ai.charCodeAt(Yn);Vn.push((bi>>8&255).toString(16).padStart(2,"0"),(bi&255).toString(16).padStart(2,"0"))}return Vn.join("")}function xi(ai,Vn=!1){const Yn=[];Vn&&Yn.push("þÿ");for(let ci=0,bi=ai.length;ci<bi;ci++){const Ci=ai.charCodeAt(ci);Yn.push(String.fromCharCode(Ci>>8&255),String.fromCharCode(Ci&255))}return Yn.join("")}function Qn(ai,Vn,Yn){switch(ai){case 90:return[0,1,-1,0,Vn,0];case 180:return[-1,0,0,-1,Vn,Yn];case 270:return[0,-1,1,0,0,Yn];default:throw new Error("Invalid rotation")}}},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.RefSetCache=Mn.RefSet=Mn.Ref=Mn.Name=Mn.EOF=Mn.Dict=Mn.Cmd=Mn.CIRCULAR_REF=void 0,Mn.clearPrimitiveCaches=ui,Mn.isCmd=ii,Mn.isDict=ri,Mn.isName=Xn,Mn.isRefsEqual=di;var In=ti(2);const Ln=Symbol("CIRCULAR_REF");Mn.CIRCULAR_REF=Ln;const jn=Symbol("EOF");Mn.EOF=jn;let Cn=Object.create(null),Tn=Object.create(null),Rn=Object.create(null);function ui(){Cn=Object.create(null),Tn=Object.create(null),Rn=Object.create(null)}class si{constructor(wi){this.name=wi}static get(wi){return Tn[wi]||(Tn[wi]=new si(wi))}}Mn.Name=si;class ei{constructor(wi){this.cmd=wi}static get(wi){return Cn[wi]||(Cn[wi]=new ei(wi))}}Mn.Cmd=ei;const Bn=function(){return Bn};class Nn{constructor(wi=null){this._map=Object.create(null),this.xref=wi,this.objId=null,this.suppressEncryption=!1,this.__nonSerializable__=Bn}assignXref(wi){this.xref=wi}get size(){return Object.keys(this._map).length}get(wi,Jn,pi){let Zn=this._map[wi];return Zn===void 0&&Jn!==void 0&&(Zn=this._map[Jn],Zn===void 0&&pi!==void 0&&(Zn=this._map[pi])),Zn instanceof Hn&&this.xref?this.xref.fetch(Zn,this.suppressEncryption):Zn}async getAsync(wi,Jn,pi){let Zn=this._map[wi];return Zn===void 0&&Jn!==void 0&&(Zn=this._map[Jn],Zn===void 0&&pi!==void 0&&(Zn=this._map[pi])),Zn instanceof Hn&&this.xref?this.xref.fetchAsync(Zn,this.suppressEncryption):Zn}getArray(wi,Jn,pi){let Zn=this._map[wi];if(Zn===void 0&&Jn!==void 0&&(Zn=this._map[Jn],Zn===void 0&&pi!==void 0&&(Zn=this._map[pi])),Zn instanceof Hn&&this.xref&&(Zn=this.xref.fetch(Zn,this.suppressEncryption)),Array.isArray(Zn)){Zn=Zn.slice();for(let Gn=0,mi=Zn.length;Gn<mi;Gn++)Zn[Gn]instanceof Hn&&this.xref&&(Zn[Gn]=this.xref.fetch(Zn[Gn],this.suppressEncryption))}return Zn}getRaw(wi){return this._map[wi]}getKeys(){return Object.keys(this._map)}getRawValues(){return Object.values(this._map)}set(wi,Jn){this._map[wi]=Jn}has(wi){return this._map[wi]!==void 0}forEach(wi){for(const Jn in this._map)wi(Jn,this.get(Jn))}static get empty(){const wi=new Nn(null);return wi.set=(Jn,pi)=>{(0,In.unreachable)("Should not call `set` on the empty dictionary.")},(0,In.shadow)(this,"empty",wi)}static merge({xref:wi,dictArray:Jn,mergeSubDicts:pi=!1}){const Zn=new Nn(wi),Gn=new Map;for(const mi of Jn)if(mi instanceof Nn)for(const[Wn,ni]of Object.entries(mi._map)){let li=Gn.get(Wn);if(li===void 0)li=[],Gn.set(Wn,li);else if(!pi||!(ni instanceof Nn))continue;li.push(ni)}for(const[mi,Wn]of Gn){if(Wn.length===1||!(Wn[0]instanceof Nn)){Zn._map[mi]=Wn[0];continue}const ni=new Nn(wi);for(const li of Wn)for(const[Ai,gi]of Object.entries(li._map))ni._map[Ai]===void 0&&(ni._map[Ai]=gi);ni.size>0&&(Zn._map[mi]=ni)}return Gn.clear(),Zn.size>0?Zn:Nn.empty}clone(){const wi=new Nn(this.xref);for(const Jn of this.getKeys())wi.set(Jn,this.getRaw(Jn));return wi}}Mn.Dict=Nn;class Hn{constructor(wi,Jn){this.num=wi,this.gen=Jn}toString(){return this.gen===0?`${this.num}R`:`${this.num}R${this.gen}`}static fromString(wi){const Jn=Rn[wi];if(Jn)return Jn;const pi=/^(\d+)R(\d*)$/.exec(wi);return!pi||pi[1]==="0"?null:Rn[wi]=new Hn(parseInt(pi[1]),pi[2]?parseInt(pi[2]):0)}static get(wi,Jn){const pi=Jn===0?`${wi}R`:`${wi}R${Jn}`;return Rn[pi]||(Rn[pi]=new Hn(wi,Jn))}}Mn.Ref=Hn;class On{constructor(wi=null){this._set=new Set(wi==null?void 0:wi._set)}has(wi){return this._set.has(wi.toString())}put(wi){this._set.add(wi.toString())}remove(wi){this._set.delete(wi.toString())}[Symbol.iterator](){return this._set.values()}clear(){this._set.clear()}}Mn.RefSet=On;class hi{constructor(){this._map=new Map}get size(){return this._map.size}get(wi){return this._map.get(wi.toString())}has(wi){return this._map.has(wi.toString())}put(wi,Jn){this._map.set(wi.toString(),Jn)}putAlias(wi,Jn){this._map.set(wi.toString(),this.get(Jn))}[Symbol.iterator](){return this._map.values()}clear(){this._map.clear()}}Mn.RefSetCache=hi;function Xn(fi,wi){return fi instanceof si&&(wi===void 0||fi.name===wi)}function ii(fi,wi){return fi instanceof ei&&(wi===void 0||fi.cmd===wi)}function ri(fi,wi){return fi instanceof Nn&&(wi===void 0||Xn(fi.get("Type"),wi))}function di(fi,wi){return fi.num===wi.num&&fi.gen===wi.gen}},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.BaseStream=void 0;var In=ti(2);class Ln{constructor(){this.constructor===Ln&&(0,In.unreachable)("Cannot initialize BaseStream.")}get length(){(0,In.unreachable)("Abstract getter `length` accessed")}get isEmpty(){(0,In.unreachable)("Abstract getter `isEmpty` accessed")}get isDataLoaded(){return(0,In.shadow)(this,"isDataLoaded",!0)}getByte(){(0,In.unreachable)("Abstract method `getByte` called")}getBytes(Cn){(0,In.unreachable)("Abstract method `getBytes` called")}peekByte(){const Cn=this.getByte();return Cn!==-1&&this.pos--,Cn}peekBytes(Cn){const Tn=this.getBytes(Cn);return this.pos-=Tn.length,Tn}getUint16(){const Cn=this.getByte(),Tn=this.getByte();return Cn===-1||Tn===-1?-1:(Cn<<8)+Tn}getInt32(){const Cn=this.getByte(),Tn=this.getByte(),Rn=this.getByte(),ui=this.getByte();return(Cn<<24)+(Tn<<16)+(Rn<<8)+ui}getByteRange(Cn,Tn){(0,In.unreachable)("Abstract method `getByteRange` called")}getString(Cn){return(0,In.bytesToString)(this.getBytes(Cn))}skip(Cn){this.pos+=Cn||1}reset(){(0,In.unreachable)("Abstract method `reset` called")}moveStart(){(0,In.unreachable)("Abstract method `moveStart` called")}makeSubStream(Cn,Tn,Rn=null){(0,In.unreachable)("Abstract method `makeSubStream` called")}getBaseStreams(){return null}}Mn.BaseStream=Ln},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.NetworkPdfManager=Mn.LocalPdfManager=void 0;var In=ti(2),Ln=ti(7),jn=ti(3),Cn=ti(9),Tn=ti(8);function Rn(Bn){if(Bn){const Nn=(0,In.createValidAbsoluteUrl)(Bn);if(Nn)return Nn.href;(0,In.warn)(`Invalid absolute docBaseUrl: "${Bn}".`)}return null}class ui{constructor(Nn){var Hn;this.constructor===ui&&(0,In.unreachable)("Cannot initialize BasePdfManager."),this._docBaseUrl=Rn(Nn.docBaseUrl),this._docId=Nn.docId,this._password=Nn.password,this.enableXfa=Nn.enableXfa,(Hn=Nn.evaluatorOptions).isOffscreenCanvasSupported&&(Hn.isOffscreenCanvasSupported=In.FeatureTest.isOffscreenCanvasSupported),this.evaluatorOptions=Nn.evaluatorOptions}get docId(){return this._docId}get password(){return this._password}get docBaseUrl(){return this._docBaseUrl}get catalog(){return this.pdfDocument.catalog}ensureDoc(Nn,Hn){return this.ensure(this.pdfDocument,Nn,Hn)}ensureXRef(Nn,Hn){return this.ensure(this.pdfDocument.xref,Nn,Hn)}ensureCatalog(Nn,Hn){return this.ensure(this.pdfDocument.catalog,Nn,Hn)}getPage(Nn){return this.pdfDocument.getPage(Nn)}fontFallback(Nn,Hn){return this.pdfDocument.fontFallback(Nn,Hn)}loadXfaFonts(Nn,Hn){return this.pdfDocument.loadXfaFonts(Nn,Hn)}loadXfaImages(){return this.pdfDocument.loadXfaImages()}serializeXfaData(Nn){return this.pdfDocument.serializeXfaData(Nn)}cleanup(Nn=!1){return this.pdfDocument.cleanup(Nn)}async ensure(Nn,Hn,On){(0,In.unreachable)("Abstract method `ensure` called")}requestRange(Nn,Hn){(0,In.unreachable)("Abstract method `requestRange` called")}requestLoadedStream(Nn=!1){(0,In.unreachable)("Abstract method `requestLoadedStream` called")}sendProgressiveData(Nn){(0,In.unreachable)("Abstract method `sendProgressiveData` called")}updatePassword(Nn){this._password=Nn}terminate(Nn){(0,In.unreachable)("Abstract method `terminate` called")}}class si extends ui{constructor(Nn){super(Nn);const Hn=new Tn.Stream(Nn.source);this.pdfDocument=new Cn.PDFDocument(this,Hn),this._loadedStreamPromise=Promise.resolve(Hn)}async ensure(Nn,Hn,On){const hi=Nn[Hn];return typeof hi=="function"?hi.apply(Nn,On):hi}requestRange(Nn,Hn){return Promise.resolve()}requestLoadedStream(Nn=!1){return this._loadedStreamPromise}terminate(Nn){}}Mn.LocalPdfManager=si;class ei extends ui{constructor(Nn){super(Nn),this.streamManager=new Ln.ChunkedStreamManager(Nn.source,{msgHandler:Nn.handler,length:Nn.length,disableAutoFetch:Nn.disableAutoFetch,rangeChunkSize:Nn.rangeChunkSize}),this.pdfDocument=new Cn.PDFDocument(this,this.streamManager.getStream())}async ensure(Nn,Hn,On){try{const hi=Nn[Hn];return typeof hi=="function"?hi.apply(Nn,On):hi}catch(hi){if(!(hi instanceof jn.MissingDataException))throw hi;return await this.requestRange(hi.begin,hi.end),this.ensure(Nn,Hn,On)}}requestRange(Nn,Hn){return this.streamManager.requestRange(Nn,Hn)}requestLoadedStream(Nn=!1){return this.streamManager.requestAllChunks(Nn)}sendProgressiveData(Nn){this.streamManager.onReceiveData({chunk:Nn})}terminate(Nn){this.streamManager.abort(Nn)}}Mn.NetworkPdfManager=ei},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.ChunkedStreamManager=Mn.ChunkedStream=void 0;var In=ti(3),Ln=ti(2),jn=ti(8);class Cn extends jn.Stream{constructor(ui,si,ei){super(new Uint8Array(ui),0,ui,null),this.chunkSize=si,this._loadedChunks=new Set,this.numChunks=Math.ceil(ui/si),this.manager=ei,this.progressiveDataLength=0,this.lastSuccessfulEnsureByteChunk=-1}getMissingChunks(){const ui=[];for(let si=0,ei=this.numChunks;si<ei;++si)this._loadedChunks.has(si)||ui.push(si);return ui}get numChunksLoaded(){return this._loadedChunks.size}get isDataLoaded(){return this.numChunksLoaded===this.numChunks}onReceiveData(ui,si){const ei=this.chunkSize;if(ui%ei!==0)throw new Error(`Bad begin offset: ${ui}`);const Bn=ui+si.byteLength;if(Bn%ei!==0&&Bn!==this.bytes.length)throw new Error(`Bad end offset: ${Bn}`);this.bytes.set(new Uint8Array(si),ui);const Nn=Math.floor(ui/ei),Hn=Math.floor((Bn-1)/ei)+1;for(let On=Nn;On<Hn;++On)this._loadedChunks.add(On)}onReceiveProgressiveData(ui){let si=this.progressiveDataLength;const ei=Math.floor(si/this.chunkSize);this.bytes.set(new Uint8Array(ui),si),si+=ui.byteLength,this.progressiveDataLength=si;const Bn=si>=this.end?this.numChunks:Math.floor(si/this.chunkSize);for(let Nn=ei;Nn<Bn;++Nn)this._loadedChunks.add(Nn)}ensureByte(ui){if(ui<this.progressiveDataLength)return;const si=Math.floor(ui/this.chunkSize);if(!(si>this.numChunks)&&si!==this.lastSuccessfulEnsureByteChunk){if(!this._loadedChunks.has(si))throw new In.MissingDataException(ui,ui+1);this.lastSuccessfulEnsureByteChunk=si}}ensureRange(ui,si){if(ui>=si||si<=this.progressiveDataLength)return;const ei=Math.floor(ui/this.chunkSize);if(ei>this.numChunks)return;const Bn=Math.min(Math.floor((si-1)/this.chunkSize)+1,this.numChunks);for(let Nn=ei;Nn<Bn;++Nn)if(!this._loadedChunks.has(Nn))throw new In.MissingDataException(ui,si)}nextEmptyChunk(ui){const si=this.numChunks;for(let ei=0;ei<si;++ei){const Bn=(ui+ei)%si;if(!this._loadedChunks.has(Bn))return Bn}return null}hasChunk(ui){return this._loadedChunks.has(ui)}getByte(){const ui=this.pos;return ui>=this.end?-1:(ui>=this.progressiveDataLength&&this.ensureByte(ui),this.bytes[this.pos++])}getBytes(ui){const si=this.bytes,ei=this.pos,Bn=this.end;if(!ui)return Bn>this.progressiveDataLength&&this.ensureRange(ei,Bn),si.subarray(ei,Bn);let Nn=ei+ui;return Nn>Bn&&(Nn=Bn),Nn>this.progressiveDataLength&&this.ensureRange(ei,Nn),this.pos=Nn,si.subarray(ei,Nn)}getByteRange(ui,si){return ui<0&&(ui=0),si>this.end&&(si=this.end),si>this.progressiveDataLength&&this.ensureRange(ui,si),this.bytes.subarray(ui,si)}makeSubStream(ui,si,ei=null){si?ui+si>this.progressiveDataLength&&this.ensureRange(ui,ui+si):ui>=this.progressiveDataLength&&this.ensureByte(ui);function Bn(){}Bn.prototype=Object.create(this),Bn.prototype.getMissingChunks=function(){const Hn=this.chunkSize,On=Math.floor(this.start/Hn),hi=Math.floor((this.end-1)/Hn)+1,Xn=[];for(let ii=On;ii<hi;++ii)this._loadedChunks.has(ii)||Xn.push(ii);return Xn},Object.defineProperty(Bn.prototype,"isDataLoaded",{get(){return this.numChunksLoaded===this.numChunks?!0:this.getMissingChunks().length===0},configurable:!0});const Nn=new Bn;return Nn.pos=Nn.start=ui,Nn.end=ui+si||this.end,Nn.dict=ei,Nn}getBaseStreams(){return[this]}}Mn.ChunkedStream=Cn;class Tn{constructor(ui,si){this.length=si.length,this.chunkSize=si.rangeChunkSize,this.stream=new Cn(this.length,this.chunkSize,this),this.pdfNetworkStream=ui,this.disableAutoFetch=si.disableAutoFetch,this.msgHandler=si.msgHandler,this.currRequestId=0,this._chunksNeededByRequest=new Map,this._requestsByChunk=new Map,this._promisesByRequest=new Map,this.progressiveDataLength=0,this.aborted=!1,this._loadedStreamCapability=new Ln.PromiseCapability}sendRequest(ui,si){const ei=this.pdfNetworkStream.getRangeReader(ui,si);ei.isStreamingSupported||(ei.onProgress=this.onProgress.bind(this));let Bn=[],Nn=0;return new Promise((Hn,On)=>{const hi=({value:Xn,done:ii})=>{try{if(ii){const ri=(0,In.arrayBuffersToBytes)(Bn);Bn=null,Hn(ri);return}Nn+=Xn.byteLength,ei.isStreamingSupported&&this.onProgress({loaded:Nn}),Bn.push(Xn),ei.read().then(hi,On)}catch(ri){On(ri)}};ei.read().then(hi,On)}).then(Hn=>{this.aborted||this.onReceiveData({chunk:Hn,begin:ui})})}requestAllChunks(ui=!1){if(!ui){const si=this.stream.getMissingChunks();this._requestChunks(si)}return this._loadedStreamCapability.promise}_requestChunks(ui){const si=this.currRequestId++,ei=new Set;this._chunksNeededByRequest.set(si,ei);for(const Hn of ui)this.stream.hasChunk(Hn)||ei.add(Hn);if(ei.size===0)return Promise.resolve();const Bn=new Ln.PromiseCapability;this._promisesByRequest.set(si,Bn);const Nn=[];for(const Hn of ei){let On=this._requestsByChunk.get(Hn);On||(On=[],this._requestsByChunk.set(Hn,On),Nn.push(Hn)),On.push(si)}if(Nn.length>0){const Hn=this.groupChunks(Nn);for(const On of Hn){const hi=On.beginChunk*this.chunkSize,Xn=Math.min(On.endChunk*this.chunkSize,this.length);this.sendRequest(hi,Xn).catch(Bn.reject)}}return Bn.promise.catch(Hn=>{if(!this.aborted)throw Hn})}getStream(){return this.stream}requestRange(ui,si){si=Math.min(si,this.length);const ei=this.getBeginChunk(ui),Bn=this.getEndChunk(si),Nn=[];for(let Hn=ei;Hn<Bn;++Hn)Nn.push(Hn);return this._requestChunks(Nn)}requestRanges(ui=[]){const si=[];for(const ei of ui){const Bn=this.getBeginChunk(ei.begin),Nn=this.getEndChunk(ei.end);for(let Hn=Bn;Hn<Nn;++Hn)si.includes(Hn)||si.push(Hn)}return si.sort(function(ei,Bn){return ei-Bn}),this._requestChunks(si)}groupChunks(ui){const si=[];let ei=-1,Bn=-1;for(let Nn=0,Hn=ui.length;Nn<Hn;++Nn){const On=ui[Nn];ei<0&&(ei=On),Bn>=0&&Bn+1!==On&&(si.push({beginChunk:ei,endChunk:Bn+1}),ei=On),Nn+1===ui.length&&si.push({beginChunk:ei,endChunk:On+1}),Bn=On}return si}onProgress(ui){this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize+ui.loaded,total:this.length})}onReceiveData(ui){const si=ui.chunk,ei=ui.begin===void 0,Bn=ei?this.progressiveDataLength:ui.begin,Nn=Bn+si.byteLength,Hn=Math.floor(Bn/this.chunkSize),On=Nn<this.length?Math.floor(Nn/this.chunkSize):Math.ceil(Nn/this.chunkSize);ei?(this.stream.onReceiveProgressiveData(si),this.progressiveDataLength=Nn):this.stream.onReceiveData(Bn,si),this.stream.isDataLoaded&&this._loadedStreamCapability.resolve(this.stream);const hi=[];for(let Xn=Hn;Xn<On;++Xn){const ii=this._requestsByChunk.get(Xn);if(ii){this._requestsByChunk.delete(Xn);for(const ri of ii){const di=this._chunksNeededByRequest.get(ri);di.has(Xn)&&di.delete(Xn),!(di.size>0)&&hi.push(ri)}}}if(!this.disableAutoFetch&&this._requestsByChunk.size===0){let Xn;if(this.stream.numChunksLoaded===1){const ii=this.stream.numChunks-1;this.stream.hasChunk(ii)||(Xn=ii)}else Xn=this.stream.nextEmptyChunk(On);Number.isInteger(Xn)&&this._requestChunks([Xn])}for(const Xn of hi){const ii=this._promisesByRequest.get(Xn);this._promisesByRequest.delete(Xn),ii.resolve()}this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize,total:this.length})}onError(ui){this._loadedStreamCapability.reject(ui)}getBeginChunk(ui){return Math.floor(ui/this.chunkSize)}getEndChunk(ui){return Math.floor((ui-1)/this.chunkSize)+1}abort(ui){var si;this.aborted=!0,(si=this.pdfNetworkStream)==null||si.cancelAllRequests(ui);for(const ei of this._promisesByRequest.values())ei.reject(ui)}}Mn.ChunkedStreamManager=Tn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.StringStream=Mn.Stream=Mn.NullStream=void 0;var In=ti(5),Ln=ti(2);class jn extends In.BaseStream{constructor(ui,si,ei,Bn){super(),this.bytes=ui instanceof Uint8Array?ui:new Uint8Array(ui),this.start=si||0,this.pos=this.start,this.end=si+ei||this.bytes.length,this.dict=Bn}get length(){return this.end-this.start}get isEmpty(){return this.length===0}getByte(){return this.pos>=this.end?-1:this.bytes[this.pos++]}getBytes(ui){const si=this.bytes,ei=this.pos,Bn=this.end;if(!ui)return si.subarray(ei,Bn);let Nn=ei+ui;return Nn>Bn&&(Nn=Bn),this.pos=Nn,si.subarray(ei,Nn)}getByteRange(ui,si){return ui<0&&(ui=0),si>this.end&&(si=this.end),this.bytes.subarray(ui,si)}reset(){this.pos=this.start}moveStart(){this.start=this.pos}makeSubStream(ui,si,ei=null){return new jn(this.bytes.buffer,ui,si,ei)}}Mn.Stream=jn;class Cn extends jn{constructor(ui){super((0,Ln.stringToBytes)(ui))}}Mn.StringStream=Cn;class Tn extends jn{constructor(){super(new Uint8Array(0))}}Mn.NullStream=Tn},(oi,Mn,ti)=>{var yi,qc,xi,Vc;Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.Page=Mn.PDFDocument=void 0;var In=ti(2),Ln=ti(10),jn=ti(3),Cn=ti(4),Tn=ti(51),Rn=ti(5),ui=ti(74),si=ti(66),ei=ti(68),Bn=ti(102),Nn=ti(16),Hn=ti(8),On=ti(76),hi=ti(64),Xn=ti(13),ii=ti(18),ri=ti(72),di=ti(73),fi=ti(77),wi=ti(103);const Jn=1,pi=[0,0,612,792];class Zn{constructor({pdfManager:Vn,xref:Yn,pageIndex:ci,pageDict:bi,ref:Ci,globalIdFactory:Fi,fontCache:zi,builtInCMapCache:_i,standardFontDataCache:ji,globalImageCache:Pi,systemFontCache:Ni,nonBlendModesSet:Si,xfaFactory:Ti}){Ki(this,yi);this.pdfManager=Vn,this.pageIndex=ci,this.pageDict=bi,this.xref=Yn,this.ref=Ci,this.fontCache=zi,this.builtInCMapCache=_i,this.standardFontDataCache=ji,this.globalImageCache=Pi,this.systemFontCache=Ni,this.nonBlendModesSet=Si,this.evaluatorOptions=Vn.evaluatorOptions,this.resourcesPromise=null,this.xfaFactory=Ti;const Ri={obj:0};this._localIdFactory=class extends Fi{static createObjId(){return`p${ci}_${++Ri.obj}`}static getPageObjId(){return`p${Ci.toString()}`}}}_getInheritableProperty(Vn,Yn=!1){const ci=(0,jn.getInheritableProperty)({dict:this.pageDict,key:Vn,getArray:Yn,stopWhenFound:!1});return Array.isArray(ci)?ci.length===1||!(ci[0]instanceof Cn.Dict)?ci[0]:Cn.Dict.merge({xref:this.xref,dictArray:ci}):ci}get content(){return this.pageDict.getArray("Contents")}get resources(){const Vn=this._getInheritableProperty("Resources");return(0,In.shadow)(this,"resources",Vn instanceof Cn.Dict?Vn:Cn.Dict.empty)}_getBoundingBox(Vn){if(this.xfaData)return this.xfaData.bbox;let Yn=this._getInheritableProperty(Vn,!0);if(Array.isArray(Yn)&&Yn.length===4){if(Yn=In.Util.normalizeRect(Yn),Yn[2]-Yn[0]>0&&Yn[3]-Yn[1]>0)return Yn;(0,In.warn)(`Empty, or invalid, /${Vn} entry.`)}return null}get mediaBox(){return(0,In.shadow)(this,"mediaBox",this._getBoundingBox("MediaBox")||pi)}get cropBox(){return(0,In.shadow)(this,"cropBox",this._getBoundingBox("CropBox")||this.mediaBox)}get userUnit(){let Vn=this.pageDict.get("UserUnit");return(typeof Vn!="number"||Vn<=0)&&(Vn=Jn),(0,In.shadow)(this,"userUnit",Vn)}get view(){const{cropBox:Vn,mediaBox:Yn}=this;if(Vn!==Yn&&!(0,In.isArrayEqual)(Vn,Yn)){const ci=In.Util.intersect(Vn,Yn);if(ci&&ci[2]-ci[0]>0&&ci[3]-ci[1]>0)return(0,In.shadow)(this,"view",ci);(0,In.warn)("Empty /CropBox and /MediaBox intersection.")}return(0,In.shadow)(this,"view",Yn)}get rotate(){let Vn=this._getInheritableProperty("Rotate")||0;return Vn%90!==0?Vn=0:Vn>=360?Vn%=360:Vn<0&&(Vn=(Vn%360+360)%360),(0,In.shadow)(this,"rotate",Vn)}_onSubStreamError(Vn,Yn){if(this.evaluatorOptions.ignoreErrors){(0,In.warn)(`getContentStream - ignoring sub-stream (${Yn}): "${Vn}".`);return}throw Vn}getContentStream(){return this.pdfManager.ensure(this,"content").then(Vn=>Vn instanceof Rn.BaseStream?Vn:Array.isArray(Vn)?new ii.StreamsSequenceStream(Vn,this._onSubStreamError.bind(this)):new Hn.NullStream)}get xfaData(){return(0,In.shadow)(this,"xfaData",this.xfaFactory?{bbox:this.xfaFactory.getBoundingBox(this.pageIndex)}:null)}async saveNewAnnotations(Vn,Yn,ci,bi){if(this.xfaFactory)throw new Error("XFA: Cannot save new annotations.");const Ci=new Xn.PartialEvaluator({xref:this.xref,handler:Vn,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions}),Fi=new Cn.RefSet,zi=new Cn.RefSet;Qi(this,yi,qc).call(this,ci,Fi,zi);const _i=this.pageDict,ji=this.annotations.filter(Ri=>!(Ri instanceof Cn.Ref&&Fi.has(Ri))),Pi=await Ln.AnnotationFactory.saveNewAnnotations(Ci,Yn,ci,bi);for(const{ref:Ri}of Pi.annotations)Ri instanceof Cn.Ref&&!zi.has(Ri)&&ji.push(Ri);const Ni=_i.get("Annots");_i.set("Annots",ji);const Si=[];await(0,di.writeObject)(this.ref,_i,Si,this.xref),Ni&&_i.set("Annots",Ni);const Ti=Pi.dependencies;return Ti.push({ref:this.ref,data:Si.join("")},...Pi.annotations),Ti}save(Vn,Yn,ci){const bi=new Xn.PartialEvaluator({xref:this.xref,handler:Vn,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions});return this._parsedAnnotations.then(function(Ci){const Fi=[];for(const zi of Ci)zi.mustBePrinted(ci)&&Fi.push(zi.save(bi,Yn,ci).catch(function(_i){return(0,In.warn)(`save - ignoring annotation data during "${Yn.name}" task: "${_i}".`),null}));return Promise.all(Fi).then(function(zi){return zi.filter(_i=>!!_i)})})}loadResources(Vn){return this.resourcesPromise||(this.resourcesPromise=this.pdfManager.ensure(this,"resources")),this.resourcesPromise.then(()=>new On.ObjectLoader(this.resources,Vn,this.xref).load())}getOperatorList({handler:Vn,sink:Yn,task:ci,intent:bi,cacheKey:Ci,annotationStorage:Fi=null}){const zi=this.getContentStream(),_i=this.loadResources(["ColorSpace","ExtGState","Font","Pattern","Properties","Shading","XObject"]),ji=new Xn.PartialEvaluator({xref:this.xref,handler:Vn,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions}),Pi=this.xfaFactory?null:(0,jn.getNewAnnotationsMap)(Fi);let Ni=null,Si=Promise.resolve(null);if(Pi){const Mi=Pi.get(this.pageIndex);if(Mi){const Ui=this.pdfManager.ensureDoc("annotationGlobals");let Hi;const Li=new Set;for(const{bitmapId:$i,bitmap:Bi}of Mi)$i&&!Bi&&!Li.has($i)&&Li.add($i);const{isOffscreenCanvasSupported:Ei}=this.evaluatorOptions;if(Li.size>0){const $i=Mi.slice();for(const[Bi,Oi]of Fi)Bi.startsWith(In.AnnotationEditorPrefix)&&Oi.bitmap&&Li.has(Oi.bitmapId)&&$i.push(Oi);Hi=Ln.AnnotationFactory.generateImages($i,this.xref,Ei)}else Hi=Ln.AnnotationFactory.generateImages(Mi,this.xref,Ei);Ni=new Cn.RefSet,Qi(this,yi,qc).call(this,Mi,Ni,null),Si=Ui.then($i=>$i?Ln.AnnotationFactory.printNewAnnotations($i,ji,ci,Mi,Hi):null)}}const Ri=Promise.all([zi,_i]).then(([Mi])=>{const Ui=new hi.OperatorList(bi,Yn);return Vn.send("StartRenderPage",{transparency:ji.hasBlendModes(this.resources,this.nonBlendModesSet),pageIndex:this.pageIndex,cacheKey:Ci}),ji.getOperatorList({stream:Mi,task:ci,resources:this.resources,operatorList:Ui}).then(function(){return Ui})});return Promise.all([Ri,this._parsedAnnotations,Si]).then(function([Mi,Ui,Hi]){if(Hi){Ui=Ui.filter(Xi=>!(Xi.ref&&Ni.has(Xi.ref)));for(let Xi=0,Gi=Hi.length;Xi<Gi;Xi++){const qi=Hi[Xi];if(qi.refToReplace){const ns=Ui.findIndex(is=>is.ref&&(0,Cn.isRefsEqual)(is.ref,qi.refToReplace));ns>=0&&(Ui.splice(ns,1,qi),Hi.splice(Xi--,1),Gi--)}}Ui=Ui.concat(Hi)}if(Ui.length===0||bi&In.RenderingIntentFlag.ANNOTATIONS_DISABLE)return Mi.flush(!0),{length:Mi.totalLength};const Li=!!(bi&In.RenderingIntentFlag.ANNOTATIONS_FORMS),Ei=!!(bi&In.RenderingIntentFlag.ANY),$i=!!(bi&In.RenderingIntentFlag.DISPLAY),Bi=!!(bi&In.RenderingIntentFlag.PRINT),Oi=[];for(const Xi of Ui)(Ei||$i&&Xi.mustBeViewed(Fi,Li)||Bi&&Xi.mustBePrinted(Fi))&&Oi.push(Xi.getOperatorList(ji,ci,bi,Li,Fi).catch(function(Gi){return(0,In.warn)(`getOperatorList - ignoring annotation data during "${ci.name}" task: "${Gi}".`),{opList:null,separateForm:!1,separateCanvas:!1}}));return Promise.all(Oi).then(function(Xi){let Gi=!1,qi=!1;for(const{opList:ns,separateForm:is,separateCanvas:as}of Xi)Mi.addOpList(ns),Gi||(Gi=is),qi||(qi=as);return Mi.flush(!0,{form:Gi,canvas:qi}),{length:Mi.totalLength}})})}extractTextContent({handler:Vn,task:Yn,includeMarkedContent:ci,disableNormalization:bi,sink:Ci}){const Fi=this.getContentStream(),zi=this.loadResources(["ExtGState","Font","Properties","XObject"]);return Promise.all([Fi,zi]).then(([ji])=>new Xn.PartialEvaluator({xref:this.xref,handler:Vn,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions}).getTextContent({stream:ji,task:Yn,resources:this.resources,includeMarkedContent:ci,disableNormalization:bi,sink:Ci,viewBox:this.view}))}async getStructTree(){const Vn=await this.pdfManager.ensureCatalog("structTreeRoot");return Vn?(await this._parsedAnnotations,(await this.pdfManager.ensure(this,"_parseStructTree",[Vn])).serializable):null}_parseStructTree(Vn){const Yn=new ri.StructTreePage(Vn,this.pageDict);return Yn.parse(this.ref),Yn}async getAnnotationsData(Vn,Yn,ci){const bi=await this._parsedAnnotations;if(bi.length===0)return bi;const Ci=[],Fi=[];let zi;const _i=!!(ci&In.RenderingIntentFlag.ANY),ji=!!(ci&In.RenderingIntentFlag.DISPLAY),Pi=!!(ci&In.RenderingIntentFlag.PRINT);for(const Ni of bi){const Si=_i||ji&&Ni.viewable;(Si||Pi&&Ni.printable)&&Ci.push(Ni.data),Ni.hasTextContent&&Si&&(zi||(zi=new Xn.PartialEvaluator({xref:this.xref,handler:Vn,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions})),Fi.push(Ni.extractTextContent(zi,Yn,[-1/0,-1/0,1/0,1/0]).catch(function(Ti){(0,In.warn)(`getAnnotationsData - ignoring textContent during "${Yn.name}" task: "${Ti}".`)})))}return await Promise.all(Fi),Ci}get annotations(){const Vn=this._getInheritableProperty("Annots");return(0,In.shadow)(this,"annotations",Array.isArray(Vn)?Vn:[])}get _parsedAnnotations(){const Vn=this.pdfManager.ensure(this,"annotations").then(async Yn=>{if(Yn.length===0)return Yn;const ci=await this.pdfManager.ensureDoc("annotationGlobals");if(!ci)return[];const bi=[];for(const zi of Yn)bi.push(Ln.AnnotationFactory.create(this.xref,zi,ci,this._localIdFactory,!1,this.ref).catch(function(_i){return(0,In.warn)(`_parsedAnnotations: "${_i}".`),null}));const Ci=[];let Fi;for(const zi of await Promise.all(bi))if(zi){if(zi instanceof Ln.PopupAnnotation){(Fi||(Fi=[])).push(zi);continue}Ci.push(zi)}return Fi&&Ci.push(...Fi),Ci});return(0,In.shadow)(this,"_parsedAnnotations",Vn)}get jsActions(){const Vn=(0,jn.collectActions)(this.xref,this.pageDict,In.PageActionEventType);return(0,In.shadow)(this,"jsActions",Vn)}}yi=new WeakSet,qc=function(Vn,Yn,ci){for(const bi of Vn)if(bi.id){const Ci=Cn.Ref.fromString(bi.id);if(!Ci){(0,In.warn)(`A non-linked annotation cannot be modified: ${bi.id}`);continue}if(bi.deleted){Yn.put(Ci);continue}ci==null||ci.put(Ci),bi.ref=Ci,delete bi.id}},Mn.Page=Zn;const Gn=new Uint8Array([37,80,68,70,45]),mi=new Uint8Array([115,116,97,114,116,120,114,101,102]),Wn=new Uint8Array([101,110,100,111,98,106]),ni=1024,li="\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0";function Ai(ai,Vn,Yn=1024,ci=!1){const bi=Vn.length,Ci=ai.peekBytes(Yn),Fi=Ci.length-bi;if(Fi<=0)return!1;if(ci){const zi=bi-1;let _i=Ci.length-1;for(;_i>=zi;){let ji=0;for(;ji<bi&&Ci[_i-ji]===Vn[zi-ji];)ji++;if(ji>=bi)return ai.pos+=_i-zi,!0;_i--}}else{let zi=0;for(;zi<=Fi;){let _i=0;for(;_i<bi&&Ci[zi+_i]===Vn[_i];)_i++;if(_i>=bi)return ai.pos+=zi,!0;zi++}}return!1}class gi{constructor(Vn,Yn){Ki(this,xi);if(Yn.length<=0)throw new In.InvalidPDFException("The PDF file is empty, i.e. its size is zero bytes.");this.pdfManager=Vn,this.stream=Yn,this.xref=new wi.XRef(Yn,Vn),this._pagePromises=new Map,this._version=null;const ci={font:0};this._globalIdFactory=class{static getDocId(){return`g_${Vn.docId}`}static createFontId(){return`f${++ci.font}`}static createObjId(){(0,In.unreachable)("Abstract method `createObjId` called.")}static getPageObjId(){(0,In.unreachable)("Abstract method `getPageObjId` called.")}}}parse(Vn){this.xref.parse(Vn),this.catalog=new si.Catalog(this.pdfManager,this.xref)}get linearization(){let Vn=null;try{Vn=Nn.Linearization.create(this.stream)}catch(Yn){if(Yn instanceof jn.MissingDataException)throw Yn;(0,In.info)(Yn)}return(0,In.shadow)(this,"linearization",Vn)}get startXRef(){const Vn=this.stream;let Yn=0;if(this.linearization)Vn.reset(),Ai(Vn,Wn)&&(Yn=Vn.pos+6-Vn.start);else{const bi=mi.length;let Ci=!1,Fi=Vn.end;for(;!Ci&&Fi>0;)Fi-=1024-bi,Fi<0&&(Fi=0),Vn.pos=Fi,Ci=Ai(Vn,mi,1024,!0);if(Ci){Vn.skip(9);let zi;do zi=Vn.getByte();while((0,jn.isWhiteSpace)(zi));let _i="";for(;zi>=32&&zi<=57;)_i+=String.fromCharCode(zi),zi=Vn.getByte();Yn=parseInt(_i,10),isNaN(Yn)&&(Yn=0)}}return(0,In.shadow)(this,"startXRef",Yn)}checkHeader(){const Vn=this.stream;if(Vn.reset(),!Ai(Vn,Gn))return;Vn.moveStart(),Vn.skip(Gn.length);let Yn="",ci;for(;(ci=Vn.getByte())>32&&Yn.length<7;)Yn+=String.fromCharCode(ci);jn.PDF_VERSION_REGEXP.test(Yn)?this._version=Yn:(0,In.warn)(`Invalid PDF header version: ${Yn}`)}parseStartXRef(){this.xref.setStartXRef(this.startXRef)}get numPages(){let Vn=0;return this.catalog.hasActualNumPages?Vn=this.catalog.numPages:this.xfaFactory?Vn=this.xfaFactory.getNumPages():this.linearization?Vn=this.linearization.numPages:Vn=this.catalog.numPages,(0,In.shadow)(this,"numPages",Vn)}_hasOnlyDocumentSignatures(Vn,Yn=0){return Array.isArray(Vn)?Vn.every(bi=>{if(bi=this.xref.fetchIfRef(bi),!(bi instanceof Cn.Dict))return!1;if(bi.has("Kids"))return++Yn>10?((0,In.warn)("_hasOnlyDocumentSignatures: maximum recursion depth reached"),!1):this._hasOnlyDocumentSignatures(bi.get("Kids"),Yn);const Ci=(0,Cn.isName)(bi.get("FT"),"Sig"),Fi=bi.get("Rect"),zi=Array.isArray(Fi)&&Fi.every(_i=>_i===0);return Ci&&zi}):!1}get _xfaStreams(){const Vn=this.catalog.acroForm;if(!Vn)return null;const Yn=Vn.get("XFA"),ci={"xdp:xdp":"",template:"",datasets:"",config:"",connectionSet:"",localeSet:"",stylesheet:"","/xdp:xdp":""};if(Yn instanceof Rn.BaseStream&&!Yn.isEmpty)return ci["xdp:xdp"]=Yn,ci;if(!Array.isArray(Yn)||Yn.length===0)return null;for(let bi=0,Ci=Yn.length;bi<Ci;bi+=2){let Fi;if(bi===0?Fi="xdp:xdp":bi===Ci-2?Fi="/xdp:xdp":Fi=Yn[bi],!ci.hasOwnProperty(Fi))continue;const zi=this.xref.fetchIfRef(Yn[bi+1]);!(zi instanceof Rn.BaseStream)||zi.isEmpty||(ci[Fi]=zi)}return ci}get xfaDatasets(){const Vn=this._xfaStreams;if(!Vn)return(0,In.shadow)(this,"xfaDatasets",null);for(const Yn of["datasets","xdp:xdp"]){const ci=Vn[Yn];if(ci)try{const bi=(0,In.stringToUTF8String)(ci.getString()),Ci={[Yn]:bi};return(0,In.shadow)(this,"xfaDatasets",new Bn.DatasetReader(Ci))}catch{(0,In.warn)("XFA - Invalid utf-8 string.");break}}return(0,In.shadow)(this,"xfaDatasets",null)}get xfaData(){const Vn=this._xfaStreams;if(!Vn)return null;const Yn=Object.create(null);for(const[ci,bi]of Object.entries(Vn))if(bi)try{Yn[ci]=(0,In.stringToUTF8String)(bi.getString())}catch{return(0,In.warn)("XFA - Invalid utf-8 string."),null}return Yn}get xfaFactory(){let Vn;return this.pdfManager.enableXfa&&this.catalog.needsRendering&&this.formInfo.hasXfa&&!this.formInfo.hasAcroForm&&(Vn=this.xfaData),(0,In.shadow)(this,"xfaFactory",Vn?new fi.XFAFactory(Vn):null)}get isPureXfa(){return this.xfaFactory?this.xfaFactory.isValid():!1}get htmlForXfa(){return this.xfaFactory?this.xfaFactory.getPages():null}async loadXfaImages(){const Vn=await this.pdfManager.ensureCatalog("xfaImages");if(!Vn)return;const Yn=Vn.getKeys();await new On.ObjectLoader(Vn,Yn,this.xref).load();const bi=new Map;for(const Ci of Yn){const Fi=Vn.get(Ci);Fi instanceof Rn.BaseStream&&bi.set(Ci,Fi.getBytes())}this.xfaFactory.setImages(bi)}async loadXfaFonts(Vn,Yn){const ci=await this.pdfManager.ensureCatalog("acroForm");if(!ci)return;const bi=await ci.getAsync("DR");if(!(bi instanceof Cn.Dict))return;await new On.ObjectLoader(bi,["Font"],this.xref).load();const Fi=bi.get("Font");if(!(Fi instanceof Cn.Dict))return;const zi=Object.assign(Object.create(null),this.pdfManager.evaluatorOptions);zi.useSystemFonts=!1;const _i=new Xn.PartialEvaluator({xref:this.xref,handler:Vn,pageIndex:-1,idFactory:this._globalIdFactory,fontCache:this.catalog.fontCache,builtInCMapCache:this.catalog.builtInCMapCache,standardFontDataCache:this.catalog.standardFontDataCache,options:zi}),ji=new hi.OperatorList,Pi=[],Ni={get font(){return Pi.at(-1)},set font(Ui){Pi.push(Ui)},clone(){return this}},Si=new Map;Fi.forEach((Ui,Hi)=>{Si.set(Ui,Hi)});const Ti=[];for(const[Ui,Hi]of Si){const Li=Hi.get("FontDescriptor");if(!(Li instanceof Cn.Dict))continue;let Ei=Li.get("FontFamily");Ei=Ei.replaceAll(/[ ]+(\d)/g,"$1");const $i=Li.get("FontWeight"),Bi=-Li.get("ItalicAngle"),Oi={fontFamily:Ei,fontWeight:$i,italicAngle:Bi};(0,jn.validateCSSFont)(Oi)&&Ti.push(_i.handleSetFont(bi,[Cn.Name.get(Ui),1],null,ji,Yn,Ni,null,Oi).catch(function(Xi){return(0,In.warn)(`loadXfaFonts: "${Xi}".`),null}))}await Promise.all(Ti);const Ri=this.xfaFactory.setFonts(Pi);if(!Ri)return;zi.ignoreErrors=!0,Ti.length=0,Pi.length=0;const Mi=new Set;for(const Ui of Ri)(0,Tn.getXfaFontName)(`${Ui}-Regular`)||Mi.add(Ui);Mi.size&&Ri.push("PdfJS-Fallback");for(const Ui of Ri)if(!Mi.has(Ui))for(const Hi of[{name:"Regular",fontWeight:400,italicAngle:0},{name:"Bold",fontWeight:700,italicAngle:0},{name:"Italic",fontWeight:400,italicAngle:12},{name:"BoldItalic",fontWeight:700,italicAngle:12}]){const Li=`${Ui}-${Hi.name}`,Ei=(0,Tn.getXfaFontDict)(Li);Ti.push(_i.handleSetFont(bi,[Cn.Name.get(Li),1],null,ji,Yn,Ni,Ei,{fontFamily:Ui,fontWeight:Hi.fontWeight,italicAngle:Hi.italicAngle}).catch(function($i){return(0,In.warn)(`loadXfaFonts: "${$i}".`),null}))}await Promise.all(Ti),this.xfaFactory.appendFonts(Pi,Mi)}async serializeXfaData(Vn){return this.xfaFactory?this.xfaFactory.serializeData(Vn):null}get version(){return this.catalog.version||this._version}get formInfo(){const Vn={hasFields:!1,hasAcroForm:!1,hasXfa:!1,hasSignatures:!1},Yn=this.catalog.acroForm;if(!Yn)return(0,In.shadow)(this,"formInfo",Vn);try{const ci=Yn.get("Fields"),bi=Array.isArray(ci)&&ci.length>0;Vn.hasFields=bi;const Ci=Yn.get("XFA");Vn.hasXfa=Array.isArray(Ci)&&Ci.length>0||Ci instanceof Rn.BaseStream&&!Ci.isEmpty;const zi=!!(Yn.get("SigFlags")&1),_i=zi&&this._hasOnlyDocumentSignatures(ci);Vn.hasAcroForm=bi&&!_i,Vn.hasSignatures=zi}catch(ci){if(ci instanceof jn.MissingDataException)throw ci;(0,In.warn)(`Cannot fetch form information: "${ci}".`)}return(0,In.shadow)(this,"formInfo",Vn)}get documentInfo(){const Vn={PDFFormatVersion:this.version,Language:this.catalog.lang,EncryptFilterName:this.xref.encrypt?this.xref.encrypt.filterName:null,IsLinearized:!!this.linearization,IsAcroFormPresent:this.formInfo.hasAcroForm,IsXFAPresent:this.formInfo.hasXfa,IsCollectionPresent:!!this.catalog.collection,IsSignaturesPresent:this.formInfo.hasSignatures};let Yn;try{Yn=this.xref.trailer.get("Info")}catch(ci){if(ci instanceof jn.MissingDataException)throw ci;(0,In.info)("The document information dictionary is invalid.")}if(!(Yn instanceof Cn.Dict))return(0,In.shadow)(this,"documentInfo",Vn);for(const ci of Yn.getKeys()){const bi=Yn.get(ci);switch(ci){case"Title":case"Author":case"Subject":case"Keywords":case"Creator":case"Producer":case"CreationDate":case"ModDate":if(typeof bi=="string"){Vn[ci]=(0,In.stringToPDFString)(bi);continue}break;case"Trapped":if(bi instanceof Cn.Name){Vn[ci]=bi;continue}break;default:let Ci;switch(typeof bi){case"string":Ci=(0,In.stringToPDFString)(bi);break;case"number":case"boolean":Ci=bi;break;default:bi instanceof Cn.Name&&(Ci=bi);break}if(Ci===void 0){(0,In.warn)(`Bad value, for custom key "${ci}", in Info: ${bi}.`);continue}Vn.Custom||(Vn.Custom=Object.create(null)),Vn.Custom[ci]=Ci;continue}(0,In.warn)(`Bad value, for key "${ci}", in Info: ${bi}.`)}return(0,In.shadow)(this,"documentInfo",Vn)}get fingerprints(){function Vn(Fi){return typeof Fi=="string"&&Fi.length>0&&Fi!==li}function Yn(Fi){const zi=[];for(const _i of Fi){const ji=_i.toString(16);zi.push(ji.padStart(2,"0"))}return zi.join("")}const ci=this.xref.trailer.get("ID");let bi,Ci;return Array.isArray(ci)&&Vn(ci[0])?(bi=(0,In.stringToBytes)(ci[0]),ci[1]!==ci[0]&&Vn(ci[1])&&(Ci=(0,In.stringToBytes)(ci[1]))):bi=(0,ui.calculateMD5)(this.stream.getByteRange(0,ni),0,ni),(0,In.shadow)(this,"fingerprints",[Yn(bi),Ci?Yn(Ci):null])}async _getLinearizationPage(Vn){const{catalog:Yn,linearization:ci,xref:bi}=this,Ci=Cn.Ref.get(ci.objectNumberFirst,0);try{const Fi=await bi.fetchAsync(Ci);if(Fi instanceof Cn.Dict){let zi=Fi.getRaw("Type");if(zi instanceof Cn.Ref&&(zi=await bi.fetchAsync(zi)),(0,Cn.isName)(zi,"Page")||!Fi.has("Type")&&!Fi.has("Kids"))return Yn.pageKidsCountCache.has(Ci)||Yn.pageKidsCountCache.put(Ci,1),Yn.pageIndexCache.has(Ci)||Yn.pageIndexCache.put(Ci,0),[Fi,Ci]}throw new In.FormatError("The Linearization dictionary doesn't point to a valid Page dictionary.")}catch(Fi){return(0,In.warn)(`_getLinearizationPage: "${Fi.message}".`),Yn.getPageDict(Vn)}}getPage(Vn){const Yn=this._pagePromises.get(Vn);if(Yn)return Yn;const{catalog:ci,linearization:bi,xfaFactory:Ci}=this;let Fi;return Ci?Fi=Promise.resolve([Cn.Dict.empty,null]):(bi==null?void 0:bi.pageFirst)===Vn?Fi=this._getLinearizationPage(Vn):Fi=ci.getPageDict(Vn),Fi=Fi.then(([zi,_i])=>new Zn({pdfManager:this.pdfManager,xref:this.xref,pageIndex:Vn,pageDict:zi,ref:_i,globalIdFactory:this._globalIdFactory,fontCache:ci.fontCache,builtInCMapCache:ci.builtInCMapCache,standardFontDataCache:ci.standardFontDataCache,globalImageCache:ci.globalImageCache,systemFontCache:ci.systemFontCache,nonBlendModesSet:ci.nonBlendModesSet,xfaFactory:Ci})),this._pagePromises.set(Vn,Fi),Fi}async checkFirstPage(Vn=!1){if(!Vn)try{await this.getPage(0)}catch(Yn){if(Yn instanceof jn.XRefEntryException)throw this._pagePromises.delete(0),await this.cleanup(),new jn.XRefParseException}}async checkLastPage(Vn=!1){const{catalog:Yn,pdfManager:ci}=this;Yn.setActualNumPages();let bi;try{if(await Promise.all([ci.ensureDoc("xfaFactory"),ci.ensureDoc("linearization"),ci.ensureCatalog("numPages")]),this.xfaFactory)return;if(this.linearization?bi=this.linearization.numPages:bi=Yn.numPages,Number.isInteger(bi)){if(bi<=1)return}else throw new In.FormatError("Page count is not an integer.");await this.getPage(bi-1)}catch(Ci){if(this._pagePromises.delete(bi-1),await this.cleanup(),Ci instanceof jn.XRefEntryException&&!Vn)throw new jn.XRefParseException;(0,In.warn)(`checkLastPage - invalid /Pages tree /Count: ${bi}.`);let Fi;try{Fi=await Yn.getAllPageDicts(Vn)}catch(zi){if(zi instanceof jn.XRefEntryException&&!Vn)throw new jn.XRefParseException;Yn.setActualNumPages(1);return}for(const[zi,[_i,ji]]of Fi){let Pi;_i instanceof Error?(Pi=Promise.reject(_i),Pi.catch(()=>{})):Pi=Promise.resolve(new Zn({pdfManager:ci,xref:this.xref,pageIndex:zi,pageDict:_i,ref:ji,globalIdFactory:this._globalIdFactory,fontCache:Yn.fontCache,builtInCMapCache:Yn.builtInCMapCache,standardFontDataCache:Yn.standardFontDataCache,globalImageCache:Yn.globalImageCache,systemFontCache:Yn.systemFontCache,nonBlendModesSet:Yn.nonBlendModesSet,xfaFactory:null})),this._pagePromises.set(zi,Pi)}Yn.setActualNumPages(Fi.size)}}fontFallback(Vn,Yn){return this.catalog.fontFallback(Vn,Yn)}async cleanup(Vn=!1){return this.catalog?this.catalog.cleanup(Vn):(0,ei.clearGlobalCaches)()}get fieldObjects(){if(!this.formInfo.hasFields)return(0,In.shadow)(this,"fieldObjects",Promise.resolve(null));const Vn=this.pdfManager.ensureDoc("annotationGlobals").then(async Yn=>{if(!Yn)return null;const ci=Object.create(null),bi=new Map;for(const Fi of this.catalog.acroForm.get("Fields"))Qi(this,xi,Vc).call(this,"",Fi,bi,Yn);const Ci=[];for(const[Fi,zi]of bi)Ci.push(Promise.all(zi).then(_i=>{_i=_i.filter(ji=>!!ji),_i.length>0&&(ci[Fi]=_i)}));return await Promise.all(Ci),ci});return(0,In.shadow)(this,"fieldObjects",Vn)}get hasJSActions(){const Vn=this.pdfManager.ensureDoc("_parseHasJSActions");return(0,In.shadow)(this,"hasJSActions",Vn)}async _parseHasJSActions(){const[Vn,Yn]=await Promise.all([this.pdfManager.ensureCatalog("jsActions"),this.pdfManager.ensureDoc("fieldObjects")]);return Vn?!0:Yn?Object.values(Yn).some(ci=>ci.some(bi=>bi.actions!==null)):!1}get calculationOrderIds(){const Vn=this.catalog.acroForm;if(!(Vn!=null&&Vn.has("CO")))return(0,In.shadow)(this,"calculationOrderIds",null);const Yn=Vn.get("CO");if(!Array.isArray(Yn)||Yn.length===0)return(0,In.shadow)(this,"calculationOrderIds",null);const ci=[];for(const bi of Yn)bi instanceof Cn.Ref&&ci.push(bi.toString());return ci.length===0?(0,In.shadow)(this,"calculationOrderIds",null):(0,In.shadow)(this,"calculationOrderIds",ci)}get annotationGlobals(){return(0,In.shadow)(this,"annotationGlobals",Ln.AnnotationFactory.createGlobals(this.pdfManager))}}xi=new WeakSet,Vc=function(Vn,Yn,ci,bi){const Ci=this.xref.fetchIfRef(Yn);if(Ci.has("T")){const Fi=(0,In.stringToPDFString)(Ci.get("T"));Vn=Vn===""?Fi:`${Vn}.${Fi}`}if(ci.has(Vn)||ci.set(Vn,[]),ci.get(Vn).push(Ln.AnnotationFactory.create(this.xref,Yn,bi,this._localIdFactory,!0,null).then(Fi=>Fi==null?void 0:Fi.getFieldObject()).catch(function(Fi){return(0,In.warn)(`#collectFieldObjects: "${Fi}".`),null})),Ci.has("Kids"))for(const Fi of Ci.get("Kids"))Qi(this,xi,Vc).call(this,Vn,Fi,ci,bi)},Mn.PDFDocument=gi},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.PopupAnnotation=Mn.MarkupAnnotation=Mn.AnnotationFactory=Mn.AnnotationBorderStyle=Mn.Annotation=void 0,Mn.getQuadPoints=fi;var In=ti(2),Ln=ti(3),jn=ti(11),Cn=ti(4),Tn=ti(8),Rn=ti(5),ui=ti(60),si=ti(66),ei=ti(12),Bn=ti(69),Nn=ti(26),Hn=ti(76),On=ti(64),hi=ti(73),Xn=ti(77);class ii{static createGlobals(Si){return Promise.all([Si.ensureCatalog("acroForm"),Si.ensureDoc("xfaDatasets"),Si.ensureCatalog("structTreeRoot"),Si.ensureCatalog("baseUrl"),Si.ensureCatalog("attachments")]).then(([Ti,Ri,Mi,Ui,Hi])=>({pdfManager:Si,acroForm:Ti instanceof Cn.Dict?Ti:Cn.Dict.empty,xfaDatasets:Ri,structTreeRoot:Mi,baseUrl:Ui,attachments:Hi}),Ti=>((0,In.warn)(`createGlobals: "${Ti}".`),null))}static async create(Si,Ti,Ri,Mi,Ui,Hi){const Li=Ui?await this._getPageIndex(Si,Ti,Ri.pdfManager):null;return Ri.pdfManager.ensure(this,"_create",[Si,Ti,Ri,Mi,Ui,Li,Hi])}static _create(Si,Ti,Ri,Mi,Ui=!1,Hi=null,Li=null){const Ei=Si.fetchIfRef(Ti);if(!(Ei instanceof Cn.Dict))return;const{acroForm:$i,pdfManager:Bi}=Ri,Oi=Ti instanceof Cn.Ref?Ti.toString():`annot_${Mi.createObjId()}`;let Xi=Ei.get("Subtype");Xi=Xi instanceof Cn.Name?Xi.name:null;const Gi={xref:Si,ref:Ti,dict:Ei,subtype:Xi,id:Oi,annotationGlobals:Ri,collectFields:Ui,needAppearances:!Ui&&$i.get("NeedAppearances")===!0,pageIndex:Hi,evaluatorOptions:Bi.evaluatorOptions,pageRef:Li};switch(Xi){case"Link":return new gi(Gi);case"Text":return new Ai(Gi);case"Widget":let qi=(0,Ln.getInheritableProperty)({dict:Ei,key:"FT"});switch(qi=qi instanceof Cn.Name?qi.name:null,qi){case"Tx":return new mi(Gi);case"Btn":return new Wn(Gi);case"Ch":return new ni(Gi);case"Sig":return new li(Gi)}return(0,In.warn)(`Unimplemented widget field type "${qi}", falling back to base field type.`),new Gn(Gi);case"Popup":return new yi(Gi);case"FreeText":return new Ii(Gi);case"Line":return new xi(Gi);case"Square":return new Qn(Gi);case"Circle":return new ai(Gi);case"PolyLine":return new Vn(Gi);case"Polygon":return new Yn(Gi);case"Caret":return new ci(Gi);case"Ink":return new bi(Gi);case"Highlight":return new Ci(Gi);case"Underline":return new Fi(Gi);case"Squiggly":return new zi(Gi);case"StrikeOut":return new _i(Gi);case"Stamp":return new ji(Gi);case"FileAttachment":return new Pi(Gi);default:return Ui||(Xi?(0,In.warn)(`Unimplemented annotation type "${Xi}", falling back to base annotation.`):(0,In.warn)("Annotation is missing the required /Subtype.")),new Jn(Gi)}}static async _getPageIndex(Si,Ti,Ri){try{const Mi=await Si.fetchIfRefAsync(Ti);if(!(Mi instanceof Cn.Dict))return-1;const Ui=Mi.getRaw("P");if(Ui instanceof Cn.Ref)try{return await Ri.ensureCatalog("getPageIndex",[Ui])}catch(Li){(0,In.info)(`_getPageIndex -- not a valid page reference: "${Li}".`)}if(Mi.has("Kids"))return-1;const Hi=await Ri.ensureDoc("numPages");for(let Li=0;Li<Hi;Li++){const Ei=await Ri.getPage(Li),$i=await Ri.ensure(Ei,"annotations");for(const Bi of $i)if(Bi instanceof Cn.Ref&&(0,Cn.isRefsEqual)(Bi,Ti))return Li}}catch(Mi){(0,In.warn)(`_getPageIndex: "${Mi}".`)}return-1}static generateImages(Si,Ti,Ri){if(!Ri)return(0,In.warn)("generateImages: OffscreenCanvas is not supported, cannot save or print some annotations with images."),null;let Mi;for(const{bitmapId:Ui,bitmap:Hi}of Si)Hi&&(Mi||(Mi=new Map),Mi.set(Ui,ji.createImage(Hi,Ti)));return Mi}static async saveNewAnnotations(Si,Ti,Ri,Mi){const Ui=Si.xref;let Hi;const Li=[],Ei=[],{isOffscreenCanvasSupported:$i}=Si.options;for(const Bi of Ri)if(!Bi.deleted)switch(Bi.annotationType){case In.AnnotationEditorType.FREETEXT:if(!Hi){const Xi=new Cn.Dict(Ui);Xi.set("BaseFont",Cn.Name.get("Helvetica")),Xi.set("Type",Cn.Name.get("Font")),Xi.set("Subtype",Cn.Name.get("Type1")),Xi.set("Encoding",Cn.Name.get("WinAnsiEncoding"));const Gi=[];Hi=Ui.getNewTemporaryRef(),await(0,hi.writeObject)(Hi,Xi,Gi,Ui),Li.push({ref:Hi,data:Gi.join("")})}Ei.push(Ii.createNewAnnotation(Ui,Bi,Li,{evaluator:Si,task:Ti,baseFontRef:Hi}));break;case In.AnnotationEditorType.INK:Ei.push(bi.createNewAnnotation(Ui,Bi,Li));break;case In.AnnotationEditorType.STAMP:if(!$i)break;const Oi=await Mi.get(Bi.bitmapId);if(Oi.imageStream){const{imageStream:Xi,smaskStream:Gi}=Oi,qi=[];if(Gi){const is=Ui.getNewTemporaryRef();await(0,hi.writeObject)(is,Gi,qi,Ui),Li.push({ref:is,data:qi.join("")}),Xi.dict.set("SMask",is),qi.length=0}const ns=Oi.imageRef=Ui.getNewTemporaryRef();await(0,hi.writeObject)(ns,Xi,qi,Ui),Li.push({ref:ns,data:qi.join("")}),Oi.imageStream=Oi.smaskStream=null}Ei.push(ji.createNewAnnotation(Ui,Bi,Li,{image:Oi}));break}return{annotations:await Promise.all(Ei),dependencies:Li}}static async printNewAnnotations(Si,Ti,Ri,Mi,Ui){if(!Mi)return null;const{options:Hi,xref:Li}=Ti,Ei=[];for(const $i of Mi)if(!$i.deleted)switch($i.annotationType){case In.AnnotationEditorType.FREETEXT:Ei.push(Ii.createNewPrintAnnotation(Si,Li,$i,{evaluator:Ti,task:Ri,evaluatorOptions:Hi}));break;case In.AnnotationEditorType.INK:Ei.push(bi.createNewPrintAnnotation(Si,Li,$i,{evaluatorOptions:Hi}));break;case In.AnnotationEditorType.STAMP:if(!Hi.isOffscreenCanvasSupported)break;const Bi=await Ui.get($i.bitmapId);if(Bi.imageStream){const{imageStream:Oi,smaskStream:Xi}=Bi;Xi&&Oi.dict.set("SMask",Xi),Bi.imageRef=new Nn.JpegStream(Oi,Oi.length),Bi.imageStream=Bi.smaskStream=null}Ei.push(ji.createNewPrintAnnotation(Si,Li,$i,{image:Bi,evaluatorOptions:Hi}));break}return Promise.all(Ei)}}Mn.AnnotationFactory=ii;function ri(Ni,Si=new Uint8ClampedArray(3)){if(!Array.isArray(Ni))return Si;const Ti=Si||new Uint8ClampedArray(3);switch(Ni.length){case 0:return null;case 1:return ei.ColorSpace.singletons.gray.getRgbItem(Ni,0,Ti,0),Ti;case 3:return ei.ColorSpace.singletons.rgb.getRgbItem(Ni,0,Ti,0),Ti;case 4:return ei.ColorSpace.singletons.cmyk.getRgbItem(Ni,0,Ti,0),Ti;default:return Si}}function di(Ni){return Array.from(Ni,Si=>Si/255)}function fi(Ni,Si){const Ti=Ni.getArray("QuadPoints");if(!Array.isArray(Ti)||Ti.length===0||Ti.length%8>0)return null;const Ri=[];for(let Mi=0,Ui=Ti.length/8;Mi<Ui;Mi++){let Hi=1/0,Li=-1/0,Ei=1/0,$i=-1/0;for(let Bi=Mi*8,Oi=Mi*8+8;Bi<Oi;Bi+=2){const Xi=Ti[Bi],Gi=Ti[Bi+1];Hi=Math.min(Xi,Hi),Li=Math.max(Xi,Li),Ei=Math.min(Gi,Ei),$i=Math.max(Gi,$i)}if(Si!==null&&(Hi<Si[0]||Li>Si[2]||Ei<Si[1]||$i>Si[3]))return null;Ri.push([{x:Hi,y:$i},{x:Li,y:$i},{x:Hi,y:Ei},{x:Li,y:Ei}])}return Ri}function wi(Ni,Si,Ti){const[Ri,Mi,Ui,Hi]=In.Util.getAxialAlignedBoundingBox(Si,Ti);if(Ri===Ui||Mi===Hi)return[1,0,0,1,Ni[0],Ni[1]];const Li=(Ni[2]-Ni[0])/(Ui-Ri),Ei=(Ni[3]-Ni[1])/(Hi-Mi);return[Li,0,0,Ei,Ni[0]-Ri*Li,Ni[1]-Mi*Ei]}class Jn{constructor(Si){const{dict:Ti,xref:Ri,annotationGlobals:Mi}=Si;this.setTitle(Ti.get("T")),this.setContents(Ti.get("Contents")),this.setModificationDate(Ti.get("M")),this.setFlags(Ti.get("F")),this.setRectangle(Ti.getArray("Rect")),this.setColor(Ti.getArray("C")),this.setBorderStyle(Ti),this.setAppearance(Ti),this.setOptionalContent(Ti);const Ui=Ti.get("MK");this.setBorderAndBackgroundColors(Ui),this.setRotation(Ui,Ti),this.ref=Si.ref instanceof Cn.Ref?Si.ref:null,this._streams=[],this.appearance&&this._streams.push(this.appearance);const Hi=!!(this.flags&In.AnnotationFlag.LOCKED),Li=!!(this.flags&In.AnnotationFlag.LOCKEDCONTENTS);if(Mi.structTreeRoot){let Ei=Ti.get("StructParent");Ei=Number.isInteger(Ei)&&Ei>=0?Ei:-1,Mi.structTreeRoot.addAnnotationIdToPage(Si.pageRef,Ei)}if(this.data={annotationFlags:this.flags,borderStyle:this.borderStyle,color:this.color,backgroundColor:this.backgroundColor,borderColor:this.borderColor,rotation:this.rotation,contentsObj:this._contents,hasAppearance:!!this.appearance,id:Si.id,modificationDate:this.modificationDate,rect:this.rectangle,subtype:Si.subtype,hasOwnCanvas:!1,noRotate:!!(this.flags&In.AnnotationFlag.NOROTATE),noHTML:Hi&&Li},Si.collectFields){const Ei=Ti.get("Kids");if(Array.isArray(Ei)){const $i=[];for(const Bi of Ei)Bi instanceof Cn.Ref&&$i.push(Bi.toString());$i.length!==0&&(this.data.kidIds=$i)}this.data.actions=(0,Ln.collectActions)(Ri,Ti,In.AnnotationActionEventType),this.data.fieldName=this._constructFieldName(Ti),this.data.pageIndex=Si.pageIndex}this._isOffscreenCanvasSupported=Si.evaluatorOptions.isOffscreenCanvasSupported,this._fallbackFontDict=null,this._needAppearances=!1}_hasFlag(Si,Ti){return!!(Si&Ti)}_isViewable(Si){return!this._hasFlag(Si,In.AnnotationFlag.INVISIBLE)&&!this._hasFlag(Si,In.AnnotationFlag.NOVIEW)}_isPrintable(Si){return this._hasFlag(Si,In.AnnotationFlag.PRINT)&&!this._hasFlag(Si,In.AnnotationFlag.HIDDEN)&&!this._hasFlag(Si,In.AnnotationFlag.INVISIBLE)}mustBeViewed(Si,Ti){var Mi;const Ri=(Mi=Si==null?void 0:Si.get(this.data.id))==null?void 0:Mi.noView;return Ri!==void 0?!Ri:this.viewable&&!this._hasFlag(this.flags,In.AnnotationFlag.HIDDEN)}mustBePrinted(Si){var Ri;const Ti=(Ri=Si==null?void 0:Si.get(this.data.id))==null?void 0:Ri.noPrint;return Ti!==void 0?!Ti:this.printable}get viewable(){return this.data.quadPoints===null?!1:this.flags===0?!0:this._isViewable(this.flags)}get printable(){return this.data.quadPoints===null||this.flags===0?!1:this._isPrintable(this.flags)}_parseStringHelper(Si){const Ti=typeof Si=="string"?(0,In.stringToPDFString)(Si):"",Ri=Ti&&(0,ui.bidi)(Ti).dir==="rtl"?"rtl":"ltr";return{str:Ti,dir:Ri}}setDefaultAppearance(Si){const{dict:Ti,annotationGlobals:Ri}=Si,Mi=(0,Ln.getInheritableProperty)({dict:Ti,key:"DA"})||Ri.acroForm.get("DA");this._defaultAppearance=typeof Mi=="string"?Mi:"",this.data.defaultAppearanceData=(0,jn.parseDefaultAppearance)(this._defaultAppearance)}setTitle(Si){this._title=this._parseStringHelper(Si)}setContents(Si){this._contents=this._parseStringHelper(Si)}setModificationDate(Si){this.modificationDate=typeof Si=="string"?Si:null}setFlags(Si){this.flags=Number.isInteger(Si)&&Si>0?Si:0}hasFlag(Si){return this._hasFlag(this.flags,Si)}setRectangle(Si){this.rectangle=Array.isArray(Si)&&Si.length===4?In.Util.normalizeRect(Si):[0,0,0,0]}setColor(Si){this.color=ri(Si)}setLineEndings(Si){if(this.lineEndings=["None","None"],Array.isArray(Si)&&Si.length===2)for(let Ti=0;Ti<2;Ti++){const Ri=Si[Ti];if(Ri instanceof Cn.Name)switch(Ri.name){case"None":continue;case"Square":case"Circle":case"Diamond":case"OpenArrow":case"ClosedArrow":case"Butt":case"ROpenArrow":case"RClosedArrow":case"Slash":this.lineEndings[Ti]=Ri.name;continue}(0,In.warn)(`Ignoring invalid lineEnding: ${Ri}`)}}setRotation(Si,Ti){this.rotation=0;let Ri=Si instanceof Cn.Dict?Si.get("R")||0:Ti.get("Rotate")||0;Number.isInteger(Ri)&&Ri!==0&&(Ri%=360,Ri<0&&(Ri+=360),Ri%90===0&&(this.rotation=Ri))}setBorderAndBackgroundColors(Si){Si instanceof Cn.Dict?(this.borderColor=ri(Si.getArray("BC"),null),this.backgroundColor=ri(Si.getArray("BG"),null)):this.borderColor=this.backgroundColor=null}setBorderStyle(Si){if(this.borderStyle=new pi,Si instanceof Cn.Dict)if(Si.has("BS")){const Ti=Si.get("BS"),Ri=Ti.get("Type");(!Ri||(0,Cn.isName)(Ri,"Border"))&&(this.borderStyle.setWidth(Ti.get("W"),this.rectangle),this.borderStyle.setStyle(Ti.get("S")),this.borderStyle.setDashArray(Ti.getArray("D")))}else if(Si.has("Border")){const Ti=Si.getArray("Border");Array.isArray(Ti)&&Ti.length>=3&&(this.borderStyle.setHorizontalCornerRadius(Ti[0]),this.borderStyle.setVerticalCornerRadius(Ti[1]),this.borderStyle.setWidth(Ti[2],this.rectangle),Ti.length===4&&this.borderStyle.setDashArray(Ti[3],!0))}else this.borderStyle.setWidth(0)}setAppearance(Si){this.appearance=null;const Ti=Si.get("AP");if(!(Ti instanceof Cn.Dict))return;const Ri=Ti.get("N");if(Ri instanceof Rn.BaseStream){this.appearance=Ri;return}if(!(Ri instanceof Cn.Dict))return;const Mi=Si.get("AS");if(!(Mi instanceof Cn.Name)||!Ri.has(Mi.name))return;const Ui=Ri.get(Mi.name);Ui instanceof Rn.BaseStream&&(this.appearance=Ui)}setOptionalContent(Si){this.oc=null;const Ti=Si.get("OC");Ti instanceof Cn.Name?(0,In.warn)("setOptionalContent: Support for /Name-entry is not implemented."):Ti instanceof Cn.Dict&&(this.oc=Ti)}loadResources(Si,Ti){return Ti.dict.getAsync("Resources").then(Ri=>Ri?new Hn.ObjectLoader(Ri,Si,Ri.xref).load().then(function(){return Ri}):void 0)}async getOperatorList(Si,Ti,Ri,Mi,Ui){const Hi=this.data;let Li=this.appearance;const Ei=!!(this.data.hasOwnCanvas&&Ri&In.RenderingIntentFlag.DISPLAY);if(!Li){if(!Ei)return{opList:new On.OperatorList,separateForm:!1,separateCanvas:!1};Li=new Tn.StringStream(""),Li.dict=new Cn.Dict}const $i=Li.dict,Bi=await this.loadResources(["ExtGState","ColorSpace","Pattern","Shading","XObject","Font"],Li),Oi=$i.getArray("BBox")||[0,0,1,1],Xi=$i.getArray("Matrix")||[1,0,0,1,0,0],Gi=wi(Hi.rect,Oi,Xi),qi=new On.OperatorList;let ns;return this.oc&&(ns=await Si.parseMarkedContentProps(this.oc,null)),ns!==void 0&&qi.addOp(In.OPS.beginMarkedContentProps,["OC",ns]),qi.addOp(In.OPS.beginAnnotation,[Hi.id,Hi.rect,Gi,Xi,Ei]),await Si.getOperatorList({stream:Li,task:Ti,resources:Bi,operatorList:qi,fallbackFontDict:this._fallbackFontDict}),qi.addOp(In.OPS.endAnnotation,[]),ns!==void 0&&qi.addOp(In.OPS.endMarkedContent,[]),this.reset(),{opList:qi,separateForm:!1,separateCanvas:Ei}}async save(Si,Ti,Ri){return null}get hasTextContent(){return!1}async extractTextContent(Si,Ti,Ri){if(!this.appearance)return;const Mi=await this.loadResources(["ExtGState","Font","Properties","XObject"],this.appearance),Ui=[],Hi=[];let Li=null;const Ei={desiredSize:Math.Infinity,ready:!0,enqueue($i,Bi){for(const Oi of $i.items)Oi.str!==void 0&&(Li||(Li=Oi.transform.slice(-2)),Hi.push(Oi.str),Oi.hasEOL&&(Ui.push(Hi.join("")),Hi.length=0))}};if(await Si.getTextContent({stream:this.appearance,task:Ti,resources:Mi,includeMarkedContent:!0,sink:Ei,viewBox:Ri}),this.reset(),Hi.length&&Ui.push(Hi.join("")),Ui.length>1||Ui[0]){const $i=this.appearance.dict,Bi=$i.getArray("BBox")||[0,0,1,1],Oi=$i.getArray("Matrix")||[1,0,0,1,0,0],Xi=this.data.rect,Gi=wi(Xi,Bi,Oi);Gi[4]-=Xi[0],Gi[5]-=Xi[1],Li=In.Util.applyTransform(Li,Gi),Li=In.Util.applyTransform(Li,Oi),this.data.textPosition=Li,this.data.textContent=Ui}}getFieldObject(){return this.data.kidIds?{id:this.data.id,actions:this.data.actions,name:this.data.fieldName,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,type:"",kidIds:this.data.kidIds,page:this.data.pageIndex,rotation:this.rotation}:null}reset(){for(const Si of this._streams)Si.reset()}_constructFieldName(Si){if(!Si.has("T")&&!Si.has("Parent"))return(0,In.warn)("Unknown field name, falling back to empty field name."),"";if(!Si.has("Parent"))return(0,In.stringToPDFString)(Si.get("T"));const Ti=[];Si.has("T")&&Ti.unshift((0,In.stringToPDFString)(Si.get("T")));let Ri=Si;const Mi=new Cn.RefSet;for(Si.objId&&Mi.put(Si.objId);Ri.has("Parent")&&(Ri=Ri.get("Parent"),!(!(Ri instanceof Cn.Dict)||Ri.objId&&Mi.has(Ri.objId)));)Ri.objId&&Mi.put(Ri.objId),Ri.has("T")&&Ti.unshift((0,In.stringToPDFString)(Ri.get("T")));return Ti.join(".")}}Mn.Annotation=Jn;class pi{constructor(){this.width=1,this.style=In.AnnotationBorderStyleType.SOLID,this.dashArray=[3],this.horizontalCornerRadius=0,this.verticalCornerRadius=0}setWidth(Si,Ti=[0,0,0,0]){if(Si instanceof Cn.Name){this.width=0;return}if(typeof Si=="number"){if(Si>0){const Ri=(Ti[2]-Ti[0])/2,Mi=(Ti[3]-Ti[1])/2;Ri>0&&Mi>0&&(Si>Ri||Si>Mi)&&((0,In.warn)(`AnnotationBorderStyle.setWidth - ignoring width: ${Si}`),Si=1)}this.width=Si}}setStyle(Si){if(Si instanceof Cn.Name)switch(Si.name){case"S":this.style=In.AnnotationBorderStyleType.SOLID;break;case"D":this.style=In.AnnotationBorderStyleType.DASHED;break;case"B":this.style=In.AnnotationBorderStyleType.BEVELED;break;case"I":this.style=In.AnnotationBorderStyleType.INSET;break;case"U":this.style=In.AnnotationBorderStyleType.UNDERLINE;break}}setDashArray(Si,Ti=!1){if(Array.isArray(Si)&&Si.length>0){let Ri=!0,Mi=!0;for(const Ui of Si)if(+Ui>=0)Ui>0&&(Mi=!1);else{Ri=!1;break}Ri&&!Mi?(this.dashArray=Si,Ti&&this.setStyle(Cn.Name.get("D"))):this.width=0}else Si&&(this.width=0)}setHorizontalCornerRadius(Si){Number.isInteger(Si)&&(this.horizontalCornerRadius=Si)}setVerticalCornerRadius(Si){Number.isInteger(Si)&&(this.verticalCornerRadius=Si)}}Mn.AnnotationBorderStyle=pi;class Zn extends Jn{constructor(Si){super(Si);const{dict:Ti}=Si;if(Ti.has("IRT")){const Mi=Ti.getRaw("IRT");this.data.inReplyTo=Mi instanceof Cn.Ref?Mi.toString():null;const Ui=Ti.get("RT");this.data.replyType=Ui instanceof Cn.Name?Ui.name:In.AnnotationReplyType.REPLY}let Ri=null;if(this.data.replyType===In.AnnotationReplyType.GROUP){const Mi=Ti.get("IRT");this.setTitle(Mi.get("T")),this.data.titleObj=this._title,this.setContents(Mi.get("Contents")),this.data.contentsObj=this._contents,Mi.has("CreationDate")?(this.setCreationDate(Mi.get("CreationDate")),this.data.creationDate=this.creationDate):this.data.creationDate=null,Mi.has("M")?(this.setModificationDate(Mi.get("M")),this.data.modificationDate=this.modificationDate):this.data.modificationDate=null,Ri=Mi.getRaw("Popup"),Mi.has("C")?(this.setColor(Mi.getArray("C")),this.data.color=this.color):this.data.color=null}else this.data.titleObj=this._title,this.setCreationDate(Ti.get("CreationDate")),this.data.creationDate=this.creationDate,Ri=Ti.getRaw("Popup"),Ti.has("C")||(this.data.color=null);this.data.popupRef=Ri instanceof Cn.Ref?Ri.toString():null,Ti.has("RC")&&(this.data.richText=Xn.XFAFactory.getRichTextAsHtml(Ti.get("RC")))}setCreationDate(Si){this.creationDate=typeof Si=="string"?Si:null}_setDefaultAppearance({xref:Si,extra:Ti,strokeColor:Ri,fillColor:Mi,blendMode:Ui,strokeAlpha:Hi,fillAlpha:Li,pointsCallback:Ei}){let $i=Number.MAX_VALUE,Bi=Number.MAX_VALUE,Oi=Number.MIN_VALUE,Xi=Number.MIN_VALUE;const Gi=["q"];Ti&&Gi.push(Ti),Ri&&Gi.push(`${Ri[0]} ${Ri[1]} ${Ri[2]} RG`),Mi&&Gi.push(`${Mi[0]} ${Mi[1]} ${Mi[2]} rg`);let qi=this.data.quadPoints;qi||(qi=[[{x:this.rectangle[0],y:this.rectangle[3]},{x:this.rectangle[2],y:this.rectangle[3]},{x:this.rectangle[0],y:this.rectangle[1]},{x:this.rectangle[2],y:this.rectangle[1]}]]);for(const ts of qi){const[es,rs,ss,os]=Ei(Gi,ts);$i=Math.min($i,es),Oi=Math.max(Oi,rs),Bi=Math.min(Bi,ss),Xi=Math.max(Xi,os)}Gi.push("Q");const ns=new Cn.Dict(Si),is=new Cn.Dict(Si);is.set("Subtype",Cn.Name.get("Form"));const as=new Tn.StringStream(Gi.join(" "));as.dict=is,ns.set("Fm0",as);const hs=new Cn.Dict(Si);Ui&&hs.set("BM",Cn.Name.get(Ui)),typeof Hi=="number"&&hs.set("CA",Hi),typeof Li=="number"&&hs.set("ca",Li);const Yi=new Cn.Dict(Si);Yi.set("GS0",hs);const Vi=new Cn.Dict(Si);Vi.set("ExtGState",Yi),Vi.set("XObject",ns);const Zi=new Cn.Dict(Si);Zi.set("Resources",Vi);const us=this.data.rect=[$i,Bi,Oi,Xi];Zi.set("BBox",us),this.appearance=new Tn.StringStream("/GS0 gs /Fm0 Do"),this.appearance.dict=Zi,this._streams.push(this.appearance,as)}static async createNewAnnotation(Si,Ti,Ri,Mi){const Ui=Ti.ref||(Ti.ref=Si.getNewTemporaryRef()),Hi=await this.createNewAppearanceStream(Ti,Si,Mi),Li=[];let Ei;if(Hi){const $i=Si.getNewTemporaryRef();Ei=this.createNewDict(Ti,Si,{apRef:$i}),await(0,hi.writeObject)($i,Hi,Li,Si),Ri.push({ref:$i,data:Li.join("")})}else Ei=this.createNewDict(Ti,Si,{});return Number.isInteger(Ti.parentTreeId)&&Ei.set("StructParent",Ti.parentTreeId),Li.length=0,await(0,hi.writeObject)(Ui,Ei,Li,Si),{ref:Ui,data:Li.join("")}}static async createNewPrintAnnotation(Si,Ti,Ri,Mi){const Ui=await this.createNewAppearanceStream(Ri,Ti,Mi),Hi=this.createNewDict(Ri,Ti,{ap:Ui}),Li=new this.prototype.constructor({dict:Hi,xref:Ti,annotationGlobals:Si,evaluatorOptions:Mi.evaluatorOptions});return Ri.ref&&(Li.ref=Li.refToReplace=Ri.ref),Li}}Mn.MarkupAnnotation=Zn;class Gn extends Jn{constructor(Si){var Xi;super(Si);const{dict:Ti,xref:Ri,annotationGlobals:Mi}=Si,Ui=this.data;this._needAppearances=Si.needAppearances,Ui.annotationType=In.AnnotationType.WIDGET,Ui.fieldName===void 0&&(Ui.fieldName=this._constructFieldName(Ti)),Ui.actions===void 0&&(Ui.actions=(0,Ln.collectActions)(Ri,Ti,In.AnnotationActionEventType));let Hi=(0,Ln.getInheritableProperty)({dict:Ti,key:"V",getArray:!0});Ui.fieldValue=this._decodeFormValue(Hi);const Li=(0,Ln.getInheritableProperty)({dict:Ti,key:"DV",getArray:!0});if(Ui.defaultFieldValue=this._decodeFormValue(Li),Hi===void 0&&Mi.xfaDatasets){const Gi=this._title.str;Gi&&(this._hasValueFromXFA=!0,Ui.fieldValue=Hi=Mi.xfaDatasets.getValue(Gi))}Hi===void 0&&Ui.defaultFieldValue!==null&&(Ui.fieldValue=Ui.defaultFieldValue),Ui.alternativeText=(0,In.stringToPDFString)(Ti.get("TU")||""),this.setDefaultAppearance(Si),Ui.hasAppearance||(Ui.hasAppearance=this._needAppearances&&Ui.fieldValue!==void 0&&Ui.fieldValue!==null);const Ei=(0,Ln.getInheritableProperty)({dict:Ti,key:"FT"});Ui.fieldType=Ei instanceof Cn.Name?Ei.name:null;const $i=(0,Ln.getInheritableProperty)({dict:Ti,key:"DR"}),Bi=Mi.acroForm.get("DR"),Oi=(Xi=this.appearance)==null?void 0:Xi.dict.get("Resources");this._fieldResources={localResources:$i,acroFormResources:Bi,appearanceResources:Oi,mergedResources:Cn.Dict.merge({xref:Ri,dictArray:[$i,Oi,Bi],mergeSubDicts:!0})},Ui.fieldFlags=(0,Ln.getInheritableProperty)({dict:Ti,key:"Ff"}),(!Number.isInteger(Ui.fieldFlags)||Ui.fieldFlags<0)&&(Ui.fieldFlags=0),Ui.readOnly=this.hasFieldFlag(In.AnnotationFieldFlag.READONLY),Ui.required=this.hasFieldFlag(In.AnnotationFieldFlag.REQUIRED),Ui.hidden=this._hasFlag(Ui.annotationFlags,In.AnnotationFlag.HIDDEN)||this._hasFlag(Ui.annotationFlags,In.AnnotationFlag.NOVIEW)}_decodeFormValue(Si){return Array.isArray(Si)?Si.filter(Ti=>typeof Ti=="string").map(Ti=>(0,In.stringToPDFString)(Ti)):Si instanceof Cn.Name?(0,In.stringToPDFString)(Si.name):typeof Si=="string"?(0,In.stringToPDFString)(Si):null}hasFieldFlag(Si){return!!(this.data.fieldFlags&Si)}_isViewable(Si){return!this._hasFlag(Si,In.AnnotationFlag.INVISIBLE)}mustBeViewed(Si,Ti){return Ti?this.viewable:super.mustBeViewed(Si,Ti)&&!this._hasFlag(this.flags,In.AnnotationFlag.NOVIEW)}getRotationMatrix(Si){var Ui;let Ti=(Ui=Si==null?void 0:Si.get(this.data.id))==null?void 0:Ui.rotation;if(Ti===void 0&&(Ti=this.rotation),Ti===0)return In.IDENTITY_MATRIX;const Ri=this.data.rect[2]-this.data.rect[0],Mi=this.data.rect[3]-this.data.rect[1];return(0,Ln.getRotationMatrix)(Ti,Ri,Mi)}getBorderAndBackgroundAppearances(Si){var Li;let Ti=(Li=Si==null?void 0:Si.get(this.data.id))==null?void 0:Li.rotation;if(Ti===void 0&&(Ti=this.rotation),!this.backgroundColor&&!this.borderColor)return"";const Ri=this.data.rect[2]-this.data.rect[0],Mi=this.data.rect[3]-this.data.rect[1],Ui=Ti===0||Ti===180?`0 0 ${Ri} ${Mi} re`:`0 0 ${Mi} ${Ri} re`;let Hi="";if(this.backgroundColor&&(Hi=`${(0,jn.getPdfColor)(this.backgroundColor,!0)} ${Ui} f `),this.borderColor){const Ei=this.borderStyle.width||1;Hi+=`${Ei} w ${(0,jn.getPdfColor)(this.borderColor,!1)} ${Ui} S `}return Hi}async getOperatorList(Si,Ti,Ri,Mi,Ui){if(Mi&&!(this instanceof li)&&!this.data.noHTML&&!this.data.hasOwnCanvas)return{opList:new On.OperatorList,separateForm:!0,separateCanvas:!1};if(!this._hasText)return super.getOperatorList(Si,Ti,Ri,Mi,Ui);const Hi=await this._getAppearance(Si,Ti,Ri,Ui);if(this.appearance&&Hi===null)return super.getOperatorList(Si,Ti,Ri,Mi,Ui);const Li=new On.OperatorList;if(!this._defaultAppearance||Hi===null)return{opList:Li,separateForm:!1,separateCanvas:!1};const Ei=!!(this.data.hasOwnCanvas&&Ri&In.RenderingIntentFlag.DISPLAY),$i=[1,0,0,1,0,0],Bi=[0,0,this.data.rect[2]-this.data.rect[0],this.data.rect[3]-this.data.rect[1]],Oi=wi(this.data.rect,Bi,$i);let Xi;this.oc&&(Xi=await Si.parseMarkedContentProps(this.oc,null)),Xi!==void 0&&Li.addOp(In.OPS.beginMarkedContentProps,["OC",Xi]),Li.addOp(In.OPS.beginAnnotation,[this.data.id,this.data.rect,Oi,this.getRotationMatrix(Ui),Ei]);const Gi=new Tn.StringStream(Hi);return await Si.getOperatorList({stream:Gi,task:Ti,resources:this._fieldResources.mergedResources,operatorList:Li}),Li.addOp(In.OPS.endAnnotation,[]),Xi!==void 0&&Li.addOp(In.OPS.endMarkedContent,[]),{opList:Li,separateForm:!1,separateCanvas:Ei}}_getMKDict(Si){const Ti=new Cn.Dict(null);return Si&&Ti.set("R",Si),this.borderColor&&Ti.set("BC",di(this.borderColor)),this.backgroundColor&&Ti.set("BG",di(this.backgroundColor)),Ti.size>0?Ti:null}amendSavedDict(Si,Ti){}async save(Si,Ti,Ri){const Mi=Ri==null?void 0:Ri.get(this.data.id);let Ui=Mi==null?void 0:Mi.value,Hi=Mi==null?void 0:Mi.rotation;if(Ui===this.data.fieldValue||Ui===void 0){if(!this._hasValueFromXFA&&Hi===void 0)return null;Ui||(Ui=this.data.fieldValue)}if(Hi===void 0&&!this._hasValueFromXFA&&Array.isArray(Ui)&&Array.isArray(this.data.fieldValue)&&Ui.length===this.data.fieldValue.length&&Ui.every((as,hs)=>as===this.data.fieldValue[hs]))return null;Hi===void 0&&(Hi=this.rotation);let Li=null;if(!this._needAppearances&&(Li=await this._getAppearance(Si,Ti,In.RenderingIntentFlag.SAVE,Ri),Li===null))return null;let Ei=!1;Li!=null&&Li.needAppearances&&(Ei=!0,Li=null);const{xref:$i}=Si,Bi=$i.fetchIfRef(this.ref);if(!(Bi instanceof Cn.Dict))return null;const Oi=new Cn.Dict($i);for(const as of Bi.getKeys())as!=="AP"&&Oi.set(as,Bi.getRaw(as));const Xi={path:this.data.fieldName,value:Ui},Gi=as=>(0,Ln.isAscii)(as)?as:(0,Ln.stringToUTF16String)(as,!0);Oi.set("V",Array.isArray(Ui)?Ui.map(Gi):Gi(Ui)),this.amendSavedDict(Ri,Oi);const qi=this._getMKDict(Hi);qi&&Oi.set("MK",qi);const ns=[],is=[{ref:this.ref,data:"",xfa:Xi,needAppearances:Ei}];if(Li!==null){const as=$i.getNewTemporaryRef(),hs=new Cn.Dict($i);Oi.set("AP",hs),hs.set("N",as);const Yi=this._getSaveFieldResources($i),Vi=new Tn.StringStream(Li),Zi=Vi.dict=new Cn.Dict($i);Zi.set("Subtype",Cn.Name.get("Form")),Zi.set("Resources",Yi),Zi.set("BBox",[0,0,this.data.rect[2]-this.data.rect[0],this.data.rect[3]-this.data.rect[1]]);const us=this.getRotationMatrix(Ri);us!==In.IDENTITY_MATRIX&&Zi.set("Matrix",us),await(0,hi.writeObject)(as,Vi,ns,$i),is.push({ref:as,data:ns.join(""),xfa:null,needAppearances:!1}),ns.length=0}return Oi.set("M",`D:${(0,In.getModificationDate)()}`),await(0,hi.writeObject)(this.ref,Oi,ns,$i),is[0].data=ns.join(""),is}async _getAppearance(Si,Ti,Ri,Mi){if(this.hasFieldFlag(In.AnnotationFieldFlag.PASSWORD))return null;const Hi=Mi==null?void 0:Mi.get(this.data.id);let Li,Ei;if(Hi&&(Li=Hi.formattedValue||Hi.value,Ei=Hi.rotation),Ei===void 0&&Li===void 0&&!this._needAppearances&&(!this._hasValueFromXFA||this.appearance))return null;const $i=this.getBorderAndBackgroundAppearances(Mi);if(Li===void 0&&(Li=this.data.fieldValue,!Li))return`/Tx BMC q ${$i}Q EMC`;if(Array.isArray(Li)&&Li.length===1&&(Li=Li[0]),(0,In.assert)(typeof Li=="string","Expected `value` to be a string."),Li=Li.trim(),this.data.combo){const ks=this.data.options.find(({exportValue:xs})=>Li===xs);Li=(ks==null?void 0:ks.displayValue)||Li}if(Li==="")return`/Tx BMC q ${$i}Q EMC`;Ei===void 0&&(Ei=this.rotation);let Bi=-1,Oi;this.data.multiLine?(Oi=Li.split(/\r\n?|\n/).map(ks=>ks.normalize("NFC")),Bi=Oi.length):Oi=[Li.replace(/\r\n?|\n/,"").normalize("NFC")];const Xi=1,Gi=2;let qi=this.data.rect[3]-this.data.rect[1],ns=this.data.rect[2]-this.data.rect[0];(Ei===90||Ei===270)&&([ns,qi]=[qi,ns]),this._defaultAppearance||(this.data.defaultAppearanceData=(0,jn.parseDefaultAppearance)(this._defaultAppearance="/Helvetica 0 Tf 0 g"));let is=await Gn._getFontData(Si,Ti,this.data.defaultAppearanceData,this._fieldResources.mergedResources),as,hs,Yi;const Vi=[];let Zi=!1;for(const ks of Oi){const xs=is.encodeString(ks);xs.length>1&&(Zi=!0),Vi.push(xs.join(""))}if(Zi&&Ri&In.RenderingIntentFlag.SAVE)return{needAppearances:!0};if(Zi&&this._isOffscreenCanvasSupported){const ks=this.data.comb?"monospace":"sans-serif",xs=new jn.FakeUnicodeFont(Si.xref,ks),Rs=xs.createFontResources(Oi.join("")),ms=Rs.getRaw("Font");if(this._fieldResources.mergedResources.has("Font")){const Ts=this._fieldResources.mergedResources.get("Font");for(const Is of ms.getKeys())Ts.set(Is,ms.getRaw(Is))}else this._fieldResources.mergedResources.set("Font",ms);const Bs=xs.fontName.name;is=await Gn._getFontData(Si,Ti,{fontName:Bs,fontSize:0},Rs);for(let Ts=0,Is=Vi.length;Ts<Is;Ts++)Vi[Ts]=(0,Ln.stringToUTF16String)(Oi[Ts]);const ws=Object.assign(Object.create(null),this.data.defaultAppearanceData);this.data.defaultAppearanceData.fontSize=0,this.data.defaultAppearanceData.fontName=Bs,[as,hs,Yi]=this._computeFontSize(qi-2*Xi,ns-2*Gi,Li,is,Bi),this.data.defaultAppearanceData=ws}else this._isOffscreenCanvasSupported||(0,In.warn)("_getAppearance: OffscreenCanvas is not supported, annotation may not render correctly."),[as,hs,Yi]=this._computeFontSize(qi-2*Xi,ns-2*Gi,Li,is,Bi);let us=is.descent;isNaN(us)?us=In.BASELINE_FACTOR*Yi:us=Math.max(In.BASELINE_FACTOR*Yi,Math.abs(us)*hs);const ts=Math.min(Math.floor((qi-hs)/2),Xi),es=this.data.textAlignment;if(this.data.multiLine)return this._getMultilineAppearance(as,Vi,is,hs,ns,qi,es,Gi,ts,us,Yi,Mi);if(this.data.comb)return this._getCombAppearance(as,is,Vi[0],hs,ns,qi,Gi,ts,us,Yi,Mi);const rs=ts+us;if(es===0||es>2)return`/Tx BMC q ${$i}BT `+as+` 1 0 0 1 ${(0,Ln.numberToString)(Gi)} ${(0,Ln.numberToString)(rs)} Tm (${(0,Ln.escapeString)(Vi[0])}) Tj ET Q EMC`;const ss={shift:0},os=this._renderText(Vi[0],is,hs,ns,es,ss,Gi,rs);return`/Tx BMC q ${$i}BT `+as+` 1 0 0 1 0 0 Tm ${os} ET Q EMC`}static async _getFontData(Si,Ti,Ri,Mi){const Ui=new On.OperatorList,Hi={font:null,clone(){return this}},{fontName:Li,fontSize:Ei}=Ri;return await Si.handleSetFont(Mi,[Li&&Cn.Name.get(Li),Ei],null,Ui,Ti,Hi,null),Hi.font}_getTextWidth(Si,Ti){return Ti.charsToGlyphs(Si).reduce((Ri,Mi)=>Ri+Mi.width,0)/1e3}_computeFontSize(Si,Ti,Ri,Mi,Ui){let{fontSize:Hi}=this.data.defaultAppearanceData,Li=(Hi||12)*In.LINE_FACTOR,Ei=Math.round(Si/Li);if(!Hi){const $i=Xi=>Math.floor(Xi*100)/100;if(Ui===-1){const Xi=this._getTextWidth(Ri,Mi);Hi=$i(Math.min(Si/In.LINE_FACTOR,Xi>Ti?Ti/Xi:1/0)),Ei=1}else{const Xi=Ri.split(/\r\n?|\n/),Gi=[];for(const ns of Xi){const is=Mi.encodeString(ns).join(""),as=Mi.charsToGlyphs(is),hs=Mi.getCharPositions(is);Gi.push({line:is,glyphs:as,positions:hs})}const qi=ns=>{let is=0;for(const as of Gi){const hs=this._splitLine(null,Mi,ns,Ti,as);if(is+=hs.length*ns,is>Si)return!0}return!1};for(Ei=Math.max(Ei,Ui);;){if(Li=Si/Ei,Hi=$i(Li/In.LINE_FACTOR),qi(Hi)){Ei++;continue}break}}const{fontName:Bi,fontColor:Oi}=this.data.defaultAppearanceData;this._defaultAppearance=(0,jn.createDefaultAppearance)({fontSize:Hi,fontName:Bi,fontColor:Oi})}return[this._defaultAppearance,Hi,Si/Ei]}_renderText(Si,Ti,Ri,Mi,Ui,Hi,Li,Ei){let $i;if(Ui===1){const Oi=this._getTextWidth(Si,Ti)*Ri;$i=(Mi-Oi)/2}else if(Ui===2){const Oi=this._getTextWidth(Si,Ti)*Ri;$i=Mi-Oi-Li}else $i=Li;const Bi=(0,Ln.numberToString)($i-Hi.shift);return Hi.shift=$i,Ei=(0,Ln.numberToString)(Ei),`${Bi} ${Ei} Td (${(0,Ln.escapeString)(Si)}) Tj`}_getSaveFieldResources(Si){var Hi;const{localResources:Ti,appearanceResources:Ri,acroFormResources:Mi}=this._fieldResources,Ui=(Hi=this.data.defaultAppearanceData)==null?void 0:Hi.fontName;if(!Ui)return Ti||Cn.Dict.empty;for(const Li of[Ti,Ri])if(Li instanceof Cn.Dict){const Ei=Li.get("Font");if(Ei instanceof Cn.Dict&&Ei.has(Ui))return Li}if(Mi instanceof Cn.Dict){const Li=Mi.get("Font");if(Li instanceof Cn.Dict&&Li.has(Ui)){const Ei=new Cn.Dict(Si);Ei.set(Ui,Li.getRaw(Ui));const $i=new Cn.Dict(Si);return $i.set("Font",Ei),Cn.Dict.merge({xref:Si,dictArray:[$i,Ti],mergeSubDicts:!0})}}return Ti||Cn.Dict.empty}getFieldObject(){return null}}class mi extends Gn{constructor(Si){super(Si),this.data.hasOwnCanvas=this.data.readOnly&&!this.data.noHTML,this._hasText=!0;const Ti=Si.dict;typeof this.data.fieldValue!="string"&&(this.data.fieldValue="");let Ri=(0,Ln.getInheritableProperty)({dict:Ti,key:"Q"});(!Number.isInteger(Ri)||Ri<0||Ri>2)&&(Ri=null),this.data.textAlignment=Ri;let Mi=(0,Ln.getInheritableProperty)({dict:Ti,key:"MaxLen"});(!Number.isInteger(Mi)||Mi<0)&&(Mi=0),this.data.maxLen=Mi,this.data.multiLine=this.hasFieldFlag(In.AnnotationFieldFlag.MULTILINE),this.data.comb=this.hasFieldFlag(In.AnnotationFieldFlag.COMB)&&!this.hasFieldFlag(In.AnnotationFieldFlag.MULTILINE)&&!this.hasFieldFlag(In.AnnotationFieldFlag.PASSWORD)&&!this.hasFieldFlag(In.AnnotationFieldFlag.FILESELECT)&&this.data.maxLen!==0,this.data.doNotScroll=this.hasFieldFlag(In.AnnotationFieldFlag.DONOTSCROLL)}get hasTextContent(){return!!this.appearance&&!this._needAppearances}_getCombAppearance(Si,Ti,Ri,Mi,Ui,Hi,Li,Ei,$i,Bi,Oi){const Xi=Ui/this.data.maxLen,Gi=this.getBorderAndBackgroundAppearances(Oi),qi=[],ns=Ti.getCharPositions(Ri);for(const[as,hs]of ns)qi.push(`(${(0,Ln.escapeString)(Ri.substring(as,hs))}) Tj`);const is=qi.join(` ${(0,Ln.numberToString)(Xi)} 0 Td `);return`/Tx BMC q ${Gi}BT `+Si+` 1 0 0 1 ${(0,Ln.numberToString)(Li)} ${(0,Ln.numberToString)(Ei+$i)} Tm ${is} ET Q EMC`}_getMultilineAppearance(Si,Ti,Ri,Mi,Ui,Hi,Li,Ei,$i,Bi,Oi,Xi){const Gi=[],qi=Ui-2*Ei,ns={shift:0};for(let hs=0,Yi=Ti.length;hs<Yi;hs++){const Vi=Ti[hs],Zi=this._splitLine(Vi,Ri,Mi,qi);for(let us=0,ts=Zi.length;us<ts;us++){const es=Zi[us],rs=hs===0&&us===0?-$i-(Oi-Bi):-Oi;Gi.push(this._renderText(es,Ri,Mi,Ui,Li,ns,Ei,rs))}}const is=this.getBorderAndBackgroundAppearances(Xi),as=Gi.join(`
`);return`/Tx BMC q ${is}BT `+Si+` 1 0 0 1 0 ${(0,Ln.numberToString)(Hi)} Tm ${as} ET Q EMC`}_splitLine(Si,Ti,Ri,Mi,Ui={}){Si=Ui.line||Si;const Hi=Ui.glyphs||Ti.charsToGlyphs(Si);if(Hi.length<=1)return[Si];const Li=Ui.positions||Ti.getCharPositions(Si),Ei=Ri/1e3,$i=[];let Bi=-1,Oi=-1,Xi=-1,Gi=0,qi=0;for(let ns=0,is=Hi.length;ns<is;ns++){const[as,hs]=Li[ns],Yi=Hi[ns],Vi=Yi.width*Ei;Yi.unicode===" "?qi+Vi>Mi?($i.push(Si.substring(Gi,as)),Gi=as,qi=Vi,Bi=-1,Xi=-1):(qi+=Vi,Bi=as,Oi=hs,Xi=ns):qi+Vi>Mi?Bi!==-1?($i.push(Si.substring(Gi,Oi)),Gi=Oi,ns=Xi+1,Bi=-1,qi=0):($i.push(Si.substring(Gi,as)),Gi=as,qi=Vi):qi+=Vi}return Gi<Si.length&&$i.push(Si.substring(Gi,Si.length)),$i}getFieldObject(){return{id:this.data.id,value:this.data.fieldValue,defaultValue:this.data.defaultFieldValue||"",multiline:this.data.multiLine,password:this.hasFieldFlag(In.AnnotationFieldFlag.PASSWORD),charLimit:this.data.maxLen,comb:this.data.comb,editable:!this.data.readOnly,hidden:this.data.hidden,name:this.data.fieldName,rect:this.data.rect,actions:this.data.actions,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,rotation:this.rotation,type:"text"}}}class Wn extends Gn{constructor(Si){super(Si),this.checkedAppearance=null,this.uncheckedAppearance=null,this.data.checkBox=!this.hasFieldFlag(In.AnnotationFieldFlag.RADIO)&&!this.hasFieldFlag(In.AnnotationFieldFlag.PUSHBUTTON),this.data.radioButton=this.hasFieldFlag(In.AnnotationFieldFlag.RADIO)&&!this.hasFieldFlag(In.AnnotationFieldFlag.PUSHBUTTON),this.data.pushButton=this.hasFieldFlag(In.AnnotationFieldFlag.PUSHBUTTON),this.data.isTooltipOnly=!1,this.data.checkBox?this._processCheckBox(Si):this.data.radioButton?this._processRadioButton(Si):this.data.pushButton?(this.data.hasOwnCanvas=!0,this._processPushButton(Si)):(0,In.warn)("Invalid field flags for button widget annotation")}async getOperatorList(Si,Ti,Ri,Mi,Ui){if(this.data.pushButton)return super.getOperatorList(Si,Ti,Ri,!1,Ui);let Hi=null,Li=null;if(Ui){const $i=Ui.get(this.data.id);Hi=$i?$i.value:null,Li=$i?$i.rotation:null}if(Hi===null&&this.appearance)return super.getOperatorList(Si,Ti,Ri,Mi,Ui);Hi==null&&(Hi=this.data.checkBox?this.data.fieldValue===this.data.exportValue:this.data.fieldValue===this.data.buttonValue);const Ei=Hi?this.checkedAppearance:this.uncheckedAppearance;if(Ei){const $i=this.appearance,Bi=Ei.dict.getArray("Matrix")||In.IDENTITY_MATRIX;Li&&Ei.dict.set("Matrix",this.getRotationMatrix(Ui)),this.appearance=Ei;const Oi=super.getOperatorList(Si,Ti,Ri,Mi,Ui);return this.appearance=$i,Ei.dict.set("Matrix",Bi),Oi}return{opList:new On.OperatorList,separateForm:!1,separateCanvas:!1}}async save(Si,Ti,Ri){return this.data.checkBox?this._saveCheckbox(Si,Ti,Ri):this.data.radioButton?this._saveRadioButton(Si,Ti,Ri):null}async _saveCheckbox(Si,Ti,Ri){if(!Ri)return null;const Mi=Ri.get(this.data.id);let Ui=Mi==null?void 0:Mi.rotation,Hi=Mi==null?void 0:Mi.value;if(Ui===void 0&&(Hi===void 0||this.data.fieldValue===this.data.exportValue===Hi))return null;const Li=Si.xref.fetchIfRef(this.ref);if(!(Li instanceof Cn.Dict))return null;Ui===void 0&&(Ui=this.rotation),Hi===void 0&&(Hi=this.data.fieldValue===this.data.exportValue);const Ei={path:this.data.fieldName,value:Hi?this.data.exportValue:""},$i=Cn.Name.get(Hi?this.data.exportValue:"Off");Li.set("V",$i),Li.set("AS",$i),Li.set("M",`D:${(0,In.getModificationDate)()}`);const Bi=this._getMKDict(Ui);Bi&&Li.set("MK",Bi);const Oi=[];return await(0,hi.writeObject)(this.ref,Li,Oi,Si.xref),[{ref:this.ref,data:Oi.join(""),xfa:Ei}]}async _saveRadioButton(Si,Ti,Ri){if(!Ri)return null;const Mi=Ri.get(this.data.id);let Ui=Mi==null?void 0:Mi.rotation,Hi=Mi==null?void 0:Mi.value;if(Ui===void 0&&(Hi===void 0||this.data.fieldValue===this.data.buttonValue===Hi))return null;const Li=Si.xref.fetchIfRef(this.ref);if(!(Li instanceof Cn.Dict))return null;Hi===void 0&&(Hi=this.data.fieldValue===this.data.buttonValue),Ui===void 0&&(Ui=this.rotation);const Ei={path:this.data.fieldName,value:Hi?this.data.buttonValue:""},$i=Cn.Name.get(Hi?this.data.buttonValue:"Off"),Bi=[];let Oi=null;if(Hi)if(this.parent instanceof Cn.Ref){const qi=Si.xref.fetch(this.parent);qi.set("V",$i),await(0,hi.writeObject)(this.parent,qi,Bi,Si.xref),Oi=Bi.join(""),Bi.length=0}else this.parent instanceof Cn.Dict&&this.parent.set("V",$i);Li.set("AS",$i),Li.set("M",`D:${(0,In.getModificationDate)()}`);const Xi=this._getMKDict(Ui);Xi&&Li.set("MK",Xi),await(0,hi.writeObject)(this.ref,Li,Bi,Si.xref);const Gi=[{ref:this.ref,data:Bi.join(""),xfa:Ei}];return Oi&&Gi.push({ref:this.parent,data:Oi,xfa:null}),Gi}_getDefaultCheckedAppearance(Si,Ti){const Ri=this.data.rect[2]-this.data.rect[0],Mi=this.data.rect[3]-this.data.rect[1],Ui=[0,0,Ri,Mi],Li=Math.min(Ri,Mi)*.8;let Ei,$i;Ti==="check"?(Ei={width:.755*Li,height:.705*Li},$i="3"):Ti==="disc"?(Ei={width:.791*Li,height:.705*Li},$i="l"):(0,In.unreachable)(`_getDefaultCheckedAppearance - unsupported type: ${Ti}`);const Bi=(0,Ln.numberToString)((Ri-Ei.width)/2),Oi=(0,Ln.numberToString)((Mi-Ei.height)/2),Xi=`q BT /PdfJsZaDb ${Li} Tf 0 g ${Bi} ${Oi} Td (${$i}) Tj ET Q`,Gi=new Cn.Dict(Si.xref);Gi.set("FormType",1),Gi.set("Subtype",Cn.Name.get("Form")),Gi.set("Type",Cn.Name.get("XObject")),Gi.set("BBox",Ui),Gi.set("Matrix",[1,0,0,1,0,0]),Gi.set("Length",Xi.length);const qi=new Cn.Dict(Si.xref),ns=new Cn.Dict(Si.xref);ns.set("PdfJsZaDb",this.fallbackFontDict),qi.set("Font",ns),Gi.set("Resources",qi),this.checkedAppearance=new Tn.StringStream(Xi),this.checkedAppearance.dict=Gi,this._streams.push(this.checkedAppearance)}_processCheckBox(Si){const Ti=Si.dict.get("AP");if(!(Ti instanceof Cn.Dict))return;const Ri=Ti.get("N");if(!(Ri instanceof Cn.Dict))return;const Mi=this._decodeFormValue(Si.dict.get("AS"));typeof Mi=="string"&&(this.data.fieldValue=Mi);const Ui=this.data.fieldValue!==null&&this.data.fieldValue!=="Off"?this.data.fieldValue:"Yes",Hi=Ri.getKeys();if(Hi.length===0)Hi.push("Off",Ui);else if(Hi.length===1)Hi[0]==="Off"?Hi.push(Ui):Hi.unshift("Off");else if(Hi.includes(Ui))Hi.length=0,Hi.push("Off",Ui);else{const $i=Hi.find(Bi=>Bi!=="Off");Hi.length=0,Hi.push("Off",$i)}Hi.includes(this.data.fieldValue)||(this.data.fieldValue="Off"),this.data.exportValue=Hi[1];const Li=Ri.get(this.data.exportValue);this.checkedAppearance=Li instanceof Rn.BaseStream?Li:null;const Ei=Ri.get("Off");this.uncheckedAppearance=Ei instanceof Rn.BaseStream?Ei:null,this.checkedAppearance?this._streams.push(this.checkedAppearance):this._getDefaultCheckedAppearance(Si,"check"),this.uncheckedAppearance&&this._streams.push(this.uncheckedAppearance),this._fallbackFontDict=this.fallbackFontDict,this.data.defaultFieldValue===null&&(this.data.defaultFieldValue="Off")}_processRadioButton(Si){this.data.fieldValue=this.data.buttonValue=null;const Ti=Si.dict.get("Parent");if(Ti instanceof Cn.Dict){this.parent=Si.dict.getRaw("Parent");const Li=Ti.get("V");Li instanceof Cn.Name&&(this.data.fieldValue=this._decodeFormValue(Li))}const Ri=Si.dict.get("AP");if(!(Ri instanceof Cn.Dict))return;const Mi=Ri.get("N");if(!(Mi instanceof Cn.Dict))return;for(const Li of Mi.getKeys())if(Li!=="Off"){this.data.buttonValue=this._decodeFormValue(Li);break}const Ui=Mi.get(this.data.buttonValue);this.checkedAppearance=Ui instanceof Rn.BaseStream?Ui:null;const Hi=Mi.get("Off");this.uncheckedAppearance=Hi instanceof Rn.BaseStream?Hi:null,this.checkedAppearance?this._streams.push(this.checkedAppearance):this._getDefaultCheckedAppearance(Si,"disc"),this.uncheckedAppearance&&this._streams.push(this.uncheckedAppearance),this._fallbackFontDict=this.fallbackFontDict,this.data.defaultFieldValue===null&&(this.data.defaultFieldValue="Off")}_processPushButton(Si){const{dict:Ti,annotationGlobals:Ri}=Si;if(!Ti.has("A")&&!Ti.has("AA")&&!this.data.alternativeText){(0,In.warn)("Push buttons without action dictionaries are not supported");return}this.data.isTooltipOnly=!Ti.has("A")&&!Ti.has("AA"),si.Catalog.parseDestDictionary({destDict:Ti,resultObj:this.data,docBaseUrl:Ri.baseUrl,docAttachments:Ri.attachments})}getFieldObject(){let Si="button",Ti;return this.data.checkBox?(Si="checkbox",Ti=this.data.exportValue):this.data.radioButton&&(Si="radiobutton",Ti=this.data.buttonValue),{id:this.data.id,value:this.data.fieldValue||"Off",defaultValue:this.data.defaultFieldValue,exportValues:Ti,editable:!this.data.readOnly,name:this.data.fieldName,rect:this.data.rect,hidden:this.data.hidden,actions:this.data.actions,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,rotation:this.rotation,type:Si}}get fallbackFontDict(){const Si=new Cn.Dict;return Si.set("BaseFont",Cn.Name.get("ZapfDingbats")),Si.set("Type",Cn.Name.get("FallbackType")),Si.set("Subtype",Cn.Name.get("FallbackType")),Si.set("Encoding",Cn.Name.get("ZapfDingbatsEncoding")),(0,In.shadow)(this,"fallbackFontDict",Si)}}class ni extends Gn{constructor(Si){super(Si);const{dict:Ti,xref:Ri}=Si;this.indices=Ti.getArray("I"),this.hasIndices=Array.isArray(this.indices)&&this.indices.length>0,this.data.options=[];const Mi=(0,Ln.getInheritableProperty)({dict:Ti,key:"Opt"});if(Array.isArray(Mi))for(let Ui=0,Hi=Mi.length;Ui<Hi;Ui++){const Li=Ri.fetchIfRef(Mi[Ui]),Ei=Array.isArray(Li);this.data.options[Ui]={exportValue:this._decodeFormValue(Ei?Ri.fetchIfRef(Li[0]):Li),displayValue:this._decodeFormValue(Ei?Ri.fetchIfRef(Li[1]):Li)}}if(!this.hasIndices)typeof this.data.fieldValue=="string"?this.data.fieldValue=[this.data.fieldValue]:this.data.fieldValue||(this.data.fieldValue=[]);else{this.data.fieldValue=[];const Ui=this.data.options.length;for(const Hi of this.indices)Number.isInteger(Hi)&&Hi>=0&&Hi<Ui&&this.data.fieldValue.push(this.data.options[Hi].exportValue)}this.data.combo=this.hasFieldFlag(In.AnnotationFieldFlag.COMBO),this.data.multiSelect=this.hasFieldFlag(In.AnnotationFieldFlag.MULTISELECT),this._hasText=!0}getFieldObject(){const Si=this.data.combo?"combobox":"listbox",Ti=this.data.fieldValue.length>0?this.data.fieldValue[0]:null;return{id:this.data.id,value:Ti,defaultValue:this.data.defaultFieldValue,editable:!this.data.readOnly,name:this.data.fieldName,rect:this.data.rect,numItems:this.data.fieldValue.length,multipleSelection:this.data.multiSelect,hidden:this.data.hidden,actions:this.data.actions,items:this.data.options,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,rotation:this.rotation,type:Si}}amendSavedDict(Si,Ti){var Hi;if(!this.hasIndices)return;let Ri=(Hi=Si==null?void 0:Si.get(this.data.id))==null?void 0:Hi.value;Array.isArray(Ri)||(Ri=[Ri]);const Mi=[],{options:Ui}=this.data;for(let Li=0,Ei=0,$i=Ui.length;Li<$i;Li++)Ui[Li].exportValue===Ri[Ei]&&(Mi.push(Li),Ei+=1);Ti.set("I",Mi)}async _getAppearance(Si,Ti,Ri,Mi){if(this.data.combo)return super._getAppearance(Si,Ti,Ri,Mi);let Ui,Hi;const Li=Mi==null?void 0:Mi.get(this.data.id);if(Li&&(Hi=Li.rotation,Ui=Li.value),Hi===void 0&&Ui===void 0&&!this._needAppearances)return null;Ui===void 0?Ui=this.data.fieldValue:Array.isArray(Ui)||(Ui=[Ui]);const Ei=1,$i=2;let Bi=this.data.rect[3]-this.data.rect[1],Oi=this.data.rect[2]-this.data.rect[0];(Hi===90||Hi===270)&&([Oi,Bi]=[Bi,Oi]);const Xi=this.data.options.length,Gi=[];for(let es=0;es<Xi;es++){const{exportValue:rs}=this.data.options[es];Ui.includes(rs)&&Gi.push(es)}this._defaultAppearance||(this.data.defaultAppearanceData=(0,jn.parseDefaultAppearance)(this._defaultAppearance="/Helvetica 0 Tf 0 g"));const qi=await Gn._getFontData(Si,Ti,this.data.defaultAppearanceData,this._fieldResources.mergedResources);let ns,{fontSize:is}=this.data.defaultAppearanceData;if(is)ns=this._defaultAppearance;else{const es=(Bi-Ei)/Xi;let rs=-1,ss;for(const{displayValue:os}of this.data.options){const ks=this._getTextWidth(os,qi);ks>rs&&(rs=ks,ss=os)}[ns,is]=this._computeFontSize(es,Oi-2*$i,ss,qi,-1)}const as=is*In.LINE_FACTOR,hs=(as-is)/2,Yi=Math.floor(Bi/as);let Vi=0;if(Gi.length>0){const es=Math.min(...Gi),rs=Math.max(...Gi);Vi=Math.max(0,rs-Yi+1),Vi>es&&(Vi=es)}const Zi=Math.min(Vi+Yi+1,Xi),us=["/Tx BMC q",`1 1 ${Oi} ${Bi} re W n`];if(Gi.length){us.push("0.600006 0.756866 0.854904 rg");for(const es of Gi)Vi<=es&&es<Zi&&us.push(`1 ${Bi-(es-Vi+1)*as} ${Oi} ${as} re f`)}us.push("BT",ns,`1 0 0 1 0 ${Bi} Tm`);const ts={shift:0};for(let es=Vi;es<Zi;es++){const{displayValue:rs}=this.data.options[es],ss=es===Vi?hs:0;us.push(this._renderText(rs,qi,is,Oi,0,ts,$i,-as+ss))}return us.push("ET Q EMC"),us.join(`
`)}}class li extends Gn{constructor(Si){super(Si),this.data.fieldValue=null,this.data.hasOwnCanvas=this.data.noRotate}getFieldObject(){return{id:this.data.id,value:null,page:this.data.pageIndex,type:"signature"}}}class Ai extends Zn{constructor(Si){super(Si),this.data.noRotate=!0,this.data.hasOwnCanvas=this.data.noRotate;const{dict:Ri}=Si;this.data.annotationType=In.AnnotationType.TEXT,this.data.hasAppearance?this.data.name="NoIcon":(this.data.rect[1]=this.data.rect[3]-22,this.data.rect[2]=this.data.rect[0]+22,this.data.name=Ri.has("Name")?Ri.get("Name").name:"Note"),Ri.has("State")?(this.data.state=Ri.get("State")||null,this.data.stateModel=Ri.get("StateModel")||null):(this.data.state=null,this.data.stateModel=null)}}class gi extends Jn{constructor(Si){var Ui;super(Si);const{dict:Ti,annotationGlobals:Ri}=Si;this.data.annotationType=In.AnnotationType.LINK;const Mi=fi(Ti,this.rectangle);Mi&&(this.data.quadPoints=Mi),(Ui=this.data).borderColor||(Ui.borderColor=this.data.color),si.Catalog.parseDestDictionary({destDict:Ti,resultObj:this.data,docBaseUrl:Ri.baseUrl,docAttachments:Ri.attachments})}}class yi extends Jn{constructor(Si){super(Si);const{dict:Ti}=Si;this.data.annotationType=In.AnnotationType.POPUP,(this.data.rect[0]===this.data.rect[2]||this.data.rect[1]===this.data.rect[3])&&(this.data.rect=null);let Ri=Ti.get("Parent");if(!Ri){(0,In.warn)("Popup annotation has a missing or invalid parent annotation.");return}const Mi=Ri.getArray("Rect");this.data.parentRect=Array.isArray(Mi)&&Mi.length===4?In.Util.normalizeRect(Mi):null;const Ui=Ri.get("RT");if((0,Cn.isName)(Ui,In.AnnotationReplyType.GROUP)&&(Ri=Ri.get("IRT")),Ri.has("M")?(this.setModificationDate(Ri.get("M")),this.data.modificationDate=this.modificationDate):this.data.modificationDate=null,Ri.has("C")?(this.setColor(Ri.getArray("C")),this.data.color=this.color):this.data.color=null,!this.viewable){const Hi=Ri.get("F");this._isViewable(Hi)&&this.setFlags(Hi)}this.setTitle(Ri.get("T")),this.data.titleObj=this._title,this.setContents(Ri.get("Contents")),this.data.contentsObj=this._contents,Ri.has("RC")&&(this.data.richText=Xn.XFAFactory.getRichTextAsHtml(Ri.get("RC"))),this.data.open=!!Ti.get("Open")}}Mn.PopupAnnotation=yi;class Ii extends Zn{constructor(Si){var Mi;super(Si),this.data.hasOwnCanvas=!0;const{evaluatorOptions:Ti,xref:Ri}=Si;if(this.data.annotationType=In.AnnotationType.FREETEXT,this.setDefaultAppearance(Si),this.appearance){const{fontColor:Ui,fontSize:Hi}=(0,jn.parseAppearanceStream)(this.appearance,Ti,Ri);this.data.defaultAppearanceData.fontColor=Ui,this.data.defaultAppearanceData.fontSize=Hi||10}else if(this._isOffscreenCanvasSupported){const Ui=Si.dict.get("CA"),Hi=new jn.FakeUnicodeFont(Ri,"sans-serif");(Mi=this.data.defaultAppearanceData).fontSize||(Mi.fontSize=10);const{fontColor:Li,fontSize:Ei}=this.data.defaultAppearanceData;this.appearance=Hi.createAppearance(this._contents.str,this.rectangle,this.rotation,Ei,Li,Ui),this._streams.push(this.appearance,jn.FakeUnicodeFont.toUnicodeStream)}else(0,In.warn)("FreeTextAnnotation: OffscreenCanvas is not supported, annotation may not render correctly.")}get hasTextContent(){return!!this.appearance}static createNewDict(Si,Ti,{apRef:Ri,ap:Mi}){const{color:Ui,fontSize:Hi,rect:Li,rotation:Ei,user:$i,value:Bi}=Si,Oi=new Cn.Dict(Ti);Oi.set("Type",Cn.Name.get("Annot")),Oi.set("Subtype",Cn.Name.get("FreeText")),Oi.set("CreationDate",`D:${(0,In.getModificationDate)()}`),Oi.set("Rect",Li);const Xi=`/Helv ${Hi} Tf ${(0,jn.getPdfColor)(Ui,!0)}`;if(Oi.set("DA",Xi),Oi.set("Contents",(0,Ln.isAscii)(Bi)?Bi:(0,Ln.stringToUTF16String)(Bi,!0)),Oi.set("F",4),Oi.set("Border",[0,0,0]),Oi.set("Rotate",Ei),$i&&Oi.set("T",(0,Ln.isAscii)($i)?$i:(0,Ln.stringToUTF16String)($i,!0)),Ri||Mi){const Gi=new Cn.Dict(Ti);Oi.set("AP",Gi),Ri?Gi.set("N",Ri):Gi.set("N",Mi)}return Oi}static async createNewAppearanceStream(Si,Ti,Ri){const{baseFontRef:Mi,evaluator:Ui,task:Hi}=Ri,{color:Li,fontSize:Ei,rect:$i,rotation:Bi,value:Oi}=Si,Xi=new Cn.Dict(Ti),Gi=new Cn.Dict(Ti);if(Mi)Gi.set("Helv",Mi);else{const fs=new Cn.Dict(Ti);fs.set("BaseFont",Cn.Name.get("Helvetica")),fs.set("Type",Cn.Name.get("Font")),fs.set("Subtype",Cn.Name.get("Type1")),fs.set("Encoding",Cn.Name.get("WinAnsiEncoding")),Gi.set("Helv",fs)}Xi.set("Font",Gi);const qi=await Gn._getFontData(Ui,Hi,{fontName:"Helv",fontSize:Ei},Xi),[ns,is,as,hs]=$i;let Yi=as-ns,Vi=hs-is;Bi%180!==0&&([Yi,Vi]=[Vi,Yi]);const Zi=Oi.split(`
`),us=Ei/1e3;let ts=-1/0;const es=[];for(let fs of Zi){const ps=qi.encodeString(fs);if(ps.length>1)return null;fs=ps.join(""),es.push(fs);let gs=0;const bs=qi.charsToGlyphs(fs);for(const vs of bs)gs+=vs.width*us;ts=Math.max(ts,gs)}let rs=1;ts>Yi&&(rs=Yi/ts);let ss=1;const os=In.LINE_FACTOR*Ei,ks=(In.LINE_FACTOR-In.LINE_DESCENT_FACTOR)*Ei,xs=os*Zi.length;xs>Vi&&(ss=Vi/xs);const Rs=Math.min(rs,ss),ms=Ei*Rs;let Bs,ws,Ts;switch(Bi){case 0:Ts=[1,0,0,1],ws=[$i[0],$i[1],Yi,Vi],Bs=[$i[0],$i[3]-ks];break;case 90:Ts=[0,1,-1,0],ws=[$i[1],-$i[2],Yi,Vi],Bs=[$i[1],-$i[0]-ks];break;case 180:Ts=[-1,0,0,-1],ws=[-$i[2],-$i[3],Yi,Vi],Bs=[-$i[2],-$i[1]-ks];break;case 270:Ts=[0,-1,1,0],ws=[-$i[3],$i[0],Yi,Vi],Bs=[-$i[3],$i[2]-ks];break}const Is=["q",`${Ts.join(" ")} 0 0 cm`,`${ws.join(" ")} re W n`,"BT",`${(0,jn.getPdfColor)(Li,!0)}`,`0 Tc /Helv ${(0,Ln.numberToString)(ms)} Tf`];Is.push(`${Bs.join(" ")} Td (${(0,Ln.escapeString)(es[0])}) Tj`);const ls=(0,Ln.numberToString)(os);for(let fs=1,ps=es.length;fs<ps;fs++){const gs=es[fs];Is.push(`0 -${ls} Td (${(0,Ln.escapeString)(gs)}) Tj`)}Is.push("ET","Q");const Wi=Is.join(`
`),Ji=new Cn.Dict(Ti);Ji.set("FormType",1),Ji.set("Subtype",Cn.Name.get("Form")),Ji.set("Type",Cn.Name.get("XObject")),Ji.set("BBox",$i),Ji.set("Resources",Xi),Ji.set("Matrix",[1,0,0,1,-$i[0],-$i[1]]);const cs=new Tn.StringStream(Wi);return cs.dict=Ji,cs}}class xi extends Zn{constructor(Si){super(Si);const{dict:Ti,xref:Ri}=Si;this.data.annotationType=In.AnnotationType.LINE,this.data.hasOwnCanvas=this.data.noRotate;const Mi=Ti.getArray("L");if(this.data.lineCoordinates=In.Util.normalizeRect(Mi),this.setLineEndings(Ti.getArray("LE")),this.data.lineEndings=this.lineEndings,!this.appearance){const Ui=this.color?di(this.color):[0,0,0],Hi=Ti.get("CA"),Li=ri(Ti.getArray("IC"),null),Ei=Li?di(Li):null,$i=Ei?Hi:null,Bi=this.borderStyle.width||1,Oi=2*Bi,Xi=[this.data.lineCoordinates[0]-Oi,this.data.lineCoordinates[1]-Oi,this.data.lineCoordinates[2]+Oi,this.data.lineCoordinates[3]+Oi];In.Util.intersect(this.rectangle,Xi)||(this.rectangle=Xi),this._setDefaultAppearance({xref:Ri,extra:`${Bi} w`,strokeColor:Ui,fillColor:Ei,strokeAlpha:Hi,fillAlpha:$i,pointsCallback:(Gi,qi)=>(Gi.push(`${Mi[0]} ${Mi[1]} m`,`${Mi[2]} ${Mi[3]} l`,"S"),[qi[0].x-Bi,qi[1].x+Bi,qi[3].y-Bi,qi[1].y+Bi])})}}}class Qn extends Zn{constructor(Si){super(Si);const{dict:Ti,xref:Ri}=Si;if(this.data.annotationType=In.AnnotationType.SQUARE,this.data.hasOwnCanvas=this.data.noRotate,!this.appearance){const Mi=this.color?di(this.color):[0,0,0],Ui=Ti.get("CA"),Hi=ri(Ti.getArray("IC"),null),Li=Hi?di(Hi):null,Ei=Li?Ui:null;if(this.borderStyle.width===0&&!Li)return;this._setDefaultAppearance({xref:Ri,extra:`${this.borderStyle.width} w`,strokeColor:Mi,fillColor:Li,strokeAlpha:Ui,fillAlpha:Ei,pointsCallback:($i,Bi)=>{const Oi=Bi[2].x+this.borderStyle.width/2,Xi=Bi[2].y+this.borderStyle.width/2,Gi=Bi[3].x-Bi[2].x-this.borderStyle.width,qi=Bi[1].y-Bi[3].y-this.borderStyle.width;return $i.push(`${Oi} ${Xi} ${Gi} ${qi} re`),Li?$i.push("B"):$i.push("S"),[Bi[0].x,Bi[1].x,Bi[3].y,Bi[1].y]}})}}}class ai extends Zn{constructor(Si){super(Si);const{dict:Ti,xref:Ri}=Si;if(this.data.annotationType=In.AnnotationType.CIRCLE,!this.appearance){const Mi=this.color?di(this.color):[0,0,0],Ui=Ti.get("CA"),Hi=ri(Ti.getArray("IC"),null),Li=Hi?di(Hi):null,Ei=Li?Ui:null;if(this.borderStyle.width===0&&!Li)return;const $i=4/3*Math.tan(Math.PI/(2*4));this._setDefaultAppearance({xref:Ri,extra:`${this.borderStyle.width} w`,strokeColor:Mi,fillColor:Li,strokeAlpha:Ui,fillAlpha:Ei,pointsCallback:(Bi,Oi)=>{const Xi=Oi[0].x+this.borderStyle.width/2,Gi=Oi[0].y-this.borderStyle.width/2,qi=Oi[3].x-this.borderStyle.width/2,ns=Oi[3].y+this.borderStyle.width/2,is=Xi+(qi-Xi)/2,as=Gi+(ns-Gi)/2,hs=(qi-Xi)/2*$i,Yi=(ns-Gi)/2*$i;return Bi.push(`${is} ${ns} m`,`${is+hs} ${ns} ${qi} ${as+Yi} ${qi} ${as} c`,`${qi} ${as-Yi} ${is+hs} ${Gi} ${is} ${Gi} c`,`${is-hs} ${Gi} ${Xi} ${as-Yi} ${Xi} ${as} c`,`${Xi} ${as+Yi} ${is-hs} ${ns} ${is} ${ns} c`,"h"),Li?Bi.push("B"):Bi.push("S"),[Oi[0].x,Oi[1].x,Oi[3].y,Oi[1].y]}})}}}class Vn extends Zn{constructor(Si){super(Si);const{dict:Ti,xref:Ri}=Si;this.data.annotationType=In.AnnotationType.POLYLINE,this.data.hasOwnCanvas=this.data.noRotate,this.data.vertices=[],this instanceof Yn||(this.setLineEndings(Ti.getArray("LE")),this.data.lineEndings=this.lineEndings);const Mi=Ti.getArray("Vertices");if(Array.isArray(Mi)){for(let Ui=0,Hi=Mi.length;Ui<Hi;Ui+=2)this.data.vertices.push({x:Mi[Ui],y:Mi[Ui+1]});if(!this.appearance){const Ui=this.color?di(this.color):[0,0,0],Hi=Ti.get("CA"),Li=this.borderStyle.width||1,Ei=2*Li,$i=[1/0,1/0,-1/0,-1/0];for(const Bi of this.data.vertices)$i[0]=Math.min($i[0],Bi.x-Ei),$i[1]=Math.min($i[1],Bi.y-Ei),$i[2]=Math.max($i[2],Bi.x+Ei),$i[3]=Math.max($i[3],Bi.y+Ei);In.Util.intersect(this.rectangle,$i)||(this.rectangle=$i),this._setDefaultAppearance({xref:Ri,extra:`${Li} w`,strokeColor:Ui,strokeAlpha:Hi,pointsCallback:(Bi,Oi)=>{const Xi=this.data.vertices;for(let Gi=0,qi=Xi.length;Gi<qi;Gi++)Bi.push(`${Xi[Gi].x} ${Xi[Gi].y} ${Gi===0?"m":"l"}`);return Bi.push("S"),[Oi[0].x,Oi[1].x,Oi[3].y,Oi[1].y]}})}}}}class Yn extends Vn{constructor(Si){super(Si),this.data.annotationType=In.AnnotationType.POLYGON}}class ci extends Zn{constructor(Si){super(Si),this.data.annotationType=In.AnnotationType.CARET}}class bi extends Zn{constructor(Si){super(Si),this.data.hasOwnCanvas=this.data.noRotate;const{dict:Ti,xref:Ri}=Si;this.data.annotationType=In.AnnotationType.INK,this.data.inkLists=[];const Mi=Ti.getArray("InkList");if(Array.isArray(Mi)){for(let Ui=0,Hi=Mi.length;Ui<Hi;++Ui){this.data.inkLists.push([]);for(let Li=0,Ei=Mi[Ui].length;Li<Ei;Li+=2)this.data.inkLists[Ui].push({x:Ri.fetchIfRef(Mi[Ui][Li]),y:Ri.fetchIfRef(Mi[Ui][Li+1])})}if(!this.appearance){const Ui=this.color?di(this.color):[0,0,0],Hi=Ti.get("CA"),Li=this.borderStyle.width||1,Ei=2*Li,$i=[1/0,1/0,-1/0,-1/0];for(const Bi of this.data.inkLists)for(const Oi of Bi)$i[0]=Math.min($i[0],Oi.x-Ei),$i[1]=Math.min($i[1],Oi.y-Ei),$i[2]=Math.max($i[2],Oi.x+Ei),$i[3]=Math.max($i[3],Oi.y+Ei);In.Util.intersect(this.rectangle,$i)||(this.rectangle=$i),this._setDefaultAppearance({xref:Ri,extra:`${Li} w`,strokeColor:Ui,strokeAlpha:Hi,pointsCallback:(Bi,Oi)=>{for(const Xi of this.data.inkLists){for(let Gi=0,qi=Xi.length;Gi<qi;Gi++)Bi.push(`${Xi[Gi].x} ${Xi[Gi].y} ${Gi===0?"m":"l"}`);Bi.push("S")}return[Oi[0].x,Oi[1].x,Oi[3].y,Oi[1].y]}})}}}static createNewDict(Si,Ti,{apRef:Ri,ap:Mi}){const{color:Ui,opacity:Hi,paths:Li,rect:Ei,rotation:$i,thickness:Bi}=Si,Oi=new Cn.Dict(Ti);Oi.set("Type",Cn.Name.get("Annot")),Oi.set("Subtype",Cn.Name.get("Ink")),Oi.set("CreationDate",`D:${(0,In.getModificationDate)()}`),Oi.set("Rect",Ei),Oi.set("InkList",Li.map(qi=>qi.points)),Oi.set("F",4),Oi.set("Rotate",$i);const Xi=new Cn.Dict(Ti);Oi.set("BS",Xi),Xi.set("W",Bi),Oi.set("C",Array.from(Ui,qi=>qi/255)),Oi.set("CA",Hi);const Gi=new Cn.Dict(Ti);return Oi.set("AP",Gi),Ri?Gi.set("N",Ri):Gi.set("N",Mi),Oi}static async createNewAppearanceStream(Si,Ti,Ri){const{color:Mi,rect:Ui,paths:Hi,thickness:Li,opacity:Ei}=Si,$i=[`${Li} w 1 J 1 j`,`${(0,jn.getPdfColor)(Mi,!1)}`];Ei!==1&&$i.push("/R0 gs");const Bi=[];for(const{bezier:qi}of Hi){Bi.length=0,Bi.push(`${(0,Ln.numberToString)(qi[0])} ${(0,Ln.numberToString)(qi[1])} m`);for(let ns=2,is=qi.length;ns<is;ns+=6){const as=qi.slice(ns,ns+6).map(Ln.numberToString).join(" ");Bi.push(`${as} c`)}Bi.push("S"),$i.push(Bi.join(`
`))}const Oi=$i.join(`
`),Xi=new Cn.Dict(Ti);if(Xi.set("FormType",1),Xi.set("Subtype",Cn.Name.get("Form")),Xi.set("Type",Cn.Name.get("XObject")),Xi.set("BBox",Ui),Xi.set("Length",Oi.length),Ei!==1){const qi=new Cn.Dict(Ti),ns=new Cn.Dict(Ti),is=new Cn.Dict(Ti);is.set("CA",Ei),is.set("Type",Cn.Name.get("ExtGState")),ns.set("R0",is),qi.set("ExtGState",ns),Xi.set("Resources",qi)}const Gi=new Tn.StringStream(Oi);return Gi.dict=Xi,Gi}}class Ci extends Zn{constructor(Si){var Ui;super(Si);const{dict:Ti,xref:Ri}=Si;if(this.data.annotationType=In.AnnotationType.HIGHLIGHT,this.data.quadPoints=fi(Ti,null)){const Hi=(Ui=this.appearance)==null?void 0:Ui.dict.get("Resources");if(!this.appearance||!(Hi!=null&&Hi.has("ExtGState"))){this.appearance&&(0,In.warn)("HighlightAnnotation - ignoring built-in appearance stream.");const Li=this.color?di(this.color):[1,1,0],Ei=Ti.get("CA");this._setDefaultAppearance({xref:Ri,fillColor:Li,blendMode:"Multiply",fillAlpha:Ei,pointsCallback:($i,Bi)=>($i.push(`${Bi[0].x} ${Bi[0].y} m`,`${Bi[1].x} ${Bi[1].y} l`,`${Bi[3].x} ${Bi[3].y} l`,`${Bi[2].x} ${Bi[2].y} l`,"f"),[Bi[0].x,Bi[1].x,Bi[3].y,Bi[1].y])})}}else this.data.popupRef=null}}class Fi extends Zn{constructor(Si){super(Si);const{dict:Ti,xref:Ri}=Si;if(this.data.annotationType=In.AnnotationType.UNDERLINE,this.data.quadPoints=fi(Ti,null)){if(!this.appearance){const Ui=this.color?di(this.color):[0,0,0],Hi=Ti.get("CA");this._setDefaultAppearance({xref:Ri,extra:"[] 0 d 0.571 w",strokeColor:Ui,strokeAlpha:Hi,pointsCallback:(Li,Ei)=>(Li.push(`${Ei[2].x} ${Ei[2].y+1.3} m`,`${Ei[3].x} ${Ei[3].y+1.3} l`,"S"),[Ei[0].x,Ei[1].x,Ei[3].y,Ei[1].y])})}}else this.data.popupRef=null}}class zi extends Zn{constructor(Si){super(Si);const{dict:Ti,xref:Ri}=Si;if(this.data.annotationType=In.AnnotationType.SQUIGGLY,this.data.quadPoints=fi(Ti,null)){if(!this.appearance){const Ui=this.color?di(this.color):[0,0,0],Hi=Ti.get("CA");this._setDefaultAppearance({xref:Ri,extra:"[] 0 d 1 w",strokeColor:Ui,strokeAlpha:Hi,pointsCallback:(Li,Ei)=>{const $i=(Ei[0].y-Ei[2].y)/6;let Bi=$i,Oi=Ei[2].x;const Xi=Ei[2].y,Gi=Ei[3].x;Li.push(`${Oi} ${Xi+Bi} m`);do Oi+=2,Bi=Bi===0?$i:0,Li.push(`${Oi} ${Xi+Bi} l`);while(Oi<Gi);return Li.push("S"),[Ei[2].x,Gi,Xi-2*$i,Xi+2*$i]}})}}else this.data.popupRef=null}}class _i extends Zn{constructor(Si){super(Si);const{dict:Ti,xref:Ri}=Si;if(this.data.annotationType=In.AnnotationType.STRIKEOUT,this.data.quadPoints=fi(Ti,null)){if(!this.appearance){const Ui=this.color?di(this.color):[0,0,0],Hi=Ti.get("CA");this._setDefaultAppearance({xref:Ri,extra:"[] 0 d 1 w",strokeColor:Ui,strokeAlpha:Hi,pointsCallback:(Li,Ei)=>(Li.push(`${(Ei[0].x+Ei[2].x)/2} ${(Ei[0].y+Ei[2].y)/2} m`,`${(Ei[1].x+Ei[3].x)/2} ${(Ei[1].y+Ei[3].y)/2} l`,"S"),[Ei[0].x,Ei[1].x,Ei[3].y,Ei[1].y])})}}else this.data.popupRef=null}}class ji extends Zn{constructor(Si){super(Si),this.data.annotationType=In.AnnotationType.STAMP,this.data.hasOwnCanvas=this.data.noRotate}static async createImage(Si,Ti){const{width:Ri,height:Mi}=Si,Ui=new OffscreenCanvas(Ri,Mi),Hi=Ui.getContext("2d",{alpha:!0});Hi.drawImage(Si,0,0);const Li=Hi.getImageData(0,0,Ri,Mi).data,Ei=new Uint32Array(Li.buffer),$i=Ei.some(In.FeatureTest.isLittleEndian?is=>is>>>24!==255:is=>(is&255)!==255);$i&&(Hi.fillStyle="white",Hi.fillRect(0,0,Ri,Mi),Hi.drawImage(Si,0,0));const Bi=Ui.convertToBlob({type:"image/jpeg",quality:1}).then(is=>is.arrayBuffer()),Oi=Cn.Name.get("XObject"),Xi=Cn.Name.get("Image"),Gi=new Cn.Dict(Ti);Gi.set("Type",Oi),Gi.set("Subtype",Xi),Gi.set("BitsPerComponent",8),Gi.set("ColorSpace",Cn.Name.get("DeviceRGB")),Gi.set("Filter",Cn.Name.get("DCTDecode")),Gi.set("BBox",[0,0,Ri,Mi]),Gi.set("Width",Ri),Gi.set("Height",Mi);let qi=null;if($i){const is=new Uint8Array(Ei.length);if(In.FeatureTest.isLittleEndian)for(let hs=0,Yi=Ei.length;hs<Yi;hs++)is[hs]=Ei[hs]>>>24;else for(let hs=0,Yi=Ei.length;hs<Yi;hs++)is[hs]=Ei[hs]&255;const as=new Cn.Dict(Ti);as.set("Type",Oi),as.set("Subtype",Xi),as.set("BitsPerComponent",8),as.set("ColorSpace",Cn.Name.get("DeviceGray")),as.set("Width",Ri),as.set("Height",Mi),qi=new Tn.Stream(is,0,0,as)}return{imageStream:new Tn.Stream(await Bi,0,0,Gi),smaskStream:qi,width:Ri,height:Mi}}static createNewDict(Si,Ti,{apRef:Ri,ap:Mi}){const{rect:Ui,rotation:Hi,user:Li}=Si,Ei=new Cn.Dict(Ti);if(Ei.set("Type",Cn.Name.get("Annot")),Ei.set("Subtype",Cn.Name.get("Stamp")),Ei.set("CreationDate",`D:${(0,In.getModificationDate)()}`),Ei.set("Rect",Ui),Ei.set("F",4),Ei.set("Border",[0,0,0]),Ei.set("Rotate",Hi),Li&&Ei.set("T",(0,Ln.isAscii)(Li)?Li:(0,Ln.stringToUTF16String)(Li,!0)),Ri||Mi){const $i=new Cn.Dict(Ti);Ei.set("AP",$i),Ri?$i.set("N",Ri):$i.set("N",Mi)}return Ei}static async createNewAppearanceStream(Si,Ti,Ri){const{rotation:Mi}=Si,{imageRef:Ui,width:Hi,height:Li}=Ri.image,Ei=new Cn.Dict(Ti),$i=new Cn.Dict(Ti);Ei.set("XObject",$i),$i.set("Im0",Ui);const Bi=`q ${Hi} 0 0 ${Li} 0 0 cm /Im0 Do Q`,Oi=new Cn.Dict(Ti);if(Oi.set("FormType",1),Oi.set("Subtype",Cn.Name.get("Form")),Oi.set("Type",Cn.Name.get("XObject")),Oi.set("BBox",[0,0,Hi,Li]),Oi.set("Resources",Ei),Mi){const Gi=(0,Ln.getRotationMatrix)(Mi,Hi,Li);Oi.set("Matrix",Gi)}const Xi=new Tn.StringStream(Bi);return Xi.dict=Oi,Xi}}class Pi extends Zn{constructor(Si){super(Si);const{dict:Ti,xref:Ri}=Si,Mi=new Bn.FileSpec(Ti.get("FS"),Ri);this.data.annotationType=In.AnnotationType.FILEATTACHMENT,this.data.hasOwnCanvas=this.data.noRotate,this.data.file=Mi.serializable;const Ui=Ti.get("Name");this.data.name=Ui instanceof Cn.Name?(0,In.stringToPDFString)(Ui.name):"PushPin";const Hi=Ti.get("ca");this.data.fillAlpha=typeof Hi=="number"&&Hi>=0&&Hi<=1?Hi:null}}},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.FakeUnicodeFont=void 0,Mn.createDefaultAppearance=hi,Mn.getPdfColor=On,Mn.parseAppearanceStream=Hn,Mn.parseDefaultAppearance=Bn;var In=ti(4),Ln=ti(3),jn=ti(2),Cn=ti(12),Tn=ti(13),Rn=ti(59),ui=ti(57),si=ti(8);class ei extends Tn.EvaluatorPreprocessor{constructor(ri){super(new si.StringStream(ri))}parse(){const ri={fn:0,args:[]},di={fontSize:0,fontName:"",fontColor:new Uint8ClampedArray(3)};try{for(;ri.args.length=0,!!this.read(ri);){if(this.savedStatesDepth!==0)continue;const{fn:fi,args:wi}=ri;switch(fi|0){case jn.OPS.setFont:const[Jn,pi]=wi;Jn instanceof In.Name&&(di.fontName=Jn.name),typeof pi=="number"&&pi>0&&(di.fontSize=pi);break;case jn.OPS.setFillRGBColor:Cn.ColorSpace.singletons.rgb.getRgbItem(wi,0,di.fontColor,0);break;case jn.OPS.setFillGray:Cn.ColorSpace.singletons.gray.getRgbItem(wi,0,di.fontColor,0);break;case jn.OPS.setFillCMYKColor:Cn.ColorSpace.singletons.cmyk.getRgbItem(wi,0,di.fontColor,0);break}}}catch(fi){(0,jn.warn)(`parseDefaultAppearance - ignoring errors: "${fi}".`)}return di}}function Bn(ii){return new ei(ii).parse()}class Nn extends Tn.EvaluatorPreprocessor{constructor(ri,di,fi){var wi;super(ri),this.stream=ri,this.evaluatorOptions=di,this.xref=fi,this.resources=(wi=ri.dict)==null?void 0:wi.get("Resources")}parse(){const ri={fn:0,args:[]};let di={scaleFactor:1,fontSize:0,fontName:"",fontColor:new Uint8ClampedArray(3),fillColorSpace:Cn.ColorSpace.singletons.gray},fi=!1;const wi=[];try{for(;ri.args.length=0,!(fi||!this.read(ri));){const{fn:Jn,args:pi}=ri;switch(Jn|0){case jn.OPS.save:wi.push({scaleFactor:di.scaleFactor,fontSize:di.fontSize,fontName:di.fontName,fontColor:di.fontColor.slice(),fillColorSpace:di.fillColorSpace});break;case jn.OPS.restore:di=wi.pop()||di;break;case jn.OPS.setTextMatrix:di.scaleFactor*=Math.hypot(pi[0],pi[1]);break;case jn.OPS.setFont:const[Zn,Gn]=pi;Zn instanceof In.Name&&(di.fontName=Zn.name),typeof Gn=="number"&&Gn>0&&(di.fontSize=Gn*di.scaleFactor);break;case jn.OPS.setFillColorSpace:di.fillColorSpace=Cn.ColorSpace.parse({cs:pi[0],xref:this.xref,resources:this.resources,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:this._localColorSpaceCache});break;case jn.OPS.setFillColor:di.fillColorSpace.getRgbItem(pi,0,di.fontColor,0);break;case jn.OPS.setFillRGBColor:Cn.ColorSpace.singletons.rgb.getRgbItem(pi,0,di.fontColor,0);break;case jn.OPS.setFillGray:Cn.ColorSpace.singletons.gray.getRgbItem(pi,0,di.fontColor,0);break;case jn.OPS.setFillCMYKColor:Cn.ColorSpace.singletons.cmyk.getRgbItem(pi,0,di.fontColor,0);break;case jn.OPS.showText:case jn.OPS.showSpacedText:case jn.OPS.nextLineShowText:case jn.OPS.nextLineSetSpacingShowText:fi=!0;break}}}catch(Jn){(0,jn.warn)(`parseAppearanceStream - ignoring errors: "${Jn}".`)}return this.stream.reset(),delete di.scaleFactor,delete di.fillColorSpace,di}get _localColorSpaceCache(){return(0,jn.shadow)(this,"_localColorSpaceCache",new Rn.LocalColorSpaceCache)}get _pdfFunctionFactory(){const ri=new ui.PDFFunctionFactory({xref:this.xref,isEvalSupported:this.evaluatorOptions.isEvalSupported});return(0,jn.shadow)(this,"_pdfFunctionFactory",ri)}}function Hn(ii,ri,di){return new Nn(ii,ri,di).parse()}function On(ii,ri){if(ii[0]===ii[1]&&ii[1]===ii[2]){const di=ii[0]/255;return`${(0,Ln.numberToString)(di)} ${ri?"g":"G"}`}return Array.from(ii,di=>(0,Ln.numberToString)(di/255)).join(" ")+` ${ri?"rg":"RG"}`}function hi({fontSize:ii,fontName:ri,fontColor:di}){return`/${(0,Ln.escapePDFName)(ri)} ${ii} Tf ${On(di,!0)}`}class Xn{constructor(ri,di){this.xref=ri,this.widths=null,this.firstChar=1/0,this.lastChar=-1/0,this.fontFamily=di;const fi=new OffscreenCanvas(1,1);this.ctxMeasure=fi.getContext("2d"),Xn._fontNameId||(Xn._fontNameId=1),this.fontName=In.Name.get(`InvalidPDFjsFont_${di}_${Xn._fontNameId++}`)}get toUnicodeRef(){if(!Xn._toUnicodeRef){const ri=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo
<< /Registry (Adobe)
/Ordering (UCS) /Supplement 0 >> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000> <FFFF>
endcodespacerange
1 beginbfrange
<0000> <FFFF> <0000>
endbfrange
endcmap CMapName currentdict /CMap defineresource pop end end`,di=Xn.toUnicodeStream=new si.StringStream(ri),fi=new In.Dict(this.xref);di.dict=fi,fi.set("Length",ri.length),Xn._toUnicodeRef=this.xref.getNewPersistentRef(di)}return Xn._toUnicodeRef}get fontDescriptorRef(){if(!Xn._fontDescriptorRef){const ri=new In.Dict(this.xref);ri.set("Type",In.Name.get("FontDescriptor")),ri.set("FontName",this.fontName),ri.set("FontFamily","MyriadPro Regular"),ri.set("FontBBox",[0,0,0,0]),ri.set("FontStretch",In.Name.get("Normal")),ri.set("FontWeight",400),ri.set("ItalicAngle",0),Xn._fontDescriptorRef=this.xref.getNewPersistentRef(ri)}return Xn._fontDescriptorRef}get descendantFontRef(){const ri=new In.Dict(this.xref);ri.set("BaseFont",this.fontName),ri.set("Type",In.Name.get("Font")),ri.set("Subtype",In.Name.get("CIDFontType0")),ri.set("CIDToGIDMap",In.Name.get("Identity")),ri.set("FirstChar",this.firstChar),ri.set("LastChar",this.lastChar),ri.set("FontDescriptor",this.fontDescriptorRef),ri.set("DW",1e3);const di=[],fi=[...this.widths.entries()].sort();let wi=null,Jn=null;for(const[Zn,Gn]of fi){if(!wi){wi=Zn,Jn=[Gn];continue}Zn===wi+Jn.length?Jn.push(Gn):(di.push(wi,Jn),wi=Zn,Jn=[Gn])}wi&&di.push(wi,Jn),ri.set("W",di);const pi=new In.Dict(this.xref);return pi.set("Ordering","Identity"),pi.set("Registry","Adobe"),pi.set("Supplement",0),ri.set("CIDSystemInfo",pi),this.xref.getNewPersistentRef(ri)}get baseFontRef(){const ri=new In.Dict(this.xref);return ri.set("BaseFont",this.fontName),ri.set("Type",In.Name.get("Font")),ri.set("Subtype",In.Name.get("Type0")),ri.set("Encoding",In.Name.get("Identity-H")),ri.set("DescendantFonts",[this.descendantFontRef]),ri.set("ToUnicode",this.toUnicodeRef),this.xref.getNewPersistentRef(ri)}get resources(){const ri=new In.Dict(this.xref),di=new In.Dict(this.xref);return di.set(this.fontName.name,this.baseFontRef),ri.set("Font",di),ri}_createContext(){return this.widths=new Map,this.ctxMeasure.font=`1000px ${this.fontFamily}`,this.ctxMeasure}createFontResources(ri){const di=this._createContext();for(const fi of ri.split(/\r\n?|\n/))for(const wi of fi.split("")){const Jn=wi.charCodeAt(0);if(this.widths.has(Jn))continue;const pi=di.measureText(wi),Zn=Math.ceil(pi.width);this.widths.set(Jn,Zn),this.firstChar=Math.min(Jn,this.firstChar),this.lastChar=Math.max(Jn,this.lastChar)}return this.resources}createAppearance(ri,di,fi,wi,Jn,pi){const Zn=this._createContext(),Gn=[];let mi=-1/0;for(const Pi of ri.split(/\r\n?|\n/)){Gn.push(Pi);const Ni=Zn.measureText(Pi).width;mi=Math.max(mi,Ni);for(const Si of Pi.split("")){const Ti=Si.charCodeAt(0);let Ri=this.widths.get(Ti);if(Ri===void 0){const Mi=Zn.measureText(Si);Ri=Math.ceil(Mi.width),this.widths.set(Ti,Ri),this.firstChar=Math.min(Ti,this.firstChar),this.lastChar=Math.max(Ti,this.lastChar)}}}mi*=wi/1e3;const[Wn,ni,li,Ai]=di;let gi=li-Wn,yi=Ai-ni;fi%180!==0&&([gi,yi]=[yi,gi]);let Ii=1;mi>gi&&(Ii=gi/mi);let xi=1;const Qn=jn.LINE_FACTOR*wi,ai=jn.LINE_DESCENT_FACTOR*wi,Vn=Qn*Gn.length;Vn>yi&&(xi=yi/Vn);const Yn=Math.min(Ii,xi),ci=wi*Yn,bi=["q",`0 0 ${(0,Ln.numberToString)(gi)} ${(0,Ln.numberToString)(yi)} re W n`,"BT",`1 0 0 1 0 ${(0,Ln.numberToString)(yi+ai)} Tm 0 Tc ${On(Jn,!0)}`,`/${this.fontName.name} ${(0,Ln.numberToString)(ci)} Tf`],{resources:Ci}=this;if(pi=typeof pi=="number"&&pi>=0&&pi<=1?pi:1,pi!==1){bi.push("/R0 gs");const Pi=new In.Dict(this.xref),Ni=new In.Dict(this.xref);Ni.set("ca",pi),Ni.set("CA",pi),Ni.set("Type",In.Name.get("ExtGState")),Pi.set("R0",Ni),Ci.set("ExtGState",Pi)}const Fi=(0,Ln.numberToString)(Qn);for(const Pi of Gn)bi.push(`0 -${Fi} Td <${(0,Ln.stringToUTF16HexString)(Pi)}> Tj`);bi.push("ET","Q");const zi=bi.join(`
`),_i=new In.Dict(this.xref);if(_i.set("Subtype",In.Name.get("Form")),_i.set("Type",In.Name.get("XObject")),_i.set("BBox",[0,0,gi,yi]),_i.set("Length",zi.length),_i.set("Resources",Ci),fi){const Pi=(0,Ln.getRotationMatrix)(fi,gi,yi);_i.set("Matrix",Pi)}const ji=new si.StringStream(zi);return ji.dict=_i,ji}}Mn.FakeUnicodeFont=Xn},(oi,Mn,ti)=>{var ii,Kc,di,Yc,wi,Jn,pi,Zn,Gn,mi,Wn,ni,li,Mo,gi,Yl,Ii,Jl,Qn,ac,Vn,Po,ci,Ro,Ci,Zl,zi,Ql,ji,eh,Ni,Jc,Ri,rc,Ui,oc,Li,Zc;Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.ColorSpace=void 0;var In=ti(2),Ln=ti(4),jn=ti(5),Cn=ti(3);function Tn($i,Bi,Oi,Xi,Gi,qi,ns){ns=ns!==1?0:ns;const as=Oi/Gi,hs=Xi/qi;let Yi=0,Vi;const Zi=new Uint16Array(Gi),us=Oi*3;for(let ts=0;ts<Gi;ts++)Zi[ts]=Math.floor(ts*as)*3;for(let ts=0;ts<qi;ts++){const es=Math.floor(ts*hs)*us;for(let rs=0;rs<Gi;rs++)Vi=es+Zi[rs],Bi[Yi++]=$i[Vi++],Bi[Yi++]=$i[Vi++],Bi[Yi++]=$i[Vi++],Yi+=ns}}class Rn{constructor(Bi,Oi){this.constructor===Rn&&(0,In.unreachable)("Cannot initialize ColorSpace."),this.name=Bi,this.numComps=Oi}getRgb(Bi,Oi){const Xi=new Uint8ClampedArray(3);return this.getRgbItem(Bi,Oi,Xi,0),Xi}getRgbItem(Bi,Oi,Xi,Gi){(0,In.unreachable)("Should not call ColorSpace.getRgbItem")}getRgbBuffer(Bi,Oi,Xi,Gi,qi,ns,is){(0,In.unreachable)("Should not call ColorSpace.getRgbBuffer")}getOutputLength(Bi,Oi){(0,In.unreachable)("Should not call ColorSpace.getOutputLength")}isPassthrough(Bi){return!1}isDefaultDecode(Bi,Oi){return Rn.isDefaultDecode(Bi,this.numComps)}fillRgb(Bi,Oi,Xi,Gi,qi,ns,is,as,hs){const Yi=Oi*Xi;let Vi=null;const Zi=1<<is,us=Xi!==qi||Oi!==Gi;if(this.isPassthrough(is))Vi=as;else if(this.numComps===1&&Yi>Zi&&this.name!=="DeviceGray"&&this.name!=="DeviceRGB"){const ts=is<=8?new Uint8Array(Zi):new Uint16Array(Zi);for(let rs=0;rs<Zi;rs++)ts[rs]=rs;const es=new Uint8ClampedArray(Zi*3);if(this.getRgbBuffer(ts,0,Zi,es,0,is,0),us){Vi=new Uint8Array(Yi*3);let rs=0;for(let ss=0;ss<Yi;++ss){const os=as[ss]*3;Vi[rs++]=es[os],Vi[rs++]=es[os+1],Vi[rs++]=es[os+2]}}else{let rs=0;for(let ss=0;ss<Yi;++ss){const os=as[ss]*3;Bi[rs++]=es[os],Bi[rs++]=es[os+1],Bi[rs++]=es[os+2],rs+=hs}}}else us?(Vi=new Uint8ClampedArray(Yi*3),this.getRgbBuffer(as,0,Yi,Vi,0,is,0)):this.getRgbBuffer(as,0,Gi*ns,Bi,0,is,hs);if(Vi)if(us)Tn(Vi,Bi,Oi,Xi,Gi,qi,hs);else{let ts=0,es=0;for(let rs=0,ss=Gi*ns;rs<ss;rs++)Bi[ts++]=Vi[es++],Bi[ts++]=Vi[es++],Bi[ts++]=Vi[es++],ts+=hs}}get usesZeroToOneRange(){return(0,In.shadow)(this,"usesZeroToOneRange",!0)}static _cache(Bi,Oi,Xi,Gi){if(!Xi)throw new Error('ColorSpace._cache - expected "localColorSpaceCache" argument.');if(!Gi)throw new Error('ColorSpace._cache - expected "parsedColorSpace" argument.');let qi,ns;Bi instanceof Ln.Ref&&(ns=Bi,Bi=Oi.fetch(Bi)),Bi instanceof Ln.Name&&(qi=Bi.name),(qi||ns)&&Xi.set(qi,ns,Gi)}static getCached(Bi,Oi,Xi){if(!Xi)throw new Error('ColorSpace.getCached - expected "localColorSpaceCache" argument.');if(Bi instanceof Ln.Ref){const Gi=Xi.getByRef(Bi);if(Gi)return Gi;try{Bi=Oi.fetch(Bi)}catch(qi){if(qi instanceof Cn.MissingDataException)throw qi}}if(Bi instanceof Ln.Name){const Gi=Xi.getByName(Bi.name);if(Gi)return Gi}return null}static async parseAsync({cs:Bi,xref:Oi,resources:Xi=null,pdfFunctionFactory:Gi,localColorSpaceCache:qi}){const ns=this._parse(Bi,Oi,Xi,Gi);return this._cache(Bi,Oi,qi,ns),ns}static parse({cs:Bi,xref:Oi,resources:Xi=null,pdfFunctionFactory:Gi,localColorSpaceCache:qi}){const ns=this.getCached(Bi,Oi,qi);if(ns)return ns;const is=this._parse(Bi,Oi,Xi,Gi);return this._cache(Bi,Oi,qi,is),is}static _parse(Bi,Oi,Xi=null,Gi){if(Bi=Oi.fetchIfRef(Bi),Bi instanceof Ln.Name)switch(Bi.name){case"G":case"DeviceGray":return this.singletons.gray;case"RGB":case"DeviceRGB":return this.singletons.rgb;case"CMYK":case"DeviceCMYK":return this.singletons.cmyk;case"Pattern":return new si(null);default:if(Xi instanceof Ln.Dict){const qi=Xi.get("ColorSpace");if(qi instanceof Ln.Dict){const ns=qi.get(Bi.name);if(ns){if(ns instanceof Ln.Name)return this._parse(ns,Oi,Xi,Gi);Bi=ns;break}}}throw new In.FormatError(`Unrecognized ColorSpace: ${Bi.name}`)}if(Array.isArray(Bi)){const qi=Oi.fetchIfRef(Bi[0]).name;let ns,is,as,hs,Yi,Vi;switch(qi){case"G":case"DeviceGray":return this.singletons.gray;case"RGB":case"DeviceRGB":return this.singletons.rgb;case"CMYK":case"DeviceCMYK":return this.singletons.cmyk;case"CalGray":return ns=Oi.fetchIfRef(Bi[1]),hs=ns.getArray("WhitePoint"),Yi=ns.getArray("BlackPoint"),Vi=ns.get("Gamma"),new On(hs,Yi,Vi);case"CalRGB":ns=Oi.fetchIfRef(Bi[1]),hs=ns.getArray("WhitePoint"),Yi=ns.getArray("BlackPoint"),Vi=ns.getArray("Gamma");const Zi=ns.getArray("Matrix");return new hi(hs,Yi,Vi,Zi);case"ICCBased":const ts=Oi.fetchIfRef(Bi[1]).dict;is=ts.get("N");const es=ts.get("Alternate");if(es){const Rs=this._parse(es,Oi,Xi,Gi);if(Rs.numComps===is)return Rs;(0,In.warn)("ICCBased color space: Ignoring incorrect /Alternate entry.")}if(is===1)return this.singletons.gray;if(is===3)return this.singletons.rgb;if(is===4)return this.singletons.cmyk;break;case"Pattern":return as=Bi[1]||null,as&&(as=this._parse(as,Oi,Xi,Gi)),new si(as);case"I":case"Indexed":as=this._parse(Bi[1],Oi,Xi,Gi);const rs=Oi.fetchIfRef(Bi[2])+1,ss=Oi.fetchIfRef(Bi[3]);return new ei(as,rs,ss);case"Separation":case"DeviceN":const os=Oi.fetchIfRef(Bi[1]);is=Array.isArray(os)?os.length:1,as=this._parse(Bi[2],Oi,Xi,Gi);const ks=Gi.create(Bi[3]);return new ui(is,as,ks);case"Lab":ns=Oi.fetchIfRef(Bi[1]),hs=ns.getArray("WhitePoint"),Yi=ns.getArray("BlackPoint");const xs=ns.getArray("Range");return new Xn(hs,Yi,xs);default:throw new In.FormatError(`Unimplemented ColorSpace object: ${qi}`)}}throw new In.FormatError(`Unrecognized ColorSpace object: ${Bi}`)}static isDefaultDecode(Bi,Oi){if(!Array.isArray(Bi))return!0;if(Oi*2!==Bi.length)return(0,In.warn)("The decode map is not the correct length"),!0;for(let Xi=0,Gi=Bi.length;Xi<Gi;Xi+=2)if(Bi[Xi]!==0||Bi[Xi+1]!==1)return!1;return!0}static get singletons(){return(0,In.shadow)(this,"singletons",{get gray(){return(0,In.shadow)(this,"gray",new Bn)},get rgb(){return(0,In.shadow)(this,"rgb",new Nn)},get cmyk(){return(0,In.shadow)(this,"cmyk",new Hn)}})}}Mn.ColorSpace=Rn;class ui extends Rn{constructor(Bi,Oi,Xi){super("Alternate",Bi),this.base=Oi,this.tintFn=Xi,this.tmpBuf=new Float32Array(Oi.numComps)}getRgbItem(Bi,Oi,Xi,Gi){const qi=this.tmpBuf;this.tintFn(Bi,Oi,qi,0),this.base.getRgbItem(qi,0,Xi,Gi)}getRgbBuffer(Bi,Oi,Xi,Gi,qi,ns,is){const as=this.tintFn,hs=this.base,Yi=1/((1<<ns)-1),Vi=hs.numComps,Zi=hs.usesZeroToOneRange,us=(hs.isPassthrough(8)||!Zi)&&is===0;let ts=us?qi:0;const es=us?Gi:new Uint8ClampedArray(Vi*Xi),rs=this.numComps,ss=new Float32Array(rs),os=new Float32Array(Vi);let ks,xs;for(ks=0;ks<Xi;ks++){for(xs=0;xs<rs;xs++)ss[xs]=Bi[Oi++]*Yi;if(as(ss,0,os,0),Zi)for(xs=0;xs<Vi;xs++)es[ts++]=os[xs]*255;else hs.getRgbItem(os,0,es,ts),ts+=Vi}us||hs.getRgbBuffer(es,0,Xi,Gi,qi,8,is)}getOutputLength(Bi,Oi){return this.base.getOutputLength(Bi*this.base.numComps/this.numComps,Oi)}}class si extends Rn{constructor(Bi){super("Pattern",null),this.base=Bi}isDefaultDecode(Bi,Oi){(0,In.unreachable)("Should not call PatternCS.isDefaultDecode")}}class ei extends Rn{constructor(Bi,Oi,Xi){super("Indexed",1),this.base=Bi,this.highVal=Oi;const Gi=Bi.numComps*Oi;if(this.lookup=new Uint8Array(Gi),Xi instanceof jn.BaseStream){const qi=Xi.getBytes(Gi);this.lookup.set(qi)}else if(typeof Xi=="string")for(let qi=0;qi<Gi;++qi)this.lookup[qi]=Xi.charCodeAt(qi)&255;else throw new In.FormatError(`IndexedCS - unrecognized lookup table: ${Xi}`)}getRgbItem(Bi,Oi,Xi,Gi){const qi=this.base.numComps,ns=Bi[Oi]*qi;this.base.getRgbBuffer(this.lookup,ns,1,Xi,Gi,8,0)}getRgbBuffer(Bi,Oi,Xi,Gi,qi,ns,is){const as=this.base,hs=as.numComps,Yi=as.getOutputLength(hs,is),Vi=this.lookup;for(let Zi=0;Zi<Xi;++Zi){const us=Bi[Oi++]*hs;as.getRgbBuffer(Vi,us,1,Gi,qi,8,is),qi+=Yi}}getOutputLength(Bi,Oi){return this.base.getOutputLength(Bi*this.base.numComps,Oi)}isDefaultDecode(Bi,Oi){return Array.isArray(Bi)?Bi.length!==2?((0,In.warn)("Decode map length is not correct"),!0):!Number.isInteger(Oi)||Oi<1?((0,In.warn)("Bits per component is not correct"),!0):Bi[0]===0&&Bi[1]===(1<<Oi)-1:!0}}class Bn extends Rn{constructor(){super("DeviceGray",1)}getRgbItem(Bi,Oi,Xi,Gi){const qi=Bi[Oi]*255;Xi[Gi]=Xi[Gi+1]=Xi[Gi+2]=qi}getRgbBuffer(Bi,Oi,Xi,Gi,qi,ns,is){const as=255/((1<<ns)-1);let hs=Oi,Yi=qi;for(let Vi=0;Vi<Xi;++Vi){const Zi=as*Bi[hs++];Gi[Yi++]=Zi,Gi[Yi++]=Zi,Gi[Yi++]=Zi,Yi+=is}}getOutputLength(Bi,Oi){return Bi*(3+Oi)}}class Nn extends Rn{constructor(){super("DeviceRGB",3)}getRgbItem(Bi,Oi,Xi,Gi){Xi[Gi]=Bi[Oi]*255,Xi[Gi+1]=Bi[Oi+1]*255,Xi[Gi+2]=Bi[Oi+2]*255}getRgbBuffer(Bi,Oi,Xi,Gi,qi,ns,is){if(ns===8&&is===0){Gi.set(Bi.subarray(Oi,Oi+Xi*3),qi);return}const as=255/((1<<ns)-1);let hs=Oi,Yi=qi;for(let Vi=0;Vi<Xi;++Vi)Gi[Yi++]=as*Bi[hs++],Gi[Yi++]=as*Bi[hs++],Gi[Yi++]=as*Bi[hs++],Yi+=is}getOutputLength(Bi,Oi){return Bi*(3+Oi)/3|0}isPassthrough(Bi){return Bi===8}}class Hn extends Rn{constructor(){super("DeviceCMYK",4);Ki(this,ii)}getRgbItem(Oi,Xi,Gi,qi){Qi(this,ii,Kc).call(this,Oi,Xi,1,Gi,qi)}getRgbBuffer(Oi,Xi,Gi,qi,ns,is,as){const hs=1/((1<<is)-1);for(let Yi=0;Yi<Gi;Yi++)Qi(this,ii,Kc).call(this,Oi,Xi,hs,qi,ns),Xi+=4,ns+=3+as}getOutputLength(Oi,Xi){return Oi/4*(3+Xi)|0}}ii=new WeakSet,Kc=function(Oi,Xi,Gi,qi,ns){const is=Oi[Xi]*Gi,as=Oi[Xi+1]*Gi,hs=Oi[Xi+2]*Gi,Yi=Oi[Xi+3]*Gi;qi[ns]=255+is*(-4.387332384609988*is+54.48615194189176*as+18.82290502165302*hs+212.25662451639585*Yi+-285.2331026137004)+as*(1.7149763477362134*as-5.6096736904047315*hs+-17.873870861415444*Yi-5.497006427196366)+hs*(-2.5217340131683033*hs-21.248923337353073*Yi+17.5119270841813)+Yi*(-21.86122147463605*Yi-189.48180835922747),qi[ns+1]=255+is*(8.841041422036149*is+60.118027045597366*as+6.871425592049007*hs+31.159100130055922*Yi+-79.2970844816548)+as*(-15.310361306967817*as+17.575251261109482*hs+131.35250912493976*Yi-190.9453302588951)+hs*(4.444339102852739*hs+9.8632861493405*Yi-24.86741582555878)+Yi*(-20.737325471181034*Yi-187.80453709719578),qi[ns+2]=255+is*(.8842522430003296*is+8.078677503112928*as+30.89978309703729*hs-.23883238689178934*Yi+-14.183576799673286)+as*(10.49593273432072*as+63.02378494754052*hs+50.606957656360734*Yi-112.23884253719248)+hs*(.03296041114873217*hs+115.60384449646641*Yi+-193.58209356861505)+Yi*(-22.33816807309886*Yi-180.12613974708367)};class On extends Rn{constructor(Oi,Xi,Gi){super("CalGray",1);Ki(this,di);if(!Oi)throw new In.FormatError("WhitePoint missing - required for color space CalGray");if([this.XW,this.YW,this.ZW]=Oi,[this.XB,this.YB,this.ZB]=Xi||[0,0,0],this.G=Gi||1,this.XW<0||this.ZW<0||this.YW!==1)throw new In.FormatError(`Invalid WhitePoint components for ${this.name}, no fallback available`);(this.XB<0||this.YB<0||this.ZB<0)&&((0,In.info)(`Invalid BlackPoint for ${this.name}, falling back to default.`),this.XB=this.YB=this.ZB=0),(this.XB!==0||this.YB!==0||this.ZB!==0)&&(0,In.warn)(`${this.name}, BlackPoint: XB: ${this.XB}, YB: ${this.YB}, ZB: ${this.ZB}, only default values are supported.`),this.G<1&&((0,In.info)(`Invalid Gamma: ${this.G} for ${this.name}, falling back to default.`),this.G=1)}getRgbItem(Oi,Xi,Gi,qi){Qi(this,di,Yc).call(this,Oi,Xi,Gi,qi,1)}getRgbBuffer(Oi,Xi,Gi,qi,ns,is,as){const hs=1/((1<<is)-1);for(let Yi=0;Yi<Gi;++Yi)Qi(this,di,Yc).call(this,Oi,Xi,qi,ns,hs),Xi+=1,ns+=3+as}getOutputLength(Oi,Xi){return Oi*(3+Xi)}}di=new WeakSet,Yc=function(Oi,Xi,Gi,qi,ns){const as=(Oi[Xi]*ns)**this.G,hs=this.YW*as,Yi=Math.max(295.8*hs**.3333333333333333-40.8,0);Gi[qi]=Yi,Gi[qi+1]=Yi,Gi[qi+2]=Yi};const Ti=class Ti extends Rn{constructor(Oi,Xi,Gi,qi){super("CalRGB",3);Ki(this,li);Ki(this,gi);Ki(this,Ii);Ki(this,Qn);Ki(this,Vn);Ki(this,ci);Ki(this,Ci);Ki(this,zi);Ki(this,ji);Ki(this,Ni);if(!Oi)throw new In.FormatError("WhitePoint missing - required for color space CalRGB");const[ns,is,as]=this.whitePoint=Oi,[hs,Yi,Vi]=this.blackPoint=Xi||new Float32Array(3);if([this.GR,this.GG,this.GB]=Gi||new Float32Array([1,1,1]),[this.MXA,this.MYA,this.MZA,this.MXB,this.MYB,this.MZB,this.MXC,this.MYC,this.MZC]=qi||new Float32Array([1,0,0,0,1,0,0,0,1]),ns<0||as<0||is!==1)throw new In.FormatError(`Invalid WhitePoint components for ${this.name}, no fallback available`);(hs<0||Yi<0||Vi<0)&&((0,In.info)(`Invalid BlackPoint for ${this.name} [${hs}, ${Yi}, ${Vi}], falling back to default.`),this.blackPoint=new Float32Array(3)),(this.GR<0||this.GG<0||this.GB<0)&&((0,In.info)(`Invalid Gamma [${this.GR}, ${this.GG}, ${this.GB}] for ${this.name}, falling back to default.`),this.GR=this.GG=this.GB=1)}getRgbItem(Oi,Xi,Gi,qi){Qi(this,Ni,Jc).call(this,Oi,Xi,Gi,qi,1)}getRgbBuffer(Oi,Xi,Gi,qi,ns,is,as){const hs=1/((1<<is)-1);for(let Yi=0;Yi<Gi;++Yi)Qi(this,Ni,Jc).call(this,Oi,Xi,qi,ns,hs),Xi+=3,ns+=3+as}getOutputLength(Oi,Xi){return Oi*(3+Xi)/3|0}};wi=new WeakMap,Jn=new WeakMap,pi=new WeakMap,Zn=new WeakMap,Gn=new WeakMap,mi=new WeakMap,Wn=new WeakMap,ni=new WeakMap,li=new WeakSet,Mo=function(Oi,Xi,Gi){Gi[0]=Oi[0]*Xi[0]+Oi[1]*Xi[1]+Oi[2]*Xi[2],Gi[1]=Oi[3]*Xi[0]+Oi[4]*Xi[1]+Oi[5]*Xi[2],Gi[2]=Oi[6]*Xi[0]+Oi[7]*Xi[1]+Oi[8]*Xi[2]},gi=new WeakSet,Yl=function(Oi,Xi,Gi){Gi[0]=Xi[0]*1/Oi[0],Gi[1]=Xi[1]*1/Oi[1],Gi[2]=Xi[2]*1/Oi[2]},Ii=new WeakSet,Jl=function(Oi,Xi,Gi){Gi[0]=Xi[0]*.95047/Oi[0],Gi[1]=Xi[1]*1/Oi[1],Gi[2]=Xi[2]*1.08883/Oi[2]},Qn=new WeakSet,ac=function(Oi){return Oi<=.0031308?Qi(this,Vn,Po).call(this,0,1,12.92*Oi):Oi>=.99554525?1:Qi(this,Vn,Po).call(this,0,1,1.055*Oi**.4166666666666667-.055)},Vn=new WeakSet,Po=function(Oi,Xi,Gi){return Math.max(Oi,Math.min(Xi,Gi))},ci=new WeakSet,Ro=function(Oi){return Oi<0?-Qi(this,ci,Ro).call(this,-Oi):Oi>8?((Oi+16)/116)**3:Oi*vi(Ti,ni)},Ci=new WeakSet,Zl=function(Oi,Xi,Gi){if(Oi[0]===0&&Oi[1]===0&&Oi[2]===0){Gi[0]=Xi[0],Gi[1]=Xi[1],Gi[2]=Xi[2];return}const qi=Qi(this,ci,Ro).call(this,0),ns=qi,is=Qi(this,ci,Ro).call(this,Oi[0]),as=qi,hs=Qi(this,ci,Ro).call(this,Oi[1]),Yi=qi,Vi=Qi(this,ci,Ro).call(this,Oi[2]),Zi=(1-ns)/(1-is),us=1-Zi,ts=(1-as)/(1-hs),es=1-ts,rs=(1-Yi)/(1-Vi),ss=1-rs;Gi[0]=Xi[0]*Zi+us,Gi[1]=Xi[1]*ts+es,Gi[2]=Xi[2]*rs+ss},zi=new WeakSet,Ql=function(Oi,Xi,Gi){if(Oi[0]===1&&Oi[2]===1){Gi[0]=Xi[0],Gi[1]=Xi[1],Gi[2]=Xi[2];return}const qi=Gi;Qi(this,li,Mo).call(this,vi(Ti,wi),Xi,qi);const ns=vi(Ti,Gn);Qi(this,gi,Yl).call(this,Oi,qi,ns),Qi(this,li,Mo).call(this,vi(Ti,Jn),ns,Gi)},ji=new WeakSet,eh=function(Oi,Xi,Gi){const qi=Gi;Qi(this,li,Mo).call(this,vi(Ti,wi),Xi,qi);const ns=vi(Ti,Gn);Qi(this,Ii,Jl).call(this,Oi,qi,ns),Qi(this,li,Mo).call(this,vi(Ti,Jn),ns,Gi)},Ni=new WeakSet,Jc=function(Oi,Xi,Gi,qi,ns){const is=Qi(this,Vn,Po).call(this,0,1,Oi[Xi]*ns),as=Qi(this,Vn,Po).call(this,0,1,Oi[Xi+1]*ns),hs=Qi(this,Vn,Po).call(this,0,1,Oi[Xi+2]*ns),Yi=is===1?1:is**this.GR,Vi=as===1?1:as**this.GG,Zi=hs===1?1:hs**this.GB,us=this.MXA*Yi+this.MXB*Vi+this.MXC*Zi,ts=this.MYA*Yi+this.MYB*Vi+this.MYC*Zi,es=this.MZA*Yi+this.MZB*Vi+this.MZC*Zi,rs=vi(Ti,mi);rs[0]=us,rs[1]=ts,rs[2]=es;const ss=vi(Ti,Wn);Qi(this,zi,Ql).call(this,this.whitePoint,rs,ss);const os=vi(Ti,mi);Qi(this,Ci,Zl).call(this,this.blackPoint,ss,os);const ks=vi(Ti,Wn);Qi(this,ji,eh).call(this,vi(Ti,Zn),os,ks);const xs=vi(Ti,mi);Qi(this,li,Mo).call(this,vi(Ti,pi),ks,xs),Gi[qi]=Qi(this,Qn,ac).call(this,xs[0])*255,Gi[qi+1]=Qi(this,Qn,ac).call(this,xs[1])*255,Gi[qi+2]=Qi(this,Qn,ac).call(this,xs[2])*255},Ki(Ti,wi,new Float32Array([.8951,.2664,-.1614,-.7502,1.7135,.0367,.0389,-.0685,1.0296])),Ki(Ti,Jn,new Float32Array([.9869929,-.1470543,.1599627,.4323053,.5183603,.0492912,-.0085287,.0400428,.9684867])),Ki(Ti,pi,new Float32Array([3.2404542,-1.5371385,-.4985314,-.969266,1.8760108,.041556,.0556434,-.2040259,1.0572252])),Ki(Ti,Zn,new Float32Array([1,1,1])),Ki(Ti,Gn,new Float32Array(3)),Ki(Ti,mi,new Float32Array(3)),Ki(Ti,Wn,new Float32Array(3)),Ki(Ti,ni,.0011070564598794539);let hi=Ti;class Xn extends Rn{constructor(Oi,Xi,Gi){super("Lab",3);Ki(this,Ri);Ki(this,Ui);Ki(this,Li);if(!Oi)throw new In.FormatError("WhitePoint missing - required for color space Lab");if([this.XW,this.YW,this.ZW]=Oi,[this.amin,this.amax,this.bmin,this.bmax]=Gi||[-100,100,-100,100],[this.XB,this.YB,this.ZB]=Xi||[0,0,0],this.XW<0||this.ZW<0||this.YW!==1)throw new In.FormatError("Invalid WhitePoint components, no fallback available");(this.XB<0||this.YB<0||this.ZB<0)&&((0,In.info)("Invalid BlackPoint, falling back to default"),this.XB=this.YB=this.ZB=0),(this.amin>this.amax||this.bmin>this.bmax)&&((0,In.info)("Invalid Range, falling back to defaults"),this.amin=-100,this.amax=100,this.bmin=-100,this.bmax=100)}getRgbItem(Oi,Xi,Gi,qi){Qi(this,Li,Zc).call(this,Oi,Xi,!1,Gi,qi)}getRgbBuffer(Oi,Xi,Gi,qi,ns,is,as){const hs=(1<<is)-1;for(let Yi=0;Yi<Gi;Yi++)Qi(this,Li,Zc).call(this,Oi,Xi,hs,qi,ns),Xi+=3,ns+=3+as}getOutputLength(Oi,Xi){return Oi*(3+Xi)/3|0}isDefaultDecode(Oi,Xi){return!0}get usesZeroToOneRange(){return(0,In.shadow)(this,"usesZeroToOneRange",!1)}}Ri=new WeakSet,rc=function(Oi){return Oi>=.20689655172413793?Oi**3:.12841854934601665*(Oi-.13793103448275862)},Ui=new WeakSet,oc=function(Oi,Xi,Gi,qi){return Gi+Oi*(qi-Gi)/Xi},Li=new WeakSet,Zc=function(Oi,Xi,Gi,qi,ns){let is=Oi[Xi],as=Oi[Xi+1],hs=Oi[Xi+2];Gi!==!1&&(is=Qi(this,Ui,oc).call(this,is,Gi,0,100),as=Qi(this,Ui,oc).call(this,as,Gi,this.amin,this.amax),hs=Qi(this,Ui,oc).call(this,hs,Gi,this.bmin,this.bmax)),as>this.amax?as=this.amax:as<this.amin&&(as=this.amin),hs>this.bmax?hs=this.bmax:hs<this.bmin&&(hs=this.bmin);const Yi=(is+16)/116,Vi=Yi+as/500,Zi=Yi-hs/200,us=this.XW*Qi(this,Ri,rc).call(this,Vi),ts=this.YW*Qi(this,Ri,rc).call(this,Yi),es=this.ZW*Qi(this,Ri,rc).call(this,Zi);let rs,ss,os;this.ZW<1?(rs=us*3.1339+ts*-1.617+es*-.4906,ss=us*-.9785+ts*1.916+es*.0333,os=us*.072+ts*-.229+es*1.4057):(rs=us*3.2406+ts*-1.5372+es*-.4986,ss=us*-.9689+ts*1.8758+es*.0415,os=us*.0557+ts*-.204+es*1.057),qi[ns]=Math.sqrt(rs)*255,qi[ns+1]=Math.sqrt(ss)*255,qi[ns+2]=Math.sqrt(os)*255}},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.PartialEvaluator=Mn.EvaluatorPreprocessor=void 0;var In=ti(2),Ln=ti(14),jn=ti(4),Cn=ti(34),Tn=ti(37),Rn=ti(41),ui=ti(50),si=ti(51),ei=ti(42),Bn=ti(57),Nn=ti(16),Hn=ti(59),On=ti(8),hi=ti(5),Xn=ti(60),ii=ti(12),ri=ti(18),di=ti(38),fi=ti(61),wi=ti(39),Jn=ti(45),pi=ti(40),Zn=ti(62),Gn=ti(63),mi=ti(64),Wn=ti(65);const ni=Object.freeze({maxImageSize:-1,disableFontFace:!1,ignoreErrors:!1,isEvalSupported:!0,isOffscreenCanvasSupported:!1,canvasMaxAreaInBytes:-1,fontExtraProperties:!1,useSystemFonts:!0,cMapUrl:null,standardFontDataUrl:null}),li={TILING:1,SHADING:2},Ai=10,gi=Promise.resolve();function yi(zi,_i=!1){if(Array.isArray(zi)){for(const ji of zi){const Pi=yi(ji,!0);if(Pi)return Pi}return(0,In.warn)(`Unsupported blend mode Array: ${zi}`),"source-over"}if(!(zi instanceof jn.Name))return _i?null:"source-over";switch(zi.name){case"Normal":case"Compatible":return"source-over";case"Multiply":return"multiply";case"Screen":return"screen";case"Overlay":return"overlay";case"Darken":return"darken";case"Lighten":return"lighten";case"ColorDodge":return"color-dodge";case"ColorBurn":return"color-burn";case"HardLight":return"hard-light";case"SoftLight":return"soft-light";case"Difference":return"difference";case"Exclusion":return"exclusion";case"Hue":return"hue";case"Saturation":return"saturation";case"Color":return"color";case"Luminosity":return"luminosity"}return _i?null:((0,In.warn)(`Unsupported blend mode: ${zi.name}`),"source-over")}function Ii(zi){var _i;zi.fn===In.OPS.paintImageMaskXObject&&((_i=zi.args[0])==null?void 0:_i.count)>0&&zi.args[0].count++}const Ci=class Ci{constructor(){this.reset()}check(){return++this.checked<Ci.CHECK_TIME_EVERY?!1:(this.checked=0,this.endTime<=Date.now())}reset(){this.endTime=Date.now()+Ci.TIME_SLOT_DURATION_MS,this.checked=0}};ta(Ci,"TIME_SLOT_DURATION_MS",20),ta(Ci,"CHECK_TIME_EVERY",100);let xi=Ci;class Qn{constructor({xref:_i,handler:ji,pageIndex:Pi,idFactory:Ni,fontCache:Si,builtInCMapCache:Ti,standardFontDataCache:Ri,globalImageCache:Mi,systemFontCache:Ui,options:Hi=null}){this.xref=_i,this.handler=ji,this.pageIndex=Pi,this.idFactory=Ni,this.fontCache=Si,this.builtInCMapCache=Ti,this.standardFontDataCache=Ri,this.globalImageCache=Mi,this.systemFontCache=Ui,this.options=Hi||ni,this.parsingType3Font=!1,this._regionalImageCache=new Hn.RegionalImageCache,this._fetchBuiltInCMapBound=this.fetchBuiltInCMap.bind(this),Zn.ImageResizer.setMaxArea(this.options.canvasMaxAreaInBytes)}get _pdfFunctionFactory(){const _i=new Bn.PDFFunctionFactory({xref:this.xref,isEvalSupported:this.options.isEvalSupported});return(0,In.shadow)(this,"_pdfFunctionFactory",_i)}clone(_i=null){const ji=Object.create(this);return ji.options=Object.assign(Object.create(null),this.options,_i),ji}hasBlendModes(_i,ji){if(!(_i instanceof jn.Dict)||_i.objId&&ji.has(_i.objId))return!1;const Pi=new jn.RefSet(ji);_i.objId&&Pi.put(_i.objId);const Ni=[_i],Si=this.xref;for(;Ni.length;){const Ti=Ni.shift(),Ri=Ti.get("ExtGState");if(Ri instanceof jn.Dict)for(let Ui of Ri.getRawValues()){if(Ui instanceof jn.Ref){if(Pi.has(Ui))continue;try{Ui=Si.fetch(Ui)}catch(Li){Pi.put(Ui),(0,In.info)(`hasBlendModes - ignoring ExtGState: "${Li}".`);continue}}if(!(Ui instanceof jn.Dict))continue;Ui.objId&&Pi.put(Ui.objId);const Hi=Ui.get("BM");if(Hi instanceof jn.Name){if(Hi.name!=="Normal")return!0;continue}if(Hi!==void 0&&Array.isArray(Hi)){for(const Li of Hi)if(Li instanceof jn.Name&&Li.name!=="Normal")return!0}}const Mi=Ti.get("XObject");if(Mi instanceof jn.Dict)for(let Ui of Mi.getRawValues()){if(Ui instanceof jn.Ref){if(Pi.has(Ui))continue;try{Ui=Si.fetch(Ui)}catch(Li){Pi.put(Ui),(0,In.info)(`hasBlendModes - ignoring XObject: "${Li}".`);continue}}if(!(Ui instanceof hi.BaseStream))continue;Ui.dict.objId&&Pi.put(Ui.dict.objId);const Hi=Ui.dict.get("Resources");Hi instanceof jn.Dict&&(Hi.objId&&Pi.has(Hi.objId)||(Ni.push(Hi),Hi.objId&&Pi.put(Hi.objId)))}}for(const Ti of Pi)ji.put(Ti);return!1}async fetchBuiltInCMap(_i){const ji=this.builtInCMapCache.get(_i);if(ji)return ji;let Pi;if(this.options.cMapUrl!==null){const Ni=`${this.options.cMapUrl}${_i}.bcmap`,Si=await fetch(Ni);if(!Si.ok)throw new Error(`fetchBuiltInCMap: failed to fetch file "${Ni}" with "${Si.statusText}".`);Pi={cMapData:new Uint8Array(await Si.arrayBuffer()),compressionType:In.CMapCompressionType.BINARY}}else Pi=await this.handler.sendWithPromise("FetchBuiltInCMap",{name:_i});return Pi.compressionType!==In.CMapCompressionType.NONE&&this.builtInCMapCache.set(_i,Pi),Pi}async fetchStandardFontData(_i){const ji=this.standardFontDataCache.get(_i);if(ji)return new On.Stream(ji);if(this.options.useSystemFonts&&_i!=="Symbol"&&_i!=="ZapfDingbats")return null;const Pi=(0,Rn.getFontNameToFileMap)(),Ni=Pi[_i];let Si;if(this.options.standardFontDataUrl!==null){const Ti=`${this.options.standardFontDataUrl}${Ni}`,Ri=await fetch(Ti);Ri.ok?Si=await Ri.arrayBuffer():(0,In.warn)(`fetchStandardFontData: failed to fetch file "${Ti}" with "${Ri.statusText}".`)}else try{Si=await this.handler.sendWithPromise("FetchStandardFontData",{filename:Ni})}catch(Ti){(0,In.warn)(`fetchStandardFontData: failed to fetch file "${Ni}" with "${Ti}".`)}return Si?(this.standardFontDataCache.set(_i,Si),new On.Stream(Si)):null}async buildFormXObject(_i,ji,Pi,Ni,Si,Ti,Ri){const Mi=ji.dict,Ui=Mi.getArray("Matrix");let Hi=Mi.getArray("BBox");Hi=Array.isArray(Hi)&&Hi.length===4?In.Util.normalizeRect(Hi):null;let Li,Ei;Mi.has("OC")&&(Li=await this.parseMarkedContentProps(Mi.get("OC"),_i)),Li!==void 0&&Ni.addOp(In.OPS.beginMarkedContentProps,["OC",Li]);const $i=Mi.get("Group");if($i){Ei={matrix:Ui,bbox:Hi,smask:Pi,isolated:!1,knockout:!1};const Oi=$i.get("S");let Xi=null;if((0,jn.isName)(Oi,"Transparency")&&(Ei.isolated=$i.get("I")||!1,Ei.knockout=$i.get("K")||!1,$i.has("CS"))){const Gi=$i.getRaw("CS"),qi=ii.ColorSpace.getCached(Gi,this.xref,Ri);qi?Xi=qi:Xi=await this.parseColorSpace({cs:Gi,resources:_i,localColorSpaceCache:Ri})}Pi!=null&&Pi.backdrop&&(Xi||(Xi=ii.ColorSpace.singletons.rgb),Pi.backdrop=Xi.getRgb(Pi.backdrop,0)),Ni.addOp(In.OPS.beginGroup,[Ei])}const Bi=$i?[Ui,null]:[Ui,Hi];return Ni.addOp(In.OPS.paintFormXObjectBegin,Bi),this.getOperatorList({stream:ji,task:Si,resources:Mi.get("Resources")||_i,operatorList:Ni,initialState:Ti}).then(function(){Ni.addOp(In.OPS.paintFormXObjectEnd,[]),$i&&Ni.addOp(In.OPS.endGroup,[Ei]),Li!==void 0&&Ni.addOp(In.OPS.endMarkedContent,[])})}_sendImgData(_i,ji,Pi=!1){const Ni=ji?[ji.bitmap||ji.data.buffer]:null;return this.parsingType3Font||Pi?this.handler.send("commonobj",[_i,"Image",ji],Ni):this.handler.send("obj",[_i,this.pageIndex,"Image",ji],Ni)}async buildPaintImageXObject({resources:_i,image:ji,isInline:Pi=!1,operatorList:Ni,cacheKey:Si,localImageCache:Ti,localColorSpaceCache:Ri}){const Mi=ji.dict,Ui=Mi.objId,Hi=Mi.get("W","Width"),Li=Mi.get("H","Height");if(!(Hi&&typeof Hi=="number")||!(Li&&typeof Li=="number")){(0,In.warn)("Image dimensions are missing, or not numbers.");return}const Ei=this.options.maxImageSize;if(Ei!==-1&&Hi*Li>Ei){const is="Image exceeded maximum allowed size and was removed.";if(this.options.ignoreErrors){(0,In.warn)(is);return}throw new Error(is)}let $i;Mi.has("OC")&&($i=await this.parseMarkedContentProps(Mi.get("OC"),_i));const Bi=Mi.get("IM","ImageMask")||!1;let Oi,Xi;if(Bi){const is=Mi.get("I","Interpolate"),as=Hi+7>>3,hs=ji.getBytes(as*Li),Yi=Mi.getArray("D","Decode");if(this.parsingType3Font){if(Oi=Wn.PDFImage.createRawMask({imgArray:hs,width:Hi,height:Li,imageIsFromDecodeStream:ji instanceof ri.DecodeStream,inverseDecode:(Yi==null?void 0:Yi[0])>0,interpolate:is}),Oi.cached=!!Si,Xi=[Oi],Ni.addImageOps(In.OPS.paintImageMaskXObject,Xi,$i),Si){const Zi={fn:In.OPS.paintImageMaskXObject,args:Xi,optionalContent:$i};Ti.set(Si,Ui,Zi),Ui&&this._regionalImageCache.set(null,Ui,Zi)}return}if(Oi=await Wn.PDFImage.createMask({imgArray:hs,width:Hi,height:Li,imageIsFromDecodeStream:ji instanceof ri.DecodeStream,inverseDecode:(Yi==null?void 0:Yi[0])>0,interpolate:is,isOffscreenCanvasSupported:this.options.isOffscreenCanvasSupported}),Oi.isSingleOpaquePixel){if(Ni.addImageOps(In.OPS.paintSolidColorImageMask,[],$i),Si){const Zi={fn:In.OPS.paintSolidColorImageMask,args:[],optionalContent:$i};Ti.set(Si,Ui,Zi),Ui&&this._regionalImageCache.set(null,Ui,Zi)}return}const Vi=`mask_${this.idFactory.createObjId()}`;if(Ni.addDependency(Vi),this._sendImgData(Vi,Oi),Xi=[{data:Vi,width:Oi.width,height:Oi.height,interpolate:Oi.interpolate,count:1}],Ni.addImageOps(In.OPS.paintImageMaskXObject,Xi,$i),Si){const Zi={fn:In.OPS.paintImageMaskXObject,args:Xi,optionalContent:$i};Ti.set(Si,Ui,Zi),Ui&&this._regionalImageCache.set(null,Ui,Zi)}return}if(Pi&&!Mi.has("SMask")&&!Mi.has("Mask")&&Hi+Li<200){Oi=await new Wn.PDFImage({xref:this.xref,res:_i,image:ji,isInline:Pi,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:Ri}).createImageData(!0,!1),Ni.isOffscreenCanvasSupported=this.options.isOffscreenCanvasSupported,Ni.addImageOps(In.OPS.paintInlineImageXObject,[Oi],$i);return}let qi=`img_${this.idFactory.createObjId()}`,ns=!1;if(this.parsingType3Font?qi=`${this.idFactory.getDocId()}_type3_${qi}`:Ui&&(ns=this.globalImageCache.shouldCache(Ui,this.pageIndex),ns&&(qi=`${this.idFactory.getDocId()}_${qi}`)),Ni.addDependency(qi),Xi=[qi,Hi,Li],Wn.PDFImage.buildImage({xref:this.xref,res:_i,image:ji,isInline:Pi,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:Ri}).then(async is=>{if(Oi=await is.createImageData(!1,this.options.isOffscreenCanvasSupported),Si&&Ui&&ns){const as=Oi.bitmap?Oi.width*Oi.height*4:Oi.data.length;this.globalImageCache.addByteSize(Ui,as)}return this._sendImgData(qi,Oi,ns)}).catch(is=>((0,In.warn)(`Unable to decode image "${qi}": "${is}".`),this._sendImgData(qi,null,ns))),Ni.addImageOps(In.OPS.paintImageXObject,Xi,$i),Si){const is={fn:In.OPS.paintImageXObject,args:Xi,optionalContent:$i};Ti.set(Si,Ui,is),Ui&&(this._regionalImageCache.set(null,Ui,is),ns&&((0,In.assert)(!Pi,"Cannot cache an inline image globally."),this.globalImageCache.setData(Ui,{objId:qi,fn:In.OPS.paintImageXObject,args:Xi,optionalContent:$i,byteSize:0})))}}handleSMask(_i,ji,Pi,Ni,Si,Ti){const Ri=_i.get("G"),Mi={subtype:_i.get("S").name,backdrop:_i.get("BC")},Ui=_i.get("TR");if((0,Bn.isPDFFunction)(Ui)){const Hi=this._pdfFunctionFactory.create(Ui),Li=new Uint8Array(256),Ei=new Float32Array(1);for(let $i=0;$i<256;$i++)Ei[0]=$i/255,Hi(Ei,0,Ei,0),Li[$i]=Ei[0]*255|0;Mi.transferMap=Li}return this.buildFormXObject(ji,Ri,Mi,Pi,Ni,Si.state.clone(),Ti)}handleTransferFunction(_i){let ji;if(Array.isArray(_i))ji=_i;else if((0,Bn.isPDFFunction)(_i))ji=[_i];else return null;const Pi=[];let Ni=0,Si=0;for(const Ti of ji){const Ri=this.xref.fetchIfRef(Ti);if(Ni++,(0,jn.isName)(Ri,"Identity")){Pi.push(null);continue}else if(!(0,Bn.isPDFFunction)(Ri))return null;const Mi=this._pdfFunctionFactory.create(Ri),Ui=new Uint8Array(256),Hi=new Float32Array(1);for(let Li=0;Li<256;Li++)Hi[0]=Li/255,Mi(Hi,0,Hi,0),Ui[Li]=Hi[0]*255|0;Pi.push(Ui),Si++}return!(Ni===1||Ni===4)||Si===0?null:Pi}handleTilingType(_i,ji,Pi,Ni,Si,Ti,Ri,Mi){const Ui=new mi.OperatorList,Hi=jn.Dict.merge({xref:this.xref,dictArray:[Si.get("Resources"),Pi]});return this.getOperatorList({stream:Ni,task:Ri,resources:Hi,operatorList:Ui}).then(function(){const Li=Ui.getIR(),Ei=(0,ui.getTilingPatternIR)(Li,Si,ji);Ti.addDependencies(Ui.dependencies),Ti.addOp(_i,Ei),Si.objId&&Mi.set(null,Si.objId,{operatorListIR:Li,dict:Si})}).catch(Li=>{if(!(Li instanceof In.AbortException)){if(this.options.ignoreErrors){(0,In.warn)(`handleTilingType - ignoring pattern: "${Li}".`);return}throw Li}})}handleSetFont(_i,ji,Pi,Ni,Si,Ti,Ri=null,Mi=null){const Ui=(ji==null?void 0:ji[0])instanceof jn.Name?ji[0].name:null;return this.loadFont(Ui,Pi,_i,Ri,Mi).then(Hi=>Hi.font.isType3Font?Hi.loadType3Data(this,_i,Si).then(function(){return Ni.addDependencies(Hi.type3Dependencies),Hi}).catch(Li=>new ai({loadedName:"g_font_error",font:new Cn.ErrorFont(`Type3 font load error: ${Li}`),dict:Hi.font,evaluatorOptions:this.options})):Hi).then(Hi=>(Ti.font=Hi.font,Hi.send(this.handler),Hi.loadedName))}handleText(_i,ji){const Pi=ji.font,Ni=Pi.charsToGlyphs(_i);return Pi.data&&(ji.textRenderingMode&In.TextRenderingMode.ADD_TO_PATH_FLAG||ji.fillColorSpace.name==="Pattern"||Pi.disableFontFace||this.options.disableFontFace)&&Qn.buildFontPaths(Pi,Ni,this.handler,this.options),Ni}ensureStateFont(_i){if(_i.font)return;const ji=new In.FormatError("Missing setFont (Tf) operator before text rendering operator.");if(this.options.ignoreErrors){(0,In.warn)(`ensureStateFont: "${ji}".`);return}throw ji}async setGState({resources:_i,gState:ji,operatorList:Pi,cacheKey:Ni,task:Si,stateManager:Ti,localGStateCache:Ri,localColorSpaceCache:Mi}){const Ui=ji.objId;let Hi=!0;const Li=[];let Ei=Promise.resolve();for(const $i of ji.getKeys()){const Bi=ji.get($i);switch($i){case"Type":break;case"LW":case"LC":case"LJ":case"ML":case"D":case"RI":case"FL":case"CA":case"ca":Li.push([$i,Bi]);break;case"Font":Hi=!1,Ei=Ei.then(()=>this.handleSetFont(_i,null,Bi[0],Pi,Si,Ti.state).then(function(Xi){Pi.addDependency(Xi),Li.push([$i,[Xi,Bi[1]]])}));break;case"BM":Li.push([$i,yi(Bi)]);break;case"SMask":if((0,jn.isName)(Bi,"None")){Li.push([$i,!1]);break}Bi instanceof jn.Dict?(Hi=!1,Ei=Ei.then(()=>this.handleSMask(Bi,_i,Pi,Si,Ti,Mi)),Li.push([$i,!0])):(0,In.warn)("Unsupported SMask type");break;case"TR":const Oi=this.handleTransferFunction(Bi);Li.push([$i,Oi]);break;case"OP":case"op":case"OPM":case"BG":case"BG2":case"UCR":case"UCR2":case"TR2":case"HT":case"SM":case"SA":case"AIS":case"TK":(0,In.info)("graphic state operator "+$i);break;default:(0,In.info)("Unknown graphic state operator "+$i);break}}return Ei.then(function(){Li.length>0&&Pi.addOp(In.OPS.setGState,[Li]),Hi&&Ri.set(Ni,Ui,Li)})}loadFont(_i,ji,Pi,Ni=null,Si=null){const Ti=async()=>new ai({loadedName:"g_font_error",font:new Cn.ErrorFont(`Font "${_i}" is not available.`),dict:ji,evaluatorOptions:this.options});let Ri;if(ji)ji instanceof jn.Ref&&(Ri=ji);else{const Bi=Pi.get("Font");Bi&&(Ri=Bi.getRaw(_i))}if(Ri){if(this.parsingType3Font&&this.type3FontRefs.has(Ri))return Ti();if(this.fontCache.has(Ri))return this.fontCache.get(Ri);ji=this.xref.fetchIfRef(Ri)}if(!(ji instanceof jn.Dict)){if(!this.options.ignoreErrors&&!this.parsingType3Font)return(0,In.warn)(`Font "${_i}" is not available.`),Ti();(0,In.warn)(`Font "${_i}" is not available -- attempting to fallback to a default font.`),ji=Ni||Qn.fallbackFontDict}if(ji.cacheKey&&this.fontCache.has(ji.cacheKey))return this.fontCache.get(ji.cacheKey);const Mi=new In.PromiseCapability;let Ui;try{Ui=this.preEvaluateFont(ji),Ui.cssFontInfo=Si}catch(Bi){return(0,In.warn)(`loadFont - preEvaluateFont failed: "${Bi}".`),Ti()}const{descriptor:Hi,hash:Li}=Ui,Ei=Ri instanceof jn.Ref;let $i;if(Li&&Hi instanceof jn.Dict){const Bi=Hi.fontAliases||(Hi.fontAliases=Object.create(null));if(Bi[Li]){const Oi=Bi[Li].aliasRef;if(Ei&&Oi&&this.fontCache.has(Oi))return this.fontCache.putAlias(Ri,Oi),this.fontCache.get(Ri)}else Bi[Li]={fontID:this.idFactory.createFontId()};Ei&&(Bi[Li].aliasRef=Ri),$i=Bi[Li].fontID}else $i=this.idFactory.createFontId();return(0,In.assert)($i==null?void 0:$i.startsWith("f"),'The "fontID" must be (correctly) defined.'),Ei?this.fontCache.put(Ri,Mi.promise):(ji.cacheKey=`cacheKey_${$i}`,this.fontCache.put(ji.cacheKey,Mi.promise)),ji.loadedName=`${this.idFactory.getDocId()}_${$i}`,this.translateFont(Ui).then(Bi=>{Mi.resolve(new ai({loadedName:ji.loadedName,font:Bi,dict:ji,evaluatorOptions:this.options}))}).catch(Bi=>{(0,In.warn)(`loadFont - translateFont failed: "${Bi}".`),Mi.resolve(new ai({loadedName:ji.loadedName,font:new Cn.ErrorFont(Bi instanceof Error?Bi.message:Bi),dict:ji,evaluatorOptions:this.options}))}),Mi.promise}buildPath(_i,ji,Pi,Ni=!1){const Si=_i.length-1;if(Pi||(Pi=[]),Si<0||_i.fnArray[Si]!==In.OPS.constructPath){Ni&&((0,In.warn)(`Encountered path operator "${ji}" inside of a text object.`),_i.addOp(In.OPS.save,null));let Ti;switch(ji){case In.OPS.rectangle:const Ri=Pi[0]+Pi[2],Mi=Pi[1]+Pi[3];Ti=[Math.min(Pi[0],Ri),Math.max(Pi[0],Ri),Math.min(Pi[1],Mi),Math.max(Pi[1],Mi)];break;case In.OPS.moveTo:case In.OPS.lineTo:Ti=[Pi[0],Pi[0],Pi[1],Pi[1]];break;default:Ti=[1/0,-1/0,1/0,-1/0];break}_i.addOp(In.OPS.constructPath,[[ji],Pi,Ti]),Ni&&_i.addOp(In.OPS.restore,null)}else{const Ti=_i.argsArray[Si];Ti[0].push(ji),Ti[1].push(...Pi);const Ri=Ti[2];switch(ji){case In.OPS.rectangle:const Mi=Pi[0]+Pi[2],Ui=Pi[1]+Pi[3];Ri[0]=Math.min(Ri[0],Pi[0],Mi),Ri[1]=Math.max(Ri[1],Pi[0],Mi),Ri[2]=Math.min(Ri[2],Pi[1],Ui),Ri[3]=Math.max(Ri[3],Pi[1],Ui);break;case In.OPS.moveTo:case In.OPS.lineTo:Ri[0]=Math.min(Ri[0],Pi[0]),Ri[1]=Math.max(Ri[1],Pi[0]),Ri[2]=Math.min(Ri[2],Pi[1]),Ri[3]=Math.max(Ri[3],Pi[1]);break}}}parseColorSpace({cs:_i,resources:ji,localColorSpaceCache:Pi}){return ii.ColorSpace.parseAsync({cs:_i,xref:this.xref,resources:ji,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:Pi}).catch(Ni=>{if(Ni instanceof In.AbortException)return null;if(this.options.ignoreErrors)return(0,In.warn)(`parseColorSpace - ignoring ColorSpace: "${Ni}".`),null;throw Ni})}parseShading({shading:_i,resources:ji,localColorSpaceCache:Pi,localShadingPatternCache:Ni}){let Si=Ni.get(_i);if(!Si){var Ti=ui.Pattern.parseShading(_i,this.xref,ji,this._pdfFunctionFactory,Pi);const Ri=Ti.getIR();Si=`pattern_${this.idFactory.createObjId()}`,this.parsingType3Font&&(Si=`${this.idFactory.getDocId()}_type3_${Si}`),Ni.set(_i,Si),this.parsingType3Font?this.handler.send("commonobj",[Si,"Pattern",Ri]):this.handler.send("obj",[Si,this.pageIndex,"Pattern",Ri])}return Si}handleColorN(_i,ji,Pi,Ni,Si,Ti,Ri,Mi,Ui,Hi){const Li=Pi.pop();if(Li instanceof jn.Name){const Ei=Si.getRaw(Li.name),$i=Ei instanceof jn.Ref&&Ui.getByRef(Ei);if($i)try{const Oi=Ni.base?Ni.base.getRgb(Pi,0):null,Xi=(0,ui.getTilingPatternIR)($i.operatorListIR,$i.dict,Oi);_i.addOp(ji,Xi);return}catch{}const Bi=this.xref.fetchIfRef(Ei);if(Bi){const Oi=Bi instanceof hi.BaseStream?Bi.dict:Bi,Xi=Oi.get("PatternType");if(Xi===li.TILING){const Gi=Ni.base?Ni.base.getRgb(Pi,0):null;return this.handleTilingType(ji,Gi,Ti,Bi,Oi,_i,Ri,Ui)}else if(Xi===li.SHADING){const Gi=Oi.get("Shading"),qi=Oi.getArray("Matrix"),ns=this.parseShading({shading:Gi,resources:Ti,localColorSpaceCache:Mi,localShadingPatternCache:Hi});_i.addOp(ji,["Shading",ns,qi]);return}throw new In.FormatError(`Unknown PatternType: ${Xi}`)}}throw new In.FormatError(`Unknown PatternName: ${Li}`)}_parseVisibilityExpression(_i,ji,Pi){if(++ji>10){(0,In.warn)("Visibility expression is too deeply nested");return}const Si=_i.length,Ti=this.xref.fetchIfRef(_i[0]);if(Si<2||!(Ti instanceof jn.Name)){(0,In.warn)("Invalid visibility expression");return}switch(Ti.name){case"And":case"Or":case"Not":Pi.push(Ti.name);break;default:(0,In.warn)(`Invalid operator ${Ti.name} in visibility expression`);return}for(let Ri=1;Ri<Si;Ri++){const Mi=_i[Ri],Ui=this.xref.fetchIfRef(Mi);if(Array.isArray(Ui)){const Hi=[];Pi.push(Hi),this._parseVisibilityExpression(Ui,ji,Hi)}else Mi instanceof jn.Ref&&Pi.push(Mi.toString())}}async parseMarkedContentProps(_i,ji){var Si;let Pi;if(_i instanceof jn.Name)Pi=ji.get("Properties").get(_i.name);else if(_i instanceof jn.Dict)Pi=_i;else throw new In.FormatError("Optional content properties malformed.");const Ni=(Si=Pi.get("Type"))==null?void 0:Si.name;if(Ni==="OCG")return{type:Ni,id:Pi.objId};if(Ni==="OCMD"){const Ti=Pi.get("VE");if(Array.isArray(Ti)){const Mi=[];if(this._parseVisibilityExpression(Ti,0,Mi),Mi.length>0)return{type:"OCMD",expression:Mi}}const Ri=Pi.get("OCGs");if(Array.isArray(Ri)||Ri instanceof jn.Dict){const Mi=[];if(Array.isArray(Ri))for(const Ui of Ri)Mi.push(Ui.toString());else Mi.push(Ri.objId);return{type:Ni,ids:Mi,policy:Pi.get("P")instanceof jn.Name?Pi.get("P").name:null,expression:null}}else if(Ri instanceof jn.Ref)return{type:Ni,id:Ri.toString()}}return null}getOperatorList({stream:_i,task:ji,resources:Pi,operatorList:Ni,initialState:Si=null,fallbackFontDict:Ti=null}){if(Pi||(Pi=jn.Dict.empty),Si||(Si=new ci),!Ni)throw new Error('getOperatorList: missing "operatorList" parameter');const Ri=this,Mi=this.xref;let Ui=!1;const Hi=new Hn.LocalImageCache,Li=new Hn.LocalColorSpaceCache,Ei=new Hn.LocalGStateCache,$i=new Hn.LocalTilingPatternCache,Bi=new Map,Oi=Pi.get("XObject")||jn.Dict.empty,Xi=Pi.get("Pattern")||jn.Dict.empty,Gi=new Vn(Si),qi=new bi(_i,Mi,Gi),ns=new xi;function is(as){for(let hs=0,Yi=qi.savedStatesDepth;hs<Yi;hs++)Ni.addOp(In.OPS.restore,[])}return new Promise(function as(hs,Yi){const Vi=function(Ts){Promise.all([Ts,Ni.ready]).then(function(){try{as(hs,Yi)}catch(Is){Yi(Is)}},Yi)};ji.ensureNotTerminated(),ns.reset();const Zi={};let us,ts,es,rs,ss,os;for(;!(us=ns.check())&&(Zi.args=null,!!qi.read(Zi));){let Ts=Zi.args,Is=Zi.fn;switch(Is|0){case In.OPS.paintXObject:if(os=Ts[0]instanceof jn.Name,ss=Ts[0].name,os){const Wi=Hi.getByName(ss);if(Wi){Ni.addImageOps(Wi.fn,Wi.args,Wi.optionalContent),Ii(Wi),Ts=null;continue}}Vi(new Promise(function(Wi,Ji){if(!os)throw new In.FormatError("XObject must be referred to by name.");let cs=Oi.getRaw(ss);if(cs instanceof jn.Ref){const ps=Hi.getByRef(cs)||Ri._regionalImageCache.getByRef(cs);if(ps){Ni.addImageOps(ps.fn,ps.args,ps.optionalContent),Ii(ps),Wi();return}const gs=Ri.globalImageCache.getData(cs,Ri.pageIndex);if(gs){Ni.addDependency(gs.objId),Ni.addImageOps(gs.fn,gs.args,gs.optionalContent),Wi();return}cs=Mi.fetch(cs)}if(!(cs instanceof hi.BaseStream))throw new In.FormatError("XObject should be a stream");const fs=cs.dict.get("Subtype");if(!(fs instanceof jn.Name))throw new In.FormatError("XObject should have a Name subtype");if(fs.name==="Form"){Gi.save(),Ri.buildFormXObject(Pi,cs,null,Ni,ji,Gi.state.clone(),Li).then(function(){Gi.restore(),Wi()},Ji);return}else if(fs.name==="Image"){Ri.buildPaintImageXObject({resources:Pi,image:cs,operatorList:Ni,cacheKey:ss,localImageCache:Hi,localColorSpaceCache:Li}).then(Wi,Ji);return}else if(fs.name==="PS")(0,In.info)("Ignored XObject subtype PS");else throw new In.FormatError(`Unhandled XObject subtype ${fs.name}`);Wi()}).catch(function(Wi){if(!(Wi instanceof In.AbortException)){if(Ri.options.ignoreErrors){(0,In.warn)(`getOperatorList - ignoring XObject: "${Wi}".`);return}throw Wi}}));return;case In.OPS.setFont:var ks=Ts[1];Vi(Ri.handleSetFont(Pi,Ts,null,Ni,ji,Gi.state,Ti).then(function(Wi){Ni.addDependency(Wi),Ni.addOp(In.OPS.setFont,[Wi,ks])}));return;case In.OPS.beginText:Ui=!0;break;case In.OPS.endText:Ui=!1;break;case In.OPS.endInlineImage:var xs=Ts[0].cacheKey;if(xs){const Wi=Hi.getByName(xs);if(Wi){Ni.addImageOps(Wi.fn,Wi.args,Wi.optionalContent),Ii(Wi),Ts=null;continue}}Vi(Ri.buildPaintImageXObject({resources:Pi,image:Ts[0],isInline:!0,operatorList:Ni,cacheKey:xs,localImageCache:Hi,localColorSpaceCache:Li}));return;case In.OPS.showText:if(!Gi.state.font){Ri.ensureStateFont(Gi.state);continue}Ts[0]=Ri.handleText(Ts[0],Gi.state);break;case In.OPS.showSpacedText:if(!Gi.state.font){Ri.ensureStateFont(Gi.state);continue}var Rs=[],ms=Gi.state;for(const Wi of Ts[0])typeof Wi=="string"?Rs.push(...Ri.handleText(Wi,ms)):typeof Wi=="number"&&Rs.push(Wi);Ts[0]=Rs,Is=In.OPS.showText;break;case In.OPS.nextLineShowText:if(!Gi.state.font){Ri.ensureStateFont(Gi.state);continue}Ni.addOp(In.OPS.nextLine),Ts[0]=Ri.handleText(Ts[0],Gi.state),Is=In.OPS.showText;break;case In.OPS.nextLineSetSpacingShowText:if(!Gi.state.font){Ri.ensureStateFont(Gi.state);continue}Ni.addOp(In.OPS.nextLine),Ni.addOp(In.OPS.setWordSpacing,[Ts.shift()]),Ni.addOp(In.OPS.setCharSpacing,[Ts.shift()]),Ts[0]=Ri.handleText(Ts[0],Gi.state),Is=In.OPS.showText;break;case In.OPS.setTextRenderingMode:Gi.state.textRenderingMode=Ts[0];break;case In.OPS.setFillColorSpace:{const Wi=ii.ColorSpace.getCached(Ts[0],Mi,Li);if(Wi){Gi.state.fillColorSpace=Wi;continue}Vi(Ri.parseColorSpace({cs:Ts[0],resources:Pi,localColorSpaceCache:Li}).then(function(Ji){Ji&&(Gi.state.fillColorSpace=Ji)}));return}case In.OPS.setStrokeColorSpace:{const Wi=ii.ColorSpace.getCached(Ts[0],Mi,Li);if(Wi){Gi.state.strokeColorSpace=Wi;continue}Vi(Ri.parseColorSpace({cs:Ts[0],resources:Pi,localColorSpaceCache:Li}).then(function(Ji){Ji&&(Gi.state.strokeColorSpace=Ji)}));return}case In.OPS.setFillColor:rs=Gi.state.fillColorSpace,Ts=rs.getRgb(Ts,0),Is=In.OPS.setFillRGBColor;break;case In.OPS.setStrokeColor:rs=Gi.state.strokeColorSpace,Ts=rs.getRgb(Ts,0),Is=In.OPS.setStrokeRGBColor;break;case In.OPS.setFillGray:Gi.state.fillColorSpace=ii.ColorSpace.singletons.gray,Ts=ii.ColorSpace.singletons.gray.getRgb(Ts,0),Is=In.OPS.setFillRGBColor;break;case In.OPS.setStrokeGray:Gi.state.strokeColorSpace=ii.ColorSpace.singletons.gray,Ts=ii.ColorSpace.singletons.gray.getRgb(Ts,0),Is=In.OPS.setStrokeRGBColor;break;case In.OPS.setFillCMYKColor:Gi.state.fillColorSpace=ii.ColorSpace.singletons.cmyk,Ts=ii.ColorSpace.singletons.cmyk.getRgb(Ts,0),Is=In.OPS.setFillRGBColor;break;case In.OPS.setStrokeCMYKColor:Gi.state.strokeColorSpace=ii.ColorSpace.singletons.cmyk,Ts=ii.ColorSpace.singletons.cmyk.getRgb(Ts,0),Is=In.OPS.setStrokeRGBColor;break;case In.OPS.setFillRGBColor:Gi.state.fillColorSpace=ii.ColorSpace.singletons.rgb,Ts=ii.ColorSpace.singletons.rgb.getRgb(Ts,0);break;case In.OPS.setStrokeRGBColor:Gi.state.strokeColorSpace=ii.ColorSpace.singletons.rgb,Ts=ii.ColorSpace.singletons.rgb.getRgb(Ts,0);break;case In.OPS.setFillColorN:if(rs=Gi.state.fillColorSpace,rs.name==="Pattern"){Vi(Ri.handleColorN(Ni,In.OPS.setFillColorN,Ts,rs,Xi,Pi,ji,Li,$i,Bi));return}Ts=rs.getRgb(Ts,0),Is=In.OPS.setFillRGBColor;break;case In.OPS.setStrokeColorN:if(rs=Gi.state.strokeColorSpace,rs.name==="Pattern"){Vi(Ri.handleColorN(Ni,In.OPS.setStrokeColorN,Ts,rs,Xi,Pi,ji,Li,$i,Bi));return}Ts=rs.getRgb(Ts,0),Is=In.OPS.setStrokeRGBColor;break;case In.OPS.shadingFill:var Bs=Pi.get("Shading");if(!Bs)throw new In.FormatError("No shading resource found");var ws=Bs.get(Ts[0].name);if(!ws)throw new In.FormatError("No shading object found");Ts=[Ri.parseShading({shading:ws,resources:Pi,localColorSpaceCache:Li,localShadingPatternCache:Bi})],Is=In.OPS.shadingFill;break;case In.OPS.setGState:if(os=Ts[0]instanceof jn.Name,ss=Ts[0].name,os){const Wi=Ei.getByName(ss);if(Wi){Wi.length>0&&Ni.addOp(In.OPS.setGState,[Wi]),Ts=null;continue}}Vi(new Promise(function(Wi,Ji){if(!os)throw new In.FormatError("GState must be referred to by name.");const cs=Pi.get("ExtGState");if(!(cs instanceof jn.Dict))throw new In.FormatError("ExtGState should be a dictionary.");const fs=cs.get(ss);if(!(fs instanceof jn.Dict))throw new In.FormatError("GState should be a dictionary.");Ri.setGState({resources:Pi,gState:fs,operatorList:Ni,cacheKey:ss,task:ji,stateManager:Gi,localGStateCache:Ei,localColorSpaceCache:Li}).then(Wi,Ji)}).catch(function(Wi){if(!(Wi instanceof In.AbortException)){if(Ri.options.ignoreErrors){(0,In.warn)(`getOperatorList - ignoring ExtGState: "${Wi}".`);return}throw Wi}}));return;case In.OPS.moveTo:case In.OPS.lineTo:case In.OPS.curveTo:case In.OPS.curveTo2:case In.OPS.curveTo3:case In.OPS.closePath:case In.OPS.rectangle:Ri.buildPath(Ni,Is,Ts,Ui);continue;case In.OPS.markPoint:case In.OPS.markPointProps:case In.OPS.beginCompat:case In.OPS.endCompat:continue;case In.OPS.beginMarkedContentProps:if(!(Ts[0]instanceof jn.Name)){(0,In.warn)(`Expected name for beginMarkedContentProps arg0=${Ts[0]}`);continue}if(Ts[0].name==="OC"){Vi(Ri.parseMarkedContentProps(Ts[1],Pi).then(Wi=>{Ni.addOp(In.OPS.beginMarkedContentProps,["OC",Wi])}).catch(Wi=>{if(!(Wi instanceof In.AbortException)){if(Ri.options.ignoreErrors){(0,In.warn)(`getOperatorList - ignoring beginMarkedContentProps: "${Wi}".`);return}throw Wi}}));return}Ts=[Ts[0].name,Ts[1]instanceof jn.Dict?Ts[1].get("MCID"):null];break;case In.OPS.beginMarkedContent:case In.OPS.endMarkedContent:default:if(Ts!==null){for(ts=0,es=Ts.length;ts<es&&!(Ts[ts]instanceof jn.Dict);ts++);if(ts<es){(0,In.warn)("getOperatorList - ignoring operator: "+Is);continue}}}Ni.addOp(Is,Ts)}if(us){Vi(gi);return}is(),hs()}).catch(as=>{if(!(as instanceof In.AbortException)){if(this.options.ignoreErrors){(0,In.warn)(`getOperatorList - ignoring errors during "${ji.name}" task: "${as}".`),is();return}throw as}})}getTextContent({stream:_i,task:ji,resources:Pi,stateManager:Ni=null,includeMarkedContent:Si=!1,sink:Ti,seenStyles:Ri=new Set,viewBox:Mi,markedContentData:Ui=null,disableNormalization:Hi=!1}){Pi||(Pi=jn.Dict.empty),Ni||(Ni=new Vn(new Yn)),Si&&(Ui||(Ui={level:0}));const Li={items:[],styles:Object.create(null)},Ei={initialized:!1,str:[],totalWidth:0,totalHeight:0,width:0,height:0,vertical:!1,prevTransform:null,textAdvanceScale:0,spaceInFlowMin:0,spaceInFlowMax:0,trackingSpaceMin:1/0,negativeSpaceMax:-1/0,notASpace:-1/0,transform:null,fontName:null,hasEOL:!1},$i=[" "," "];let Bi=0;function Oi(gs){const bs=(Bi+1)%2,vs=$i[Bi]!==" "&&$i[bs]===" ";return $i[Bi]=gs,Bi=bs,vs}function Xi(){return $i[Bi]!==" "&&$i[(Bi+1)%2]===" "}function Gi(){$i[0]=$i[1]=" ",Bi=0}const qi=.102,ns=.03,is=-.2,as=.102,hs=.6,Yi=.25,Vi=this,Zi=this.xref,us=[];let ts=null;const es=new Hn.LocalImageCache,rs=new Hn.LocalGStateCache,ss=new bi(_i,Zi,Ni);let os;function ks({width:gs=0,height:bs=0,transform:vs=Ei.prevTransform,fontName:_s=Ei.fontName}){Li.items.push({str:" ",dir:"ltr",width:gs,height:bs,transform:vs,fontName:_s,hasEOL:!1})}function xs(){const gs=os.font,bs=[os.fontSize*os.textHScale,0,0,os.fontSize,0,os.textRise];if(gs.isType3Font&&(os.fontSize<=1||gs.isCharBBox)&&!(0,In.isArrayEqual)(os.fontMatrix,In.FONT_IDENTITY_MATRIX)){const vs=gs.bbox[3]-gs.bbox[1];vs>0&&(bs[3]*=vs*os.fontMatrix[3])}return In.Util.transform(os.ctm,In.Util.transform(os.textMatrix,bs))}function Rs(){if(Ei.initialized)return Ei;const{font:gs,loadedName:bs}=os;Ri.has(bs)||(Ri.add(bs),Li.styles[bs]={fontFamily:gs.fallbackName,ascent:gs.ascent,descent:gs.descent,vertical:gs.vertical}),Ei.fontName=bs;const vs=Ei.transform=xs();gs.vertical?(Ei.width=Ei.totalWidth=Math.hypot(vs[0],vs[1]),Ei.height=Ei.totalHeight=0,Ei.vertical=!0):(Ei.width=Ei.totalWidth=0,Ei.height=Ei.totalHeight=Math.hypot(vs[2],vs[3]),Ei.vertical=!1);const _s=Math.hypot(os.textLineMatrix[0],os.textLineMatrix[1]),Us=Math.hypot(os.ctm[0],os.ctm[1]);Ei.textAdvanceScale=Us*_s;const{fontSize:Ds}=os;return Ei.trackingSpaceMin=Ds*qi,Ei.notASpace=Ds*ns,Ei.negativeSpaceMax=Ds*is,Ei.spaceInFlowMin=Ds*as,Ei.spaceInFlowMax=Ds*hs,Ei.hasEOL=!1,Ei.initialized=!0,Ei}function ms(){if(!Ei.initialized)return;const gs=Math.hypot(os.textLineMatrix[0],os.textLineMatrix[1]),vs=Math.hypot(os.ctm[0],os.ctm[1])*gs;vs!==Ei.textAdvanceScale&&(Ei.vertical?(Ei.totalHeight+=Ei.height*Ei.textAdvanceScale,Ei.height=0):(Ei.totalWidth+=Ei.width*Ei.textAdvanceScale,Ei.width=0),Ei.textAdvanceScale=vs)}function Bs(gs){let bs=gs.str.join("");Hi||(bs=(0,In.normalizeUnicode)(bs));const vs=(0,Xn.bidi)(bs,-1,gs.vertical);return{str:vs.str,dir:vs.dir,width:Math.abs(gs.totalWidth),height:Math.abs(gs.totalHeight),transform:gs.transform,fontName:gs.fontName,hasEOL:gs.hasEOL}}function ws(gs,bs){return Vi.loadFont(gs,bs,Pi).then(function(vs){return vs.font.isType3Font?vs.loadType3Data(Vi,Pi,ji).catch(function(){}).then(function(){return vs}):vs}).then(function(vs){os.loadedName=vs.loadedName,os.font=vs.font,os.fontMatrix=vs.font.fontMatrix||In.FONT_IDENTITY_MATRIX})}function Ts(gs,bs,vs){const _s=Math.hypot(vs[0],vs[1]);return[(vs[0]*gs+vs[1]*bs)/_s,(vs[2]*gs+vs[3]*bs)/_s]}function Is(gs){var As;const bs=xs();let vs=bs[4],_s=bs[5];if((As=os.font)!=null&&As.vertical){if(vs<Mi[0]||vs>Mi[2]||_s+gs<Mi[1]||_s>Mi[3])return!1}else if(vs+gs<Mi[0]||vs>Mi[2]||_s<Mi[1]||_s>Mi[3])return!1;if(!os.font||!Ei.prevTransform)return!0;let Us=Ei.prevTransform[4],Ds=Ei.prevTransform[5];if(Us===vs&&Ds===_s)return!0;let Ms=-1;switch(bs[0]&&bs[1]===0&&bs[2]===0?Ms=bs[0]>0?0:180:bs[1]&&bs[0]===0&&bs[3]===0&&(Ms=bs[1]>0?90:270),Ms){case 0:break;case 90:[vs,_s]=[_s,vs],[Us,Ds]=[Ds,Us];break;case 180:[vs,_s,Us,Ds]=[-vs,-_s,-Us,-Ds];break;case 270:[vs,_s]=[-_s,-vs],[Us,Ds]=[-Ds,-Us];break;default:[vs,_s]=Ts(vs,_s,bs),[Us,Ds]=Ts(Us,Ds,Ei.prevTransform)}if(os.font.vertical){const Es=(Ds-_s)/Ei.textAdvanceScale,Os=vs-Us,$s=Math.sign(Ei.height);return Es<$s*Ei.negativeSpaceMax?Math.abs(Os)>.5*Ei.width?(Wi(),!0):(Gi(),cs(),!0):Math.abs(Os)>Ei.width?(Wi(),!0):(Es<=$s*Ei.notASpace&&Gi(),Es<=$s*Ei.trackingSpaceMin?Xi()?(Gi(),cs(),ks({height:Math.abs(Es)})):Ei.height+=Es:Ji(Es,Ei.prevTransform,$s)||(Ei.str.length===0?(Gi(),ks({height:Math.abs(Es)})):Ei.height+=Es),Math.abs(Os)>Ei.width*Yi&&cs(),!0)}const js=(vs-Us)/Ei.textAdvanceScale,Vs=_s-Ds,Ss=Math.sign(Ei.width);return js<Ss*Ei.negativeSpaceMax?Math.abs(Vs)>.5*Ei.height?(Wi(),!0):(Gi(),cs(),!0):Math.abs(Vs)>Ei.height?(Wi(),!0):(js<=Ss*Ei.notASpace&&Gi(),js<=Ss*Ei.trackingSpaceMin?Xi()?(Gi(),cs(),ks({width:Math.abs(js)})):Ei.width+=js:Ji(js,Ei.prevTransform,Ss)||(Ei.str.length===0?(Gi(),ks({width:Math.abs(js)})):Ei.width+=js),Math.abs(Vs)>Ei.height*Yi&&cs(),!0)}function ls({chars:gs,extraSpacing:bs}){const vs=os.font;if(!gs){const Ds=os.charSpacing+bs;Ds&&(vs.vertical?os.translateTextMatrix(0,-Ds):os.translateTextMatrix(Ds*os.textHScale,0));return}const _s=vs.charsToGlyphs(gs),Us=os.fontMatrix[0]*os.fontSize;for(let Ds=0,Ms=_s.length;Ds<Ms;Ds++){const js=_s[Ds],{category:Vs}=js;if(Vs.isInvisibleFormatMark)continue;let Ss=os.charSpacing+(Ds+1===Ms?bs:0),As=js.width;vs.vertical&&(As=js.vmetric?js.vmetric[0]:-As);let Es=As*Us;if(Vs.isWhitespace){vs.vertical?(Ss+=-Es+os.wordSpacing,os.translateTextMatrix(0,-Ss)):(Ss+=Es+os.wordSpacing,os.translateTextMatrix(Ss*os.textHScale,0)),Oi(" ");continue}if(!Vs.isZeroWidthDiacritic&&!Is(Es)){vs.vertical?os.translateTextMatrix(0,Es):os.translateTextMatrix(Es*os.textHScale,0);continue}const Os=Rs();Vs.isZeroWidthDiacritic&&(Es=0),vs.vertical?(os.translateTextMatrix(0,Es),Es=Math.abs(Es),Os.height+=Es):(Es*=os.textHScale,os.translateTextMatrix(Es,0),Os.width+=Es),Es&&(Os.prevTransform=xs());const $s=js.unicode;Oi($s)&&Os.str.push(" "),Os.str.push($s),Ss&&(vs.vertical?os.translateTextMatrix(0,-Ss):os.translateTextMatrix(Ss*os.textHScale,0))}}function Wi(){Gi(),Ei.initialized?(Ei.hasEOL=!0,cs()):Li.items.push({str:"",dir:"ltr",width:0,height:0,transform:xs(),fontName:os.loadedName,hasEOL:!0})}function Ji(gs,bs,vs){if(vs*Ei.spaceInFlowMin<=gs&&gs<=vs*Ei.spaceInFlowMax)return Ei.initialized&&(Gi(),Ei.str.push(" ")),!1;const _s=Ei.fontName;let Us=0;return Ei.vertical&&(Us=gs,gs=0),cs(),Gi(),ks({width:Math.abs(gs),height:Math.abs(Us),transform:bs||xs(),fontName:_s}),!0}function cs(){!Ei.initialized||!Ei.str||(Ei.vertical?Ei.totalHeight+=Ei.height*Ei.textAdvanceScale:Ei.totalWidth+=Ei.width*Ei.textAdvanceScale,Li.items.push(Bs(Ei)),Ei.initialized=!1,Ei.str.length=0)}function fs(gs=!1){const bs=Li.items.length;bs!==0&&(gs&&bs<Ai||(Ti.enqueue(Li,bs),Li.items=[],Li.styles=Object.create(null)))}const ps=new xi;return new Promise(function gs(bs,vs){const _s=function(Es){fs(!0),Promise.all([Es,Ti.ready]).then(function(){try{gs(bs,vs)}catch(Os){vs(Os)}},vs)};ji.ensureNotTerminated(),ps.reset();const Us={};let Ds,Ms=[];for(;!(Ds=ps.check())&&(Ms.length=0,Us.args=Ms,!!ss.read(Us));){const Es=os;os=Ni.state;const Os=Us.fn;switch(Ms=Us.args,Os|0){case In.OPS.setFont:var js=Ms[0].name,Vs=Ms[1];if(os.font&&js===os.fontName&&Vs===os.fontSize)break;cs(),os.fontName=js,os.fontSize=Vs,_s(ws(js,null));return;case In.OPS.setTextRise:os.textRise=Ms[0];break;case In.OPS.setHScale:os.textHScale=Ms[0]/100;break;case In.OPS.setLeading:os.leading=Ms[0];break;case In.OPS.moveText:os.translateTextLineMatrix(Ms[0],Ms[1]),os.textMatrix=os.textLineMatrix.slice();break;case In.OPS.setLeadingMoveText:os.leading=-Ms[1],os.translateTextLineMatrix(Ms[0],Ms[1]),os.textMatrix=os.textLineMatrix.slice();break;case In.OPS.nextLine:os.carriageReturn();break;case In.OPS.setTextMatrix:os.setTextMatrix(Ms[0],Ms[1],Ms[2],Ms[3],Ms[4],Ms[5]),os.setTextLineMatrix(Ms[0],Ms[1],Ms[2],Ms[3],Ms[4],Ms[5]),ms();break;case In.OPS.setCharSpacing:os.charSpacing=Ms[0];break;case In.OPS.setWordSpacing:os.wordSpacing=Ms[0];break;case In.OPS.beginText:os.textMatrix=In.IDENTITY_MATRIX.slice(),os.textLineMatrix=In.IDENTITY_MATRIX.slice();break;case In.OPS.showSpacedText:if(!Ni.state.font){Vi.ensureStateFont(Ni.state);continue}const $s=(os.font.vertical?1:-1)*os.fontSize/1e3,Ws=Ms[0];for(let Ns=0,Ls=Ws.length;Ns<Ls;Ns++){const zs=Ws[Ns];if(typeof zs=="string")us.push(zs);else if(typeof zs=="number"&&zs!==0){const Qs=us.join("");us.length=0,ls({chars:Qs,extraSpacing:zs*$s})}}if(us.length>0){const Ns=us.join("");us.length=0,ls({chars:Ns,extraSpacing:0})}break;case In.OPS.showText:if(!Ni.state.font){Vi.ensureStateFont(Ni.state);continue}ls({chars:Ms[0],extraSpacing:0});break;case In.OPS.nextLineShowText:if(!Ni.state.font){Vi.ensureStateFont(Ni.state);continue}os.carriageReturn(),ls({chars:Ms[0],extraSpacing:0});break;case In.OPS.nextLineSetSpacingShowText:if(!Ni.state.font){Vi.ensureStateFont(Ni.state);continue}os.wordSpacing=Ms[0],os.charSpacing=Ms[1],os.carriageReturn(),ls({chars:Ms[2],extraSpacing:0});break;case In.OPS.paintXObject:cs(),ts||(ts=Pi.get("XObject")||jn.Dict.empty);var Ss=Ms[0]instanceof jn.Name,As=Ms[0].name;if(Ss&&es.getByName(As))break;_s(new Promise(function(Ns,Ls){if(!Ss)throw new In.FormatError("XObject must be referred to by name.");let zs=ts.getRaw(As);if(zs instanceof jn.Ref){if(es.getByRef(zs)){Ns();return}if(Vi.globalImageCache.getData(zs,Vi.pageIndex)){Ns();return}zs=Zi.fetch(zs)}if(!(zs instanceof hi.BaseStream))throw new In.FormatError("XObject should be a stream");const Qs=zs.dict.get("Subtype");if(!(Qs instanceof jn.Name))throw new In.FormatError("XObject should have a Name subtype");if(Qs.name!=="Form"){es.set(As,zs.dict.objId,!0),Ns();return}const ca=Ni.state.clone(),Js=new Vn(ca),Zs=zs.dict.getArray("Matrix");Array.isArray(Zs)&&Zs.length===6&&Js.transform(Zs),fs();const aa={enqueueInvoked:!1,enqueue(Gs,ea){this.enqueueInvoked=!0,Ti.enqueue(Gs,ea)},get desiredSize(){return Ti.desiredSize},get ready(){return Ti.ready}};Vi.getTextContent({stream:zs,task:ji,resources:zs.dict.get("Resources")||Pi,stateManager:Js,includeMarkedContent:Si,sink:aa,seenStyles:Ri,viewBox:Mi,markedContentData:Ui,disableNormalization:Hi}).then(function(){aa.enqueueInvoked||es.set(As,zs.dict.objId,!0),Ns()},Ls)}).catch(function(Ns){if(!(Ns instanceof In.AbortException)){if(Vi.options.ignoreErrors){(0,In.warn)(`getTextContent - ignoring XObject: "${Ns}".`);return}throw Ns}}));return;case In.OPS.setGState:if(Ss=Ms[0]instanceof jn.Name,As=Ms[0].name,Ss&&rs.getByName(As))break;_s(new Promise(function(Ns,Ls){if(!Ss)throw new In.FormatError("GState must be referred to by name.");const zs=Pi.get("ExtGState");if(!(zs instanceof jn.Dict))throw new In.FormatError("ExtGState should be a dictionary.");const Qs=zs.get(As);if(!(Qs instanceof jn.Dict))throw new In.FormatError("GState should be a dictionary.");const ca=Qs.get("Font");if(!ca){rs.set(As,Qs.objId,!0),Ns();return}cs(),os.fontName=null,os.fontSize=ca[1],ws(null,ca[0]).then(Ns,Ls)}).catch(function(Ns){if(!(Ns instanceof In.AbortException)){if(Vi.options.ignoreErrors){(0,In.warn)(`getTextContent - ignoring ExtGState: "${Ns}".`);return}throw Ns}}));return;case In.OPS.beginMarkedContent:cs(),Si&&(Ui.level++,Li.items.push({type:"beginMarkedContent",tag:Ms[0]instanceof jn.Name?Ms[0].name:null}));break;case In.OPS.beginMarkedContentProps:if(cs(),Si){Ui.level++;let Ns=null;Ms[1]instanceof jn.Dict&&(Ns=Ms[1].get("MCID")),Li.items.push({type:"beginMarkedContentProps",id:Number.isInteger(Ns)?`${Vi.idFactory.getPageObjId()}_mc${Ns}`:null,tag:Ms[0]instanceof jn.Name?Ms[0].name:null})}break;case In.OPS.endMarkedContent:if(cs(),Si){if(Ui.level===0)break;Ui.level--,Li.items.push({type:"endMarkedContent"})}break;case In.OPS.restore:Es&&(Es.font!==os.font||Es.fontSize!==os.fontSize||Es.fontName!==os.fontName)&&cs();break}if(Li.items.length>=Ti.desiredSize){Ds=!0;break}}if(Ds){_s(gi);return}cs(),fs(),bs()}).catch(gs=>{if(!(gs instanceof In.AbortException)){if(this.options.ignoreErrors){(0,In.warn)(`getTextContent - ignoring errors during "${ji.name}" task: "${gs}".`),cs(),fs();return}throw gs}})}extractDataStructures(_i,ji,Pi){const Ni=this.xref;let Si;const Ti=this.readToUnicode(Pi.toUnicode||_i.get("ToUnicode")||ji.get("ToUnicode"));if(Pi.composite){const Ei=_i.get("CIDSystemInfo");Ei instanceof jn.Dict&&(Pi.cidSystemInfo={registry:(0,In.stringToPDFString)(Ei.get("Registry")),ordering:(0,In.stringToPDFString)(Ei.get("Ordering")),supplement:Ei.get("Supplement")});try{const $i=_i.get("CIDToGIDMap");$i instanceof hi.BaseStream&&(Si=$i.getBytes())}catch($i){if(!this.options.ignoreErrors)throw $i;(0,In.warn)(`extractDataStructures - ignoring CIDToGIDMap data: "${$i}".`)}}const Ri=[];let Mi=null,Ui;if(_i.has("Encoding")){if(Ui=_i.get("Encoding"),Ui instanceof jn.Dict){if(Mi=Ui.get("BaseEncoding"),Mi=Mi instanceof jn.Name?Mi.name:null,Ui.has("Differences")){const Ei=Ui.get("Differences");let $i=0;for(const Bi of Ei){const Oi=Ni.fetchIfRef(Bi);if(typeof Oi=="number")$i=Oi;else if(Oi instanceof jn.Name)Ri[$i++]=Oi.name;else throw new In.FormatError(`Invalid entry in 'Differences' array: ${Oi}`)}}}else if(Ui instanceof jn.Name)Mi=Ui.name;else{const Ei="Encoding is not a Name nor a Dict";if(!this.options.ignoreErrors)throw new In.FormatError(Ei);(0,In.warn)(Ei)}Mi!=="MacRomanEncoding"&&Mi!=="MacExpertEncoding"&&Mi!=="WinAnsiEncoding"&&(Mi=null)}const Hi=!Pi.file||Pi.isInternalFont,Li=(0,Rn.getSymbolsFonts)()[Pi.name];if(Mi&&Hi&&Li&&(Mi=null),Mi)Pi.defaultEncoding=(0,Tn.getEncoding)(Mi);else{const Ei=!!(Pi.flags&di.FontFlags.Symbolic),$i=!!(Pi.flags&di.FontFlags.Nonsymbolic);Ui=Tn.StandardEncoding,Pi.type==="TrueType"&&!$i&&(Ui=Tn.WinAnsiEncoding),(Ei||Li)&&(Ui=Tn.MacRomanEncoding,Hi&&(/Symbol/i.test(Pi.name)?Ui=Tn.SymbolSetEncoding:/Dingbats/i.test(Pi.name)?Ui=Tn.ZapfDingbatsEncoding:/Wingdings/i.test(Pi.name)&&(Ui=Tn.WinAnsiEncoding))),Pi.defaultEncoding=Ui}return Pi.differences=Ri,Pi.baseEncodingName=Mi,Pi.hasEncoding=!!Mi||Ri.length>0,Pi.dict=_i,Ti.then(Ei=>(Pi.toUnicode=Ei,this.buildToUnicode(Pi))).then(Ei=>(Pi.toUnicode=Ei,Si&&(Pi.cidToGidMap=this.readCidToGidMap(Si,Ei)),Pi))}_simpleFontToUnicode(_i,ji=!1){(0,In.assert)(!_i.composite,"Must be a simple font.");const Pi=[],Ni=_i.defaultEncoding.slice(),Si=_i.baseEncodingName,Ti=_i.differences;for(const Mi in Ti){const Ui=Ti[Mi];Ui!==".notdef"&&(Ni[Mi]=Ui)}const Ri=(0,wi.getGlyphsUnicode)();for(const Mi in Ni){let Ui=Ni[Mi];if(Ui==="")continue;let Hi=Ri[Ui];if(Hi!==void 0){Pi[Mi]=String.fromCharCode(Hi);continue}let Li=0;switch(Ui[0]){case"G":Ui.length===3&&(Li=parseInt(Ui.substring(1),16));break;case"g":Ui.length===5&&(Li=parseInt(Ui.substring(1),16));break;case"C":case"c":if(Ui.length>=3&&Ui.length<=4){const Ei=Ui.substring(1);if(ji){Li=parseInt(Ei,16);break}if(Li=+Ei,Number.isNaN(Li)&&Number.isInteger(parseInt(Ei,16)))return this._simpleFontToUnicode(_i,!0)}break;case"u":Hi=(0,pi.getUnicodeForGlyph)(Ui,Ri),Hi!==-1&&(Li=Hi);break;default:switch(Ui){case"f_h":case"f_t":case"T_h":Pi[Mi]=Ui.replaceAll("_","");continue}break}if(Li>0&&Li<=1114111&&Number.isInteger(Li)){if(Si&&Li===+Mi){const Ei=(0,Tn.getEncoding)(Si);if(Ei&&(Ui=Ei[Mi])){Pi[Mi]=String.fromCharCode(Ri[Ui]);continue}}Pi[Mi]=String.fromCodePoint(Li)}}return Pi}async buildToUnicode(_i){var ji;if(_i.hasIncludedToUnicodeMap=((ji=_i.toUnicode)==null?void 0:ji.length)>0,_i.hasIncludedToUnicodeMap)return!_i.composite&&_i.hasEncoding&&(_i.fallbackToUnicode=this._simpleFontToUnicode(_i)),_i.toUnicode;if(!_i.composite)return new ei.ToUnicodeMap(this._simpleFontToUnicode(_i));if(_i.composite&&(_i.cMap.builtInCMap&&!(_i.cMap instanceof Ln.IdentityCMap)||_i.cidSystemInfo.registry==="Adobe"&&(_i.cidSystemInfo.ordering==="GB1"||_i.cidSystemInfo.ordering==="CNS1"||_i.cidSystemInfo.ordering==="Japan1"||_i.cidSystemInfo.ordering==="Korea1"))){const{registry:Pi,ordering:Ni}=_i.cidSystemInfo,Si=jn.Name.get(`${Pi}-${Ni}-UCS2`),Ti=await Ln.CMapFactory.create({encoding:Si,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}),Ri=[],Mi=[];return _i.cMap.forEach(function(Ui,Hi){if(Hi>65535)throw new In.FormatError("Max size of CID is 65,535");const Li=Ti.lookup(Hi);if(Li){Mi.length=0;for(let Ei=0,$i=Li.length;Ei<$i;Ei+=2)Mi.push((Li.charCodeAt(Ei)<<8)+Li.charCodeAt(Ei+1));Ri[Ui]=String.fromCharCode(...Mi)}}),new ei.ToUnicodeMap(Ri)}return new ei.IdentityToUnicodeMap(_i.firstChar,_i.lastChar)}readToUnicode(_i){return _i?_i instanceof jn.Name?Ln.CMapFactory.create({encoding:_i,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then(function(ji){return ji instanceof Ln.IdentityCMap?new ei.IdentityToUnicodeMap(0,65535):new ei.ToUnicodeMap(ji.getMap())}):_i instanceof hi.BaseStream?Ln.CMapFactory.create({encoding:_i,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then(function(ji){if(ji instanceof Ln.IdentityCMap)return new ei.IdentityToUnicodeMap(0,65535);const Pi=new Array(ji.length);return ji.forEach(function(Ni,Si){if(typeof Si=="number"){Pi[Ni]=String.fromCodePoint(Si);return}const Ti=[];for(let Ri=0;Ri<Si.length;Ri+=2){const Mi=Si.charCodeAt(Ri)<<8|Si.charCodeAt(Ri+1);if((Mi&63488)!==55296){Ti.push(Mi);continue}Ri+=2;const Ui=Si.charCodeAt(Ri)<<8|Si.charCodeAt(Ri+1);Ti.push(((Mi&1023)<<10)+(Ui&1023)+65536)}Pi[Ni]=String.fromCodePoint(...Ti)}),new ei.ToUnicodeMap(Pi)},ji=>{if(ji instanceof In.AbortException)return null;if(this.options.ignoreErrors)return(0,In.warn)(`readToUnicode - ignoring ToUnicode data: "${ji}".`),null;throw ji}):Promise.resolve(null):Promise.resolve(null)}readCidToGidMap(_i,ji){const Pi=[];for(let Ni=0,Si=_i.length;Ni<Si;Ni++){const Ti=_i[Ni++]<<8|_i[Ni],Ri=Ni>>1;Ti===0&&!ji.has(Ri)||(Pi[Ri]=Ti)}return Pi}extractWidths(_i,ji,Pi){const Ni=this.xref;let Si=[],Ti=0;const Ri=[];let Mi,Ui,Hi,Li,Ei,$i,Bi,Oi;if(Pi.composite){if(Ti=_i.has("DW")?_i.get("DW"):1e3,Oi=_i.get("W"),Oi)for(Ui=0,Hi=Oi.length;Ui<Hi;Ui++)if($i=Ni.fetchIfRef(Oi[Ui++]),Bi=Ni.fetchIfRef(Oi[Ui]),Array.isArray(Bi))for(Li=0,Ei=Bi.length;Li<Ei;Li++)Si[$i++]=Ni.fetchIfRef(Bi[Li]);else{const qi=Ni.fetchIfRef(Oi[++Ui]);for(Li=$i;Li<=Bi;Li++)Si[Li]=qi}if(Pi.vertical){let qi=_i.getArray("DW2")||[880,-1e3];if(Mi=[qi[1],Ti*.5,qi[0]],qi=_i.get("W2"),qi)for(Ui=0,Hi=qi.length;Ui<Hi;Ui++)if($i=Ni.fetchIfRef(qi[Ui++]),Bi=Ni.fetchIfRef(qi[Ui]),Array.isArray(Bi))for(Li=0,Ei=Bi.length;Li<Ei;Li++)Ri[$i++]=[Ni.fetchIfRef(Bi[Li++]),Ni.fetchIfRef(Bi[Li++]),Ni.fetchIfRef(Bi[Li])];else{const ns=[Ni.fetchIfRef(qi[++Ui]),Ni.fetchIfRef(qi[++Ui]),Ni.fetchIfRef(qi[++Ui])];for(Li=$i;Li<=Bi;Li++)Ri[Li]=ns}}}else{const qi=Pi.firstChar;if(Oi=_i.get("Widths"),Oi){for(Li=qi,Ui=0,Hi=Oi.length;Ui<Hi;Ui++)Si[Li++]=Ni.fetchIfRef(Oi[Ui]);Ti=parseFloat(ji.get("MissingWidth"))||0}else{const ns=_i.get("BaseFont");if(ns instanceof jn.Name){const is=this.getBaseFontMetrics(ns.name);Si=this.buildCharCodeToWidth(is.widths,Pi),Ti=is.defaultWidth}}}let Xi=!0,Gi=Ti;for(const qi in Si){const ns=Si[qi];if(ns){if(!Gi){Gi=ns;continue}if(Gi!==ns){Xi=!1;break}}}Xi?Pi.flags|=di.FontFlags.FixedPitch:Pi.flags&=~di.FontFlags.FixedPitch,Pi.defaultWidth=Ti,Pi.widths=Si,Pi.defaultVMetrics=Mi,Pi.vmetrics=Ri}isSerifFont(_i){const ji=_i.split("-")[0];return ji in(0,Rn.getSerifFonts)()||/serif/gi.test(ji)}getBaseFontMetrics(_i){let ji=0,Pi=Object.create(null),Ni=!1,Ti=(0,Rn.getStdFontMap)()[_i]||_i;const Ri=(0,Jn.getMetrics)();Ti in Ri||(Ti=this.isSerifFont(_i)?"Times-Roman":"Helvetica");const Mi=Ri[Ti];return typeof Mi=="number"?(ji=Mi,Ni=!0):Pi=Mi(),{defaultWidth:ji,monospace:Ni,widths:Pi}}buildCharCodeToWidth(_i,ji){const Pi=Object.create(null),Ni=ji.differences,Si=ji.defaultEncoding;for(let Ti=0;Ti<256;Ti++){if(Ti in Ni&&_i[Ni[Ti]]){Pi[Ti]=_i[Ni[Ti]];continue}if(Ti in Si&&_i[Si[Ti]]){Pi[Ti]=_i[Si[Ti]];continue}}return Pi}preEvaluateFont(_i){const ji=_i;let Pi=_i.get("Subtype");if(!(Pi instanceof jn.Name))throw new In.FormatError("invalid font Subtype");let Ni=!1,Si,Ti;if(Pi.name==="Type0"){const Hi=_i.get("DescendantFonts");if(!Hi)throw new In.FormatError("Descendant fonts are not specified");if(_i=Array.isArray(Hi)?this.xref.fetchIfRef(Hi[0]):Hi,!(_i instanceof jn.Dict))throw new In.FormatError("Descendant font is not a dictionary.");if(Pi=_i.get("Subtype"),!(Pi instanceof jn.Name))throw new In.FormatError("invalid font Subtype");Ni=!0}const Ri=_i.get("FirstChar")||0,Mi=_i.get("LastChar")||(Ni?65535:255),Ui=_i.get("FontDescriptor");if(Ui){Si=new Gn.MurmurHash3_64;const Hi=ji.getRaw("Encoding");if(Hi instanceof jn.Name)Si.update(Hi.name);else if(Hi instanceof jn.Ref)Si.update(Hi.toString());else if(Hi instanceof jn.Dict){for(const Ei of Hi.getRawValues())if(Ei instanceof jn.Name)Si.update(Ei.name);else if(Ei instanceof jn.Ref)Si.update(Ei.toString());else if(Array.isArray(Ei)){const $i=Ei.length,Bi=new Array($i);for(let Oi=0;Oi<$i;Oi++){const Xi=Ei[Oi];Xi instanceof jn.Name?Bi[Oi]=Xi.name:(typeof Xi=="number"||Xi instanceof jn.Ref)&&(Bi[Oi]=Xi.toString())}Si.update(Bi.join())}}if(Si.update(`${Ri}-${Mi}`),Ti=_i.get("ToUnicode")||ji.get("ToUnicode"),Ti instanceof hi.BaseStream){const Ei=Ti.str||Ti,$i=Ei.buffer?new Uint8Array(Ei.buffer.buffer,0,Ei.bufferLength):new Uint8Array(Ei.bytes.buffer,Ei.start,Ei.end-Ei.start);Si.update($i)}else Ti instanceof jn.Name&&Si.update(Ti.name);const Li=_i.get("Widths")||ji.get("Widths");if(Array.isArray(Li)){const Ei=[];for(const $i of Li)(typeof $i=="number"||$i instanceof jn.Ref)&&Ei.push($i.toString());Si.update(Ei.join())}if(Ni){Si.update("compositeFont");const Ei=_i.get("W")||ji.get("W");if(Array.isArray(Ei)){const Bi=[];for(const Oi of Ei)if(typeof Oi=="number"||Oi instanceof jn.Ref)Bi.push(Oi.toString());else if(Array.isArray(Oi)){const Xi=[];for(const Gi of Oi)(typeof Gi=="number"||Gi instanceof jn.Ref)&&Xi.push(Gi.toString());Bi.push(`[${Xi.join()}]`)}Si.update(Bi.join())}const $i=_i.getRaw("CIDToGIDMap")||ji.getRaw("CIDToGIDMap");$i instanceof jn.Name?Si.update($i.name):$i instanceof jn.Ref?Si.update($i.toString()):$i instanceof hi.BaseStream&&Si.update($i.peekBytes())}}return{descriptor:Ui,dict:_i,baseDict:ji,composite:Ni,type:Pi.name,firstChar:Ri,lastChar:Mi,toUnicode:Ti,hash:Si?Si.hexdigest():""}}async translateFont({descriptor:_i,dict:ji,baseDict:Pi,composite:Ni,type:Si,firstChar:Ti,lastChar:Ri,toUnicode:Mi,cssFontInfo:Ui}){const Hi=Si==="Type3";let Li;if(!_i)if(Hi)_i=new jn.Dict(null),_i.set("FontName",jn.Name.get(Si)),_i.set("FontBBox",ji.getArray("FontBBox")||[0,0,0,0]);else{let Vi=ji.get("BaseFont");if(!(Vi instanceof jn.Name))throw new In.FormatError("Base font is not specified");Vi=Vi.name.replaceAll(/[,_]/g,"-");const Zi=this.getBaseFontMetrics(Vi),us=Vi.split("-")[0],ts=(this.isSerifFont(us)?di.FontFlags.Serif:0)|(Zi.monospace?di.FontFlags.FixedPitch:0)|((0,Rn.getSymbolsFonts)()[us]?di.FontFlags.Symbolic:di.FontFlags.Nonsymbolic);Li={type:Si,name:Vi,loadedName:Pi.loadedName,systemFontInfo:null,widths:Zi.widths,defaultWidth:Zi.defaultWidth,isSimulatedFlags:!0,flags:ts,firstChar:Ti,lastChar:Ri,toUnicode:Mi,xHeight:0,capHeight:0,italicAngle:0,isType3Font:Hi};const es=ji.get("Widths"),rs=(0,Rn.getStandardFontName)(Vi);let ss=null;return rs&&(ss=await this.fetchStandardFontData(rs),Li.isInternalFont=!!ss),!Li.isInternalFont&&this.options.useSystemFonts&&(Li.systemFontInfo=(0,fi.getFontSubstitution)(this.systemFontCache,this.idFactory,this.options.standardFontDataUrl,Vi,rs)),this.extractDataStructures(ji,ji,Li).then(os=>{if(es){const ks=[];let xs=Ti;for(const Rs of es)ks[xs++]=this.xref.fetchIfRef(Rs);os.widths=ks}else os.widths=this.buildCharCodeToWidth(Zi.widths,os);return new Cn.Font(Vi,ss,os)})}let Ei=_i.get("FontName"),$i=ji.get("BaseFont");typeof Ei=="string"&&(Ei=jn.Name.get(Ei)),typeof $i=="string"&&($i=jn.Name.get($i));const Bi=Ei==null?void 0:Ei.name,Oi=$i==null?void 0:$i.name;if(!Hi&&Bi!==Oi&&((0,In.info)(`The FontDescriptor's FontName is "${Bi}" but should be the same as the Font's BaseFont "${Oi}".`),Bi&&Oi&&(Oi.startsWith(Bi)||!(0,Rn.isKnownFontName)(Bi)&&(0,Rn.isKnownFontName)(Oi))&&(Ei=null)),Ei||(Ei=$i),!(Ei instanceof jn.Name))throw new In.FormatError("invalid font name");let Xi,Gi,qi,ns,is;try{Xi=_i.get("FontFile","FontFile2","FontFile3")}catch(Vi){if(!this.options.ignoreErrors)throw Vi;(0,In.warn)(`translateFont - fetching "${Ei.name}" font file: "${Vi}".`),Xi=new On.NullStream}let as=!1,hs=null,Yi=null;if(Xi){if(Xi.dict){const Vi=Xi.dict.get("Subtype");Vi instanceof jn.Name&&(Gi=Vi.name),qi=Xi.dict.get("Length1"),ns=Xi.dict.get("Length2"),is=Xi.dict.get("Length3")}}else if(Ui){const Vi=(0,si.getXfaFontName)(Ei.name);Vi&&(Ui.fontFamily=`${Ui.fontFamily}-PdfJS-XFA`,Ui.metrics=Vi.metrics||null,hs=Vi.factors||null,Xi=await this.fetchStandardFontData(Vi.name),as=!!Xi,Pi=ji=(0,si.getXfaFontDict)(Ei.name),Ni=!0)}else if(!Hi){const Vi=(0,Rn.getStandardFontName)(Ei.name);Vi&&(Xi=await this.fetchStandardFontData(Vi),as=!!Xi),!as&&this.options.useSystemFonts&&(Yi=(0,fi.getFontSubstitution)(this.systemFontCache,this.idFactory,this.options.standardFontDataUrl,Ei.name,Vi))}if(Li={type:Si,name:Ei.name,subtype:Gi,file:Xi,length1:qi,length2:ns,length3:is,isInternalFont:as,loadedName:Pi.loadedName,composite:Ni,fixedPitch:!1,fontMatrix:ji.getArray("FontMatrix")||In.FONT_IDENTITY_MATRIX,firstChar:Ti,lastChar:Ri,toUnicode:Mi,bbox:_i.getArray("FontBBox")||ji.getArray("FontBBox"),ascent:_i.get("Ascent"),descent:_i.get("Descent"),xHeight:_i.get("XHeight")||0,capHeight:_i.get("CapHeight")||0,flags:_i.get("Flags"),italicAngle:_i.get("ItalicAngle")||0,isType3Font:Hi,cssFontInfo:Ui,scaleFactors:hs,systemFontInfo:Yi},Ni){const Vi=Pi.get("Encoding");Vi instanceof jn.Name&&(Li.cidEncoding=Vi.name);const Zi=await Ln.CMapFactory.create({encoding:Vi,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null});Li.cMap=Zi,Li.vertical=Li.cMap.vertical}return this.extractDataStructures(ji,Pi,Li).then(Vi=>(this.extractWidths(ji,_i,Vi),new Cn.Font(Ei.name,Xi,Vi)))}static buildFontPaths(_i,ji,Pi,Ni){function Si(Ti){const Ri=`${_i.loadedName}_path_${Ti}`;try{if(_i.renderer.hasBuiltPath(Ti))return;Pi.send("commonobj",[Ri,"FontPath",_i.renderer.getPathJs(Ti)])}catch(Mi){if(Ni.ignoreErrors){(0,In.warn)(`buildFontPaths - ignoring ${Ri} glyph: "${Mi}".`);return}throw Mi}}for(const Ti of ji){Si(Ti.fontChar);const Ri=Ti.accent;Ri!=null&&Ri.fontChar&&Si(Ri.fontChar)}}static get fallbackFontDict(){const _i=new jn.Dict;return _i.set("BaseFont",jn.Name.get("Helvetica")),_i.set("Type",jn.Name.get("FallbackType")),_i.set("Subtype",jn.Name.get("FallbackType")),_i.set("Encoding",jn.Name.get("WinAnsiEncoding")),(0,In.shadow)(this,"fallbackFontDict",_i)}}Mn.PartialEvaluator=Qn;class ai{constructor({loadedName:_i,font:ji,dict:Pi,evaluatorOptions:Ni}){this.loadedName=_i,this.font=ji,this.dict=Pi,this._evaluatorOptions=Ni||ni,this.type3Loaded=null,this.type3Dependencies=ji.isType3Font?new Set:null,this.sent=!1}send(_i){this.sent||(this.sent=!0,_i.send("commonobj",[this.loadedName,"Font",this.font.exportData(this._evaluatorOptions.fontExtraProperties)]))}fallback(_i){this.font.data&&(this.font.disableFontFace=!0,Qn.buildFontPaths(this.font,this.font.glyphCacheValues,_i,this._evaluatorOptions))}loadType3Data(_i,ji,Pi){if(this.type3Loaded)return this.type3Loaded;if(!this.font.isType3Font)throw new Error("Must be a Type3 font.");const Ni=_i.clone({ignoreErrors:!1});Ni.parsingType3Font=!0;const Si=new jn.RefSet(_i.type3FontRefs);this.dict.objId&&!Si.has(this.dict.objId)&&Si.put(this.dict.objId),Ni.type3FontRefs=Si;const Ti=this.font,Ri=this.type3Dependencies;let Mi=Promise.resolve();const Ui=this.dict.get("CharProcs"),Hi=this.dict.get("Resources")||ji,Li=Object.create(null),Ei=In.Util.normalizeRect(Ti.bbox||[0,0,0,0]),$i=Ei[2]-Ei[0],Bi=Ei[3]-Ei[1],Oi=Math.hypot($i,Bi);for(const Xi of Ui.getKeys())Mi=Mi.then(()=>{const Gi=Ui.get(Xi),qi=new mi.OperatorList;return Ni.getOperatorList({stream:Gi,task:Pi,resources:Hi,operatorList:qi}).then(()=>{qi.fnArray[0]===In.OPS.setCharWidthAndBounds&&this._removeType3ColorOperators(qi,Oi),Li[Xi]=qi.getIR();for(const ns of qi.dependencies)Ri.add(ns)}).catch(function(ns){(0,In.warn)(`Type3 font resource "${Xi}" is not available.`);const is=new mi.OperatorList;Li[Xi]=is.getIR()})});return this.type3Loaded=Mi.then(()=>{Ti.charProcOperatorList=Li,this._bbox&&(Ti.isCharBBox=!0,Ti.bbox=this._bbox)}),this.type3Loaded}_removeType3ColorOperators(_i,ji=NaN){const Pi=In.Util.normalizeRect(_i.argsArray[0].slice(2)),Ni=Pi[2]-Pi[0],Si=Pi[3]-Pi[1],Ti=Math.hypot(Ni,Si);Ni===0||Si===0?(_i.fnArray.splice(0,1),_i.argsArray.splice(0,1)):(ji===0||Math.round(Ti/ji)>=10)&&(this._bbox||(this._bbox=[1/0,1/0,-1/0,-1/0]),this._bbox[0]=Math.min(this._bbox[0],Pi[0]),this._bbox[1]=Math.min(this._bbox[1],Pi[1]),this._bbox[2]=Math.max(this._bbox[2],Pi[2]),this._bbox[3]=Math.max(this._bbox[3],Pi[3]));let Ri=0,Mi=_i.length;for(;Ri<Mi;){switch(_i.fnArray[Ri]){case In.OPS.setCharWidthAndBounds:break;case In.OPS.setStrokeColorSpace:case In.OPS.setFillColorSpace:case In.OPS.setStrokeColor:case In.OPS.setStrokeColorN:case In.OPS.setFillColor:case In.OPS.setFillColorN:case In.OPS.setStrokeGray:case In.OPS.setFillGray:case In.OPS.setStrokeRGBColor:case In.OPS.setFillRGBColor:case In.OPS.setStrokeCMYKColor:case In.OPS.setFillCMYKColor:case In.OPS.shadingFill:case In.OPS.setRenderingIntent:_i.fnArray.splice(Ri,1),_i.argsArray.splice(Ri,1),Mi--;continue;case In.OPS.setGState:const[Ui]=_i.argsArray[Ri];let Hi=0,Li=Ui.length;for(;Hi<Li;){const[Ei]=Ui[Hi];switch(Ei){case"TR":case"TR2":case"HT":case"BG":case"BG2":case"UCR":case"UCR2":Ui.splice(Hi,1),Li--;continue}Hi++}break}Ri++}}}class Vn{constructor(_i=new ci){this.state=_i,this.stateStack=[]}save(){const _i=this.state;this.stateStack.push(this.state),this.state=_i.clone()}restore(){const _i=this.stateStack.pop();_i&&(this.state=_i)}transform(_i){this.state.ctm=In.Util.transform(this.state.ctm,_i)}}class Yn{constructor(){this.ctm=new Float32Array(In.IDENTITY_MATRIX),this.fontName=null,this.fontSize=0,this.loadedName=null,this.font=null,this.fontMatrix=In.FONT_IDENTITY_MATRIX,this.textMatrix=In.IDENTITY_MATRIX.slice(),this.textLineMatrix=In.IDENTITY_MATRIX.slice(),this.charSpacing=0,this.wordSpacing=0,this.leading=0,this.textHScale=1,this.textRise=0}setTextMatrix(_i,ji,Pi,Ni,Si,Ti){const Ri=this.textMatrix;Ri[0]=_i,Ri[1]=ji,Ri[2]=Pi,Ri[3]=Ni,Ri[4]=Si,Ri[5]=Ti}setTextLineMatrix(_i,ji,Pi,Ni,Si,Ti){const Ri=this.textLineMatrix;Ri[0]=_i,Ri[1]=ji,Ri[2]=Pi,Ri[3]=Ni,Ri[4]=Si,Ri[5]=Ti}translateTextMatrix(_i,ji){const Pi=this.textMatrix;Pi[4]=Pi[0]*_i+Pi[2]*ji+Pi[4],Pi[5]=Pi[1]*_i+Pi[3]*ji+Pi[5]}translateTextLineMatrix(_i,ji){const Pi=this.textLineMatrix;Pi[4]=Pi[0]*_i+Pi[2]*ji+Pi[4],Pi[5]=Pi[1]*_i+Pi[3]*ji+Pi[5]}carriageReturn(){this.translateTextLineMatrix(0,-this.leading),this.textMatrix=this.textLineMatrix.slice()}clone(){const _i=Object.create(this);return _i.textMatrix=this.textMatrix.slice(),_i.textLineMatrix=this.textLineMatrix.slice(),_i.fontMatrix=this.fontMatrix.slice(),_i}}class ci{constructor(){this.ctm=new Float32Array(In.IDENTITY_MATRIX),this.font=null,this.textRenderingMode=In.TextRenderingMode.FILL,this.fillColorSpace=ii.ColorSpace.singletons.gray,this.strokeColorSpace=ii.ColorSpace.singletons.gray}clone(){return Object.create(this)}}const Fi=class Fi{static get opMap(){return(0,In.shadow)(this,"opMap",{w:{id:In.OPS.setLineWidth,numArgs:1,variableArgs:!1},J:{id:In.OPS.setLineCap,numArgs:1,variableArgs:!1},j:{id:In.OPS.setLineJoin,numArgs:1,variableArgs:!1},M:{id:In.OPS.setMiterLimit,numArgs:1,variableArgs:!1},d:{id:In.OPS.setDash,numArgs:2,variableArgs:!1},ri:{id:In.OPS.setRenderingIntent,numArgs:1,variableArgs:!1},i:{id:In.OPS.setFlatness,numArgs:1,variableArgs:!1},gs:{id:In.OPS.setGState,numArgs:1,variableArgs:!1},q:{id:In.OPS.save,numArgs:0,variableArgs:!1},Q:{id:In.OPS.restore,numArgs:0,variableArgs:!1},cm:{id:In.OPS.transform,numArgs:6,variableArgs:!1},m:{id:In.OPS.moveTo,numArgs:2,variableArgs:!1},l:{id:In.OPS.lineTo,numArgs:2,variableArgs:!1},c:{id:In.OPS.curveTo,numArgs:6,variableArgs:!1},v:{id:In.OPS.curveTo2,numArgs:4,variableArgs:!1},y:{id:In.OPS.curveTo3,numArgs:4,variableArgs:!1},h:{id:In.OPS.closePath,numArgs:0,variableArgs:!1},re:{id:In.OPS.rectangle,numArgs:4,variableArgs:!1},S:{id:In.OPS.stroke,numArgs:0,variableArgs:!1},s:{id:In.OPS.closeStroke,numArgs:0,variableArgs:!1},f:{id:In.OPS.fill,numArgs:0,variableArgs:!1},F:{id:In.OPS.fill,numArgs:0,variableArgs:!1},"f*":{id:In.OPS.eoFill,numArgs:0,variableArgs:!1},B:{id:In.OPS.fillStroke,numArgs:0,variableArgs:!1},"B*":{id:In.OPS.eoFillStroke,numArgs:0,variableArgs:!1},b:{id:In.OPS.closeFillStroke,numArgs:0,variableArgs:!1},"b*":{id:In.OPS.closeEOFillStroke,numArgs:0,variableArgs:!1},n:{id:In.OPS.endPath,numArgs:0,variableArgs:!1},W:{id:In.OPS.clip,numArgs:0,variableArgs:!1},"W*":{id:In.OPS.eoClip,numArgs:0,variableArgs:!1},BT:{id:In.OPS.beginText,numArgs:0,variableArgs:!1},ET:{id:In.OPS.endText,numArgs:0,variableArgs:!1},Tc:{id:In.OPS.setCharSpacing,numArgs:1,variableArgs:!1},Tw:{id:In.OPS.setWordSpacing,numArgs:1,variableArgs:!1},Tz:{id:In.OPS.setHScale,numArgs:1,variableArgs:!1},TL:{id:In.OPS.setLeading,numArgs:1,variableArgs:!1},Tf:{id:In.OPS.setFont,numArgs:2,variableArgs:!1},Tr:{id:In.OPS.setTextRenderingMode,numArgs:1,variableArgs:!1},Ts:{id:In.OPS.setTextRise,numArgs:1,variableArgs:!1},Td:{id:In.OPS.moveText,numArgs:2,variableArgs:!1},TD:{id:In.OPS.setLeadingMoveText,numArgs:2,variableArgs:!1},Tm:{id:In.OPS.setTextMatrix,numArgs:6,variableArgs:!1},"T*":{id:In.OPS.nextLine,numArgs:0,variableArgs:!1},Tj:{id:In.OPS.showText,numArgs:1,variableArgs:!1},TJ:{id:In.OPS.showSpacedText,numArgs:1,variableArgs:!1},"'":{id:In.OPS.nextLineShowText,numArgs:1,variableArgs:!1},'"':{id:In.OPS.nextLineSetSpacingShowText,numArgs:3,variableArgs:!1},d0:{id:In.OPS.setCharWidth,numArgs:2,variableArgs:!1},d1:{id:In.OPS.setCharWidthAndBounds,numArgs:6,variableArgs:!1},CS:{id:In.OPS.setStrokeColorSpace,numArgs:1,variableArgs:!1},cs:{id:In.OPS.setFillColorSpace,numArgs:1,variableArgs:!1},SC:{id:In.OPS.setStrokeColor,numArgs:4,variableArgs:!0},SCN:{id:In.OPS.setStrokeColorN,numArgs:33,variableArgs:!0},sc:{id:In.OPS.setFillColor,numArgs:4,variableArgs:!0},scn:{id:In.OPS.setFillColorN,numArgs:33,variableArgs:!0},G:{id:In.OPS.setStrokeGray,numArgs:1,variableArgs:!1},g:{id:In.OPS.setFillGray,numArgs:1,variableArgs:!1},RG:{id:In.OPS.setStrokeRGBColor,numArgs:3,variableArgs:!1},rg:{id:In.OPS.setFillRGBColor,numArgs:3,variableArgs:!1},K:{id:In.OPS.setStrokeCMYKColor,numArgs:4,variableArgs:!1},k:{id:In.OPS.setFillCMYKColor,numArgs:4,variableArgs:!1},sh:{id:In.OPS.shadingFill,numArgs:1,variableArgs:!1},BI:{id:In.OPS.beginInlineImage,numArgs:0,variableArgs:!1},ID:{id:In.OPS.beginImageData,numArgs:0,variableArgs:!1},EI:{id:In.OPS.endInlineImage,numArgs:1,variableArgs:!1},Do:{id:In.OPS.paintXObject,numArgs:1,variableArgs:!1},MP:{id:In.OPS.markPoint,numArgs:1,variableArgs:!1},DP:{id:In.OPS.markPointProps,numArgs:2,variableArgs:!1},BMC:{id:In.OPS.beginMarkedContent,numArgs:1,variableArgs:!1},BDC:{id:In.OPS.beginMarkedContentProps,numArgs:2,variableArgs:!1},EMC:{id:In.OPS.endMarkedContent,numArgs:0,variableArgs:!1},BX:{id:In.OPS.beginCompat,numArgs:0,variableArgs:!1},EX:{id:In.OPS.endCompat,numArgs:0,variableArgs:!1},BM:null,BD:null,true:null,fa:null,fal:null,fals:null,false:null,nu:null,nul:null,null:null})}constructor(_i,ji,Pi=new Vn){this.parser=new Nn.Parser({lexer:new Nn.Lexer(_i,Fi.opMap),xref:ji}),this.stateManager=Pi,this.nonProcessedArgs=[],this._isPathOp=!1,this._numInvalidPathOPS=0}get savedStatesDepth(){return this.stateManager.stateStack.length}read(_i){let ji=_i.args;for(;;){const Pi=this.parser.getObj();if(Pi instanceof jn.Cmd){const Ni=Pi.cmd,Si=Fi.opMap[Ni];if(!Si){(0,In.warn)(`Unknown command "${Ni}".`);continue}const Ti=Si.id,Ri=Si.numArgs;let Mi=ji!==null?ji.length:0;if(this._isPathOp||(this._numInvalidPathOPS=0),this._isPathOp=Ti>=In.OPS.moveTo&&Ti<=In.OPS.endPath,Si.variableArgs)Mi>Ri&&(0,In.info)(`Command ${Ni}: expected [0, ${Ri}] args, but received ${Mi} args.`);else{if(Mi!==Ri){const Ui=this.nonProcessedArgs;for(;Mi>Ri;)Ui.push(ji.shift()),Mi--;for(;Mi<Ri&&Ui.length!==0;)ji===null&&(ji=[]),ji.unshift(Ui.pop()),Mi++}if(Mi<Ri){const Ui=`command ${Ni}: expected ${Ri} args, but received ${Mi} args.`;if(this._isPathOp&&++this._numInvalidPathOPS>Fi.MAX_INVALID_PATH_OPS)throw new In.FormatError(`Invalid ${Ui}`);(0,In.warn)(`Skipping ${Ui}`),ji!==null&&(ji.length=0);continue}}return this.preprocessCommand(Ti,ji),_i.fn=Ti,_i.args=ji,!0}if(Pi===jn.EOF)return!1;if(Pi!==null&&(ji===null&&(ji=[]),ji.push(Pi),ji.length>33))throw new In.FormatError("Too many arguments")}}preprocessCommand(_i,ji){switch(_i|0){case In.OPS.save:this.stateManager.save();break;case In.OPS.restore:this.stateManager.restore();break;case In.OPS.transform:this.stateManager.transform(ji);break}}};ta(Fi,"MAX_INVALID_PATH_OPS",10);let bi=Fi;Mn.EvaluatorPreprocessor=bi},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.IdentityCMap=Mn.CMapFactory=Mn.CMap=void 0;var In=ti(2),Ln=ti(4),jn=ti(5),Cn=ti(15),Tn=ti(16),Rn=ti(3),ui=ti(8);const si=["Adobe-GB1-UCS2","Adobe-CNS1-UCS2","Adobe-Japan1-UCS2","Adobe-Korea1-UCS2","78-EUC-H","78-EUC-V","78-H","78-RKSJ-H","78-RKSJ-V","78-V","78ms-RKSJ-H","78ms-RKSJ-V","83pv-RKSJ-H","90ms-RKSJ-H","90ms-RKSJ-V","90msp-RKSJ-H","90msp-RKSJ-V","90pv-RKSJ-H","90pv-RKSJ-V","Add-H","Add-RKSJ-H","Add-RKSJ-V","Add-V","Adobe-CNS1-0","Adobe-CNS1-1","Adobe-CNS1-2","Adobe-CNS1-3","Adobe-CNS1-4","Adobe-CNS1-5","Adobe-CNS1-6","Adobe-GB1-0","Adobe-GB1-1","Adobe-GB1-2","Adobe-GB1-3","Adobe-GB1-4","Adobe-GB1-5","Adobe-Japan1-0","Adobe-Japan1-1","Adobe-Japan1-2","Adobe-Japan1-3","Adobe-Japan1-4","Adobe-Japan1-5","Adobe-Japan1-6","Adobe-Korea1-0","Adobe-Korea1-1","Adobe-Korea1-2","B5-H","B5-V","B5pc-H","B5pc-V","CNS-EUC-H","CNS-EUC-V","CNS1-H","CNS1-V","CNS2-H","CNS2-V","ETHK-B5-H","ETHK-B5-V","ETen-B5-H","ETen-B5-V","ETenms-B5-H","ETenms-B5-V","EUC-H","EUC-V","Ext-H","Ext-RKSJ-H","Ext-RKSJ-V","Ext-V","GB-EUC-H","GB-EUC-V","GB-H","GB-V","GBK-EUC-H","GBK-EUC-V","GBK2K-H","GBK2K-V","GBKp-EUC-H","GBKp-EUC-V","GBT-EUC-H","GBT-EUC-V","GBT-H","GBT-V","GBTpc-EUC-H","GBTpc-EUC-V","GBpc-EUC-H","GBpc-EUC-V","H","HKdla-B5-H","HKdla-B5-V","HKdlb-B5-H","HKdlb-B5-V","HKgccs-B5-H","HKgccs-B5-V","HKm314-B5-H","HKm314-B5-V","HKm471-B5-H","HKm471-B5-V","HKscs-B5-H","HKscs-B5-V","Hankaku","Hiragana","KSC-EUC-H","KSC-EUC-V","KSC-H","KSC-Johab-H","KSC-Johab-V","KSC-V","KSCms-UHC-H","KSCms-UHC-HW-H","KSCms-UHC-HW-V","KSCms-UHC-V","KSCpc-EUC-H","KSCpc-EUC-V","Katakana","NWP-H","NWP-V","RKSJ-H","RKSJ-V","Roman","UniCNS-UCS2-H","UniCNS-UCS2-V","UniCNS-UTF16-H","UniCNS-UTF16-V","UniCNS-UTF32-H","UniCNS-UTF32-V","UniCNS-UTF8-H","UniCNS-UTF8-V","UniGB-UCS2-H","UniGB-UCS2-V","UniGB-UTF16-H","UniGB-UTF16-V","UniGB-UTF32-H","UniGB-UTF32-V","UniGB-UTF8-H","UniGB-UTF8-V","UniJIS-UCS2-H","UniJIS-UCS2-HW-H","UniJIS-UCS2-HW-V","UniJIS-UCS2-V","UniJIS-UTF16-H","UniJIS-UTF16-V","UniJIS-UTF32-H","UniJIS-UTF32-V","UniJIS-UTF8-H","UniJIS-UTF8-V","UniJIS2004-UTF16-H","UniJIS2004-UTF16-V","UniJIS2004-UTF32-H","UniJIS2004-UTF32-V","UniJIS2004-UTF8-H","UniJIS2004-UTF8-V","UniJISPro-UCS2-HW-V","UniJISPro-UCS2-V","UniJISPro-UTF8-V","UniJISX0213-UTF32-H","UniJISX0213-UTF32-V","UniJISX02132004-UTF32-H","UniJISX02132004-UTF32-V","UniKS-UCS2-H","UniKS-UCS2-V","UniKS-UTF16-H","UniKS-UTF16-V","UniKS-UTF32-H","UniKS-UTF32-V","UniKS-UTF8-H","UniKS-UTF8-V","V","WP-Symbol"],ei=2**24-1;class Bn{constructor(ni=!1){this.codespaceRanges=[[],[],[],[]],this.numCodespaceRanges=0,this._map=[],this.name="",this.vertical=!1,this.useCMap=null,this.builtInCMap=ni}addCodespaceRange(ni,li,Ai){this.codespaceRanges[ni-1].push(li,Ai),this.numCodespaceRanges++}mapCidRange(ni,li,Ai){if(li-ni>ei)throw new Error("mapCidRange - ignoring data above MAX_MAP_RANGE.");for(;ni<=li;)this._map[ni++]=Ai++}mapBfRange(ni,li,Ai){if(li-ni>ei)throw new Error("mapBfRange - ignoring data above MAX_MAP_RANGE.");const gi=Ai.length-1;for(;ni<=li;){this._map[ni++]=Ai;const yi=Ai.charCodeAt(gi)+1;if(yi>255){Ai=Ai.substring(0,gi-1)+String.fromCharCode(Ai.charCodeAt(gi-1)+1)+"\0";continue}Ai=Ai.substring(0,gi)+String.fromCharCode(yi)}}mapBfRangeToArray(ni,li,Ai){if(li-ni>ei)throw new Error("mapBfRangeToArray - ignoring data above MAX_MAP_RANGE.");const gi=Ai.length;let yi=0;for(;ni<=li&&yi<gi;)this._map[ni]=Ai[yi++],++ni}mapOne(ni,li){this._map[ni]=li}lookup(ni){return this._map[ni]}contains(ni){return this._map[ni]!==void 0}forEach(ni){const li=this._map,Ai=li.length;if(Ai<=65536)for(let gi=0;gi<Ai;gi++)li[gi]!==void 0&&ni(gi,li[gi]);else for(const gi in li)ni(gi,li[gi])}charCodeOf(ni){const li=this._map;if(li.length<=65536)return li.indexOf(ni);for(const Ai in li)if(li[Ai]===ni)return Ai|0;return-1}getMap(){return this._map}readCharCode(ni,li,Ai){let gi=0;const yi=this.codespaceRanges;for(let Ii=0,xi=yi.length;Ii<xi;Ii++){gi=(gi<<8|ni.charCodeAt(li+Ii))>>>0;const Qn=yi[Ii];for(let ai=0,Vn=Qn.length;ai<Vn;){const Yn=Qn[ai++],ci=Qn[ai++];if(gi>=Yn&&gi<=ci){Ai.charcode=gi,Ai.length=Ii+1;return}}}Ai.charcode=0,Ai.length=1}getCharCodeLength(ni){const li=this.codespaceRanges;for(let Ai=0,gi=li.length;Ai<gi;Ai++){const yi=li[Ai];for(let Ii=0,xi=yi.length;Ii<xi;){const Qn=yi[Ii++],ai=yi[Ii++];if(ni>=Qn&&ni<=ai)return Ai+1}}return 1}get length(){return this._map.length}get isIdentityCMap(){if(!(this.name==="Identity-H"||this.name==="Identity-V")||this._map.length!==65536)return!1;for(let ni=0;ni<65536;ni++)if(this._map[ni]!==ni)return!1;return!0}}Mn.CMap=Bn;class Nn extends Bn{constructor(ni,li){super(),this.vertical=ni,this.addCodespaceRange(li,0,65535)}mapCidRange(ni,li,Ai){(0,In.unreachable)("should not call mapCidRange")}mapBfRange(ni,li,Ai){(0,In.unreachable)("should not call mapBfRange")}mapBfRangeToArray(ni,li,Ai){(0,In.unreachable)("should not call mapBfRangeToArray")}mapOne(ni,li){(0,In.unreachable)("should not call mapCidOne")}lookup(ni){return Number.isInteger(ni)&&ni<=65535?ni:void 0}contains(ni){return Number.isInteger(ni)&&ni<=65535}forEach(ni){for(let li=0;li<=65535;li++)ni(li,li)}charCodeOf(ni){return Number.isInteger(ni)&&ni<=65535?ni:-1}getMap(){const ni=new Array(65536);for(let li=0;li<=65535;li++)ni[li]=li;return ni}get length(){return 65536}get isIdentityCMap(){(0,In.unreachable)("should not access .isIdentityCMap")}}Mn.IdentityCMap=Nn;function Hn(Wn){let ni=0;for(let li=0;li<Wn.length;li++)ni=ni<<8|Wn.charCodeAt(li);return ni>>>0}function On(Wn){if(typeof Wn!="string")throw new In.FormatError("Malformed CMap: expected string.")}function hi(Wn){if(!Number.isInteger(Wn))throw new In.FormatError("Malformed CMap: expected int.")}function Xn(Wn,ni){for(;;){let li=ni.getObj();if(li===Ln.EOF)break;if((0,Ln.isCmd)(li,"endbfchar"))return;On(li);const Ai=Hn(li);li=ni.getObj(),On(li);const gi=li;Wn.mapOne(Ai,gi)}}function ii(Wn,ni){for(;;){let li=ni.getObj();if(li===Ln.EOF)break;if((0,Ln.isCmd)(li,"endbfrange"))return;On(li);const Ai=Hn(li);li=ni.getObj(),On(li);const gi=Hn(li);if(li=ni.getObj(),Number.isInteger(li)||typeof li=="string"){const yi=Number.isInteger(li)?String.fromCharCode(li):li;Wn.mapBfRange(Ai,gi,yi)}else if((0,Ln.isCmd)(li,"[")){li=ni.getObj();const yi=[];for(;!(0,Ln.isCmd)(li,"]")&&li!==Ln.EOF;)yi.push(li),li=ni.getObj();Wn.mapBfRangeToArray(Ai,gi,yi)}else break}throw new In.FormatError("Invalid bf range.")}function ri(Wn,ni){for(;;){let li=ni.getObj();if(li===Ln.EOF)break;if((0,Ln.isCmd)(li,"endcidchar"))return;On(li);const Ai=Hn(li);li=ni.getObj(),hi(li);const gi=li;Wn.mapOne(Ai,gi)}}function di(Wn,ni){for(;;){let li=ni.getObj();if(li===Ln.EOF)break;if((0,Ln.isCmd)(li,"endcidrange"))return;On(li);const Ai=Hn(li);li=ni.getObj(),On(li);const gi=Hn(li);li=ni.getObj(),hi(li);const yi=li;Wn.mapCidRange(Ai,gi,yi)}}function fi(Wn,ni){for(;;){let li=ni.getObj();if(li===Ln.EOF)break;if((0,Ln.isCmd)(li,"endcodespacerange"))return;if(typeof li!="string")break;const Ai=Hn(li);if(li=ni.getObj(),typeof li!="string")break;const gi=Hn(li);Wn.addCodespaceRange(li.length,Ai,gi)}throw new In.FormatError("Invalid codespace range.")}function wi(Wn,ni){const li=ni.getObj();Number.isInteger(li)&&(Wn.vertical=!!li)}function Jn(Wn,ni){const li=ni.getObj();li instanceof Ln.Name&&(Wn.name=li.name)}async function pi(Wn,ni,li,Ai){let gi,yi;e:for(;;)try{const Ii=ni.getObj();if(Ii===Ln.EOF)break;if(Ii instanceof Ln.Name)Ii.name==="WMode"?wi(Wn,ni):Ii.name==="CMapName"&&Jn(Wn,ni),gi=Ii;else if(Ii instanceof Ln.Cmd)switch(Ii.cmd){case"endcmap":break e;case"usecmap":gi instanceof Ln.Name&&(yi=gi.name);break;case"begincodespacerange":fi(Wn,ni);break;case"beginbfchar":Xn(Wn,ni);break;case"begincidchar":ri(Wn,ni);break;case"beginbfrange":ii(Wn,ni);break;case"begincidrange":di(Wn,ni);break}}catch(Ii){if(Ii instanceof Rn.MissingDataException)throw Ii;(0,In.warn)("Invalid cMap data: "+Ii);continue}return!Ai&&yi&&(Ai=yi),Ai?Zn(Wn,li,Ai):Wn}async function Zn(Wn,ni,li){if(Wn.useCMap=await Gn(li,ni),Wn.numCodespaceRanges===0){const Ai=Wn.useCMap.codespaceRanges;for(let gi=0;gi<Ai.length;gi++)Wn.codespaceRanges[gi]=Ai[gi].slice();Wn.numCodespaceRanges=Wn.useCMap.numCodespaceRanges}return Wn.useCMap.forEach(function(Ai,gi){Wn.contains(Ai)||Wn.mapOne(Ai,Wn.useCMap.lookup(Ai))}),Wn}async function Gn(Wn,ni){if(Wn==="Identity-H")return new Nn(!1,2);if(Wn==="Identity-V")return new Nn(!0,2);if(!si.includes(Wn))throw new Error("Unknown CMap name: "+Wn);if(!ni)throw new Error("Built-in CMap parameters are not provided.");const{cMapData:li,compressionType:Ai}=await ni(Wn),gi=new Bn(!0);if(Ai===In.CMapCompressionType.BINARY)return new Cn.BinaryCMapReader().process(li,gi,yi=>Zn(gi,ni,yi));if(Ai===In.CMapCompressionType.NONE){const yi=new Tn.Lexer(new ui.Stream(li));return pi(gi,yi,ni,null)}throw new Error(`Invalid CMap "compressionType" value: ${Ai}`)}class mi{static async create({encoding:ni,fetchBuiltInCMap:li,useCMap:Ai}){if(ni instanceof Ln.Name)return Gn(ni.name,li);if(ni instanceof jn.BaseStream){const gi=await pi(new Bn,new Tn.Lexer(ni),li,Ai);return gi.isIdentityCMap?Gn(gi.name,li):gi}throw new Error("Encoding required.")}}Mn.CMapFactory=mi},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.BinaryCMapReader=void 0;var In=ti(2);function Ln(Bn,Nn){let Hn=0;for(let On=0;On<=Nn;On++)Hn=Hn<<8|Bn[On];return Hn>>>0}function jn(Bn,Nn){return Nn===1?String.fromCharCode(Bn[0],Bn[1]):Nn===3?String.fromCharCode(Bn[0],Bn[1],Bn[2],Bn[3]):String.fromCharCode(...Bn.subarray(0,Nn+1))}function Cn(Bn,Nn,Hn){let On=0;for(let hi=Hn;hi>=0;hi--)On+=Bn[hi]+Nn[hi],Bn[hi]=On&255,On>>=8}function Tn(Bn,Nn){let Hn=1;for(let On=Nn;On>=0&&Hn>0;On--)Hn+=Bn[On],Bn[On]=Hn&255,Hn>>=8}const Rn=16,ui=19;class si{constructor(Nn){this.buffer=Nn,this.pos=0,this.end=Nn.length,this.tmpBuf=new Uint8Array(ui)}readByte(){return this.pos>=this.end?-1:this.buffer[this.pos++]}readNumber(){let Nn=0,Hn;do{const On=this.readByte();if(On<0)throw new In.FormatError("unexpected EOF in bcmap");Hn=!(On&128),Nn=Nn<<7|On&127}while(!Hn);return Nn}readSigned(){const Nn=this.readNumber();return Nn&1?~(Nn>>>1):Nn>>>1}readHex(Nn,Hn){Nn.set(this.buffer.subarray(this.pos,this.pos+Hn+1)),this.pos+=Hn+1}readHexNumber(Nn,Hn){let On;const hi=this.tmpBuf;let Xn=0;do{const fi=this.readByte();if(fi<0)throw new In.FormatError("unexpected EOF in bcmap");On=!(fi&128),hi[Xn++]=fi&127}while(!On);let ii=Hn,ri=0,di=0;for(;ii>=0;){for(;di<8&&hi.length>0;)ri|=hi[--Xn]<<di,di+=7;Nn[ii]=ri&255,ii--,ri>>=8,di-=8}}readHexSigned(Nn,Hn){this.readHexNumber(Nn,Hn);const On=Nn[Hn]&1?255:0;let hi=0;for(let Xn=0;Xn<=Hn;Xn++)hi=(hi&1)<<8|Nn[Xn],Nn[Xn]=hi>>1^On}readString(){const Nn=this.readNumber(),Hn=new Array(Nn);for(let On=0;On<Nn;On++)Hn[On]=this.readNumber();return String.fromCharCode(...Hn)}}class ei{async process(Nn,Hn,On){const hi=new si(Nn),Xn=hi.readByte();Hn.vertical=!!(Xn&1);let ii=null;const ri=new Uint8Array(Rn),di=new Uint8Array(Rn),fi=new Uint8Array(Rn),wi=new Uint8Array(Rn),Jn=new Uint8Array(Rn);let pi,Zn;for(;(Zn=hi.readByte())>=0;){const Gn=Zn>>5;if(Gn===7){switch(Zn&31){case 0:hi.readString();break;case 1:ii=hi.readString();break}continue}const mi=!!(Zn&16),Wn=Zn&15;if(Wn+1>Rn)throw new Error("BinaryCMapReader.process: Invalid dataSize.");const ni=1,li=hi.readNumber();switch(Gn){case 0:hi.readHex(ri,Wn),hi.readHexNumber(di,Wn),Cn(di,ri,Wn),Hn.addCodespaceRange(Wn+1,Ln(ri,Wn),Ln(di,Wn));for(let Ai=1;Ai<li;Ai++)Tn(di,Wn),hi.readHexNumber(ri,Wn),Cn(ri,di,Wn),hi.readHexNumber(di,Wn),Cn(di,ri,Wn),Hn.addCodespaceRange(Wn+1,Ln(ri,Wn),Ln(di,Wn));break;case 1:hi.readHex(ri,Wn),hi.readHexNumber(di,Wn),Cn(di,ri,Wn),hi.readNumber();for(let Ai=1;Ai<li;Ai++)Tn(di,Wn),hi.readHexNumber(ri,Wn),Cn(ri,di,Wn),hi.readHexNumber(di,Wn),Cn(di,ri,Wn),hi.readNumber();break;case 2:hi.readHex(fi,Wn),pi=hi.readNumber(),Hn.mapOne(Ln(fi,Wn),pi);for(let Ai=1;Ai<li;Ai++)Tn(fi,Wn),mi||(hi.readHexNumber(Jn,Wn),Cn(fi,Jn,Wn)),pi=hi.readSigned()+(pi+1),Hn.mapOne(Ln(fi,Wn),pi);break;case 3:hi.readHex(ri,Wn),hi.readHexNumber(di,Wn),Cn(di,ri,Wn),pi=hi.readNumber(),Hn.mapCidRange(Ln(ri,Wn),Ln(di,Wn),pi);for(let Ai=1;Ai<li;Ai++)Tn(di,Wn),mi?ri.set(di):(hi.readHexNumber(ri,Wn),Cn(ri,di,Wn)),hi.readHexNumber(di,Wn),Cn(di,ri,Wn),pi=hi.readNumber(),Hn.mapCidRange(Ln(ri,Wn),Ln(di,Wn),pi);break;case 4:hi.readHex(fi,ni),hi.readHex(wi,Wn),Hn.mapOne(Ln(fi,ni),jn(wi,Wn));for(let Ai=1;Ai<li;Ai++)Tn(fi,ni),mi||(hi.readHexNumber(Jn,ni),Cn(fi,Jn,ni)),Tn(wi,Wn),hi.readHexSigned(Jn,Wn),Cn(wi,Jn,Wn),Hn.mapOne(Ln(fi,ni),jn(wi,Wn));break;case 5:hi.readHex(ri,ni),hi.readHexNumber(di,ni),Cn(di,ri,ni),hi.readHex(wi,Wn),Hn.mapBfRange(Ln(ri,ni),Ln(di,ni),jn(wi,Wn));for(let Ai=1;Ai<li;Ai++)Tn(di,ni),mi?ri.set(di):(hi.readHexNumber(ri,ni),Cn(ri,di,ni)),hi.readHexNumber(di,ni),Cn(di,ri,ni),hi.readHex(wi,Wn),Hn.mapBfRange(Ln(ri,ni),Ln(di,ni),jn(wi,Wn));break;default:throw new Error(`BinaryCMapReader.process - unknown type: ${Gn}`)}}return ii?On(ii):Hn}}Mn.BinaryCMapReader=ei},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.Parser=Mn.Linearization=Mn.Lexer=void 0;var In=ti(2),Ln=ti(4),jn=ti(3),Cn=ti(8),Tn=ti(17),Rn=ti(19),ui=ti(20),si=ti(22),ei=ti(23),Bn=ti(26),Nn=ti(29),Hn=ti(31),On=ti(32),hi=ti(33);const Xn=1e3;function ii(pi){const Zn=[],Gn=pi.length;let mi=0;for(;mi<Gn-1;)Zn.push(pi[mi++]<<8|pi[mi++]);return mi<Gn&&Zn.push(pi[mi]),Gn+"_"+String.fromCharCode.apply(null,Zn)}class ri{constructor({lexer:Zn,xref:Gn,allowStreams:mi=!1,recoveryMode:Wn=!1}){this.lexer=Zn,this.xref=Gn,this.allowStreams=mi,this.recoveryMode=Wn,this.imageCache=Object.create(null),this._imageId=0,this.refill()}refill(){this.buf1=this.lexer.getObj(),this.buf2=this.lexer.getObj()}shift(){this.buf2 instanceof Ln.Cmd&&this.buf2.cmd==="ID"?(this.buf1=this.buf2,this.buf2=null):(this.buf1=this.buf2,this.buf2=this.lexer.getObj())}tryShift(){try{return this.shift(),!0}catch(Zn){if(Zn instanceof jn.MissingDataException)throw Zn;return!1}}getObj(Zn=null){const Gn=this.buf1;if(this.shift(),Gn instanceof Ln.Cmd)switch(Gn.cmd){case"BI":return this.makeInlineImage(Zn);case"[":const mi=[];for(;!(0,Ln.isCmd)(this.buf1,"]")&&this.buf1!==Ln.EOF;)mi.push(this.getObj(Zn));if(this.buf1===Ln.EOF){if(this.recoveryMode)return mi;throw new jn.ParserEOFException("End of file inside array.")}return this.shift(),mi;case"<<":const Wn=new Ln.Dict(this.xref);for(;!(0,Ln.isCmd)(this.buf1,">>")&&this.buf1!==Ln.EOF;){if(!(this.buf1 instanceof Ln.Name)){(0,In.info)("Malformed dictionary: key must be a name object"),this.shift();continue}const ni=this.buf1.name;if(this.shift(),this.buf1===Ln.EOF)break;Wn.set(ni,this.getObj(Zn))}if(this.buf1===Ln.EOF){if(this.recoveryMode)return Wn;throw new jn.ParserEOFException("End of file inside dictionary.")}return(0,Ln.isCmd)(this.buf2,"stream")?this.allowStreams?this.makeStream(Wn,Zn):Wn:(this.shift(),Wn);default:return Gn}if(Number.isInteger(Gn)){if(Number.isInteger(this.buf1)&&(0,Ln.isCmd)(this.buf2,"R")){const mi=Ln.Ref.get(Gn,this.buf1);return this.shift(),this.shift(),mi}return Gn}return typeof Gn=="string"&&Zn?Zn.decryptString(Gn):Gn}findDefaultInlineStreamEnd(Zn){const{knownCommands:gi}=this.lexer,yi=Zn.pos,Ii=15;let xi=0,Qn,ai;for(;(Qn=Zn.getByte())!==-1;)if(xi===0)xi=Qn===69?1:0;else if(xi===1)xi=Qn===73?2:0;else if(Qn===32||Qn===10||Qn===13){ai=Zn.pos;const Yn=Zn.peekBytes(Ii),ci=Yn.length;if(ci===0)break;for(let Fi=0;Fi<ci;Fi++)if(Qn=Yn[Fi],!(Qn===0&&Yn[Fi+1]!==0)&&Qn!==10&&Qn!==13&&(Qn<32||Qn>127)){xi=0;break}if(xi!==2)continue;if(!gi){(0,In.warn)("findDefaultInlineStreamEnd - `lexer.knownCommands` is undefined.");continue}const bi=new wi(new Cn.Stream(Yn.slice()),gi);bi._hexStringWarn=()=>{};let Ci=0;for(;;){const Fi=bi.getObj();if(Fi===Ln.EOF){xi=0;break}if(Fi instanceof Ln.Cmd){const zi=gi[Fi.cmd];if(zi){if(zi.variableArgs?Ci<=zi.numArgs:Ci===zi.numArgs)break}else{xi=0;break}Ci=0;continue}Ci++}if(xi===2)break}else xi=0;Qn===-1&&((0,In.warn)("findDefaultInlineStreamEnd: Reached the end of the stream without finding a valid EI marker"),ai&&((0,In.warn)('... trying to recover by using the last "EI" occurrence.'),Zn.skip(-(Zn.pos-ai))));let Vn=4;return Zn.skip(-Vn),Qn=Zn.peekByte(),Zn.skip(Vn),(0,jn.isWhiteSpace)(Qn)||Vn--,Zn.pos-Vn-yi}findDCTDecodeInlineStreamEnd(Zn){const Gn=Zn.pos;let mi=!1,Wn,ni;for(;(Wn=Zn.getByte())!==-1;)if(Wn===255){switch(Zn.getByte()){case 0:break;case 255:Zn.skip(-1);break;case 217:mi=!0;break;case 192:case 193:case 194:case 195:case 197:case 198:case 199:case 201:case 202:case 203:case 205:case 206:case 207:case 196:case 204:case 218:case 219:case 220:case 221:case 222:case 223:case 224:case 225:case 226:case 227:case 228:case 229:case 230:case 231:case 232:case 233:case 234:case 235:case 236:case 237:case 238:case 239:case 254:ni=Zn.getUint16(),ni>2?Zn.skip(ni-2):Zn.skip(-2);break}if(mi)break}const li=Zn.pos-Gn;return Wn===-1?((0,In.warn)("Inline DCTDecode image stream: EOI marker not found, searching for /EI/ instead."),Zn.skip(-li),this.findDefaultInlineStreamEnd(Zn)):(this.inlineStreamSkipEI(Zn),li)}findASCII85DecodeInlineStreamEnd(Zn){const Wn=Zn.pos;let ni;for(;(ni=Zn.getByte())!==-1;)if(ni===126){const Ai=Zn.pos;for(ni=Zn.peekByte();(0,jn.isWhiteSpace)(ni);)Zn.skip(),ni=Zn.peekByte();if(ni===62){Zn.skip();break}if(Zn.pos>Ai){const gi=Zn.peekBytes(2);if(gi[0]===69&&gi[1]===73)break}}const li=Zn.pos-Wn;return ni===-1?((0,In.warn)("Inline ASCII85Decode image stream: EOD marker not found, searching for /EI/ instead."),Zn.skip(-li),this.findDefaultInlineStreamEnd(Zn)):(this.inlineStreamSkipEI(Zn),li)}findASCIIHexDecodeInlineStreamEnd(Zn){const mi=Zn.pos;let Wn;for(;(Wn=Zn.getByte())!==-1&&Wn!==62;);const ni=Zn.pos-mi;return Wn===-1?((0,In.warn)("Inline ASCIIHexDecode image stream: EOD marker not found, searching for /EI/ instead."),Zn.skip(-ni),this.findDefaultInlineStreamEnd(Zn)):(this.inlineStreamSkipEI(Zn),ni)}inlineStreamSkipEI(Zn){let Wn=0,ni;for(;(ni=Zn.getByte())!==-1;)if(Wn===0)Wn=ni===69?1:0;else if(Wn===1)Wn=ni===73?2:0;else if(Wn===2)break}makeInlineImage(Zn){const Gn=this.lexer,mi=Gn.stream,Wn=Object.create(null);let ni;for(;!(0,Ln.isCmd)(this.buf1,"ID")&&this.buf1!==Ln.EOF;){if(!(this.buf1 instanceof Ln.Name))throw new In.FormatError("Dictionary key must be a name object");const ai=this.buf1.name;if(this.shift(),this.buf1===Ln.EOF)break;Wn[ai]=this.getObj(Zn)}Gn.beginInlineImagePos!==-1&&(ni=mi.pos-Gn.beginInlineImagePos);const li=this.xref.fetchIfRef(Wn.F||Wn.Filter);let Ai;if(li instanceof Ln.Name)Ai=li.name;else if(Array.isArray(li)){const ai=this.xref.fetchIfRef(li[0]);ai instanceof Ln.Name&&(Ai=ai.name)}const gi=mi.pos;let yi;switch(Ai){case"DCT":case"DCTDecode":yi=this.findDCTDecodeInlineStreamEnd(mi);break;case"A85":case"ASCII85Decode":yi=this.findASCII85DecodeInlineStreamEnd(mi);break;case"AHx":case"ASCIIHexDecode":yi=this.findASCIIHexDecodeInlineStreamEnd(mi);break;default:yi=this.findDefaultInlineStreamEnd(mi)}let Ii;if(yi<Xn&&ni>0){const ai=mi.pos;mi.pos=Gn.beginInlineImagePos,Ii=ii(mi.getBytes(ni+yi)),mi.pos=ai;const Vn=this.imageCache[Ii];if(Vn!==void 0)return this.buf2=Ln.Cmd.get("EI"),this.shift(),Vn.reset(),Vn}const xi=new Ln.Dict(this.xref);for(const ai in Wn)xi.set(ai,Wn[ai]);let Qn=mi.makeSubStream(gi,yi,xi);return Zn&&(Qn=Zn.createStream(Qn,yi)),Qn=this.filter(Qn,xi,yi),Qn.dict=xi,Ii!==void 0&&(Qn.cacheKey=`inline_img_${++this._imageId}`,this.imageCache[Ii]=Qn),this.buf2=Ln.Cmd.get("EI"),this.shift(),Qn}_findStreamLength(Zn,Gn){const{stream:mi}=this.lexer;mi.pos=Zn;const Wn=2048,ni=Gn.length;for(;mi.pos<mi.end;){const li=mi.peekBytes(Wn),Ai=li.length-ni;if(Ai<=0)break;let gi=0;for(;gi<Ai;){let yi=0;for(;yi<ni&&li[gi+yi]===Gn[yi];)yi++;if(yi>=ni)return mi.pos+=gi,mi.pos-Zn;gi++}mi.pos+=Ai}return-1}makeStream(Zn,Gn){const mi=this.lexer;let Wn=mi.stream;mi.skipToNextLine();const ni=Wn.pos-1;let li=Zn.get("Length");if(Number.isInteger(li)||((0,In.info)(`Bad length "${li&&li.toString()}" in stream.`),li=0),Wn.pos=ni+li,mi.nextChar(),this.tryShift()&&(0,Ln.isCmd)(this.buf2,"endstream"))this.shift();else{const Ai=new Uint8Array([101,110,100,115,116,114,101,97,109]);let gi=this._findStreamLength(ni,Ai);if(gi<0){for(let Ii=1;Ii<=1;Ii++){const xi=Ai.length-Ii,Qn=Ai.slice(0,xi),ai=this._findStreamLength(ni,Qn);if(ai>=0){const Vn=Wn.peekBytes(xi+1)[xi];if(!(0,jn.isWhiteSpace)(Vn))break;(0,In.info)(`Found "${(0,In.bytesToString)(Qn)}" when searching for endstream command.`),gi=ai;break}}if(gi<0)throw new In.FormatError("Missing endstream command.")}li=gi,mi.nextChar(),this.shift(),this.shift()}return this.shift(),Wn=Wn.makeSubStream(ni,li,Zn),Gn&&(Wn=Gn.createStream(Wn,li)),Wn=this.filter(Wn,Zn,li),Wn.dict=Zn,Wn}filter(Zn,Gn,mi){let Wn=Gn.get("F","Filter"),ni=Gn.get("DP","DecodeParms");if(Wn instanceof Ln.Name)return Array.isArray(ni)&&(0,In.warn)("/DecodeParms should not be an Array, when /Filter is a Name."),this.makeFilter(Zn,Wn.name,mi,ni);let li=mi;if(Array.isArray(Wn)){const Ai=Wn,gi=ni;for(let yi=0,Ii=Ai.length;yi<Ii;++yi){if(Wn=this.xref.fetchIfRef(Ai[yi]),!(Wn instanceof Ln.Name))throw new In.FormatError(`Bad filter name "${Wn}"`);ni=null,Array.isArray(gi)&&yi in gi&&(ni=this.xref.fetchIfRef(gi[yi])),Zn=this.makeFilter(Zn,Wn.name,li,ni),li=null}}return Zn}makeFilter(Zn,Gn,mi,Wn){if(mi===0)return(0,In.warn)(`Empty "${Gn}" stream.`),new Cn.NullStream;try{switch(Gn){case"Fl":case"FlateDecode":return Wn?new On.PredictorStream(new si.FlateStream(Zn,mi),mi,Wn):new si.FlateStream(Zn,mi);case"LZW":case"LZWDecode":let ni=1;return Wn?(Wn.has("EarlyChange")&&(ni=Wn.get("EarlyChange")),new On.PredictorStream(new Hn.LZWStream(Zn,mi,ni),mi,Wn)):new Hn.LZWStream(Zn,mi,ni);case"DCT":case"DCTDecode":return new Bn.JpegStream(Zn,mi,Wn);case"JPX":case"JPXDecode":return new Nn.JpxStream(Zn,mi,Wn);case"A85":case"ASCII85Decode":return new Tn.Ascii85Stream(Zn,mi);case"AHx":case"ASCIIHexDecode":return new Rn.AsciiHexStream(Zn,mi);case"CCF":case"CCITTFaxDecode":return new ui.CCITTFaxStream(Zn,mi,Wn);case"RL":case"RunLengthDecode":return new hi.RunLengthStream(Zn,mi);case"JBIG2Decode":return new ei.Jbig2Stream(Zn,mi,Wn)}return(0,In.warn)(`Filter "${Gn}" is not supported.`),Zn}catch(ni){if(ni instanceof jn.MissingDataException)throw ni;return(0,In.warn)(`Invalid stream: "${ni}"`),new Cn.NullStream}}}Mn.Parser=ri;const di=[1,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,2,0,0,2,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function fi(pi){return pi>=48&&pi<=57?pi&15:pi>=65&&pi<=70||pi>=97&&pi<=102?(pi&15)+9:-1}class wi{constructor(Zn,Gn=null){this.stream=Zn,this.nextChar(),this.strBuf=[],this.knownCommands=Gn,this._hexStringNumWarn=0,this.beginInlineImagePos=-1}nextChar(){return this.currentChar=this.stream.getByte()}peekChar(){return this.stream.peekByte()}getNumber(){let Zn=this.currentChar,Gn=!1,mi=0,Wn=1;if(Zn===45?(Wn=-1,Zn=this.nextChar(),Zn===45&&(Zn=this.nextChar())):Zn===43&&(Zn=this.nextChar()),Zn===10||Zn===13)do Zn=this.nextChar();while(Zn===10||Zn===13);if(Zn===46&&(mi=10,Zn=this.nextChar()),Zn<48||Zn>57){const gi=`Invalid number: ${String.fromCharCode(Zn)} (charCode ${Zn})`;if((0,jn.isWhiteSpace)(Zn)||Zn===-1)return(0,In.info)(`Lexer.getNumber - "${gi}".`),0;throw new In.FormatError(gi)}let ni=Zn-48,li=0,Ai=1;for(;(Zn=this.nextChar())>=0;)if(Zn>=48&&Zn<=57){const gi=Zn-48;Gn?li=li*10+gi:(mi!==0&&(mi*=10),ni=ni*10+gi)}else if(Zn===46)if(mi===0)mi=1;else break;else if(Zn===45)(0,In.warn)("Badly formatted number: minus sign in the middle");else if(Zn===69||Zn===101){if(Zn=this.peekChar(),Zn===43||Zn===45)Ai=Zn===45?-1:1,this.nextChar();else if(Zn<48||Zn>57)break;Gn=!0}else break;return mi!==0&&(ni/=mi),Gn&&(ni*=10**(Ai*li)),Wn*ni}getString(){let Zn=1,Gn=!1;const mi=this.strBuf;mi.length=0;let Wn=this.nextChar();for(;;){let ni=!1;switch(Wn|0){case-1:(0,In.warn)("Unterminated string"),Gn=!0;break;case 40:++Zn,mi.push("(");break;case 41:--Zn===0?(this.nextChar(),Gn=!0):mi.push(")");break;case 92:switch(Wn=this.nextChar(),Wn){case-1:(0,In.warn)("Unterminated string"),Gn=!0;break;case 110:mi.push(`
`);break;case 114:mi.push("\r");break;case 116:mi.push("	");break;case 98:mi.push("\b");break;case 102:mi.push("\f");break;case 92:case 40:case 41:mi.push(String.fromCharCode(Wn));break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:let li=Wn&15;Wn=this.nextChar(),ni=!0,Wn>=48&&Wn<=55&&(li=(li<<3)+(Wn&15),Wn=this.nextChar(),Wn>=48&&Wn<=55&&(ni=!1,li=(li<<3)+(Wn&15))),mi.push(String.fromCharCode(li));break;case 13:this.peekChar()===10&&this.nextChar();break;case 10:break;default:mi.push(String.fromCharCode(Wn));break}break;default:mi.push(String.fromCharCode(Wn));break}if(Gn)break;ni||(Wn=this.nextChar())}return mi.join("")}getName(){let Zn,Gn;const mi=this.strBuf;for(mi.length=0;(Zn=this.nextChar())>=0&&!di[Zn];)if(Zn===35){if(Zn=this.nextChar(),di[Zn]){(0,In.warn)("Lexer_getName: NUMBER SIGN (#) should be followed by a hexadecimal number."),mi.push("#");break}const Wn=fi(Zn);if(Wn!==-1){Gn=Zn,Zn=this.nextChar();const ni=fi(Zn);if(ni===-1){if((0,In.warn)(`Lexer_getName: Illegal digit (${String.fromCharCode(Zn)}) in hexadecimal number.`),mi.push("#",String.fromCharCode(Gn)),di[Zn])break;mi.push(String.fromCharCode(Zn));continue}mi.push(String.fromCharCode(Wn<<4|ni))}else mi.push("#",String.fromCharCode(Zn))}else mi.push(String.fromCharCode(Zn));return mi.length>127&&(0,In.warn)(`Name token is longer than allowed by the spec: ${mi.length}`),Ln.Name.get(mi.join(""))}_hexStringWarn(Zn){if(this._hexStringNumWarn++===5){(0,In.warn)("getHexString - ignoring additional invalid characters.");return}this._hexStringNumWarn>5||(0,In.warn)(`getHexString - ignoring invalid character: ${Zn}`)}getHexString(){const Zn=this.strBuf;Zn.length=0;let Gn=this.currentChar,mi=!0,Wn,ni;for(this._hexStringNumWarn=0;;)if(Gn<0){(0,In.warn)("Unterminated hex string");break}else if(Gn===62){this.nextChar();break}else if(di[Gn]===1){Gn=this.nextChar();continue}else{if(mi){if(Wn=fi(Gn),Wn===-1){this._hexStringWarn(Gn),Gn=this.nextChar();continue}}else{if(ni=fi(Gn),ni===-1){this._hexStringWarn(Gn),Gn=this.nextChar();continue}Zn.push(String.fromCharCode(Wn<<4|ni))}mi=!mi,Gn=this.nextChar()}return Zn.join("")}getObj(){let Zn=!1,Gn=this.currentChar;for(;;){if(Gn<0)return Ln.EOF;if(Zn)(Gn===10||Gn===13)&&(Zn=!1);else if(Gn===37)Zn=!0;else if(di[Gn]!==1)break;Gn=this.nextChar()}switch(Gn|0){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return this.getNumber();case 40:return this.getString();case 47:return this.getName();case 91:return this.nextChar(),Ln.Cmd.get("[");case 93:return this.nextChar(),Ln.Cmd.get("]");case 60:return Gn=this.nextChar(),Gn===60?(this.nextChar(),Ln.Cmd.get("<<")):this.getHexString();case 62:return Gn=this.nextChar(),Gn===62?(this.nextChar(),Ln.Cmd.get(">>")):Ln.Cmd.get(">");case 123:return this.nextChar(),Ln.Cmd.get("{");case 125:return this.nextChar(),Ln.Cmd.get("}");case 41:throw this.nextChar(),new In.FormatError(`Illegal character: ${Gn}`)}let mi=String.fromCharCode(Gn);if(Gn<32||Gn>127){const li=this.peekChar();if(li>=32&&li<=127)return this.nextChar(),Ln.Cmd.get(mi)}const Wn=this.knownCommands;let ni=(Wn==null?void 0:Wn[mi])!==void 0;for(;(Gn=this.nextChar())>=0&&!di[Gn];){const li=mi+String.fromCharCode(Gn);if(ni&&Wn[li]===void 0)break;if(mi.length===128)throw new In.FormatError(`Command token too long: ${mi.length}`);mi=li,ni=(Wn==null?void 0:Wn[mi])!==void 0}return mi==="true"?!0:mi==="false"?!1:mi==="null"?null:(mi==="BI"&&(this.beginInlineImagePos=this.stream.pos),Ln.Cmd.get(mi))}skipToNextLine(){let Zn=this.currentChar;for(;Zn>=0;){if(Zn===13){Zn=this.nextChar(),Zn===10&&this.nextChar();break}else if(Zn===10){this.nextChar();break}Zn=this.nextChar()}}}Mn.Lexer=wi;class Jn{static create(Zn){function Gn(xi,Qn,ai=!1){const Vn=xi.get(Qn);if(Number.isInteger(Vn)&&(ai?Vn>=0:Vn>0))return Vn;throw new Error(`The "${Qn}" parameter in the linearization dictionary is invalid.`)}function mi(xi){const Qn=xi.get("H");let ai;if(Array.isArray(Qn)&&((ai=Qn.length)===2||ai===4)){for(let Vn=0;Vn<ai;Vn++){const Yn=Qn[Vn];if(!(Number.isInteger(Yn)&&Yn>0))throw new Error(`Hint (${Vn}) in the linearization dictionary is invalid.`)}return Qn}throw new Error("Hint array in the linearization dictionary is invalid.")}const Wn=new ri({lexer:new wi(Zn),xref:null}),ni=Wn.getObj(),li=Wn.getObj(),Ai=Wn.getObj(),gi=Wn.getObj();let yi,Ii;if(Number.isInteger(ni)&&Number.isInteger(li)&&(0,Ln.isCmd)(Ai,"obj")&&gi instanceof Ln.Dict&&typeof(yi=gi.get("Linearized"))=="number"&&yi>0){if((Ii=Gn(gi,"L"))!==Zn.length)throw new Error('The "L" parameter in the linearization dictionary does not equal the stream length.')}else return null;return{length:Ii,hints:mi(gi),objectNumberFirst:Gn(gi,"O"),endFirst:Gn(gi,"E"),numPages:Gn(gi,"N"),mainXRefEntriesOffset:Gn(gi,"T"),pageFirst:gi.has("P")?Gn(gi,"P",!0):0}}}Mn.Linearization=Jn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.Ascii85Stream=void 0;var In=ti(18),Ln=ti(3);class jn extends In.DecodeStream{constructor(Tn,Rn){Rn&&(Rn*=.8),super(Rn),this.str=Tn,this.dict=Tn.dict,this.input=new Uint8Array(5)}readBlock(){const si=this.str;let ei=si.getByte();for(;(0,Ln.isWhiteSpace)(ei);)ei=si.getByte();if(ei===-1||ei===126){this.eof=!0;return}const Bn=this.bufferLength;let Nn,Hn;if(ei===122){for(Nn=this.ensureBuffer(Bn+4),Hn=0;Hn<4;++Hn)Nn[Bn+Hn]=0;this.bufferLength+=4}else{const On=this.input;for(On[0]=ei,Hn=1;Hn<5;++Hn){for(ei=si.getByte();(0,Ln.isWhiteSpace)(ei);)ei=si.getByte();if(On[Hn]=ei,ei===-1||ei===126)break}if(Nn=this.ensureBuffer(Bn+Hn-1),this.bufferLength+=Hn-1,Hn<5){for(;Hn<5;++Hn)On[Hn]=117;this.eof=!0}let hi=0;for(Hn=0;Hn<5;++Hn)hi=hi*85+(On[Hn]-33);for(Hn=3;Hn>=0;--Hn)Nn[Bn+Hn]=hi&255,hi>>=8}}}Mn.Ascii85Stream=jn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.StreamsSequenceStream=Mn.DecodeStream=void 0;var In=ti(5),Ln=ti(8);const jn=new Uint8Array(0);class Cn extends In.BaseStream{constructor(ui){if(super(),this._rawMinBufferLength=ui||0,this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=jn,this.minBufferLength=512,ui)for(;this.minBufferLength<ui;)this.minBufferLength*=2}get isEmpty(){for(;!this.eof&&this.bufferLength===0;)this.readBlock();return this.bufferLength===0}ensureBuffer(ui){const si=this.buffer;if(ui<=si.byteLength)return si;let ei=this.minBufferLength;for(;ei<ui;)ei*=2;const Bn=new Uint8Array(ei);return Bn.set(si),this.buffer=Bn}getByte(){const ui=this.pos;for(;this.bufferLength<=ui;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]}getBytes(ui){const si=this.pos;let ei;if(ui){for(this.ensureBuffer(si+ui),ei=si+ui;!this.eof&&this.bufferLength<ei;)this.readBlock();const Bn=this.bufferLength;ei>Bn&&(ei=Bn)}else{for(;!this.eof;)this.readBlock();ei=this.bufferLength}return this.pos=ei,this.buffer.subarray(si,ei)}reset(){this.pos=0}makeSubStream(ui,si,ei=null){if(si===void 0)for(;!this.eof;)this.readBlock();else{const Bn=ui+si;for(;this.bufferLength<=Bn&&!this.eof;)this.readBlock()}return new Ln.Stream(this.buffer,ui,si,ei)}getBaseStreams(){return this.str?this.str.getBaseStreams():null}}Mn.DecodeStream=Cn;class Tn extends Cn{constructor(ui,si=null){let ei=0;for(const Bn of ui)ei+=Bn instanceof Cn?Bn._rawMinBufferLength:Bn.length;super(ei),this.streams=ui,this._onError=si}readBlock(){var On;const ui=this.streams;if(ui.length===0){this.eof=!0;return}const si=ui.shift();let ei;try{ei=si.getBytes()}catch(hi){if(this._onError){this._onError(hi,(On=si.dict)==null?void 0:On.objId);return}throw hi}const Bn=this.bufferLength,Nn=Bn+ei.length;this.ensureBuffer(Nn).set(ei,Bn),this.bufferLength=Nn}getBaseStreams(){const ui=[];for(const si of this.streams){const ei=si.getBaseStreams();ei&&ui.push(...ei)}return ui.length>0?ui:null}}Mn.StreamsSequenceStream=Tn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.AsciiHexStream=void 0;var In=ti(18);class Ln extends In.DecodeStream{constructor(Cn,Tn){Tn&&(Tn*=.5),super(Tn),this.str=Cn,this.dict=Cn.dict,this.firstDigit=-1}readBlock(){const Tn=this.str.getBytes(8e3);if(!Tn.length){this.eof=!0;return}const Rn=Tn.length+1>>1,ui=this.ensureBuffer(this.bufferLength+Rn);let si=this.bufferLength,ei=this.firstDigit;for(const Bn of Tn){let Nn;if(Bn>=48&&Bn<=57)Nn=Bn&15;else if(Bn>=65&&Bn<=70||Bn>=97&&Bn<=102)Nn=(Bn&15)+9;else if(Bn===62){this.eof=!0;break}else continue;ei<0?ei=Nn:(ui[si++]=ei<<4|Nn,ei=-1)}ei>=0&&this.eof&&(ui[si++]=ei<<4,ei=-1),this.firstDigit=ei,this.bufferLength=si}}Mn.AsciiHexStream=Ln},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.CCITTFaxStream=void 0;var In=ti(21),Ln=ti(18),jn=ti(4);class Cn extends Ln.DecodeStream{constructor(Rn,ui,si){super(ui),this.str=Rn,this.dict=Rn.dict,si instanceof jn.Dict||(si=jn.Dict.empty);const ei={next(){return Rn.getByte()}};this.ccittFaxDecoder=new In.CCITTFaxDecoder(ei,{K:si.get("K"),EndOfLine:si.get("EndOfLine"),EncodedByteAlign:si.get("EncodedByteAlign"),Columns:si.get("Columns"),Rows:si.get("Rows"),EndOfBlock:si.get("EndOfBlock"),BlackIs1:si.get("BlackIs1")})}readBlock(){for(;!this.eof;){const Rn=this.ccittFaxDecoder.readNextChar();if(Rn===-1){this.eof=!0;return}this.ensureBuffer(this.bufferLength+1),this.buffer[this.bufferLength++]=Rn}}}Mn.CCITTFaxStream=Cn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.CCITTFaxDecoder=void 0;var In=ti(2);const Ln=-2,jn=-1,Cn=0,Tn=1,Rn=2,ui=3,si=4,ei=5,Bn=6,Nn=7,Hn=8,On=[[-1,-1],[-1,-1],[7,Hn],[7,Nn],[6,Bn],[6,Bn],[6,ei],[6,ei],[4,Cn],[4,Cn],[4,Cn],[4,Cn],[4,Cn],[4,Cn],[4,Cn],[4,Cn],[3,Tn],[3,Tn],[3,Tn],[3,Tn],[3,Tn],[3,Tn],[3,Tn],[3,Tn],[3,Tn],[3,Tn],[3,Tn],[3,Tn],[3,Tn],[3,Tn],[3,Tn],[3,Tn],[3,si],[3,si],[3,si],[3,si],[3,si],[3,si],[3,si],[3,si],[3,si],[3,si],[3,si],[3,si],[3,si],[3,si],[3,si],[3,si],[3,ui],[3,ui],[3,ui],[3,ui],[3,ui],[3,ui],[3,ui],[3,ui],[3,ui],[3,ui],[3,ui],[3,ui],[3,ui],[3,ui],[3,ui],[3,ui],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn],[1,Rn]],hi=[[-1,-1],[12,Ln],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[12,1984],[12,2048],[12,2112],[12,2176],[12,2240],[12,2304],[11,1856],[11,1856],[11,1920],[11,1920],[12,2368],[12,2432],[12,2496],[12,2560]],Xn=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[8,29],[8,29],[8,30],[8,30],[8,45],[8,45],[8,46],[8,46],[7,22],[7,22],[7,22],[7,22],[7,23],[7,23],[7,23],[7,23],[8,47],[8,47],[8,48],[8,48],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[7,20],[7,20],[7,20],[7,20],[8,33],[8,33],[8,34],[8,34],[8,35],[8,35],[8,36],[8,36],[8,37],[8,37],[8,38],[8,38],[7,19],[7,19],[7,19],[7,19],[8,31],[8,31],[8,32],[8,32],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[8,53],[8,53],[8,54],[8,54],[7,26],[7,26],[7,26],[7,26],[8,39],[8,39],[8,40],[8,40],[8,41],[8,41],[8,42],[8,42],[8,43],[8,43],[8,44],[8,44],[7,21],[7,21],[7,21],[7,21],[7,28],[7,28],[7,28],[7,28],[8,61],[8,61],[8,62],[8,62],[8,63],[8,63],[8,0],[8,0],[8,320],[8,320],[8,384],[8,384],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[7,27],[7,27],[7,27],[7,27],[8,59],[8,59],[8,60],[8,60],[9,1472],[9,1536],[9,1600],[9,1728],[7,18],[7,18],[7,18],[7,18],[7,24],[7,24],[7,24],[7,24],[8,49],[8,49],[8,50],[8,50],[8,51],[8,51],[8,52],[8,52],[7,25],[7,25],[7,25],[7,25],[8,55],[8,55],[8,56],[8,56],[8,57],[8,57],[8,58],[8,58],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[8,448],[8,448],[8,512],[8,512],[9,704],[9,768],[8,640],[8,640],[8,576],[8,576],[9,832],[9,896],[9,960],[9,1024],[9,1088],[9,1152],[9,1216],[9,1280],[9,1344],[9,1408],[7,256],[7,256],[7,256],[7,256],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7]],ii=[[-1,-1],[-1,-1],[12,Ln],[12,Ln],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[11,1792],[11,1792],[12,1984],[12,1984],[12,2048],[12,2048],[12,2112],[12,2112],[12,2176],[12,2176],[12,2240],[12,2240],[12,2304],[12,2304],[11,1856],[11,1856],[11,1856],[11,1856],[11,1920],[11,1920],[11,1920],[11,1920],[12,2368],[12,2368],[12,2432],[12,2432],[12,2496],[12,2496],[12,2560],[12,2560],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[12,52],[12,52],[13,640],[13,704],[13,768],[13,832],[12,55],[12,55],[12,56],[12,56],[13,1280],[13,1344],[13,1408],[13,1472],[12,59],[12,59],[12,60],[12,60],[13,1536],[13,1600],[11,24],[11,24],[11,24],[11,24],[11,25],[11,25],[11,25],[11,25],[13,1664],[13,1728],[12,320],[12,320],[12,384],[12,384],[12,448],[12,448],[13,512],[13,576],[12,53],[12,53],[12,54],[12,54],[13,896],[13,960],[13,1024],[13,1088],[13,1152],[13,1216],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64]],ri=[[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[11,23],[11,23],[12,50],[12,51],[12,44],[12,45],[12,46],[12,47],[12,57],[12,58],[12,61],[12,256],[10,16],[10,16],[10,16],[10,16],[10,17],[10,17],[10,17],[10,17],[12,48],[12,49],[12,62],[12,63],[12,30],[12,31],[12,32],[12,33],[12,40],[12,41],[11,22],[11,22],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[12,128],[12,192],[12,26],[12,27],[12,28],[12,29],[11,19],[11,19],[11,20],[11,20],[12,34],[12,35],[12,36],[12,37],[12,38],[12,39],[11,21],[11,21],[12,42],[12,43],[10,0],[10,0],[10,0],[10,0],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12]],di=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[6,9],[6,8],[5,7],[5,7],[4,6],[4,6],[4,6],[4,6],[4,5],[4,5],[4,5],[4,5],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2]];class fi{constructor(Jn,pi={}){if(!Jn||typeof Jn.next!="function")throw new Error('CCITTFaxDecoder - invalid "source" parameter.');this.source=Jn,this.eof=!1,this.encoding=pi.K||0,this.eoline=pi.EndOfLine||!1,this.byteAlign=pi.EncodedByteAlign||!1,this.columns=pi.Columns||1728,this.rows=pi.Rows||0,this.eoblock=pi.EndOfBlock??!0,this.black=pi.BlackIs1||!1,this.codingLine=new Uint32Array(this.columns+1),this.refLine=new Uint32Array(this.columns+2),this.codingLine[0]=this.columns,this.codingPos=0,this.row=0,this.nextLine2D=this.encoding<0,this.inputBits=0,this.inputBuf=0,this.outputBits=0,this.rowsDone=!1;let Zn;for(;(Zn=this._lookBits(12))===0;)this._eatBits(1);Zn===1&&this._eatBits(12),this.encoding>0&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1))}readNextChar(){if(this.eof)return-1;const Jn=this.refLine,pi=this.codingLine,Zn=this.columns;let Gn,mi,Wn,ni;if(this.outputBits===0){if(this.rowsDone&&(this.eof=!0),this.eof)return-1;this.err=!1;let Ai,gi,yi;if(this.nextLine2D){for(ni=0;pi[ni]<Zn;++ni)Jn[ni]=pi[ni];for(Jn[ni++]=Zn,Jn[ni]=Zn,pi[0]=0,this.codingPos=0,Gn=0,mi=0;pi[this.codingPos]<Zn;)switch(Ai=this._getTwoDimCode(),Ai){case Cn:this._addPixels(Jn[Gn+1],mi),Jn[Gn+1]<Zn&&(Gn+=2);break;case Tn:if(Ai=gi=0,mi){do Ai+=yi=this._getBlackCode();while(yi>=64);do gi+=yi=this._getWhiteCode();while(yi>=64)}else{do Ai+=yi=this._getWhiteCode();while(yi>=64);do gi+=yi=this._getBlackCode();while(yi>=64)}for(this._addPixels(pi[this.codingPos]+Ai,mi),pi[this.codingPos]<Zn&&this._addPixels(pi[this.codingPos]+gi,mi^1);Jn[Gn]<=pi[this.codingPos]&&Jn[Gn]<Zn;)Gn+=2;break;case Nn:if(this._addPixels(Jn[Gn]+3,mi),mi^=1,pi[this.codingPos]<Zn)for(++Gn;Jn[Gn]<=pi[this.codingPos]&&Jn[Gn]<Zn;)Gn+=2;break;case ei:if(this._addPixels(Jn[Gn]+2,mi),mi^=1,pi[this.codingPos]<Zn)for(++Gn;Jn[Gn]<=pi[this.codingPos]&&Jn[Gn]<Zn;)Gn+=2;break;case ui:if(this._addPixels(Jn[Gn]+1,mi),mi^=1,pi[this.codingPos]<Zn)for(++Gn;Jn[Gn]<=pi[this.codingPos]&&Jn[Gn]<Zn;)Gn+=2;break;case Rn:if(this._addPixels(Jn[Gn],mi),mi^=1,pi[this.codingPos]<Zn)for(++Gn;Jn[Gn]<=pi[this.codingPos]&&Jn[Gn]<Zn;)Gn+=2;break;case Hn:if(this._addPixelsNeg(Jn[Gn]-3,mi),mi^=1,pi[this.codingPos]<Zn)for(Gn>0?--Gn:++Gn;Jn[Gn]<=pi[this.codingPos]&&Jn[Gn]<Zn;)Gn+=2;break;case Bn:if(this._addPixelsNeg(Jn[Gn]-2,mi),mi^=1,pi[this.codingPos]<Zn)for(Gn>0?--Gn:++Gn;Jn[Gn]<=pi[this.codingPos]&&Jn[Gn]<Zn;)Gn+=2;break;case si:if(this._addPixelsNeg(Jn[Gn]-1,mi),mi^=1,pi[this.codingPos]<Zn)for(Gn>0?--Gn:++Gn;Jn[Gn]<=pi[this.codingPos]&&Jn[Gn]<Zn;)Gn+=2;break;case jn:this._addPixels(Zn,0),this.eof=!0;break;default:(0,In.info)("bad 2d code"),this._addPixels(Zn,0),this.err=!0}}else for(pi[0]=0,this.codingPos=0,mi=0;pi[this.codingPos]<Zn;){if(Ai=0,mi)do Ai+=yi=this._getBlackCode();while(yi>=64);else do Ai+=yi=this._getWhiteCode();while(yi>=64);this._addPixels(pi[this.codingPos]+Ai,mi),mi^=1}let Ii=!1;if(this.byteAlign&&(this.inputBits&=-8),!this.eoblock&&this.row===this.rows-1)this.rowsDone=!0;else{if(Ai=this._lookBits(12),this.eoline)for(;Ai!==jn&&Ai!==1;)this._eatBits(1),Ai=this._lookBits(12);else for(;Ai===0;)this._eatBits(1),Ai=this._lookBits(12);Ai===1?(this._eatBits(12),Ii=!0):Ai===jn&&(this.eof=!0)}if(!this.eof&&this.encoding>0&&!this.rowsDone&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1)),this.eoblock&&Ii&&this.byteAlign){if(Ai=this._lookBits(12),Ai===1){if(this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1)),this.encoding>=0)for(ni=0;ni<4;++ni)Ai=this._lookBits(12),Ai!==1&&(0,In.info)("bad rtc code: "+Ai),this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1));this.eof=!0}}else if(this.err&&this.eoline){for(;;){if(Ai=this._lookBits(13),Ai===jn)return this.eof=!0,-1;if(Ai>>1===1)break;this._eatBits(1)}this._eatBits(12),this.encoding>0&&(this._eatBits(1),this.nextLine2D=!(Ai&1))}this.outputBits=pi[0]>0?pi[this.codingPos=0]:pi[this.codingPos=1],this.row++}let li;if(this.outputBits>=8)li=this.codingPos&1?0:255,this.outputBits-=8,this.outputBits===0&&pi[this.codingPos]<Zn&&(this.codingPos++,this.outputBits=pi[this.codingPos]-pi[this.codingPos-1]);else{Wn=8,li=0;do{if(typeof this.outputBits!="number")throw new In.FormatError('Invalid /CCITTFaxDecode data, "outputBits" must be a number.');this.outputBits>Wn?(li<<=Wn,this.codingPos&1||(li|=255>>8-Wn),this.outputBits-=Wn,Wn=0):(li<<=this.outputBits,this.codingPos&1||(li|=255>>8-this.outputBits),Wn-=this.outputBits,this.outputBits=0,pi[this.codingPos]<Zn?(this.codingPos++,this.outputBits=pi[this.codingPos]-pi[this.codingPos-1]):Wn>0&&(li<<=Wn,Wn=0))}while(Wn)}return this.black&&(li^=255),li}_addPixels(Jn,pi){const Zn=this.codingLine;let Gn=this.codingPos;Jn>Zn[Gn]&&(Jn>this.columns&&((0,In.info)("row is wrong length"),this.err=!0,Jn=this.columns),Gn&1^pi&&++Gn,Zn[Gn]=Jn),this.codingPos=Gn}_addPixelsNeg(Jn,pi){const Zn=this.codingLine;let Gn=this.codingPos;if(Jn>Zn[Gn])Jn>this.columns&&((0,In.info)("row is wrong length"),this.err=!0,Jn=this.columns),Gn&1^pi&&++Gn,Zn[Gn]=Jn;else if(Jn<Zn[Gn]){for(Jn<0&&((0,In.info)("invalid code"),this.err=!0,Jn=0);Gn>0&&Jn<Zn[Gn-1];)--Gn;Zn[Gn]=Jn}this.codingPos=Gn}_findTableCode(Jn,pi,Zn,Gn){const mi=Gn||0;for(let Wn=Jn;Wn<=pi;++Wn){let ni=this._lookBits(Wn);if(ni===jn)return[!0,1,!1];if(Wn<pi&&(ni<<=pi-Wn),!mi||ni>=mi){const li=Zn[ni-mi];if(li[0]===Wn)return this._eatBits(Wn),[!0,li[1],!0]}}return[!1,0,!1]}_getTwoDimCode(){let Jn=0,pi;if(this.eoblock){if(Jn=this._lookBits(7),pi=On[Jn],(pi==null?void 0:pi[0])>0)return this._eatBits(pi[0]),pi[1]}else{const Zn=this._findTableCode(1,7,On);if(Zn[0]&&Zn[2])return Zn[1]}return(0,In.info)("Bad two dim code"),jn}_getWhiteCode(){let Jn=0,pi;if(this.eoblock){if(Jn=this._lookBits(12),Jn===jn)return 1;if(pi=Jn>>5?Xn[Jn>>3]:hi[Jn],pi[0]>0)return this._eatBits(pi[0]),pi[1]}else{let Zn=this._findTableCode(1,9,Xn);if(Zn[0]||(Zn=this._findTableCode(11,12,hi),Zn[0]))return Zn[1]}return(0,In.info)("bad white code"),this._eatBits(1),1}_getBlackCode(){let Jn,pi;if(this.eoblock){if(Jn=this._lookBits(13),Jn===jn)return 1;if(Jn>>7?!(Jn>>9)&&Jn>>7?pi=ri[(Jn>>1)-64]:pi=di[Jn>>7]:pi=ii[Jn],pi[0]>0)return this._eatBits(pi[0]),pi[1]}else{let Zn=this._findTableCode(2,6,di);if(Zn[0]||(Zn=this._findTableCode(7,12,ri,64),Zn[0])||(Zn=this._findTableCode(10,13,ii),Zn[0]))return Zn[1]}return(0,In.info)("bad black code"),this._eatBits(1),1}_lookBits(Jn){let pi;for(;this.inputBits<Jn;){if((pi=this.source.next())===-1)return this.inputBits===0?jn:this.inputBuf<<Jn-this.inputBits&65535>>16-Jn;this.inputBuf=this.inputBuf<<8|pi,this.inputBits+=8}return this.inputBuf>>this.inputBits-Jn&65535>>16-Jn}_eatBits(Jn){(this.inputBits-=Jn)<0&&(this.inputBits=0)}}Mn.CCITTFaxDecoder=fi},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.FlateStream=void 0;var In=ti(18),Ln=ti(2);const jn=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Cn=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),Tn=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),Rn=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],ui=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];class si extends In.DecodeStream{constructor(Bn,Nn){super(Nn),this.str=Bn,this.dict=Bn.dict;const Hn=Bn.getByte(),On=Bn.getByte();if(Hn===-1||On===-1)throw new Ln.FormatError(`Invalid header in flate stream: ${Hn}, ${On}`);if((Hn&15)!==8)throw new Ln.FormatError(`Unknown compression method in flate stream: ${Hn}, ${On}`);if(((Hn<<8)+On)%31!==0)throw new Ln.FormatError(`Bad FCHECK in flate stream: ${Hn}, ${On}`);if(On&32)throw new Ln.FormatError(`FDICT bit set in flate stream: ${Hn}, ${On}`);this.codeSize=0,this.codeBuf=0}getBits(Bn){const Nn=this.str;let Hn=this.codeSize,On=this.codeBuf,hi;for(;Hn<Bn;){if((hi=Nn.getByte())===-1)throw new Ln.FormatError("Bad encoding in flate stream");On|=hi<<Hn,Hn+=8}return hi=On&(1<<Bn)-1,this.codeBuf=On>>Bn,this.codeSize=Hn-=Bn,hi}getCode(Bn){const Nn=this.str,Hn=Bn[0],On=Bn[1];let hi=this.codeSize,Xn=this.codeBuf,ii;for(;hi<On&&(ii=Nn.getByte())!==-1;)Xn|=ii<<hi,hi+=8;const ri=Hn[Xn&(1<<On)-1],di=ri>>16,fi=ri&65535;if(di<1||hi<di)throw new Ln.FormatError("Bad encoding in flate stream");return this.codeBuf=Xn>>di,this.codeSize=hi-di,fi}generateHuffmanTable(Bn){const Nn=Bn.length;let Hn=0,On;for(On=0;On<Nn;++On)Bn[On]>Hn&&(Hn=Bn[On]);const hi=1<<Hn,Xn=new Int32Array(hi);for(let ii=1,ri=0,di=2;ii<=Hn;++ii,ri<<=1,di<<=1)for(let fi=0;fi<Nn;++fi)if(Bn[fi]===ii){let wi=0,Jn=ri;for(On=0;On<ii;++On)wi=wi<<1|Jn&1,Jn>>=1;for(On=wi;On<hi;On+=di)Xn[On]=ii<<16|fi;++ri}return[Xn,Hn]}readBlock(){let Bn,Nn;const Hn=this.str;let On=this.getBits(3);if(On&1&&(this.eof=!0),On>>=1,On===0){let di;if((di=Hn.getByte())===-1)throw new Ln.FormatError("Bad block header in flate stream");let fi=di;if((di=Hn.getByte())===-1)throw new Ln.FormatError("Bad block header in flate stream");if(fi|=di<<8,(di=Hn.getByte())===-1)throw new Ln.FormatError("Bad block header in flate stream");let wi=di;if((di=Hn.getByte())===-1)throw new Ln.FormatError("Bad block header in flate stream");if(wi|=di<<8,wi!==(~fi&65535)&&(fi!==0||wi!==0))throw new Ln.FormatError("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;const Jn=this.bufferLength,pi=Jn+fi;if(Bn=this.ensureBuffer(pi),this.bufferLength=pi,fi===0)Hn.peekByte()===-1&&(this.eof=!0);else{const Zn=Hn.getBytes(fi);Bn.set(Zn,Jn),Zn.length<fi&&(this.eof=!0)}return}let hi,Xn;if(On===1)hi=Rn,Xn=ui;else if(On===2){const di=this.getBits(5)+257,fi=this.getBits(5)+1,wi=this.getBits(4)+4,Jn=new Uint8Array(jn.length);let pi;for(pi=0;pi<wi;++pi)Jn[jn[pi]]=this.getBits(3);const Zn=this.generateHuffmanTable(Jn);Nn=0,pi=0;const Gn=di+fi,mi=new Uint8Array(Gn);let Wn,ni,li;for(;pi<Gn;){const Ai=this.getCode(Zn);if(Ai===16)Wn=2,ni=3,li=Nn;else if(Ai===17)Wn=3,ni=3,li=Nn=0;else if(Ai===18)Wn=7,ni=11,li=Nn=0;else{mi[pi++]=Nn=Ai;continue}let gi=this.getBits(Wn)+ni;for(;gi-- >0;)mi[pi++]=li}hi=this.generateHuffmanTable(mi.subarray(0,di)),Xn=this.generateHuffmanTable(mi.subarray(di,Gn))}else throw new Ln.FormatError("Unknown block type in flate stream");Bn=this.buffer;let ii=Bn?Bn.length:0,ri=this.bufferLength;for(;;){let di=this.getCode(hi);if(di<256){ri+1>=ii&&(Bn=this.ensureBuffer(ri+1),ii=Bn.length),Bn[ri++]=di;continue}if(di===256){this.bufferLength=ri;return}di-=257,di=Cn[di];let fi=di>>16;fi>0&&(fi=this.getBits(fi)),Nn=(di&65535)+fi,di=this.getCode(Xn),di=Tn[di],fi=di>>16,fi>0&&(fi=this.getBits(fi));const wi=(di&65535)+fi;ri+Nn>=ii&&(Bn=this.ensureBuffer(ri+Nn),ii=Bn.length);for(let Jn=0;Jn<Nn;++Jn,++ri)Bn[ri]=Bn[ri-wi]}}}Mn.FlateStream=si},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.Jbig2Stream=void 0;var In=ti(5),Ln=ti(18),jn=ti(4),Cn=ti(24),Tn=ti(2);class Rn extends Ln.DecodeStream{constructor(si,ei,Bn){super(ei),this.stream=si,this.dict=si.dict,this.maybeLength=ei,this.params=Bn}get bytes(){return(0,Tn.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))}ensureBuffer(si){}readBlock(){if(this.eof)return;const si=new Cn.Jbig2Image,ei=[];if(this.params instanceof jn.Dict){const Hn=this.params.get("JBIG2Globals");if(Hn instanceof In.BaseStream){const On=Hn.getBytes();ei.push({data:On,start:0,end:On.length})}}ei.push({data:this.bytes,start:0,end:this.bytes.length});const Bn=si.parseChunks(ei),Nn=Bn.length;for(let Hn=0;Hn<Nn;Hn++)Bn[Hn]^=255;this.buffer=Bn,this.bufferLength=Nn,this.eof=!0}}Mn.Jbig2Stream=Rn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.Jbig2Image=void 0;var In=ti(2),Ln=ti(3),jn=ti(25),Cn=ti(21);class Tn extends In.BaseException{constructor(Ni){super(`JBIG2 error: ${Ni}`,"Jbig2Error")}}class Rn{getContexts(Ni){return Ni in this?this[Ni]:this[Ni]=new Int8Array(65536)}}class ui{constructor(Ni,Si,Ti){this.data=Ni,this.start=Si,this.end=Ti}get decoder(){const Ni=new jn.ArithmeticDecoder(this.data,this.start,this.end);return(0,In.shadow)(this,"decoder",Ni)}get contextCache(){const Ni=new Rn;return(0,In.shadow)(this,"contextCache",Ni)}}const si=2**31-1,ei=-(2**31);function Bn(Pi,Ni,Si){const Ti=Pi.getContexts(Ni);let Ri=1;function Mi(Ei){let $i=0;for(let Bi=0;Bi<Ei;Bi++){const Oi=Si.readBit(Ti,Ri);Ri=Ri<256?Ri<<1|Oi:(Ri<<1|Oi)&511|256,$i=$i<<1|Oi}return $i>>>0}const Ui=Mi(1),Hi=Mi(1)?Mi(1)?Mi(1)?Mi(1)?Mi(1)?Mi(32)+4436:Mi(12)+340:Mi(8)+84:Mi(6)+20:Mi(4)+4:Mi(2);let Li;return Ui===0?Li=Hi:Hi>0&&(Li=-Hi),Li>=ei&&Li<=si?Li:null}function Nn(Pi,Ni,Si){const Ti=Pi.getContexts("IAID");let Ri=1;for(let Mi=0;Mi<Si;Mi++){const Ui=Ni.readBit(Ti,Ri);Ri=Ri<<1|Ui}return Si<31?Ri&(1<<Si)-1:Ri&2147483647}const Hn=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"PatternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],On=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],hi=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],Xn=[39717,1941,229,405],ii=[32,8];function ri(Pi,Ni,Si){const Ti=Si.decoder,Ri=Si.contextCache.getContexts("GB"),Mi=[];let Ui,Hi,Li,Ei,$i,Bi,Oi;const Xi=31735;for(Hi=0;Hi<Ni;Hi++)for($i=Mi[Hi]=new Uint8Array(Pi),Bi=Hi<1?$i:Mi[Hi-1],Oi=Hi<2?$i:Mi[Hi-2],Ui=Oi[0]<<13|Oi[1]<<12|Oi[2]<<11|Bi[0]<<7|Bi[1]<<6|Bi[2]<<5|Bi[3]<<4,Li=0;Li<Pi;Li++)$i[Li]=Ei=Ti.readBit(Ri,Ui),Ui=(Ui&Xi)<<1|(Li+3<Pi?Oi[Li+3]<<11:0)|(Li+4<Pi?Bi[Li+4]<<4:0)|Ei;return Mi}function di(Pi,Ni,Si,Ti,Ri,Mi,Ui,Hi){if(Pi){const Ji=new ci(Hi.data,Hi.start,Hi.end);return _i(Ji,Ni,Si,!1)}if(Ti===0&&!Mi&&!Ri&&Ui.length===4&&Ui[0].x===3&&Ui[0].y===-1&&Ui[1].x===-3&&Ui[1].y===-1&&Ui[2].x===2&&Ui[2].y===-2&&Ui[3].x===-2&&Ui[3].y===-2)return ri(Ni,Si,Hi);const Li=!!Mi,Ei=On[Ti].concat(Ui);Ei.sort(function(Ji,cs){return Ji.y-cs.y||Ji.x-cs.x});const $i=Ei.length,Bi=new Int8Array($i),Oi=new Int8Array($i),Xi=[];let Gi=0,qi=0,ns=0,is=0,as,hs;for(hs=0;hs<$i;hs++)Bi[hs]=Ei[hs].x,Oi[hs]=Ei[hs].y,qi=Math.min(qi,Ei[hs].x),ns=Math.max(ns,Ei[hs].x),is=Math.min(is,Ei[hs].y),hs<$i-1&&Ei[hs].y===Ei[hs+1].y&&Ei[hs].x===Ei[hs+1].x-1?Gi|=1<<$i-1-hs:Xi.push(hs);const Yi=Xi.length,Vi=new Int8Array(Yi),Zi=new Int8Array(Yi),us=new Uint16Array(Yi);for(as=0;as<Yi;as++)hs=Xi[as],Vi[as]=Ei[hs].x,Zi[as]=Ei[hs].y,us[as]=1<<$i-1-hs;const ts=-qi,es=-is,rs=Ni-ns,ss=Xn[Ti];let os=new Uint8Array(Ni);const ks=[],xs=Hi.decoder,Rs=Hi.contextCache.getContexts("GB");let ms=0,Bs,ws,Ts,Is=0,ls,Wi;for(let Ji=0;Ji<Si;Ji++){if(Ri){const cs=xs.readBit(Rs,ss);if(ms^=cs,ms){ks.push(os);continue}}for(os=new Uint8Array(os),ks.push(os),Bs=0;Bs<Ni;Bs++){if(Li&&Mi[Ji][Bs]){os[Bs]=0;continue}if(Bs>=ts&&Bs<rs&&Ji>=es)for(Is=Is<<1&Gi,hs=0;hs<Yi;hs++)ws=Ji+Zi[hs],Ts=Bs+Vi[hs],ls=ks[ws][Ts],ls&&(ls=us[hs],Is|=ls);else for(Is=0,Wi=$i-1,hs=0;hs<$i;hs++,Wi--)Ts=Bs+Bi[hs],Ts>=0&&Ts<Ni&&(ws=Ji+Oi[hs],ws>=0&&(ls=ks[ws][Ts],ls&&(Is|=ls<<Wi)));const cs=xs.readBit(Rs,Is);os[Bs]=cs}}return ks}function fi(Pi,Ni,Si,Ti,Ri,Mi,Ui,Hi,Li){let Ei=hi[Si].coding;Si===0&&(Ei=Ei.concat([Hi[0]]));const $i=Ei.length,Bi=new Int32Array($i),Oi=new Int32Array($i);let Xi;for(Xi=0;Xi<$i;Xi++)Bi[Xi]=Ei[Xi].x,Oi[Xi]=Ei[Xi].y;let Gi=hi[Si].reference;Si===0&&(Gi=Gi.concat([Hi[1]]));const qi=Gi.length,ns=new Int32Array(qi),is=new Int32Array(qi);for(Xi=0;Xi<qi;Xi++)ns[Xi]=Gi[Xi].x,is[Xi]=Gi[Xi].y;const as=Ti[0].length,hs=Ti.length,Yi=ii[Si],Vi=[],Zi=Li.decoder,us=Li.contextCache.getContexts("GR");let ts=0;for(let es=0;es<Ni;es++){if(Ui){const ss=Zi.readBit(us,Yi);if(ts^=ss,ts)throw new Tn("prediction is not supported")}const rs=new Uint8Array(Pi);Vi.push(rs);for(let ss=0;ss<Pi;ss++){let os,ks,xs=0;for(Xi=0;Xi<$i;Xi++)os=es+Oi[Xi],ks=ss+Bi[Xi],os<0||ks<0||ks>=Pi?xs<<=1:xs=xs<<1|Vi[os][ks];for(Xi=0;Xi<qi;Xi++)os=es+is[Xi]-Mi,ks=ss+ns[Xi]-Ri,os<0||os>=hs||ks<0||ks>=as?xs<<=1:xs=xs<<1|Ti[os][ks];const Rs=Zi.readBit(us,xs);rs[ss]=Rs}}return Vi}function wi(Pi,Ni,Si,Ti,Ri,Mi,Ui,Hi,Li,Ei,$i,Bi){if(Pi&&Ni)throw new Tn("symbol refinement with Huffman is not supported");const Oi=[];let Xi=0,Gi=(0,Ln.log2)(Si.length+Ti);const qi=$i.decoder,ns=$i.contextCache;let is,as;for(Pi&&(is=Yn(1),as=[],Gi=Math.max(Gi,1));Oi.length<Ti;){const es=Pi?Mi.tableDeltaHeight.decode(Bi):Bn(ns,"IADH",qi);Xi+=es;let rs=0,ss=0;const os=Pi?as.length:0;for(;;){const ks=Pi?Mi.tableDeltaWidth.decode(Bi):Bn(ns,"IADW",qi);if(ks===null)break;rs+=ks,ss+=rs;let xs;if(Ni){const Rs=Bn(ns,"IAAI",qi);if(Rs>1)xs=Jn(Pi,Ni,rs,Xi,0,Rs,1,Si.concat(Oi),Gi,0,0,1,0,Mi,Li,Ei,$i,0,Bi);else{const ms=Nn(ns,qi,Gi),Bs=Bn(ns,"IARDX",qi),ws=Bn(ns,"IARDY",qi),Ts=ms<Si.length?Si[ms]:Oi[ms-Si.length];xs=fi(rs,Xi,Li,Ts,Bs,ws,!1,Ei,$i)}Oi.push(xs)}else Pi?as.push(rs):(xs=di(!1,rs,Xi,Ui,!1,null,Hi,$i),Oi.push(xs))}if(Pi&&!Ni){const ks=Mi.tableBitmapSize.decode(Bi);Bi.byteAlign();let xs;if(ks===0)xs=zi(Bi,ss,Xi);else{const ms=Bi.end,Bs=Bi.position+ks;Bi.end=Bs,xs=_i(Bi,ss,Xi,!1),Bi.end=ms,Bi.position=Bs}const Rs=as.length;if(os===Rs-1)Oi.push(xs);else{let ms,Bs,ws=0,Ts,Is,ls;for(ms=os;ms<Rs;ms++){for(Is=as[ms],Ts=ws+Is,ls=[],Bs=0;Bs<Xi;Bs++)ls.push(xs[Bs].subarray(ws,Ts));Oi.push(ls),ws=Ts}}}}const hs=[],Yi=[];let Vi=!1,Zi,us;const ts=Si.length+Ti;for(;Yi.length<ts;){let es=Pi?is.decode(Bi):Bn(ns,"IAEX",qi);for(;es--;)Yi.push(Vi);Vi=!Vi}for(Zi=0,us=Si.length;Zi<us;Zi++)Yi[Zi]&&hs.push(Si[Zi]);for(let es=0;es<Ti;Zi++,es++)Yi[Zi]&&hs.push(Oi[es]);return hs}function Jn(Pi,Ni,Si,Ti,Ri,Mi,Ui,Hi,Li,Ei,$i,Bi,Oi,Xi,Gi,qi,ns,is,as){if(Pi&&Ni)throw new Tn("refinement with Huffman is not supported");const hs=[];let Yi,Vi;for(Yi=0;Yi<Ti;Yi++){if(Vi=new Uint8Array(Si),Ri)for(let rs=0;rs<Si;rs++)Vi[rs]=Ri;hs.push(Vi)}const Zi=ns.decoder,us=ns.contextCache;let ts=Pi?-Xi.tableDeltaT.decode(as):-Bn(us,"IADT",Zi),es=0;for(Yi=0;Yi<Mi;){const rs=Pi?Xi.tableDeltaT.decode(as):Bn(us,"IADT",Zi);ts+=rs;const ss=Pi?Xi.tableFirstS.decode(as):Bn(us,"IAFS",Zi);es+=ss;let os=es;do{let ks=0;Ui>1&&(ks=Pi?as.readBits(is):Bn(us,"IAIT",Zi));const xs=Ui*ts+ks,Rs=Pi?Xi.symbolIDTable.decode(as):Nn(us,Zi,Li),ms=Ni&&(Pi?as.readBit():Bn(us,"IARI",Zi));let Bs=Hi[Rs],ws=Bs[0].length,Ts=Bs.length;if(ms){const ps=Bn(us,"IARDW",Zi),gs=Bn(us,"IARDH",Zi),bs=Bn(us,"IARDX",Zi),vs=Bn(us,"IARDY",Zi);ws+=ps,Ts+=gs,Bs=fi(ws,Ts,Gi,Bs,(ps>>1)+bs,(gs>>1)+vs,!1,qi,ns)}const Is=xs-(Bi&1?0:Ts-1),ls=os-(Bi&2?ws-1:0);let Wi,Ji,cs;if(Ei){for(Wi=0;Wi<Ts;Wi++){if(Vi=hs[ls+Wi],!Vi)continue;cs=Bs[Wi];const ps=Math.min(Si-Is,ws);switch(Oi){case 0:for(Ji=0;Ji<ps;Ji++)Vi[Is+Ji]|=cs[Ji];break;case 2:for(Ji=0;Ji<ps;Ji++)Vi[Is+Ji]^=cs[Ji];break;default:throw new Tn(`operator ${Oi} is not supported`)}}os+=Ts-1}else{for(Ji=0;Ji<Ts;Ji++)if(Vi=hs[Is+Ji],!!Vi)switch(cs=Bs[Ji],Oi){case 0:for(Wi=0;Wi<ws;Wi++)Vi[ls+Wi]|=cs[Wi];break;case 2:for(Wi=0;Wi<ws;Wi++)Vi[ls+Wi]^=cs[Wi];break;default:throw new Tn(`operator ${Oi} is not supported`)}os+=ws-1}Yi++;const fs=Pi?Xi.tableDeltaS.decode(as):Bn(us,"IADS",Zi);if(fs===null)break;os+=fs+$i}while(!0)}return hs}function pi(Pi,Ni,Si,Ti,Ri,Mi){const Ui=[];Pi||(Ui.push({x:-Ni,y:0}),Ri===0&&Ui.push({x:-3,y:-1},{x:2,y:-2},{x:-2,y:-2}));const Hi=(Ti+1)*Ni,Li=di(Pi,Hi,Si,Ri,!1,null,Ui,Mi),Ei=[];for(let $i=0;$i<=Ti;$i++){const Bi=[],Oi=Ni*$i,Xi=Oi+Ni;for(let Gi=0;Gi<Si;Gi++)Bi.push(Li[Gi].subarray(Oi,Xi));Ei.push(Bi)}return Ei}function Zn(Pi,Ni,Si,Ti,Ri,Mi,Ui,Hi,Li,Ei,$i,Bi,Oi,Xi,Gi){if(Ui)throw new Tn("skip is not supported");if(Hi!==0)throw new Tn(`operator "${Hi}" is not supported in halftone region`);const ns=[];let is,as,hs;for(is=0;is<Ri;is++){if(hs=new Uint8Array(Ti),Mi)for(as=0;as<Ti;as++)hs[as]=Mi;ns.push(hs)}const Yi=Ni.length,Vi=Ni[0],Zi=Vi[0].length,us=Vi.length,ts=(0,Ln.log2)(Yi),es=[];Pi||(es.push({x:Si<=1?3:2,y:-1}),Si===0&&es.push({x:-3,y:-1},{x:2,y:-2},{x:-2,y:-2}));const rs=[];let ss,os;for(Pi&&(ss=new ci(Gi.data,Gi.start,Gi.end)),is=ts-1;is>=0;is--)Pi?os=_i(ss,Li,Ei,!0):os=di(!1,Li,Ei,Si,!1,null,es,Gi),rs[is]=os;let ks,xs,Rs,ms,Bs,ws,Ts,Is,ls;for(ks=0;ks<Ei;ks++)for(xs=0;xs<Li;xs++){for(Rs=0,ms=0,as=ts-1;as>=0;as--)Rs^=rs[as][ks][xs],ms|=Rs<<as;if(Bs=Ni[ms],ws=$i+ks*Xi+xs*Oi>>8,Ts=Bi+ks*Oi-xs*Xi>>8,ws>=0&&ws+Zi<=Ti&&Ts>=0&&Ts+us<=Ri)for(is=0;is<us;is++)for(ls=ns[Ts+is],Is=Bs[is],as=0;as<Zi;as++)ls[ws+as]|=Is[as];else{let Wi,Ji;for(is=0;is<us;is++)if(Ji=Ts+is,!(Ji<0||Ji>=Ri))for(ls=ns[Ji],Is=Bs[is],as=0;as<Zi;as++)Wi=ws+as,Wi>=0&&Wi<Ti&&(ls[Wi]|=Is[as])}}return ns}function Gn(Pi,Ni){const Si={};Si.number=(0,Ln.readUint32)(Pi,Ni);const Ti=Pi[Ni+4],Ri=Ti&63;if(!Hn[Ri])throw new Tn("invalid segment type: "+Ri);Si.type=Ri,Si.typeName=Hn[Ri],Si.deferredNonRetain=!!(Ti&128);const Mi=!!(Ti&64),Ui=Pi[Ni+5];let Hi=Ui>>5&7;const Li=[Ui&31];let Ei=Ni+6;if(Ui===7){Hi=(0,Ln.readUint32)(Pi,Ei-1)&536870911,Ei+=3;let Gi=Hi+7>>3;for(Li[0]=Pi[Ei++];--Gi>0;)Li.push(Pi[Ei++])}else if(Ui===5||Ui===6)throw new Tn("invalid referred-to flags");Si.retainBits=Li;let $i=4;Si.number<=256?$i=1:Si.number<=65536&&($i=2);const Bi=[];let Oi,Xi;for(Oi=0;Oi<Hi;Oi++){let Gi;$i===1?Gi=Pi[Ei]:$i===2?Gi=(0,Ln.readUint16)(Pi,Ei):Gi=(0,Ln.readUint32)(Pi,Ei),Bi.push(Gi),Ei+=$i}if(Si.referredTo=Bi,Mi?(Si.pageAssociation=(0,Ln.readUint32)(Pi,Ei),Ei+=4):Si.pageAssociation=Pi[Ei++],Si.length=(0,Ln.readUint32)(Pi,Ei),Ei+=4,Si.length===4294967295)if(Ri===38){const Gi=Wn(Pi,Ei),ns=!!(Pi[Ei+ni]&1),is=6,as=new Uint8Array(is);for(ns||(as[0]=255,as[1]=172),as[2]=Gi.height>>>24&255,as[3]=Gi.height>>16&255,as[4]=Gi.height>>8&255,as[5]=Gi.height&255,Oi=Ei,Xi=Pi.length;Oi<Xi;Oi++){let hs=0;for(;hs<is&&as[hs]===Pi[Oi+hs];)hs++;if(hs===is){Si.length=Oi+is;break}}if(Si.length===4294967295)throw new Tn("segment end was not found")}else throw new Tn("invalid unknown segment length");return Si.headerEnd=Ei,Si}function mi(Pi,Ni,Si,Ti){const Ri=[];let Mi=Si;for(;Mi<Ti;){const Ui=Gn(Ni,Mi);Mi=Ui.headerEnd;const Hi={header:Ui,data:Ni};if(Pi.randomAccess||(Hi.start=Mi,Mi+=Ui.length,Hi.end=Mi),Ri.push(Hi),Ui.type===51)break}if(Pi.randomAccess)for(let Ui=0,Hi=Ri.length;Ui<Hi;Ui++)Ri[Ui].start=Mi,Mi+=Ri[Ui].header.length,Ri[Ui].end=Mi;return Ri}function Wn(Pi,Ni){return{width:(0,Ln.readUint32)(Pi,Ni),height:(0,Ln.readUint32)(Pi,Ni+4),x:(0,Ln.readUint32)(Pi,Ni+8),y:(0,Ln.readUint32)(Pi,Ni+12),combinationOperator:Pi[Ni+16]&7}}const ni=17;function li(Pi,Ni){const Si=Pi.header,Ti=Pi.data,Ri=Pi.end;let Mi=Pi.start,Ui,Hi,Li,Ei;switch(Si.type){case 0:const Bi={},Oi=(0,Ln.readUint16)(Ti,Mi);if(Bi.huffman=!!(Oi&1),Bi.refinement=!!(Oi&2),Bi.huffmanDHSelector=Oi>>2&3,Bi.huffmanDWSelector=Oi>>4&3,Bi.bitmapSizeSelector=Oi>>6&1,Bi.aggregationInstancesSelector=Oi>>7&1,Bi.bitmapCodingContextUsed=!!(Oi&256),Bi.bitmapCodingContextRetained=!!(Oi&512),Bi.template=Oi>>10&3,Bi.refinementTemplate=Oi>>12&1,Mi+=2,!Bi.huffman){for(Ei=Bi.template===0?4:1,Hi=[],Li=0;Li<Ei;Li++)Hi.push({x:(0,Ln.readInt8)(Ti,Mi),y:(0,Ln.readInt8)(Ti,Mi+1)}),Mi+=2;Bi.at=Hi}if(Bi.refinement&&!Bi.refinementTemplate){for(Hi=[],Li=0;Li<2;Li++)Hi.push({x:(0,Ln.readInt8)(Ti,Mi),y:(0,Ln.readInt8)(Ti,Mi+1)}),Mi+=2;Bi.refinementAt=Hi}Bi.numberOfExportedSymbols=(0,Ln.readUint32)(Ti,Mi),Mi+=4,Bi.numberOfNewSymbols=(0,Ln.readUint32)(Ti,Mi),Mi+=4,Ui=[Bi,Si.number,Si.referredTo,Ti,Mi,Ri];break;case 6:case 7:const Xi={};Xi.info=Wn(Ti,Mi),Mi+=ni;const Gi=(0,Ln.readUint16)(Ti,Mi);if(Mi+=2,Xi.huffman=!!(Gi&1),Xi.refinement=!!(Gi&2),Xi.logStripSize=Gi>>2&3,Xi.stripSize=1<<Xi.logStripSize,Xi.referenceCorner=Gi>>4&3,Xi.transposed=!!(Gi&64),Xi.combinationOperator=Gi>>7&3,Xi.defaultPixelValue=Gi>>9&1,Xi.dsOffset=Gi<<17>>27,Xi.refinementTemplate=Gi>>15&1,Xi.huffman){const us=(0,Ln.readUint16)(Ti,Mi);Mi+=2,Xi.huffmanFS=us&3,Xi.huffmanDS=us>>2&3,Xi.huffmanDT=us>>4&3,Xi.huffmanRefinementDW=us>>6&3,Xi.huffmanRefinementDH=us>>8&3,Xi.huffmanRefinementDX=us>>10&3,Xi.huffmanRefinementDY=us>>12&3,Xi.huffmanRefinementSizeSelector=!!(us&16384)}if(Xi.refinement&&!Xi.refinementTemplate){for(Hi=[],Li=0;Li<2;Li++)Hi.push({x:(0,Ln.readInt8)(Ti,Mi),y:(0,Ln.readInt8)(Ti,Mi+1)}),Mi+=2;Xi.refinementAt=Hi}Xi.numberOfSymbolInstances=(0,Ln.readUint32)(Ti,Mi),Mi+=4,Ui=[Xi,Si.referredTo,Ti,Mi,Ri];break;case 16:const qi={},ns=Ti[Mi++];qi.mmr=!!(ns&1),qi.template=ns>>1&3,qi.patternWidth=Ti[Mi++],qi.patternHeight=Ti[Mi++],qi.maxPatternIndex=(0,Ln.readUint32)(Ti,Mi),Mi+=4,Ui=[qi,Si.number,Ti,Mi,Ri];break;case 22:case 23:const is={};is.info=Wn(Ti,Mi),Mi+=ni;const as=Ti[Mi++];is.mmr=!!(as&1),is.template=as>>1&3,is.enableSkip=!!(as&8),is.combinationOperator=as>>4&7,is.defaultPixelValue=as>>7&1,is.gridWidth=(0,Ln.readUint32)(Ti,Mi),Mi+=4,is.gridHeight=(0,Ln.readUint32)(Ti,Mi),Mi+=4,is.gridOffsetX=(0,Ln.readUint32)(Ti,Mi)&4294967295,Mi+=4,is.gridOffsetY=(0,Ln.readUint32)(Ti,Mi)&4294967295,Mi+=4,is.gridVectorX=(0,Ln.readUint16)(Ti,Mi),Mi+=2,is.gridVectorY=(0,Ln.readUint16)(Ti,Mi),Mi+=2,Ui=[is,Si.referredTo,Ti,Mi,Ri];break;case 38:case 39:const hs={};hs.info=Wn(Ti,Mi),Mi+=ni;const Yi=Ti[Mi++];if(hs.mmr=!!(Yi&1),hs.template=Yi>>1&3,hs.prediction=!!(Yi&8),!hs.mmr){for(Ei=hs.template===0?4:1,Hi=[],Li=0;Li<Ei;Li++)Hi.push({x:(0,Ln.readInt8)(Ti,Mi),y:(0,Ln.readInt8)(Ti,Mi+1)}),Mi+=2;hs.at=Hi}Ui=[hs,Ti,Mi,Ri];break;case 48:const Vi={width:(0,Ln.readUint32)(Ti,Mi),height:(0,Ln.readUint32)(Ti,Mi+4),resolutionX:(0,Ln.readUint32)(Ti,Mi+8),resolutionY:(0,Ln.readUint32)(Ti,Mi+12)};Vi.height===4294967295&&delete Vi.height;const Zi=Ti[Mi+16];(0,Ln.readUint16)(Ti,Mi+17),Vi.lossless=!!(Zi&1),Vi.refinement=!!(Zi&2),Vi.defaultPixelValue=Zi>>2&1,Vi.combinationOperator=Zi>>3&3,Vi.requiresBuffer=!!(Zi&32),Vi.combinationOperatorOverride=!!(Zi&64),Ui=[Vi];break;case 49:break;case 50:break;case 51:break;case 53:Ui=[Si.number,Ti,Mi,Ri];break;case 62:break;default:throw new Tn(`segment type ${Si.typeName}(${Si.type}) is not implemented`)}const $i="on"+Si.typeName;$i in Ni&&Ni[$i].apply(Ni,Ui)}function Ai(Pi,Ni){for(let Si=0,Ti=Pi.length;Si<Ti;Si++)li(Pi[Si],Ni)}function gi(Pi){const Ni=new yi;for(let Si=0,Ti=Pi.length;Si<Ti;Si++){const Ri=Pi[Si],Mi=mi({},Ri.data,Ri.start,Ri.end);Ai(Mi,Ni)}return Ni.buffer}class yi{onPageInformation(Ni){this.currentPageInfo=Ni;const Si=Ni.width+7>>3,Ti=new Uint8ClampedArray(Si*Ni.height);Ni.defaultPixelValue&&Ti.fill(255),this.buffer=Ti}drawBitmap(Ni,Si){const Ti=this.currentPageInfo,Ri=Ni.width,Mi=Ni.height,Ui=Ti.width+7>>3,Hi=Ti.combinationOperatorOverride?Ni.combinationOperator:Ti.combinationOperator,Li=this.buffer,Ei=128>>(Ni.x&7);let $i=Ni.y*Ui+(Ni.x>>3),Bi,Oi,Xi,Gi;switch(Hi){case 0:for(Bi=0;Bi<Mi;Bi++){for(Xi=Ei,Gi=$i,Oi=0;Oi<Ri;Oi++)Si[Bi][Oi]&&(Li[Gi]|=Xi),Xi>>=1,Xi||(Xi=128,Gi++);$i+=Ui}break;case 2:for(Bi=0;Bi<Mi;Bi++){for(Xi=Ei,Gi=$i,Oi=0;Oi<Ri;Oi++)Si[Bi][Oi]&&(Li[Gi]^=Xi),Xi>>=1,Xi||(Xi=128,Gi++);$i+=Ui}break;default:throw new Tn(`operator ${Hi} is not supported`)}}onImmediateGenericRegion(Ni,Si,Ti,Ri){const Mi=Ni.info,Ui=new ui(Si,Ti,Ri),Hi=di(Ni.mmr,Mi.width,Mi.height,Ni.template,Ni.prediction,null,Ni.at,Ui);this.drawBitmap(Mi,Hi)}onImmediateLosslessGenericRegion(){this.onImmediateGenericRegion(...arguments)}onSymbolDictionary(Ni,Si,Ti,Ri,Mi,Ui){let Hi,Li;Ni.huffman&&(Hi=Fi(Ni,Ti,this.customTables),Li=new ci(Ri,Mi,Ui));let Ei=this.symbols;Ei||(this.symbols=Ei={});const $i=[];for(const Oi of Ti){const Xi=Ei[Oi];Xi&&$i.push(...Xi)}const Bi=new ui(Ri,Mi,Ui);Ei[Si]=wi(Ni.huffman,Ni.refinement,$i,Ni.numberOfNewSymbols,Ni.numberOfExportedSymbols,Hi,Ni.template,Ni.at,Ni.refinementTemplate,Ni.refinementAt,Bi,Li)}onImmediateTextRegion(Ni,Si,Ti,Ri,Mi){const Ui=Ni.info;let Hi,Li;const Ei=this.symbols,$i=[];for(const Gi of Si){const qi=Ei[Gi];qi&&$i.push(...qi)}const Bi=(0,Ln.log2)($i.length);Ni.huffman&&(Li=new ci(Ti,Ri,Mi),Hi=Ci(Ni,Si,this.customTables,$i.length,Li));const Oi=new ui(Ti,Ri,Mi),Xi=Jn(Ni.huffman,Ni.refinement,Ui.width,Ui.height,Ni.defaultPixelValue,Ni.numberOfSymbolInstances,Ni.stripSize,$i,Bi,Ni.transposed,Ni.dsOffset,Ni.referenceCorner,Ni.combinationOperator,Hi,Ni.refinementTemplate,Ni.refinementAt,Oi,Ni.logStripSize,Li);this.drawBitmap(Ui,Xi)}onImmediateLosslessTextRegion(){this.onImmediateTextRegion(...arguments)}onPatternDictionary(Ni,Si,Ti,Ri,Mi){let Ui=this.patterns;Ui||(this.patterns=Ui={});const Hi=new ui(Ti,Ri,Mi);Ui[Si]=pi(Ni.mmr,Ni.patternWidth,Ni.patternHeight,Ni.maxPatternIndex,Ni.template,Hi)}onImmediateHalftoneRegion(Ni,Si,Ti,Ri,Mi){const Ui=this.patterns[Si[0]],Hi=Ni.info,Li=new ui(Ti,Ri,Mi),Ei=Zn(Ni.mmr,Ui,Ni.template,Hi.width,Hi.height,Ni.defaultPixelValue,Ni.enableSkip,Ni.combinationOperator,Ni.gridWidth,Ni.gridHeight,Ni.gridOffsetX,Ni.gridOffsetY,Ni.gridVectorX,Ni.gridVectorY,Li);this.drawBitmap(Hi,Ei)}onImmediateLosslessHalftoneRegion(){this.onImmediateHalftoneRegion(...arguments)}onTables(Ni,Si,Ti,Ri){let Mi=this.customTables;Mi||(this.customTables=Mi={}),Mi[Ni]=ai(Si,Ti,Ri)}}class Ii{constructor(Ni){Ni.length===2?(this.isOOB=!0,this.rangeLow=0,this.prefixLength=Ni[0],this.rangeLength=0,this.prefixCode=Ni[1],this.isLowerRange=!1):(this.isOOB=!1,this.rangeLow=Ni[0],this.prefixLength=Ni[1],this.rangeLength=Ni[2],this.prefixCode=Ni[3],this.isLowerRange=Ni[4]==="lower")}}class xi{constructor(Ni){this.children=[],Ni?(this.isLeaf=!0,this.rangeLength=Ni.rangeLength,this.rangeLow=Ni.rangeLow,this.isLowerRange=Ni.isLowerRange,this.isOOB=Ni.isOOB):this.isLeaf=!1}buildTree(Ni,Si){const Ti=Ni.prefixCode>>Si&1;if(Si<=0)this.children[Ti]=new xi(Ni);else{let Ri=this.children[Ti];Ri||(this.children[Ti]=Ri=new xi(null)),Ri.buildTree(Ni,Si-1)}}decodeNode(Ni){if(this.isLeaf){if(this.isOOB)return null;const Ti=Ni.readBits(this.rangeLength);return this.rangeLow+(this.isLowerRange?-Ti:Ti)}const Si=this.children[Ni.readBit()];if(!Si)throw new Tn("invalid Huffman data");return Si.decodeNode(Ni)}}class Qn{constructor(Ni,Si){Si||this.assignPrefixCodes(Ni),this.rootNode=new xi(null);for(let Ti=0,Ri=Ni.length;Ti<Ri;Ti++){const Mi=Ni[Ti];Mi.prefixLength>0&&this.rootNode.buildTree(Mi,Mi.prefixLength-1)}}decode(Ni){return this.rootNode.decodeNode(Ni)}assignPrefixCodes(Ni){const Si=Ni.length;let Ti=0;for(let $i=0;$i<Si;$i++)Ti=Math.max(Ti,Ni[$i].prefixLength);const Ri=new Uint32Array(Ti+1);for(let $i=0;$i<Si;$i++)Ri[Ni[$i].prefixLength]++;let Mi=1,Ui=0,Hi,Li,Ei;for(Ri[0]=0;Mi<=Ti;){for(Ui=Ui+Ri[Mi-1]<<1,Hi=Ui,Li=0;Li<Si;)Ei=Ni[Li],Ei.prefixLength===Mi&&(Ei.prefixCode=Hi,Hi++),Li++;Mi++}}}function ai(Pi,Ni,Si){const Ti=Pi[Ni],Ri=(0,Ln.readUint32)(Pi,Ni+1)&4294967295,Mi=(0,Ln.readUint32)(Pi,Ni+5)&4294967295,Ui=new ci(Pi,Ni+9,Si),Hi=(Ti>>1&7)+1,Li=(Ti>>4&7)+1,Ei=[];let $i,Bi,Oi=Ri;do $i=Ui.readBits(Hi),Bi=Ui.readBits(Li),Ei.push(new Ii([Oi,$i,Bi,0])),Oi+=1<<Bi;while(Oi<Mi);return $i=Ui.readBits(Hi),Ei.push(new Ii([Ri-1,$i,32,0,"lower"])),$i=Ui.readBits(Hi),Ei.push(new Ii([Mi,$i,32,0])),Ti&1&&($i=Ui.readBits(Hi),Ei.push(new Ii([$i,0]))),new Qn(Ei,!1)}const Vn={};function Yn(Pi){let Ni=Vn[Pi];if(Ni)return Ni;let Si;switch(Pi){case 1:Si=[[0,1,4,0],[16,2,8,2],[272,3,16,6],[65808,3,32,7]];break;case 2:Si=[[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[75,6,32,62],[6,63]];break;case 3:Si=[[-256,8,8,254],[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[-257,8,32,255,"lower"],[75,7,32,126],[6,62]];break;case 4:Si=[[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[76,5,32,31]];break;case 5:Si=[[-255,7,8,126],[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[-256,7,32,127,"lower"],[76,6,32,62]];break;case 6:Si=[[-2048,5,10,28],[-1024,4,9,8],[-512,4,8,9],[-256,4,7,10],[-128,5,6,29],[-64,5,5,30],[-32,4,5,11],[0,2,7,0],[128,3,7,2],[256,3,8,3],[512,4,9,12],[1024,4,10,13],[-2049,6,32,62,"lower"],[2048,6,32,63]];break;case 7:Si=[[-1024,4,9,8],[-512,3,8,0],[-256,4,7,9],[-128,5,6,26],[-64,5,5,27],[-32,4,5,10],[0,4,5,11],[32,5,5,28],[64,5,6,29],[128,4,7,12],[256,3,8,1],[512,3,9,2],[1024,3,10,3],[-1025,5,32,30,"lower"],[2048,5,32,31]];break;case 8:Si=[[-15,8,3,252],[-7,9,1,508],[-5,8,1,253],[-3,9,0,509],[-2,7,0,124],[-1,4,0,10],[0,2,1,0],[2,5,0,26],[3,6,0,58],[4,3,4,4],[20,6,1,59],[22,4,4,11],[38,4,5,12],[70,5,6,27],[134,5,7,28],[262,6,7,60],[390,7,8,125],[646,6,10,61],[-16,9,32,510,"lower"],[1670,9,32,511],[2,1]];break;case 9:Si=[[-31,8,4,252],[-15,9,2,508],[-11,8,2,253],[-7,9,1,509],[-5,7,1,124],[-3,4,1,10],[-1,3,1,2],[1,3,1,3],[3,5,1,26],[5,6,1,58],[7,3,5,4],[39,6,2,59],[43,4,5,11],[75,4,6,12],[139,5,7,27],[267,5,8,28],[523,6,8,60],[779,7,9,125],[1291,6,11,61],[-32,9,32,510,"lower"],[3339,9,32,511],[2,0]];break;case 10:Si=[[-21,7,4,122],[-5,8,0,252],[-4,7,0,123],[-3,5,0,24],[-2,2,2,0],[2,5,0,25],[3,6,0,54],[4,7,0,124],[5,8,0,253],[6,2,6,1],[70,5,5,26],[102,6,5,55],[134,6,6,56],[198,6,7,57],[326,6,8,58],[582,6,9,59],[1094,6,10,60],[2118,7,11,125],[-22,8,32,254,"lower"],[4166,8,32,255],[2,2]];break;case 11:Si=[[1,1,0,0],[2,2,1,2],[4,4,0,12],[5,4,1,13],[7,5,1,28],[9,5,2,29],[13,6,2,60],[17,7,2,122],[21,7,3,123],[29,7,4,124],[45,7,5,125],[77,7,6,126],[141,7,32,127]];break;case 12:Si=[[1,1,0,0],[2,2,0,2],[3,3,1,6],[5,5,0,28],[6,5,1,29],[8,6,1,60],[10,7,0,122],[11,7,1,123],[13,7,2,124],[17,7,3,125],[25,7,4,126],[41,8,5,254],[73,8,32,255]];break;case 13:Si=[[1,1,0,0],[2,3,0,4],[3,4,0,12],[4,5,0,28],[5,4,1,13],[7,3,3,5],[15,6,1,58],[17,6,2,59],[21,6,3,60],[29,6,4,61],[45,6,5,62],[77,7,6,126],[141,7,32,127]];break;case 14:Si=[[-2,3,0,4],[-1,3,0,5],[0,1,0,0],[1,3,0,6],[2,3,0,7]];break;case 15:Si=[[-24,7,4,124],[-8,6,2,60],[-4,5,1,28],[-2,4,0,12],[-1,3,0,4],[0,1,0,0],[1,3,0,5],[2,4,0,13],[3,5,1,29],[5,6,2,61],[9,7,4,125],[-25,7,32,126,"lower"],[25,7,32,127]];break;default:throw new Tn(`standard table B.${Pi} does not exist`)}for(let Ti=0,Ri=Si.length;Ti<Ri;Ti++)Si[Ti]=new Ii(Si[Ti]);return Ni=new Qn(Si,!0),Vn[Pi]=Ni,Ni}class ci{constructor(Ni,Si,Ti){this.data=Ni,this.start=Si,this.end=Ti,this.position=Si,this.shift=-1,this.currentByte=0}readBit(){if(this.shift<0){if(this.position>=this.end)throw new Tn("end of data while reading bit");this.currentByte=this.data[this.position++],this.shift=7}const Ni=this.currentByte>>this.shift&1;return this.shift--,Ni}readBits(Ni){let Si=0,Ti;for(Ti=Ni-1;Ti>=0;Ti--)Si|=this.readBit()<<Ti;return Si}byteAlign(){this.shift=-1}next(){return this.position>=this.end?-1:this.data[this.position++]}}function bi(Pi,Ni,Si){let Ti=0;for(let Ri=0,Mi=Ni.length;Ri<Mi;Ri++){const Ui=Si[Ni[Ri]];if(Ui){if(Pi===Ti)return Ui;Ti++}}throw new Tn("can't find custom Huffman table")}function Ci(Pi,Ni,Si,Ti,Ri){const Mi=[];for(let Oi=0;Oi<=34;Oi++){const Xi=Ri.readBits(4);Mi.push(new Ii([Oi,Xi,0,0]))}const Ui=new Qn(Mi,!1);Mi.length=0;for(let Oi=0;Oi<Ti;){const Xi=Ui.decode(Ri);if(Xi>=32){let Gi,qi,ns;switch(Xi){case 32:if(Oi===0)throw new Tn("no previous value in symbol ID table");qi=Ri.readBits(2)+3,Gi=Mi[Oi-1].prefixLength;break;case 33:qi=Ri.readBits(3)+3,Gi=0;break;case 34:qi=Ri.readBits(7)+11,Gi=0;break;default:throw new Tn("invalid code length in symbol ID table")}for(ns=0;ns<qi;ns++)Mi.push(new Ii([Oi,Gi,0,0])),Oi++}else Mi.push(new Ii([Oi,Xi,0,0])),Oi++}Ri.byteAlign();const Hi=new Qn(Mi,!1);let Li=0,Ei,$i,Bi;switch(Pi.huffmanFS){case 0:case 1:Ei=Yn(Pi.huffmanFS+6);break;case 3:Ei=bi(Li,Ni,Si),Li++;break;default:throw new Tn("invalid Huffman FS selector")}switch(Pi.huffmanDS){case 0:case 1:case 2:$i=Yn(Pi.huffmanDS+8);break;case 3:$i=bi(Li,Ni,Si),Li++;break;default:throw new Tn("invalid Huffman DS selector")}switch(Pi.huffmanDT){case 0:case 1:case 2:Bi=Yn(Pi.huffmanDT+11);break;case 3:Bi=bi(Li,Ni,Si),Li++;break;default:throw new Tn("invalid Huffman DT selector")}if(Pi.refinement)throw new Tn("refinement with Huffman is not supported");return{symbolIDTable:Hi,tableFirstS:Ei,tableDeltaS:$i,tableDeltaT:Bi}}function Fi(Pi,Ni,Si){let Ti=0,Ri,Mi;switch(Pi.huffmanDHSelector){case 0:case 1:Ri=Yn(Pi.huffmanDHSelector+4);break;case 3:Ri=bi(Ti,Ni,Si),Ti++;break;default:throw new Tn("invalid Huffman DH selector")}switch(Pi.huffmanDWSelector){case 0:case 1:Mi=Yn(Pi.huffmanDWSelector+2);break;case 3:Mi=bi(Ti,Ni,Si),Ti++;break;default:throw new Tn("invalid Huffman DW selector")}let Ui,Hi;return Pi.bitmapSizeSelector?(Ui=bi(Ti,Ni,Si),Ti++):Ui=Yn(1),Pi.aggregationInstancesSelector?Hi=bi(Ti,Ni,Si):Hi=Yn(1),{tableDeltaHeight:Ri,tableDeltaWidth:Mi,tableBitmapSize:Ui,tableAggregateInstances:Hi}}function zi(Pi,Ni,Si){const Ti=[];for(let Ri=0;Ri<Si;Ri++){const Mi=new Uint8Array(Ni);Ti.push(Mi);for(let Ui=0;Ui<Ni;Ui++)Mi[Ui]=Pi.readBit();Pi.byteAlign()}return Ti}function _i(Pi,Ni,Si,Ti){const Ri={K:-1,Columns:Ni,Rows:Si,BlackIs1:!0,EndOfBlock:Ti},Mi=new Cn.CCITTFaxDecoder(Pi,Ri),Ui=[];let Hi,Li=!1;for(let Ei=0;Ei<Si;Ei++){const $i=new Uint8Array(Ni);Ui.push($i);let Bi=-1;for(let Oi=0;Oi<Ni;Oi++)Bi<0&&(Hi=Mi.readNextChar(),Hi===-1&&(Hi=0,Li=!0),Bi=7),$i[Oi]=Hi>>Bi&1,Bi--}if(Ti&&!Li)for(let $i=0;$i<5&&Mi.readNextChar()!==-1;$i++);return Ui}class ji{parseChunks(Ni){return gi(Ni)}parse(Ni){throw new Error("Not implemented: Jbig2Image.parse")}}Mn.Jbig2Image=ji},(oi,Mn)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.ArithmeticDecoder=void 0;const ti=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];class In{constructor(jn,Cn,Tn){this.data=jn,this.bp=Cn,this.dataEnd=Tn,this.chigh=jn[Cn],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}byteIn(){const jn=this.data;let Cn=this.bp;jn[Cn]===255?jn[Cn+1]>143?(this.clow+=65280,this.ct=8):(Cn++,this.clow+=jn[Cn]<<9,this.ct=7,this.bp=Cn):(Cn++,this.clow+=Cn<this.dataEnd?jn[Cn]<<8:65280,this.ct=8,this.bp=Cn),this.clow>65535&&(this.chigh+=this.clow>>16,this.clow&=65535)}readBit(jn,Cn){let Tn=jn[Cn]>>1,Rn=jn[Cn]&1;const ui=ti[Tn],si=ui.qe;let ei,Bn=this.a-si;if(this.chigh<si)Bn<si?(Bn=si,ei=Rn,Tn=ui.nmps):(Bn=si,ei=1^Rn,ui.switchFlag===1&&(Rn=ei),Tn=ui.nlps);else{if(this.chigh-=si,Bn&32768)return this.a=Bn,Rn;Bn<si?(ei=1^Rn,ui.switchFlag===1&&(Rn=ei),Tn=ui.nlps):(ei=Rn,Tn=ui.nmps)}do this.ct===0&&this.byteIn(),Bn<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--;while(!(Bn&32768));return this.a=Bn,jn[Cn]=Tn<<1|Rn,ei}}Mn.ArithmeticDecoder=In},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.JpegStream=void 0;var In=ti(18),Ln=ti(4),jn=ti(27),Cn=ti(2);class Tn extends In.DecodeStream{constructor(ui,si,ei){let Bn;for(;(Bn=ui.getByte())!==-1;)if(Bn===255){ui.skip(-1);break}super(si),this.stream=ui,this.dict=ui.dict,this.maybeLength=si,this.params=ei}get bytes(){return(0,Cn.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))}ensureBuffer(ui){}readBlock(){if(this.eof)return;const ui={decodeTransform:void 0,colorTransform:void 0},si=this.dict.getArray("D","Decode");if((this.forceRGBA||this.forceRGB)&&Array.isArray(si)){const Nn=this.dict.get("BPC","BitsPerComponent")||8,Hn=si.length,On=new Int32Array(Hn);let hi=!1;const Xn=(1<<Nn)-1;for(let ii=0;ii<Hn;ii+=2)On[ii]=(si[ii+1]-si[ii])*256|0,On[ii+1]=si[ii]*Xn|0,(On[ii]!==256||On[ii+1]!==0)&&(hi=!0);hi&&(ui.decodeTransform=On)}if(this.params instanceof Ln.Dict){const Nn=this.params.get("ColorTransform");Number.isInteger(Nn)&&(ui.colorTransform=Nn)}const ei=new jn.JpegImage(ui);ei.parse(this.bytes);const Bn=ei.getData({width:this.drawWidth,height:this.drawHeight,forceRGBA:this.forceRGBA,forceRGB:this.forceRGB,isSourcePDF:!0});this.buffer=Bn,this.bufferLength=Bn.length,this.eof=!0}}Mn.JpegStream=Tn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.JpegImage=void 0;var In=ti(2),Ln=ti(28),jn=ti(3);class Cn extends In.BaseException{constructor(Gn){super(`JPEG error: ${Gn}`,"JpegError")}}class Tn extends In.BaseException{constructor(Gn,mi){super(Gn,"DNLMarkerError"),this.scanLines=mi}}class Rn extends In.BaseException{constructor(Gn){super(Gn,"EOIMarkerError")}}const ui=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),si=4017,ei=799,Bn=3406,Nn=2276,Hn=1567,On=3784,hi=5793,Xn=2896;function ii(Zn,Gn){let mi=0,Wn,ni,li=16;for(;li>0&&!Zn[li-1];)li--;const Ai=[{children:[],index:0}];let gi=Ai[0],yi;for(Wn=0;Wn<li;Wn++){for(ni=0;ni<Zn[Wn];ni++){for(gi=Ai.pop(),gi.children[gi.index]=Gn[mi];gi.index>0;)gi=Ai.pop();for(gi.index++,Ai.push(gi);Ai.length<=Wn;)Ai.push(yi={children:[],index:0}),gi.children[gi.index]=yi.children,gi=yi;mi++}Wn+1<li&&(Ai.push(yi={children:[],index:0}),gi.children[gi.index]=yi.children,gi=yi)}return Ai[0].children}function ri(Zn,Gn,mi){return 64*((Zn.blocksPerLine+1)*Gn+mi)}function di(Zn,Gn,mi,Wn,ni,li,Ai,gi,yi,Ii=!1){const xi=mi.mcusPerLine,Qn=mi.progressive,ai=Gn;let Vn=0,Yn=0;function ci(){if(Yn>0)return Yn--,Vn>>Yn&1;if(Vn=Zn[Gn++],Vn===255){const Yi=Zn[Gn++];if(Yi){if(Yi===220&&Ii){Gn+=2;const Vi=(0,jn.readUint16)(Zn,Gn);if(Gn+=2,Vi>0&&Vi!==mi.scanLines)throw new Tn("Found DNL marker (0xFFDC) while parsing scan data",Vi)}else if(Yi===217){if(Ii){const Vi=Mi*(mi.precision===8?8:0);if(Vi>0&&Math.round(mi.scanLines/Vi)>=5)throw new Tn("Found EOI marker (0xFFD9) while parsing scan data, possibly caused by incorrect `scanLines` parameter",Vi)}throw new Rn("Found EOI marker (0xFFD9) while parsing scan data")}throw new Cn(`unexpected marker ${(Vn<<8|Yi).toString(16)}`)}}return Yn=7,Vn>>>7}function bi(Yi){let Vi=Yi;for(;;){switch(Vi=Vi[ci()],typeof Vi){case"number":return Vi;case"object":continue}throw new Cn("invalid huffman sequence")}}function Ci(Yi){let Vi=0;for(;Yi>0;)Vi=Vi<<1|ci(),Yi--;return Vi}function Fi(Yi){if(Yi===1)return ci()===1?1:-1;const Vi=Ci(Yi);return Vi>=1<<Yi-1?Vi:Vi+(-1<<Yi)+1}function zi(Yi,Vi){const Zi=bi(Yi.huffmanTableDC),us=Zi===0?0:Fi(Zi);Yi.blockData[Vi]=Yi.pred+=us;let ts=1;for(;ts<64;){const es=bi(Yi.huffmanTableAC),rs=es&15,ss=es>>4;if(rs===0){if(ss<15)break;ts+=16;continue}ts+=ss;const os=ui[ts];Yi.blockData[Vi+os]=Fi(rs),ts++}}function _i(Yi,Vi){const Zi=bi(Yi.huffmanTableDC),us=Zi===0?0:Fi(Zi)<<yi;Yi.blockData[Vi]=Yi.pred+=us}function ji(Yi,Vi){Yi.blockData[Vi]|=ci()<<yi}let Pi=0;function Ni(Yi,Vi){if(Pi>0){Pi--;return}let Zi=li;const us=Ai;for(;Zi<=us;){const ts=bi(Yi.huffmanTableAC),es=ts&15,rs=ts>>4;if(es===0){if(rs<15){Pi=Ci(rs)+(1<<rs)-1;break}Zi+=16;continue}Zi+=rs;const ss=ui[Zi];Yi.blockData[Vi+ss]=Fi(es)*(1<<yi),Zi++}}let Si=0,Ti;function Ri(Yi,Vi){let Zi=li;const us=Ai;let ts=0,es,rs;for(;Zi<=us;){const ss=Vi+ui[Zi],os=Yi.blockData[ss]<0?-1:1;switch(Si){case 0:if(rs=bi(Yi.huffmanTableAC),es=rs&15,ts=rs>>4,es===0)ts<15?(Pi=Ci(ts)+(1<<ts),Si=4):(ts=16,Si=1);else{if(es!==1)throw new Cn("invalid ACn encoding");Ti=Fi(es),Si=ts?2:3}continue;case 1:case 2:Yi.blockData[ss]?Yi.blockData[ss]+=os*(ci()<<yi):(ts--,ts===0&&(Si=Si===2?3:0));break;case 3:Yi.blockData[ss]?Yi.blockData[ss]+=os*(ci()<<yi):(Yi.blockData[ss]=Ti<<yi,Si=0);break;case 4:Yi.blockData[ss]&&(Yi.blockData[ss]+=os*(ci()<<yi));break}Zi++}Si===4&&(Pi--,Pi===0&&(Si=0))}let Mi=0;function Ui(Yi,Vi,Zi,us,ts){const es=Zi/xi|0,rs=Zi%xi;Mi=es*Yi.v+us;const ss=rs*Yi.h+ts,os=ri(Yi,Mi,ss);Vi(Yi,os)}function Hi(Yi,Vi,Zi){Mi=Zi/Yi.blocksPerLine|0;const us=Zi%Yi.blocksPerLine,ts=ri(Yi,Mi,us);Vi(Yi,ts)}const Li=Wn.length;let Ei,$i,Bi,Oi,Xi,Gi;Qn?li===0?Gi=gi===0?_i:ji:Gi=gi===0?Ni:Ri:Gi=zi;let qi=0,ns;const is=Li===1?Wn[0].blocksPerLine*Wn[0].blocksPerColumn:xi*mi.mcusPerColumn;let as,hs;for(;qi<=is;){const Yi=ni?Math.min(is-qi,ni):is;if(Yi>0){for($i=0;$i<Li;$i++)Wn[$i].pred=0;if(Pi=0,Li===1)for(Ei=Wn[0],Xi=0;Xi<Yi;Xi++)Hi(Ei,Gi,qi),qi++;else for(Xi=0;Xi<Yi;Xi++){for($i=0;$i<Li;$i++)for(Ei=Wn[$i],as=Ei.h,hs=Ei.v,Bi=0;Bi<hs;Bi++)for(Oi=0;Oi<as;Oi++)Ui(Ei,Gi,qi,Bi,Oi);qi++}}if(Yn=0,ns=Jn(Zn,Gn),!ns)break;if(ns.invalid){const Vi=Yi>0?"unexpected":"excessive";(0,In.warn)(`decodeScan - ${Vi} MCU data, current marker is: ${ns.invalid}`),Gn=ns.offset}if(ns.marker>=65488&&ns.marker<=65495)Gn+=2;else break}return Gn-ai}function fi(Zn,Gn,mi){const Wn=Zn.quantizationTable,ni=Zn.blockData;let li,Ai,gi,yi,Ii,xi,Qn,ai,Vn,Yn,ci,bi,Ci,Fi,zi,_i,ji;if(!Wn)throw new Cn("missing required Quantization Table.");for(let Pi=0;Pi<64;Pi+=8){if(Vn=ni[Gn+Pi],Yn=ni[Gn+Pi+1],ci=ni[Gn+Pi+2],bi=ni[Gn+Pi+3],Ci=ni[Gn+Pi+4],Fi=ni[Gn+Pi+5],zi=ni[Gn+Pi+6],_i=ni[Gn+Pi+7],Vn*=Wn[Pi],!(Yn|ci|bi|Ci|Fi|zi|_i)){ji=hi*Vn+512>>10,mi[Pi]=ji,mi[Pi+1]=ji,mi[Pi+2]=ji,mi[Pi+3]=ji,mi[Pi+4]=ji,mi[Pi+5]=ji,mi[Pi+6]=ji,mi[Pi+7]=ji;continue}Yn*=Wn[Pi+1],ci*=Wn[Pi+2],bi*=Wn[Pi+3],Ci*=Wn[Pi+4],Fi*=Wn[Pi+5],zi*=Wn[Pi+6],_i*=Wn[Pi+7],li=hi*Vn+128>>8,Ai=hi*Ci+128>>8,gi=ci,yi=zi,Ii=Xn*(Yn-_i)+128>>8,ai=Xn*(Yn+_i)+128>>8,xi=bi<<4,Qn=Fi<<4,li=li+Ai+1>>1,Ai=li-Ai,ji=gi*On+yi*Hn+128>>8,gi=gi*Hn-yi*On+128>>8,yi=ji,Ii=Ii+Qn+1>>1,Qn=Ii-Qn,ai=ai+xi+1>>1,xi=ai-xi,li=li+yi+1>>1,yi=li-yi,Ai=Ai+gi+1>>1,gi=Ai-gi,ji=Ii*Nn+ai*Bn+2048>>12,Ii=Ii*Bn-ai*Nn+2048>>12,ai=ji,ji=xi*ei+Qn*si+2048>>12,xi=xi*si-Qn*ei+2048>>12,Qn=ji,mi[Pi]=li+ai,mi[Pi+7]=li-ai,mi[Pi+1]=Ai+Qn,mi[Pi+6]=Ai-Qn,mi[Pi+2]=gi+xi,mi[Pi+5]=gi-xi,mi[Pi+3]=yi+Ii,mi[Pi+4]=yi-Ii}for(let Pi=0;Pi<8;++Pi){if(Vn=mi[Pi],Yn=mi[Pi+8],ci=mi[Pi+16],bi=mi[Pi+24],Ci=mi[Pi+32],Fi=mi[Pi+40],zi=mi[Pi+48],_i=mi[Pi+56],!(Yn|ci|bi|Ci|Fi|zi|_i)){ji=hi*Vn+8192>>14,ji<-2040?ji=0:ji>=2024?ji=255:ji=ji+2056>>4,ni[Gn+Pi]=ji,ni[Gn+Pi+8]=ji,ni[Gn+Pi+16]=ji,ni[Gn+Pi+24]=ji,ni[Gn+Pi+32]=ji,ni[Gn+Pi+40]=ji,ni[Gn+Pi+48]=ji,ni[Gn+Pi+56]=ji;continue}li=hi*Vn+2048>>12,Ai=hi*Ci+2048>>12,gi=ci,yi=zi,Ii=Xn*(Yn-_i)+2048>>12,ai=Xn*(Yn+_i)+2048>>12,xi=bi,Qn=Fi,li=(li+Ai+1>>1)+4112,Ai=li-Ai,ji=gi*On+yi*Hn+2048>>12,gi=gi*Hn-yi*On+2048>>12,yi=ji,Ii=Ii+Qn+1>>1,Qn=Ii-Qn,ai=ai+xi+1>>1,xi=ai-xi,li=li+yi+1>>1,yi=li-yi,Ai=Ai+gi+1>>1,gi=Ai-gi,ji=Ii*Nn+ai*Bn+2048>>12,Ii=Ii*Bn-ai*Nn+2048>>12,ai=ji,ji=xi*ei+Qn*si+2048>>12,xi=xi*si-Qn*ei+2048>>12,Qn=ji,Vn=li+ai,_i=li-ai,Yn=Ai+Qn,zi=Ai-Qn,ci=gi+xi,Fi=gi-xi,bi=yi+Ii,Ci=yi-Ii,Vn<16?Vn=0:Vn>=4080?Vn=255:Vn>>=4,Yn<16?Yn=0:Yn>=4080?Yn=255:Yn>>=4,ci<16?ci=0:ci>=4080?ci=255:ci>>=4,bi<16?bi=0:bi>=4080?bi=255:bi>>=4,Ci<16?Ci=0:Ci>=4080?Ci=255:Ci>>=4,Fi<16?Fi=0:Fi>=4080?Fi=255:Fi>>=4,zi<16?zi=0:zi>=4080?zi=255:zi>>=4,_i<16?_i=0:_i>=4080?_i=255:_i>>=4,ni[Gn+Pi]=Vn,ni[Gn+Pi+8]=Yn,ni[Gn+Pi+16]=ci,ni[Gn+Pi+24]=bi,ni[Gn+Pi+32]=Ci,ni[Gn+Pi+40]=Fi,ni[Gn+Pi+48]=zi,ni[Gn+Pi+56]=_i}}function wi(Zn,Gn){const mi=Gn.blocksPerLine,Wn=Gn.blocksPerColumn,ni=new Int16Array(64);for(let li=0;li<Wn;li++)for(let Ai=0;Ai<mi;Ai++){const gi=ri(Gn,li,Ai);fi(Gn,gi,ni)}return Gn.blockData}function Jn(Zn,Gn,mi=Gn){const Wn=Zn.length-1;let ni=mi<Gn?mi:Gn;if(Gn>=Wn)return null;const li=(0,jn.readUint16)(Zn,Gn);if(li>=65472&&li<=65534)return{invalid:null,marker:li,offset:Gn};let Ai=(0,jn.readUint16)(Zn,ni);for(;!(Ai>=65472&&Ai<=65534);){if(++ni>=Wn)return null;Ai=(0,jn.readUint16)(Zn,ni)}return{invalid:li.toString(16),marker:Ai,offset:ni}}class pi{constructor({decodeTransform:Gn=null,colorTransform:mi=-1}={}){this._decodeTransform=Gn,this._colorTransform=mi}parse(Gn,{dnlScanLines:mi=null}={}){function Wn(){const ci=(0,jn.readUint16)(Gn,li);li+=2;let bi=li+ci-2;const Ci=Jn(Gn,bi,li);Ci!=null&&Ci.invalid&&((0,In.warn)("readDataBlock - incorrect length, current marker is: "+Ci.invalid),bi=Ci.offset);const Fi=Gn.subarray(li,bi);return li+=Fi.length,Fi}function ni(ci){const bi=Math.ceil(ci.samplesPerLine/8/ci.maxH),Ci=Math.ceil(ci.scanLines/8/ci.maxV);for(const Fi of ci.components){const zi=Math.ceil(Math.ceil(ci.samplesPerLine/8)*Fi.h/ci.maxH),_i=Math.ceil(Math.ceil(ci.scanLines/8)*Fi.v/ci.maxV),ji=bi*Fi.h,Ni=64*(Ci*Fi.v)*(ji+1);Fi.blockData=new Int16Array(Ni),Fi.blocksPerLine=zi,Fi.blocksPerColumn=_i}ci.mcusPerLine=bi,ci.mcusPerColumn=Ci}let li=0,Ai=null,gi=null,yi,Ii,xi=0;const Qn=[],ai=[],Vn=[];let Yn=(0,jn.readUint16)(Gn,li);if(li+=2,Yn!==65496)throw new Cn("SOI not found");Yn=(0,jn.readUint16)(Gn,li),li+=2;e:for(;Yn!==65497;){let ci,bi,Ci;switch(Yn){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:const Fi=Wn();Yn===65504&&Fi[0]===74&&Fi[1]===70&&Fi[2]===73&&Fi[3]===70&&Fi[4]===0&&(Ai={version:{major:Fi[5],minor:Fi[6]},densityUnits:Fi[7],xDensity:Fi[8]<<8|Fi[9],yDensity:Fi[10]<<8|Fi[11],thumbWidth:Fi[12],thumbHeight:Fi[13],thumbData:Fi.subarray(14,14+3*Fi[12]*Fi[13])}),Yn===65518&&Fi[0]===65&&Fi[1]===100&&Fi[2]===111&&Fi[3]===98&&Fi[4]===101&&(gi={version:Fi[5]<<8|Fi[6],flags0:Fi[7]<<8|Fi[8],flags1:Fi[9]<<8|Fi[10],transformCode:Fi[11]});break;case 65499:const zi=(0,jn.readUint16)(Gn,li);li+=2;const _i=zi+li-2;let ji;for(;li<_i;){const Oi=Gn[li++],Xi=new Uint16Array(64);if(Oi>>4)if(Oi>>4===1)for(bi=0;bi<64;bi++)ji=ui[bi],Xi[ji]=(0,jn.readUint16)(Gn,li),li+=2;else throw new Cn("DQT - invalid table spec");else for(bi=0;bi<64;bi++)ji=ui[bi],Xi[ji]=Gn[li++];Qn[Oi&15]=Xi}break;case 65472:case 65473:case 65474:if(yi)throw new Cn("Only single frame JPEGs supported");li+=2,yi={},yi.extended=Yn===65473,yi.progressive=Yn===65474,yi.precision=Gn[li++];const Pi=(0,jn.readUint16)(Gn,li);li+=2,yi.scanLines=mi||Pi,yi.samplesPerLine=(0,jn.readUint16)(Gn,li),li+=2,yi.components=[],yi.componentIds={};const Ni=Gn[li++];let Si=0,Ti=0;for(ci=0;ci<Ni;ci++){const Oi=Gn[li],Xi=Gn[li+1]>>4,Gi=Gn[li+1]&15;Si<Xi&&(Si=Xi),Ti<Gi&&(Ti=Gi);const qi=Gn[li+2];Ci=yi.components.push({h:Xi,v:Gi,quantizationId:qi,quantizationTable:null}),yi.componentIds[Oi]=Ci-1,li+=3}yi.maxH=Si,yi.maxV=Ti,ni(yi);break;case 65476:const Ri=(0,jn.readUint16)(Gn,li);for(li+=2,ci=2;ci<Ri;){const Oi=Gn[li++],Xi=new Uint8Array(16);let Gi=0;for(bi=0;bi<16;bi++,li++)Gi+=Xi[bi]=Gn[li];const qi=new Uint8Array(Gi);for(bi=0;bi<Gi;bi++,li++)qi[bi]=Gn[li];ci+=17+Gi,(Oi>>4?ai:Vn)[Oi&15]=ii(Xi,qi)}break;case 65501:li+=2,Ii=(0,jn.readUint16)(Gn,li),li+=2;break;case 65498:const Mi=++xi===1&&!mi;li+=2;const Ui=Gn[li++],Hi=[];for(ci=0;ci<Ui;ci++){const Oi=Gn[li++],Xi=yi.componentIds[Oi],Gi=yi.components[Xi];Gi.index=Oi;const qi=Gn[li++];Gi.huffmanTableDC=Vn[qi>>4],Gi.huffmanTableAC=ai[qi&15],Hi.push(Gi)}const Li=Gn[li++],Ei=Gn[li++],$i=Gn[li++];try{const Oi=di(Gn,li,yi,Hi,Ii,Li,Ei,$i>>4,$i&15,Mi);li+=Oi}catch(Oi){if(Oi instanceof Tn)return(0,In.warn)(`${Oi.message} -- attempting to re-parse the JPEG image.`),this.parse(Gn,{dnlScanLines:Oi.scanLines});if(Oi instanceof Rn){(0,In.warn)(`${Oi.message} -- ignoring the rest of the image data.`);break e}throw Oi}break;case 65500:li+=4;break;case 65535:Gn[li]!==255&&li--;break;default:const Bi=Jn(Gn,li-2,li-3);if(Bi!=null&&Bi.invalid){(0,In.warn)("JpegImage.parse - unexpected data, current marker is: "+Bi.invalid),li=Bi.offset;break}if(!Bi||li>=Gn.length-1){(0,In.warn)("JpegImage.parse - reached the end of the image data without finding an EOI marker (0xFFD9).");break e}throw new Cn("JpegImage.parse - unknown marker: "+Yn.toString(16))}Yn=(0,jn.readUint16)(Gn,li),li+=2}this.width=yi.samplesPerLine,this.height=yi.scanLines,this.jfif=Ai,this.adobe=gi,this.components=[];for(const ci of yi.components){const bi=Qn[ci.quantizationId];bi&&(ci.quantizationTable=bi),this.components.push({index:ci.index,output:wi(yi,ci),scaleX:ci.h/yi.maxH,scaleY:ci.v/yi.maxV,blocksPerLine:ci.blocksPerLine,blocksPerColumn:ci.blocksPerColumn})}this.numComponents=this.components.length}_getLinearizedBlockData(Gn,mi,Wn=!1){const ni=this.width/Gn,li=this.height/mi;let Ai,gi,yi,Ii,xi,Qn,ai,Vn,Yn,ci,bi=0,Ci;const Fi=this.components.length,zi=Gn*mi*Fi,_i=new Uint8ClampedArray(zi),ji=new Uint32Array(Gn),Pi=4294967288;let Ni;for(ai=0;ai<Fi;ai++){if(Ai=this.components[ai],gi=Ai.scaleX*ni,yi=Ai.scaleY*li,bi=ai,Ci=Ai.output,Ii=Ai.blocksPerLine+1<<3,gi!==Ni){for(xi=0;xi<Gn;xi++)Vn=0|xi*gi,ji[xi]=(Vn&Pi)<<3|Vn&7;Ni=gi}for(Qn=0;Qn<mi;Qn++)for(Vn=0|Qn*yi,ci=Ii*(Vn&Pi)|(Vn&7)<<3,xi=0;xi<Gn;xi++)_i[bi]=Ci[ci+ji[xi]],bi+=Fi}let Si=this._decodeTransform;if(!Wn&&Fi===4&&!Si&&(Si=new Int32Array([-256,255,-256,255,-256,255,-256,255])),Si)for(ai=0;ai<zi;)for(Vn=0,Yn=0;Vn<Fi;Vn++,ai++,Yn+=2)_i[ai]=(_i[ai]*Si[Yn]>>8)+Si[Yn+1];return _i}get _isColorConversionNeeded(){return this.adobe?!!this.adobe.transformCode:this.numComponents===3?this._colorTransform===0?!1:!(this.components[0].index===82&&this.components[1].index===71&&this.components[2].index===66):this._colorTransform===1}_convertYccToRgb(Gn){let mi,Wn,ni;for(let li=0,Ai=Gn.length;li<Ai;li+=3)mi=Gn[li],Wn=Gn[li+1],ni=Gn[li+2],Gn[li]=mi-179.456+1.402*ni,Gn[li+1]=mi+135.459-.344*Wn-.714*ni,Gn[li+2]=mi-226.816+1.772*Wn;return Gn}_convertYccToRgba(Gn,mi){for(let Wn=0,ni=0,li=Gn.length;Wn<li;Wn+=3,ni+=4){const Ai=Gn[Wn],gi=Gn[Wn+1],yi=Gn[Wn+2];mi[ni]=Ai-179.456+1.402*yi,mi[ni+1]=Ai+135.459-.344*gi-.714*yi,mi[ni+2]=Ai-226.816+1.772*gi,mi[ni+3]=255}return mi}_convertYcckToRgb(Gn){let mi,Wn,ni,li,Ai=0;for(let gi=0,yi=Gn.length;gi<yi;gi+=4)mi=Gn[gi],Wn=Gn[gi+1],ni=Gn[gi+2],li=Gn[gi+3],Gn[Ai++]=-122.67195406894+Wn*(-660635669420364e-19*Wn+.000437130475926232*ni-54080610064599e-18*mi+.00048449797120281*li-.154362151871126)+ni*(-.000957964378445773*ni+.000817076911346625*mi-.00477271405408747*li+1.53380253221734)+mi*(.000961250184130688*mi-.00266257332283933*li+.48357088451265)+li*(-.000336197177618394*li+.484791561490776),Gn[Ai++]=107.268039397724+Wn*(219927104525741e-19*Wn-.000640992018297945*ni+.000659397001245577*mi+.000426105652938837*li-.176491792462875)+ni*(-.000778269941513683*ni+.00130872261408275*mi+.000770482631801132*li-.151051492775562)+mi*(.00126935368114843*mi-.00265090189010898*li+.25802910206845)+li*(-.000318913117588328*li-.213742400323665),Gn[Ai++]=-20.810012546947+Wn*(-.000570115196973677*Wn-263409051004589e-19*ni+.0020741088115012*mi-.00288260236853442*li+.814272968359295)+ni*(-153496057440975e-19*ni-.000132689043961446*mi+.000560833691242812*li-.195152027534049)+mi*(.00174418132927582*mi-.00255243321439347*li+.116935020465145)+li*(-.000343531996510555*li+.24165260232407);return Gn.subarray(0,Ai)}_convertYcckToRgba(Gn){for(let mi=0,Wn=Gn.length;mi<Wn;mi+=4){const ni=Gn[mi],li=Gn[mi+1],Ai=Gn[mi+2],gi=Gn[mi+3];Gn[mi]=-122.67195406894+li*(-660635669420364e-19*li+.000437130475926232*Ai-54080610064599e-18*ni+.00048449797120281*gi-.154362151871126)+Ai*(-.000957964378445773*Ai+.000817076911346625*ni-.00477271405408747*gi+1.53380253221734)+ni*(.000961250184130688*ni-.00266257332283933*gi+.48357088451265)+gi*(-.000336197177618394*gi+.484791561490776),Gn[mi+1]=107.268039397724+li*(219927104525741e-19*li-.000640992018297945*Ai+.000659397001245577*ni+.000426105652938837*gi-.176491792462875)+Ai*(-.000778269941513683*Ai+.00130872261408275*ni+.000770482631801132*gi-.151051492775562)+ni*(.00126935368114843*ni-.00265090189010898*gi+.25802910206845)+gi*(-.000318913117588328*gi-.213742400323665),Gn[mi+2]=-20.810012546947+li*(-.000570115196973677*li-263409051004589e-19*Ai+.0020741088115012*ni-.00288260236853442*gi+.814272968359295)+Ai*(-153496057440975e-19*Ai-.000132689043961446*ni+.000560833691242812*gi-.195152027534049)+ni*(.00174418132927582*ni-.00255243321439347*gi+.116935020465145)+gi*(-.000343531996510555*gi+.24165260232407),Gn[mi+3]=255}return Gn}_convertYcckToCmyk(Gn){let mi,Wn,ni;for(let li=0,Ai=Gn.length;li<Ai;li+=4)mi=Gn[li],Wn=Gn[li+1],ni=Gn[li+2],Gn[li]=434.456-mi-1.402*ni,Gn[li+1]=119.541-mi+.344*Wn+.714*ni,Gn[li+2]=481.816-mi-1.772*Wn;return Gn}_convertCmykToRgb(Gn){let mi,Wn,ni,li,Ai=0;for(let gi=0,yi=Gn.length;gi<yi;gi+=4)mi=Gn[gi],Wn=Gn[gi+1],ni=Gn[gi+2],li=Gn[gi+3],Gn[Ai++]=255+mi*(-6747147073602441e-20*mi+.0008379262121013727*Wn+.0002894718188643294*ni+.003264231057537806*li-1.1185611867203937)+Wn*(26374107616089405e-21*Wn-8626949158638572e-20*ni-.0002748769067499491*li-.02155688794978967)+ni*(-3878099212869363e-20*ni-.0003267808279485286*li+.0686742238595345)-li*(.0003361971776183937*li+.7430659151342254),Gn[Ai++]=255+mi*(.00013596372813588848*mi+.000924537132573585*Wn+.00010567359618683593*ni+.0004791864687436512*li-.3109689587515875)+Wn*(-.00023545346108370344*Wn+.0002702845253534714*ni+.0020200308977307156*li-.7488052167015494)+ni*(6834815998235662e-20*ni+.00015168452363460973*li-.09751927774728933)-li*(.0003189131175883281*li+.7364883807733168),Gn[Ai++]=255+mi*(13598650411385307e-21*mi+.00012423956175490851*Wn+.0004751985097583589*ni-36729317476630422e-22*li-.05562186980264034)+Wn*(.00016141380598724676*Wn+.0009692239130725186*ni+.0007782692450036253*li-.44015232367526463)+ni*(5068882914068769e-22*ni+.0017778369011375071*li-.7591454649749609)-li*(.0003435319965105553*li+.7063770186160144);return Gn.subarray(0,Ai)}_convertCmykToRgba(Gn){for(let mi=0,Wn=Gn.length;mi<Wn;mi+=4){const ni=Gn[mi],li=Gn[mi+1],Ai=Gn[mi+2],gi=Gn[mi+3];Gn[mi]=255+ni*(-6747147073602441e-20*ni+.0008379262121013727*li+.0002894718188643294*Ai+.003264231057537806*gi-1.1185611867203937)+li*(26374107616089405e-21*li-8626949158638572e-20*Ai-.0002748769067499491*gi-.02155688794978967)+Ai*(-3878099212869363e-20*Ai-.0003267808279485286*gi+.0686742238595345)-gi*(.0003361971776183937*gi+.7430659151342254),Gn[mi+1]=255+ni*(.00013596372813588848*ni+.000924537132573585*li+.00010567359618683593*Ai+.0004791864687436512*gi-.3109689587515875)+li*(-.00023545346108370344*li+.0002702845253534714*Ai+.0020200308977307156*gi-.7488052167015494)+Ai*(6834815998235662e-20*Ai+.00015168452363460973*gi-.09751927774728933)-gi*(.0003189131175883281*gi+.7364883807733168),Gn[mi+2]=255+ni*(13598650411385307e-21*ni+.00012423956175490851*li+.0004751985097583589*Ai-36729317476630422e-22*gi-.05562186980264034)+li*(.00016141380598724676*li+.0009692239130725186*Ai+.0007782692450036253*gi-.44015232367526463)+Ai*(5068882914068769e-22*Ai+.0017778369011375071*gi-.7591454649749609)-gi*(.0003435319965105553*gi+.7063770186160144),Gn[mi+3]=255}return Gn}getData({width:Gn,height:mi,forceRGBA:Wn=!1,forceRGB:ni=!1,isSourcePDF:li=!1}){if(this.numComponents>4)throw new Cn("Unsupported color mode");const Ai=this._getLinearizedBlockData(Gn,mi,li);if(this.numComponents===1&&(Wn||ni)){const gi=Ai.length*(Wn?4:3),yi=new Uint8ClampedArray(gi);let Ii=0;if(Wn)(0,Ln.grayToRGBA)(Ai,new Uint32Array(yi.buffer));else for(const xi of Ai)yi[Ii++]=xi,yi[Ii++]=xi,yi[Ii++]=xi;return yi}else if(this.numComponents===3&&this._isColorConversionNeeded){if(Wn){const gi=new Uint8ClampedArray(Ai.length/3*4);return this._convertYccToRgba(Ai,gi)}return this._convertYccToRgb(Ai)}else if(this.numComponents===4){if(this._isColorConversionNeeded)return Wn?this._convertYcckToRgba(Ai):ni?this._convertYcckToRgb(Ai):this._convertYcckToCmyk(Ai);if(Wn)return this._convertCmykToRgba(Ai);if(ni)return this._convertCmykToRgb(Ai)}return Ai}}Mn.JpegImage=pi},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.convertBlackAndWhiteToRGBA=jn,Mn.convertToRGBA=Ln,Mn.grayToRGBA=Tn;var In=ti(2);function Ln(Rn){switch(Rn.kind){case In.ImageKind.GRAYSCALE_1BPP:return jn(Rn);case In.ImageKind.RGB_24BPP:return Cn(Rn)}return null}function jn({src:Rn,srcPos:ui=0,dest:si,width:ei,height:Bn,nonBlackColor:Nn=4294967295,inverseDecode:Hn=!1}){const On=In.FeatureTest.isLittleEndian?4278190080:255,[hi,Xn]=Hn?[Nn,On]:[On,Nn],ii=ei>>3,ri=ei&7,di=Rn.length;si=new Uint32Array(si.buffer);let fi=0;for(let wi=0;wi<Bn;wi++){for(const pi=ui+ii;ui<pi;ui++){const Zn=ui<di?Rn[ui]:255;si[fi++]=Zn&128?Xn:hi,si[fi++]=Zn&64?Xn:hi,si[fi++]=Zn&32?Xn:hi,si[fi++]=Zn&16?Xn:hi,si[fi++]=Zn&8?Xn:hi,si[fi++]=Zn&4?Xn:hi,si[fi++]=Zn&2?Xn:hi,si[fi++]=Zn&1?Xn:hi}if(ri===0)continue;const Jn=ui<di?Rn[ui++]:255;for(let pi=0;pi<ri;pi++)si[fi++]=Jn&1<<7-pi?Xn:hi}return{srcPos:ui,destPos:fi}}function Cn({src:Rn,srcPos:ui=0,dest:si,destPos:ei=0,width:Bn,height:Nn}){let Hn=0;const On=Rn.length>>2,hi=new Uint32Array(Rn.buffer,ui,On);if(In.FeatureTest.isLittleEndian){for(;Hn<On-2;Hn+=3,ei+=4){const Xn=hi[Hn],ii=hi[Hn+1],ri=hi[Hn+2];si[ei]=Xn|4278190080,si[ei+1]=Xn>>>24|ii<<8|4278190080,si[ei+2]=ii>>>16|ri<<16|4278190080,si[ei+3]=ri>>>8|4278190080}for(let Xn=Hn*4,ii=Rn.length;Xn<ii;Xn+=3)si[ei++]=Rn[Xn]|Rn[Xn+1]<<8|Rn[Xn+2]<<16|4278190080}else{for(;Hn<On-2;Hn+=3,ei+=4){const Xn=hi[Hn],ii=hi[Hn+1],ri=hi[Hn+2];si[ei]=Xn|255,si[ei+1]=Xn<<24|ii>>>8|255,si[ei+2]=ii<<16|ri>>>16|255,si[ei+3]=ri<<8|255}for(let Xn=Hn*4,ii=Rn.length;Xn<ii;Xn+=3)si[ei++]=Rn[Xn]<<24|Rn[Xn+1]<<16|Rn[Xn+2]<<8|255}return{srcPos:ui,destPos:ei}}function Tn(Rn,ui){if(In.FeatureTest.isLittleEndian)for(let si=0,ei=Rn.length;si<ei;si++)ui[si]=Rn[si]*65793|4278190080;else for(let si=0,ei=Rn.length;si<ei;si++)ui[si]=Rn[si]*16843008|255}},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.JpxStream=void 0;var In=ti(18),Ln=ti(30),jn=ti(2);class Cn extends In.DecodeStream{constructor(Rn,ui,si){super(ui),this.stream=Rn,this.dict=Rn.dict,this.maybeLength=ui,this.params=si}get bytes(){return(0,jn.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))}ensureBuffer(Rn){}readBlock(){if(this.eof)return;const Rn=new Ln.JpxImage;Rn.parse(this.bytes);const ui=Rn.width,si=Rn.height,ei=Rn.componentsCount,Bn=Rn.tiles.length;if(Bn===1)this.buffer=Rn.tiles[0].items;else{const Nn=new Uint8ClampedArray(ui*si*ei);for(let Hn=0;Hn<Bn;Hn++){const On=Rn.tiles[Hn],hi=On.width,Xn=On.height,ii=On.left,ri=On.top,di=On.items;let fi=0,wi=(ui*ri+ii)*ei;const Jn=ui*ei,pi=hi*ei;for(let Zn=0;Zn<Xn;Zn++){const Gn=di.subarray(fi,fi+pi);Nn.set(Gn,wi),fi+=pi,wi+=Jn}}this.buffer=Nn}this.bufferLength=this.buffer.length,this.eof=!0}}Mn.JpxStream=Cn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.JpxImage=void 0;var In=ti(2),Ln=ti(3),jn=ti(25);class Cn extends In.BaseException{constructor(Qn){super(`JPX error: ${Qn}`,"JpxError")}}const Tn={LL:0,LH:1,HL:1,HH:2};class Rn{constructor(){this.failOnCorruptedImage=!1}parse(Qn){if((0,Ln.readUint16)(Qn,0)===65359){this.parseCodestream(Qn,0,Qn.length);return}const Vn=Qn.length;let Yn=0;for(;Yn<Vn;){let ci=8,bi=(0,Ln.readUint32)(Qn,Yn);const Ci=(0,Ln.readUint32)(Qn,Yn+4);if(Yn+=ci,bi===1&&(bi=(0,Ln.readUint32)(Qn,Yn)*4294967296+(0,Ln.readUint32)(Qn,Yn+4),Yn+=8,ci+=8),bi===0&&(bi=Vn-Yn+ci),bi<ci)throw new Cn("Invalid box field size");const Fi=bi-ci;let zi=!0;switch(Ci){case 1785737832:zi=!1;break;case 1668246642:const _i=Qn[Yn];if(_i===1){const Pi=(0,Ln.readUint32)(Qn,Yn+3);switch(Pi){case 16:case 17:case 18:break;default:(0,In.warn)("Unknown colorspace "+Pi);break}}else _i===2&&(0,In.info)("ICC profile not supported");break;case 1785737827:this.parseCodestream(Qn,Yn,Yn+Fi);break;case 1783636e3:(0,Ln.readUint32)(Qn,Yn)!==218793738&&(0,In.warn)("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:const ji=String.fromCharCode(Ci>>24&255,Ci>>16&255,Ci>>8&255,Ci&255);(0,In.warn)(`Unsupported header type ${Ci} (${ji}).`);break}zi&&(Yn+=Fi)}}parseImageProperties(Qn){let ai=Qn.getByte();for(;ai>=0;){const Vn=ai;if(ai=Qn.getByte(),(Vn<<8|ai)===65361){Qn.skip(4);const ci=Qn.getInt32()>>>0,bi=Qn.getInt32()>>>0,Ci=Qn.getInt32()>>>0,Fi=Qn.getInt32()>>>0;Qn.skip(16);const zi=Qn.getUint16();this.width=ci-Ci,this.height=bi-Fi,this.componentsCount=zi,this.bitsPerComponent=8;return}}throw new Cn("No size marker found in JPX stream")}parseCodestream(Qn,ai,Vn){const Yn={};let ci=!1;try{let bi=ai;for(;bi+1<Vn;){const Ci=(0,Ln.readUint16)(Qn,bi);bi+=2;let Fi=0,zi,_i,ji,Pi,Ni,Si;switch(Ci){case 65359:Yn.mainHeader=!0;break;case 65497:break;case 65361:Fi=(0,Ln.readUint16)(Qn,bi);const Ti={};Ti.Xsiz=(0,Ln.readUint32)(Qn,bi+4),Ti.Ysiz=(0,Ln.readUint32)(Qn,bi+8),Ti.XOsiz=(0,Ln.readUint32)(Qn,bi+12),Ti.YOsiz=(0,Ln.readUint32)(Qn,bi+16),Ti.XTsiz=(0,Ln.readUint32)(Qn,bi+20),Ti.YTsiz=(0,Ln.readUint32)(Qn,bi+24),Ti.XTOsiz=(0,Ln.readUint32)(Qn,bi+28),Ti.YTOsiz=(0,Ln.readUint32)(Qn,bi+32);const Ri=(0,Ln.readUint16)(Qn,bi+36);Ti.Csiz=Ri;const Mi=[];zi=bi+38;for(let Xi=0;Xi<Ri;Xi++){const Gi={precision:(Qn[zi]&127)+1,isSigned:!!(Qn[zi]&128),XRsiz:Qn[zi+1],YRsiz:Qn[zi+2]};zi+=3,ui(Gi,Ti),Mi.push(Gi)}Yn.SIZ=Ti,Yn.components=Mi,si(Yn,Mi),Yn.QCC=[],Yn.COC=[];break;case 65372:Fi=(0,Ln.readUint16)(Qn,bi);const Ui={};switch(zi=bi+2,_i=Qn[zi++],_i&31){case 0:Pi=8,Ni=!0;break;case 1:Pi=16,Ni=!1;break;case 2:Pi=16,Ni=!0;break;default:throw new Error("Invalid SQcd value "+_i)}for(Ui.noQuantization=Pi===8,Ui.scalarExpounded=Ni,Ui.guardBits=_i>>5,ji=[];zi<Fi+bi;){const Xi={};Pi===8?(Xi.epsilon=Qn[zi++]>>3,Xi.mu=0):(Xi.epsilon=Qn[zi]>>3,Xi.mu=(Qn[zi]&7)<<8|Qn[zi+1],zi+=2),ji.push(Xi)}Ui.SPqcds=ji,Yn.mainHeader?Yn.QCD=Ui:(Yn.currentTile.QCD=Ui,Yn.currentTile.QCC=[]);break;case 65373:Fi=(0,Ln.readUint16)(Qn,bi);const Hi={};zi=bi+2;let Li;switch(Yn.SIZ.Csiz<257?Li=Qn[zi++]:(Li=(0,Ln.readUint16)(Qn,zi),zi+=2),_i=Qn[zi++],_i&31){case 0:Pi=8,Ni=!0;break;case 1:Pi=16,Ni=!1;break;case 2:Pi=16,Ni=!0;break;default:throw new Error("Invalid SQcd value "+_i)}for(Hi.noQuantization=Pi===8,Hi.scalarExpounded=Ni,Hi.guardBits=_i>>5,ji=[];zi<Fi+bi;){const Xi={};Pi===8?(Xi.epsilon=Qn[zi++]>>3,Xi.mu=0):(Xi.epsilon=Qn[zi]>>3,Xi.mu=(Qn[zi]&7)<<8|Qn[zi+1],zi+=2),ji.push(Xi)}Hi.SPqcds=ji,Yn.mainHeader?Yn.QCC[Li]=Hi:Yn.currentTile.QCC[Li]=Hi;break;case 65362:Fi=(0,Ln.readUint16)(Qn,bi);const Ei={};zi=bi+2;const $i=Qn[zi++];Ei.entropyCoderWithCustomPrecincts=!!($i&1),Ei.sopMarkerUsed=!!($i&2),Ei.ephMarkerUsed=!!($i&4),Ei.progressionOrder=Qn[zi++],Ei.layersCount=(0,Ln.readUint16)(Qn,zi),zi+=2,Ei.multipleComponentTransform=Qn[zi++],Ei.decompositionLevelsCount=Qn[zi++],Ei.xcb=(Qn[zi++]&15)+2,Ei.ycb=(Qn[zi++]&15)+2;const Bi=Qn[zi++];if(Ei.selectiveArithmeticCodingBypass=!!(Bi&1),Ei.resetContextProbabilities=!!(Bi&2),Ei.terminationOnEachCodingPass=!!(Bi&4),Ei.verticallyStripe=!!(Bi&8),Ei.predictableTermination=!!(Bi&16),Ei.segmentationSymbolUsed=!!(Bi&32),Ei.reversibleTransformation=Qn[zi++],Ei.entropyCoderWithCustomPrecincts){const Xi=[];for(;zi<Fi+bi;){const Gi=Qn[zi++];Xi.push({PPx:Gi&15,PPy:Gi>>4})}Ei.precinctsSizes=Xi}const Oi=[];Ei.selectiveArithmeticCodingBypass&&Oi.push("selectiveArithmeticCodingBypass"),Ei.terminationOnEachCodingPass&&Oi.push("terminationOnEachCodingPass"),Ei.verticallyStripe&&Oi.push("verticallyStripe"),Ei.predictableTermination&&Oi.push("predictableTermination"),Oi.length>0&&(ci=!0,(0,In.warn)(`JPX: Unsupported COD options (${Oi.join(", ")}).`)),Yn.mainHeader?Yn.COD=Ei:(Yn.currentTile.COD=Ei,Yn.currentTile.COC=[]);break;case 65424:Fi=(0,Ln.readUint16)(Qn,bi),Si={},Si.index=(0,Ln.readUint16)(Qn,bi+2),Si.length=(0,Ln.readUint32)(Qn,bi+4),Si.dataEnd=Si.length+bi-2,Si.partIndex=Qn[bi+8],Si.partsCount=Qn[bi+9],Yn.mainHeader=!1,Si.partIndex===0&&(Si.COD=Yn.COD,Si.COC=Yn.COC.slice(0),Si.QCD=Yn.QCD,Si.QCC=Yn.QCC.slice(0)),Yn.currentTile=Si;break;case 65427:Si=Yn.currentTile,Si.partIndex===0&&(mi(Yn,Si.index),wi(Yn)),Fi=Si.dataEnd-bi,Jn(Yn,Qn,bi,Fi);break;case 65363:(0,In.warn)("JPX: Codestream code 0xFF53 (COC) is not implemented.");case 65365:case 65367:case 65368:case 65380:Fi=(0,Ln.readUint16)(Qn,bi);break;default:throw new Error("Unknown codestream code: "+Ci.toString(16))}bi+=Fi}}catch(bi){if(ci||this.failOnCorruptedImage)throw new Cn(bi.message);(0,In.warn)(`JPX: Trying to recover from: "${bi.message}".`)}this.tiles=Gn(Yn),this.width=Yn.SIZ.Xsiz-Yn.SIZ.XOsiz,this.height=Yn.SIZ.Ysiz-Yn.SIZ.YOsiz,this.componentsCount=Yn.SIZ.Csiz}}Mn.JpxImage=Rn;function ui(xi,Qn){xi.x0=Math.ceil(Qn.XOsiz/xi.XRsiz),xi.x1=Math.ceil(Qn.Xsiz/xi.XRsiz),xi.y0=Math.ceil(Qn.YOsiz/xi.YRsiz),xi.y1=Math.ceil(Qn.Ysiz/xi.YRsiz),xi.width=xi.x1-xi.x0,xi.height=xi.y1-xi.y0}function si(xi,Qn){const ai=xi.SIZ,Vn=[];let Yn;const ci=Math.ceil((ai.Xsiz-ai.XTOsiz)/ai.XTsiz),bi=Math.ceil((ai.Ysiz-ai.YTOsiz)/ai.YTsiz);for(let Fi=0;Fi<bi;Fi++)for(let zi=0;zi<ci;zi++)Yn={},Yn.tx0=Math.max(ai.XTOsiz+zi*ai.XTsiz,ai.XOsiz),Yn.ty0=Math.max(ai.YTOsiz+Fi*ai.YTsiz,ai.YOsiz),Yn.tx1=Math.min(ai.XTOsiz+(zi+1)*ai.XTsiz,ai.Xsiz),Yn.ty1=Math.min(ai.YTOsiz+(Fi+1)*ai.YTsiz,ai.Ysiz),Yn.width=Yn.tx1-Yn.tx0,Yn.height=Yn.ty1-Yn.ty0,Yn.components=[],Vn.push(Yn);xi.tiles=Vn;const Ci=ai.Csiz;for(let Fi=0,zi=Ci;Fi<zi;Fi++){const _i=Qn[Fi];for(let ji=0,Pi=Vn.length;ji<Pi;ji++){const Ni={};Yn=Vn[ji],Ni.tcx0=Math.ceil(Yn.tx0/_i.XRsiz),Ni.tcy0=Math.ceil(Yn.ty0/_i.YRsiz),Ni.tcx1=Math.ceil(Yn.tx1/_i.XRsiz),Ni.tcy1=Math.ceil(Yn.ty1/_i.YRsiz),Ni.width=Ni.tcx1-Ni.tcx0,Ni.height=Ni.tcy1-Ni.tcy0,Yn.components[Fi]=Ni}}}function ei(xi,Qn,ai){const Vn=Qn.codingStyleParameters,Yn={};return Vn.entropyCoderWithCustomPrecincts?(Yn.PPx=Vn.precinctsSizes[ai].PPx,Yn.PPy=Vn.precinctsSizes[ai].PPy):(Yn.PPx=15,Yn.PPy=15),Yn.xcb_=ai>0?Math.min(Vn.xcb,Yn.PPx-1):Math.min(Vn.xcb,Yn.PPx),Yn.ycb_=ai>0?Math.min(Vn.ycb,Yn.PPy-1):Math.min(Vn.ycb,Yn.PPy),Yn}function Bn(xi,Qn,ai){const Vn=1<<ai.PPx,Yn=1<<ai.PPy,ci=Qn.resLevel===0,bi=1<<ai.PPx+(ci?0:-1),Ci=1<<ai.PPy+(ci?0:-1),Fi=Qn.trx1>Qn.trx0?Math.ceil(Qn.trx1/Vn)-Math.floor(Qn.trx0/Vn):0,zi=Qn.try1>Qn.try0?Math.ceil(Qn.try1/Yn)-Math.floor(Qn.try0/Yn):0,_i=Fi*zi;Qn.precinctParameters={precinctWidth:Vn,precinctHeight:Yn,numprecinctswide:Fi,numprecinctshigh:zi,numprecincts:_i,precinctWidthInSubband:bi,precinctHeightInSubband:Ci}}function Nn(xi,Qn,ai){const Vn=ai.xcb_,Yn=ai.ycb_,ci=1<<Vn,bi=1<<Yn,Ci=Qn.tbx0>>Vn,Fi=Qn.tby0>>Yn,zi=Qn.tbx1+ci-1>>Vn,_i=Qn.tby1+bi-1>>Yn,ji=Qn.resolution.precinctParameters,Pi=[],Ni=[];let Si,Ti,Ri,Mi;for(Ti=Fi;Ti<_i;Ti++)for(Si=Ci;Si<zi;Si++){Ri={cbx:Si,cby:Ti,tbx0:ci*Si,tby0:bi*Ti,tbx1:ci*(Si+1),tby1:bi*(Ti+1)},Ri.tbx0_=Math.max(Qn.tbx0,Ri.tbx0),Ri.tby0_=Math.max(Qn.tby0,Ri.tby0),Ri.tbx1_=Math.min(Qn.tbx1,Ri.tbx1),Ri.tby1_=Math.min(Qn.tby1,Ri.tby1);const Ui=Math.floor((Ri.tbx0_-Qn.tbx0)/ji.precinctWidthInSubband),Hi=Math.floor((Ri.tby0_-Qn.tby0)/ji.precinctHeightInSubband);if(Mi=Ui+Hi*ji.numprecinctswide,Ri.precinctNumber=Mi,Ri.subbandType=Qn.type,Ri.Lblock=3,Ri.tbx1_<=Ri.tbx0_||Ri.tby1_<=Ri.tby0_)continue;Pi.push(Ri);let Li=Ni[Mi];Li!==void 0?(Si<Li.cbxMin?Li.cbxMin=Si:Si>Li.cbxMax&&(Li.cbxMax=Si),Ti<Li.cbyMin?Li.cbxMin=Ti:Ti>Li.cbyMax&&(Li.cbyMax=Ti)):Ni[Mi]=Li={cbxMin:Si,cbyMin:Ti,cbxMax:Si,cbyMax:Ti},Ri.precinct=Li}Qn.codeblockParameters={codeblockWidth:Vn,codeblockHeight:Yn,numcodeblockwide:zi-Ci+1,numcodeblockhigh:_i-Fi+1},Qn.codeblocks=Pi,Qn.precincts=Ni}function Hn(xi,Qn,ai){const Vn=[],Yn=xi.subbands;for(let ci=0,bi=Yn.length;ci<bi;ci++){const Fi=Yn[ci].codeblocks;for(let zi=0,_i=Fi.length;zi<_i;zi++){const ji=Fi[zi];ji.precinctNumber===Qn&&Vn.push(ji)}}return{layerNumber:ai,codeblocks:Vn}}function On(xi){const Qn=xi.SIZ,ai=xi.currentTile.index,Vn=xi.tiles[ai],Yn=Vn.codingStyleDefaultParameters.layersCount,ci=Qn.Csiz;let bi=0;for(let ji=0;ji<ci;ji++)bi=Math.max(bi,Vn.components[ji].codingStyleParameters.decompositionLevelsCount);let Ci=0,Fi=0,zi=0,_i=0;this.nextPacket=function(){for(;Ci<Yn;Ci++){for(;Fi<=bi;Fi++){for(;zi<ci;zi++){const Pi=Vn.components[zi];if(Fi>Pi.codingStyleParameters.decompositionLevelsCount)continue;const Ni=Pi.resolutions[Fi],Si=Ni.precinctParameters.numprecincts;for(;_i<Si;){const Ti=Hn(Ni,_i,Ci);return _i++,Ti}_i=0}zi=0}Fi=0}throw new Cn("Out of packets")}}function hi(xi){const Qn=xi.SIZ,ai=xi.currentTile.index,Vn=xi.tiles[ai],Yn=Vn.codingStyleDefaultParameters.layersCount,ci=Qn.Csiz;let bi=0;for(let ji=0;ji<ci;ji++)bi=Math.max(bi,Vn.components[ji].codingStyleParameters.decompositionLevelsCount);let Ci=0,Fi=0,zi=0,_i=0;this.nextPacket=function(){for(;Ci<=bi;Ci++){for(;Fi<Yn;Fi++){for(;zi<ci;zi++){const Pi=Vn.components[zi];if(Ci>Pi.codingStyleParameters.decompositionLevelsCount)continue;const Ni=Pi.resolutions[Ci],Si=Ni.precinctParameters.numprecincts;for(;_i<Si;){const Ti=Hn(Ni,_i,Fi);return _i++,Ti}_i=0}zi=0}Fi=0}throw new Cn("Out of packets")}}function Xn(xi){const Qn=xi.SIZ,ai=xi.currentTile.index,Vn=xi.tiles[ai],Yn=Vn.codingStyleDefaultParameters.layersCount,ci=Qn.Csiz;let bi,Ci,Fi,zi,_i=0;for(Fi=0;Fi<ci;Fi++){const Pi=Vn.components[Fi];_i=Math.max(_i,Pi.codingStyleParameters.decompositionLevelsCount)}const ji=new Int32Array(_i+1);for(Ci=0;Ci<=_i;++Ci){let Pi=0;for(Fi=0;Fi<ci;++Fi){const Ni=Vn.components[Fi].resolutions;Ci<Ni.length&&(Pi=Math.max(Pi,Ni[Ci].precinctParameters.numprecincts))}ji[Ci]=Pi}bi=0,Ci=0,Fi=0,zi=0,this.nextPacket=function(){for(;Ci<=_i;Ci++){for(;zi<ji[Ci];zi++){for(;Fi<ci;Fi++){const Ni=Vn.components[Fi];if(Ci>Ni.codingStyleParameters.decompositionLevelsCount)continue;const Si=Ni.resolutions[Ci],Ti=Si.precinctParameters.numprecincts;if(!(zi>=Ti)){for(;bi<Yn;){const Ri=Hn(Si,zi,bi);return bi++,Ri}bi=0}}Fi=0}zi=0}throw new Cn("Out of packets")}}function ii(xi){const Qn=xi.SIZ,ai=xi.currentTile.index,Vn=xi.tiles[ai],Yn=Vn.codingStyleDefaultParameters.layersCount,ci=Qn.Csiz,bi=fi(Vn),Ci=bi;let Fi=0,zi=0,_i=0,ji=0,Pi=0;this.nextPacket=function(){for(;Pi<Ci.maxNumHigh;Pi++){for(;ji<Ci.maxNumWide;ji++){for(;_i<ci;_i++){const Si=Vn.components[_i],Ti=Si.codingStyleParameters.decompositionLevelsCount;for(;zi<=Ti;zi++){const Ri=Si.resolutions[zi],Mi=bi.components[_i].resolutions[zi],Ui=di(ji,Pi,Mi,Ci,Ri);if(Ui!==null){for(;Fi<Yn;){const Hi=Hn(Ri,Ui,Fi);return Fi++,Hi}Fi=0}}zi=0}_i=0}ji=0}throw new Cn("Out of packets")}}function ri(xi){const Qn=xi.SIZ,ai=xi.currentTile.index,Vn=xi.tiles[ai],Yn=Vn.codingStyleDefaultParameters.layersCount,ci=Qn.Csiz,bi=fi(Vn);let Ci=0,Fi=0,zi=0,_i=0,ji=0;this.nextPacket=function(){for(;zi<ci;++zi){const Ni=Vn.components[zi],Si=bi.components[zi],Ti=Ni.codingStyleParameters.decompositionLevelsCount;for(;ji<Si.maxNumHigh;ji++){for(;_i<Si.maxNumWide;_i++){for(;Fi<=Ti;Fi++){const Ri=Ni.resolutions[Fi],Mi=Si.resolutions[Fi],Ui=di(_i,ji,Mi,Si,Ri);if(Ui!==null){for(;Ci<Yn;){const Hi=Hn(Ri,Ui,Ci);return Ci++,Hi}Ci=0}}Fi=0}_i=0}ji=0}throw new Cn("Out of packets")}}function di(xi,Qn,ai,Vn,Yn){const ci=xi*Vn.minWidth,bi=Qn*Vn.minHeight;if(ci%ai.width!==0||bi%ai.height!==0)return null;const Ci=bi/ai.width*Yn.precinctParameters.numprecinctswide;return ci/ai.height+Ci}function fi(xi){const Qn=xi.components.length;let ai=Number.MAX_VALUE,Vn=Number.MAX_VALUE,Yn=0,ci=0;const bi=new Array(Qn);for(let Ci=0;Ci<Qn;Ci++){const Fi=xi.components[Ci],zi=Fi.codingStyleParameters.decompositionLevelsCount,_i=new Array(zi+1);let ji=Number.MAX_VALUE,Pi=Number.MAX_VALUE,Ni=0,Si=0,Ti=1;for(let Ri=zi;Ri>=0;--Ri){const Mi=Fi.resolutions[Ri],Ui=Ti*Mi.precinctParameters.precinctWidth,Hi=Ti*Mi.precinctParameters.precinctHeight;ji=Math.min(ji,Ui),Pi=Math.min(Pi,Hi),Ni=Math.max(Ni,Mi.precinctParameters.numprecinctswide),Si=Math.max(Si,Mi.precinctParameters.numprecinctshigh),_i[Ri]={width:Ui,height:Hi},Ti<<=1}ai=Math.min(ai,ji),Vn=Math.min(Vn,Pi),Yn=Math.max(Yn,Ni),ci=Math.max(ci,Si),bi[Ci]={resolutions:_i,minWidth:ji,minHeight:Pi,maxNumWide:Ni,maxNumHigh:Si}}return{components:bi,minWidth:ai,minHeight:Vn,maxNumWide:Yn,maxNumHigh:ci}}function wi(xi){const Qn=xi.SIZ,ai=xi.currentTile.index,Vn=xi.tiles[ai],Yn=Qn.Csiz;for(let bi=0;bi<Yn;bi++){const Ci=Vn.components[bi],Fi=Ci.codingStyleParameters.decompositionLevelsCount,zi=[],_i=[];for(let ji=0;ji<=Fi;ji++){const Pi=ei(xi,Ci,ji),Ni={},Si=1<<Fi-ji;Ni.trx0=Math.ceil(Ci.tcx0/Si),Ni.try0=Math.ceil(Ci.tcy0/Si),Ni.trx1=Math.ceil(Ci.tcx1/Si),Ni.try1=Math.ceil(Ci.tcy1/Si),Ni.resLevel=ji,Bn(xi,Ni,Pi),zi.push(Ni);let Ti;if(ji===0)Ti={},Ti.type="LL",Ti.tbx0=Math.ceil(Ci.tcx0/Si),Ti.tby0=Math.ceil(Ci.tcy0/Si),Ti.tbx1=Math.ceil(Ci.tcx1/Si),Ti.tby1=Math.ceil(Ci.tcy1/Si),Ti.resolution=Ni,Nn(xi,Ti,Pi),_i.push(Ti),Ni.subbands=[Ti];else{const Ri=1<<Fi-ji+1,Mi=[];Ti={},Ti.type="HL",Ti.tbx0=Math.ceil(Ci.tcx0/Ri-.5),Ti.tby0=Math.ceil(Ci.tcy0/Ri),Ti.tbx1=Math.ceil(Ci.tcx1/Ri-.5),Ti.tby1=Math.ceil(Ci.tcy1/Ri),Ti.resolution=Ni,Nn(xi,Ti,Pi),_i.push(Ti),Mi.push(Ti),Ti={},Ti.type="LH",Ti.tbx0=Math.ceil(Ci.tcx0/Ri),Ti.tby0=Math.ceil(Ci.tcy0/Ri-.5),Ti.tbx1=Math.ceil(Ci.tcx1/Ri),Ti.tby1=Math.ceil(Ci.tcy1/Ri-.5),Ti.resolution=Ni,Nn(xi,Ti,Pi),_i.push(Ti),Mi.push(Ti),Ti={},Ti.type="HH",Ti.tbx0=Math.ceil(Ci.tcx0/Ri-.5),Ti.tby0=Math.ceil(Ci.tcy0/Ri-.5),Ti.tbx1=Math.ceil(Ci.tcx1/Ri-.5),Ti.tby1=Math.ceil(Ci.tcy1/Ri-.5),Ti.resolution=Ni,Nn(xi,Ti,Pi),_i.push(Ti),Mi.push(Ti),Ni.subbands=Mi}}Ci.resolutions=zi,Ci.subbands=_i}const ci=Vn.codingStyleDefaultParameters.progressionOrder;switch(ci){case 0:Vn.packetsIterator=new On(xi);break;case 1:Vn.packetsIterator=new hi(xi);break;case 2:Vn.packetsIterator=new Xn(xi);break;case 3:Vn.packetsIterator=new ii(xi);break;case 4:Vn.packetsIterator=new ri(xi);break;default:throw new Cn(`Unsupported progression order ${ci}`)}}function Jn(xi,Qn,ai,Vn){let Yn=0,ci,bi=0,Ci=!1;function Fi(Ui){for(;bi<Ui;){const Hi=Qn[ai+Yn];Yn++,Ci?(ci=ci<<7|Hi,bi+=7,Ci=!1):(ci=ci<<8|Hi,bi+=8),Hi===255&&(Ci=!0)}return bi-=Ui,ci>>>bi&(1<<Ui)-1}function zi(Ui){return Qn[ai+Yn-1]===255&&Qn[ai+Yn]===Ui?(_i(1),!0):Qn[ai+Yn]===255&&Qn[ai+Yn+1]===Ui?(_i(2),!0):!1}function _i(Ui){Yn+=Ui}function ji(){bi=0,Ci&&(Yn++,Ci=!1)}function Pi(){if(Fi(1)===0)return 1;if(Fi(1)===0)return 2;let Ui=Fi(2);return Ui<3?Ui+3:(Ui=Fi(5),Ui<31?Ui+6:(Ui=Fi(7),Ui+37))}const Ni=xi.currentTile.index,Si=xi.tiles[Ni],Ti=xi.COD.sopMarkerUsed,Ri=xi.COD.ephMarkerUsed,Mi=Si.packetsIterator;for(;Yn<Vn;){ji(),Ti&&zi(145)&&_i(4);const Ui=Mi.nextPacket();if(!Fi(1))continue;const Hi=Ui.layerNumber,Li=[];let Ei;for(let $i=0,Bi=Ui.codeblocks.length;$i<Bi;$i++){Ei=Ui.codeblocks[$i];let Oi=Ei.precinct;const Xi=Ei.cbx-Oi.cbxMin,Gi=Ei.cby-Oi.cbyMin;let qi=!1,ns=!1,is,as;if(Ei.included!==void 0)qi=!!Fi(1);else{Oi=Ei.precinct;let us;if(Oi.inclusionTree!==void 0)us=Oi.inclusionTree;else{const ts=Oi.cbxMax-Oi.cbxMin+1,es=Oi.cbyMax-Oi.cbyMin+1;us=new ni(ts,es,Hi),as=new Wn(ts,es),Oi.inclusionTree=us,Oi.zeroBitPlanesTree=as;for(let rs=0;rs<Hi;rs++)if(Fi(1)!==0)throw new Cn("Invalid tag tree")}if(us.reset(Xi,Gi,Hi))for(;;)if(Fi(1)){if(is=!us.nextLevel(),is){Ei.included=!0,qi=ns=!0;break}}else{us.incrementValue(Hi);break}}if(!qi)continue;if(ns){for(as=Oi.zeroBitPlanesTree,as.reset(Xi,Gi);;)if(Fi(1)){if(is=!as.nextLevel(),is)break}else as.incrementValue();Ei.zeroBitPlanes=as.value}const hs=Pi();for(;Fi(1);)Ei.Lblock++;const Yi=(0,Ln.log2)(hs),Vi=(hs<1<<Yi?Yi-1:Yi)+Ei.Lblock,Zi=Fi(Vi);Li.push({codeblock:Ei,codingpasses:hs,dataLength:Zi})}for(ji(),Ri&&zi(146);Li.length>0;){const $i=Li.shift();Ei=$i.codeblock,Ei.data===void 0&&(Ei.data=[]),Ei.data.push({data:Qn,start:ai+Yn,end:ai+Yn+$i.dataLength,codingpasses:$i.codingpasses}),Yn+=$i.dataLength}}return Yn}function pi(xi,Qn,ai,Vn,Yn,ci,bi,Ci,Fi){const zi=Vn.tbx0,_i=Vn.tby0,ji=Vn.tbx1-Vn.tbx0,Pi=Vn.codeblocks,Ni=Vn.type.charAt(0)==="H"?1:0,Si=Vn.type.charAt(1)==="H"?Qn:0;for(let Ti=0,Ri=Pi.length;Ti<Ri;++Ti){const Mi=Pi[Ti],Ui=Mi.tbx1_-Mi.tbx0_,Hi=Mi.tby1_-Mi.tby0_;if(Ui===0||Hi===0||Mi.data===void 0)continue;const Li=new li(Ui,Hi,Mi.subbandType,Mi.zeroBitPlanes,ci);let Ei=2;const $i=Mi.data;let Bi=0,Oi=0,Xi,Gi,qi;for(Xi=0,Gi=$i.length;Xi<Gi;Xi++)qi=$i[Xi],Bi+=qi.end-qi.start,Oi+=qi.codingpasses;const ns=new Uint8Array(Bi);let is=0;for(Xi=0,Gi=$i.length;Xi<Gi;Xi++){qi=$i[Xi];const os=qi.data.subarray(qi.start,qi.end);ns.set(os,is),is+=os.length}const as=new jn.ArithmeticDecoder(ns,0,Bi);for(Li.setDecoder(as),Xi=0;Xi<Oi;Xi++){switch(Ei){case 0:Li.runSignificancePropagationPass();break;case 1:Li.runMagnitudeRefinementPass();break;case 2:Li.runCleanupPass(),Ci&&Li.checkSegmentationSymbol();break}Fi&&Li.reset(),Ei=(Ei+1)%3}let hs=Mi.tbx0_-zi+(Mi.tby0_-_i)*ji;const Yi=Li.coefficentsSign,Vi=Li.coefficentsMagnitude,Zi=Li.bitsDecoded,us=bi?0:.5;let ts,es,rs;is=0;const ss=Vn.type!=="LL";for(Xi=0;Xi<Hi;Xi++){const ks=2*(hs/ji|0)*(Qn-ji)+Ni+Si;for(ts=0;ts<Ui;ts++){if(es=Vi[is],es!==0){es=(es+us)*Yn,Yi[is]!==0&&(es=-es),rs=Zi[is];const xs=ss?ks+(hs<<1):hs;xi[xs]=bi&&rs>=ci?es:es*(1<<ci-rs)}hs++,is++}hs+=ji-Ui}}}function Zn(xi,Qn,ai){const Vn=Qn.components[ai],Yn=Vn.codingStyleParameters,ci=Vn.quantizationParameters,bi=Yn.decompositionLevelsCount,Ci=ci.SPqcds,Fi=ci.scalarExpounded,zi=ci.guardBits,_i=Yn.segmentationSymbolUsed,ji=Yn.resetContextProbabilities,Pi=xi.components[ai].precision,Ni=Yn.reversibleTransformation,Si=Ni?new yi:new gi,Ti=[];let Ri=0;for(let Ui=0;Ui<=bi;Ui++){const Hi=Vn.resolutions[Ui],Li=Hi.trx1-Hi.trx0,Ei=Hi.try1-Hi.try0,$i=new Float32Array(Li*Ei);for(let Bi=0,Oi=Hi.subbands.length;Bi<Oi;Bi++){let Xi,Gi;Fi?(Xi=Ci[Ri].mu,Gi=Ci[Ri].epsilon,Ri++):(Xi=Ci[0].mu,Gi=Ci[0].epsilon+(Ui>0?1-Ui:0));const qi=Hi.subbands[Bi],ns=Tn[qi.type],is=Ni?1:2**(Pi+ns-Gi)*(1+Xi/2048),as=zi+Gi-1;pi($i,Li,Ei,qi,is,as,Ni,_i,ji)}Ti.push({width:Li,height:Ei,items:$i})}const Mi=Si.calculate(Ti,Vn.tcx0,Vn.tcy0);return{left:Vn.tcx0,top:Vn.tcy0,width:Mi.width,height:Mi.height,items:Mi.items}}function Gn(xi){const Qn=xi.SIZ,ai=xi.components,Vn=Qn.Csiz,Yn=[];for(let ci=0,bi=xi.tiles.length;ci<bi;ci++){const Ci=xi.tiles[ci],Fi=[];for(let Li=0;Li<Vn;Li++)Fi[Li]=Zn(xi,Ci,Li);const zi=Fi[0],_i=new Uint8ClampedArray(zi.items.length*Vn),ji={left:zi.left,top:zi.top,width:zi.width,height:zi.height,items:_i};let Pi,Ni,Si=0,Ti,Ri,Mi,Ui,Hi;if(Ci.codingStyleDefaultParameters.multipleComponentTransform){const Li=Vn===4,Ei=Fi[0].items,$i=Fi[1].items,Bi=Fi[2].items,Oi=Li?Fi[3].items:null;Pi=ai[0].precision-8,Ni=(128<<Pi)+.5;const Xi=Ci.components[0],Gi=Vn-3;if(Ri=Ei.length,Xi.codingStyleParameters.reversibleTransformation)for(Ti=0;Ti<Ri;Ti++,Si+=Gi){Mi=Ei[Ti]+Ni,Ui=$i[Ti],Hi=Bi[Ti];const qi=Mi-(Hi+Ui>>2);_i[Si++]=qi+Hi>>Pi,_i[Si++]=qi>>Pi,_i[Si++]=qi+Ui>>Pi}else for(Ti=0;Ti<Ri;Ti++,Si+=Gi)Mi=Ei[Ti]+Ni,Ui=$i[Ti],Hi=Bi[Ti],_i[Si++]=Mi+1.402*Hi>>Pi,_i[Si++]=Mi-.34413*Ui-.71414*Hi>>Pi,_i[Si++]=Mi+1.772*Ui>>Pi;if(Li)for(Ti=0,Si=3;Ti<Ri;Ti++,Si+=4)_i[Si]=Oi[Ti]+Ni>>Pi}else for(let Li=0;Li<Vn;Li++){const Ei=Fi[Li].items;for(Pi=ai[Li].precision-8,Ni=(128<<Pi)+.5,Si=Li,Ti=0,Ri=Ei.length;Ti<Ri;Ti++)_i[Si]=Ei[Ti]+Ni>>Pi,Si+=Vn}Yn.push(ji)}return Yn}function mi(xi,Qn){const Vn=xi.SIZ.Csiz,Yn=xi.tiles[Qn];for(let ci=0;ci<Vn;ci++){const bi=Yn.components[ci],Ci=xi.currentTile.QCC[ci]!==void 0?xi.currentTile.QCC[ci]:xi.currentTile.QCD;bi.quantizationParameters=Ci;const Fi=xi.currentTile.COC[ci]!==void 0?xi.currentTile.COC[ci]:xi.currentTile.COD;bi.codingStyleParameters=Fi}Yn.codingStyleDefaultParameters=xi.currentTile.COD}class Wn{constructor(Qn,ai){const Vn=(0,Ln.log2)(Math.max(Qn,ai))+1;this.levels=[];for(let Yn=0;Yn<Vn;Yn++){const ci={width:Qn,height:ai,items:[]};this.levels.push(ci),Qn=Math.ceil(Qn/2),ai=Math.ceil(ai/2)}}reset(Qn,ai){let Vn=0,Yn=0,ci;for(;Vn<this.levels.length;){ci=this.levels[Vn];const bi=Qn+ai*ci.width;if(ci.items[bi]!==void 0){Yn=ci.items[bi];break}ci.index=bi,Qn>>=1,ai>>=1,Vn++}Vn--,ci=this.levels[Vn],ci.items[ci.index]=Yn,this.currentLevel=Vn,delete this.value}incrementValue(){const Qn=this.levels[this.currentLevel];Qn.items[Qn.index]++}nextLevel(){let Qn=this.currentLevel,ai=this.levels[Qn];const Vn=ai.items[ai.index];return Qn--,Qn<0?(this.value=Vn,!1):(this.currentLevel=Qn,ai=this.levels[Qn],ai.items[ai.index]=Vn,!0)}}class ni{constructor(Qn,ai,Vn){const Yn=(0,Ln.log2)(Math.max(Qn,ai))+1;this.levels=[];for(let ci=0;ci<Yn;ci++){const bi=new Uint8Array(Qn*ai);for(let Fi=0,zi=bi.length;Fi<zi;Fi++)bi[Fi]=Vn;const Ci={width:Qn,height:ai,items:bi};this.levels.push(Ci),Qn=Math.ceil(Qn/2),ai=Math.ceil(ai/2)}}reset(Qn,ai,Vn){let Yn=0;for(;Yn<this.levels.length;){const ci=this.levels[Yn],bi=Qn+ai*ci.width;ci.index=bi;const Ci=ci.items[bi];if(Ci===255)break;if(Ci>Vn)return this.currentLevel=Yn,this.propagateValues(),!1;Qn>>=1,ai>>=1,Yn++}return this.currentLevel=Yn-1,!0}incrementValue(Qn){const ai=this.levels[this.currentLevel];ai.items[ai.index]=Qn+1,this.propagateValues()}propagateValues(){let Qn=this.currentLevel,ai=this.levels[Qn];const Vn=ai.items[ai.index];for(;--Qn>=0;)ai=this.levels[Qn],ai.items[ai.index]=Vn}nextLevel(){let Qn=this.currentLevel,ai=this.levels[Qn];const Vn=ai.items[ai.index];return ai.items[ai.index]=255,Qn--,Qn<0?!1:(this.currentLevel=Qn,ai=this.levels[Qn],ai.items[ai.index]=Vn,!0)}}const Ii=class Ii{constructor(Qn,ai,Vn,Yn,ci){this.width=Qn,this.height=ai;let bi;Vn==="HH"?bi=Ii.HHContextLabel:Vn==="HL"?bi=Ii.HLContextLabel:bi=Ii.LLAndLHContextsLabel,this.contextLabelTable=bi;const Ci=Qn*ai;this.neighborsSignificance=new Uint8Array(Ci),this.coefficentsSign=new Uint8Array(Ci);let Fi;ci>14?Fi=new Uint32Array(Ci):ci>6?Fi=new Uint16Array(Ci):Fi=new Uint8Array(Ci),this.coefficentsMagnitude=Fi,this.processingFlags=new Uint8Array(Ci);const zi=new Uint8Array(Ci);if(Yn!==0)for(let _i=0;_i<Ci;_i++)zi[_i]=Yn;this.bitsDecoded=zi,this.reset()}setDecoder(Qn){this.decoder=Qn}reset(){this.contexts=new Int8Array(19),this.contexts[0]=8,this.contexts[Ii.UNIFORM_CONTEXT]=92,this.contexts[Ii.RUNLENGTH_CONTEXT]=6}setNeighborsSignificance(Qn,ai,Vn){const Yn=this.neighborsSignificance,ci=this.width,bi=this.height,Ci=ai>0,Fi=ai+1<ci;let zi;Qn>0&&(zi=Vn-ci,Ci&&(Yn[zi-1]+=16),Fi&&(Yn[zi+1]+=16),Yn[zi]+=4),Qn+1<bi&&(zi=Vn+ci,Ci&&(Yn[zi-1]+=16),Fi&&(Yn[zi+1]+=16),Yn[zi]+=4),Ci&&(Yn[Vn-1]+=1),Fi&&(Yn[Vn+1]+=1),Yn[Vn]|=128}runSignificancePropagationPass(){const Qn=this.decoder,ai=this.width,Vn=this.height,Yn=this.coefficentsMagnitude,ci=this.coefficentsSign,bi=this.neighborsSignificance,Ci=this.processingFlags,Fi=this.contexts,zi=this.contextLabelTable,_i=this.bitsDecoded,ji=-2,Pi=1,Ni=2;for(let Si=0;Si<Vn;Si+=4)for(let Ti=0;Ti<ai;Ti++){let Ri=Si*ai+Ti;for(let Mi=0;Mi<4;Mi++,Ri+=ai){const Ui=Si+Mi;if(Ui>=Vn)break;if(Ci[Ri]&=ji,Yn[Ri]||!bi[Ri])continue;const Hi=zi[bi[Ri]];if(Qn.readBit(Fi,Hi)){const Ei=this.decodeSignBit(Ui,Ti,Ri);ci[Ri]=Ei,Yn[Ri]=1,this.setNeighborsSignificance(Ui,Ti,Ri),Ci[Ri]|=Ni}_i[Ri]++,Ci[Ri]|=Pi}}}decodeSignBit(Qn,ai,Vn){const Yn=this.width,ci=this.height,bi=this.coefficentsMagnitude,Ci=this.coefficentsSign;let Fi,zi,_i,ji,Pi,Ni;ji=ai>0&&bi[Vn-1]!==0,ai+1<Yn&&bi[Vn+1]!==0?(_i=Ci[Vn+1],ji?(zi=Ci[Vn-1],Fi=1-_i-zi):Fi=1-_i-_i):ji?(zi=Ci[Vn-1],Fi=1-zi-zi):Fi=0;const Si=3*Fi;return ji=Qn>0&&bi[Vn-Yn]!==0,Qn+1<ci&&bi[Vn+Yn]!==0?(_i=Ci[Vn+Yn],ji?(zi=Ci[Vn-Yn],Fi=1-_i-zi+Si):Fi=1-_i-_i+Si):ji?(zi=Ci[Vn-Yn],Fi=1-zi-zi+Si):Fi=Si,Fi>=0?(Pi=9+Fi,Ni=this.decoder.readBit(this.contexts,Pi)):(Pi=9-Fi,Ni=this.decoder.readBit(this.contexts,Pi)^1),Ni}runMagnitudeRefinementPass(){const Qn=this.decoder,ai=this.width,Vn=this.height,Yn=this.coefficentsMagnitude,ci=this.neighborsSignificance,bi=this.contexts,Ci=this.bitsDecoded,Fi=this.processingFlags,zi=1,_i=2,ji=ai*Vn,Pi=ai*4;for(let Ni=0,Si;Ni<ji;Ni=Si){Si=Math.min(ji,Ni+Pi);for(let Ti=0;Ti<ai;Ti++)for(let Ri=Ni+Ti;Ri<Si;Ri+=ai){if(!Yn[Ri]||Fi[Ri]&zi)continue;let Mi=16;Fi[Ri]&_i&&(Fi[Ri]^=_i,Mi=(ci[Ri]&127)===0?15:14);const Ui=Qn.readBit(bi,Mi);Yn[Ri]=Yn[Ri]<<1|Ui,Ci[Ri]++,Fi[Ri]|=zi}}}runCleanupPass(){const Qn=this.decoder,ai=this.width,Vn=this.height,Yn=this.neighborsSignificance,ci=this.coefficentsMagnitude,bi=this.coefficentsSign,Ci=this.contexts,Fi=this.contextLabelTable,zi=this.bitsDecoded,_i=this.processingFlags,ji=1,Pi=2,Ni=ai,Si=ai*2,Ti=ai*3;let Ri;for(let Mi=0;Mi<Vn;Mi=Ri){Ri=Math.min(Mi+4,Vn);const Ui=Mi*ai,Hi=Mi+3<Vn;for(let Li=0;Li<ai;Li++){const Ei=Ui+Li,$i=Hi&&_i[Ei]===0&&_i[Ei+Ni]===0&&_i[Ei+Si]===0&&_i[Ei+Ti]===0&&Yn[Ei]===0&&Yn[Ei+Ni]===0&&Yn[Ei+Si]===0&&Yn[Ei+Ti]===0;let Bi=0,Oi=Ei,Xi=Mi,Gi;if($i){if(!Qn.readBit(Ci,Ii.RUNLENGTH_CONTEXT)){zi[Ei]++,zi[Ei+Ni]++,zi[Ei+Si]++,zi[Ei+Ti]++;continue}Bi=Qn.readBit(Ci,Ii.UNIFORM_CONTEXT)<<1|Qn.readBit(Ci,Ii.UNIFORM_CONTEXT),Bi!==0&&(Xi=Mi+Bi,Oi+=Bi*ai),Gi=this.decodeSignBit(Xi,Li,Oi),bi[Oi]=Gi,ci[Oi]=1,this.setNeighborsSignificance(Xi,Li,Oi),_i[Oi]|=Pi,Oi=Ei;for(let ns=Mi;ns<=Xi;ns++,Oi+=ai)zi[Oi]++;Bi++}for(Xi=Mi+Bi;Xi<Ri;Xi++,Oi+=ai){if(ci[Oi]||_i[Oi]&ji)continue;const qi=Fi[Yn[Oi]];Qn.readBit(Ci,qi)===1&&(Gi=this.decodeSignBit(Xi,Li,Oi),bi[Oi]=Gi,ci[Oi]=1,this.setNeighborsSignificance(Xi,Li,Oi),_i[Oi]|=Pi),zi[Oi]++}}}}checkSegmentationSymbol(){const Qn=this.decoder,ai=this.contexts;if((Qn.readBit(ai,Ii.UNIFORM_CONTEXT)<<3|Qn.readBit(ai,Ii.UNIFORM_CONTEXT)<<2|Qn.readBit(ai,Ii.UNIFORM_CONTEXT)<<1|Qn.readBit(ai,Ii.UNIFORM_CONTEXT))!==10)throw new Cn("Invalid segmentation symbol")}};ta(Ii,"UNIFORM_CONTEXT",17),ta(Ii,"RUNLENGTH_CONTEXT",18),ta(Ii,"LLAndLHContextsLabel",new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8])),ta(Ii,"HLContextLabel",new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8])),ta(Ii,"HHContextLabel",new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]));let li=Ii;class Ai{constructor(){this.constructor===Ai&&(0,In.unreachable)("Cannot initialize Transform.")}calculate(Qn,ai,Vn){let Yn=Qn[0];for(let ci=1,bi=Qn.length;ci<bi;ci++)Yn=this.iterate(Yn,Qn[ci],ai,Vn);return Yn}extend(Qn,ai,Vn){let Yn=ai-1,ci=ai+1,bi=ai+Vn-2,Ci=ai+Vn;Qn[Yn--]=Qn[ci++],Qn[Ci++]=Qn[bi--],Qn[Yn--]=Qn[ci++],Qn[Ci++]=Qn[bi--],Qn[Yn--]=Qn[ci++],Qn[Ci++]=Qn[bi--],Qn[Yn]=Qn[ci],Qn[Ci]=Qn[bi]}filter(Qn,ai,Vn){(0,In.unreachable)("Abstract method `filter` called")}iterate(Qn,ai,Vn,Yn){const ci=Qn.width,bi=Qn.height;let Ci=Qn.items;const Fi=ai.width,zi=ai.height,_i=ai.items;let ji,Pi,Ni,Si,Ti,Ri;for(Ni=0,ji=0;ji<bi;ji++)for(Si=ji*2*Fi,Pi=0;Pi<ci;Pi++,Ni++,Si+=2)_i[Si]=Ci[Ni];Ci=Qn.items=null;const Mi=4,Ui=new Float32Array(Fi+2*Mi);if(Fi===1){if(Vn&1)for(Ri=0,Ni=0;Ri<zi;Ri++,Ni+=Fi)_i[Ni]*=.5}else for(Ri=0,Ni=0;Ri<zi;Ri++,Ni+=Fi)Ui.set(_i.subarray(Ni,Ni+Fi),Mi),this.extend(Ui,Mi,Fi),this.filter(Ui,Mi,Fi),_i.set(Ui.subarray(Mi,Mi+Fi),Ni);let Hi=16;const Li=[];for(ji=0;ji<Hi;ji++)Li.push(new Float32Array(zi+2*Mi));let Ei,$i=0;if(Qn=Mi+zi,zi===1){if(Yn&1)for(Ti=0;Ti<Fi;Ti++)_i[Ti]*=.5}else for(Ti=0;Ti<Fi;Ti++){if($i===0){for(Hi=Math.min(Fi-Ti,Hi),Ni=Ti,Si=Mi;Si<Qn;Ni+=Fi,Si++)for(Ei=0;Ei<Hi;Ei++)Li[Ei][Si]=_i[Ni+Ei];$i=Hi}$i--;const Bi=Li[$i];if(this.extend(Bi,Mi,zi),this.filter(Bi,Mi,zi),$i===0)for(Ni=Ti-Hi+1,Si=Mi;Si<Qn;Ni+=Fi,Si++)for(Ei=0;Ei<Hi;Ei++)_i[Ni+Ei]=Li[Ei][Si]}return{width:Fi,height:zi,items:_i}}}class gi extends Ai{filter(Qn,ai,Vn){const Yn=Vn>>1;ai|=0;let ci,bi,Ci,Fi;const zi=-1.586134342059924,_i=-.052980118572961,ji=.882911075530934,Pi=.443506852043971,Ni=1.230174104914001,Si=1/Ni;for(ci=ai-3,bi=Yn+4;bi--;ci+=2)Qn[ci]*=Si;for(ci=ai-2,Ci=Pi*Qn[ci-1],bi=Yn+3;bi--&&(Fi=Pi*Qn[ci+1],Qn[ci]=Ni*Qn[ci]-Ci-Fi,bi--);ci+=2)ci+=2,Ci=Pi*Qn[ci+1],Qn[ci]=Ni*Qn[ci]-Ci-Fi;for(ci=ai-1,Ci=ji*Qn[ci-1],bi=Yn+2;bi--&&(Fi=ji*Qn[ci+1],Qn[ci]-=Ci+Fi,bi--);ci+=2)ci+=2,Ci=ji*Qn[ci+1],Qn[ci]-=Ci+Fi;for(ci=ai,Ci=_i*Qn[ci-1],bi=Yn+1;bi--&&(Fi=_i*Qn[ci+1],Qn[ci]-=Ci+Fi,bi--);ci+=2)ci+=2,Ci=_i*Qn[ci+1],Qn[ci]-=Ci+Fi;if(Yn!==0)for(ci=ai+1,Ci=zi*Qn[ci-1],bi=Yn;bi--&&(Fi=zi*Qn[ci+1],Qn[ci]-=Ci+Fi,bi--);ci+=2)ci+=2,Ci=zi*Qn[ci+1],Qn[ci]-=Ci+Fi}}class yi extends Ai{filter(Qn,ai,Vn){const Yn=Vn>>1;ai|=0;let ci,bi;for(ci=ai,bi=Yn+1;bi--;ci+=2)Qn[ci]-=Qn[ci-1]+Qn[ci+1]+2>>2;for(ci=ai+1,bi=Yn;bi--;ci+=2)Qn[ci]+=Qn[ci-1]+Qn[ci+1]>>1}}},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.LZWStream=void 0;var In=ti(18);class Ln extends In.DecodeStream{constructor(Cn,Tn,Rn){super(Tn),this.str=Cn,this.dict=Cn.dict,this.cachedData=0,this.bitsCached=0;const ui=4096,si={earlyChange:Rn,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(ui),dictionaryLengths:new Uint16Array(ui),dictionaryPrevCodes:new Uint16Array(ui),currentSequence:new Uint8Array(ui),currentSequenceLength:0};for(let ei=0;ei<256;++ei)si.dictionaryValues[ei]=ei,si.dictionaryLengths[ei]=1;this.lzwState=si}readBits(Cn){let Tn=this.bitsCached,Rn=this.cachedData;for(;Tn<Cn;){const ui=this.str.getByte();if(ui===-1)return this.eof=!0,null;Rn=Rn<<8|ui,Tn+=8}return this.bitsCached=Tn-=Cn,this.cachedData=Rn,this.lastCode=null,Rn>>>Tn&(1<<Cn)-1}readBlock(){let Rn=1024,ui,si,ei;const Bn=this.lzwState;if(!Bn)return;const Nn=Bn.earlyChange;let Hn=Bn.nextCode;const On=Bn.dictionaryValues,hi=Bn.dictionaryLengths,Xn=Bn.dictionaryPrevCodes;let ii=Bn.codeLength,ri=Bn.prevCode;const di=Bn.currentSequence;let fi=Bn.currentSequenceLength,wi=0,Jn=this.bufferLength,pi=this.ensureBuffer(this.bufferLength+Rn);for(ui=0;ui<512;ui++){const Zn=this.readBits(ii),Gn=fi>0;if(Zn<256)di[0]=Zn,fi=1;else if(Zn>=258)if(Zn<Hn)for(fi=hi[Zn],si=fi-1,ei=Zn;si>=0;si--)di[si]=On[ei],ei=Xn[ei];else di[fi++]=di[0];else if(Zn===256){ii=9,Hn=258,fi=0;continue}else{this.eof=!0,delete this.lzwState;break}if(Gn&&(Xn[Hn]=ri,hi[Hn]=hi[ri]+1,On[Hn]=di[0],Hn++,ii=Hn+Nn&Hn+Nn-1?ii:Math.min(Math.log(Hn+Nn)/.6931471805599453+1,12)|0),ri=Zn,wi+=fi,Rn<wi){do Rn+=512;while(Rn<wi);pi=this.ensureBuffer(this.bufferLength+Rn)}for(si=0;si<fi;si++)pi[Jn++]=di[si]}Bn.nextCode=Hn,Bn.codeLength=ii,Bn.prevCode=ri,Bn.currentSequenceLength=fi,this.bufferLength=Jn}}Mn.LZWStream=Ln},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.PredictorStream=void 0;var In=ti(18),Ln=ti(4),jn=ti(2);class Cn extends In.DecodeStream{constructor(Rn,ui,si){if(super(ui),!(si instanceof Ln.Dict))return Rn;const ei=this.predictor=si.get("Predictor")||1;if(ei<=1)return Rn;if(ei!==2&&(ei<10||ei>15))throw new jn.FormatError(`Unsupported predictor: ${ei}`);this.readBlock=ei===2?this.readBlockTiff:this.readBlockPng,this.str=Rn,this.dict=Rn.dict;const Bn=this.colors=si.get("Colors")||1,Nn=this.bits=si.get("BPC","BitsPerComponent")||8,Hn=this.columns=si.get("Columns")||1;return this.pixBytes=Bn*Nn+7>>3,this.rowBytes=Hn*Bn*Nn+7>>3,this}readBlockTiff(){const Rn=this.rowBytes,ui=this.bufferLength,si=this.ensureBuffer(ui+Rn),ei=this.bits,Bn=this.colors,Nn=this.str.getBytes(Rn);if(this.eof=!Nn.length,this.eof)return;let Hn=0,On=0,hi=0,Xn=0,ii=ui,ri;if(ei===1&&Bn===1)for(ri=0;ri<Rn;++ri){let di=Nn[ri]^Hn;di^=di>>1,di^=di>>2,di^=di>>4,Hn=(di&1)<<7,si[ii++]=di}else if(ei===8){for(ri=0;ri<Bn;++ri)si[ii++]=Nn[ri];for(;ri<Rn;++ri)si[ii]=si[ii-Bn]+Nn[ri],ii++}else if(ei===16){const di=Bn*2;for(ri=0;ri<di;++ri)si[ii++]=Nn[ri];for(;ri<Rn;ri+=2){const fi=((Nn[ri]&255)<<8)+(Nn[ri+1]&255)+((si[ii-di]&255)<<8)+(si[ii-di+1]&255);si[ii++]=fi>>8&255,si[ii++]=fi&255}}else{const di=new Uint8Array(Bn+1),fi=(1<<ei)-1;let wi=0,Jn=ui;const pi=this.columns;for(ri=0;ri<pi;++ri)for(let Zn=0;Zn<Bn;++Zn)hi<ei&&(Hn=Hn<<8|Nn[wi++]&255,hi+=8),di[Zn]=di[Zn]+(Hn>>hi-ei)&fi,hi-=ei,On=On<<ei|di[Zn],Xn+=ei,Xn>=8&&(si[Jn++]=On>>Xn-8&255,Xn-=8);Xn>0&&(si[Jn++]=(On<<8-Xn)+(Hn&(1<<8-Xn)-1))}this.bufferLength+=Rn}readBlockPng(){const Rn=this.rowBytes,ui=this.pixBytes,si=this.str.getByte(),ei=this.str.getBytes(Rn);if(this.eof=!ei.length,this.eof)return;const Bn=this.bufferLength,Nn=this.ensureBuffer(Bn+Rn);let Hn=Nn.subarray(Bn-Rn,Bn);Hn.length===0&&(Hn=new Uint8Array(Rn));let On,hi=Bn,Xn,ii;switch(si){case 0:for(On=0;On<Rn;++On)Nn[hi++]=ei[On];break;case 1:for(On=0;On<ui;++On)Nn[hi++]=ei[On];for(;On<Rn;++On)Nn[hi]=Nn[hi-ui]+ei[On]&255,hi++;break;case 2:for(On=0;On<Rn;++On)Nn[hi++]=Hn[On]+ei[On]&255;break;case 3:for(On=0;On<ui;++On)Nn[hi++]=(Hn[On]>>1)+ei[On];for(;On<Rn;++On)Nn[hi]=(Hn[On]+Nn[hi-ui]>>1)+ei[On]&255,hi++;break;case 4:for(On=0;On<ui;++On)Xn=Hn[On],ii=ei[On],Nn[hi++]=Xn+ii;for(;On<Rn;++On){Xn=Hn[On];const ri=Hn[On-ui],di=Nn[hi-ui],fi=di+Xn-ri;let wi=fi-di;wi<0&&(wi=-wi);let Jn=fi-Xn;Jn<0&&(Jn=-Jn);let pi=fi-ri;pi<0&&(pi=-pi),ii=ei[On],wi<=Jn&&wi<=pi?Nn[hi++]=di+ii:Jn<=pi?Nn[hi++]=Xn+ii:Nn[hi++]=ri+ii}break;default:throw new jn.FormatError(`Unsupported predictor: ${si}`)}this.bufferLength+=Rn}}Mn.PredictorStream=Cn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.RunLengthStream=void 0;var In=ti(18);class Ln extends In.DecodeStream{constructor(Cn,Tn){super(Tn),this.str=Cn,this.dict=Cn.dict}readBlock(){const Cn=this.str.getBytes(2);if(!Cn||Cn.length<2||Cn[0]===128){this.eof=!0;return}let Tn,Rn=this.bufferLength,ui=Cn[0];if(ui<128){if(Tn=this.ensureBuffer(Rn+ui+1),Tn[Rn++]=Cn[1],ui>0){const si=this.str.getBytes(ui);Tn.set(si,Rn),Rn+=ui}}else{ui=257-ui;const si=Cn[1];Tn=this.ensureBuffer(Rn+ui+1);for(let ei=0;ei<ui;ei++)Tn[Rn++]=si}this.bufferLength=Rn}}Mn.RunLengthStream=Ln},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.Font=Mn.ErrorFont=void 0;var In=ti(2),Ln=ti(35),jn=ti(38),Cn=ti(40),Tn=ti(39),Rn=ti(37),ui=ti(41),si=ti(42),ei=ti(43),Bn=ti(44),Nn=ti(45),Hn=ti(46),On=ti(14),hi=ti(47),Xn=ti(3),ii=ti(8),ri=ti(48);const di=[[57344,63743],[1048576,1114109]],fi=1e3,wi=["ascent","bbox","black","bold","charProcOperatorList","composite","cssFontInfo","data","defaultVMetrics","defaultWidth","descent","fallbackName","fontMatrix","isInvalidPDFjsFont","isType3Font","italic","loadedName","mimetype","missingFile","name","remeasure","subtype","systemFontInfo","type","vertical"],Jn=["cMap","defaultEncoding","differences","isMonospace","isSerifFont","isSymbolicFont","seacMap","toFontChar","toUnicode","vmetrics","widths"];function pi(Ei){if(!Ei.fontMatrix||Ei.fontMatrix[0]===In.FONT_IDENTITY_MATRIX[0])return;const $i=.001/Ei.fontMatrix[0],Bi=Ei.widths;for(const Oi in Bi)Bi[Oi]*=$i;Ei.defaultWidth*=$i}function Zn(Ei,$i,Bi){if(Ei.isInternalFont||Ei.hasIncludedToUnicodeMap||Ei.hasEncoding||Ei.toUnicode instanceof si.IdentityToUnicodeMap||!$i||Bi.length===0||Ei.defaultEncoding===Rn.WinAnsiEncoding)return;for(const qi of Bi)if(!zi(qi))return;const Oi=Rn.WinAnsiEncoding,Xi=[],Gi=(0,Tn.getGlyphsUnicode)();for(const qi in Oi){const ns=Oi[qi];if(ns==="")continue;const is=Gi[ns];is!==void 0&&(Xi[qi]=String.fromCharCode(is))}Xi.length>0&&Ei.toUnicode.amend(Xi)}function Gn(Ei,$i){if(Ei.isInternalFont||Ei.hasIncludedToUnicodeMap||$i===Ei.defaultEncoding||Ei.toUnicode instanceof si.IdentityToUnicodeMap)return;const Bi=[],Oi=(0,Tn.getGlyphsUnicode)();for(const Xi in $i){if(Ei.hasEncoding&&(Ei.baseEncodingName||Ei.differences[Xi]!==void 0))continue;const Gi=$i[Xi],qi=(0,Cn.getUnicodeForGlyph)(Gi,Oi);qi!==-1&&(Bi[Xi]=String.fromCharCode(qi))}Bi.length>0&&Ei.toUnicode.amend(Bi)}function mi(Ei){if(!Ei.fallbackToUnicode||Ei.toUnicode instanceof si.IdentityToUnicodeMap)return;const $i=[];for(const Bi in Ei.fallbackToUnicode)Ei.toUnicode.has(Bi)||($i[Bi]=Ei.fallbackToUnicode[Bi]);$i.length>0&&Ei.toUnicode.amend($i)}class Wn{constructor($i,Bi,Oi,Xi,Gi,qi,ns,is,as){this.originalCharCode=$i,this.fontChar=Bi,this.unicode=Oi,this.accent=Xi,this.width=Gi,this.vmetric=qi,this.operatorListId=ns,this.isSpace=is,this.isInFont=as}get category(){return(0,In.shadow)(this,"category",(0,Cn.getCharUnicodeCategory)(this.unicode),!0)}}function ni(Ei,$i){return(Ei<<8)+$i}function li(Ei,$i,Bi){Ei[$i+1]=Bi,Ei[$i]=Bi>>>8}function Ai(Ei,$i){const Bi=(Ei<<8)+$i;return Bi&32768?Bi-65536:Bi}function gi(Ei,$i,Bi,Oi){return(Ei<<24)+($i<<16)+(Bi<<8)+Oi}function yi(Ei){return String.fromCharCode(Ei>>8&255,Ei&255)}function Ii(Ei){return Ei>32767?Ei=32767:Ei<-32768&&(Ei=-32768),String.fromCharCode(Ei>>8&255,Ei&255)}function xi(Ei){const $i=Ei.peekBytes(4);return(0,Xn.readUint32)($i,0)===65536||(0,In.bytesToString)($i)==="true"}function Qn(Ei){const $i=Ei.peekBytes(4);return(0,In.bytesToString)($i)==="ttcf"}function ai(Ei){const $i=Ei.peekBytes(4);return(0,In.bytesToString)($i)==="OTTO"}function Vn(Ei){const $i=Ei.peekBytes(2);return $i[0]===37&&$i[1]===33||$i[0]===128&&$i[1]===1}function Yn(Ei){const $i=Ei.peekBytes(4);return $i[0]>=1&&$i[3]>=1&&$i[3]<=4}function ci(Ei,{type:$i,subtype:Bi,composite:Oi}){let Xi,Gi;return xi(Ei)||Qn(Ei)?Xi=Oi?"CIDFontType2":"TrueType":ai(Ei)?Xi=Oi?"CIDFontType2":"OpenType":Vn(Ei)?Oi?Xi="CIDFontType0":Xi=$i==="MMType1"?"MMType1":"Type1":Yn(Ei)?Oi?(Xi="CIDFontType0",Gi="CIDFontType0C"):(Xi=$i==="MMType1"?"MMType1":"Type1",Gi="Type1C"):((0,In.warn)("getFontFileType: Unable to detect correct font file Type/Subtype."),Xi=$i,Gi=Bi),[Xi,Gi]}function bi(Ei,$i){for(const Bi in $i)Ei[+Bi]=$i[Bi]}function Ci(Ei,$i,Bi){const Oi=[];let Xi;for(let Gi=0,qi=Ei.length;Gi<qi;Gi++)Xi=(0,Cn.getUnicodeForGlyph)(Ei[Gi],$i),Xi!==-1&&(Oi[Gi]=Xi);for(const Gi in Bi)Xi=(0,Cn.getUnicodeForGlyph)(Bi[Gi],$i),Xi!==-1&&(Oi[+Gi]=Xi);return Oi}function Fi(Ei){return Ei.platform===1&&Ei.encoding===0&&Ei.language===0}function zi(Ei){return Ei.platform===3&&Ei.encoding===1&&Ei.language===1033}function _i(Ei,$i,Bi=!1){switch($i.length){case 1:return $i.charCodeAt(0);case 2:return $i.charCodeAt(0)<<8|$i.charCodeAt(1)}const Oi=`Unsupported CID string (charCode ${Ei}): "${$i}".`;if(Bi)throw new In.FormatError(Oi);return(0,In.warn)(Oi),$i}function ji(Ei,$i,Bi,Oi){const Xi=Object.create(null),Gi=new Map,qi=[],ns=new Set;let is=0,hs=di[is][0],Yi=di[is][1];const Vi=Zi=>di[0][0]<=Zi&&Zi<=di[0][1]||di[1][0]<=Zi&&Zi<=di[1][1];for(let Zi in Ei){Zi|=0;let us=Ei[Zi];if(!$i(us))continue;if(hs>Yi){if(is++,is>=di.length){(0,In.warn)("Ran out of space in font private use area.");break}hs=di[is][0],Yi=di[is][1]}const ts=hs++;us===0&&(us=Bi);let es=Oi.get(Zi);typeof es=="string"&&(es=es.codePointAt(0)),es&&!Vi(es)&&!ns.has(us)&&(Gi.set(es,us),ns.add(us)),Xi[ts]=us,qi[Zi]=ts}return{toFontChar:qi,charCodeToGlyphId:Xi,toUnicodeExtraMap:Gi,nextAvailableFontCharCode:hs}}function Pi(Ei,$i,Bi){const Oi=[];for(const qi in Ei)Ei[qi]>=Bi||Oi.push({fontCharCode:qi|0,glyphId:Ei[qi]});if($i)for(const[qi,ns]of $i)ns>=Bi||Oi.push({fontCharCode:qi,glyphId:ns});Oi.length===0&&Oi.push({fontCharCode:0,glyphId:0}),Oi.sort(function(ns,is){return ns.fontCharCode-is.fontCharCode});const Xi=[],Gi=Oi.length;for(let qi=0;qi<Gi;){const ns=Oi[qi].fontCharCode,is=[Oi[qi].glyphId];++qi;let as=ns;for(;qi<Gi&&as+1===Oi[qi].fontCharCode&&(is.push(Oi[qi].glyphId),++as,++qi,as!==65535););Xi.push([ns,as,is])}return Xi}function Ni(Ei,$i,Bi){const Oi=Pi(Ei,$i,Bi),Xi=Oi.at(-1)[1]>65535?2:1;let Gi="\0\0"+yi(Xi)+"\0\0"+(0,In.string32)(4+Xi*8),qi,ns,is,as;for(qi=Oi.length-1;qi>=0&&!(Oi[qi][0]<=65535);--qi);const hs=qi+1;Oi[qi][0]<65535&&Oi[qi][1]===65535&&(Oi[qi][1]=65534);const Yi=Oi[qi][1]<65535?1:0,Vi=hs+Yi,Zi=hi.OpenTypeFileBuilder.getSearchParams(Vi,2);let us="",ts="",es="",rs="",ss="",os=0,ks,xs,Rs,ms;for(qi=0,ns=hs;qi<ns;qi++){ks=Oi[qi],xs=ks[0],Rs=ks[1],us+=yi(xs),ts+=yi(Rs),ms=ks[2];let Is=!0;for(is=1,as=ms.length;is<as;++is)if(ms[is]!==ms[is-1]+1){Is=!1;break}if(Is){const ls=ms[0];es+=yi(ls-xs&65535),rs+=yi(0)}else{const ls=(Vi-qi)*2+os*2;for(os+=Rs-xs+1,es+=yi(0),rs+=yi(ls),is=0,as=ms.length;is<as;++is)ss+=yi(ms[is])}}Yi>0&&(ts+="ÿÿ",us+="ÿÿ",es+="\0",rs+="\0\0");const Bs="\0\0"+yi(2*Vi)+yi(Zi.range)+yi(Zi.entry)+yi(Zi.rangeShift)+ts+"\0\0"+us+es+rs+ss;let ws="",Ts="";if(Xi>1){for(Gi+=`\0\0
`+(0,In.string32)(4+Xi*8+4+Bs.length),ws="",qi=0,ns=Oi.length;qi<ns;qi++){ks=Oi[qi],xs=ks[0],ms=ks[2];let Is=ms[0];for(is=1,as=ms.length;is<as;++is)ms[is]!==ms[is-1]+1&&(Rs=ks[0]+is-1,ws+=(0,In.string32)(xs)+(0,In.string32)(Rs)+(0,In.string32)(Is),xs=Rs+1,Is=ms[is]);ws+=(0,In.string32)(xs)+(0,In.string32)(ks[1])+(0,In.string32)(Is)}Ts="\0\f\0\0"+(0,In.string32)(ws.length+16)+"\0\0\0\0"+(0,In.string32)(ws.length/12)}return Gi+"\0"+yi(Bs.length+4)+Bs+Ts+ws}function Si(Ei,$i){$i.pos=($i.start||0)+Ei.offset;const Bi=$i.getUint16();$i.skip(60);const Oi=$i.getUint16();if(Bi<4&&Oi&768)return!1;const Xi=$i.getUint16(),Gi=$i.getUint16();return Xi>Gi||($i.skip(6),$i.getUint16()===0)?!1:(Ei.data[8]=Ei.data[9]=0,!0)}function Ti(Ei,$i,Bi){Bi||(Bi={unitsPerEm:0,yMax:0,yMin:0,ascent:0,descent:0});let Oi=0,Xi=0,Gi=0,qi=0,ns=null,is=0,as=-1;if($i){for(let rs in $i)if(rs|=0,(ns>rs||!ns)&&(ns=rs),is<rs&&(is=rs),as=(0,Cn.getUnicodeRangeFor)(rs,as),as<32)Oi|=1<<as;else if(as<64)Xi|=1<<as-32;else if(as<96)Gi|=1<<as-64;else if(as<123)qi|=1<<as-96;else throw new In.FormatError("Unicode ranges Bits > 123 are reserved for internal usage");is>65535&&(is=65535)}else ns=0,is=255;const hs=Ei.bbox||[0,0,0,0],Yi=Bi.unitsPerEm||1/(Ei.fontMatrix||In.FONT_IDENTITY_MATRIX)[0],Vi=Ei.ascentScaled?1:Yi/fi,Zi=Bi.ascent||Math.round(Vi*(Ei.ascent||hs[3]));let us=Bi.descent||Math.round(Vi*(Ei.descent||hs[1]));us>0&&Ei.descent>0&&hs[1]<0&&(us=-us);const ts=Bi.yMax||Zi,es=-Bi.yMin||-us;return"\0$ô\0\0\0»\0\0\0»\0\0ß\x001\0\0\0\0"+String.fromCharCode(Ei.fixedPitch?9:0)+"\0\0\0\0\0\0"+(0,In.string32)(Oi)+(0,In.string32)(Xi)+(0,In.string32)(Gi)+(0,In.string32)(qi)+"*21*"+yi(Ei.italicAngle?1:0)+yi(ns||Ei.firstChar)+yi(is||Ei.lastChar)+yi(Zi)+yi(us)+"\0d"+yi(ts)+yi(es)+"\0\0\0\0\0\0\0\0"+yi(Ei.xHeight)+yi(Ei.capHeight)+yi(0)+yi(ns||Ei.firstChar)+"\0"}function Ri(Ei){const $i=Math.floor(Ei.italicAngle*65536);return"\0\0\0"+(0,In.string32)($i)+"\0\0\0\0"+(0,In.string32)(Ei.fixedPitch?1:0)+"\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"}function Mi(Ei){return Ei.replaceAll(/[^\x21-\x7E]|[[\](){}<>/%]/g,"").slice(0,63)}function Ui(Ei,$i){$i||($i=[[],[]]);const Bi=[$i[0][0]||"Original licence",$i[0][1]||Ei,$i[0][2]||"Unknown",$i[0][3]||"uniqueID",$i[0][4]||Ei,$i[0][5]||"Version 0.11",$i[0][6]||Mi(Ei),$i[0][7]||"Unknown",$i[0][8]||"Unknown",$i[0][9]||"Unknown"],Oi=[];let Xi,Gi,qi,ns,is;for(Xi=0,Gi=Bi.length;Xi<Gi;Xi++){is=$i[1][Xi]||Bi[Xi];const es=[];for(qi=0,ns=is.length;qi<ns;qi++)es.push(yi(is.charCodeAt(qi)));Oi.push(es.join(""))}const as=[Bi,Oi],hs=["\0","\0"],Yi=["\0\0","\0"],Vi=["\0\0","	"],Zi=Bi.length*hs.length;let us="\0\0"+yi(Zi)+yi(Zi*12+6),ts=0;for(Xi=0,Gi=hs.length;Xi<Gi;Xi++){const es=as[Xi];for(qi=0,ns=es.length;qi<ns;qi++){is=es[qi];const rs=hs[Xi]+Yi[Xi]+Vi[Xi]+yi(qi)+yi(is.length)+yi(ts);us+=rs,ts+=is.length}}return us+=Bi.join("")+Oi.join(""),us}class Hi{constructor($i,Bi,Oi){var as;this.name=$i,this.psName=null,this.mimetype=null,this.disableFontFace=!1,this.loadedName=Oi.loadedName,this.isType3Font=Oi.isType3Font,this.missingFile=!1,this.cssFontInfo=Oi.cssFontInfo,this._charsCache=Object.create(null),this._glyphCache=Object.create(null);let Xi=!!(Oi.flags&jn.FontFlags.Serif);if(!Xi&&!Oi.isSimulatedFlags){const hs=$i.replaceAll(/[,_]/g,"-").split("-")[0],Yi=(0,ui.getSerifFonts)();for(const Vi of hs.split("+"))if(Yi[Vi]){Xi=!0;break}}this.isSerifFont=Xi,this.isSymbolicFont=!!(Oi.flags&jn.FontFlags.Symbolic),this.isMonospace=!!(Oi.flags&jn.FontFlags.FixedPitch);let{type:Gi,subtype:qi}=Oi;this.type=Gi,this.subtype=qi,this.systemFontInfo=Oi.systemFontInfo;const ns=$i.match(/^InvalidPDFjsFont_(.*)_\d+$/);if(this.isInvalidPDFjsFont=!!ns,this.isInvalidPDFjsFont?this.fallbackName=ns[1]:this.isMonospace?this.fallbackName="monospace":this.isSerifFont?this.fallbackName="serif":this.fallbackName="sans-serif",(as=this.systemFontInfo)!=null&&as.guessFallback&&(this.systemFontInfo.guessFallback=!1,this.systemFontInfo.css+=`,${this.fallbackName}`),this.differences=Oi.differences,this.widths=Oi.widths,this.defaultWidth=Oi.defaultWidth,this.composite=Oi.composite,this.cMap=Oi.cMap,this.capHeight=Oi.capHeight/fi,this.ascent=Oi.ascent/fi,this.descent=Oi.descent/fi,this.lineHeight=this.ascent-this.descent,this.fontMatrix=Oi.fontMatrix,this.bbox=Oi.bbox,this.defaultEncoding=Oi.defaultEncoding,this.toUnicode=Oi.toUnicode,this.toFontChar=[],Oi.type==="Type3"){for(let hs=0;hs<256;hs++)this.toFontChar[hs]=this.differences[hs]||Oi.defaultEncoding[hs];return}if(this.cidEncoding=Oi.cidEncoding||"",this.vertical=!!Oi.vertical,this.vertical&&(this.vmetrics=Oi.vmetrics,this.defaultVMetrics=Oi.defaultVMetrics),!Bi||Bi.isEmpty){Bi&&(0,In.warn)('Font file is empty in "'+$i+'" ('+this.loadedName+")"),this.fallbackToSystemFont(Oi);return}[Gi,qi]=ci(Bi,Oi),(Gi!==this.type||qi!==this.subtype)&&(0,In.info)(`Inconsistent font file Type/SubType, expected: ${this.type}/${this.subtype} but found: ${Gi}/${qi}.`);let is;try{switch(Gi){case"MMType1":(0,In.info)("MMType1 font ("+$i+"), falling back to Type1.");case"Type1":case"CIDFontType0":this.mimetype="font/opentype";const hs=qi==="Type1C"||qi==="CIDFontType0C"?new ei.CFFFont(Bi,Oi):new ri.Type1Font($i,Bi,Oi);pi(Oi),is=this.convert($i,hs,Oi);break;case"OpenType":case"TrueType":case"CIDFontType2":this.mimetype="font/opentype",is=this.checkAndRepair($i,Bi,Oi),this.isOpenType&&(pi(Oi),Gi="OpenType");break;default:throw new In.FormatError(`Font ${Gi} is not supported`)}}catch(hs){(0,In.warn)(hs),this.fallbackToSystemFont(Oi);return}mi(Oi),this.data=is,this.type=Gi,this.subtype=qi,this.fontMatrix=Oi.fontMatrix,this.widths=Oi.widths,this.defaultWidth=Oi.defaultWidth,this.toUnicode=Oi.toUnicode,this.seacMap=Oi.seacMap}get renderer(){const $i=Bn.FontRendererFactory.create(this,jn.SEAC_ANALYSIS_ENABLED);return(0,In.shadow)(this,"renderer",$i)}exportData($i=!1){const Bi=$i?[...wi,...Jn]:wi,Oi=Object.create(null);let Xi,Gi;for(Xi of Bi)Gi=this[Xi],Gi!==void 0&&(Oi[Xi]=Gi);return Oi}fallbackToSystemFont($i){this.missingFile=!0;const{name:Bi,type:Oi}=this;let Xi=(0,jn.normalizeFontName)(Bi);const Gi=(0,ui.getStdFontMap)(),qi=(0,ui.getNonStdFontMap)(),ns=!!Gi[Xi],is=!!(qi[Xi]&&Gi[qi[Xi]]);Xi=Gi[Xi]||qi[Xi]||Xi;const hs=(0,Nn.getFontBasicMetrics)()[Xi];hs&&(isNaN(this.ascent)&&(this.ascent=hs.ascent/fi),isNaN(this.descent)&&(this.descent=hs.descent/fi),isNaN(this.capHeight)&&(this.capHeight=hs.capHeight/fi)),this.bold=/bold/gi.test(Xi),this.italic=/oblique|italic/gi.test(Xi),this.black=/Black/g.test(Bi);const Yi=/Narrow/g.test(Bi);if(this.remeasure=(!ns||Yi)&&Object.keys(this.widths).length>0,(ns||is)&&Oi==="CIDFontType2"&&this.cidEncoding.startsWith("Identity-")){const Vi=$i.cidToGidMap,Zi=[];if(bi(Zi,(0,ui.getGlyphMapForStandardFonts)()),/Arial-?Black/i.test(Bi)?bi(Zi,(0,ui.getSupplementalGlyphMapForArialBlack)()):/Calibri/i.test(Bi)&&bi(Zi,(0,ui.getSupplementalGlyphMapForCalibri)()),Vi){for(const us in Zi){const ts=Zi[us];Vi[ts]!==void 0&&(Zi[+us]=Vi[ts])}Vi.length!==this.toUnicode.length&&$i.hasIncludedToUnicodeMap&&this.toUnicode instanceof si.IdentityToUnicodeMap&&this.toUnicode.forEach(function(us,ts){const es=Zi[us];Vi[es]===void 0&&(Zi[+us]=ts)})}this.toUnicode instanceof si.IdentityToUnicodeMap||this.toUnicode.forEach(function(us,ts){Zi[+us]=ts}),this.toFontChar=Zi,this.toUnicode=new si.ToUnicodeMap(Zi)}else if(/Symbol/i.test(Xi))this.toFontChar=Ci(Rn.SymbolSetEncoding,(0,Tn.getGlyphsUnicode)(),this.differences);else if(/Dingbats/i.test(Xi))this.toFontChar=Ci(Rn.ZapfDingbatsEncoding,(0,Tn.getDingbatsGlyphsUnicode)(),this.differences);else if(ns){const Vi=Ci(this.defaultEncoding,(0,Tn.getGlyphsUnicode)(),this.differences);Oi==="CIDFontType2"&&!this.cidEncoding.startsWith("Identity-")&&!(this.toUnicode instanceof si.IdentityToUnicodeMap)&&this.toUnicode.forEach(function(Zi,us){Vi[+Zi]=us}),this.toFontChar=Vi}else{const Vi=(0,Tn.getGlyphsUnicode)(),Zi=[];this.toUnicode.forEach((us,ts)=>{if(!this.composite){const es=this.differences[us]||this.defaultEncoding[us],rs=(0,Cn.getUnicodeForGlyph)(es,Vi);rs!==-1&&(ts=rs)}Zi[+us]=ts}),this.composite&&this.toUnicode instanceof si.IdentityToUnicodeMap&&/Tahoma|Verdana/i.test(Bi)&&bi(Zi,(0,ui.getGlyphMapForStandardFonts)()),this.toFontChar=Zi}mi($i),this.loadedName=Xi.split("-")[0]}checkAndRepair($i,Bi,Oi){var Ms,js,Vs;const Xi=["OS/2","cmap","head","hhea","hmtx","maxp","name","post","loca","glyf","fpgm","prep","cvt ","CFF "];function Gi(Ss,As){const Es=Object.create(null);Es["OS/2"]=null,Es.cmap=null,Es.head=null,Es.hhea=null,Es.hmtx=null,Es.maxp=null,Es.name=null,Es.post=null;for(let Os=0;Os<As;Os++){const $s=qi(Ss);Xi.includes($s.tag)&&$s.length!==0&&(Es[$s.tag]=$s)}return Es}function qi(Ss){const As=Ss.getString(4),Es=Ss.getInt32()>>>0,Os=Ss.getInt32()>>>0,$s=Ss.getInt32()>>>0,Ws=Ss.pos;Ss.pos=Ss.start||0,Ss.skip(Os);const Ns=Ss.getBytes($s);return Ss.pos=Ws,As==="head"&&(Ns[8]=Ns[9]=Ns[10]=Ns[11]=0,Ns[17]|=32),{tag:As,checksum:Es,length:$s,offset:Os,data:Ns}}function ns(Ss){return{version:Ss.getString(4),numTables:Ss.getUint16(),searchRange:Ss.getUint16(),entrySelector:Ss.getUint16(),rangeShift:Ss.getUint16()}}function is(Ss){const As=Ss.getString(4);(0,In.assert)(As==="ttcf","Must be a TrueType Collection font.");const Es=Ss.getUint16(),Os=Ss.getUint16(),$s=Ss.getInt32()>>>0,Ws=[];for(let Ls=0;Ls<$s;Ls++)Ws.push(Ss.getInt32()>>>0);const Ns={ttcTag:As,majorVersion:Es,minorVersion:Os,numFonts:$s,offsetTable:Ws};switch(Es){case 1:return Ns;case 2:return Ns.dsigTag=Ss.getInt32()>>>0,Ns.dsigLength=Ss.getInt32()>>>0,Ns.dsigOffset=Ss.getInt32()>>>0,Ns}throw new In.FormatError(`Invalid TrueType Collection majorVersion: ${Es}.`)}function as(Ss,As){var Ns;const{numFonts:Es,offsetTable:Os}=is(Ss),$s=As.split("+");let Ws;for(let Ls=0;Ls<Es;Ls++){Ss.pos=(Ss.start||0)+Os[Ls];const zs=ns(Ss),Qs=Gi(Ss,zs.numTables);if(!Qs.name)throw new In.FormatError('TrueType Collection font must contain a "name" table.');const[ca]=es(Qs.name);for(let Js=0,Zs=ca.length;Js<Zs;Js++)for(let aa=0,Gs=ca[Js].length;aa<Gs;aa++){const ea=(Ns=ca[Js][aa])==null?void 0:Ns.replaceAll(/\s/g,"");if(ea){if(ea===As)return{header:zs,tables:Qs};if(!($s.length<2))for(const Xs of $s)ea===Xs&&(Ws={name:Xs,header:zs,tables:Qs})}}}if(Ws)return(0,In.warn)(`TrueType Collection does not contain "${As}" font, falling back to "${Ws.name}" font instead.`),{header:Ws.header,tables:Ws.tables};throw new In.FormatError(`TrueType Collection does not contain "${As}" font.`)}function hs(Ss,As,Es,Os){if(!Ss)return(0,In.warn)("No cmap table available."),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};let $s,Ws=(As.start||0)+Ss.offset;As.pos=Ws,As.skip(2);const Ns=As.getUint16();let Ls,zs=!1;for(let Gs=0;Gs<Ns;Gs++){const ea=As.getUint16(),Xs=As.getUint16(),sa=As.getInt32()>>>0;let la=!1;if(!((Ls==null?void 0:Ls.platformId)===ea&&(Ls==null?void 0:Ls.encodingId)===Xs)){if(ea===0&&(Xs===0||Xs===1||Xs===3))la=!0;else if(ea===1&&Xs===0)la=!0;else if(ea===3&&Xs===1&&(Os||!Ls))la=!0,Es||(zs=!0);else if(Es&&ea===3&&Xs===0){la=!0;let va=!0;if(Gs<Ns-1){const na=As.peekBytes(2);ni(na[0],na[1])<ea&&(va=!1)}va&&(zs=!0)}if(la&&(Ls={platformId:ea,encodingId:Xs,offset:sa}),zs)break}}if(Ls&&(As.pos=Ws+Ls.offset),!Ls||As.peekByte()===-1)return(0,In.warn)("Could not find a preferred cmap table."),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};const Qs=As.getUint16();let ca=!1;const Js=[];let Zs,aa;if(Qs===0){for(As.skip(4),Zs=0;Zs<256;Zs++){const Gs=As.getByte();Gs&&Js.push({charCode:Zs,glyphId:Gs})}ca=!0}else if(Qs===2){As.skip(4);const Gs=[];let ea=0;for(let sa=0;sa<256;sa++){const la=As.getUint16()>>3;Gs.push(la),ea=Math.max(la,ea)}const Xs=[];for(let sa=0;sa<=ea;sa++)Xs.push({firstCode:As.getUint16(),entryCount:As.getUint16(),idDelta:Ai(As.getByte(),As.getByte()),idRangePos:As.pos+As.getUint16()});for(let sa=0;sa<256;sa++)if(Gs[sa]===0)As.pos=Xs[0].idRangePos+2*sa,aa=As.getUint16(),Js.push({charCode:sa,glyphId:aa});else{const la=Xs[Gs[sa]];for(Zs=0;Zs<la.entryCount;Zs++){const va=(sa<<8)+Zs+la.firstCode;As.pos=la.idRangePos+2*Zs,aa=As.getUint16(),aa!==0&&(aa=(aa+la.idDelta)%65536),Js.push({charCode:va,glyphId:aa})}}}else if(Qs===4){As.skip(4);const Gs=As.getUint16()>>1;As.skip(6);const ea=[];let Xs;for(Xs=0;Xs<Gs;Xs++)ea.push({end:As.getUint16()});for(As.skip(2),Xs=0;Xs<Gs;Xs++)ea[Xs].start=As.getUint16();for(Xs=0;Xs<Gs;Xs++)ea[Xs].delta=As.getUint16();let sa=0,la;for(Xs=0;Xs<Gs;Xs++){$s=ea[Xs];const na=As.getUint16();if(!na){$s.offsetIndex=-1;continue}la=(na>>1)-(Gs-Xs),$s.offsetIndex=la,sa=Math.max(sa,la+$s.end-$s.start+1)}const va=[];for(Zs=0;Zs<sa;Zs++)va.push(As.getUint16());for(Xs=0;Xs<Gs;Xs++){$s=ea[Xs],Ws=$s.start;const na=$s.end,ia=$s.delta;for(la=$s.offsetIndex,Zs=Ws;Zs<=na;Zs++)Zs!==65535&&(aa=la<0?Zs:va[la+Zs-Ws],aa=aa+ia&65535,Js.push({charCode:Zs,glyphId:aa}))}}else if(Qs===6){As.skip(4);const Gs=As.getUint16(),ea=As.getUint16();for(Zs=0;Zs<ea;Zs++){aa=As.getUint16();const Xs=Gs+Zs;Js.push({charCode:Xs,glyphId:aa})}}else if(Qs===12){As.skip(10);const Gs=As.getInt32()>>>0;for(Zs=0;Zs<Gs;Zs++){const ea=As.getInt32()>>>0,Xs=As.getInt32()>>>0;let sa=As.getInt32()>>>0;for(let la=ea;la<=Xs;la++)Js.push({charCode:la,glyphId:sa++})}}else return(0,In.warn)("cmap table has unsupported format: "+Qs),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};Js.sort(function(Gs,ea){return Gs.charCode-ea.charCode});for(let Gs=1;Gs<Js.length;Gs++)Js[Gs-1].charCode===Js[Gs].charCode&&(Js.splice(Gs,1),Gs--);return{platformId:Ls.platformId,encodingId:Ls.encodingId,mappings:Js,hasShortCmap:ca}}function Yi(Ss,As,Es,Os,$s,Ws){if(!As){Es&&(Es.data=null);return}Ss.pos=(Ss.start||0)+As.offset,Ss.pos+=4,Ss.pos+=2,Ss.pos+=2,Ss.pos+=2,Ss.pos+=2,Ss.pos+=2,Ss.pos+=2,Ss.pos+=2,Ss.pos+=2,Ss.pos+=2;const Ns=Ss.getUint16();Ss.pos+=8,Ss.pos+=2;let Ls=Ss.getUint16();Ns!==0&&(ni(Os.data[44],Os.data[45])&2||(As.data[22]=0,As.data[23]=0)),Ls>$s&&((0,In.info)(`The numOfMetrics (${Ls}) should not be greater than the numGlyphs (${$s}).`),Ls=$s,As.data[34]=(Ls&65280)>>8,As.data[35]=Ls&255);const Qs=$s-Ls-(Es.length-Ls*4>>1);if(Qs>0){const ca=new Uint8Array(Es.length+Qs*2);ca.set(Es.data),Ws&&(ca[Es.length]=Es.data[2],ca[Es.length+1]=Es.data[3]),Es.data=ca}}function Vi(Ss,As,Es,Os,$s,Ws){const Ns={length:0,sizeOfInstructions:0};if(As<0||As>=Ss.length||Es>Ss.length||Es-As<=12)return Ns;const Ls=Ss.subarray(As,Es),zs=Ai(Ls[2],Ls[3]),Qs=Ai(Ls[4],Ls[5]),ca=Ai(Ls[6],Ls[7]),Js=Ai(Ls[8],Ls[9]);zs>ca&&(li(Ls,2,ca),li(Ls,6,zs)),Qs>Js&&(li(Ls,4,Js),li(Ls,8,Qs));const Zs=Ai(Ls[0],Ls[1]);if(Zs<0)return Zs<-1||(Os.set(Ls,$s),Ns.length=Ls.length),Ns;let aa,Gs=10,ea=0;for(aa=0;aa<Zs;aa++)ea=(Ls[Gs]<<8|Ls[Gs+1])+1,Gs+=2;const Xs=Gs,sa=Ls[Gs]<<8|Ls[Gs+1];Ns.sizeOfInstructions=sa,Gs+=2+sa;const la=Gs;let va=0;for(aa=0;aa<ea;aa++){const ia=Ls[Gs++];ia&192&&(Ls[Gs-1]=ia&63);let fa=2;ia&2?fa=1:ia&16&&(fa=0);let wa=2;ia&4?wa=1:ia&32&&(wa=0);const Pa=fa+wa;if(va+=Pa,ia&8){const eo=Ls[Gs++];eo===0&&(Ls[Gs-1]^=8),aa+=eo,va+=eo*Pa}}if(va===0)return Ns;let na=Gs+va;return na>Ls.length?Ns:!Ws&&sa>0?(Os.set(Ls.subarray(0,Xs),$s),Os.set([0,0],$s+Xs),Os.set(Ls.subarray(la,na),$s+Xs+2),na-=sa,Ls.length-na>3&&(na=na+3&-4),Ns.length=na,Ns):Ls.length-na>3?(na=na+3&-4,Os.set(Ls.subarray(0,na),$s),Ns.length=na,Ns):(Os.set(Ls,$s),Ns.length=Ls.length,Ns)}function Zi(Ss,As,Es){const Os=Ss.data,$s=gi(Os[0],Os[1],Os[2],Os[3]);$s>>16!==1&&((0,In.info)("Attempting to fix invalid version in head table: "+$s),Os[0]=0,Os[1]=1,Os[2]=0,Os[3]=0);const Ws=ni(Os[50],Os[51]);if(Ws<0||Ws>1){(0,In.info)("Attempting to fix invalid indexToLocFormat in head table: "+Ws);const Ns=As+1;if(Es===Ns<<1)Os[50]=0,Os[51]=0;else if(Es===Ns<<2)Os[50]=0,Os[51]=1;else throw new In.FormatError("Could not fix indexToLocFormat: "+Ws)}}function us(Ss,As,Es,Os,$s,Ws,Ns){let Ls,zs,Qs;Os?(Ls=4,zs=function(fa,wa){return fa[wa]<<24|fa[wa+1]<<16|fa[wa+2]<<8|fa[wa+3]},Qs=function(fa,wa,Pa){fa[wa]=Pa>>>24&255,fa[wa+1]=Pa>>16&255,fa[wa+2]=Pa>>8&255,fa[wa+3]=Pa&255}):(Ls=2,zs=function(fa,wa){return fa[wa]<<9|fa[wa+1]<<1},Qs=function(fa,wa,Pa){fa[wa]=Pa>>9&255,fa[wa+1]=Pa>>1&255});const ca=Ws?Es+1:Es,Js=Ls*(1+ca),Zs=new Uint8Array(Js);Zs.set(Ss.data.subarray(0,Js)),Ss.data=Zs;const aa=As.data,Gs=aa.length,ea=new Uint8Array(Gs);let Xs,sa;const la=[];for(Xs=0,sa=0;Xs<Es+1;Xs++,sa+=Ls){let ia=zs(Zs,sa);ia>Gs&&(ia=Gs),la.push({index:Xs,offset:ia,endOffset:0})}for(la.sort((ia,fa)=>ia.offset-fa.offset),Xs=0;Xs<Es;Xs++)la[Xs].endOffset=la[Xs+1].offset;for(la.sort((ia,fa)=>ia.index-fa.index),Xs=0;Xs<Es;Xs++){const{offset:ia,endOffset:fa}=la[Xs];if(ia!==0||fa!==0)break;const wa=la[Xs+1].offset;if(wa!==0){la[Xs].endOffset=wa;break}}const va=Object.create(null);let na=0;for(Qs(Zs,0,na),Xs=0,sa=Ls;Xs<Es;Xs++,sa+=Ls){const ia=Vi(aa,la[Xs].offset,la[Xs].endOffset,ea,na,$s),fa=ia.length;fa===0&&(va[Xs]=!0),ia.sizeOfInstructions>Ns&&(Ns=ia.sizeOfInstructions),na+=fa,Qs(Zs,sa,na)}if(na===0){const ia=new Uint8Array([0,1,0,0,0,0,0,0,0,0,0,0,0,0,49,0]);for(Xs=0,sa=Ls;Xs<ca;Xs++,sa+=Ls)Qs(Zs,sa,ia.length);As.data=ia}else if(Ws){const ia=zs(Zs,Ls);ea.length>ia+na?As.data=ea.subarray(0,ia+na):(As.data=new Uint8Array(ia+na),As.data.set(ea.subarray(0,na))),As.data.set(ea.subarray(0,ia),na),Qs(Ss.data,Zs.length-Ls,na+ia)}else As.data=ea.subarray(0,na);return{missingGlyphs:va,maxSizeOfInstructions:Ns}}function ts(Ss,As,Es){const Os=(Bi.start||0)+Ss.offset;Bi.pos=Os;const $s=Ss.length,Ws=Os+$s,Ns=Bi.getInt32();Bi.skip(28);let Ls,zs=!0,Qs;switch(Ns){case 65536:Ls=jn.MacStandardGlyphOrdering;break;case 131072:const ca=Bi.getUint16();if(ca!==Es){zs=!1;break}const Js=[];for(Qs=0;Qs<ca;++Qs){const Gs=Bi.getUint16();if(Gs>=32768){zs=!1;break}Js.push(Gs)}if(!zs)break;const Zs=[],aa=[];for(;Bi.pos<Ws;){const Gs=Bi.getByte();for(aa.length=Gs,Qs=0;Qs<Gs;++Qs)aa[Qs]=String.fromCharCode(Bi.getByte());Zs.push(aa.join(""))}for(Ls=[],Qs=0;Qs<ca;++Qs){const Gs=Js[Qs];if(Gs<258){Ls.push(jn.MacStandardGlyphOrdering[Gs]);continue}Ls.push(Zs[Gs-258])}break;case 196608:break;default:(0,In.warn)("Unknown/unsupported post table version "+Ns),zs=!1,As.defaultEncoding&&(Ls=As.defaultEncoding);break}return As.glyphNames=Ls,zs}function es(Ss){const As=(Bi.start||0)+Ss.offset;Bi.pos=As;const Es=[[],[]],Os=[],$s=Ss.length,Ws=As+$s;if(Bi.getUint16()!==0||$s<6)return[Es,Os];const zs=Bi.getUint16(),Qs=Bi.getUint16(),ca=12;let Js,Zs;for(Js=0;Js<zs&&Bi.pos+ca<=Ws;Js++){const aa={platform:Bi.getUint16(),encoding:Bi.getUint16(),language:Bi.getUint16(),name:Bi.getUint16(),length:Bi.getUint16(),offset:Bi.getUint16()};(Fi(aa)||zi(aa))&&Os.push(aa)}for(Js=0,Zs=Os.length;Js<Zs;Js++){const aa=Os[Js];if(aa.length<=0)continue;const Gs=As+Qs+aa.offset;if(Gs+aa.length>Ws)continue;Bi.pos=Gs;const ea=aa.name;if(aa.encoding){let Xs="";for(let sa=0,la=aa.length;sa<la;sa+=2)Xs+=String.fromCharCode(Bi.getUint16());Es[1][ea]=Xs}else Es[0][ea]=Bi.getString(aa.length)}return[Es,Os]}const rs=[0,0,0,0,0,0,0,0,-2,-2,-2,-2,0,0,-2,-5,-1,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,-1,-1,1,-1,-999,0,1,0,-1,-2,0,-1,-2,-1,-1,0,-1,-1,0,0,-999,-999,-1,-1,-1,-1,-2,-999,-2,-2,-999,0,-2,-2,0,0,-2,0,-2,0,0,0,-2,-1,-1,1,1,0,0,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,0,-999,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,0,0,0,-2,-999,-999,-999,-999,-999,-1,-1,-2,-2,0,0,0,0,-1,-1,-999,-2,-2,0,0,-1,-2,-2,0,0,0,-1,-1,-1,-2];function ss(Ss,As){let Es=Ss.data,Os=0,$s,Ws,Ns,Ls,zs,Qs=0,ca=0;const Js=[],Zs=[],aa=[];let Gs=As.tooComplexToFollowFunctions,ea=!1,Xs=0,sa=0;for(let va=Es.length;Os<va;){const na=Es[Os++];if(na===64)if(Ws=Es[Os++],ea||sa)Os+=Ws;else for($s=0;$s<Ws;$s++)Js.push(Es[Os++]);else if(na===65)if(Ws=Es[Os++],ea||sa)Os+=Ws*2;else for($s=0;$s<Ws;$s++)Ns=Es[Os++],Js.push(Ns<<8|Es[Os++]);else if((na&248)===176)if(Ws=na-176+1,ea||sa)Os+=Ws;else for($s=0;$s<Ws;$s++)Js.push(Es[Os++]);else if((na&248)===184)if(Ws=na-184+1,ea||sa)Os+=Ws*2;else for($s=0;$s<Ws;$s++)Ns=Es[Os++],Js.push(Ns<<8|Es[Os++]);else if(na===43&&!Gs){if(!ea&&!sa){if(Ls=Js.at(-1),isNaN(Ls))(0,In.info)("TT: CALL empty stack (or invalid entry).");else if(As.functionsUsed[Ls]=!0,Ls in As.functionsStackDeltas){const ia=Js.length+As.functionsStackDeltas[Ls];if(ia<0){(0,In.warn)("TT: CALL invalid functions stack delta."),As.hintsValid=!1;return}Js.length=ia}else if(Ls in As.functionsDefined&&!aa.includes(Ls)){if(Zs.push({data:Es,i:Os,stackTop:Js.length-1}),aa.push(Ls),zs=As.functionsDefined[Ls],!zs){(0,In.warn)("TT: CALL non-existent function"),As.hintsValid=!1;return}Es=zs.data,Os=zs.i}}}else if(na===44&&!Gs)(ea||sa)&&((0,In.warn)("TT: nested FDEFs not allowed"),Gs=!0),ea=!0,ca=Os,Ls=Js.pop(),As.functionsDefined[Ls]={data:Es,i:Os};else if(na===45)if(ea)ea=!1,Qs=Os;else{if(zs=Zs.pop(),!zs){(0,In.warn)("TT: ENDF bad stack"),As.hintsValid=!1;return}Ls=aa.pop(),Es=zs.data,Os=zs.i,As.functionsStackDeltas[Ls]=Js.length-zs.stackTop}else if(na===137)(ea||sa)&&((0,In.warn)("TT: nested IDEFs not allowed"),Gs=!0),ea=!0,ca=Os;else if(na===88)++Xs;else if(na===27)sa=Xs;else if(na===89)sa===Xs&&(sa=0),--Xs;else if(na===28&&!ea&&!sa){const ia=Js.at(-1);ia>0&&(Os+=ia-1)}if(!ea&&!sa){let ia=0;for(na<=142?ia=rs[na]:na>=192&&na<=223?ia=-1:na>=224&&(ia=-2),na>=113&&na<=117&&(Ws=Js.pop(),isNaN(Ws)||(ia=-Ws*2));ia<0&&Js.length>0;)Js.pop(),ia++;for(;ia>0;)Js.push(NaN),ia--}}As.tooComplexToFollowFunctions=Gs;const la=[Es];Os>Es.length&&la.push(new Uint8Array(Os-Es.length)),ca>Qs&&((0,In.warn)("TT: complementing a missing function tail"),la.push(new Uint8Array([34,45]))),ks(Ss,la)}function os(Ss,As){if(!Ss.tooComplexToFollowFunctions){if(Ss.functionsDefined.length>As){(0,In.warn)("TT: more functions defined than expected"),Ss.hintsValid=!1;return}for(let Es=0,Os=Ss.functionsUsed.length;Es<Os;Es++){if(Es>As){(0,In.warn)("TT: invalid function id: "+Es),Ss.hintsValid=!1;return}if(Ss.functionsUsed[Es]&&!Ss.functionsDefined[Es]){(0,In.warn)("TT: undefined function: "+Es),Ss.hintsValid=!1;return}}}}function ks(Ss,As){if(As.length>1){let Es=0,Os,$s;for(Os=0,$s=As.length;Os<$s;Os++)Es+=As[Os].length;Es=Es+3&-4;const Ws=new Uint8Array(Es);let Ns=0;for(Os=0,$s=As.length;Os<$s;Os++)Ws.set(As[Os],Ns),Ns+=As[Os].length;Ss.data=Ws,Ss.length=Es}}function xs(Ss,As,Es,Os){const $s={functionsDefined:[],functionsUsed:[],functionsStackDeltas:[],tooComplexToFollowFunctions:!1,hintsValid:!0};if(Ss&&ss(Ss,$s),As&&ss(As,$s),Ss&&os($s,Os),Es&&Es.length&1){const Ws=new Uint8Array(Es.length+1);Ws.set(Es.data),Es.data=Ws}return $s.hintsValid}Bi=new ii.Stream(new Uint8Array(Bi.getBytes()));let Rs,ms;if(Qn(Bi)){const Ss=as(Bi,this.name);Rs=Ss.header,ms=Ss.tables}else Rs=ns(Bi),ms=Gi(Bi,Rs.numTables);let Bs,ws;const Ts=!ms["CFF "];if(Ts){if(!ms.loca)throw new In.FormatError('Required "loca" table is not found');ms.glyf||((0,In.warn)('Required "glyf" table is not found -- trying to recover.'),ms.glyf={tag:"glyf",data:new Uint8Array(0)}),this.isOpenType=!1}else{const Ss=Oi.composite&&(((Ms=Oi.cidToGidMap)==null?void 0:Ms.length)>0||!(Oi.cMap instanceof On.IdentityCMap));if(Rs.version==="OTTO"&&!Ss||!ms.head||!ms.hhea||!ms.maxp||!ms.post)return ws=new ii.Stream(ms["CFF "].data),Bs=new ei.CFFFont(ws,Oi),pi(Oi),this.convert($i,Bs,Oi);delete ms.glyf,delete ms.loca,delete ms.fpgm,delete ms.prep,delete ms["cvt "],this.isOpenType=!0}if(!ms.maxp)throw new In.FormatError('Required "maxp" table is not found');Bi.pos=(Bi.start||0)+ms.maxp.offset;const Is=Bi.getInt32(),ls=Bi.getUint16();if(((js=Oi.scaleFactors)==null?void 0:js.length)===ls&&Ts){const{scaleFactors:Ss}=Oi,As=ni(ms.head.data[50],ms.head.data[51]),Es=new Hn.GlyfTable({glyfTable:ms.glyf.data,isGlyphLocationsLong:As,locaTable:ms.loca.data,numGlyphs:ls});Es.scale(Ss);const{glyf:Os,loca:$s,isLocationLong:Ws}=Es.write();ms.glyf.data=Os,ms.loca.data=$s,Ws!==!!As&&(ms.head.data[50]=0,ms.head.data[51]=Ws?1:0);const Ns=ms.hmtx.data;for(let Ls=0;Ls<ls;Ls++){const zs=4*Ls,Qs=Math.round(Ss[Ls]*ni(Ns[zs],Ns[zs+1]));Ns[zs]=Qs>>8&255,Ns[zs+1]=Qs&255;const ca=Math.round(Ss[Ls]*Ai(Ns[zs+2],Ns[zs+3]));li(Ns,zs+2,ca)}}let Wi=ls+1,Ji=!0;Wi>65535&&(Ji=!1,Wi=ls,(0,In.warn)("Not enough space in glyfs to duplicate first glyph."));let cs=0,fs=0;Is>=65536&&ms.maxp.length>=22&&(Bi.pos+=8,Bi.getUint16()>2&&(ms.maxp.data[14]=0,ms.maxp.data[15]=2),Bi.pos+=4,cs=Bi.getUint16(),Bi.pos+=4,fs=Bi.getUint16()),ms.maxp.data[4]=Wi>>8,ms.maxp.data[5]=Wi&255;const ps=xs(ms.fpgm,ms.prep,ms["cvt "],cs);if(ps||(delete ms.fpgm,delete ms.prep,delete ms["cvt "]),Yi(Bi,ms.hhea,ms.hmtx,ms.head,Wi,Ji),!ms.head)throw new In.FormatError('Required "head" table is not found');Zi(ms.head,ls,Ts?ms.loca.length:0);let gs=Object.create(null);if(Ts){const Ss=ni(ms.head.data[50],ms.head.data[51]),As=us(ms.loca,ms.glyf,ls,Ss,ps,Ji,fs);gs=As.missingGlyphs,Is>=65536&&ms.maxp.length>=22&&(ms.maxp.data[26]=As.maxSizeOfInstructions>>8,ms.maxp.data[27]=As.maxSizeOfInstructions&255)}if(!ms.hhea)throw new In.FormatError('Required "hhea" table is not found');ms.hhea.data[10]===0&&ms.hhea.data[11]===0&&(ms.hhea.data[10]=255,ms.hhea.data[11]=255);const bs={unitsPerEm:ni(ms.head.data[18],ms.head.data[19]),yMax:Ai(ms.head.data[42],ms.head.data[43]),yMin:Ai(ms.head.data[38],ms.head.data[39]),ascent:Ai(ms.hhea.data[4],ms.hhea.data[5]),descent:Ai(ms.hhea.data[6],ms.hhea.data[7]),lineGap:Ai(ms.hhea.data[8],ms.hhea.data[9])};this.ascent=bs.ascent/bs.unitsPerEm,this.descent=bs.descent/bs.unitsPerEm,this.lineGap=bs.lineGap/bs.unitsPerEm,(Vs=this.cssFontInfo)!=null&&Vs.lineHeight?(this.lineHeight=this.cssFontInfo.metrics.lineHeight,this.lineGap=this.cssFontInfo.metrics.lineGap):this.lineHeight=this.ascent-this.descent+this.lineGap,ms.post&&ts(ms.post,Oi,ls),ms.post={tag:"post",data:Ri(Oi)};const vs=[];function _s(Ss){return!gs[Ss]}if(Oi.composite){const Ss=Oi.cidToGidMap||[],As=Ss.length===0;Oi.cMap.forEach(function(Es,Os){if(typeof Os=="string"&&(Os=_i(Es,Os,!0)),Os>65535)throw new In.FormatError("Max size of CID is 65,535");let $s=-1;As?$s=Os:Ss[Os]!==void 0&&($s=Ss[Os]),$s>=0&&$s<ls&&_s($s)&&(vs[Es]=$s)})}else{const Ss=hs(ms.cmap,Bi,this.isSymbolicFont,Oi.hasEncoding),As=Ss.platformId,Es=Ss.encodingId,Os=Ss.mappings;let $s=[],Ws=!1;if(Oi.hasEncoding&&(Oi.baseEncodingName==="MacRomanEncoding"||Oi.baseEncodingName==="WinAnsiEncoding")&&($s=(0,Rn.getEncoding)(Oi.baseEncodingName)),Oi.hasEncoding&&!this.isSymbolicFont&&(As===3&&Es===1||As===1&&Es===0)){const Ns=(0,Tn.getGlyphsUnicode)();for(let Ls=0;Ls<256;Ls++){let zs;if(this.differences[Ls]!==void 0?zs=this.differences[Ls]:$s.length&&$s[Ls]!==""?zs=$s[Ls]:zs=Rn.StandardEncoding[Ls],!zs)continue;const Qs=(0,jn.recoverGlyphName)(zs,Ns);let ca;if(As===3&&Es===1?ca=Ns[Qs]:As===1&&Es===0&&(ca=Rn.MacRomanEncoding.indexOf(Qs)),ca===void 0){if(!Oi.glyphNames&&Oi.hasIncludedToUnicodeMap&&!(this.toUnicode instanceof si.IdentityToUnicodeMap)){const Js=this.toUnicode.get(Ls);Js&&(ca=Js.codePointAt(0))}if(ca===void 0)continue}for(const Js of Os)if(Js.charCode===ca){vs[Ls]=Js.glyphId;break}}}else if(As===0){for(const Ns of Os)vs[Ns.charCode]=Ns.glyphId;Ws=!0}else for(const Ns of Os){let Ls=Ns.charCode;As===3&&Ls>=61440&&Ls<=61695&&(Ls&=255),vs[Ls]=Ns.glyphId}if(Oi.glyphNames&&($s.length||this.differences.length))for(let Ns=0;Ns<256;++Ns){if(!Ws&&vs[Ns]!==void 0)continue;const Ls=this.differences[Ns]||$s[Ns];if(!Ls)continue;const zs=Oi.glyphNames.indexOf(Ls);zs>0&&_s(zs)&&(vs[Ns]=zs)}}vs.length===0&&(vs[0]=0);let Us=Wi-1;if(Ji||(Us=0),!Oi.cssFontInfo){const Ss=ji(vs,_s,Us,this.toUnicode);this.toFontChar=Ss.toFontChar,ms.cmap={tag:"cmap",data:Ni(Ss.charCodeToGlyphId,Ss.toUnicodeExtraMap,Wi)},(!ms["OS/2"]||!Si(ms["OS/2"],Bi))&&(ms["OS/2"]={tag:"OS/2",data:Ti(Oi,Ss.charCodeToGlyphId,bs)})}if(!Ts)try{ws=new ii.Stream(ms["CFF "].data),Bs=new Ln.CFFParser(ws,Oi,jn.SEAC_ANALYSIS_ENABLED).parse(),Bs.duplicateFirstGlyph();const As=new Ln.CFFCompiler(Bs);ms["CFF "].data=As.compile()}catch{(0,In.warn)("Failed to compile font "+Oi.loadedName)}if(!ms.name)ms.name={tag:"name",data:Ui(this.name)};else{const[Ss,As]=es(ms.name);ms.name.data=Ui($i,Ss),this.psName=Ss[0][6]||null,Oi.composite||Zn(Oi,this.isSymbolicFont,As)}const Ds=new hi.OpenTypeFileBuilder(Rs.version);for(const Ss in ms)Ds.addTable(Ss,ms[Ss].data);return Ds.toArray()}convert($i,Bi,Oi){Oi.fixedPitch=!1,Oi.builtInEncoding&&Gn(Oi,Oi.builtInEncoding);let Xi=1;Bi instanceof ei.CFFFont&&(Xi=Bi.numGlyphs-1);const Gi=Bi.getGlyphMapping(Oi);let qi=null,ns=Gi,is=null;Oi.cssFontInfo||(qi=ji(Gi,Bi.hasGlyphId.bind(Bi),Xi,this.toUnicode),this.toFontChar=qi.toFontChar,ns=qi.charCodeToGlyphId,is=qi.toUnicodeExtraMap);const as=Bi.numGlyphs;function hs(ts,es){let rs=null;for(const ss in ts)es===ts[ss]&&(rs||(rs=[])).push(ss|0);return rs}function Yi(ts,es){for(const rs in ts)if(es===ts[rs])return rs|0;return qi.charCodeToGlyphId[qi.nextAvailableFontCharCode]=es,qi.nextAvailableFontCharCode++}const Vi=Bi.seacs;if(qi&&jn.SEAC_ANALYSIS_ENABLED&&(Vi!=null&&Vi.length)){const ts=Oi.fontMatrix||In.FONT_IDENTITY_MATRIX,es=Bi.getCharset(),rs=Object.create(null);for(let ss in Vi){ss|=0;const os=Vi[ss],ks=Rn.StandardEncoding[os[2]],xs=Rn.StandardEncoding[os[3]],Rs=es.indexOf(ks),ms=es.indexOf(xs);if(Rs<0||ms<0)continue;const Bs={x:os[0]*ts[0]+os[1]*ts[2]+ts[4],y:os[0]*ts[1]+os[1]*ts[3]+ts[5]},ws=hs(Gi,ss);if(ws)for(const Ts of ws){const Is=qi.charCodeToGlyphId,ls=Yi(Is,Rs),Wi=Yi(Is,ms);rs[Ts]={baseFontCharCode:ls,accentFontCharCode:Wi,accentOffset:Bs}}}Oi.seacMap=rs}const Zi=1/(Oi.fontMatrix||In.FONT_IDENTITY_MATRIX)[0],us=new hi.OpenTypeFileBuilder("OTTO");return us.addTable("CFF ",Bi.data),us.addTable("OS/2",Ti(Oi,ns)),us.addTable("cmap",Ni(ns,is,as)),us.addTable("head","\0\0\0\0\0\0\0\0\0\0_<õ\0\0"+Ii(Zi)+"\0\0\0\0\v~'\0\0\0\0\v~'\0\0"+Ii(Oi.descent)+"ÿ"+Ii(Oi.ascent)+yi(Oi.italicAngle?2:0)+"\0\0\0\0\0\0\0"),us.addTable("hhea","\0\0\0"+Ii(Oi.ascent)+Ii(Oi.descent)+"\0\0ÿÿ\0\0\0\0\0\0"+Ii(Oi.capHeight)+Ii(Math.tan(Oi.italicAngle)*Oi.xHeight)+"\0\0\0\0\0\0\0\0\0\0\0\0"+yi(as)),us.addTable("hmtx",function(){const es=Bi.charstrings,rs=Bi.cff?Bi.cff.widths:null;let ss="\0\0\0\0";for(let os=1,ks=as;os<ks;os++){let xs=0;if(es){const Rs=es[os-1];xs="width"in Rs?Rs.width:0}else rs&&(xs=Math.ceil(rs[os]||0));ss+=yi(xs)+yi(0)}return ss}()),us.addTable("maxp","\0\0P\0"+yi(as)),us.addTable("name",Ui($i)),us.addTable("post",Ri(Oi)),us.toArray()}get spaceWidth(){const $i=["space","minus","one","i","I"];let Bi;for(const Oi of $i){if(Oi in this.widths){Bi=this.widths[Oi];break}const Gi=(0,Tn.getGlyphsUnicode)()[Oi];let qi=0;if(this.composite&&this.cMap.contains(Gi)&&(qi=this.cMap.lookup(Gi),typeof qi=="string"&&(qi=_i(Gi,qi))),!qi&&this.toUnicode&&(qi=this.toUnicode.charCodeOf(Gi)),qi<=0&&(qi=Gi),Bi=this.widths[qi],Bi)break}return(0,In.shadow)(this,"spaceWidth",Bi||this.defaultWidth)}_charToGlyph($i,Bi=!1){var Zi,us,ts;let Oi=this._glyphCache[$i];if((Oi==null?void 0:Oi.isSpace)===Bi)return Oi;let Xi,Gi,qi,ns=$i;(Zi=this.cMap)!=null&&Zi.contains($i)&&(ns=this.cMap.lookup($i),typeof ns=="string"&&(ns=_i($i,ns))),Gi=this.widths[ns],typeof Gi!="number"&&(Gi=this.defaultWidth);const is=(us=this.vmetrics)==null?void 0:us[ns];let as=this.toUnicode.get($i)||$i;typeof as=="number"&&(as=String.fromCharCode(as));let hs=this.toFontChar[$i]!==void 0;if(Xi=this.toFontChar[$i]||$i,this.missingFile){const es=this.differences[$i]||this.defaultEncoding[$i];(es===".notdef"||es==="")&&this.type==="Type1"&&(Xi=32),Xi=(0,Cn.mapSpecialUnicodeValues)(Xi)}this.isType3Font&&(qi=Xi);let Yi=null;if((ts=this.seacMap)!=null&&ts[$i]){hs=!0;const es=this.seacMap[$i];Xi=es.baseFontCharCode,Yi={fontChar:String.fromCodePoint(es.accentFontCharCode),offset:es.accentOffset}}let Vi="";return typeof Xi=="number"&&(Xi<=1114111?Vi=String.fromCodePoint(Xi):(0,In.warn)(`charToGlyph - invalid fontCharCode: ${Xi}`)),Oi=new Wn($i,Vi,as,Yi,Gi,is,qi,Bi,hs),this._glyphCache[$i]=Oi}charsToGlyphs($i){let Bi=this._charsCache[$i];if(Bi)return Bi;if(Bi=[],this.cMap){const Oi=Object.create(null),Xi=$i.length;let Gi=0;for(;Gi<Xi;){this.cMap.readCharCode($i,Gi,Oi);const{charcode:qi,length:ns}=Oi;Gi+=ns;const is=this._charToGlyph(qi,ns===1&&$i.charCodeAt(Gi-1)===32);Bi.push(is)}}else for(let Oi=0,Xi=$i.length;Oi<Xi;++Oi){const Gi=$i.charCodeAt(Oi),qi=this._charToGlyph(Gi,Gi===32);Bi.push(qi)}return this._charsCache[$i]=Bi}getCharPositions($i){const Bi=[];if(this.cMap){const Oi=Object.create(null);let Xi=0;for(;Xi<$i.length;){this.cMap.readCharCode($i,Xi,Oi);const Gi=Oi.length;Bi.push([Xi,Xi+Gi]),Xi+=Gi}}else for(let Oi=0,Xi=$i.length;Oi<Xi;++Oi)Bi.push([Oi,Oi+1]);return Bi}get glyphCacheValues(){return Object.values(this._glyphCache)}encodeString($i){const Bi=[],Oi=[],Xi=()=>Bi.length%2===1,Gi=this.toUnicode instanceof si.IdentityToUnicodeMap?qi=>this.toUnicode.charCodeOf(qi):qi=>this.toUnicode.charCodeOf(String.fromCodePoint(qi));for(let qi=0,ns=$i.length;qi<ns;qi++){const is=$i.codePointAt(qi);if(is>55295&&(is<57344||is>65533)&&qi++,this.toUnicode){const as=Gi(is);if(as!==-1){Xi()&&(Bi.push(Oi.join("")),Oi.length=0);const hs=this.cMap?this.cMap.getCharCodeLength(as):1;for(let Yi=hs-1;Yi>=0;Yi--)Oi.push(String.fromCharCode(as>>8*Yi&255));continue}}Xi()||(Bi.push(Oi.join("")),Oi.length=0),Oi.push(String.fromCodePoint(is))}return Bi.push(Oi.join("")),Bi}}Mn.Font=Hi;class Li{constructor($i){this.error=$i,this.loadedName="g_font_error",this.missingFile=!0}charsToGlyphs(){return[]}encodeString($i){return[$i]}exportData($i=!1){return{error:this.error}}}Mn.ErrorFont=Li},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.CFFTopDict=Mn.CFFStrings=Mn.CFFStandardStrings=Mn.CFFPrivateDict=Mn.CFFParser=Mn.CFFIndex=Mn.CFFHeader=Mn.CFFFDSelect=Mn.CFFCompiler=Mn.CFFCharset=Mn.CFF=void 0;var In=ti(2),Ln=ti(36),jn=ti(37);const Cn=10,Tn=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"];Mn.CFFStandardStrings=Tn;const Rn=391,ui=[null,{id:"hstem",min:2,stackClearing:!0,stem:!0},null,{id:"vstem",min:2,stackClearing:!0,stem:!0},{id:"vmoveto",min:1,stackClearing:!0},{id:"rlineto",min:2,resetStack:!0},{id:"hlineto",min:1,resetStack:!0},{id:"vlineto",min:1,resetStack:!0},{id:"rrcurveto",min:6,resetStack:!0},null,{id:"callsubr",min:1,undefStack:!0},{id:"return",min:0,undefStack:!0},null,null,{id:"endchar",min:0,stackClearing:!0},null,null,null,{id:"hstemhm",min:2,stackClearing:!0,stem:!0},{id:"hintmask",min:0,stackClearing:!0},{id:"cntrmask",min:0,stackClearing:!0},{id:"rmoveto",min:2,stackClearing:!0},{id:"hmoveto",min:1,stackClearing:!0},{id:"vstemhm",min:2,stackClearing:!0,stem:!0},{id:"rcurveline",min:8,resetStack:!0},{id:"rlinecurve",min:8,resetStack:!0},{id:"vvcurveto",min:4,resetStack:!0},{id:"hhcurveto",min:4,resetStack:!0},null,{id:"callgsubr",min:1,undefStack:!0},{id:"vhcurveto",min:4,resetStack:!0},{id:"hvcurveto",min:4,resetStack:!0}],si=[null,null,null,{id:"and",min:2,stackDelta:-1},{id:"or",min:2,stackDelta:-1},{id:"not",min:1,stackDelta:0},null,null,null,{id:"abs",min:1,stackDelta:0},{id:"add",min:2,stackDelta:-1,stackFn(mi,Wn){mi[Wn-2]=mi[Wn-2]+mi[Wn-1]}},{id:"sub",min:2,stackDelta:-1,stackFn(mi,Wn){mi[Wn-2]=mi[Wn-2]-mi[Wn-1]}},{id:"div",min:2,stackDelta:-1,stackFn(mi,Wn){mi[Wn-2]=mi[Wn-2]/mi[Wn-1]}},null,{id:"neg",min:1,stackDelta:0,stackFn(mi,Wn){mi[Wn-1]=-mi[Wn-1]}},{id:"eq",min:2,stackDelta:-1},null,null,{id:"drop",min:1,stackDelta:-1},null,{id:"put",min:2,stackDelta:-2},{id:"get",min:1,stackDelta:0},{id:"ifelse",min:4,stackDelta:-3},{id:"random",min:0,stackDelta:1},{id:"mul",min:2,stackDelta:-1,stackFn(mi,Wn){mi[Wn-2]=mi[Wn-2]*mi[Wn-1]}},null,{id:"sqrt",min:1,stackDelta:0},{id:"dup",min:1,stackDelta:1},{id:"exch",min:2,stackDelta:0},{id:"index",min:2,stackDelta:0},{id:"roll",min:3,stackDelta:-2},null,null,null,{id:"hflex",min:7,resetStack:!0},{id:"flex",min:13,resetStack:!0},{id:"hflex1",min:9,resetStack:!0},{id:"flex1",min:11,resetStack:!0}];class ei{constructor(Wn,ni,li){this.bytes=Wn.getBytes(),this.properties=ni,this.seacAnalysisEnabled=!!li}parse(){const Wn=this.properties,ni=new Bn;this.cff=ni;const li=this.parseHeader(),Ai=this.parseIndex(li.endPos),gi=this.parseIndex(Ai.endPos),yi=this.parseIndex(gi.endPos),Ii=this.parseIndex(yi.endPos),xi=this.parseDict(gi.obj.get(0)),Qn=this.createDict(ii,xi,ni.strings);ni.header=li.obj,ni.names=this.parseNameIndex(Ai.obj),ni.strings=this.parseStringIndex(yi.obj),ni.topDict=Qn,ni.globalSubrIndex=Ii.obj,this.parsePrivateDict(ni.topDict),ni.isCIDFont=Qn.hasName("ROS");const ai=Qn.getByName("CharStrings"),Vn=this.parseIndex(ai).obj,Yn=Qn.getByName("FontMatrix");Yn&&(Wn.fontMatrix=Yn);const ci=Qn.getByName("FontBBox");ci&&(Wn.ascent=Math.max(ci[3],ci[1]),Wn.descent=Math.min(ci[1],ci[3]),Wn.ascentScaled=!0);let bi,Ci;if(ni.isCIDFont){const zi=this.parseIndex(Qn.getByName("FDArray")).obj;for(let _i=0,ji=zi.count;_i<ji;++_i){const Pi=zi.get(_i),Ni=this.createDict(ii,this.parseDict(Pi),ni.strings);this.parsePrivateDict(Ni),ni.fdArray.push(Ni)}Ci=null,bi=this.parseCharsets(Qn.getByName("charset"),Vn.count,ni.strings,!0),ni.fdSelect=this.parseFDSelect(Qn.getByName("FDSelect"),Vn.count)}else bi=this.parseCharsets(Qn.getByName("charset"),Vn.count,ni.strings,!1),Ci=this.parseEncoding(Qn.getByName("Encoding"),Wn,ni.strings,bi.charset);ni.charset=bi,ni.encoding=Ci;const Fi=this.parseCharStrings({charStrings:Vn,localSubrIndex:Qn.privateDict.subrsIndex,globalSubrIndex:Ii.obj,fdSelect:ni.fdSelect,fdArray:ni.fdArray,privateDict:Qn.privateDict});return ni.charStrings=Fi.charStrings,ni.seacs=Fi.seacs,ni.widths=Fi.widths,ni}parseHeader(){let Wn=this.bytes;const ni=Wn.length;let li=0;for(;li<ni&&Wn[li]!==1;)++li;if(li>=ni)throw new In.FormatError("Invalid CFF header");li!==0&&((0,In.info)("cff data is shifted"),Wn=Wn.subarray(li),this.bytes=Wn);const Ai=Wn[0],gi=Wn[1],yi=Wn[2],Ii=Wn[3];return{obj:new Nn(Ai,gi,yi,Ii),endPos:yi}}parseDict(Wn){let ni=0;function li(){let xi=Wn[ni++];return xi===30?Ai():xi===28?(xi=Wn[ni++],xi=(xi<<24|Wn[ni++]<<16)>>16,xi):xi===29?(xi=Wn[ni++],xi=xi<<8|Wn[ni++],xi=xi<<8|Wn[ni++],xi=xi<<8|Wn[ni++],xi):xi>=32&&xi<=246?xi-139:xi>=247&&xi<=250?(xi-247)*256+Wn[ni++]+108:xi>=251&&xi<=254?-((xi-251)*256)-Wn[ni++]-108:((0,In.warn)('CFFParser_parseDict: "'+xi+'" is a reserved command.'),NaN)}function Ai(){let xi="";const ai=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"],Vn=Wn.length;for(;ni<Vn;){const Yn=Wn[ni++],ci=Yn>>4,bi=Yn&15;if(ci===15||(xi+=ai[ci],bi===15))break;xi+=ai[bi]}return parseFloat(xi)}let gi=[];const yi=[];ni=0;const Ii=Wn.length;for(;ni<Ii;){let xi=Wn[ni];xi<=21?(xi===12&&(xi=xi<<8|Wn[++ni]),yi.push([xi,gi]),gi=[],++ni):gi.push(li())}return yi}parseIndex(Wn){const ni=new On,li=this.bytes,Ai=li[Wn++]<<8|li[Wn++],gi=[];let yi=Wn,Ii,xi;if(Ai!==0){const Qn=li[Wn++],ai=Wn+(Ai+1)*Qn-1;for(Ii=0,xi=Ai+1;Ii<xi;++Ii){let Vn=0;for(let Yn=0;Yn<Qn;++Yn)Vn<<=8,Vn+=li[Wn++];gi.push(ai+Vn)}yi=gi[Ai]}for(Ii=0,xi=gi.length-1;Ii<xi;++Ii){const Qn=gi[Ii],ai=gi[Ii+1];ni.add(li.subarray(Qn,ai))}return{obj:ni,endPos:yi}}parseNameIndex(Wn){const ni=[];for(let li=0,Ai=Wn.count;li<Ai;++li){const gi=Wn.get(li);ni.push((0,In.bytesToString)(gi))}return ni}parseStringIndex(Wn){const ni=new Hn;for(let li=0,Ai=Wn.count;li<Ai;++li){const gi=Wn.get(li);ni.add((0,In.bytesToString)(gi))}return ni}createDict(Wn,ni,li){const Ai=new Wn(li);for(const[gi,yi]of ni)Ai.setByKey(gi,yi);return Ai}parseCharString(Wn,ni,li,Ai){if(!ni||Wn.callDepth>Cn)return!1;let gi=Wn.stackSize;const yi=Wn.stack;let Ii=ni.length;for(let xi=0;xi<Ii;){const Qn=ni[xi++];let ai=null;if(Qn===12){const Vn=ni[xi++];Vn===0?(ni[xi-2]=139,ni[xi-1]=22,gi=0):ai=si[Vn]}else if(Qn===28)yi[gi]=(ni[xi]<<24|ni[xi+1]<<16)>>16,xi+=2,gi++;else if(Qn===14){if(gi>=4&&(gi-=4,this.seacAnalysisEnabled))return Wn.seac=yi.slice(gi,gi+4),!1;ai=ui[Qn]}else if(Qn>=32&&Qn<=246)yi[gi]=Qn-139,gi++;else if(Qn>=247&&Qn<=254)yi[gi]=Qn<251?(Qn-247<<8)+ni[xi]+108:-(Qn-251<<8)-ni[xi]-108,xi++,gi++;else if(Qn===255)yi[gi]=(ni[xi]<<24|ni[xi+1]<<16|ni[xi+2]<<8|ni[xi+3])/65536,xi+=4,gi++;else if(Qn===19||Qn===20){if(Wn.hints+=gi>>1,Wn.hints===0){ni.copyWithin(xi-1,xi,-1),xi-=1,Ii-=1;continue}xi+=Wn.hints+7>>3,gi%=2,ai=ui[Qn]}else if(Qn===10||Qn===29){const Vn=Qn===10?li:Ai;if(!Vn)return ai=ui[Qn],(0,In.warn)("Missing subrsIndex for "+ai.id),!1;let Yn=32768;Vn.count<1240?Yn=107:Vn.count<33900&&(Yn=1131);const ci=yi[--gi]+Yn;if(ci<0||ci>=Vn.count||isNaN(ci))return ai=ui[Qn],(0,In.warn)("Out of bounds subrIndex for "+ai.id),!1;if(Wn.stackSize=gi,Wn.callDepth++,!this.parseCharString(Wn,Vn.get(ci),li,Ai))return!1;Wn.callDepth--,gi=Wn.stackSize;continue}else{if(Qn===11)return Wn.stackSize=gi,!0;if(Qn===0&&xi===ni.length)ni[xi-1]=14,ai=ui[14];else if(Qn===9){ni.copyWithin(xi-1,xi,-1),xi-=1,Ii-=1;continue}else ai=ui[Qn]}if(ai){if(ai.stem&&(Wn.hints+=gi>>1,Qn===3||Qn===23?Wn.hasVStems=!0:Wn.hasVStems&&(Qn===1||Qn===18)&&((0,In.warn)("CFF stem hints are in wrong order"),ni[xi-1]=Qn===1?3:23)),"min"in ai&&!Wn.undefStack&&gi<ai.min)return(0,In.warn)("Not enough parameters for "+ai.id+"; actual: "+gi+", expected: "+ai.min),gi===0?(ni[xi-1]=14,!0):!1;Wn.firstStackClearing&&ai.stackClearing&&(Wn.firstStackClearing=!1,gi-=ai.min,gi>=2&&ai.stem?gi%=2:gi>1&&(0,In.warn)("Found too many parameters for stack-clearing command"),gi>0&&(Wn.width=yi[gi-1])),"stackDelta"in ai?("stackFn"in ai&&ai.stackFn(yi,gi),gi+=ai.stackDelta):ai.stackClearing?gi=0:ai.resetStack?(gi=0,Wn.undefStack=!1):ai.undefStack&&(gi=0,Wn.undefStack=!0,Wn.firstStackClearing=!1)}}return Ii<ni.length&&ni.fill(14,Ii),Wn.stackSize=gi,!0}parseCharStrings({charStrings:Wn,localSubrIndex:ni,globalSubrIndex:li,fdSelect:Ai,fdArray:gi,privateDict:yi}){const Ii=[],xi=[],Qn=Wn.count;for(let ai=0;ai<Qn;ai++){const Vn=Wn.get(ai),Yn={callDepth:0,stackSize:0,stack:[],undefStack:!0,hints:0,firstStackClearing:!0,seac:null,width:null,hasVStems:!1};let ci=!0,bi=null,Ci=yi;if(Ai&&gi.length){const Fi=Ai.getFDIndex(ai);Fi===-1&&((0,In.warn)("Glyph index is not in fd select."),ci=!1),Fi>=gi.length&&((0,In.warn)("Invalid fd index for glyph index."),ci=!1),ci&&(Ci=gi[Fi].privateDict,bi=Ci.subrsIndex)}else ni&&(bi=ni);if(ci&&(ci=this.parseCharString(Yn,Vn,bi,li)),Yn.width!==null){const Fi=Ci.getByName("nominalWidthX");xi[ai]=Fi+Yn.width}else{const Fi=Ci.getByName("defaultWidthX");xi[ai]=Fi}Yn.seac!==null&&(Ii[ai]=Yn.seac),ci||Wn.set(ai,new Uint8Array([14]))}return{charStrings:Wn,seacs:Ii,widths:xi}}emptyPrivateDictionary(Wn){const ni=this.createDict(di,[],Wn.strings);Wn.setByKey(18,[0,0]),Wn.privateDict=ni}parsePrivateDict(Wn){if(!Wn.hasName("Private")){this.emptyPrivateDictionary(Wn);return}const ni=Wn.getByName("Private");if(!Array.isArray(ni)||ni.length!==2){Wn.removeByName("Private");return}const li=ni[0],Ai=ni[1];if(li===0||Ai>=this.bytes.length){this.emptyPrivateDictionary(Wn);return}const gi=Ai+li,yi=this.bytes.subarray(Ai,gi),Ii=this.parseDict(yi),xi=this.createDict(di,Ii,Wn.strings);if(Wn.privateDict=xi,xi.getByName("ExpansionFactor")===0&&xi.setByName("ExpansionFactor",.06),!xi.getByName("Subrs"))return;const Qn=xi.getByName("Subrs"),ai=Ai+Qn;if(Qn===0||ai>=this.bytes.length){this.emptyPrivateDictionary(Wn);return}const Vn=this.parseIndex(ai);xi.subrsIndex=Vn.obj}parseCharsets(Wn,ni,li,Ai){if(Wn===0)return new wi(!0,fi.ISO_ADOBE,Ln.ISOAdobeCharset);if(Wn===1)return new wi(!0,fi.EXPERT,Ln.ExpertCharset);if(Wn===2)return new wi(!0,fi.EXPERT_SUBSET,Ln.ExpertSubsetCharset);const gi=this.bytes,yi=Wn,Ii=gi[Wn++],xi=[Ai?0:".notdef"];let Qn,ai,Vn;switch(ni-=1,Ii){case 0:for(Vn=0;Vn<ni;Vn++)Qn=gi[Wn++]<<8|gi[Wn++],xi.push(Ai?Qn:li.get(Qn));break;case 1:for(;xi.length<=ni;)for(Qn=gi[Wn++]<<8|gi[Wn++],ai=gi[Wn++],Vn=0;Vn<=ai;Vn++)xi.push(Ai?Qn++:li.get(Qn++));break;case 2:for(;xi.length<=ni;)for(Qn=gi[Wn++]<<8|gi[Wn++],ai=gi[Wn++]<<8|gi[Wn++],Vn=0;Vn<=ai;Vn++)xi.push(Ai?Qn++:li.get(Qn++));break;default:throw new In.FormatError("Unknown charset format")}const Yn=Wn,ci=gi.subarray(yi,Yn);return new wi(!1,Ii,xi,ci)}parseEncoding(Wn,ni,li,Ai){const gi=Object.create(null),yi=this.bytes;let Ii=!1,xi,Qn,ai,Vn=null;function Yn(){const ci=yi[Wn++];for(Qn=0;Qn<ci;Qn++){const bi=yi[Wn++],Ci=(yi[Wn++]<<8)+(yi[Wn++]&255);gi[bi]=Ai.indexOf(li.get(Ci))}}if(Wn===0||Wn===1){Ii=!0,xi=Wn;const ci=Wn?jn.ExpertEncoding:jn.StandardEncoding;for(Qn=0,ai=Ai.length;Qn<ai;Qn++){const bi=ci.indexOf(Ai[Qn]);bi!==-1&&(gi[bi]=Qn)}}else{const ci=Wn;switch(xi=yi[Wn++],xi&127){case 0:const Ci=yi[Wn++];for(Qn=1;Qn<=Ci;Qn++)gi[yi[Wn++]]=Qn;break;case 1:const Fi=yi[Wn++];let zi=1;for(Qn=0;Qn<Fi;Qn++){const _i=yi[Wn++],ji=yi[Wn++];for(let Pi=_i;Pi<=_i+ji;Pi++)gi[Pi]=zi++}break;default:throw new In.FormatError(`Unknown encoding format: ${xi} in CFF`)}const bi=Wn;xi&128&&(yi[ci]&=127,Yn()),Vn=yi.subarray(ci,bi)}return xi&=127,new Jn(Ii,xi,gi,Vn)}parseFDSelect(Wn,ni){const li=this.bytes,Ai=li[Wn++],gi=[];let yi;switch(Ai){case 0:for(yi=0;yi<ni;++yi){const xi=li[Wn++];gi.push(xi)}break;case 3:const Ii=li[Wn++]<<8|li[Wn++];for(yi=0;yi<Ii;++yi){let xi=li[Wn++]<<8|li[Wn++];yi===0&&xi!==0&&((0,In.warn)("parseFDSelect: The first range must have a first GID of 0 -- trying to recover."),xi=0);const Qn=li[Wn++],ai=li[Wn]<<8|li[Wn+1];for(let Vn=xi;Vn<ai;++Vn)gi.push(Qn)}Wn+=2;break;default:throw new In.FormatError(`parseFDSelect: Unknown format "${Ai}".`)}if(gi.length!==ni)throw new In.FormatError("parseFDSelect: Invalid font data.");return new pi(Ai,gi)}}Mn.CFFParser=ei;class Bn{constructor(){this.header=null,this.names=[],this.topDict=null,this.strings=new Hn,this.globalSubrIndex=null,this.encoding=null,this.charset=null,this.charStrings=null,this.fdArray=[],this.fdSelect=null,this.isCIDFont=!1}duplicateFirstGlyph(){if(this.charStrings.count>=65535){(0,In.warn)("Not enough space in charstrings to duplicate first glyph.");return}const Wn=this.charStrings.get(0);this.charStrings.add(Wn),this.isCIDFont&&this.fdSelect.fdSelect.push(this.fdSelect.fdSelect[0])}hasGlyphId(Wn){return Wn<0||Wn>=this.charStrings.count?!1:this.charStrings.get(Wn).length>0}}Mn.CFF=Bn;class Nn{constructor(Wn,ni,li,Ai){this.major=Wn,this.minor=ni,this.hdrSize=li,this.offSize=Ai}}Mn.CFFHeader=Nn;class Hn{constructor(){this.strings=[]}get(Wn){return Wn>=0&&Wn<=Rn-1?Tn[Wn]:Wn-Rn<=this.strings.length?this.strings[Wn-Rn]:Tn[0]}getSID(Wn){let ni=Tn.indexOf(Wn);return ni!==-1?ni:(ni=this.strings.indexOf(Wn),ni!==-1?ni+Rn:-1)}add(Wn){this.strings.push(Wn)}get count(){return this.strings.length}}Mn.CFFStrings=Hn;class On{constructor(){this.objects=[],this.length=0}add(Wn){this.length+=Wn.length,this.objects.push(Wn)}set(Wn,ni){this.length+=ni.length-this.objects[Wn].length,this.objects[Wn]=ni}get(Wn){return this.objects[Wn]}get count(){return this.objects.length}}Mn.CFFIndex=On;class hi{constructor(Wn,ni){this.keyToNameMap=Wn.keyToNameMap,this.nameToKeyMap=Wn.nameToKeyMap,this.defaults=Wn.defaults,this.types=Wn.types,this.opcodes=Wn.opcodes,this.order=Wn.order,this.strings=ni,this.values=Object.create(null)}setByKey(Wn,ni){if(!(Wn in this.keyToNameMap))return!1;if(ni.length===0)return!0;for(const Ai of ni)if(isNaN(Ai))return(0,In.warn)(`Invalid CFFDict value: "${ni}" for key "${Wn}".`),!0;const li=this.types[Wn];return(li==="num"||li==="sid"||li==="offset")&&(ni=ni[0]),this.values[Wn]=ni,!0}setByName(Wn,ni){if(!(Wn in this.nameToKeyMap))throw new In.FormatError(`Invalid dictionary name "${Wn}"`);this.values[this.nameToKeyMap[Wn]]=ni}hasName(Wn){return this.nameToKeyMap[Wn]in this.values}getByName(Wn){if(!(Wn in this.nameToKeyMap))throw new In.FormatError(`Invalid dictionary name ${Wn}"`);const ni=this.nameToKeyMap[Wn];return ni in this.values?this.values[ni]:this.defaults[ni]}removeByName(Wn){delete this.values[this.nameToKeyMap[Wn]]}static createTables(Wn){const ni={keyToNameMap:{},nameToKeyMap:{},defaults:{},types:{},opcodes:{},order:[]};for(const li of Wn){const Ai=Array.isArray(li[0])?(li[0][0]<<8)+li[0][1]:li[0];ni.keyToNameMap[Ai]=li[1],ni.nameToKeyMap[li[1]]=Ai,ni.types[Ai]=li[2],ni.defaults[Ai]=li[3],ni.opcodes[Ai]=Array.isArray(li[0])?li[0]:[li[0]],ni.order.push(Ai)}return ni}}const Xn=[[[12,30],"ROS",["sid","sid","num"],null],[[12,20],"SyntheticBase","num",null],[0,"version","sid",null],[1,"Notice","sid",null],[[12,0],"Copyright","sid",null],[2,"FullName","sid",null],[3,"FamilyName","sid",null],[4,"Weight","sid",null],[[12,1],"isFixedPitch","num",0],[[12,2],"ItalicAngle","num",0],[[12,3],"UnderlinePosition","num",-100],[[12,4],"UnderlineThickness","num",50],[[12,5],"PaintType","num",0],[[12,6],"CharstringType","num",2],[[12,7],"FontMatrix",["num","num","num","num","num","num"],[.001,0,0,.001,0,0]],[13,"UniqueID","num",null],[5,"FontBBox",["num","num","num","num"],[0,0,0,0]],[[12,8],"StrokeWidth","num",0],[14,"XUID","array",null],[15,"charset","offset",0],[16,"Encoding","offset",0],[17,"CharStrings","offset",0],[18,"Private",["offset","offset"],null],[[12,21],"PostScript","sid",null],[[12,22],"BaseFontName","sid",null],[[12,23],"BaseFontBlend","delta",null],[[12,31],"CIDFontVersion","num",0],[[12,32],"CIDFontRevision","num",0],[[12,33],"CIDFontType","num",0],[[12,34],"CIDCount","num",8720],[[12,35],"UIDBase","num",null],[[12,37],"FDSelect","offset",null],[[12,36],"FDArray","offset",null],[[12,38],"FontName","sid",null]];class ii extends hi{static get tables(){return(0,In.shadow)(this,"tables",this.createTables(Xn))}constructor(Wn){super(ii.tables,Wn),this.privateDict=null}}Mn.CFFTopDict=ii;const ri=[[6,"BlueValues","delta",null],[7,"OtherBlues","delta",null],[8,"FamilyBlues","delta",null],[9,"FamilyOtherBlues","delta",null],[[12,9],"BlueScale","num",.039625],[[12,10],"BlueShift","num",7],[[12,11],"BlueFuzz","num",1],[10,"StdHW","num",null],[11,"StdVW","num",null],[[12,12],"StemSnapH","delta",null],[[12,13],"StemSnapV","delta",null],[[12,14],"ForceBold","num",0],[[12,17],"LanguageGroup","num",0],[[12,18],"ExpansionFactor","num",.06],[[12,19],"initialRandomSeed","num",0],[20,"defaultWidthX","num",0],[21,"nominalWidthX","num",0],[19,"Subrs","offset",null]];class di extends hi{static get tables(){return(0,In.shadow)(this,"tables",this.createTables(ri))}constructor(Wn){super(di.tables,Wn),this.subrsIndex=null}}Mn.CFFPrivateDict=di;const fi={ISO_ADOBE:0,EXPERT:1,EXPERT_SUBSET:2};class wi{constructor(Wn,ni,li,Ai){this.predefined=Wn,this.format=ni,this.charset=li,this.raw=Ai}}Mn.CFFCharset=wi;class Jn{constructor(Wn,ni,li,Ai){this.predefined=Wn,this.format=ni,this.encoding=li,this.raw=Ai}}class pi{constructor(Wn,ni){this.format=Wn,this.fdSelect=ni}getFDIndex(Wn){return Wn<0||Wn>=this.fdSelect.length?-1:this.fdSelect[Wn]}}Mn.CFFFDSelect=pi;class Zn{constructor(){this.offsets=Object.create(null)}isTracking(Wn){return Wn in this.offsets}track(Wn,ni){if(Wn in this.offsets)throw new In.FormatError(`Already tracking location of ${Wn}`);this.offsets[Wn]=ni}offset(Wn){for(const ni in this.offsets)this.offsets[ni]+=Wn}setEntryLocation(Wn,ni,li){if(!(Wn in this.offsets))throw new In.FormatError(`Not tracking location of ${Wn}`);const Ai=li.data,gi=this.offsets[Wn],yi=5;for(let Ii=0,xi=ni.length;Ii<xi;++Ii){const Qn=Ii*yi+gi,ai=Qn+1,Vn=Qn+2,Yn=Qn+3,ci=Qn+4;if(Ai[Qn]!==29||Ai[ai]!==0||Ai[Vn]!==0||Ai[Yn]!==0||Ai[ci]!==0)throw new In.FormatError("writing to an offset that is not empty");const bi=ni[Ii];Ai[Qn]=29,Ai[ai]=bi>>24&255,Ai[Vn]=bi>>16&255,Ai[Yn]=bi>>8&255,Ai[ci]=bi&255}}}class Gn{constructor(Wn){this.cff=Wn}compile(){const Wn=this.cff,ni={data:[],length:0,add(Yn){try{this.data.push(...Yn)}catch{this.data=this.data.concat(Yn)}this.length=this.data.length}},li=this.compileHeader(Wn.header);ni.add(li);const Ai=this.compileNameIndex(Wn.names);if(ni.add(Ai),Wn.isCIDFont&&Wn.topDict.hasName("FontMatrix")){const Yn=Wn.topDict.getByName("FontMatrix");Wn.topDict.removeByName("FontMatrix");for(const ci of Wn.fdArray){let bi=Yn.slice(0);ci.hasName("FontMatrix")&&(bi=In.Util.transform(bi,ci.getByName("FontMatrix"))),ci.setByName("FontMatrix",bi)}}const gi=Wn.topDict.getByName("XUID");(gi==null?void 0:gi.length)>16&&Wn.topDict.removeByName("XUID"),Wn.topDict.setByName("charset",0);let yi=this.compileTopDicts([Wn.topDict],ni.length,Wn.isCIDFont);ni.add(yi.output);const Ii=yi.trackers[0],xi=this.compileStringIndex(Wn.strings.strings);ni.add(xi);const Qn=this.compileIndex(Wn.globalSubrIndex);if(ni.add(Qn),Wn.encoding&&Wn.topDict.hasName("Encoding"))if(Wn.encoding.predefined)Ii.setEntryLocation("Encoding",[Wn.encoding.format],ni);else{const Yn=this.compileEncoding(Wn.encoding);Ii.setEntryLocation("Encoding",[ni.length],ni),ni.add(Yn)}const ai=this.compileCharset(Wn.charset,Wn.charStrings.count,Wn.strings,Wn.isCIDFont);Ii.setEntryLocation("charset",[ni.length],ni),ni.add(ai);const Vn=this.compileCharStrings(Wn.charStrings);if(Ii.setEntryLocation("CharStrings",[ni.length],ni),ni.add(Vn),Wn.isCIDFont){Ii.setEntryLocation("FDSelect",[ni.length],ni);const Yn=this.compileFDSelect(Wn.fdSelect);ni.add(Yn),yi=this.compileTopDicts(Wn.fdArray,ni.length,!0),Ii.setEntryLocation("FDArray",[ni.length],ni),ni.add(yi.output);const ci=yi.trackers;this.compilePrivateDicts(Wn.fdArray,ci,ni)}return this.compilePrivateDicts([Wn.topDict],[Ii],ni),ni.add([0]),ni.data}encodeNumber(Wn){return Number.isInteger(Wn)?this.encodeInteger(Wn):this.encodeFloat(Wn)}static get EncodeFloatRegExp(){return(0,In.shadow)(this,"EncodeFloatRegExp",/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/)}encodeFloat(Wn){let ni=Wn.toString();const li=Gn.EncodeFloatRegExp.exec(ni);if(li){const xi=parseFloat("1e"+((li[2]?+li[2]:0)+li[1].length));ni=(Math.round(Wn*xi)/xi).toString()}let Ai="",gi,yi;for(gi=0,yi=ni.length;gi<yi;++gi){const xi=ni[gi];xi==="e"?Ai+=ni[++gi]==="-"?"c":"b":xi==="."?Ai+="a":xi==="-"?Ai+="e":Ai+=xi}Ai+=Ai.length&1?"f":"ff";const Ii=[30];for(gi=0,yi=Ai.length;gi<yi;gi+=2)Ii.push(parseInt(Ai.substring(gi,gi+2),16));return Ii}encodeInteger(Wn){let ni;return Wn>=-107&&Wn<=107?ni=[Wn+139]:Wn>=108&&Wn<=1131?(Wn-=108,ni=[(Wn>>8)+247,Wn&255]):Wn>=-1131&&Wn<=-108?(Wn=-Wn-108,ni=[(Wn>>8)+251,Wn&255]):Wn>=-32768&&Wn<=32767?ni=[28,Wn>>8&255,Wn&255]:ni=[29,Wn>>24&255,Wn>>16&255,Wn>>8&255,Wn&255],ni}compileHeader(Wn){return[Wn.major,Wn.minor,4,Wn.offSize]}compileNameIndex(Wn){const ni=new On;for(const li of Wn){const Ai=Math.min(li.length,127);let gi=new Array(Ai);for(let yi=0;yi<Ai;yi++){let Ii=li[yi];(Ii<"!"||Ii>"~"||Ii==="["||Ii==="]"||Ii==="("||Ii===")"||Ii==="{"||Ii==="}"||Ii==="<"||Ii===">"||Ii==="/"||Ii==="%")&&(Ii="_"),gi[yi]=Ii}gi=gi.join(""),gi===""&&(gi="Bad_Font_Name"),ni.add((0,In.stringToBytes)(gi))}return this.compileIndex(ni)}compileTopDicts(Wn,ni,li){const Ai=[];let gi=new On;for(const yi of Wn){li&&(yi.removeByName("CIDFontVersion"),yi.removeByName("CIDFontRevision"),yi.removeByName("CIDFontType"),yi.removeByName("CIDCount"),yi.removeByName("UIDBase"));const Ii=new Zn,xi=this.compileDict(yi,Ii);Ai.push(Ii),gi.add(xi),Ii.offset(ni)}return gi=this.compileIndex(gi,Ai),{trackers:Ai,output:gi}}compilePrivateDicts(Wn,ni,li){for(let Ai=0,gi=Wn.length;Ai<gi;++Ai){const yi=Wn[Ai],Ii=yi.privateDict;if(!Ii||!yi.hasName("Private"))throw new In.FormatError("There must be a private dictionary.");const xi=new Zn,Qn=this.compileDict(Ii,xi);let ai=li.length;if(xi.offset(ai),Qn.length||(ai=0),ni[Ai].setEntryLocation("Private",[Qn.length,ai],li),li.add(Qn),Ii.subrsIndex&&Ii.hasName("Subrs")){const Vn=this.compileIndex(Ii.subrsIndex);xi.setEntryLocation("Subrs",[Qn.length],li),li.add(Vn)}}}compileDict(Wn,ni){const li=[];for(const Ai of Wn.order){if(!(Ai in Wn.values))continue;let gi=Wn.values[Ai],yi=Wn.types[Ai];if(Array.isArray(yi)||(yi=[yi]),Array.isArray(gi)||(gi=[gi]),gi.length!==0){for(let Ii=0,xi=yi.length;Ii<xi;++Ii){const Qn=yi[Ii],ai=gi[Ii];switch(Qn){case"num":case"sid":li.push(...this.encodeNumber(ai));break;case"offset":const Vn=Wn.keyToNameMap[Ai];ni.isTracking(Vn)||ni.track(Vn,li.length),li.push(29,0,0,0,0);break;case"array":case"delta":li.push(...this.encodeNumber(ai));for(let Yn=1,ci=gi.length;Yn<ci;++Yn)li.push(...this.encodeNumber(gi[Yn]));break;default:throw new In.FormatError(`Unknown data type of ${Qn}`)}}li.push(...Wn.opcodes[Ai])}}return li}compileStringIndex(Wn){const ni=new On;for(const li of Wn)ni.add((0,In.stringToBytes)(li));return this.compileIndex(ni)}compileCharStrings(Wn){const ni=new On;for(let li=0;li<Wn.count;li++){const Ai=Wn.get(li);if(Ai.length===0){ni.add(new Uint8Array([139,14]));continue}ni.add(Ai)}return this.compileIndex(ni)}compileCharset(Wn,ni,li,Ai){let gi;const yi=ni-1;if(Ai)gi=new Uint8Array([2,0,0,yi>>8&255,yi&255]);else{const Ii=1+yi*2;gi=new Uint8Array(Ii),gi[0]=0;let xi=0;const Qn=Wn.charset.length;let ai=!1;for(let Vn=1;Vn<gi.length;Vn+=2){let Yn=0;if(xi<Qn){const ci=Wn.charset[xi++];Yn=li.getSID(ci),Yn===-1&&(Yn=0,ai||(ai=!0,(0,In.warn)(`Couldn't find ${ci} in CFF strings`)))}gi[Vn]=Yn>>8&255,gi[Vn+1]=Yn&255}}return this.compileTypedArray(gi)}compileEncoding(Wn){return this.compileTypedArray(Wn.raw)}compileFDSelect(Wn){const ni=Wn.format;let li,Ai;switch(ni){case 0:for(li=new Uint8Array(1+Wn.fdSelect.length),li[0]=ni,Ai=0;Ai<Wn.fdSelect.length;Ai++)li[Ai+1]=Wn.fdSelect[Ai];break;case 3:const gi=0;let yi=Wn.fdSelect[0];const Ii=[ni,0,0,gi>>8&255,gi&255,yi];for(Ai=1;Ai<Wn.fdSelect.length;Ai++){const Qn=Wn.fdSelect[Ai];Qn!==yi&&(Ii.push(Ai>>8&255,Ai&255,Qn),yi=Qn)}const xi=(Ii.length-3)/3;Ii[1]=xi>>8&255,Ii[2]=xi&255,Ii.push(Ai>>8&255,Ai&255),li=new Uint8Array(Ii);break}return this.compileTypedArray(li)}compileTypedArray(Wn){return Array.from(Wn)}compileIndex(Wn,ni=[]){const li=Wn.objects,Ai=li.length;if(Ai===0)return[0,0];const gi=[Ai>>8&255,Ai&255];let yi=1,Ii;for(Ii=0;Ii<Ai;++Ii)yi+=li[Ii].length;let xi;yi<256?xi=1:yi<65536?xi=2:yi<16777216?xi=3:xi=4,gi.push(xi);let Qn=1;for(Ii=0;Ii<Ai+1;Ii++)xi===1?gi.push(Qn&255):xi===2?gi.push(Qn>>8&255,Qn&255):xi===3?gi.push(Qn>>16&255,Qn>>8&255,Qn&255):gi.push(Qn>>>24&255,Qn>>16&255,Qn>>8&255,Qn&255),li[Ii]&&(Qn+=li[Ii].length);for(Ii=0;Ii<Ai;Ii++)ni[Ii]&&ni[Ii].offset(gi.length),gi.push(...li[Ii]);return gi}}Mn.CFFCompiler=Gn},(oi,Mn)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.ISOAdobeCharset=Mn.ExpertSubsetCharset=Mn.ExpertCharset=void 0;const ti=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron"];Mn.ISOAdobeCharset=ti;const In=[".notdef","space","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"];Mn.ExpertCharset=In;const Ln=[".notdef","space","dollaroldstyle","dollarsuperior","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","hyphensuperior","colonmonetary","onefitted","rupiah","centoldstyle","figuredash","hypheninferior","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior"];Mn.ExpertSubsetCharset=Ln},(oi,Mn)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.ZapfDingbatsEncoding=Mn.WinAnsiEncoding=Mn.SymbolSetEncoding=Mn.StandardEncoding=Mn.MacRomanEncoding=Mn.ExpertEncoding=void 0,Mn.getEncoding=ui;const ti=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"];Mn.ExpertEncoding=ti;const In=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","centoldstyle","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","","threequartersemdash","","questionsmall","","","","","Ethsmall","","","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","","","","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hypheninferior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","asuperior","centsuperior","","","","","Aacutesmall","Agravesmall","Acircumflexsmall","Adieresissmall","Atildesmall","Aringsmall","Ccedillasmall","Eacutesmall","Egravesmall","Ecircumflexsmall","Edieresissmall","Iacutesmall","Igravesmall","Icircumflexsmall","Idieresissmall","Ntildesmall","Oacutesmall","Ogravesmall","Ocircumflexsmall","Odieresissmall","Otildesmall","Uacutesmall","Ugravesmall","Ucircumflexsmall","Udieresissmall","","eightsuperior","fourinferior","threeinferior","sixinferior","eightinferior","seveninferior","Scaronsmall","","centinferior","twoinferior","","Dieresissmall","","Caronsmall","osuperior","fiveinferior","","commainferior","periodinferior","Yacutesmall","","dollarinferior","","","Thornsmall","","nineinferior","zeroinferior","Zcaronsmall","AEsmall","Oslashsmall","questiondownsmall","oneinferior","Lslashsmall","","","","","","","Cedillasmall","","","","","","OEsmall","figuredash","hyphensuperior","","","","","exclamdownsmall","","Ydieresissmall","","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","ninesuperior","zerosuperior","","esuperior","rsuperior","tsuperior","","","isuperior","ssuperior","dsuperior","","","","","","lsuperior","Ogoneksmall","Brevesmall","Macronsmall","bsuperior","nsuperior","msuperior","commasuperior","periodsuperior","Dotaccentsmall","Ringsmall","","","",""],Ln=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","space","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron"];Mn.MacRomanEncoding=Ln;const jn=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls","","","",""];Mn.StandardEncoding=jn;const Cn=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","bullet","Euro","bullet","quotesinglbase","florin","quotedblbase","ellipsis","dagger","daggerdbl","circumflex","perthousand","Scaron","guilsinglleft","OE","bullet","Zcaron","bullet","bullet","quoteleft","quoteright","quotedblleft","quotedblright","bullet","endash","emdash","tilde","trademark","scaron","guilsinglright","oe","bullet","zcaron","Ydieresis","space","exclamdown","cent","sterling","currency","yen","brokenbar","section","dieresis","copyright","ordfeminine","guillemotleft","logicalnot","hyphen","registered","macron","degree","plusminus","twosuperior","threesuperior","acute","mu","paragraph","periodcentered","cedilla","onesuperior","ordmasculine","guillemotright","onequarter","onehalf","threequarters","questiondown","Agrave","Aacute","Acircumflex","Atilde","Adieresis","Aring","AE","Ccedilla","Egrave","Eacute","Ecircumflex","Edieresis","Igrave","Iacute","Icircumflex","Idieresis","Eth","Ntilde","Ograve","Oacute","Ocircumflex","Otilde","Odieresis","multiply","Oslash","Ugrave","Uacute","Ucircumflex","Udieresis","Yacute","Thorn","germandbls","agrave","aacute","acircumflex","atilde","adieresis","aring","ae","ccedilla","egrave","eacute","ecircumflex","edieresis","igrave","iacute","icircumflex","idieresis","eth","ntilde","ograve","oacute","ocircumflex","otilde","odieresis","divide","oslash","ugrave","uacute","ucircumflex","udieresis","yacute","thorn","ydieresis"];Mn.WinAnsiEncoding=Cn;const Tn=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","universal","numbersign","existential","percent","ampersand","suchthat","parenleft","parenright","asteriskmath","plus","comma","minus","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","congruent","Alpha","Beta","Chi","Delta","Epsilon","Phi","Gamma","Eta","Iota","theta1","Kappa","Lambda","Mu","Nu","Omicron","Pi","Theta","Rho","Sigma","Tau","Upsilon","sigma1","Omega","Xi","Psi","Zeta","bracketleft","therefore","bracketright","perpendicular","underscore","radicalex","alpha","beta","chi","delta","epsilon","phi","gamma","eta","iota","phi1","kappa","lambda","mu","nu","omicron","pi","theta","rho","sigma","tau","upsilon","omega1","omega","xi","psi","zeta","braceleft","bar","braceright","similar","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Euro","Upsilon1","minute","lessequal","fraction","infinity","florin","club","diamond","heart","spade","arrowboth","arrowleft","arrowup","arrowright","arrowdown","degree","plusminus","second","greaterequal","multiply","proportional","partialdiff","bullet","divide","notequal","equivalence","approxequal","ellipsis","arrowvertex","arrowhorizex","carriagereturn","aleph","Ifraktur","Rfraktur","weierstrass","circlemultiply","circleplus","emptyset","intersection","union","propersuperset","reflexsuperset","notsubset","propersubset","reflexsubset","element","notelement","angle","gradient","registerserif","copyrightserif","trademarkserif","product","radical","dotmath","logicalnot","logicaland","logicalor","arrowdblboth","arrowdblleft","arrowdblup","arrowdblright","arrowdbldown","lozenge","angleleft","registersans","copyrightsans","trademarksans","summation","parenlefttp","parenleftex","parenleftbt","bracketlefttp","bracketleftex","bracketleftbt","bracelefttp","braceleftmid","braceleftbt","braceex","","angleright","integral","integraltp","integralex","integralbt","parenrighttp","parenrightex","parenrightbt","bracketrighttp","bracketrightex","bracketrightbt","bracerighttp","bracerightmid","bracerightbt",""];Mn.SymbolSetEncoding=Tn;const Rn=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","a1","a2","a202","a3","a4","a5","a119","a118","a117","a11","a12","a13","a14","a15","a16","a105","a17","a18","a19","a20","a21","a22","a23","a24","a25","a26","a27","a28","a6","a7","a8","a9","a10","a29","a30","a31","a32","a33","a34","a35","a36","a37","a38","a39","a40","a41","a42","a43","a44","a45","a46","a47","a48","a49","a50","a51","a52","a53","a54","a55","a56","a57","a58","a59","a60","a61","a62","a63","a64","a65","a66","a67","a68","a69","a70","a71","a72","a73","a74","a203","a75","a204","a76","a77","a78","a79","a81","a82","a83","a84","a97","a98","a99","a100","","a89","a90","a93","a94","a91","a92","a205","a85","a206","a86","a87","a88","a95","a96","","","","","","","","","","","","","","","","","","","","a101","a102","a103","a104","a106","a107","a108","a112","a111","a110","a109","a120","a121","a122","a123","a124","a125","a126","a127","a128","a129","a130","a131","a132","a133","a134","a135","a136","a137","a138","a139","a140","a141","a142","a143","a144","a145","a146","a147","a148","a149","a150","a151","a152","a153","a154","a155","a156","a157","a158","a159","a160","a161","a163","a164","a196","a165","a192","a166","a167","a168","a169","a170","a171","a172","a173","a162","a174","a175","a176","a177","a178","a179","a193","a180","a199","a181","a200","a182","","a201","a183","a184","a197","a185","a194","a198","a186","a195","a187","a188","a189","a190","a191",""];Mn.ZapfDingbatsEncoding=Rn;function ui(si){switch(si){case"WinAnsiEncoding":return Cn;case"StandardEncoding":return jn;case"MacRomanEncoding":return Ln;case"SymbolSetEncoding":return Tn;case"ZapfDingbatsEncoding":return Rn;case"ExpertEncoding":return ti;case"MacExpertEncoding":return In;default:return null}}},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.SEAC_ANALYSIS_ENABLED=Mn.MacStandardGlyphOrdering=Mn.FontFlags=void 0,Mn.normalizeFontName=Bn,Mn.recoverGlyphName=si,Mn.type1FontGlyphMapping=ei;var In=ti(37),Ln=ti(39),jn=ti(40),Cn=ti(2);const Tn=!0;Mn.SEAC_ANALYSIS_ENABLED=Tn;const Rn={FixedPitch:1,Serif:2,Symbolic:4,Script:8,Nonsymbolic:32,Italic:64,AllCap:65536,SmallCap:131072,ForceBold:262144};Mn.FontFlags=Rn;const ui=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];Mn.MacStandardGlyphOrdering=ui;function si(Nn,Hn){if(Hn[Nn]!==void 0)return Nn;const On=(0,jn.getUnicodeForGlyph)(Nn,Hn);if(On!==-1){for(const hi in Hn)if(Hn[hi]===On)return hi}return(0,Cn.info)("Unable to recover a standard glyph name for: "+Nn),Nn}function ei(Nn,Hn,On){const hi=Object.create(null);let Xn,ii,ri;const di=!!(Nn.flags&Rn.Symbolic);if(Nn.isInternalFont)for(ri=Hn,ii=0;ii<ri.length;ii++)Xn=On.indexOf(ri[ii]),hi[ii]=Xn>=0?Xn:0;else if(Nn.baseEncodingName)for(ri=(0,In.getEncoding)(Nn.baseEncodingName),ii=0;ii<ri.length;ii++)Xn=On.indexOf(ri[ii]),hi[ii]=Xn>=0?Xn:0;else if(di)for(ii in Hn)hi[ii]=Hn[ii];else for(ri=In.StandardEncoding,ii=0;ii<ri.length;ii++)Xn=On.indexOf(ri[ii]),hi[ii]=Xn>=0?Xn:0;const fi=Nn.differences;let wi;if(fi)for(ii in fi){const Jn=fi[ii];if(Xn=On.indexOf(Jn),Xn===-1){wi||(wi=(0,Ln.getGlyphsUnicode)());const pi=si(Jn,wi);pi!==Jn&&(Xn=On.indexOf(pi))}hi[ii]=Xn>=0?Xn:0}return hi}function Bn(Nn){return Nn.replaceAll(/[,_]/g,"-").replaceAll(/\s/g,"")}},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.getGlyphsUnicode=Mn.getDingbatsGlyphsUnicode=void 0;var In=ti(3);const Ln=(0,In.getLookupTableFactory)(function(Cn){Cn.A=65,Cn.AE=198,Cn.AEacute=508,Cn.AEmacron=482,Cn.AEsmall=63462,Cn.Aacute=193,Cn.Aacutesmall=63457,Cn.Abreve=258,Cn.Abreveacute=7854,Cn.Abrevecyrillic=1232,Cn.Abrevedotbelow=7862,Cn.Abrevegrave=7856,Cn.Abrevehookabove=7858,Cn.Abrevetilde=7860,Cn.Acaron=461,Cn.Acircle=9398,Cn.Acircumflex=194,Cn.Acircumflexacute=7844,Cn.Acircumflexdotbelow=7852,Cn.Acircumflexgrave=7846,Cn.Acircumflexhookabove=7848,Cn.Acircumflexsmall=63458,Cn.Acircumflextilde=7850,Cn.Acute=63177,Cn.Acutesmall=63412,Cn.Acyrillic=1040,Cn.Adblgrave=512,Cn.Adieresis=196,Cn.Adieresiscyrillic=1234,Cn.Adieresismacron=478,Cn.Adieresissmall=63460,Cn.Adotbelow=7840,Cn.Adotmacron=480,Cn.Agrave=192,Cn.Agravesmall=63456,Cn.Ahookabove=7842,Cn.Aiecyrillic=1236,Cn.Ainvertedbreve=514,Cn.Alpha=913,Cn.Alphatonos=902,Cn.Amacron=256,Cn.Amonospace=65313,Cn.Aogonek=260,Cn.Aring=197,Cn.Aringacute=506,Cn.Aringbelow=7680,Cn.Aringsmall=63461,Cn.Asmall=63329,Cn.Atilde=195,Cn.Atildesmall=63459,Cn.Aybarmenian=1329,Cn.B=66,Cn.Bcircle=9399,Cn.Bdotaccent=7682,Cn.Bdotbelow=7684,Cn.Becyrillic=1041,Cn.Benarmenian=1330,Cn.Beta=914,Cn.Bhook=385,Cn.Blinebelow=7686,Cn.Bmonospace=65314,Cn.Brevesmall=63220,Cn.Bsmall=63330,Cn.Btopbar=386,Cn.C=67,Cn.Caarmenian=1342,Cn.Cacute=262,Cn.Caron=63178,Cn.Caronsmall=63221,Cn.Ccaron=268,Cn.Ccedilla=199,Cn.Ccedillaacute=7688,Cn.Ccedillasmall=63463,Cn.Ccircle=9400,Cn.Ccircumflex=264,Cn.Cdot=266,Cn.Cdotaccent=266,Cn.Cedillasmall=63416,Cn.Chaarmenian=1353,Cn.Cheabkhasiancyrillic=1212,Cn.Checyrillic=1063,Cn.Chedescenderabkhasiancyrillic=1214,Cn.Chedescendercyrillic=1206,Cn.Chedieresiscyrillic=1268,Cn.Cheharmenian=1347,Cn.Chekhakassiancyrillic=1227,Cn.Cheverticalstrokecyrillic=1208,Cn.Chi=935,Cn.Chook=391,Cn.Circumflexsmall=63222,Cn.Cmonospace=65315,Cn.Coarmenian=1361,Cn.Csmall=63331,Cn.D=68,Cn.DZ=497,Cn.DZcaron=452,Cn.Daarmenian=1332,Cn.Dafrican=393,Cn.Dcaron=270,Cn.Dcedilla=7696,Cn.Dcircle=9401,Cn.Dcircumflexbelow=7698,Cn.Dcroat=272,Cn.Ddotaccent=7690,Cn.Ddotbelow=7692,Cn.Decyrillic=1044,Cn.Deicoptic=1006,Cn.Delta=8710,Cn.Deltagreek=916,Cn.Dhook=394,Cn.Dieresis=63179,Cn.DieresisAcute=63180,Cn.DieresisGrave=63181,Cn.Dieresissmall=63400,Cn.Digammagreek=988,Cn.Djecyrillic=1026,Cn.Dlinebelow=7694,Cn.Dmonospace=65316,Cn.Dotaccentsmall=63223,Cn.Dslash=272,Cn.Dsmall=63332,Cn.Dtopbar=395,Cn.Dz=498,Cn.Dzcaron=453,Cn.Dzeabkhasiancyrillic=1248,Cn.Dzecyrillic=1029,Cn.Dzhecyrillic=1039,Cn.E=69,Cn.Eacute=201,Cn.Eacutesmall=63465,Cn.Ebreve=276,Cn.Ecaron=282,Cn.Ecedillabreve=7708,Cn.Echarmenian=1333,Cn.Ecircle=9402,Cn.Ecircumflex=202,Cn.Ecircumflexacute=7870,Cn.Ecircumflexbelow=7704,Cn.Ecircumflexdotbelow=7878,Cn.Ecircumflexgrave=7872,Cn.Ecircumflexhookabove=7874,Cn.Ecircumflexsmall=63466,Cn.Ecircumflextilde=7876,Cn.Ecyrillic=1028,Cn.Edblgrave=516,Cn.Edieresis=203,Cn.Edieresissmall=63467,Cn.Edot=278,Cn.Edotaccent=278,Cn.Edotbelow=7864,Cn.Efcyrillic=1060,Cn.Egrave=200,Cn.Egravesmall=63464,Cn.Eharmenian=1335,Cn.Ehookabove=7866,Cn.Eightroman=8551,Cn.Einvertedbreve=518,Cn.Eiotifiedcyrillic=1124,Cn.Elcyrillic=1051,Cn.Elevenroman=8554,Cn.Emacron=274,Cn.Emacronacute=7702,Cn.Emacrongrave=7700,Cn.Emcyrillic=1052,Cn.Emonospace=65317,Cn.Encyrillic=1053,Cn.Endescendercyrillic=1186,Cn.Eng=330,Cn.Enghecyrillic=1188,Cn.Enhookcyrillic=1223,Cn.Eogonek=280,Cn.Eopen=400,Cn.Epsilon=917,Cn.Epsilontonos=904,Cn.Ercyrillic=1056,Cn.Ereversed=398,Cn.Ereversedcyrillic=1069,Cn.Escyrillic=1057,Cn.Esdescendercyrillic=1194,Cn.Esh=425,Cn.Esmall=63333,Cn.Eta=919,Cn.Etarmenian=1336,Cn.Etatonos=905,Cn.Eth=208,Cn.Ethsmall=63472,Cn.Etilde=7868,Cn.Etildebelow=7706,Cn.Euro=8364,Cn.Ezh=439,Cn.Ezhcaron=494,Cn.Ezhreversed=440,Cn.F=70,Cn.Fcircle=9403,Cn.Fdotaccent=7710,Cn.Feharmenian=1366,Cn.Feicoptic=996,Cn.Fhook=401,Cn.Fitacyrillic=1138,Cn.Fiveroman=8548,Cn.Fmonospace=65318,Cn.Fourroman=8547,Cn.Fsmall=63334,Cn.G=71,Cn.GBsquare=13191,Cn.Gacute=500,Cn.Gamma=915,Cn.Gammaafrican=404,Cn.Gangiacoptic=1002,Cn.Gbreve=286,Cn.Gcaron=486,Cn.Gcedilla=290,Cn.Gcircle=9404,Cn.Gcircumflex=284,Cn.Gcommaaccent=290,Cn.Gdot=288,Cn.Gdotaccent=288,Cn.Gecyrillic=1043,Cn.Ghadarmenian=1346,Cn.Ghemiddlehookcyrillic=1172,Cn.Ghestrokecyrillic=1170,Cn.Gheupturncyrillic=1168,Cn.Ghook=403,Cn.Gimarmenian=1331,Cn.Gjecyrillic=1027,Cn.Gmacron=7712,Cn.Gmonospace=65319,Cn.Grave=63182,Cn.Gravesmall=63328,Cn.Gsmall=63335,Cn.Gsmallhook=667,Cn.Gstroke=484,Cn.H=72,Cn.H18533=9679,Cn.H18543=9642,Cn.H18551=9643,Cn.H22073=9633,Cn.HPsquare=13259,Cn.Haabkhasiancyrillic=1192,Cn.Hadescendercyrillic=1202,Cn.Hardsigncyrillic=1066,Cn.Hbar=294,Cn.Hbrevebelow=7722,Cn.Hcedilla=7720,Cn.Hcircle=9405,Cn.Hcircumflex=292,Cn.Hdieresis=7718,Cn.Hdotaccent=7714,Cn.Hdotbelow=7716,Cn.Hmonospace=65320,Cn.Hoarmenian=1344,Cn.Horicoptic=1e3,Cn.Hsmall=63336,Cn.Hungarumlaut=63183,Cn.Hungarumlautsmall=63224,Cn.Hzsquare=13200,Cn.I=73,Cn.IAcyrillic=1071,Cn.IJ=306,Cn.IUcyrillic=1070,Cn.Iacute=205,Cn.Iacutesmall=63469,Cn.Ibreve=300,Cn.Icaron=463,Cn.Icircle=9406,Cn.Icircumflex=206,Cn.Icircumflexsmall=63470,Cn.Icyrillic=1030,Cn.Idblgrave=520,Cn.Idieresis=207,Cn.Idieresisacute=7726,Cn.Idieresiscyrillic=1252,Cn.Idieresissmall=63471,Cn.Idot=304,Cn.Idotaccent=304,Cn.Idotbelow=7882,Cn.Iebrevecyrillic=1238,Cn.Iecyrillic=1045,Cn.Ifraktur=8465,Cn.Igrave=204,Cn.Igravesmall=63468,Cn.Ihookabove=7880,Cn.Iicyrillic=1048,Cn.Iinvertedbreve=522,Cn.Iishortcyrillic=1049,Cn.Imacron=298,Cn.Imacroncyrillic=1250,Cn.Imonospace=65321,Cn.Iniarmenian=1339,Cn.Iocyrillic=1025,Cn.Iogonek=302,Cn.Iota=921,Cn.Iotaafrican=406,Cn.Iotadieresis=938,Cn.Iotatonos=906,Cn.Ismall=63337,Cn.Istroke=407,Cn.Itilde=296,Cn.Itildebelow=7724,Cn.Izhitsacyrillic=1140,Cn.Izhitsadblgravecyrillic=1142,Cn.J=74,Cn.Jaarmenian=1345,Cn.Jcircle=9407,Cn.Jcircumflex=308,Cn.Jecyrillic=1032,Cn.Jheharmenian=1355,Cn.Jmonospace=65322,Cn.Jsmall=63338,Cn.K=75,Cn.KBsquare=13189,Cn.KKsquare=13261,Cn.Kabashkircyrillic=1184,Cn.Kacute=7728,Cn.Kacyrillic=1050,Cn.Kadescendercyrillic=1178,Cn.Kahookcyrillic=1219,Cn.Kappa=922,Cn.Kastrokecyrillic=1182,Cn.Kaverticalstrokecyrillic=1180,Cn.Kcaron=488,Cn.Kcedilla=310,Cn.Kcircle=9408,Cn.Kcommaaccent=310,Cn.Kdotbelow=7730,Cn.Keharmenian=1364,Cn.Kenarmenian=1343,Cn.Khacyrillic=1061,Cn.Kheicoptic=998,Cn.Khook=408,Cn.Kjecyrillic=1036,Cn.Klinebelow=7732,Cn.Kmonospace=65323,Cn.Koppacyrillic=1152,Cn.Koppagreek=990,Cn.Ksicyrillic=1134,Cn.Ksmall=63339,Cn.L=76,Cn.LJ=455,Cn.LL=63167,Cn.Lacute=313,Cn.Lambda=923,Cn.Lcaron=317,Cn.Lcedilla=315,Cn.Lcircle=9409,Cn.Lcircumflexbelow=7740,Cn.Lcommaaccent=315,Cn.Ldot=319,Cn.Ldotaccent=319,Cn.Ldotbelow=7734,Cn.Ldotbelowmacron=7736,Cn.Liwnarmenian=1340,Cn.Lj=456,Cn.Ljecyrillic=1033,Cn.Llinebelow=7738,Cn.Lmonospace=65324,Cn.Lslash=321,Cn.Lslashsmall=63225,Cn.Lsmall=63340,Cn.M=77,Cn.MBsquare=13190,Cn.Macron=63184,Cn.Macronsmall=63407,Cn.Macute=7742,Cn.Mcircle=9410,Cn.Mdotaccent=7744,Cn.Mdotbelow=7746,Cn.Menarmenian=1348,Cn.Mmonospace=65325,Cn.Msmall=63341,Cn.Mturned=412,Cn.Mu=924,Cn.N=78,Cn.NJ=458,Cn.Nacute=323,Cn.Ncaron=327,Cn.Ncedilla=325,Cn.Ncircle=9411,Cn.Ncircumflexbelow=7754,Cn.Ncommaaccent=325,Cn.Ndotaccent=7748,Cn.Ndotbelow=7750,Cn.Nhookleft=413,Cn.Nineroman=8552,Cn.Nj=459,Cn.Njecyrillic=1034,Cn.Nlinebelow=7752,Cn.Nmonospace=65326,Cn.Nowarmenian=1350,Cn.Nsmall=63342,Cn.Ntilde=209,Cn.Ntildesmall=63473,Cn.Nu=925,Cn.O=79,Cn.OE=338,Cn.OEsmall=63226,Cn.Oacute=211,Cn.Oacutesmall=63475,Cn.Obarredcyrillic=1256,Cn.Obarreddieresiscyrillic=1258,Cn.Obreve=334,Cn.Ocaron=465,Cn.Ocenteredtilde=415,Cn.Ocircle=9412,Cn.Ocircumflex=212,Cn.Ocircumflexacute=7888,Cn.Ocircumflexdotbelow=7896,Cn.Ocircumflexgrave=7890,Cn.Ocircumflexhookabove=7892,Cn.Ocircumflexsmall=63476,Cn.Ocircumflextilde=7894,Cn.Ocyrillic=1054,Cn.Odblacute=336,Cn.Odblgrave=524,Cn.Odieresis=214,Cn.Odieresiscyrillic=1254,Cn.Odieresissmall=63478,Cn.Odotbelow=7884,Cn.Ogoneksmall=63227,Cn.Ograve=210,Cn.Ogravesmall=63474,Cn.Oharmenian=1365,Cn.Ohm=8486,Cn.Ohookabove=7886,Cn.Ohorn=416,Cn.Ohornacute=7898,Cn.Ohorndotbelow=7906,Cn.Ohorngrave=7900,Cn.Ohornhookabove=7902,Cn.Ohorntilde=7904,Cn.Ohungarumlaut=336,Cn.Oi=418,Cn.Oinvertedbreve=526,Cn.Omacron=332,Cn.Omacronacute=7762,Cn.Omacrongrave=7760,Cn.Omega=8486,Cn.Omegacyrillic=1120,Cn.Omegagreek=937,Cn.Omegaroundcyrillic=1146,Cn.Omegatitlocyrillic=1148,Cn.Omegatonos=911,Cn.Omicron=927,Cn.Omicrontonos=908,Cn.Omonospace=65327,Cn.Oneroman=8544,Cn.Oogonek=490,Cn.Oogonekmacron=492,Cn.Oopen=390,Cn.Oslash=216,Cn.Oslashacute=510,Cn.Oslashsmall=63480,Cn.Osmall=63343,Cn.Ostrokeacute=510,Cn.Otcyrillic=1150,Cn.Otilde=213,Cn.Otildeacute=7756,Cn.Otildedieresis=7758,Cn.Otildesmall=63477,Cn.P=80,Cn.Pacute=7764,Cn.Pcircle=9413,Cn.Pdotaccent=7766,Cn.Pecyrillic=1055,Cn.Peharmenian=1354,Cn.Pemiddlehookcyrillic=1190,Cn.Phi=934,Cn.Phook=420,Cn.Pi=928,Cn.Piwrarmenian=1363,Cn.Pmonospace=65328,Cn.Psi=936,Cn.Psicyrillic=1136,Cn.Psmall=63344,Cn.Q=81,Cn.Qcircle=9414,Cn.Qmonospace=65329,Cn.Qsmall=63345,Cn.R=82,Cn.Raarmenian=1356,Cn.Racute=340,Cn.Rcaron=344,Cn.Rcedilla=342,Cn.Rcircle=9415,Cn.Rcommaaccent=342,Cn.Rdblgrave=528,Cn.Rdotaccent=7768,Cn.Rdotbelow=7770,Cn.Rdotbelowmacron=7772,Cn.Reharmenian=1360,Cn.Rfraktur=8476,Cn.Rho=929,Cn.Ringsmall=63228,Cn.Rinvertedbreve=530,Cn.Rlinebelow=7774,Cn.Rmonospace=65330,Cn.Rsmall=63346,Cn.Rsmallinverted=641,Cn.Rsmallinvertedsuperior=694,Cn.S=83,Cn.SF010000=9484,Cn.SF020000=9492,Cn.SF030000=9488,Cn.SF040000=9496,Cn.SF050000=9532,Cn.SF060000=9516,Cn.SF070000=9524,Cn.SF080000=9500,Cn.SF090000=9508,Cn.SF100000=9472,Cn.SF110000=9474,Cn.SF190000=9569,Cn.SF200000=9570,Cn.SF210000=9558,Cn.SF220000=9557,Cn.SF230000=9571,Cn.SF240000=9553,Cn.SF250000=9559,Cn.SF260000=9565,Cn.SF270000=9564,Cn.SF280000=9563,Cn.SF360000=9566,Cn.SF370000=9567,Cn.SF380000=9562,Cn.SF390000=9556,Cn.SF400000=9577,Cn.SF410000=9574,Cn.SF420000=9568,Cn.SF430000=9552,Cn.SF440000=9580,Cn.SF450000=9575,Cn.SF460000=9576,Cn.SF470000=9572,Cn.SF480000=9573,Cn.SF490000=9561,Cn.SF500000=9560,Cn.SF510000=9554,Cn.SF520000=9555,Cn.SF530000=9579,Cn.SF540000=9578,Cn.Sacute=346,Cn.Sacutedotaccent=7780,Cn.Sampigreek=992,Cn.Scaron=352,Cn.Scarondotaccent=7782,Cn.Scaronsmall=63229,Cn.Scedilla=350,Cn.Schwa=399,Cn.Schwacyrillic=1240,Cn.Schwadieresiscyrillic=1242,Cn.Scircle=9416,Cn.Scircumflex=348,Cn.Scommaaccent=536,Cn.Sdotaccent=7776,Cn.Sdotbelow=7778,Cn.Sdotbelowdotaccent=7784,Cn.Seharmenian=1357,Cn.Sevenroman=8550,Cn.Shaarmenian=1351,Cn.Shacyrillic=1064,Cn.Shchacyrillic=1065,Cn.Sheicoptic=994,Cn.Shhacyrillic=1210,Cn.Shimacoptic=1004,Cn.Sigma=931,Cn.Sixroman=8549,Cn.Smonospace=65331,Cn.Softsigncyrillic=1068,Cn.Ssmall=63347,Cn.Stigmagreek=986,Cn.T=84,Cn.Tau=932,Cn.Tbar=358,Cn.Tcaron=356,Cn.Tcedilla=354,Cn.Tcircle=9417,Cn.Tcircumflexbelow=7792,Cn.Tcommaaccent=354,Cn.Tdotaccent=7786,Cn.Tdotbelow=7788,Cn.Tecyrillic=1058,Cn.Tedescendercyrillic=1196,Cn.Tenroman=8553,Cn.Tetsecyrillic=1204,Cn.Theta=920,Cn.Thook=428,Cn.Thorn=222,Cn.Thornsmall=63486,Cn.Threeroman=8546,Cn.Tildesmall=63230,Cn.Tiwnarmenian=1359,Cn.Tlinebelow=7790,Cn.Tmonospace=65332,Cn.Toarmenian=1337,Cn.Tonefive=444,Cn.Tonesix=388,Cn.Tonetwo=423,Cn.Tretroflexhook=430,Cn.Tsecyrillic=1062,Cn.Tshecyrillic=1035,Cn.Tsmall=63348,Cn.Twelveroman=8555,Cn.Tworoman=8545,Cn.U=85,Cn.Uacute=218,Cn.Uacutesmall=63482,Cn.Ubreve=364,Cn.Ucaron=467,Cn.Ucircle=9418,Cn.Ucircumflex=219,Cn.Ucircumflexbelow=7798,Cn.Ucircumflexsmall=63483,Cn.Ucyrillic=1059,Cn.Udblacute=368,Cn.Udblgrave=532,Cn.Udieresis=220,Cn.Udieresisacute=471,Cn.Udieresisbelow=7794,Cn.Udieresiscaron=473,Cn.Udieresiscyrillic=1264,Cn.Udieresisgrave=475,Cn.Udieresismacron=469,Cn.Udieresissmall=63484,Cn.Udotbelow=7908,Cn.Ugrave=217,Cn.Ugravesmall=63481,Cn.Uhookabove=7910,Cn.Uhorn=431,Cn.Uhornacute=7912,Cn.Uhorndotbelow=7920,Cn.Uhorngrave=7914,Cn.Uhornhookabove=7916,Cn.Uhorntilde=7918,Cn.Uhungarumlaut=368,Cn.Uhungarumlautcyrillic=1266,Cn.Uinvertedbreve=534,Cn.Ukcyrillic=1144,Cn.Umacron=362,Cn.Umacroncyrillic=1262,Cn.Umacrondieresis=7802,Cn.Umonospace=65333,Cn.Uogonek=370,Cn.Upsilon=933,Cn.Upsilon1=978,Cn.Upsilonacutehooksymbolgreek=979,Cn.Upsilonafrican=433,Cn.Upsilondieresis=939,Cn.Upsilondieresishooksymbolgreek=980,Cn.Upsilonhooksymbol=978,Cn.Upsilontonos=910,Cn.Uring=366,Cn.Ushortcyrillic=1038,Cn.Usmall=63349,Cn.Ustraightcyrillic=1198,Cn.Ustraightstrokecyrillic=1200,Cn.Utilde=360,Cn.Utildeacute=7800,Cn.Utildebelow=7796,Cn.V=86,Cn.Vcircle=9419,Cn.Vdotbelow=7806,Cn.Vecyrillic=1042,Cn.Vewarmenian=1358,Cn.Vhook=434,Cn.Vmonospace=65334,Cn.Voarmenian=1352,Cn.Vsmall=63350,Cn.Vtilde=7804,Cn.W=87,Cn.Wacute=7810,Cn.Wcircle=9420,Cn.Wcircumflex=372,Cn.Wdieresis=7812,Cn.Wdotaccent=7814,Cn.Wdotbelow=7816,Cn.Wgrave=7808,Cn.Wmonospace=65335,Cn.Wsmall=63351,Cn.X=88,Cn.Xcircle=9421,Cn.Xdieresis=7820,Cn.Xdotaccent=7818,Cn.Xeharmenian=1341,Cn.Xi=926,Cn.Xmonospace=65336,Cn.Xsmall=63352,Cn.Y=89,Cn.Yacute=221,Cn.Yacutesmall=63485,Cn.Yatcyrillic=1122,Cn.Ycircle=9422,Cn.Ycircumflex=374,Cn.Ydieresis=376,Cn.Ydieresissmall=63487,Cn.Ydotaccent=7822,Cn.Ydotbelow=7924,Cn.Yericyrillic=1067,Cn.Yerudieresiscyrillic=1272,Cn.Ygrave=7922,Cn.Yhook=435,Cn.Yhookabove=7926,Cn.Yiarmenian=1349,Cn.Yicyrillic=1031,Cn.Yiwnarmenian=1362,Cn.Ymonospace=65337,Cn.Ysmall=63353,Cn.Ytilde=7928,Cn.Yusbigcyrillic=1130,Cn.Yusbigiotifiedcyrillic=1132,Cn.Yuslittlecyrillic=1126,Cn.Yuslittleiotifiedcyrillic=1128,Cn.Z=90,Cn.Zaarmenian=1334,Cn.Zacute=377,Cn.Zcaron=381,Cn.Zcaronsmall=63231,Cn.Zcircle=9423,Cn.Zcircumflex=7824,Cn.Zdot=379,Cn.Zdotaccent=379,Cn.Zdotbelow=7826,Cn.Zecyrillic=1047,Cn.Zedescendercyrillic=1176,Cn.Zedieresiscyrillic=1246,Cn.Zeta=918,Cn.Zhearmenian=1338,Cn.Zhebrevecyrillic=1217,Cn.Zhecyrillic=1046,Cn.Zhedescendercyrillic=1174,Cn.Zhedieresiscyrillic=1244,Cn.Zlinebelow=7828,Cn.Zmonospace=65338,Cn.Zsmall=63354,Cn.Zstroke=437,Cn.a=97,Cn.aabengali=2438,Cn.aacute=225,Cn.aadeva=2310,Cn.aagujarati=2694,Cn.aagurmukhi=2566,Cn.aamatragurmukhi=2622,Cn.aarusquare=13059,Cn.aavowelsignbengali=2494,Cn.aavowelsigndeva=2366,Cn.aavowelsigngujarati=2750,Cn.abbreviationmarkarmenian=1375,Cn.abbreviationsigndeva=2416,Cn.abengali=2437,Cn.abopomofo=12570,Cn.abreve=259,Cn.abreveacute=7855,Cn.abrevecyrillic=1233,Cn.abrevedotbelow=7863,Cn.abrevegrave=7857,Cn.abrevehookabove=7859,Cn.abrevetilde=7861,Cn.acaron=462,Cn.acircle=9424,Cn.acircumflex=226,Cn.acircumflexacute=7845,Cn.acircumflexdotbelow=7853,Cn.acircumflexgrave=7847,Cn.acircumflexhookabove=7849,Cn.acircumflextilde=7851,Cn.acute=180,Cn.acutebelowcmb=791,Cn.acutecmb=769,Cn.acutecomb=769,Cn.acutedeva=2388,Cn.acutelowmod=719,Cn.acutetonecmb=833,Cn.acyrillic=1072,Cn.adblgrave=513,Cn.addakgurmukhi=2673,Cn.adeva=2309,Cn.adieresis=228,Cn.adieresiscyrillic=1235,Cn.adieresismacron=479,Cn.adotbelow=7841,Cn.adotmacron=481,Cn.ae=230,Cn.aeacute=509,Cn.aekorean=12624,Cn.aemacron=483,Cn.afii00208=8213,Cn.afii08941=8356,Cn.afii10017=1040,Cn.afii10018=1041,Cn.afii10019=1042,Cn.afii10020=1043,Cn.afii10021=1044,Cn.afii10022=1045,Cn.afii10023=1025,Cn.afii10024=1046,Cn.afii10025=1047,Cn.afii10026=1048,Cn.afii10027=1049,Cn.afii10028=1050,Cn.afii10029=1051,Cn.afii10030=1052,Cn.afii10031=1053,Cn.afii10032=1054,Cn.afii10033=1055,Cn.afii10034=1056,Cn.afii10035=1057,Cn.afii10036=1058,Cn.afii10037=1059,Cn.afii10038=1060,Cn.afii10039=1061,Cn.afii10040=1062,Cn.afii10041=1063,Cn.afii10042=1064,Cn.afii10043=1065,Cn.afii10044=1066,Cn.afii10045=1067,Cn.afii10046=1068,Cn.afii10047=1069,Cn.afii10048=1070,Cn.afii10049=1071,Cn.afii10050=1168,Cn.afii10051=1026,Cn.afii10052=1027,Cn.afii10053=1028,Cn.afii10054=1029,Cn.afii10055=1030,Cn.afii10056=1031,Cn.afii10057=1032,Cn.afii10058=1033,Cn.afii10059=1034,Cn.afii10060=1035,Cn.afii10061=1036,Cn.afii10062=1038,Cn.afii10063=63172,Cn.afii10064=63173,Cn.afii10065=1072,Cn.afii10066=1073,Cn.afii10067=1074,Cn.afii10068=1075,Cn.afii10069=1076,Cn.afii10070=1077,Cn.afii10071=1105,Cn.afii10072=1078,Cn.afii10073=1079,Cn.afii10074=1080,Cn.afii10075=1081,Cn.afii10076=1082,Cn.afii10077=1083,Cn.afii10078=1084,Cn.afii10079=1085,Cn.afii10080=1086,Cn.afii10081=1087,Cn.afii10082=1088,Cn.afii10083=1089,Cn.afii10084=1090,Cn.afii10085=1091,Cn.afii10086=1092,Cn.afii10087=1093,Cn.afii10088=1094,Cn.afii10089=1095,Cn.afii10090=1096,Cn.afii10091=1097,Cn.afii10092=1098,Cn.afii10093=1099,Cn.afii10094=1100,Cn.afii10095=1101,Cn.afii10096=1102,Cn.afii10097=1103,Cn.afii10098=1169,Cn.afii10099=1106,Cn.afii10100=1107,Cn.afii10101=1108,Cn.afii10102=1109,Cn.afii10103=1110,Cn.afii10104=1111,Cn.afii10105=1112,Cn.afii10106=1113,Cn.afii10107=1114,Cn.afii10108=1115,Cn.afii10109=1116,Cn.afii10110=1118,Cn.afii10145=1039,Cn.afii10146=1122,Cn.afii10147=1138,Cn.afii10148=1140,Cn.afii10192=63174,Cn.afii10193=1119,Cn.afii10194=1123,Cn.afii10195=1139,Cn.afii10196=1141,Cn.afii10831=63175,Cn.afii10832=63176,Cn.afii10846=1241,Cn.afii299=8206,Cn.afii300=8207,Cn.afii301=8205,Cn.afii57381=1642,Cn.afii57388=1548,Cn.afii57392=1632,Cn.afii57393=1633,Cn.afii57394=1634,Cn.afii57395=1635,Cn.afii57396=1636,Cn.afii57397=1637,Cn.afii57398=1638,Cn.afii57399=1639,Cn.afii57400=1640,Cn.afii57401=1641,Cn.afii57403=1563,Cn.afii57407=1567,Cn.afii57409=1569,Cn.afii57410=1570,Cn.afii57411=1571,Cn.afii57412=1572,Cn.afii57413=1573,Cn.afii57414=1574,Cn.afii57415=1575,Cn.afii57416=1576,Cn.afii57417=1577,Cn.afii57418=1578,Cn.afii57419=1579,Cn.afii57420=1580,Cn.afii57421=1581,Cn.afii57422=1582,Cn.afii57423=1583,Cn.afii57424=1584,Cn.afii57425=1585,Cn.afii57426=1586,Cn.afii57427=1587,Cn.afii57428=1588,Cn.afii57429=1589,Cn.afii57430=1590,Cn.afii57431=1591,Cn.afii57432=1592,Cn.afii57433=1593,Cn.afii57434=1594,Cn.afii57440=1600,Cn.afii57441=1601,Cn.afii57442=1602,Cn.afii57443=1603,Cn.afii57444=1604,Cn.afii57445=1605,Cn.afii57446=1606,Cn.afii57448=1608,Cn.afii57449=1609,Cn.afii57450=1610,Cn.afii57451=1611,Cn.afii57452=1612,Cn.afii57453=1613,Cn.afii57454=1614,Cn.afii57455=1615,Cn.afii57456=1616,Cn.afii57457=1617,Cn.afii57458=1618,Cn.afii57470=1607,Cn.afii57505=1700,Cn.afii57506=1662,Cn.afii57507=1670,Cn.afii57508=1688,Cn.afii57509=1711,Cn.afii57511=1657,Cn.afii57512=1672,Cn.afii57513=1681,Cn.afii57514=1722,Cn.afii57519=1746,Cn.afii57534=1749,Cn.afii57636=8362,Cn.afii57645=1470,Cn.afii57658=1475,Cn.afii57664=1488,Cn.afii57665=1489,Cn.afii57666=1490,Cn.afii57667=1491,Cn.afii57668=1492,Cn.afii57669=1493,Cn.afii57670=1494,Cn.afii57671=1495,Cn.afii57672=1496,Cn.afii57673=1497,Cn.afii57674=1498,Cn.afii57675=1499,Cn.afii57676=1500,Cn.afii57677=1501,Cn.afii57678=1502,Cn.afii57679=1503,Cn.afii57680=1504,Cn.afii57681=1505,Cn.afii57682=1506,Cn.afii57683=1507,Cn.afii57684=1508,Cn.afii57685=1509,Cn.afii57686=1510,Cn.afii57687=1511,Cn.afii57688=1512,Cn.afii57689=1513,Cn.afii57690=1514,Cn.afii57694=64298,Cn.afii57695=64299,Cn.afii57700=64331,Cn.afii57705=64287,Cn.afii57716=1520,Cn.afii57717=1521,Cn.afii57718=1522,Cn.afii57723=64309,Cn.afii57793=1460,Cn.afii57794=1461,Cn.afii57795=1462,Cn.afii57796=1467,Cn.afii57797=1464,Cn.afii57798=1463,Cn.afii57799=1456,Cn.afii57800=1458,Cn.afii57801=1457,Cn.afii57802=1459,Cn.afii57803=1474,Cn.afii57804=1473,Cn.afii57806=1465,Cn.afii57807=1468,Cn.afii57839=1469,Cn.afii57841=1471,Cn.afii57842=1472,Cn.afii57929=700,Cn.afii61248=8453,Cn.afii61289=8467,Cn.afii61352=8470,Cn.afii61573=8236,Cn.afii61574=8237,Cn.afii61575=8238,Cn.afii61664=8204,Cn.afii63167=1645,Cn.afii64937=701,Cn.agrave=224,Cn.agujarati=2693,Cn.agurmukhi=2565,Cn.ahiragana=12354,Cn.ahookabove=7843,Cn.aibengali=2448,Cn.aibopomofo=12574,Cn.aideva=2320,Cn.aiecyrillic=1237,Cn.aigujarati=2704,Cn.aigurmukhi=2576,Cn.aimatragurmukhi=2632,Cn.ainarabic=1593,Cn.ainfinalarabic=65226,Cn.aininitialarabic=65227,Cn.ainmedialarabic=65228,Cn.ainvertedbreve=515,Cn.aivowelsignbengali=2504,Cn.aivowelsigndeva=2376,Cn.aivowelsigngujarati=2760,Cn.akatakana=12450,Cn.akatakanahalfwidth=65393,Cn.akorean=12623,Cn.alef=1488,Cn.alefarabic=1575,Cn.alefdageshhebrew=64304,Cn.aleffinalarabic=65166,Cn.alefhamzaabovearabic=1571,Cn.alefhamzaabovefinalarabic=65156,Cn.alefhamzabelowarabic=1573,Cn.alefhamzabelowfinalarabic=65160,Cn.alefhebrew=1488,Cn.aleflamedhebrew=64335,Cn.alefmaddaabovearabic=1570,Cn.alefmaddaabovefinalarabic=65154,Cn.alefmaksuraarabic=1609,Cn.alefmaksurafinalarabic=65264,Cn.alefmaksurainitialarabic=65267,Cn.alefmaksuramedialarabic=65268,Cn.alefpatahhebrew=64302,Cn.alefqamatshebrew=64303,Cn.aleph=8501,Cn.allequal=8780,Cn.alpha=945,Cn.alphatonos=940,Cn.amacron=257,Cn.amonospace=65345,Cn.ampersand=38,Cn.ampersandmonospace=65286,Cn.ampersandsmall=63270,Cn.amsquare=13250,Cn.anbopomofo=12578,Cn.angbopomofo=12580,Cn.angbracketleft=12296,Cn.angbracketright=12297,Cn.angkhankhuthai=3674,Cn.angle=8736,Cn.anglebracketleft=12296,Cn.anglebracketleftvertical=65087,Cn.anglebracketright=12297,Cn.anglebracketrightvertical=65088,Cn.angleleft=9001,Cn.angleright=9002,Cn.angstrom=8491,Cn.anoteleia=903,Cn.anudattadeva=2386,Cn.anusvarabengali=2434,Cn.anusvaradeva=2306,Cn.anusvaragujarati=2690,Cn.aogonek=261,Cn.apaatosquare=13056,Cn.aparen=9372,Cn.apostrophearmenian=1370,Cn.apostrophemod=700,Cn.apple=63743,Cn.approaches=8784,Cn.approxequal=8776,Cn.approxequalorimage=8786,Cn.approximatelyequal=8773,Cn.araeaekorean=12686,Cn.araeakorean=12685,Cn.arc=8978,Cn.arighthalfring=7834,Cn.aring=229,Cn.aringacute=507,Cn.aringbelow=7681,Cn.arrowboth=8596,Cn.arrowdashdown=8675,Cn.arrowdashleft=8672,Cn.arrowdashright=8674,Cn.arrowdashup=8673,Cn.arrowdblboth=8660,Cn.arrowdbldown=8659,Cn.arrowdblleft=8656,Cn.arrowdblright=8658,Cn.arrowdblup=8657,Cn.arrowdown=8595,Cn.arrowdownleft=8601,Cn.arrowdownright=8600,Cn.arrowdownwhite=8681,Cn.arrowheaddownmod=709,Cn.arrowheadleftmod=706,Cn.arrowheadrightmod=707,Cn.arrowheadupmod=708,Cn.arrowhorizex=63719,Cn.arrowleft=8592,Cn.arrowleftdbl=8656,Cn.arrowleftdblstroke=8653,Cn.arrowleftoverright=8646,Cn.arrowleftwhite=8678,Cn.arrowright=8594,Cn.arrowrightdblstroke=8655,Cn.arrowrightheavy=10142,Cn.arrowrightoverleft=8644,Cn.arrowrightwhite=8680,Cn.arrowtableft=8676,Cn.arrowtabright=8677,Cn.arrowup=8593,Cn.arrowupdn=8597,Cn.arrowupdnbse=8616,Cn.arrowupdownbase=8616,Cn.arrowupleft=8598,Cn.arrowupleftofdown=8645,Cn.arrowupright=8599,Cn.arrowupwhite=8679,Cn.arrowvertex=63718,Cn.asciicircum=94,Cn.asciicircummonospace=65342,Cn.asciitilde=126,Cn.asciitildemonospace=65374,Cn.ascript=593,Cn.ascriptturned=594,Cn.asmallhiragana=12353,Cn.asmallkatakana=12449,Cn.asmallkatakanahalfwidth=65383,Cn.asterisk=42,Cn.asteriskaltonearabic=1645,Cn.asteriskarabic=1645,Cn.asteriskmath=8727,Cn.asteriskmonospace=65290,Cn.asterisksmall=65121,Cn.asterism=8258,Cn.asuperior=63209,Cn.asymptoticallyequal=8771,Cn.at=64,Cn.atilde=227,Cn.atmonospace=65312,Cn.atsmall=65131,Cn.aturned=592,Cn.aubengali=2452,Cn.aubopomofo=12576,Cn.audeva=2324,Cn.augujarati=2708,Cn.augurmukhi=2580,Cn.aulengthmarkbengali=2519,Cn.aumatragurmukhi=2636,Cn.auvowelsignbengali=2508,Cn.auvowelsigndeva=2380,Cn.auvowelsigngujarati=2764,Cn.avagrahadeva=2365,Cn.aybarmenian=1377,Cn.ayin=1506,Cn.ayinaltonehebrew=64288,Cn.ayinhebrew=1506,Cn.b=98,Cn.babengali=2476,Cn.backslash=92,Cn.backslashmonospace=65340,Cn.badeva=2348,Cn.bagujarati=2732,Cn.bagurmukhi=2604,Cn.bahiragana=12400,Cn.bahtthai=3647,Cn.bakatakana=12496,Cn.bar=124,Cn.barmonospace=65372,Cn.bbopomofo=12549,Cn.bcircle=9425,Cn.bdotaccent=7683,Cn.bdotbelow=7685,Cn.beamedsixteenthnotes=9836,Cn.because=8757,Cn.becyrillic=1073,Cn.beharabic=1576,Cn.behfinalarabic=65168,Cn.behinitialarabic=65169,Cn.behiragana=12409,Cn.behmedialarabic=65170,Cn.behmeeminitialarabic=64671,Cn.behmeemisolatedarabic=64520,Cn.behnoonfinalarabic=64621,Cn.bekatakana=12505,Cn.benarmenian=1378,Cn.bet=1489,Cn.beta=946,Cn.betasymbolgreek=976,Cn.betdagesh=64305,Cn.betdageshhebrew=64305,Cn.bethebrew=1489,Cn.betrafehebrew=64332,Cn.bhabengali=2477,Cn.bhadeva=2349,Cn.bhagujarati=2733,Cn.bhagurmukhi=2605,Cn.bhook=595,Cn.bihiragana=12403,Cn.bikatakana=12499,Cn.bilabialclick=664,Cn.bindigurmukhi=2562,Cn.birusquare=13105,Cn.blackcircle=9679,Cn.blackdiamond=9670,Cn.blackdownpointingtriangle=9660,Cn.blackleftpointingpointer=9668,Cn.blackleftpointingtriangle=9664,Cn.blacklenticularbracketleft=12304,Cn.blacklenticularbracketleftvertical=65083,Cn.blacklenticularbracketright=12305,Cn.blacklenticularbracketrightvertical=65084,Cn.blacklowerlefttriangle=9699,Cn.blacklowerrighttriangle=9698,Cn.blackrectangle=9644,Cn.blackrightpointingpointer=9658,Cn.blackrightpointingtriangle=9654,Cn.blacksmallsquare=9642,Cn.blacksmilingface=9787,Cn.blacksquare=9632,Cn.blackstar=9733,Cn.blackupperlefttriangle=9700,Cn.blackupperrighttriangle=9701,Cn.blackuppointingsmalltriangle=9652,Cn.blackuppointingtriangle=9650,Cn.blank=9251,Cn.blinebelow=7687,Cn.block=9608,Cn.bmonospace=65346,Cn.bobaimaithai=3610,Cn.bohiragana=12412,Cn.bokatakana=12508,Cn.bparen=9373,Cn.bqsquare=13251,Cn.braceex=63732,Cn.braceleft=123,Cn.braceleftbt=63731,Cn.braceleftmid=63730,Cn.braceleftmonospace=65371,Cn.braceleftsmall=65115,Cn.bracelefttp=63729,Cn.braceleftvertical=65079,Cn.braceright=125,Cn.bracerightbt=63742,Cn.bracerightmid=63741,Cn.bracerightmonospace=65373,Cn.bracerightsmall=65116,Cn.bracerighttp=63740,Cn.bracerightvertical=65080,Cn.bracketleft=91,Cn.bracketleftbt=63728,Cn.bracketleftex=63727,Cn.bracketleftmonospace=65339,Cn.bracketlefttp=63726,Cn.bracketright=93,Cn.bracketrightbt=63739,Cn.bracketrightex=63738,Cn.bracketrightmonospace=65341,Cn.bracketrighttp=63737,Cn.breve=728,Cn.brevebelowcmb=814,Cn.brevecmb=774,Cn.breveinvertedbelowcmb=815,Cn.breveinvertedcmb=785,Cn.breveinverteddoublecmb=865,Cn.bridgebelowcmb=810,Cn.bridgeinvertedbelowcmb=826,Cn.brokenbar=166,Cn.bstroke=384,Cn.bsuperior=63210,Cn.btopbar=387,Cn.buhiragana=12406,Cn.bukatakana=12502,Cn.bullet=8226,Cn.bulletinverse=9688,Cn.bulletoperator=8729,Cn.bullseye=9678,Cn.c=99,Cn.caarmenian=1390,Cn.cabengali=2458,Cn.cacute=263,Cn.cadeva=2330,Cn.cagujarati=2714,Cn.cagurmukhi=2586,Cn.calsquare=13192,Cn.candrabindubengali=2433,Cn.candrabinducmb=784,Cn.candrabindudeva=2305,Cn.candrabindugujarati=2689,Cn.capslock=8682,Cn.careof=8453,Cn.caron=711,Cn.caronbelowcmb=812,Cn.caroncmb=780,Cn.carriagereturn=8629,Cn.cbopomofo=12568,Cn.ccaron=269,Cn.ccedilla=231,Cn.ccedillaacute=7689,Cn.ccircle=9426,Cn.ccircumflex=265,Cn.ccurl=597,Cn.cdot=267,Cn.cdotaccent=267,Cn.cdsquare=13253,Cn.cedilla=184,Cn.cedillacmb=807,Cn.cent=162,Cn.centigrade=8451,Cn.centinferior=63199,Cn.centmonospace=65504,Cn.centoldstyle=63394,Cn.centsuperior=63200,Cn.chaarmenian=1401,Cn.chabengali=2459,Cn.chadeva=2331,Cn.chagujarati=2715,Cn.chagurmukhi=2587,Cn.chbopomofo=12564,Cn.cheabkhasiancyrillic=1213,Cn.checkmark=10003,Cn.checyrillic=1095,Cn.chedescenderabkhasiancyrillic=1215,Cn.chedescendercyrillic=1207,Cn.chedieresiscyrillic=1269,Cn.cheharmenian=1395,Cn.chekhakassiancyrillic=1228,Cn.cheverticalstrokecyrillic=1209,Cn.chi=967,Cn.chieuchacirclekorean=12919,Cn.chieuchaparenkorean=12823,Cn.chieuchcirclekorean=12905,Cn.chieuchkorean=12618,Cn.chieuchparenkorean=12809,Cn.chochangthai=3594,Cn.chochanthai=3592,Cn.chochingthai=3593,Cn.chochoethai=3596,Cn.chook=392,Cn.cieucacirclekorean=12918,Cn.cieucaparenkorean=12822,Cn.cieuccirclekorean=12904,Cn.cieuckorean=12616,Cn.cieucparenkorean=12808,Cn.cieucuparenkorean=12828,Cn.circle=9675,Cn.circlecopyrt=169,Cn.circlemultiply=8855,Cn.circleot=8857,Cn.circleplus=8853,Cn.circlepostalmark=12342,Cn.circlewithlefthalfblack=9680,Cn.circlewithrighthalfblack=9681,Cn.circumflex=710,Cn.circumflexbelowcmb=813,Cn.circumflexcmb=770,Cn.clear=8999,Cn.clickalveolar=450,Cn.clickdental=448,Cn.clicklateral=449,Cn.clickretroflex=451,Cn.club=9827,Cn.clubsuitblack=9827,Cn.clubsuitwhite=9831,Cn.cmcubedsquare=13220,Cn.cmonospace=65347,Cn.cmsquaredsquare=13216,Cn.coarmenian=1409,Cn.colon=58,Cn.colonmonetary=8353,Cn.colonmonospace=65306,Cn.colonsign=8353,Cn.colonsmall=65109,Cn.colontriangularhalfmod=721,Cn.colontriangularmod=720,Cn.comma=44,Cn.commaabovecmb=787,Cn.commaaboverightcmb=789,Cn.commaaccent=63171,Cn.commaarabic=1548,Cn.commaarmenian=1373,Cn.commainferior=63201,Cn.commamonospace=65292,Cn.commareversedabovecmb=788,Cn.commareversedmod=701,Cn.commasmall=65104,Cn.commasuperior=63202,Cn.commaturnedabovecmb=786,Cn.commaturnedmod=699,Cn.compass=9788,Cn.congruent=8773,Cn.contourintegral=8750,Cn.control=8963,Cn.controlACK=6,Cn.controlBEL=7,Cn.controlBS=8,Cn.controlCAN=24,Cn.controlCR=13,Cn.controlDC1=17,Cn.controlDC2=18,Cn.controlDC3=19,Cn.controlDC4=20,Cn.controlDEL=127,Cn.controlDLE=16,Cn.controlEM=25,Cn.controlENQ=5,Cn.controlEOT=4,Cn.controlESC=27,Cn.controlETB=23,Cn.controlETX=3,Cn.controlFF=12,Cn.controlFS=28,Cn.controlGS=29,Cn.controlHT=9,Cn.controlLF=10,Cn.controlNAK=21,Cn.controlNULL=0,Cn.controlRS=30,Cn.controlSI=15,Cn.controlSO=14,Cn.controlSOT=2,Cn.controlSTX=1,Cn.controlSUB=26,Cn.controlSYN=22,Cn.controlUS=31,Cn.controlVT=11,Cn.copyright=169,Cn.copyrightsans=63721,Cn.copyrightserif=63193,Cn.cornerbracketleft=12300,Cn.cornerbracketlefthalfwidth=65378,Cn.cornerbracketleftvertical=65089,Cn.cornerbracketright=12301,Cn.cornerbracketrighthalfwidth=65379,Cn.cornerbracketrightvertical=65090,Cn.corporationsquare=13183,Cn.cosquare=13255,Cn.coverkgsquare=13254,Cn.cparen=9374,Cn.cruzeiro=8354,Cn.cstretched=663,Cn.curlyand=8911,Cn.curlyor=8910,Cn.currency=164,Cn.cyrBreve=63185,Cn.cyrFlex=63186,Cn.cyrbreve=63188,Cn.cyrflex=63189,Cn.d=100,Cn.daarmenian=1380,Cn.dabengali=2470,Cn.dadarabic=1590,Cn.dadeva=2342,Cn.dadfinalarabic=65214,Cn.dadinitialarabic=65215,Cn.dadmedialarabic=65216,Cn.dagesh=1468,Cn.dageshhebrew=1468,Cn.dagger=8224,Cn.daggerdbl=8225,Cn.dagujarati=2726,Cn.dagurmukhi=2598,Cn.dahiragana=12384,Cn.dakatakana=12480,Cn.dalarabic=1583,Cn.dalet=1491,Cn.daletdagesh=64307,Cn.daletdageshhebrew=64307,Cn.dalethebrew=1491,Cn.dalfinalarabic=65194,Cn.dammaarabic=1615,Cn.dammalowarabic=1615,Cn.dammatanaltonearabic=1612,Cn.dammatanarabic=1612,Cn.danda=2404,Cn.dargahebrew=1447,Cn.dargalefthebrew=1447,Cn.dasiapneumatacyrilliccmb=1157,Cn.dblGrave=63187,Cn.dblanglebracketleft=12298,Cn.dblanglebracketleftvertical=65085,Cn.dblanglebracketright=12299,Cn.dblanglebracketrightvertical=65086,Cn.dblarchinvertedbelowcmb=811,Cn.dblarrowleft=8660,Cn.dblarrowright=8658,Cn.dbldanda=2405,Cn.dblgrave=63190,Cn.dblgravecmb=783,Cn.dblintegral=8748,Cn.dbllowline=8215,Cn.dbllowlinecmb=819,Cn.dbloverlinecmb=831,Cn.dblprimemod=698,Cn.dblverticalbar=8214,Cn.dblverticallineabovecmb=782,Cn.dbopomofo=12553,Cn.dbsquare=13256,Cn.dcaron=271,Cn.dcedilla=7697,Cn.dcircle=9427,Cn.dcircumflexbelow=7699,Cn.dcroat=273,Cn.ddabengali=2465,Cn.ddadeva=2337,Cn.ddagujarati=2721,Cn.ddagurmukhi=2593,Cn.ddalarabic=1672,Cn.ddalfinalarabic=64393,Cn.dddhadeva=2396,Cn.ddhabengali=2466,Cn.ddhadeva=2338,Cn.ddhagujarati=2722,Cn.ddhagurmukhi=2594,Cn.ddotaccent=7691,Cn.ddotbelow=7693,Cn.decimalseparatorarabic=1643,Cn.decimalseparatorpersian=1643,Cn.decyrillic=1076,Cn.degree=176,Cn.dehihebrew=1453,Cn.dehiragana=12391,Cn.deicoptic=1007,Cn.dekatakana=12487,Cn.deleteleft=9003,Cn.deleteright=8998,Cn.delta=948,Cn.deltaturned=397,Cn.denominatorminusonenumeratorbengali=2552,Cn.dezh=676,Cn.dhabengali=2471,Cn.dhadeva=2343,Cn.dhagujarati=2727,Cn.dhagurmukhi=2599,Cn.dhook=599,Cn.dialytikatonos=901,Cn.dialytikatonoscmb=836,Cn.diamond=9830,Cn.diamondsuitwhite=9826,Cn.dieresis=168,Cn.dieresisacute=63191,Cn.dieresisbelowcmb=804,Cn.dieresiscmb=776,Cn.dieresisgrave=63192,Cn.dieresistonos=901,Cn.dihiragana=12386,Cn.dikatakana=12482,Cn.dittomark=12291,Cn.divide=247,Cn.divides=8739,Cn.divisionslash=8725,Cn.djecyrillic=1106,Cn.dkshade=9619,Cn.dlinebelow=7695,Cn.dlsquare=13207,Cn.dmacron=273,Cn.dmonospace=65348,Cn.dnblock=9604,Cn.dochadathai=3598,Cn.dodekthai=3604,Cn.dohiragana=12393,Cn.dokatakana=12489,Cn.dollar=36,Cn.dollarinferior=63203,Cn.dollarmonospace=65284,Cn.dollaroldstyle=63268,Cn.dollarsmall=65129,Cn.dollarsuperior=63204,Cn.dong=8363,Cn.dorusquare=13094,Cn.dotaccent=729,Cn.dotaccentcmb=775,Cn.dotbelowcmb=803,Cn.dotbelowcomb=803,Cn.dotkatakana=12539,Cn.dotlessi=305,Cn.dotlessj=63166,Cn.dotlessjstrokehook=644,Cn.dotmath=8901,Cn.dottedcircle=9676,Cn.doubleyodpatah=64287,Cn.doubleyodpatahhebrew=64287,Cn.downtackbelowcmb=798,Cn.downtackmod=725,Cn.dparen=9375,Cn.dsuperior=63211,Cn.dtail=598,Cn.dtopbar=396,Cn.duhiragana=12389,Cn.dukatakana=12485,Cn.dz=499,Cn.dzaltone=675,Cn.dzcaron=454,Cn.dzcurl=677,Cn.dzeabkhasiancyrillic=1249,Cn.dzecyrillic=1109,Cn.dzhecyrillic=1119,Cn.e=101,Cn.eacute=233,Cn.earth=9793,Cn.ebengali=2447,Cn.ebopomofo=12572,Cn.ebreve=277,Cn.ecandradeva=2317,Cn.ecandragujarati=2701,Cn.ecandravowelsigndeva=2373,Cn.ecandravowelsigngujarati=2757,Cn.ecaron=283,Cn.ecedillabreve=7709,Cn.echarmenian=1381,Cn.echyiwnarmenian=1415,Cn.ecircle=9428,Cn.ecircumflex=234,Cn.ecircumflexacute=7871,Cn.ecircumflexbelow=7705,Cn.ecircumflexdotbelow=7879,Cn.ecircumflexgrave=7873,Cn.ecircumflexhookabove=7875,Cn.ecircumflextilde=7877,Cn.ecyrillic=1108,Cn.edblgrave=517,Cn.edeva=2319,Cn.edieresis=235,Cn.edot=279,Cn.edotaccent=279,Cn.edotbelow=7865,Cn.eegurmukhi=2575,Cn.eematragurmukhi=2631,Cn.efcyrillic=1092,Cn.egrave=232,Cn.egujarati=2703,Cn.eharmenian=1383,Cn.ehbopomofo=12573,Cn.ehiragana=12360,Cn.ehookabove=7867,Cn.eibopomofo=12575,Cn.eight=56,Cn.eightarabic=1640,Cn.eightbengali=2542,Cn.eightcircle=9319,Cn.eightcircleinversesansserif=10129,Cn.eightdeva=2414,Cn.eighteencircle=9329,Cn.eighteenparen=9349,Cn.eighteenperiod=9369,Cn.eightgujarati=2798,Cn.eightgurmukhi=2670,Cn.eighthackarabic=1640,Cn.eighthangzhou=12328,Cn.eighthnotebeamed=9835,Cn.eightideographicparen=12839,Cn.eightinferior=8328,Cn.eightmonospace=65304,Cn.eightoldstyle=63288,Cn.eightparen=9339,Cn.eightperiod=9359,Cn.eightpersian=1784,Cn.eightroman=8567,Cn.eightsuperior=8312,Cn.eightthai=3672,Cn.einvertedbreve=519,Cn.eiotifiedcyrillic=1125,Cn.ekatakana=12456,Cn.ekatakanahalfwidth=65396,Cn.ekonkargurmukhi=2676,Cn.ekorean=12628,Cn.elcyrillic=1083,Cn.element=8712,Cn.elevencircle=9322,Cn.elevenparen=9342,Cn.elevenperiod=9362,Cn.elevenroman=8570,Cn.ellipsis=8230,Cn.ellipsisvertical=8942,Cn.emacron=275,Cn.emacronacute=7703,Cn.emacrongrave=7701,Cn.emcyrillic=1084,Cn.emdash=8212,Cn.emdashvertical=65073,Cn.emonospace=65349,Cn.emphasismarkarmenian=1371,Cn.emptyset=8709,Cn.enbopomofo=12579,Cn.encyrillic=1085,Cn.endash=8211,Cn.endashvertical=65074,Cn.endescendercyrillic=1187,Cn.eng=331,Cn.engbopomofo=12581,Cn.enghecyrillic=1189,Cn.enhookcyrillic=1224,Cn.enspace=8194,Cn.eogonek=281,Cn.eokorean=12627,Cn.eopen=603,Cn.eopenclosed=666,Cn.eopenreversed=604,Cn.eopenreversedclosed=606,Cn.eopenreversedhook=605,Cn.eparen=9376,Cn.epsilon=949,Cn.epsilontonos=941,Cn.equal=61,Cn.equalmonospace=65309,Cn.equalsmall=65126,Cn.equalsuperior=8316,Cn.equivalence=8801,Cn.erbopomofo=12582,Cn.ercyrillic=1088,Cn.ereversed=600,Cn.ereversedcyrillic=1101,Cn.escyrillic=1089,Cn.esdescendercyrillic=1195,Cn.esh=643,Cn.eshcurl=646,Cn.eshortdeva=2318,Cn.eshortvowelsigndeva=2374,Cn.eshreversedloop=426,Cn.eshsquatreversed=645,Cn.esmallhiragana=12359,Cn.esmallkatakana=12455,Cn.esmallkatakanahalfwidth=65386,Cn.estimated=8494,Cn.esuperior=63212,Cn.eta=951,Cn.etarmenian=1384,Cn.etatonos=942,Cn.eth=240,Cn.etilde=7869,Cn.etildebelow=7707,Cn.etnahtafoukhhebrew=1425,Cn.etnahtafoukhlefthebrew=1425,Cn.etnahtahebrew=1425,Cn.etnahtalefthebrew=1425,Cn.eturned=477,Cn.eukorean=12641,Cn.euro=8364,Cn.evowelsignbengali=2503,Cn.evowelsigndeva=2375,Cn.evowelsigngujarati=2759,Cn.exclam=33,Cn.exclamarmenian=1372,Cn.exclamdbl=8252,Cn.exclamdown=161,Cn.exclamdownsmall=63393,Cn.exclammonospace=65281,Cn.exclamsmall=63265,Cn.existential=8707,Cn.ezh=658,Cn.ezhcaron=495,Cn.ezhcurl=659,Cn.ezhreversed=441,Cn.ezhtail=442,Cn.f=102,Cn.fadeva=2398,Cn.fagurmukhi=2654,Cn.fahrenheit=8457,Cn.fathaarabic=1614,Cn.fathalowarabic=1614,Cn.fathatanarabic=1611,Cn.fbopomofo=12552,Cn.fcircle=9429,Cn.fdotaccent=7711,Cn.feharabic=1601,Cn.feharmenian=1414,Cn.fehfinalarabic=65234,Cn.fehinitialarabic=65235,Cn.fehmedialarabic=65236,Cn.feicoptic=997,Cn.female=9792,Cn.ff=64256,Cn.f_f=64256,Cn.ffi=64259,Cn.f_f_i=64259,Cn.ffl=64260,Cn.f_f_l=64260,Cn.fi=64257,Cn.f_i=64257,Cn.fifteencircle=9326,Cn.fifteenparen=9346,Cn.fifteenperiod=9366,Cn.figuredash=8210,Cn.filledbox=9632,Cn.filledrect=9644,Cn.finalkaf=1498,Cn.finalkafdagesh=64314,Cn.finalkafdageshhebrew=64314,Cn.finalkafhebrew=1498,Cn.finalmem=1501,Cn.finalmemhebrew=1501,Cn.finalnun=1503,Cn.finalnunhebrew=1503,Cn.finalpe=1507,Cn.finalpehebrew=1507,Cn.finaltsadi=1509,Cn.finaltsadihebrew=1509,Cn.firsttonechinese=713,Cn.fisheye=9673,Cn.fitacyrillic=1139,Cn.five=53,Cn.fivearabic=1637,Cn.fivebengali=2539,Cn.fivecircle=9316,Cn.fivecircleinversesansserif=10126,Cn.fivedeva=2411,Cn.fiveeighths=8541,Cn.fivegujarati=2795,Cn.fivegurmukhi=2667,Cn.fivehackarabic=1637,Cn.fivehangzhou=12325,Cn.fiveideographicparen=12836,Cn.fiveinferior=8325,Cn.fivemonospace=65301,Cn.fiveoldstyle=63285,Cn.fiveparen=9336,Cn.fiveperiod=9356,Cn.fivepersian=1781,Cn.fiveroman=8564,Cn.fivesuperior=8309,Cn.fivethai=3669,Cn.fl=64258,Cn.f_l=64258,Cn.florin=402,Cn.fmonospace=65350,Cn.fmsquare=13209,Cn.fofanthai=3615,Cn.fofathai=3613,Cn.fongmanthai=3663,Cn.forall=8704,Cn.four=52,Cn.fourarabic=1636,Cn.fourbengali=2538,Cn.fourcircle=9315,Cn.fourcircleinversesansserif=10125,Cn.fourdeva=2410,Cn.fourgujarati=2794,Cn.fourgurmukhi=2666,Cn.fourhackarabic=1636,Cn.fourhangzhou=12324,Cn.fourideographicparen=12835,Cn.fourinferior=8324,Cn.fourmonospace=65300,Cn.fournumeratorbengali=2551,Cn.fouroldstyle=63284,Cn.fourparen=9335,Cn.fourperiod=9355,Cn.fourpersian=1780,Cn.fourroman=8563,Cn.foursuperior=8308,Cn.fourteencircle=9325,Cn.fourteenparen=9345,Cn.fourteenperiod=9365,Cn.fourthai=3668,Cn.fourthtonechinese=715,Cn.fparen=9377,Cn.fraction=8260,Cn.franc=8355,Cn.g=103,Cn.gabengali=2455,Cn.gacute=501,Cn.gadeva=2327,Cn.gafarabic=1711,Cn.gaffinalarabic=64403,Cn.gafinitialarabic=64404,Cn.gafmedialarabic=64405,Cn.gagujarati=2711,Cn.gagurmukhi=2583,Cn.gahiragana=12364,Cn.gakatakana=12460,Cn.gamma=947,Cn.gammalatinsmall=611,Cn.gammasuperior=736,Cn.gangiacoptic=1003,Cn.gbopomofo=12557,Cn.gbreve=287,Cn.gcaron=487,Cn.gcedilla=291,Cn.gcircle=9430,Cn.gcircumflex=285,Cn.gcommaaccent=291,Cn.gdot=289,Cn.gdotaccent=289,Cn.gecyrillic=1075,Cn.gehiragana=12370,Cn.gekatakana=12466,Cn.geometricallyequal=8785,Cn.gereshaccenthebrew=1436,Cn.gereshhebrew=1523,Cn.gereshmuqdamhebrew=1437,Cn.germandbls=223,Cn.gershayimaccenthebrew=1438,Cn.gershayimhebrew=1524,Cn.getamark=12307,Cn.ghabengali=2456,Cn.ghadarmenian=1394,Cn.ghadeva=2328,Cn.ghagujarati=2712,Cn.ghagurmukhi=2584,Cn.ghainarabic=1594,Cn.ghainfinalarabic=65230,Cn.ghaininitialarabic=65231,Cn.ghainmedialarabic=65232,Cn.ghemiddlehookcyrillic=1173,Cn.ghestrokecyrillic=1171,Cn.gheupturncyrillic=1169,Cn.ghhadeva=2394,Cn.ghhagurmukhi=2650,Cn.ghook=608,Cn.ghzsquare=13203,Cn.gihiragana=12366,Cn.gikatakana=12462,Cn.gimarmenian=1379,Cn.gimel=1490,Cn.gimeldagesh=64306,Cn.gimeldageshhebrew=64306,Cn.gimelhebrew=1490,Cn.gjecyrillic=1107,Cn.glottalinvertedstroke=446,Cn.glottalstop=660,Cn.glottalstopinverted=662,Cn.glottalstopmod=704,Cn.glottalstopreversed=661,Cn.glottalstopreversedmod=705,Cn.glottalstopreversedsuperior=740,Cn.glottalstopstroke=673,Cn.glottalstopstrokereversed=674,Cn.gmacron=7713,Cn.gmonospace=65351,Cn.gohiragana=12372,Cn.gokatakana=12468,Cn.gparen=9378,Cn.gpasquare=13228,Cn.gradient=8711,Cn.grave=96,Cn.gravebelowcmb=790,Cn.gravecmb=768,Cn.gravecomb=768,Cn.gravedeva=2387,Cn.gravelowmod=718,Cn.gravemonospace=65344,Cn.gravetonecmb=832,Cn.greater=62,Cn.greaterequal=8805,Cn.greaterequalorless=8923,Cn.greatermonospace=65310,Cn.greaterorequivalent=8819,Cn.greaterorless=8823,Cn.greateroverequal=8807,Cn.greatersmall=65125,Cn.gscript=609,Cn.gstroke=485,Cn.guhiragana=12368,Cn.guillemotleft=171,Cn.guillemotright=187,Cn.guilsinglleft=8249,Cn.guilsinglright=8250,Cn.gukatakana=12464,Cn.guramusquare=13080,Cn.gysquare=13257,Cn.h=104,Cn.haabkhasiancyrillic=1193,Cn.haaltonearabic=1729,Cn.habengali=2489,Cn.hadescendercyrillic=1203,Cn.hadeva=2361,Cn.hagujarati=2745,Cn.hagurmukhi=2617,Cn.haharabic=1581,Cn.hahfinalarabic=65186,Cn.hahinitialarabic=65187,Cn.hahiragana=12399,Cn.hahmedialarabic=65188,Cn.haitusquare=13098,Cn.hakatakana=12495,Cn.hakatakanahalfwidth=65418,Cn.halantgurmukhi=2637,Cn.hamzaarabic=1569,Cn.hamzalowarabic=1569,Cn.hangulfiller=12644,Cn.hardsigncyrillic=1098,Cn.harpoonleftbarbup=8636,Cn.harpoonrightbarbup=8640,Cn.hasquare=13258,Cn.hatafpatah=1458,Cn.hatafpatah16=1458,Cn.hatafpatah23=1458,Cn.hatafpatah2f=1458,Cn.hatafpatahhebrew=1458,Cn.hatafpatahnarrowhebrew=1458,Cn.hatafpatahquarterhebrew=1458,Cn.hatafpatahwidehebrew=1458,Cn.hatafqamats=1459,Cn.hatafqamats1b=1459,Cn.hatafqamats28=1459,Cn.hatafqamats34=1459,Cn.hatafqamatshebrew=1459,Cn.hatafqamatsnarrowhebrew=1459,Cn.hatafqamatsquarterhebrew=1459,Cn.hatafqamatswidehebrew=1459,Cn.hatafsegol=1457,Cn.hatafsegol17=1457,Cn.hatafsegol24=1457,Cn.hatafsegol30=1457,Cn.hatafsegolhebrew=1457,Cn.hatafsegolnarrowhebrew=1457,Cn.hatafsegolquarterhebrew=1457,Cn.hatafsegolwidehebrew=1457,Cn.hbar=295,Cn.hbopomofo=12559,Cn.hbrevebelow=7723,Cn.hcedilla=7721,Cn.hcircle=9431,Cn.hcircumflex=293,Cn.hdieresis=7719,Cn.hdotaccent=7715,Cn.hdotbelow=7717,Cn.he=1492,Cn.heart=9829,Cn.heartsuitblack=9829,Cn.heartsuitwhite=9825,Cn.hedagesh=64308,Cn.hedageshhebrew=64308,Cn.hehaltonearabic=1729,Cn.heharabic=1607,Cn.hehebrew=1492,Cn.hehfinalaltonearabic=64423,Cn.hehfinalalttwoarabic=65258,Cn.hehfinalarabic=65258,Cn.hehhamzaabovefinalarabic=64421,Cn.hehhamzaaboveisolatedarabic=64420,Cn.hehinitialaltonearabic=64424,Cn.hehinitialarabic=65259,Cn.hehiragana=12408,Cn.hehmedialaltonearabic=64425,Cn.hehmedialarabic=65260,Cn.heiseierasquare=13179,Cn.hekatakana=12504,Cn.hekatakanahalfwidth=65421,Cn.hekutaarusquare=13110,Cn.henghook=615,Cn.herutusquare=13113,Cn.het=1495,Cn.hethebrew=1495,Cn.hhook=614,Cn.hhooksuperior=689,Cn.hieuhacirclekorean=12923,Cn.hieuhaparenkorean=12827,Cn.hieuhcirclekorean=12909,Cn.hieuhkorean=12622,Cn.hieuhparenkorean=12813,Cn.hihiragana=12402,Cn.hikatakana=12498,Cn.hikatakanahalfwidth=65419,Cn.hiriq=1460,Cn.hiriq14=1460,Cn.hiriq21=1460,Cn.hiriq2d=1460,Cn.hiriqhebrew=1460,Cn.hiriqnarrowhebrew=1460,Cn.hiriqquarterhebrew=1460,Cn.hiriqwidehebrew=1460,Cn.hlinebelow=7830,Cn.hmonospace=65352,Cn.hoarmenian=1392,Cn.hohipthai=3627,Cn.hohiragana=12411,Cn.hokatakana=12507,Cn.hokatakanahalfwidth=65422,Cn.holam=1465,Cn.holam19=1465,Cn.holam26=1465,Cn.holam32=1465,Cn.holamhebrew=1465,Cn.holamnarrowhebrew=1465,Cn.holamquarterhebrew=1465,Cn.holamwidehebrew=1465,Cn.honokhukthai=3630,Cn.hookabovecomb=777,Cn.hookcmb=777,Cn.hookpalatalizedbelowcmb=801,Cn.hookretroflexbelowcmb=802,Cn.hoonsquare=13122,Cn.horicoptic=1001,Cn.horizontalbar=8213,Cn.horncmb=795,Cn.hotsprings=9832,Cn.house=8962,Cn.hparen=9379,Cn.hsuperior=688,Cn.hturned=613,Cn.huhiragana=12405,Cn.huiitosquare=13107,Cn.hukatakana=12501,Cn.hukatakanahalfwidth=65420,Cn.hungarumlaut=733,Cn.hungarumlautcmb=779,Cn.hv=405,Cn.hyphen=45,Cn.hypheninferior=63205,Cn.hyphenmonospace=65293,Cn.hyphensmall=65123,Cn.hyphensuperior=63206,Cn.hyphentwo=8208,Cn.i=105,Cn.iacute=237,Cn.iacyrillic=1103,Cn.ibengali=2439,Cn.ibopomofo=12583,Cn.ibreve=301,Cn.icaron=464,Cn.icircle=9432,Cn.icircumflex=238,Cn.icyrillic=1110,Cn.idblgrave=521,Cn.ideographearthcircle=12943,Cn.ideographfirecircle=12939,Cn.ideographicallianceparen=12863,Cn.ideographiccallparen=12858,Cn.ideographiccentrecircle=12965,Cn.ideographicclose=12294,Cn.ideographiccomma=12289,Cn.ideographiccommaleft=65380,Cn.ideographiccongratulationparen=12855,Cn.ideographiccorrectcircle=12963,Cn.ideographicearthparen=12847,Cn.ideographicenterpriseparen=12861,Cn.ideographicexcellentcircle=12957,Cn.ideographicfestivalparen=12864,Cn.ideographicfinancialcircle=12950,Cn.ideographicfinancialparen=12854,Cn.ideographicfireparen=12843,Cn.ideographichaveparen=12850,Cn.ideographichighcircle=12964,Cn.ideographiciterationmark=12293,Cn.ideographiclaborcircle=12952,Cn.ideographiclaborparen=12856,Cn.ideographicleftcircle=12967,Cn.ideographiclowcircle=12966,Cn.ideographicmedicinecircle=12969,Cn.ideographicmetalparen=12846,Cn.ideographicmoonparen=12842,Cn.ideographicnameparen=12852,Cn.ideographicperiod=12290,Cn.ideographicprintcircle=12958,Cn.ideographicreachparen=12867,Cn.ideographicrepresentparen=12857,Cn.ideographicresourceparen=12862,Cn.ideographicrightcircle=12968,Cn.ideographicsecretcircle=12953,Cn.ideographicselfparen=12866,Cn.ideographicsocietyparen=12851,Cn.ideographicspace=12288,Cn.ideographicspecialparen=12853,Cn.ideographicstockparen=12849,Cn.ideographicstudyparen=12859,Cn.ideographicsunparen=12848,Cn.ideographicsuperviseparen=12860,Cn.ideographicwaterparen=12844,Cn.ideographicwoodparen=12845,Cn.ideographiczero=12295,Cn.ideographmetalcircle=12942,Cn.ideographmooncircle=12938,Cn.ideographnamecircle=12948,Cn.ideographsuncircle=12944,Cn.ideographwatercircle=12940,Cn.ideographwoodcircle=12941,Cn.ideva=2311,Cn.idieresis=239,Cn.idieresisacute=7727,Cn.idieresiscyrillic=1253,Cn.idotbelow=7883,Cn.iebrevecyrillic=1239,Cn.iecyrillic=1077,Cn.ieungacirclekorean=12917,Cn.ieungaparenkorean=12821,Cn.ieungcirclekorean=12903,Cn.ieungkorean=12615,Cn.ieungparenkorean=12807,Cn.igrave=236,Cn.igujarati=2695,Cn.igurmukhi=2567,Cn.ihiragana=12356,Cn.ihookabove=7881,Cn.iibengali=2440,Cn.iicyrillic=1080,Cn.iideva=2312,Cn.iigujarati=2696,Cn.iigurmukhi=2568,Cn.iimatragurmukhi=2624,Cn.iinvertedbreve=523,Cn.iishortcyrillic=1081,Cn.iivowelsignbengali=2496,Cn.iivowelsigndeva=2368,Cn.iivowelsigngujarati=2752,Cn.ij=307,Cn.ikatakana=12452,Cn.ikatakanahalfwidth=65394,Cn.ikorean=12643,Cn.ilde=732,Cn.iluyhebrew=1452,Cn.imacron=299,Cn.imacroncyrillic=1251,Cn.imageorapproximatelyequal=8787,Cn.imatragurmukhi=2623,Cn.imonospace=65353,Cn.increment=8710,Cn.infinity=8734,Cn.iniarmenian=1387,Cn.integral=8747,Cn.integralbottom=8993,Cn.integralbt=8993,Cn.integralex=63733,Cn.integraltop=8992,Cn.integraltp=8992,Cn.intersection=8745,Cn.intisquare=13061,Cn.invbullet=9688,Cn.invcircle=9689,Cn.invsmileface=9787,Cn.iocyrillic=1105,Cn.iogonek=303,Cn.iota=953,Cn.iotadieresis=970,Cn.iotadieresistonos=912,Cn.iotalatin=617,Cn.iotatonos=943,Cn.iparen=9380,Cn.irigurmukhi=2674,Cn.ismallhiragana=12355,Cn.ismallkatakana=12451,Cn.ismallkatakanahalfwidth=65384,Cn.issharbengali=2554,Cn.istroke=616,Cn.isuperior=63213,Cn.iterationhiragana=12445,Cn.iterationkatakana=12541,Cn.itilde=297,Cn.itildebelow=7725,Cn.iubopomofo=12585,Cn.iucyrillic=1102,Cn.ivowelsignbengali=2495,Cn.ivowelsigndeva=2367,Cn.ivowelsigngujarati=2751,Cn.izhitsacyrillic=1141,Cn.izhitsadblgravecyrillic=1143,Cn.j=106,Cn.jaarmenian=1393,Cn.jabengali=2460,Cn.jadeva=2332,Cn.jagujarati=2716,Cn.jagurmukhi=2588,Cn.jbopomofo=12560,Cn.jcaron=496,Cn.jcircle=9433,Cn.jcircumflex=309,Cn.jcrossedtail=669,Cn.jdotlessstroke=607,Cn.jecyrillic=1112,Cn.jeemarabic=1580,Cn.jeemfinalarabic=65182,Cn.jeeminitialarabic=65183,Cn.jeemmedialarabic=65184,Cn.jeharabic=1688,Cn.jehfinalarabic=64395,Cn.jhabengali=2461,Cn.jhadeva=2333,Cn.jhagujarati=2717,Cn.jhagurmukhi=2589,Cn.jheharmenian=1403,Cn.jis=12292,Cn.jmonospace=65354,Cn.jparen=9381,Cn.jsuperior=690,Cn.k=107,Cn.kabashkircyrillic=1185,Cn.kabengali=2453,Cn.kacute=7729,Cn.kacyrillic=1082,Cn.kadescendercyrillic=1179,Cn.kadeva=2325,Cn.kaf=1499,Cn.kafarabic=1603,Cn.kafdagesh=64315,Cn.kafdageshhebrew=64315,Cn.kaffinalarabic=65242,Cn.kafhebrew=1499,Cn.kafinitialarabic=65243,Cn.kafmedialarabic=65244,Cn.kafrafehebrew=64333,Cn.kagujarati=2709,Cn.kagurmukhi=2581,Cn.kahiragana=12363,Cn.kahookcyrillic=1220,Cn.kakatakana=12459,Cn.kakatakanahalfwidth=65398,Cn.kappa=954,Cn.kappasymbolgreek=1008,Cn.kapyeounmieumkorean=12657,Cn.kapyeounphieuphkorean=12676,Cn.kapyeounpieupkorean=12664,Cn.kapyeounssangpieupkorean=12665,Cn.karoriisquare=13069,Cn.kashidaautoarabic=1600,Cn.kashidaautonosidebearingarabic=1600,Cn.kasmallkatakana=12533,Cn.kasquare=13188,Cn.kasraarabic=1616,Cn.kasratanarabic=1613,Cn.kastrokecyrillic=1183,Cn.katahiraprolongmarkhalfwidth=65392,Cn.kaverticalstrokecyrillic=1181,Cn.kbopomofo=12558,Cn.kcalsquare=13193,Cn.kcaron=489,Cn.kcedilla=311,Cn.kcircle=9434,Cn.kcommaaccent=311,Cn.kdotbelow=7731,Cn.keharmenian=1412,Cn.kehiragana=12369,Cn.kekatakana=12465,Cn.kekatakanahalfwidth=65401,Cn.kenarmenian=1391,Cn.kesmallkatakana=12534,Cn.kgreenlandic=312,Cn.khabengali=2454,Cn.khacyrillic=1093,Cn.khadeva=2326,Cn.khagujarati=2710,Cn.khagurmukhi=2582,Cn.khaharabic=1582,Cn.khahfinalarabic=65190,Cn.khahinitialarabic=65191,Cn.khahmedialarabic=65192,Cn.kheicoptic=999,Cn.khhadeva=2393,Cn.khhagurmukhi=2649,Cn.khieukhacirclekorean=12920,Cn.khieukhaparenkorean=12824,Cn.khieukhcirclekorean=12906,Cn.khieukhkorean=12619,Cn.khieukhparenkorean=12810,Cn.khokhaithai=3586,Cn.khokhonthai=3589,Cn.khokhuatthai=3587,Cn.khokhwaithai=3588,Cn.khomutthai=3675,Cn.khook=409,Cn.khorakhangthai=3590,Cn.khzsquare=13201,Cn.kihiragana=12365,Cn.kikatakana=12461,Cn.kikatakanahalfwidth=65399,Cn.kiroguramusquare=13077,Cn.kiromeetorusquare=13078,Cn.kirosquare=13076,Cn.kiyeokacirclekorean=12910,Cn.kiyeokaparenkorean=12814,Cn.kiyeokcirclekorean=12896,Cn.kiyeokkorean=12593,Cn.kiyeokparenkorean=12800,Cn.kiyeoksioskorean=12595,Cn.kjecyrillic=1116,Cn.klinebelow=7733,Cn.klsquare=13208,Cn.kmcubedsquare=13222,Cn.kmonospace=65355,Cn.kmsquaredsquare=13218,Cn.kohiragana=12371,Cn.kohmsquare=13248,Cn.kokaithai=3585,Cn.kokatakana=12467,Cn.kokatakanahalfwidth=65402,Cn.kooposquare=13086,Cn.koppacyrillic=1153,Cn.koreanstandardsymbol=12927,Cn.koroniscmb=835,Cn.kparen=9382,Cn.kpasquare=13226,Cn.ksicyrillic=1135,Cn.ktsquare=13263,Cn.kturned=670,Cn.kuhiragana=12367,Cn.kukatakana=12463,Cn.kukatakanahalfwidth=65400,Cn.kvsquare=13240,Cn.kwsquare=13246,Cn.l=108,Cn.labengali=2482,Cn.lacute=314,Cn.ladeva=2354,Cn.lagujarati=2738,Cn.lagurmukhi=2610,Cn.lakkhangyaothai=3653,Cn.lamaleffinalarabic=65276,Cn.lamalefhamzaabovefinalarabic=65272,Cn.lamalefhamzaaboveisolatedarabic=65271,Cn.lamalefhamzabelowfinalarabic=65274,Cn.lamalefhamzabelowisolatedarabic=65273,Cn.lamalefisolatedarabic=65275,Cn.lamalefmaddaabovefinalarabic=65270,Cn.lamalefmaddaaboveisolatedarabic=65269,Cn.lamarabic=1604,Cn.lambda=955,Cn.lambdastroke=411,Cn.lamed=1500,Cn.lameddagesh=64316,Cn.lameddageshhebrew=64316,Cn.lamedhebrew=1500,Cn.lamfinalarabic=65246,Cn.lamhahinitialarabic=64714,Cn.laminitialarabic=65247,Cn.lamjeeminitialarabic=64713,Cn.lamkhahinitialarabic=64715,Cn.lamlamhehisolatedarabic=65010,Cn.lammedialarabic=65248,Cn.lammeemhahinitialarabic=64904,Cn.lammeeminitialarabic=64716,Cn.largecircle=9711,Cn.lbar=410,Cn.lbelt=620,Cn.lbopomofo=12556,Cn.lcaron=318,Cn.lcedilla=316,Cn.lcircle=9435,Cn.lcircumflexbelow=7741,Cn.lcommaaccent=316,Cn.ldot=320,Cn.ldotaccent=320,Cn.ldotbelow=7735,Cn.ldotbelowmacron=7737,Cn.leftangleabovecmb=794,Cn.lefttackbelowcmb=792,Cn.less=60,Cn.lessequal=8804,Cn.lessequalorgreater=8922,Cn.lessmonospace=65308,Cn.lessorequivalent=8818,Cn.lessorgreater=8822,Cn.lessoverequal=8806,Cn.lesssmall=65124,Cn.lezh=622,Cn.lfblock=9612,Cn.lhookretroflex=621,Cn.lira=8356,Cn.liwnarmenian=1388,Cn.lj=457,Cn.ljecyrillic=1113,Cn.ll=63168,Cn.lladeva=2355,Cn.llagujarati=2739,Cn.llinebelow=7739,Cn.llladeva=2356,Cn.llvocalicbengali=2529,Cn.llvocalicdeva=2401,Cn.llvocalicvowelsignbengali=2531,Cn.llvocalicvowelsigndeva=2403,Cn.lmiddletilde=619,Cn.lmonospace=65356,Cn.lmsquare=13264,Cn.lochulathai=3628,Cn.logicaland=8743,Cn.logicalnot=172,Cn.logicalnotreversed=8976,Cn.logicalor=8744,Cn.lolingthai=3621,Cn.longs=383,Cn.lowlinecenterline=65102,Cn.lowlinecmb=818,Cn.lowlinedashed=65101,Cn.lozenge=9674,Cn.lparen=9383,Cn.lslash=322,Cn.lsquare=8467,Cn.lsuperior=63214,Cn.ltshade=9617,Cn.luthai=3622,Cn.lvocalicbengali=2444,Cn.lvocalicdeva=2316,Cn.lvocalicvowelsignbengali=2530,Cn.lvocalicvowelsigndeva=2402,Cn.lxsquare=13267,Cn.m=109,Cn.mabengali=2478,Cn.macron=175,Cn.macronbelowcmb=817,Cn.macroncmb=772,Cn.macronlowmod=717,Cn.macronmonospace=65507,Cn.macute=7743,Cn.madeva=2350,Cn.magujarati=2734,Cn.magurmukhi=2606,Cn.mahapakhhebrew=1444,Cn.mahapakhlefthebrew=1444,Cn.mahiragana=12414,Cn.maichattawalowleftthai=63637,Cn.maichattawalowrightthai=63636,Cn.maichattawathai=3659,Cn.maichattawaupperleftthai=63635,Cn.maieklowleftthai=63628,Cn.maieklowrightthai=63627,Cn.maiekthai=3656,Cn.maiekupperleftthai=63626,Cn.maihanakatleftthai=63620,Cn.maihanakatthai=3633,Cn.maitaikhuleftthai=63625,Cn.maitaikhuthai=3655,Cn.maitholowleftthai=63631,Cn.maitholowrightthai=63630,Cn.maithothai=3657,Cn.maithoupperleftthai=63629,Cn.maitrilowleftthai=63634,Cn.maitrilowrightthai=63633,Cn.maitrithai=3658,Cn.maitriupperleftthai=63632,Cn.maiyamokthai=3654,Cn.makatakana=12510,Cn.makatakanahalfwidth=65423,Cn.male=9794,Cn.mansyonsquare=13127,Cn.maqafhebrew=1470,Cn.mars=9794,Cn.masoracirclehebrew=1455,Cn.masquare=13187,Cn.mbopomofo=12551,Cn.mbsquare=13268,Cn.mcircle=9436,Cn.mcubedsquare=13221,Cn.mdotaccent=7745,Cn.mdotbelow=7747,Cn.meemarabic=1605,Cn.meemfinalarabic=65250,Cn.meeminitialarabic=65251,Cn.meemmedialarabic=65252,Cn.meemmeeminitialarabic=64721,Cn.meemmeemisolatedarabic=64584,Cn.meetorusquare=13133,Cn.mehiragana=12417,Cn.meizierasquare=13182,Cn.mekatakana=12513,Cn.mekatakanahalfwidth=65426,Cn.mem=1502,Cn.memdagesh=64318,Cn.memdageshhebrew=64318,Cn.memhebrew=1502,Cn.menarmenian=1396,Cn.merkhahebrew=1445,Cn.merkhakefulahebrew=1446,Cn.merkhakefulalefthebrew=1446,Cn.merkhalefthebrew=1445,Cn.mhook=625,Cn.mhzsquare=13202,Cn.middledotkatakanahalfwidth=65381,Cn.middot=183,Cn.mieumacirclekorean=12914,Cn.mieumaparenkorean=12818,Cn.mieumcirclekorean=12900,Cn.mieumkorean=12609,Cn.mieumpansioskorean=12656,Cn.mieumparenkorean=12804,Cn.mieumpieupkorean=12654,Cn.mieumsioskorean=12655,Cn.mihiragana=12415,Cn.mikatakana=12511,Cn.mikatakanahalfwidth=65424,Cn.minus=8722,Cn.minusbelowcmb=800,Cn.minuscircle=8854,Cn.minusmod=727,Cn.minusplus=8723,Cn.minute=8242,Cn.miribaarusquare=13130,Cn.mirisquare=13129,Cn.mlonglegturned=624,Cn.mlsquare=13206,Cn.mmcubedsquare=13219,Cn.mmonospace=65357,Cn.mmsquaredsquare=13215,Cn.mohiragana=12418,Cn.mohmsquare=13249,Cn.mokatakana=12514,Cn.mokatakanahalfwidth=65427,Cn.molsquare=13270,Cn.momathai=3617,Cn.moverssquare=13223,Cn.moverssquaredsquare=13224,Cn.mparen=9384,Cn.mpasquare=13227,Cn.mssquare=13235,Cn.msuperior=63215,Cn.mturned=623,Cn.mu=181,Cn.mu1=181,Cn.muasquare=13186,Cn.muchgreater=8811,Cn.muchless=8810,Cn.mufsquare=13196,Cn.mugreek=956,Cn.mugsquare=13197,Cn.muhiragana=12416,Cn.mukatakana=12512,Cn.mukatakanahalfwidth=65425,Cn.mulsquare=13205,Cn.multiply=215,Cn.mumsquare=13211,Cn.munahhebrew=1443,Cn.munahlefthebrew=1443,Cn.musicalnote=9834,Cn.musicalnotedbl=9835,Cn.musicflatsign=9837,Cn.musicsharpsign=9839,Cn.mussquare=13234,Cn.muvsquare=13238,Cn.muwsquare=13244,Cn.mvmegasquare=13241,Cn.mvsquare=13239,Cn.mwmegasquare=13247,Cn.mwsquare=13245,Cn.n=110,Cn.nabengali=2472,Cn.nabla=8711,Cn.nacute=324,Cn.nadeva=2344,Cn.nagujarati=2728,Cn.nagurmukhi=2600,Cn.nahiragana=12394,Cn.nakatakana=12490,Cn.nakatakanahalfwidth=65413,Cn.napostrophe=329,Cn.nasquare=13185,Cn.nbopomofo=12555,Cn.nbspace=160,Cn.ncaron=328,Cn.ncedilla=326,Cn.ncircle=9437,Cn.ncircumflexbelow=7755,Cn.ncommaaccent=326,Cn.ndotaccent=7749,Cn.ndotbelow=7751,Cn.nehiragana=12397,Cn.nekatakana=12493,Cn.nekatakanahalfwidth=65416,Cn.newsheqelsign=8362,Cn.nfsquare=13195,Cn.ngabengali=2457,Cn.ngadeva=2329,Cn.ngagujarati=2713,Cn.ngagurmukhi=2585,Cn.ngonguthai=3591,Cn.nhiragana=12435,Cn.nhookleft=626,Cn.nhookretroflex=627,Cn.nieunacirclekorean=12911,Cn.nieunaparenkorean=12815,Cn.nieuncieuckorean=12597,Cn.nieuncirclekorean=12897,Cn.nieunhieuhkorean=12598,Cn.nieunkorean=12596,Cn.nieunpansioskorean=12648,Cn.nieunparenkorean=12801,Cn.nieunsioskorean=12647,Cn.nieuntikeutkorean=12646,Cn.nihiragana=12395,Cn.nikatakana=12491,Cn.nikatakanahalfwidth=65414,Cn.nikhahitleftthai=63641,Cn.nikhahitthai=3661,Cn.nine=57,Cn.ninearabic=1641,Cn.ninebengali=2543,Cn.ninecircle=9320,Cn.ninecircleinversesansserif=10130,Cn.ninedeva=2415,Cn.ninegujarati=2799,Cn.ninegurmukhi=2671,Cn.ninehackarabic=1641,Cn.ninehangzhou=12329,Cn.nineideographicparen=12840,Cn.nineinferior=8329,Cn.ninemonospace=65305,Cn.nineoldstyle=63289,Cn.nineparen=9340,Cn.nineperiod=9360,Cn.ninepersian=1785,Cn.nineroman=8568,Cn.ninesuperior=8313,Cn.nineteencircle=9330,Cn.nineteenparen=9350,Cn.nineteenperiod=9370,Cn.ninethai=3673,Cn.nj=460,Cn.njecyrillic=1114,Cn.nkatakana=12531,Cn.nkatakanahalfwidth=65437,Cn.nlegrightlong=414,Cn.nlinebelow=7753,Cn.nmonospace=65358,Cn.nmsquare=13210,Cn.nnabengali=2467,Cn.nnadeva=2339,Cn.nnagujarati=2723,Cn.nnagurmukhi=2595,Cn.nnnadeva=2345,Cn.nohiragana=12398,Cn.nokatakana=12494,Cn.nokatakanahalfwidth=65417,Cn.nonbreakingspace=160,Cn.nonenthai=3603,Cn.nonuthai=3609,Cn.noonarabic=1606,Cn.noonfinalarabic=65254,Cn.noonghunnaarabic=1722,Cn.noonghunnafinalarabic=64415,Cn.nooninitialarabic=65255,Cn.noonjeeminitialarabic=64722,Cn.noonjeemisolatedarabic=64587,Cn.noonmedialarabic=65256,Cn.noonmeeminitialarabic=64725,Cn.noonmeemisolatedarabic=64590,Cn.noonnoonfinalarabic=64653,Cn.notcontains=8716,Cn.notelement=8713,Cn.notelementof=8713,Cn.notequal=8800,Cn.notgreater=8815,Cn.notgreaternorequal=8817,Cn.notgreaternorless=8825,Cn.notidentical=8802,Cn.notless=8814,Cn.notlessnorequal=8816,Cn.notparallel=8742,Cn.notprecedes=8832,Cn.notsubset=8836,Cn.notsucceeds=8833,Cn.notsuperset=8837,Cn.nowarmenian=1398,Cn.nparen=9385,Cn.nssquare=13233,Cn.nsuperior=8319,Cn.ntilde=241,Cn.nu=957,Cn.nuhiragana=12396,Cn.nukatakana=12492,Cn.nukatakanahalfwidth=65415,Cn.nuktabengali=2492,Cn.nuktadeva=2364,Cn.nuktagujarati=2748,Cn.nuktagurmukhi=2620,Cn.numbersign=35,Cn.numbersignmonospace=65283,Cn.numbersignsmall=65119,Cn.numeralsigngreek=884,Cn.numeralsignlowergreek=885,Cn.numero=8470,Cn.nun=1504,Cn.nundagesh=64320,Cn.nundageshhebrew=64320,Cn.nunhebrew=1504,Cn.nvsquare=13237,Cn.nwsquare=13243,Cn.nyabengali=2462,Cn.nyadeva=2334,Cn.nyagujarati=2718,Cn.nyagurmukhi=2590,Cn.o=111,Cn.oacute=243,Cn.oangthai=3629,Cn.obarred=629,Cn.obarredcyrillic=1257,Cn.obarreddieresiscyrillic=1259,Cn.obengali=2451,Cn.obopomofo=12571,Cn.obreve=335,Cn.ocandradeva=2321,Cn.ocandragujarati=2705,Cn.ocandravowelsigndeva=2377,Cn.ocandravowelsigngujarati=2761,Cn.ocaron=466,Cn.ocircle=9438,Cn.ocircumflex=244,Cn.ocircumflexacute=7889,Cn.ocircumflexdotbelow=7897,Cn.ocircumflexgrave=7891,Cn.ocircumflexhookabove=7893,Cn.ocircumflextilde=7895,Cn.ocyrillic=1086,Cn.odblacute=337,Cn.odblgrave=525,Cn.odeva=2323,Cn.odieresis=246,Cn.odieresiscyrillic=1255,Cn.odotbelow=7885,Cn.oe=339,Cn.oekorean=12634,Cn.ogonek=731,Cn.ogonekcmb=808,Cn.ograve=242,Cn.ogujarati=2707,Cn.oharmenian=1413,Cn.ohiragana=12362,Cn.ohookabove=7887,Cn.ohorn=417,Cn.ohornacute=7899,Cn.ohorndotbelow=7907,Cn.ohorngrave=7901,Cn.ohornhookabove=7903,Cn.ohorntilde=7905,Cn.ohungarumlaut=337,Cn.oi=419,Cn.oinvertedbreve=527,Cn.okatakana=12458,Cn.okatakanahalfwidth=65397,Cn.okorean=12631,Cn.olehebrew=1451,Cn.omacron=333,Cn.omacronacute=7763,Cn.omacrongrave=7761,Cn.omdeva=2384,Cn.omega=969,Cn.omega1=982,Cn.omegacyrillic=1121,Cn.omegalatinclosed=631,Cn.omegaroundcyrillic=1147,Cn.omegatitlocyrillic=1149,Cn.omegatonos=974,Cn.omgujarati=2768,Cn.omicron=959,Cn.omicrontonos=972,Cn.omonospace=65359,Cn.one=49,Cn.onearabic=1633,Cn.onebengali=2535,Cn.onecircle=9312,Cn.onecircleinversesansserif=10122,Cn.onedeva=2407,Cn.onedotenleader=8228,Cn.oneeighth=8539,Cn.onefitted=63196,Cn.onegujarati=2791,Cn.onegurmukhi=2663,Cn.onehackarabic=1633,Cn.onehalf=189,Cn.onehangzhou=12321,Cn.oneideographicparen=12832,Cn.oneinferior=8321,Cn.onemonospace=65297,Cn.onenumeratorbengali=2548,Cn.oneoldstyle=63281,Cn.oneparen=9332,Cn.oneperiod=9352,Cn.onepersian=1777,Cn.onequarter=188,Cn.oneroman=8560,Cn.onesuperior=185,Cn.onethai=3665,Cn.onethird=8531,Cn.oogonek=491,Cn.oogonekmacron=493,Cn.oogurmukhi=2579,Cn.oomatragurmukhi=2635,Cn.oopen=596,Cn.oparen=9386,Cn.openbullet=9702,Cn.option=8997,Cn.ordfeminine=170,Cn.ordmasculine=186,Cn.orthogonal=8735,Cn.oshortdeva=2322,Cn.oshortvowelsigndeva=2378,Cn.oslash=248,Cn.oslashacute=511,Cn.osmallhiragana=12361,Cn.osmallkatakana=12457,Cn.osmallkatakanahalfwidth=65387,Cn.ostrokeacute=511,Cn.osuperior=63216,Cn.otcyrillic=1151,Cn.otilde=245,Cn.otildeacute=7757,Cn.otildedieresis=7759,Cn.oubopomofo=12577,Cn.overline=8254,Cn.overlinecenterline=65098,Cn.overlinecmb=773,Cn.overlinedashed=65097,Cn.overlinedblwavy=65100,Cn.overlinewavy=65099,Cn.overscore=175,Cn.ovowelsignbengali=2507,Cn.ovowelsigndeva=2379,Cn.ovowelsigngujarati=2763,Cn.p=112,Cn.paampssquare=13184,Cn.paasentosquare=13099,Cn.pabengali=2474,Cn.pacute=7765,Cn.padeva=2346,Cn.pagedown=8671,Cn.pageup=8670,Cn.pagujarati=2730,Cn.pagurmukhi=2602,Cn.pahiragana=12401,Cn.paiyannoithai=3631,Cn.pakatakana=12497,Cn.palatalizationcyrilliccmb=1156,Cn.palochkacyrillic=1216,Cn.pansioskorean=12671,Cn.paragraph=182,Cn.parallel=8741,Cn.parenleft=40,Cn.parenleftaltonearabic=64830,Cn.parenleftbt=63725,Cn.parenleftex=63724,Cn.parenleftinferior=8333,Cn.parenleftmonospace=65288,Cn.parenleftsmall=65113,Cn.parenleftsuperior=8317,Cn.parenlefttp=63723,Cn.parenleftvertical=65077,Cn.parenright=41,Cn.parenrightaltonearabic=64831,Cn.parenrightbt=63736,Cn.parenrightex=63735,Cn.parenrightinferior=8334,Cn.parenrightmonospace=65289,Cn.parenrightsmall=65114,Cn.parenrightsuperior=8318,Cn.parenrighttp=63734,Cn.parenrightvertical=65078,Cn.partialdiff=8706,Cn.paseqhebrew=1472,Cn.pashtahebrew=1433,Cn.pasquare=13225,Cn.patah=1463,Cn.patah11=1463,Cn.patah1d=1463,Cn.patah2a=1463,Cn.patahhebrew=1463,Cn.patahnarrowhebrew=1463,Cn.patahquarterhebrew=1463,Cn.patahwidehebrew=1463,Cn.pazerhebrew=1441,Cn.pbopomofo=12550,Cn.pcircle=9439,Cn.pdotaccent=7767,Cn.pe=1508,Cn.pecyrillic=1087,Cn.pedagesh=64324,Cn.pedageshhebrew=64324,Cn.peezisquare=13115,Cn.pefinaldageshhebrew=64323,Cn.peharabic=1662,Cn.peharmenian=1402,Cn.pehebrew=1508,Cn.pehfinalarabic=64343,Cn.pehinitialarabic=64344,Cn.pehiragana=12410,Cn.pehmedialarabic=64345,Cn.pekatakana=12506,Cn.pemiddlehookcyrillic=1191,Cn.perafehebrew=64334,Cn.percent=37,Cn.percentarabic=1642,Cn.percentmonospace=65285,Cn.percentsmall=65130,Cn.period=46,Cn.periodarmenian=1417,Cn.periodcentered=183,Cn.periodhalfwidth=65377,Cn.periodinferior=63207,Cn.periodmonospace=65294,Cn.periodsmall=65106,Cn.periodsuperior=63208,Cn.perispomenigreekcmb=834,Cn.perpendicular=8869,Cn.perthousand=8240,Cn.peseta=8359,Cn.pfsquare=13194,Cn.phabengali=2475,Cn.phadeva=2347,Cn.phagujarati=2731,Cn.phagurmukhi=2603,Cn.phi=966,Cn.phi1=981,Cn.phieuphacirclekorean=12922,Cn.phieuphaparenkorean=12826,Cn.phieuphcirclekorean=12908,Cn.phieuphkorean=12621,Cn.phieuphparenkorean=12812,Cn.philatin=632,Cn.phinthuthai=3642,Cn.phisymbolgreek=981,Cn.phook=421,Cn.phophanthai=3614,Cn.phophungthai=3612,Cn.phosamphaothai=3616,Cn.pi=960,Cn.pieupacirclekorean=12915,Cn.pieupaparenkorean=12819,Cn.pieupcieuckorean=12662,Cn.pieupcirclekorean=12901,Cn.pieupkiyeokkorean=12658,Cn.pieupkorean=12610,Cn.pieupparenkorean=12805,Cn.pieupsioskiyeokkorean=12660,Cn.pieupsioskorean=12612,Cn.pieupsiostikeutkorean=12661,Cn.pieupthieuthkorean=12663,Cn.pieuptikeutkorean=12659,Cn.pihiragana=12404,Cn.pikatakana=12500,Cn.pisymbolgreek=982,Cn.piwrarmenian=1411,Cn.planckover2pi=8463,Cn.planckover2pi1=8463,Cn.plus=43,Cn.plusbelowcmb=799,Cn.pluscircle=8853,Cn.plusminus=177,Cn.plusmod=726,Cn.plusmonospace=65291,Cn.plussmall=65122,Cn.plussuperior=8314,Cn.pmonospace=65360,Cn.pmsquare=13272,Cn.pohiragana=12413,Cn.pointingindexdownwhite=9759,Cn.pointingindexleftwhite=9756,Cn.pointingindexrightwhite=9758,Cn.pointingindexupwhite=9757,Cn.pokatakana=12509,Cn.poplathai=3611,Cn.postalmark=12306,Cn.postalmarkface=12320,Cn.pparen=9387,Cn.precedes=8826,Cn.prescription=8478,Cn.primemod=697,Cn.primereversed=8245,Cn.product=8719,Cn.projective=8965,Cn.prolongedkana=12540,Cn.propellor=8984,Cn.propersubset=8834,Cn.propersuperset=8835,Cn.proportion=8759,Cn.proportional=8733,Cn.psi=968,Cn.psicyrillic=1137,Cn.psilipneumatacyrilliccmb=1158,Cn.pssquare=13232,Cn.puhiragana=12407,Cn.pukatakana=12503,Cn.pvsquare=13236,Cn.pwsquare=13242,Cn.q=113,Cn.qadeva=2392,Cn.qadmahebrew=1448,Cn.qafarabic=1602,Cn.qaffinalarabic=65238,Cn.qafinitialarabic=65239,Cn.qafmedialarabic=65240,Cn.qamats=1464,Cn.qamats10=1464,Cn.qamats1a=1464,Cn.qamats1c=1464,Cn.qamats27=1464,Cn.qamats29=1464,Cn.qamats33=1464,Cn.qamatsde=1464,Cn.qamatshebrew=1464,Cn.qamatsnarrowhebrew=1464,Cn.qamatsqatanhebrew=1464,Cn.qamatsqatannarrowhebrew=1464,Cn.qamatsqatanquarterhebrew=1464,Cn.qamatsqatanwidehebrew=1464,Cn.qamatsquarterhebrew=1464,Cn.qamatswidehebrew=1464,Cn.qarneyparahebrew=1439,Cn.qbopomofo=12561,Cn.qcircle=9440,Cn.qhook=672,Cn.qmonospace=65361,Cn.qof=1511,Cn.qofdagesh=64327,Cn.qofdageshhebrew=64327,Cn.qofhebrew=1511,Cn.qparen=9388,Cn.quarternote=9833,Cn.qubuts=1467,Cn.qubuts18=1467,Cn.qubuts25=1467,Cn.qubuts31=1467,Cn.qubutshebrew=1467,Cn.qubutsnarrowhebrew=1467,Cn.qubutsquarterhebrew=1467,Cn.qubutswidehebrew=1467,Cn.question=63,Cn.questionarabic=1567,Cn.questionarmenian=1374,Cn.questiondown=191,Cn.questiondownsmall=63423,Cn.questiongreek=894,Cn.questionmonospace=65311,Cn.questionsmall=63295,Cn.quotedbl=34,Cn.quotedblbase=8222,Cn.quotedblleft=8220,Cn.quotedblmonospace=65282,Cn.quotedblprime=12318,Cn.quotedblprimereversed=12317,Cn.quotedblright=8221,Cn.quoteleft=8216,Cn.quoteleftreversed=8219,Cn.quotereversed=8219,Cn.quoteright=8217,Cn.quoterightn=329,Cn.quotesinglbase=8218,Cn.quotesingle=39,Cn.quotesinglemonospace=65287,Cn.r=114,Cn.raarmenian=1404,Cn.rabengali=2480,Cn.racute=341,Cn.radeva=2352,Cn.radical=8730,Cn.radicalex=63717,Cn.radoverssquare=13230,Cn.radoverssquaredsquare=13231,Cn.radsquare=13229,Cn.rafe=1471,Cn.rafehebrew=1471,Cn.ragujarati=2736,Cn.ragurmukhi=2608,Cn.rahiragana=12425,Cn.rakatakana=12521,Cn.rakatakanahalfwidth=65431,Cn.ralowerdiagonalbengali=2545,Cn.ramiddlediagonalbengali=2544,Cn.ramshorn=612,Cn.ratio=8758,Cn.rbopomofo=12566,Cn.rcaron=345,Cn.rcedilla=343,Cn.rcircle=9441,Cn.rcommaaccent=343,Cn.rdblgrave=529,Cn.rdotaccent=7769,Cn.rdotbelow=7771,Cn.rdotbelowmacron=7773,Cn.referencemark=8251,Cn.reflexsubset=8838,Cn.reflexsuperset=8839,Cn.registered=174,Cn.registersans=63720,Cn.registerserif=63194,Cn.reharabic=1585,Cn.reharmenian=1408,Cn.rehfinalarabic=65198,Cn.rehiragana=12428,Cn.rekatakana=12524,Cn.rekatakanahalfwidth=65434,Cn.resh=1512,Cn.reshdageshhebrew=64328,Cn.reshhebrew=1512,Cn.reversedtilde=8765,Cn.reviahebrew=1431,Cn.reviamugrashhebrew=1431,Cn.revlogicalnot=8976,Cn.rfishhook=638,Cn.rfishhookreversed=639,Cn.rhabengali=2525,Cn.rhadeva=2397,Cn.rho=961,Cn.rhook=637,Cn.rhookturned=635,Cn.rhookturnedsuperior=693,Cn.rhosymbolgreek=1009,Cn.rhotichookmod=734,Cn.rieulacirclekorean=12913,Cn.rieulaparenkorean=12817,Cn.rieulcirclekorean=12899,Cn.rieulhieuhkorean=12608,Cn.rieulkiyeokkorean=12602,Cn.rieulkiyeoksioskorean=12649,Cn.rieulkorean=12601,Cn.rieulmieumkorean=12603,Cn.rieulpansioskorean=12652,Cn.rieulparenkorean=12803,Cn.rieulphieuphkorean=12607,Cn.rieulpieupkorean=12604,Cn.rieulpieupsioskorean=12651,Cn.rieulsioskorean=12605,Cn.rieulthieuthkorean=12606,Cn.rieultikeutkorean=12650,Cn.rieulyeorinhieuhkorean=12653,Cn.rightangle=8735,Cn.righttackbelowcmb=793,Cn.righttriangle=8895,Cn.rihiragana=12426,Cn.rikatakana=12522,Cn.rikatakanahalfwidth=65432,Cn.ring=730,Cn.ringbelowcmb=805,Cn.ringcmb=778,Cn.ringhalfleft=703,Cn.ringhalfleftarmenian=1369,Cn.ringhalfleftbelowcmb=796,Cn.ringhalfleftcentered=723,Cn.ringhalfright=702,Cn.ringhalfrightbelowcmb=825,Cn.ringhalfrightcentered=722,Cn.rinvertedbreve=531,Cn.rittorusquare=13137,Cn.rlinebelow=7775,Cn.rlongleg=636,Cn.rlonglegturned=634,Cn.rmonospace=65362,Cn.rohiragana=12429,Cn.rokatakana=12525,Cn.rokatakanahalfwidth=65435,Cn.roruathai=3619,Cn.rparen=9389,Cn.rrabengali=2524,Cn.rradeva=2353,Cn.rragurmukhi=2652,Cn.rreharabic=1681,Cn.rrehfinalarabic=64397,Cn.rrvocalicbengali=2528,Cn.rrvocalicdeva=2400,Cn.rrvocalicgujarati=2784,Cn.rrvocalicvowelsignbengali=2500,Cn.rrvocalicvowelsigndeva=2372,Cn.rrvocalicvowelsigngujarati=2756,Cn.rsuperior=63217,Cn.rtblock=9616,Cn.rturned=633,Cn.rturnedsuperior=692,Cn.ruhiragana=12427,Cn.rukatakana=12523,Cn.rukatakanahalfwidth=65433,Cn.rupeemarkbengali=2546,Cn.rupeesignbengali=2547,Cn.rupiah=63197,Cn.ruthai=3620,Cn.rvocalicbengali=2443,Cn.rvocalicdeva=2315,Cn.rvocalicgujarati=2699,Cn.rvocalicvowelsignbengali=2499,Cn.rvocalicvowelsigndeva=2371,Cn.rvocalicvowelsigngujarati=2755,Cn.s=115,Cn.sabengali=2488,Cn.sacute=347,Cn.sacutedotaccent=7781,Cn.sadarabic=1589,Cn.sadeva=2360,Cn.sadfinalarabic=65210,Cn.sadinitialarabic=65211,Cn.sadmedialarabic=65212,Cn.sagujarati=2744,Cn.sagurmukhi=2616,Cn.sahiragana=12373,Cn.sakatakana=12469,Cn.sakatakanahalfwidth=65403,Cn.sallallahoualayhewasallamarabic=65018,Cn.samekh=1505,Cn.samekhdagesh=64321,Cn.samekhdageshhebrew=64321,Cn.samekhhebrew=1505,Cn.saraaathai=3634,Cn.saraaethai=3649,Cn.saraaimaimalaithai=3652,Cn.saraaimaimuanthai=3651,Cn.saraamthai=3635,Cn.saraathai=3632,Cn.saraethai=3648,Cn.saraiileftthai=63622,Cn.saraiithai=3637,Cn.saraileftthai=63621,Cn.saraithai=3636,Cn.saraothai=3650,Cn.saraueeleftthai=63624,Cn.saraueethai=3639,Cn.saraueleftthai=63623,Cn.sarauethai=3638,Cn.sarauthai=3640,Cn.sarauuthai=3641,Cn.sbopomofo=12569,Cn.scaron=353,Cn.scarondotaccent=7783,Cn.scedilla=351,Cn.schwa=601,Cn.schwacyrillic=1241,Cn.schwadieresiscyrillic=1243,Cn.schwahook=602,Cn.scircle=9442,Cn.scircumflex=349,Cn.scommaaccent=537,Cn.sdotaccent=7777,Cn.sdotbelow=7779,Cn.sdotbelowdotaccent=7785,Cn.seagullbelowcmb=828,Cn.second=8243,Cn.secondtonechinese=714,Cn.section=167,Cn.seenarabic=1587,Cn.seenfinalarabic=65202,Cn.seeninitialarabic=65203,Cn.seenmedialarabic=65204,Cn.segol=1462,Cn.segol13=1462,Cn.segol1f=1462,Cn.segol2c=1462,Cn.segolhebrew=1462,Cn.segolnarrowhebrew=1462,Cn.segolquarterhebrew=1462,Cn.segoltahebrew=1426,Cn.segolwidehebrew=1462,Cn.seharmenian=1405,Cn.sehiragana=12379,Cn.sekatakana=12475,Cn.sekatakanahalfwidth=65406,Cn.semicolon=59,Cn.semicolonarabic=1563,Cn.semicolonmonospace=65307,Cn.semicolonsmall=65108,Cn.semivoicedmarkkana=12444,Cn.semivoicedmarkkanahalfwidth=65439,Cn.sentisquare=13090,Cn.sentosquare=13091,Cn.seven=55,Cn.sevenarabic=1639,Cn.sevenbengali=2541,Cn.sevencircle=9318,Cn.sevencircleinversesansserif=10128,Cn.sevendeva=2413,Cn.seveneighths=8542,Cn.sevengujarati=2797,Cn.sevengurmukhi=2669,Cn.sevenhackarabic=1639,Cn.sevenhangzhou=12327,Cn.sevenideographicparen=12838,Cn.seveninferior=8327,Cn.sevenmonospace=65303,Cn.sevenoldstyle=63287,Cn.sevenparen=9338,Cn.sevenperiod=9358,Cn.sevenpersian=1783,Cn.sevenroman=8566,Cn.sevensuperior=8311,Cn.seventeencircle=9328,Cn.seventeenparen=9348,Cn.seventeenperiod=9368,Cn.seventhai=3671,Cn.sfthyphen=173,Cn.shaarmenian=1399,Cn.shabengali=2486,Cn.shacyrillic=1096,Cn.shaddaarabic=1617,Cn.shaddadammaarabic=64609,Cn.shaddadammatanarabic=64606,Cn.shaddafathaarabic=64608,Cn.shaddakasraarabic=64610,Cn.shaddakasratanarabic=64607,Cn.shade=9618,Cn.shadedark=9619,Cn.shadelight=9617,Cn.shademedium=9618,Cn.shadeva=2358,Cn.shagujarati=2742,Cn.shagurmukhi=2614,Cn.shalshelethebrew=1427,Cn.shbopomofo=12565,Cn.shchacyrillic=1097,Cn.sheenarabic=1588,Cn.sheenfinalarabic=65206,Cn.sheeninitialarabic=65207,Cn.sheenmedialarabic=65208,Cn.sheicoptic=995,Cn.sheqel=8362,Cn.sheqelhebrew=8362,Cn.sheva=1456,Cn.sheva115=1456,Cn.sheva15=1456,Cn.sheva22=1456,Cn.sheva2e=1456,Cn.shevahebrew=1456,Cn.shevanarrowhebrew=1456,Cn.shevaquarterhebrew=1456,Cn.shevawidehebrew=1456,Cn.shhacyrillic=1211,Cn.shimacoptic=1005,Cn.shin=1513,Cn.shindagesh=64329,Cn.shindageshhebrew=64329,Cn.shindageshshindot=64300,Cn.shindageshshindothebrew=64300,Cn.shindageshsindot=64301,Cn.shindageshsindothebrew=64301,Cn.shindothebrew=1473,Cn.shinhebrew=1513,Cn.shinshindot=64298,Cn.shinshindothebrew=64298,Cn.shinsindot=64299,Cn.shinsindothebrew=64299,Cn.shook=642,Cn.sigma=963,Cn.sigma1=962,Cn.sigmafinal=962,Cn.sigmalunatesymbolgreek=1010,Cn.sihiragana=12375,Cn.sikatakana=12471,Cn.sikatakanahalfwidth=65404,Cn.siluqhebrew=1469,Cn.siluqlefthebrew=1469,Cn.similar=8764,Cn.sindothebrew=1474,Cn.siosacirclekorean=12916,Cn.siosaparenkorean=12820,Cn.sioscieuckorean=12670,Cn.sioscirclekorean=12902,Cn.sioskiyeokkorean=12666,Cn.sioskorean=12613,Cn.siosnieunkorean=12667,Cn.siosparenkorean=12806,Cn.siospieupkorean=12669,Cn.siostikeutkorean=12668,Cn.six=54,Cn.sixarabic=1638,Cn.sixbengali=2540,Cn.sixcircle=9317,Cn.sixcircleinversesansserif=10127,Cn.sixdeva=2412,Cn.sixgujarati=2796,Cn.sixgurmukhi=2668,Cn.sixhackarabic=1638,Cn.sixhangzhou=12326,Cn.sixideographicparen=12837,Cn.sixinferior=8326,Cn.sixmonospace=65302,Cn.sixoldstyle=63286,Cn.sixparen=9337,Cn.sixperiod=9357,Cn.sixpersian=1782,Cn.sixroman=8565,Cn.sixsuperior=8310,Cn.sixteencircle=9327,Cn.sixteencurrencydenominatorbengali=2553,Cn.sixteenparen=9347,Cn.sixteenperiod=9367,Cn.sixthai=3670,Cn.slash=47,Cn.slashmonospace=65295,Cn.slong=383,Cn.slongdotaccent=7835,Cn.smileface=9786,Cn.smonospace=65363,Cn.sofpasuqhebrew=1475,Cn.softhyphen=173,Cn.softsigncyrillic=1100,Cn.sohiragana=12381,Cn.sokatakana=12477,Cn.sokatakanahalfwidth=65407,Cn.soliduslongoverlaycmb=824,Cn.solidusshortoverlaycmb=823,Cn.sorusithai=3625,Cn.sosalathai=3624,Cn.sosothai=3595,Cn.sosuathai=3626,Cn.space=32,Cn.spacehackarabic=32,Cn.spade=9824,Cn.spadesuitblack=9824,Cn.spadesuitwhite=9828,Cn.sparen=9390,Cn.squarebelowcmb=827,Cn.squarecc=13252,Cn.squarecm=13213,Cn.squarediagonalcrosshatchfill=9641,Cn.squarehorizontalfill=9636,Cn.squarekg=13199,Cn.squarekm=13214,Cn.squarekmcapital=13262,Cn.squareln=13265,Cn.squarelog=13266,Cn.squaremg=13198,Cn.squaremil=13269,Cn.squaremm=13212,Cn.squaremsquared=13217,Cn.squareorthogonalcrosshatchfill=9638,Cn.squareupperlefttolowerrightfill=9639,Cn.squareupperrighttolowerleftfill=9640,Cn.squareverticalfill=9637,Cn.squarewhitewithsmallblack=9635,Cn.srsquare=13275,Cn.ssabengali=2487,Cn.ssadeva=2359,Cn.ssagujarati=2743,Cn.ssangcieuckorean=12617,Cn.ssanghieuhkorean=12677,Cn.ssangieungkorean=12672,Cn.ssangkiyeokkorean=12594,Cn.ssangnieunkorean=12645,Cn.ssangpieupkorean=12611,Cn.ssangsioskorean=12614,Cn.ssangtikeutkorean=12600,Cn.ssuperior=63218,Cn.sterling=163,Cn.sterlingmonospace=65505,Cn.strokelongoverlaycmb=822,Cn.strokeshortoverlaycmb=821,Cn.subset=8834,Cn.subsetnotequal=8842,Cn.subsetorequal=8838,Cn.succeeds=8827,Cn.suchthat=8715,Cn.suhiragana=12377,Cn.sukatakana=12473,Cn.sukatakanahalfwidth=65405,Cn.sukunarabic=1618,Cn.summation=8721,Cn.sun=9788,Cn.superset=8835,Cn.supersetnotequal=8843,Cn.supersetorequal=8839,Cn.svsquare=13276,Cn.syouwaerasquare=13180,Cn.t=116,Cn.tabengali=2468,Cn.tackdown=8868,Cn.tackleft=8867,Cn.tadeva=2340,Cn.tagujarati=2724,Cn.tagurmukhi=2596,Cn.taharabic=1591,Cn.tahfinalarabic=65218,Cn.tahinitialarabic=65219,Cn.tahiragana=12383,Cn.tahmedialarabic=65220,Cn.taisyouerasquare=13181,Cn.takatakana=12479,Cn.takatakanahalfwidth=65408,Cn.tatweelarabic=1600,Cn.tau=964,Cn.tav=1514,Cn.tavdages=64330,Cn.tavdagesh=64330,Cn.tavdageshhebrew=64330,Cn.tavhebrew=1514,Cn.tbar=359,Cn.tbopomofo=12554,Cn.tcaron=357,Cn.tccurl=680,Cn.tcedilla=355,Cn.tcheharabic=1670,Cn.tchehfinalarabic=64379,Cn.tchehinitialarabic=64380,Cn.tchehmedialarabic=64381,Cn.tcircle=9443,Cn.tcircumflexbelow=7793,Cn.tcommaaccent=355,Cn.tdieresis=7831,Cn.tdotaccent=7787,Cn.tdotbelow=7789,Cn.tecyrillic=1090,Cn.tedescendercyrillic=1197,Cn.teharabic=1578,Cn.tehfinalarabic=65174,Cn.tehhahinitialarabic=64674,Cn.tehhahisolatedarabic=64524,Cn.tehinitialarabic=65175,Cn.tehiragana=12390,Cn.tehjeeminitialarabic=64673,Cn.tehjeemisolatedarabic=64523,Cn.tehmarbutaarabic=1577,Cn.tehmarbutafinalarabic=65172,Cn.tehmedialarabic=65176,Cn.tehmeeminitialarabic=64676,Cn.tehmeemisolatedarabic=64526,Cn.tehnoonfinalarabic=64627,Cn.tekatakana=12486,Cn.tekatakanahalfwidth=65411,Cn.telephone=8481,Cn.telephoneblack=9742,Cn.telishagedolahebrew=1440,Cn.telishaqetanahebrew=1449,Cn.tencircle=9321,Cn.tenideographicparen=12841,Cn.tenparen=9341,Cn.tenperiod=9361,Cn.tenroman=8569,Cn.tesh=679,Cn.tet=1496,Cn.tetdagesh=64312,Cn.tetdageshhebrew=64312,Cn.tethebrew=1496,Cn.tetsecyrillic=1205,Cn.tevirhebrew=1435,Cn.tevirlefthebrew=1435,Cn.thabengali=2469,Cn.thadeva=2341,Cn.thagujarati=2725,Cn.thagurmukhi=2597,Cn.thalarabic=1584,Cn.thalfinalarabic=65196,Cn.thanthakhatlowleftthai=63640,Cn.thanthakhatlowrightthai=63639,Cn.thanthakhatthai=3660,Cn.thanthakhatupperleftthai=63638,Cn.theharabic=1579,Cn.thehfinalarabic=65178,Cn.thehinitialarabic=65179,Cn.thehmedialarabic=65180,Cn.thereexists=8707,Cn.therefore=8756,Cn.theta=952,Cn.theta1=977,Cn.thetasymbolgreek=977,Cn.thieuthacirclekorean=12921,Cn.thieuthaparenkorean=12825,Cn.thieuthcirclekorean=12907,Cn.thieuthkorean=12620,Cn.thieuthparenkorean=12811,Cn.thirteencircle=9324,Cn.thirteenparen=9344,Cn.thirteenperiod=9364,Cn.thonangmonthothai=3601,Cn.thook=429,Cn.thophuthaothai=3602,Cn.thorn=254,Cn.thothahanthai=3607,Cn.thothanthai=3600,Cn.thothongthai=3608,Cn.thothungthai=3606,Cn.thousandcyrillic=1154,Cn.thousandsseparatorarabic=1644,Cn.thousandsseparatorpersian=1644,Cn.three=51,Cn.threearabic=1635,Cn.threebengali=2537,Cn.threecircle=9314,Cn.threecircleinversesansserif=10124,Cn.threedeva=2409,Cn.threeeighths=8540,Cn.threegujarati=2793,Cn.threegurmukhi=2665,Cn.threehackarabic=1635,Cn.threehangzhou=12323,Cn.threeideographicparen=12834,Cn.threeinferior=8323,Cn.threemonospace=65299,Cn.threenumeratorbengali=2550,Cn.threeoldstyle=63283,Cn.threeparen=9334,Cn.threeperiod=9354,Cn.threepersian=1779,Cn.threequarters=190,Cn.threequartersemdash=63198,Cn.threeroman=8562,Cn.threesuperior=179,Cn.threethai=3667,Cn.thzsquare=13204,Cn.tihiragana=12385,Cn.tikatakana=12481,Cn.tikatakanahalfwidth=65409,Cn.tikeutacirclekorean=12912,Cn.tikeutaparenkorean=12816,Cn.tikeutcirclekorean=12898,Cn.tikeutkorean=12599,Cn.tikeutparenkorean=12802,Cn.tilde=732,Cn.tildebelowcmb=816,Cn.tildecmb=771,Cn.tildecomb=771,Cn.tildedoublecmb=864,Cn.tildeoperator=8764,Cn.tildeoverlaycmb=820,Cn.tildeverticalcmb=830,Cn.timescircle=8855,Cn.tipehahebrew=1430,Cn.tipehalefthebrew=1430,Cn.tippigurmukhi=2672,Cn.titlocyrilliccmb=1155,Cn.tiwnarmenian=1407,Cn.tlinebelow=7791,Cn.tmonospace=65364,Cn.toarmenian=1385,Cn.tohiragana=12392,Cn.tokatakana=12488,Cn.tokatakanahalfwidth=65412,Cn.tonebarextrahighmod=741,Cn.tonebarextralowmod=745,Cn.tonebarhighmod=742,Cn.tonebarlowmod=744,Cn.tonebarmidmod=743,Cn.tonefive=445,Cn.tonesix=389,Cn.tonetwo=424,Cn.tonos=900,Cn.tonsquare=13095,Cn.topatakthai=3599,Cn.tortoiseshellbracketleft=12308,Cn.tortoiseshellbracketleftsmall=65117,Cn.tortoiseshellbracketleftvertical=65081,Cn.tortoiseshellbracketright=12309,Cn.tortoiseshellbracketrightsmall=65118,Cn.tortoiseshellbracketrightvertical=65082,Cn.totaothai=3605,Cn.tpalatalhook=427,Cn.tparen=9391,Cn.trademark=8482,Cn.trademarksans=63722,Cn.trademarkserif=63195,Cn.tretroflexhook=648,Cn.triagdn=9660,Cn.triaglf=9668,Cn.triagrt=9658,Cn.triagup=9650,Cn.ts=678,Cn.tsadi=1510,Cn.tsadidagesh=64326,Cn.tsadidageshhebrew=64326,Cn.tsadihebrew=1510,Cn.tsecyrillic=1094,Cn.tsere=1461,Cn.tsere12=1461,Cn.tsere1e=1461,Cn.tsere2b=1461,Cn.tserehebrew=1461,Cn.tserenarrowhebrew=1461,Cn.tserequarterhebrew=1461,Cn.tserewidehebrew=1461,Cn.tshecyrillic=1115,Cn.tsuperior=63219,Cn.ttabengali=2463,Cn.ttadeva=2335,Cn.ttagujarati=2719,Cn.ttagurmukhi=2591,Cn.tteharabic=1657,Cn.ttehfinalarabic=64359,Cn.ttehinitialarabic=64360,Cn.ttehmedialarabic=64361,Cn.tthabengali=2464,Cn.tthadeva=2336,Cn.tthagujarati=2720,Cn.tthagurmukhi=2592,Cn.tturned=647,Cn.tuhiragana=12388,Cn.tukatakana=12484,Cn.tukatakanahalfwidth=65410,Cn.tusmallhiragana=12387,Cn.tusmallkatakana=12483,Cn.tusmallkatakanahalfwidth=65391,Cn.twelvecircle=9323,Cn.twelveparen=9343,Cn.twelveperiod=9363,Cn.twelveroman=8571,Cn.twentycircle=9331,Cn.twentyhangzhou=21316,Cn.twentyparen=9351,Cn.twentyperiod=9371,Cn.two=50,Cn.twoarabic=1634,Cn.twobengali=2536,Cn.twocircle=9313,Cn.twocircleinversesansserif=10123,Cn.twodeva=2408,Cn.twodotenleader=8229,Cn.twodotleader=8229,Cn.twodotleadervertical=65072,Cn.twogujarati=2792,Cn.twogurmukhi=2664,Cn.twohackarabic=1634,Cn.twohangzhou=12322,Cn.twoideographicparen=12833,Cn.twoinferior=8322,Cn.twomonospace=65298,Cn.twonumeratorbengali=2549,Cn.twooldstyle=63282,Cn.twoparen=9333,Cn.twoperiod=9353,Cn.twopersian=1778,Cn.tworoman=8561,Cn.twostroke=443,Cn.twosuperior=178,Cn.twothai=3666,Cn.twothirds=8532,Cn.u=117,Cn.uacute=250,Cn.ubar=649,Cn.ubengali=2441,Cn.ubopomofo=12584,Cn.ubreve=365,Cn.ucaron=468,Cn.ucircle=9444,Cn.ucircumflex=251,Cn.ucircumflexbelow=7799,Cn.ucyrillic=1091,Cn.udattadeva=2385,Cn.udblacute=369,Cn.udblgrave=533,Cn.udeva=2313,Cn.udieresis=252,Cn.udieresisacute=472,Cn.udieresisbelow=7795,Cn.udieresiscaron=474,Cn.udieresiscyrillic=1265,Cn.udieresisgrave=476,Cn.udieresismacron=470,Cn.udotbelow=7909,Cn.ugrave=249,Cn.ugujarati=2697,Cn.ugurmukhi=2569,Cn.uhiragana=12358,Cn.uhookabove=7911,Cn.uhorn=432,Cn.uhornacute=7913,Cn.uhorndotbelow=7921,Cn.uhorngrave=7915,Cn.uhornhookabove=7917,Cn.uhorntilde=7919,Cn.uhungarumlaut=369,Cn.uhungarumlautcyrillic=1267,Cn.uinvertedbreve=535,Cn.ukatakana=12454,Cn.ukatakanahalfwidth=65395,Cn.ukcyrillic=1145,Cn.ukorean=12636,Cn.umacron=363,Cn.umacroncyrillic=1263,Cn.umacrondieresis=7803,Cn.umatragurmukhi=2625,Cn.umonospace=65365,Cn.underscore=95,Cn.underscoredbl=8215,Cn.underscoremonospace=65343,Cn.underscorevertical=65075,Cn.underscorewavy=65103,Cn.union=8746,Cn.universal=8704,Cn.uogonek=371,Cn.uparen=9392,Cn.upblock=9600,Cn.upperdothebrew=1476,Cn.upsilon=965,Cn.upsilondieresis=971,Cn.upsilondieresistonos=944,Cn.upsilonlatin=650,Cn.upsilontonos=973,Cn.uptackbelowcmb=797,Cn.uptackmod=724,Cn.uragurmukhi=2675,Cn.uring=367,Cn.ushortcyrillic=1118,Cn.usmallhiragana=12357,Cn.usmallkatakana=12453,Cn.usmallkatakanahalfwidth=65385,Cn.ustraightcyrillic=1199,Cn.ustraightstrokecyrillic=1201,Cn.utilde=361,Cn.utildeacute=7801,Cn.utildebelow=7797,Cn.uubengali=2442,Cn.uudeva=2314,Cn.uugujarati=2698,Cn.uugurmukhi=2570,Cn.uumatragurmukhi=2626,Cn.uuvowelsignbengali=2498,Cn.uuvowelsigndeva=2370,Cn.uuvowelsigngujarati=2754,Cn.uvowelsignbengali=2497,Cn.uvowelsigndeva=2369,Cn.uvowelsigngujarati=2753,Cn.v=118,Cn.vadeva=2357,Cn.vagujarati=2741,Cn.vagurmukhi=2613,Cn.vakatakana=12535,Cn.vav=1493,Cn.vavdagesh=64309,Cn.vavdagesh65=64309,Cn.vavdageshhebrew=64309,Cn.vavhebrew=1493,Cn.vavholam=64331,Cn.vavholamhebrew=64331,Cn.vavvavhebrew=1520,Cn.vavyodhebrew=1521,Cn.vcircle=9445,Cn.vdotbelow=7807,Cn.vecyrillic=1074,Cn.veharabic=1700,Cn.vehfinalarabic=64363,Cn.vehinitialarabic=64364,Cn.vehmedialarabic=64365,Cn.vekatakana=12537,Cn.venus=9792,Cn.verticalbar=124,Cn.verticallineabovecmb=781,Cn.verticallinebelowcmb=809,Cn.verticallinelowmod=716,Cn.verticallinemod=712,Cn.vewarmenian=1406,Cn.vhook=651,Cn.vikatakana=12536,Cn.viramabengali=2509,Cn.viramadeva=2381,Cn.viramagujarati=2765,Cn.visargabengali=2435,Cn.visargadeva=2307,Cn.visargagujarati=2691,Cn.vmonospace=65366,Cn.voarmenian=1400,Cn.voicediterationhiragana=12446,Cn.voicediterationkatakana=12542,Cn.voicedmarkkana=12443,Cn.voicedmarkkanahalfwidth=65438,Cn.vokatakana=12538,Cn.vparen=9393,Cn.vtilde=7805,Cn.vturned=652,Cn.vuhiragana=12436,Cn.vukatakana=12532,Cn.w=119,Cn.wacute=7811,Cn.waekorean=12633,Cn.wahiragana=12431,Cn.wakatakana=12527,Cn.wakatakanahalfwidth=65436,Cn.wakorean=12632,Cn.wasmallhiragana=12430,Cn.wasmallkatakana=12526,Cn.wattosquare=13143,Cn.wavedash=12316,Cn.wavyunderscorevertical=65076,Cn.wawarabic=1608,Cn.wawfinalarabic=65262,Cn.wawhamzaabovearabic=1572,Cn.wawhamzaabovefinalarabic=65158,Cn.wbsquare=13277,Cn.wcircle=9446,Cn.wcircumflex=373,Cn.wdieresis=7813,Cn.wdotaccent=7815,Cn.wdotbelow=7817,Cn.wehiragana=12433,Cn.weierstrass=8472,Cn.wekatakana=12529,Cn.wekorean=12638,Cn.weokorean=12637,Cn.wgrave=7809,Cn.whitebullet=9702,Cn.whitecircle=9675,Cn.whitecircleinverse=9689,Cn.whitecornerbracketleft=12302,Cn.whitecornerbracketleftvertical=65091,Cn.whitecornerbracketright=12303,Cn.whitecornerbracketrightvertical=65092,Cn.whitediamond=9671,Cn.whitediamondcontainingblacksmalldiamond=9672,Cn.whitedownpointingsmalltriangle=9663,Cn.whitedownpointingtriangle=9661,Cn.whiteleftpointingsmalltriangle=9667,Cn.whiteleftpointingtriangle=9665,Cn.whitelenticularbracketleft=12310,Cn.whitelenticularbracketright=12311,Cn.whiterightpointingsmalltriangle=9657,Cn.whiterightpointingtriangle=9655,Cn.whitesmallsquare=9643,Cn.whitesmilingface=9786,Cn.whitesquare=9633,Cn.whitestar=9734,Cn.whitetelephone=9743,Cn.whitetortoiseshellbracketleft=12312,Cn.whitetortoiseshellbracketright=12313,Cn.whiteuppointingsmalltriangle=9653,Cn.whiteuppointingtriangle=9651,Cn.wihiragana=12432,Cn.wikatakana=12528,Cn.wikorean=12639,Cn.wmonospace=65367,Cn.wohiragana=12434,Cn.wokatakana=12530,Cn.wokatakanahalfwidth=65382,Cn.won=8361,Cn.wonmonospace=65510,Cn.wowaenthai=3623,Cn.wparen=9394,Cn.wring=7832,Cn.wsuperior=695,Cn.wturned=653,Cn.wynn=447,Cn.x=120,Cn.xabovecmb=829,Cn.xbopomofo=12562,Cn.xcircle=9447,Cn.xdieresis=7821,Cn.xdotaccent=7819,Cn.xeharmenian=1389,Cn.xi=958,Cn.xmonospace=65368,Cn.xparen=9395,Cn.xsuperior=739,Cn.y=121,Cn.yaadosquare=13134,Cn.yabengali=2479,Cn.yacute=253,Cn.yadeva=2351,Cn.yaekorean=12626,Cn.yagujarati=2735,Cn.yagurmukhi=2607,Cn.yahiragana=12420,Cn.yakatakana=12516,Cn.yakatakanahalfwidth=65428,Cn.yakorean=12625,Cn.yamakkanthai=3662,Cn.yasmallhiragana=12419,Cn.yasmallkatakana=12515,Cn.yasmallkatakanahalfwidth=65388,Cn.yatcyrillic=1123,Cn.ycircle=9448,Cn.ycircumflex=375,Cn.ydieresis=255,Cn.ydotaccent=7823,Cn.ydotbelow=7925,Cn.yeharabic=1610,Cn.yehbarreearabic=1746,Cn.yehbarreefinalarabic=64431,Cn.yehfinalarabic=65266,Cn.yehhamzaabovearabic=1574,Cn.yehhamzaabovefinalarabic=65162,Cn.yehhamzaaboveinitialarabic=65163,Cn.yehhamzaabovemedialarabic=65164,Cn.yehinitialarabic=65267,Cn.yehmedialarabic=65268,Cn.yehmeeminitialarabic=64733,Cn.yehmeemisolatedarabic=64600,Cn.yehnoonfinalarabic=64660,Cn.yehthreedotsbelowarabic=1745,Cn.yekorean=12630,Cn.yen=165,Cn.yenmonospace=65509,Cn.yeokorean=12629,Cn.yeorinhieuhkorean=12678,Cn.yerahbenyomohebrew=1450,Cn.yerahbenyomolefthebrew=1450,Cn.yericyrillic=1099,Cn.yerudieresiscyrillic=1273,Cn.yesieungkorean=12673,Cn.yesieungpansioskorean=12675,Cn.yesieungsioskorean=12674,Cn.yetivhebrew=1434,Cn.ygrave=7923,Cn.yhook=436,Cn.yhookabove=7927,Cn.yiarmenian=1397,Cn.yicyrillic=1111,Cn.yikorean=12642,Cn.yinyang=9775,Cn.yiwnarmenian=1410,Cn.ymonospace=65369,Cn.yod=1497,Cn.yoddagesh=64313,Cn.yoddageshhebrew=64313,Cn.yodhebrew=1497,Cn.yodyodhebrew=1522,Cn.yodyodpatahhebrew=64287,Cn.yohiragana=12424,Cn.yoikorean=12681,Cn.yokatakana=12520,Cn.yokatakanahalfwidth=65430,Cn.yokorean=12635,Cn.yosmallhiragana=12423,Cn.yosmallkatakana=12519,Cn.yosmallkatakanahalfwidth=65390,Cn.yotgreek=1011,Cn.yoyaekorean=12680,Cn.yoyakorean=12679,Cn.yoyakthai=3618,Cn.yoyingthai=3597,Cn.yparen=9396,Cn.ypogegrammeni=890,Cn.ypogegrammenigreekcmb=837,Cn.yr=422,Cn.yring=7833,Cn.ysuperior=696,Cn.ytilde=7929,Cn.yturned=654,Cn.yuhiragana=12422,Cn.yuikorean=12684,Cn.yukatakana=12518,Cn.yukatakanahalfwidth=65429,Cn.yukorean=12640,Cn.yusbigcyrillic=1131,Cn.yusbigiotifiedcyrillic=1133,Cn.yuslittlecyrillic=1127,Cn.yuslittleiotifiedcyrillic=1129,Cn.yusmallhiragana=12421,Cn.yusmallkatakana=12517,Cn.yusmallkatakanahalfwidth=65389,Cn.yuyekorean=12683,Cn.yuyeokorean=12682,Cn.yyabengali=2527,Cn.yyadeva=2399,Cn.z=122,Cn.zaarmenian=1382,Cn.zacute=378,Cn.zadeva=2395,Cn.zagurmukhi=2651,Cn.zaharabic=1592,Cn.zahfinalarabic=65222,Cn.zahinitialarabic=65223,Cn.zahiragana=12374,Cn.zahmedialarabic=65224,Cn.zainarabic=1586,Cn.zainfinalarabic=65200,Cn.zakatakana=12470,Cn.zaqefgadolhebrew=1429,Cn.zaqefqatanhebrew=1428,Cn.zarqahebrew=1432,Cn.zayin=1494,Cn.zayindagesh=64310,Cn.zayindageshhebrew=64310,Cn.zayinhebrew=1494,Cn.zbopomofo=12567,Cn.zcaron=382,Cn.zcircle=9449,Cn.zcircumflex=7825,Cn.zcurl=657,Cn.zdot=380,Cn.zdotaccent=380,Cn.zdotbelow=7827,Cn.zecyrillic=1079,Cn.zedescendercyrillic=1177,Cn.zedieresiscyrillic=1247,Cn.zehiragana=12380,Cn.zekatakana=12476,Cn.zero=48,Cn.zeroarabic=1632,Cn.zerobengali=2534,Cn.zerodeva=2406,Cn.zerogujarati=2790,Cn.zerogurmukhi=2662,Cn.zerohackarabic=1632,Cn.zeroinferior=8320,Cn.zeromonospace=65296,Cn.zerooldstyle=63280,Cn.zeropersian=1776,Cn.zerosuperior=8304,Cn.zerothai=3664,Cn.zerowidthjoiner=65279,Cn.zerowidthnonjoiner=8204,Cn.zerowidthspace=8203,Cn.zeta=950,Cn.zhbopomofo=12563,Cn.zhearmenian=1386,Cn.zhebrevecyrillic=1218,Cn.zhecyrillic=1078,Cn.zhedescendercyrillic=1175,Cn.zhedieresiscyrillic=1245,Cn.zihiragana=12376,Cn.zikatakana=12472,Cn.zinorhebrew=1454,Cn.zlinebelow=7829,Cn.zmonospace=65370,Cn.zohiragana=12382,Cn.zokatakana=12478,Cn.zparen=9397,Cn.zretroflexhook=656,Cn.zstroke=438,Cn.zuhiragana=12378,Cn.zukatakana=12474,Cn[".notdef"]=0,Cn.angbracketleftbig=9001,Cn.angbracketleftBig=9001,Cn.angbracketleftbigg=9001,Cn.angbracketleftBigg=9001,Cn.angbracketrightBig=9002,Cn.angbracketrightbig=9002,Cn.angbracketrightBigg=9002,Cn.angbracketrightbigg=9002,Cn.arrowhookleft=8618,Cn.arrowhookright=8617,Cn.arrowlefttophalf=8636,Cn.arrowleftbothalf=8637,Cn.arrownortheast=8599,Cn.arrownorthwest=8598,Cn.arrowrighttophalf=8640,Cn.arrowrightbothalf=8641,Cn.arrowsoutheast=8600,Cn.arrowsouthwest=8601,Cn.backslashbig=8726,Cn.backslashBig=8726,Cn.backslashBigg=8726,Cn.backslashbigg=8726,Cn.bardbl=8214,Cn.bracehtipdownleft=65079,Cn.bracehtipdownright=65079,Cn.bracehtipupleft=65080,Cn.bracehtipupright=65080,Cn.braceleftBig=123,Cn.braceleftbig=123,Cn.braceleftbigg=123,Cn.braceleftBigg=123,Cn.bracerightBig=125,Cn.bracerightbig=125,Cn.bracerightbigg=125,Cn.bracerightBigg=125,Cn.bracketleftbig=91,Cn.bracketleftBig=91,Cn.bracketleftbigg=91,Cn.bracketleftBigg=91,Cn.bracketrightBig=93,Cn.bracketrightbig=93,Cn.bracketrightbigg=93,Cn.bracketrightBigg=93,Cn.ceilingleftbig=8968,Cn.ceilingleftBig=8968,Cn.ceilingleftBigg=8968,Cn.ceilingleftbigg=8968,Cn.ceilingrightbig=8969,Cn.ceilingrightBig=8969,Cn.ceilingrightbigg=8969,Cn.ceilingrightBigg=8969,Cn.circledotdisplay=8857,Cn.circledottext=8857,Cn.circlemultiplydisplay=8855,Cn.circlemultiplytext=8855,Cn.circleplusdisplay=8853,Cn.circleplustext=8853,Cn.contintegraldisplay=8750,Cn.contintegraltext=8750,Cn.coproductdisplay=8720,Cn.coproducttext=8720,Cn.floorleftBig=8970,Cn.floorleftbig=8970,Cn.floorleftbigg=8970,Cn.floorleftBigg=8970,Cn.floorrightbig=8971,Cn.floorrightBig=8971,Cn.floorrightBigg=8971,Cn.floorrightbigg=8971,Cn.hatwide=770,Cn.hatwider=770,Cn.hatwidest=770,Cn.intercal=7488,Cn.integraldisplay=8747,Cn.integraltext=8747,Cn.intersectiondisplay=8898,Cn.intersectiontext=8898,Cn.logicalanddisplay=8743,Cn.logicalandtext=8743,Cn.logicalordisplay=8744,Cn.logicalortext=8744,Cn.parenleftBig=40,Cn.parenleftbig=40,Cn.parenleftBigg=40,Cn.parenleftbigg=40,Cn.parenrightBig=41,Cn.parenrightbig=41,Cn.parenrightBigg=41,Cn.parenrightbigg=41,Cn.prime=8242,Cn.productdisplay=8719,Cn.producttext=8719,Cn.radicalbig=8730,Cn.radicalBig=8730,Cn.radicalBigg=8730,Cn.radicalbigg=8730,Cn.radicalbt=8730,Cn.radicaltp=8730,Cn.radicalvertex=8730,Cn.slashbig=47,Cn.slashBig=47,Cn.slashBigg=47,Cn.slashbigg=47,Cn.summationdisplay=8721,Cn.summationtext=8721,Cn.tildewide=732,Cn.tildewider=732,Cn.tildewidest=732,Cn.uniondisplay=8899,Cn.unionmultidisplay=8846,Cn.unionmultitext=8846,Cn.unionsqdisplay=8852,Cn.unionsqtext=8852,Cn.uniontext=8899,Cn.vextenddouble=8741,Cn.vextendsingle=8739});Mn.getGlyphsUnicode=Ln;const jn=(0,In.getLookupTableFactory)(function(Cn){Cn.space=32,Cn.a1=9985,Cn.a2=9986,Cn.a202=9987,Cn.a3=9988,Cn.a4=9742,Cn.a5=9990,Cn.a119=9991,Cn.a118=9992,Cn.a117=9993,Cn.a11=9755,Cn.a12=9758,Cn.a13=9996,Cn.a14=9997,Cn.a15=9998,Cn.a16=9999,Cn.a105=1e4,Cn.a17=10001,Cn.a18=10002,Cn.a19=10003,Cn.a20=10004,Cn.a21=10005,Cn.a22=10006,Cn.a23=10007,Cn.a24=10008,Cn.a25=10009,Cn.a26=10010,Cn.a27=10011,Cn.a28=10012,Cn.a6=10013,Cn.a7=10014,Cn.a8=10015,Cn.a9=10016,Cn.a10=10017,Cn.a29=10018,Cn.a30=10019,Cn.a31=10020,Cn.a32=10021,Cn.a33=10022,Cn.a34=10023,Cn.a35=9733,Cn.a36=10025,Cn.a37=10026,Cn.a38=10027,Cn.a39=10028,Cn.a40=10029,Cn.a41=10030,Cn.a42=10031,Cn.a43=10032,Cn.a44=10033,Cn.a45=10034,Cn.a46=10035,Cn.a47=10036,Cn.a48=10037,Cn.a49=10038,Cn.a50=10039,Cn.a51=10040,Cn.a52=10041,Cn.a53=10042,Cn.a54=10043,Cn.a55=10044,Cn.a56=10045,Cn.a57=10046,Cn.a58=10047,Cn.a59=10048,Cn.a60=10049,Cn.a61=10050,Cn.a62=10051,Cn.a63=10052,Cn.a64=10053,Cn.a65=10054,Cn.a66=10055,Cn.a67=10056,Cn.a68=10057,Cn.a69=10058,Cn.a70=10059,Cn.a71=9679,Cn.a72=10061,Cn.a73=9632,Cn.a74=10063,Cn.a203=10064,Cn.a75=10065,Cn.a204=10066,Cn.a76=9650,Cn.a77=9660,Cn.a78=9670,Cn.a79=10070,Cn.a81=9687,Cn.a82=10072,Cn.a83=10073,Cn.a84=10074,Cn.a97=10075,Cn.a98=10076,Cn.a99=10077,Cn.a100=10078,Cn.a101=10081,Cn.a102=10082,Cn.a103=10083,Cn.a104=10084,Cn.a106=10085,Cn.a107=10086,Cn.a108=10087,Cn.a112=9827,Cn.a111=9830,Cn.a110=9829,Cn.a109=9824,Cn.a120=9312,Cn.a121=9313,Cn.a122=9314,Cn.a123=9315,Cn.a124=9316,Cn.a125=9317,Cn.a126=9318,Cn.a127=9319,Cn.a128=9320,Cn.a129=9321,Cn.a130=10102,Cn.a131=10103,Cn.a132=10104,Cn.a133=10105,Cn.a134=10106,Cn.a135=10107,Cn.a136=10108,Cn.a137=10109,Cn.a138=10110,Cn.a139=10111,Cn.a140=10112,Cn.a141=10113,Cn.a142=10114,Cn.a143=10115,Cn.a144=10116,Cn.a145=10117,Cn.a146=10118,Cn.a147=10119,Cn.a148=10120,Cn.a149=10121,Cn.a150=10122,Cn.a151=10123,Cn.a152=10124,Cn.a153=10125,Cn.a154=10126,Cn.a155=10127,Cn.a156=10128,Cn.a157=10129,Cn.a158=10130,Cn.a159=10131,Cn.a160=10132,Cn.a161=8594,Cn.a163=8596,Cn.a164=8597,Cn.a196=10136,Cn.a165=10137,Cn.a192=10138,Cn.a166=10139,Cn.a167=10140,Cn.a168=10141,Cn.a169=10142,Cn.a170=10143,Cn.a171=10144,Cn.a172=10145,Cn.a173=10146,Cn.a162=10147,Cn.a174=10148,Cn.a175=10149,Cn.a176=10150,Cn.a177=10151,Cn.a178=10152,Cn.a179=10153,Cn.a193=10154,Cn.a180=10155,Cn.a199=10156,Cn.a181=10157,Cn.a200=10158,Cn.a182=10159,Cn.a201=10161,Cn.a183=10162,Cn.a184=10163,Cn.a197=10164,Cn.a185=10165,Cn.a194=10166,Cn.a198=10167,Cn.a186=10168,Cn.a195=10169,Cn.a187=10170,Cn.a188=10171,Cn.a189=10172,Cn.a190=10173,Cn.a191=10174,Cn.a89=10088,Cn.a90=10089,Cn.a93=10090,Cn.a94=10091,Cn.a91=10092,Cn.a92=10093,Cn.a205=10094,Cn.a85=10095,Cn.a206=10096,Cn.a86=10097,Cn.a87=10098,Cn.a88=10099,Cn.a95=10100,Cn.a96=10101,Cn[".notdef"]=0});Mn.getDingbatsGlyphsUnicode=jn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.clearUnicodeCaches=Bn,Mn.getCharUnicodeCategory=ei,Mn.getUnicodeForGlyph=Cn,Mn.getUnicodeRangeFor=Rn,Mn.mapSpecialUnicodeValues=jn;var In=ti(3);const Ln=(0,In.getLookupTableFactory)(function(Nn){Nn[63721]=169,Nn[63193]=169,Nn[63720]=174,Nn[63194]=174,Nn[63722]=8482,Nn[63195]=8482,Nn[63729]=9127,Nn[63730]=9128,Nn[63731]=9129,Nn[63740]=9131,Nn[63741]=9132,Nn[63742]=9133,Nn[63726]=9121,Nn[63727]=9122,Nn[63728]=9123,Nn[63737]=9124,Nn[63738]=9125,Nn[63739]=9126,Nn[63723]=9115,Nn[63724]=9116,Nn[63725]=9117,Nn[63734]=9118,Nn[63735]=9119,Nn[63736]=9120});function jn(Nn){return Nn>=65520&&Nn<=65535?0:Nn>=62976&&Nn<=63743?Ln()[Nn]||Nn:Nn===173?45:Nn}function Cn(Nn,Hn){let On=Hn[Nn];if(On!==void 0)return On;if(!Nn)return-1;if(Nn[0]==="u"){const hi=Nn.length;let Xn;if(hi===7&&Nn[1]==="n"&&Nn[2]==="i")Xn=Nn.substring(3);else if(hi>=5&&hi<=7)Xn=Nn.substring(1);else return-1;if(Xn===Xn.toUpperCase()&&(On=parseInt(Xn,16),On>=0))return On}return-1}const Tn=[[0,127],[128,255],[256,383],[384,591],[592,687,7424,7551,7552,7615],[688,767,42752,42783],[768,879,7616,7679],[880,1023],[11392,11519],[1024,1279,1280,1327,11744,11775,42560,42655],[1328,1423],[1424,1535],[42240,42559],[1536,1791,1872,1919],[1984,2047],[2304,2431],[2432,2559],[2560,2687],[2688,2815],[2816,2943],[2944,3071],[3072,3199],[3200,3327],[3328,3455],[3584,3711],[3712,3839],[4256,4351,11520,11567],[6912,7039],[4352,4607],[7680,7935,11360,11391,42784,43007],[7936,8191],[8192,8303,11776,11903],[8304,8351],[8352,8399],[8400,8447],[8448,8527],[8528,8591],[8592,8703,10224,10239,10496,10623,11008,11263],[8704,8959,10752,11007,10176,10223,10624,10751],[8960,9215],[9216,9279],[9280,9311],[9312,9471],[9472,9599],[9600,9631],[9632,9727],[9728,9983],[9984,10175],[12288,12351],[12352,12447],[12448,12543,12784,12799],[12544,12591,12704,12735],[12592,12687],[43072,43135],[12800,13055],[13056,13311],[44032,55215],[55296,57343],[67840,67871],[19968,40959,11904,12031,12032,12255,12272,12287,13312,19903,131072,173791,12688,12703],[57344,63743],[12736,12783,63744,64255,194560,195103],[64256,64335],[64336,65023],[65056,65071],[65040,65055],[65104,65135],[65136,65279],[65280,65519],[65520,65535],[3840,4095],[1792,1871],[1920,1983],[3456,3583],[4096,4255],[4608,4991,4992,5023,11648,11743],[5024,5119],[5120,5759],[5760,5791],[5792,5887],[6016,6143],[6144,6319],[10240,10495],[40960,42127],[5888,5919,5920,5951,5952,5983,5984,6015],[66304,66351],[66352,66383],[66560,66639],[118784,119039,119040,119295,119296,119375],[119808,120831],[1044480,1048573],[65024,65039,917760,917999],[917504,917631],[6400,6479],[6480,6527],[6528,6623],[6656,6687],[11264,11359],[11568,11647],[19904,19967],[43008,43055],[65536,65663,65664,65791,65792,65855],[65856,65935],[66432,66463],[66464,66527],[66640,66687],[66688,66735],[67584,67647],[68096,68191],[119552,119647],[73728,74751,74752,74879],[119648,119679],[7040,7103],[7168,7247],[7248,7295],[43136,43231],[43264,43311],[43312,43359],[43520,43615],[65936,65999],[66e3,66047],[66208,66271,66176,66207,67872,67903],[127024,127135,126976,127023]];function Rn(Nn,Hn=-1){if(Hn!==-1){const On=Tn[Hn];for(let hi=0,Xn=On.length;hi<Xn;hi+=2)if(Nn>=On[hi]&&Nn<=On[hi+1])return Hn}for(let On=0,hi=Tn.length;On<hi;On++){const Xn=Tn[On];for(let ii=0,ri=Xn.length;ii<ri;ii+=2)if(Nn>=Xn[ii]&&Nn<=Xn[ii+1])return On}return-1}const ui=new RegExp("^(\\s)|(\\p{Mn})|(\\p{Cf})$","u"),si=new Map;function ei(Nn){const Hn=si.get(Nn);if(Hn)return Hn;const On=Nn.match(ui),hi={isWhitespace:!!(On!=null&&On[1]),isZeroWidthDiacritic:!!(On!=null&&On[2]),isInvisibleFormatMark:!!(On!=null&&On[3])};return si.set(Nn,hi),hi}function Bn(){si.clear()}},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.getSerifFonts=Mn.getNonStdFontMap=Mn.getGlyphMapForStandardFonts=Mn.getFontNameToFileMap=void 0,Mn.getStandardFontName=Nn,Mn.getSymbolsFonts=Mn.getSupplementalGlyphMapForCalibri=Mn.getSupplementalGlyphMapForArialBlack=Mn.getStdFontMap=void 0,Mn.isKnownFontName=Hn;var In=ti(3),Ln=ti(38);const jn=(0,In.getLookupTableFactory)(function(On){On["Times-Roman"]="Times-Roman",On.Helvetica="Helvetica",On.Courier="Courier",On.Symbol="Symbol",On["Times-Bold"]="Times-Bold",On["Helvetica-Bold"]="Helvetica-Bold",On["Courier-Bold"]="Courier-Bold",On.ZapfDingbats="ZapfDingbats",On["Times-Italic"]="Times-Italic",On["Helvetica-Oblique"]="Helvetica-Oblique",On["Courier-Oblique"]="Courier-Oblique",On["Times-BoldItalic"]="Times-BoldItalic",On["Helvetica-BoldOblique"]="Helvetica-BoldOblique",On["Courier-BoldOblique"]="Courier-BoldOblique",On.ArialNarrow="Helvetica",On["ArialNarrow-Bold"]="Helvetica-Bold",On["ArialNarrow-BoldItalic"]="Helvetica-BoldOblique",On["ArialNarrow-Italic"]="Helvetica-Oblique",On.ArialBlack="Helvetica",On["ArialBlack-Bold"]="Helvetica-Bold",On["ArialBlack-BoldItalic"]="Helvetica-BoldOblique",On["ArialBlack-Italic"]="Helvetica-Oblique",On["Arial-Black"]="Helvetica",On["Arial-Black-Bold"]="Helvetica-Bold",On["Arial-Black-BoldItalic"]="Helvetica-BoldOblique",On["Arial-Black-Italic"]="Helvetica-Oblique",On.Arial="Helvetica",On["Arial-Bold"]="Helvetica-Bold",On["Arial-BoldItalic"]="Helvetica-BoldOblique",On["Arial-Italic"]="Helvetica-Oblique",On.ArialMT="Helvetica",On["Arial-BoldItalicMT"]="Helvetica-BoldOblique",On["Arial-BoldMT"]="Helvetica-Bold",On["Arial-ItalicMT"]="Helvetica-Oblique",On["Arial-BoldItalicMT-BoldItalic"]="Helvetica-BoldOblique",On["Arial-BoldMT-Bold"]="Helvetica-Bold",On["Arial-ItalicMT-Italic"]="Helvetica-Oblique",On.ArialUnicodeMS="Helvetica",On["ArialUnicodeMS-Bold"]="Helvetica-Bold",On["ArialUnicodeMS-BoldItalic"]="Helvetica-BoldOblique",On["ArialUnicodeMS-Italic"]="Helvetica-Oblique",On["Courier-BoldItalic"]="Courier-BoldOblique",On["Courier-Italic"]="Courier-Oblique",On.CourierNew="Courier",On["CourierNew-Bold"]="Courier-Bold",On["CourierNew-BoldItalic"]="Courier-BoldOblique",On["CourierNew-Italic"]="Courier-Oblique",On["CourierNewPS-BoldItalicMT"]="Courier-BoldOblique",On["CourierNewPS-BoldMT"]="Courier-Bold",On["CourierNewPS-ItalicMT"]="Courier-Oblique",On.CourierNewPSMT="Courier",On["Helvetica-BoldItalic"]="Helvetica-BoldOblique",On["Helvetica-Italic"]="Helvetica-Oblique",On["Symbol-Bold"]="Symbol",On["Symbol-BoldItalic"]="Symbol",On["Symbol-Italic"]="Symbol",On.TimesNewRoman="Times-Roman",On["TimesNewRoman-Bold"]="Times-Bold",On["TimesNewRoman-BoldItalic"]="Times-BoldItalic",On["TimesNewRoman-Italic"]="Times-Italic",On.TimesNewRomanPS="Times-Roman",On["TimesNewRomanPS-Bold"]="Times-Bold",On["TimesNewRomanPS-BoldItalic"]="Times-BoldItalic",On["TimesNewRomanPS-BoldItalicMT"]="Times-BoldItalic",On["TimesNewRomanPS-BoldMT"]="Times-Bold",On["TimesNewRomanPS-Italic"]="Times-Italic",On["TimesNewRomanPS-ItalicMT"]="Times-Italic",On.TimesNewRomanPSMT="Times-Roman",On["TimesNewRomanPSMT-Bold"]="Times-Bold",On["TimesNewRomanPSMT-BoldItalic"]="Times-BoldItalic",On["TimesNewRomanPSMT-Italic"]="Times-Italic"});Mn.getStdFontMap=jn;const Cn=(0,In.getLookupTableFactory)(function(On){On.Courier="FoxitFixed.pfb",On["Courier-Bold"]="FoxitFixedBold.pfb",On["Courier-BoldOblique"]="FoxitFixedBoldItalic.pfb",On["Courier-Oblique"]="FoxitFixedItalic.pfb",On.Helvetica="LiberationSans-Regular.ttf",On["Helvetica-Bold"]="LiberationSans-Bold.ttf",On["Helvetica-BoldOblique"]="LiberationSans-BoldItalic.ttf",On["Helvetica-Oblique"]="LiberationSans-Italic.ttf",On["Times-Roman"]="FoxitSerif.pfb",On["Times-Bold"]="FoxitSerifBold.pfb",On["Times-BoldItalic"]="FoxitSerifBoldItalic.pfb",On["Times-Italic"]="FoxitSerifItalic.pfb",On.Symbol="FoxitSymbol.pfb",On.ZapfDingbats="FoxitDingbats.pfb",On["LiberationSans-Regular"]="LiberationSans-Regular.ttf",On["LiberationSans-Bold"]="LiberationSans-Bold.ttf",On["LiberationSans-Italic"]="LiberationSans-Italic.ttf",On["LiberationSans-BoldItalic"]="LiberationSans-BoldItalic.ttf"});Mn.getFontNameToFileMap=Cn;const Tn=(0,In.getLookupTableFactory)(function(On){On.Calibri="Helvetica",On["Calibri-Bold"]="Helvetica-Bold",On["Calibri-BoldItalic"]="Helvetica-BoldOblique",On["Calibri-Italic"]="Helvetica-Oblique",On.CenturyGothic="Helvetica",On["CenturyGothic-Bold"]="Helvetica-Bold",On["CenturyGothic-BoldItalic"]="Helvetica-BoldOblique",On["CenturyGothic-Italic"]="Helvetica-Oblique",On.ComicSansMS="Comic Sans MS",On["ComicSansMS-Bold"]="Comic Sans MS-Bold",On["ComicSansMS-BoldItalic"]="Comic Sans MS-BoldItalic",On["ComicSansMS-Italic"]="Comic Sans MS-Italic",On.Impact="Helvetica",On["ItcSymbol-Bold"]="Helvetica-Bold",On["ItcSymbol-BoldItalic"]="Helvetica-BoldOblique",On["ItcSymbol-Book"]="Helvetica",On["ItcSymbol-BookItalic"]="Helvetica-Oblique",On["ItcSymbol-Medium"]="Helvetica",On["ItcSymbol-MediumItalic"]="Helvetica-Oblique",On.LucidaConsole="Courier",On["LucidaConsole-Bold"]="Courier-Bold",On["LucidaConsole-BoldItalic"]="Courier-BoldOblique",On["LucidaConsole-Italic"]="Courier-Oblique",On["LucidaSans-Demi"]="Helvetica-Bold",On["MS-Gothic"]="MS Gothic",On["MS-Gothic-Bold"]="MS Gothic-Bold",On["MS-Gothic-BoldItalic"]="MS Gothic-BoldItalic",On["MS-Gothic-Italic"]="MS Gothic-Italic",On["MS-Mincho"]="MS Mincho",On["MS-Mincho-Bold"]="MS Mincho-Bold",On["MS-Mincho-BoldItalic"]="MS Mincho-BoldItalic",On["MS-Mincho-Italic"]="MS Mincho-Italic",On["MS-PGothic"]="MS PGothic",On["MS-PGothic-Bold"]="MS PGothic-Bold",On["MS-PGothic-BoldItalic"]="MS PGothic-BoldItalic",On["MS-PGothic-Italic"]="MS PGothic-Italic",On["MS-PMincho"]="MS PMincho",On["MS-PMincho-Bold"]="MS PMincho-Bold",On["MS-PMincho-BoldItalic"]="MS PMincho-BoldItalic",On["MS-PMincho-Italic"]="MS PMincho-Italic",On.NuptialScript="Times-Italic",On.SegoeUISymbol="Helvetica"});Mn.getNonStdFontMap=Tn;const Rn=(0,In.getLookupTableFactory)(function(On){On["Adobe Jenson"]=!0,On["Adobe Text"]=!0,On.Albertus=!0,On.Aldus=!0,On.Alexandria=!0,On.Algerian=!0,On["American Typewriter"]=!0,On.Antiqua=!0,On.Apex=!0,On.Arno=!0,On.Aster=!0,On.Aurora=!0,On.Baskerville=!0,On.Bell=!0,On.Bembo=!0,On["Bembo Schoolbook"]=!0,On.Benguiat=!0,On["Berkeley Old Style"]=!0,On["Bernhard Modern"]=!0,On["Berthold City"]=!0,On.Bodoni=!0,On["Bauer Bodoni"]=!0,On["Book Antiqua"]=!0,On.Bookman=!0,On["Bordeaux Roman"]=!0,On["Californian FB"]=!0,On.Calisto=!0,On.Calvert=!0,On.Capitals=!0,On.Cambria=!0,On.Cartier=!0,On.Caslon=!0,On.Catull=!0,On.Centaur=!0,On["Century Old Style"]=!0,On["Century Schoolbook"]=!0,On.Chaparral=!0,On["Charis SIL"]=!0,On.Cheltenham=!0,On["Cholla Slab"]=!0,On.Clarendon=!0,On.Clearface=!0,On.Cochin=!0,On.Colonna=!0,On["Computer Modern"]=!0,On["Concrete Roman"]=!0,On.Constantia=!0,On["Cooper Black"]=!0,On.Corona=!0,On.Ecotype=!0,On.Egyptienne=!0,On.Elephant=!0,On.Excelsior=!0,On.Fairfield=!0,On["FF Scala"]=!0,On.Folkard=!0,On.Footlight=!0,On.FreeSerif=!0,On["Friz Quadrata"]=!0,On.Garamond=!0,On.Gentium=!0,On.Georgia=!0,On.Gloucester=!0,On["Goudy Old Style"]=!0,On["Goudy Schoolbook"]=!0,On["Goudy Pro Font"]=!0,On.Granjon=!0,On["Guardian Egyptian"]=!0,On.Heather=!0,On.Hercules=!0,On["High Tower Text"]=!0,On.Hiroshige=!0,On["Hoefler Text"]=!0,On["Humana Serif"]=!0,On.Imprint=!0,On["Ionic No. 5"]=!0,On.Janson=!0,On.Joanna=!0,On.Korinna=!0,On.Lexicon=!0,On.LiberationSerif=!0,On["Liberation Serif"]=!0,On["Linux Libertine"]=!0,On.Literaturnaya=!0,On.Lucida=!0,On["Lucida Bright"]=!0,On.Melior=!0,On.Memphis=!0,On.Miller=!0,On.Minion=!0,On.Modern=!0,On["Mona Lisa"]=!0,On["Mrs Eaves"]=!0,On["MS Serif"]=!0,On["Museo Slab"]=!0,On["New York"]=!0,On["Nimbus Roman"]=!0,On["NPS Rawlinson Roadway"]=!0,On.NuptialScript=!0,On.Palatino=!0,On.Perpetua=!0,On.Plantin=!0,On["Plantin Schoolbook"]=!0,On.Playbill=!0,On["Poor Richard"]=!0,On["Rawlinson Roadway"]=!0,On.Renault=!0,On.Requiem=!0,On.Rockwell=!0,On.Roman=!0,On["Rotis Serif"]=!0,On.Sabon=!0,On.Scala=!0,On.Seagull=!0,On.Sistina=!0,On.Souvenir=!0,On.STIX=!0,On["Stone Informal"]=!0,On["Stone Serif"]=!0,On.Sylfaen=!0,On.Times=!0,On.Trajan=!0,On.Trinité=!0,On["Trump Mediaeval"]=!0,On.Utopia=!0,On["Vale Type"]=!0,On["Bitstream Vera"]=!0,On["Vera Serif"]=!0,On.Versailles=!0,On.Wanted=!0,On.Weiss=!0,On["Wide Latin"]=!0,On.Windsor=!0,On.XITS=!0});Mn.getSerifFonts=Rn;const ui=(0,In.getLookupTableFactory)(function(On){On.Dingbats=!0,On.Symbol=!0,On.ZapfDingbats=!0,On.Wingdings=!0,On["Wingdings-Bold"]=!0,On["Wingdings-Regular"]=!0});Mn.getSymbolsFonts=ui;const si=(0,In.getLookupTableFactory)(function(On){On[2]=10,On[3]=32,On[4]=33,On[5]=34,On[6]=35,On[7]=36,On[8]=37,On[9]=38,On[10]=39,On[11]=40,On[12]=41,On[13]=42,On[14]=43,On[15]=44,On[16]=45,On[17]=46,On[18]=47,On[19]=48,On[20]=49,On[21]=50,On[22]=51,On[23]=52,On[24]=53,On[25]=54,On[26]=55,On[27]=56,On[28]=57,On[29]=58,On[30]=894,On[31]=60,On[32]=61,On[33]=62,On[34]=63,On[35]=64,On[36]=65,On[37]=66,On[38]=67,On[39]=68,On[40]=69,On[41]=70,On[42]=71,On[43]=72,On[44]=73,On[45]=74,On[46]=75,On[47]=76,On[48]=77,On[49]=78,On[50]=79,On[51]=80,On[52]=81,On[53]=82,On[54]=83,On[55]=84,On[56]=85,On[57]=86,On[58]=87,On[59]=88,On[60]=89,On[61]=90,On[62]=91,On[63]=92,On[64]=93,On[65]=94,On[66]=95,On[67]=96,On[68]=97,On[69]=98,On[70]=99,On[71]=100,On[72]=101,On[73]=102,On[74]=103,On[75]=104,On[76]=105,On[77]=106,On[78]=107,On[79]=108,On[80]=109,On[81]=110,On[82]=111,On[83]=112,On[84]=113,On[85]=114,On[86]=115,On[87]=116,On[88]=117,On[89]=118,On[90]=119,On[91]=120,On[92]=121,On[93]=122,On[94]=123,On[95]=124,On[96]=125,On[97]=126,On[98]=196,On[99]=197,On[100]=199,On[101]=201,On[102]=209,On[103]=214,On[104]=220,On[105]=225,On[106]=224,On[107]=226,On[108]=228,On[109]=227,On[110]=229,On[111]=231,On[112]=233,On[113]=232,On[114]=234,On[115]=235,On[116]=237,On[117]=236,On[118]=238,On[119]=239,On[120]=241,On[121]=243,On[122]=242,On[123]=244,On[124]=246,On[125]=245,On[126]=250,On[127]=249,On[128]=251,On[129]=252,On[130]=8224,On[131]=176,On[132]=162,On[133]=163,On[134]=167,On[135]=8226,On[136]=182,On[137]=223,On[138]=174,On[139]=169,On[140]=8482,On[141]=180,On[142]=168,On[143]=8800,On[144]=198,On[145]=216,On[146]=8734,On[147]=177,On[148]=8804,On[149]=8805,On[150]=165,On[151]=181,On[152]=8706,On[153]=8721,On[154]=8719,On[156]=8747,On[157]=170,On[158]=186,On[159]=8486,On[160]=230,On[161]=248,On[162]=191,On[163]=161,On[164]=172,On[165]=8730,On[166]=402,On[167]=8776,On[168]=8710,On[169]=171,On[170]=187,On[171]=8230,On[179]=8220,On[180]=8221,On[181]=8216,On[182]=8217,On[200]=193,On[203]=205,On[207]=211,On[210]=218,On[223]=711,On[224]=321,On[225]=322,On[226]=352,On[227]=353,On[228]=381,On[229]=382,On[233]=221,On[234]=253,On[252]=263,On[253]=268,On[254]=269,On[258]=258,On[260]=260,On[261]=261,On[265]=280,On[266]=281,On[267]=282,On[268]=283,On[269]=313,On[275]=323,On[276]=324,On[278]=328,On[283]=344,On[284]=345,On[285]=346,On[286]=347,On[292]=367,On[295]=377,On[296]=378,On[298]=380,On[305]=963,On[306]=964,On[307]=966,On[308]=8215,On[309]=8252,On[310]=8319,On[311]=8359,On[312]=8592,On[313]=8593,On[337]=9552,On[493]=1039,On[494]=1040,On[672]=1488,On[673]=1489,On[674]=1490,On[675]=1491,On[676]=1492,On[677]=1493,On[678]=1494,On[679]=1495,On[680]=1496,On[681]=1497,On[682]=1498,On[683]=1499,On[684]=1500,On[685]=1501,On[686]=1502,On[687]=1503,On[688]=1504,On[689]=1505,On[690]=1506,On[691]=1507,On[692]=1508,On[693]=1509,On[694]=1510,On[695]=1511,On[696]=1512,On[697]=1513,On[698]=1514,On[705]=1524,On[706]=8362,On[710]=64288,On[711]=64298,On[759]=1617,On[761]=1776,On[763]=1778,On[775]=1652,On[777]=1764,On[778]=1780,On[779]=1781,On[780]=1782,On[782]=771,On[783]=64726,On[786]=8363,On[788]=8532,On[790]=768,On[791]=769,On[792]=768,On[795]=803,On[797]=64336,On[798]=64337,On[799]=64342,On[800]=64343,On[801]=64344,On[802]=64345,On[803]=64362,On[804]=64363,On[805]=64364,On[2424]=7821,On[2425]=7822,On[2426]=7823,On[2427]=7824,On[2428]=7825,On[2429]=7826,On[2430]=7827,On[2433]=7682,On[2678]=8045,On[2679]=8046,On[2830]=1552,On[2838]=686,On[2840]=751,On[2842]=753,On[2843]=754,On[2844]=755,On[2846]=757,On[2856]=767,On[2857]=848,On[2858]=849,On[2862]=853,On[2863]=854,On[2864]=855,On[2865]=861,On[2866]=862,On[2906]=7460,On[2908]=7462,On[2909]=7463,On[2910]=7464,On[2912]=7466,On[2913]=7467,On[2914]=7468,On[2916]=7470,On[2917]=7471,On[2918]=7472,On[2920]=7474,On[2921]=7475,On[2922]=7476,On[2924]=7478,On[2925]=7479,On[2926]=7480,On[2928]=7482,On[2929]=7483,On[2930]=7484,On[2932]=7486,On[2933]=7487,On[2934]=7488,On[2936]=7490,On[2937]=7491,On[2938]=7492,On[2940]=7494,On[2941]=7495,On[2942]=7496,On[2944]=7498,On[2946]=7500,On[2948]=7502,On[2950]=7504,On[2951]=7505,On[2952]=7506,On[2954]=7508,On[2955]=7509,On[2956]=7510,On[2958]=7512,On[2959]=7513,On[2960]=7514,On[2962]=7516,On[2963]=7517,On[2964]=7518,On[2966]=7520,On[2967]=7521,On[2968]=7522,On[2970]=7524,On[2971]=7525,On[2972]=7526,On[2974]=7528,On[2975]=7529,On[2976]=7530,On[2978]=1537,On[2979]=1538,On[2980]=1539,On[2982]=1549,On[2983]=1551,On[2984]=1552,On[2986]=1554,On[2987]=1555,On[2988]=1556,On[2990]=1623,On[2991]=1624,On[2995]=1775,On[2999]=1791,On[3002]=64290,On[3003]=64291,On[3004]=64292,On[3006]=64294,On[3007]=64295,On[3008]=64296,On[3011]=1900,On[3014]=8223,On[3015]=8244,On[3017]=7532,On[3018]=7533,On[3019]=7534,On[3075]=7590,On[3076]=7591,On[3079]=7594,On[3080]=7595,On[3083]=7598,On[3084]=7599,On[3087]=7602,On[3088]=7603,On[3091]=7606,On[3092]=7607,On[3095]=7610,On[3096]=7611,On[3099]=7614,On[3100]=7615,On[3103]=7618,On[3104]=7619,On[3107]=8337,On[3108]=8338,On[3116]=1884,On[3119]=1885,On[3120]=1885,On[3123]=1886,On[3124]=1886,On[3127]=1887,On[3128]=1887,On[3131]=1888,On[3132]=1888,On[3135]=1889,On[3136]=1889,On[3139]=1890,On[3140]=1890,On[3143]=1891,On[3144]=1891,On[3147]=1892,On[3148]=1892,On[3153]=580,On[3154]=581,On[3157]=584,On[3158]=585,On[3161]=588,On[3162]=589,On[3165]=891,On[3166]=892,On[3169]=1274,On[3170]=1275,On[3173]=1278,On[3174]=1279,On[3181]=7622,On[3182]=7623,On[3282]=11799,On[3316]=578,On[3379]=42785,On[3393]=1159,On[3416]=8377});Mn.getGlyphMapForStandardFonts=si;const ei=(0,In.getLookupTableFactory)(function(On){On[227]=322,On[264]=261,On[291]=346});Mn.getSupplementalGlyphMapForArialBlack=ei;const Bn=(0,In.getLookupTableFactory)(function(On){On[1]=32,On[4]=65,On[5]=192,On[6]=193,On[9]=196,On[17]=66,On[18]=67,On[21]=268,On[24]=68,On[28]=69,On[29]=200,On[30]=201,On[32]=282,On[38]=70,On[39]=71,On[44]=72,On[47]=73,On[48]=204,On[49]=205,On[58]=74,On[60]=75,On[62]=76,On[68]=77,On[69]=78,On[75]=79,On[76]=210,On[80]=214,On[87]=80,On[89]=81,On[90]=82,On[92]=344,On[94]=83,On[97]=352,On[100]=84,On[104]=85,On[109]=220,On[115]=86,On[116]=87,On[121]=88,On[122]=89,On[124]=221,On[127]=90,On[129]=381,On[258]=97,On[259]=224,On[260]=225,On[263]=228,On[268]=261,On[271]=98,On[272]=99,On[273]=263,On[275]=269,On[282]=100,On[286]=101,On[287]=232,On[288]=233,On[290]=283,On[295]=281,On[296]=102,On[336]=103,On[346]=104,On[349]=105,On[350]=236,On[351]=237,On[361]=106,On[364]=107,On[367]=108,On[371]=322,On[373]=109,On[374]=110,On[381]=111,On[382]=242,On[383]=243,On[386]=246,On[393]=112,On[395]=113,On[396]=114,On[398]=345,On[400]=115,On[401]=347,On[403]=353,On[410]=116,On[437]=117,On[442]=252,On[448]=118,On[449]=119,On[454]=120,On[455]=121,On[457]=253,On[460]=122,On[462]=382,On[463]=380,On[853]=44,On[855]=58,On[856]=46,On[876]=47,On[878]=45,On[882]=45,On[894]=40,On[895]=41,On[896]=91,On[897]=93,On[923]=64,On[1004]=48,On[1005]=49,On[1006]=50,On[1007]=51,On[1008]=52,On[1009]=53,On[1010]=54,On[1011]=55,On[1012]=56,On[1013]=57,On[1081]=37,On[1085]=43,On[1086]=45});Mn.getSupplementalGlyphMapForCalibri=Bn;function Nn(On){const hi=(0,Ln.normalizeFontName)(On);return jn()[hi]}function Hn(On){const hi=(0,Ln.normalizeFontName)(On);return!!(jn()[hi]||Tn()[hi]||Rn()[hi]||ui()[hi])}},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.ToUnicodeMap=Mn.IdentityToUnicodeMap=void 0;var In=ti(2);class Ln{constructor(Tn=[]){this._map=Tn}get length(){return this._map.length}forEach(Tn){for(const Rn in this._map)Tn(Rn,this._map[Rn].charCodeAt(0))}has(Tn){return this._map[Tn]!==void 0}get(Tn){return this._map[Tn]}charCodeOf(Tn){const Rn=this._map;if(Rn.length<=65536)return Rn.indexOf(Tn);for(const ui in Rn)if(Rn[ui]===Tn)return ui|0;return-1}amend(Tn){for(const Rn in Tn)this._map[Rn]=Tn[Rn]}}Mn.ToUnicodeMap=Ln;class jn{constructor(Tn,Rn){this.firstChar=Tn,this.lastChar=Rn}get length(){return this.lastChar+1-this.firstChar}forEach(Tn){for(let Rn=this.firstChar,ui=this.lastChar;Rn<=ui;Rn++)Tn(Rn,Rn)}has(Tn){return this.firstChar<=Tn&&Tn<=this.lastChar}get(Tn){if(this.firstChar<=Tn&&Tn<=this.lastChar)return String.fromCharCode(Tn)}charCodeOf(Tn){return Number.isInteger(Tn)&&Tn>=this.firstChar&&Tn<=this.lastChar?Tn:-1}amend(Tn){(0,In.unreachable)("Should not call amend()")}}Mn.IdentityToUnicodeMap=jn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.CFFFont=void 0;var In=ti(35),Ln=ti(38),jn=ti(2);class Cn{constructor(Rn,ui){this.properties=ui;const si=new In.CFFParser(Rn,ui,Ln.SEAC_ANALYSIS_ENABLED);this.cff=si.parse(),this.cff.duplicateFirstGlyph();const ei=new In.CFFCompiler(this.cff);this.seacs=this.cff.seacs;try{this.data=ei.compile()}catch{(0,jn.warn)("Failed to compile font "+ui.loadedName),this.data=Rn}this._createBuiltInEncoding()}get numGlyphs(){return this.cff.charStrings.count}getCharset(){return this.cff.charset.charset}getGlyphMapping(){const Rn=this.cff,ui=this.properties,{cidToGidMap:si,cMap:ei}=ui,Bn=Rn.charset.charset;let Nn,Hn;if(ui.composite){let hi;if((si==null?void 0:si.length)>0){hi=Object.create(null);for(let ii=0,ri=si.length;ii<ri;ii++){const di=si[ii];di!==void 0&&(hi[di]=ii)}}Nn=Object.create(null);let Xn;if(Rn.isCIDFont)for(Hn=0;Hn<Bn.length;Hn++){const ii=Bn[Hn];Xn=ei.charCodeOf(ii),(hi==null?void 0:hi[Xn])!==void 0&&(Xn=hi[Xn]),Nn[Xn]=Hn}else for(Hn=0;Hn<Rn.charStrings.count;Hn++)Xn=ei.charCodeOf(Hn),Nn[Xn]=Hn;return Nn}let On=Rn.encoding?Rn.encoding.encoding:null;return ui.isInternalFont&&(On=ui.defaultEncoding),Nn=(0,Ln.type1FontGlyphMapping)(ui,On,Bn),Nn}hasGlyphId(Rn){return this.cff.hasGlyphId(Rn)}_createBuiltInEncoding(){const{charset:Rn,encoding:ui}=this.cff;if(!Rn||!ui)return;const si=Rn.charset,ei=ui.encoding,Bn=[];for(const Nn in ei){const Hn=ei[Nn];if(Hn>=0){const On=si[Hn];On&&(Bn[Nn]=On)}}Bn.length>0&&(this.properties.builtInEncoding=Bn)}}Mn.CFFFont=Cn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.FontRendererFactory=void 0;var In=ti(2),Ln=ti(35),jn=ti(39),Cn=ti(37),Tn=ti(8);function Rn(Zn,Gn){return(Zn[Gn]<<24|Zn[Gn+1]<<16|Zn[Gn+2]<<8|Zn[Gn+3])>>>0}function ui(Zn,Gn){return Zn[Gn]<<8|Zn[Gn+1]}function si(Zn,Gn){return(Zn[Gn]<<24|Zn[Gn+1]<<16)>>16}function ei(Zn,Gn){return Zn[Gn]<<24>>24}function Bn(Zn,Gn){return si(Zn,Gn)/16384}function Nn(Zn){const Gn=Zn.length;let mi=32768;return Gn<1240?mi=107:Gn<33900&&(mi=1131),mi}function Hn(Zn,Gn,mi){const Wn=ui(Zn,Gn+2)===1?Rn(Zn,Gn+8):Rn(Zn,Gn+16),ni=ui(Zn,Gn+Wn);let li,Ai,gi;if(ni===4){ui(Zn,Gn+Wn+2);const yi=ui(Zn,Gn+Wn+6)>>1;for(Ai=Gn+Wn+14,li=[],gi=0;gi<yi;gi++,Ai+=2)li[gi]={end:ui(Zn,Ai)};for(Ai+=2,gi=0;gi<yi;gi++,Ai+=2)li[gi].start=ui(Zn,Ai);for(gi=0;gi<yi;gi++,Ai+=2)li[gi].idDelta=ui(Zn,Ai);for(gi=0;gi<yi;gi++,Ai+=2){let Ii=ui(Zn,Ai);if(Ii!==0){li[gi].ids=[];for(let xi=0,Qn=li[gi].end-li[gi].start+1;xi<Qn;xi++)li[gi].ids[xi]=ui(Zn,Ai+Ii),Ii+=2}}return li}else if(ni===12){const yi=Rn(Zn,Gn+Wn+12);for(Ai=Gn+Wn+16,li=[],gi=0;gi<yi;gi++)Gn=Rn(Zn,Ai),li.push({start:Gn,end:Rn(Zn,Ai+4),idDelta:Rn(Zn,Ai+8)-Gn}),Ai+=12;return li}throw new In.FormatError(`unsupported cmap: ${ni}`)}function On(Zn,Gn,mi,Wn){var gi,yi,Ii;const ni={},Ai=new Ln.CFFParser(new Tn.Stream(Zn,Gn,mi-Gn),ni,Wn).parse();return{glyphs:Ai.charStrings.objects,subrs:(yi=(gi=Ai.topDict.privateDict)==null?void 0:gi.subrsIndex)==null?void 0:yi.objects,gsubrs:(Ii=Ai.globalSubrIndex)==null?void 0:Ii.objects,isCFFCIDFont:Ai.isCIDFont,fdSelect:Ai.fdSelect,fdArray:Ai.fdArray}}function hi(Zn,Gn,mi){let Wn,ni;mi?(Wn=4,ni=Rn):(Wn=2,ni=(gi,yi)=>2*ui(gi,yi));const li=[];let Ai=ni(Gn,0);for(let gi=Wn;gi<Gn.length;gi+=Wn){const yi=ni(Gn,gi);li.push(Zn.subarray(Ai,yi)),Ai=yi}return li}function Xn(Zn,Gn){const mi=Gn.codePointAt(0);let Wn=0,ni=0,li=Zn.length-1;for(;ni<li;){const Ai=ni+li+1>>1;mi<Zn[Ai].start?li=Ai-1:ni=Ai}return Zn[ni].start<=mi&&mi<=Zn[ni].end&&(Wn=Zn[ni].idDelta+(Zn[ni].ids?Zn[ni].ids[mi-Zn[ni].start]:mi)&65535),{charCode:mi,glyphId:Wn}}function ii(Zn,Gn,mi){function Wn(Qn,ai){Gn.push({cmd:"moveTo",args:[Qn,ai]})}function ni(Qn,ai){Gn.push({cmd:"lineTo",args:[Qn,ai]})}function li(Qn,ai,Vn,Yn){Gn.push({cmd:"quadraticCurveTo",args:[Qn,ai,Vn,Yn]})}let Ai=0;const gi=si(Zn,Ai);let yi,Ii=0,xi=0;if(Ai+=10,gi<0)do{yi=ui(Zn,Ai);const Qn=ui(Zn,Ai+2);Ai+=4;let ai,Vn;yi&1?(yi&2?(ai=si(Zn,Ai),Vn=si(Zn,Ai+2)):(ai=ui(Zn,Ai),Vn=ui(Zn,Ai+2)),Ai+=4):yi&2?(ai=ei(Zn,Ai++),Vn=ei(Zn,Ai++)):(ai=Zn[Ai++],Vn=Zn[Ai++]),yi&2?(Ii=ai,xi=Vn):(Ii=0,xi=0);let Yn=1,ci=1,bi=0,Ci=0;yi&8?(Yn=ci=Bn(Zn,Ai),Ai+=2):yi&64?(Yn=Bn(Zn,Ai),ci=Bn(Zn,Ai+2),Ai+=4):yi&128&&(Yn=Bn(Zn,Ai),bi=Bn(Zn,Ai+2),Ci=Bn(Zn,Ai+4),ci=Bn(Zn,Ai+6),Ai+=8);const Fi=mi.glyphs[Qn];Fi&&(Gn.push({cmd:"save"},{cmd:"transform",args:[Yn,bi,Ci,ci,Ii,xi]}),ii(Fi,Gn,mi),Gn.push({cmd:"restore"}))}while(yi&32);else{const Qn=[];let ai,Vn;for(ai=0;ai<gi;ai++)Qn.push(ui(Zn,Ai)),Ai+=2;const Yn=ui(Zn,Ai);Ai+=2+Yn;const ci=Qn.at(-1)+1,bi=[];for(;bi.length<ci;){yi=Zn[Ai++];let Fi=1;for(yi&8&&(Fi+=Zn[Ai++]);Fi-- >0;)bi.push({flags:yi})}for(ai=0;ai<ci;ai++){switch(bi[ai].flags&18){case 0:Ii+=si(Zn,Ai),Ai+=2;break;case 2:Ii-=Zn[Ai++];break;case 18:Ii+=Zn[Ai++];break}bi[ai].x=Ii}for(ai=0;ai<ci;ai++){switch(bi[ai].flags&36){case 0:xi+=si(Zn,Ai),Ai+=2;break;case 4:xi-=Zn[Ai++];break;case 36:xi+=Zn[Ai++];break}bi[ai].y=xi}let Ci=0;for(Ai=0;Ai<gi;Ai++){const Fi=Qn[Ai],zi=bi.slice(Ci,Fi+1);if(zi[0].flags&1)zi.push(zi[0]);else if(zi.at(-1).flags&1)zi.unshift(zi.at(-1));else{const _i={flags:1,x:(zi[0].x+zi.at(-1).x)/2,y:(zi[0].y+zi.at(-1).y)/2};zi.unshift(_i),zi.push(_i)}for(Wn(zi[0].x,zi[0].y),ai=1,Vn=zi.length;ai<Vn;ai++)zi[ai].flags&1?ni(zi[ai].x,zi[ai].y):zi[ai+1].flags&1?(li(zi[ai].x,zi[ai].y,zi[ai+1].x,zi[ai+1].y),ai++):li(zi[ai].x,zi[ai].y,(zi[ai].x+zi[ai+1].x)/2,(zi[ai].y+zi[ai+1].y)/2);Ci=Fi+1}}}function ri(Zn,Gn,mi,Wn){function ni(ai,Vn){Gn.push({cmd:"moveTo",args:[ai,Vn]})}function li(ai,Vn){Gn.push({cmd:"lineTo",args:[ai,Vn]})}function Ai(ai,Vn,Yn,ci,bi,Ci){Gn.push({cmd:"bezierCurveTo",args:[ai,Vn,Yn,ci,bi,Ci]})}const gi=[];let yi=0,Ii=0,xi=0;function Qn(ai){var Yn;let Vn=0;for(;Vn<ai.length;){let ci=!1,bi=ai[Vn++],Ci,Fi,zi,_i,ji,Pi,Ni,Si,Ti;switch(bi){case 1:xi+=gi.length>>1,ci=!0;break;case 3:xi+=gi.length>>1,ci=!0;break;case 4:Ii+=gi.pop(),ni(yi,Ii),ci=!0;break;case 5:for(;gi.length>0;)yi+=gi.shift(),Ii+=gi.shift(),li(yi,Ii);break;case 6:for(;gi.length>0&&(yi+=gi.shift(),li(yi,Ii),gi.length!==0);)Ii+=gi.shift(),li(yi,Ii);break;case 7:for(;gi.length>0&&(Ii+=gi.shift(),li(yi,Ii),gi.length!==0);)yi+=gi.shift(),li(yi,Ii);break;case 8:for(;gi.length>0;)Ci=yi+gi.shift(),zi=Ii+gi.shift(),Fi=Ci+gi.shift(),_i=zi+gi.shift(),yi=Fi+gi.shift(),Ii=_i+gi.shift(),Ai(Ci,zi,Fi,_i,yi,Ii);break;case 10:if(Si=gi.pop(),Ti=null,mi.isCFFCIDFont){const Ri=mi.fdSelect.getFDIndex(Wn);if(Ri>=0&&Ri<mi.fdArray.length){const Mi=mi.fdArray[Ri];let Ui;(Yn=Mi.privateDict)!=null&&Yn.subrsIndex&&(Ui=Mi.privateDict.subrsIndex.objects),Ui&&(Si+=Nn(Ui),Ti=Ui[Si])}else(0,In.warn)("Invalid fd index for glyph index.")}else Ti=mi.subrs[Si+mi.subrsBias];Ti&&Qn(Ti);break;case 11:return;case 12:switch(bi=ai[Vn++],bi){case 34:Ci=yi+gi.shift(),Fi=Ci+gi.shift(),ji=Ii+gi.shift(),yi=Fi+gi.shift(),Ai(Ci,Ii,Fi,ji,yi,ji),Ci=yi+gi.shift(),Fi=Ci+gi.shift(),yi=Fi+gi.shift(),Ai(Ci,ji,Fi,Ii,yi,Ii);break;case 35:Ci=yi+gi.shift(),zi=Ii+gi.shift(),Fi=Ci+gi.shift(),_i=zi+gi.shift(),yi=Fi+gi.shift(),Ii=_i+gi.shift(),Ai(Ci,zi,Fi,_i,yi,Ii),Ci=yi+gi.shift(),zi=Ii+gi.shift(),Fi=Ci+gi.shift(),_i=zi+gi.shift(),yi=Fi+gi.shift(),Ii=_i+gi.shift(),Ai(Ci,zi,Fi,_i,yi,Ii),gi.pop();break;case 36:Ci=yi+gi.shift(),ji=Ii+gi.shift(),Fi=Ci+gi.shift(),Pi=ji+gi.shift(),yi=Fi+gi.shift(),Ai(Ci,ji,Fi,Pi,yi,Pi),Ci=yi+gi.shift(),Fi=Ci+gi.shift(),Ni=Pi+gi.shift(),yi=Fi+gi.shift(),Ai(Ci,Pi,Fi,Ni,yi,Ii);break;case 37:const Ri=yi,Mi=Ii;Ci=yi+gi.shift(),zi=Ii+gi.shift(),Fi=Ci+gi.shift(),_i=zi+gi.shift(),yi=Fi+gi.shift(),Ii=_i+gi.shift(),Ai(Ci,zi,Fi,_i,yi,Ii),Ci=yi+gi.shift(),zi=Ii+gi.shift(),Fi=Ci+gi.shift(),_i=zi+gi.shift(),yi=Fi,Ii=_i,Math.abs(yi-Ri)>Math.abs(Ii-Mi)?yi+=gi.shift():Ii+=gi.shift(),Ai(Ci,zi,Fi,_i,yi,Ii);break;default:throw new In.FormatError(`unknown operator: 12 ${bi}`)}break;case 14:if(gi.length>=4){const Ri=gi.pop(),Mi=gi.pop();Ii=gi.pop(),yi=gi.pop(),Gn.push({cmd:"save"},{cmd:"translate",args:[yi,Ii]});let Ui=Xn(mi.cmap,String.fromCharCode(mi.glyphNameMap[Cn.StandardEncoding[Ri]]));ri(mi.glyphs[Ui.glyphId],Gn,mi,Ui.glyphId),Gn.push({cmd:"restore"}),Ui=Xn(mi.cmap,String.fromCharCode(mi.glyphNameMap[Cn.StandardEncoding[Mi]])),ri(mi.glyphs[Ui.glyphId],Gn,mi,Ui.glyphId)}return;case 18:xi+=gi.length>>1,ci=!0;break;case 19:xi+=gi.length>>1,Vn+=xi+7>>3,ci=!0;break;case 20:xi+=gi.length>>1,Vn+=xi+7>>3,ci=!0;break;case 21:Ii+=gi.pop(),yi+=gi.pop(),ni(yi,Ii),ci=!0;break;case 22:yi+=gi.pop(),ni(yi,Ii),ci=!0;break;case 23:xi+=gi.length>>1,ci=!0;break;case 24:for(;gi.length>2;)Ci=yi+gi.shift(),zi=Ii+gi.shift(),Fi=Ci+gi.shift(),_i=zi+gi.shift(),yi=Fi+gi.shift(),Ii=_i+gi.shift(),Ai(Ci,zi,Fi,_i,yi,Ii);yi+=gi.shift(),Ii+=gi.shift(),li(yi,Ii);break;case 25:for(;gi.length>6;)yi+=gi.shift(),Ii+=gi.shift(),li(yi,Ii);Ci=yi+gi.shift(),zi=Ii+gi.shift(),Fi=Ci+gi.shift(),_i=zi+gi.shift(),yi=Fi+gi.shift(),Ii=_i+gi.shift(),Ai(Ci,zi,Fi,_i,yi,Ii);break;case 26:for(gi.length%2&&(yi+=gi.shift());gi.length>0;)Ci=yi,zi=Ii+gi.shift(),Fi=Ci+gi.shift(),_i=zi+gi.shift(),yi=Fi,Ii=_i+gi.shift(),Ai(Ci,zi,Fi,_i,yi,Ii);break;case 27:for(gi.length%2&&(Ii+=gi.shift());gi.length>0;)Ci=yi+gi.shift(),zi=Ii,Fi=Ci+gi.shift(),_i=zi+gi.shift(),yi=Fi+gi.shift(),Ii=_i,Ai(Ci,zi,Fi,_i,yi,Ii);break;case 28:gi.push((ai[Vn]<<24|ai[Vn+1]<<16)>>16),Vn+=2;break;case 29:Si=gi.pop()+mi.gsubrsBias,Ti=mi.gsubrs[Si],Ti&&Qn(Ti);break;case 30:for(;gi.length>0&&(Ci=yi,zi=Ii+gi.shift(),Fi=Ci+gi.shift(),_i=zi+gi.shift(),yi=Fi+gi.shift(),Ii=_i+(gi.length===1?gi.shift():0),Ai(Ci,zi,Fi,_i,yi,Ii),gi.length!==0);)Ci=yi+gi.shift(),zi=Ii,Fi=Ci+gi.shift(),_i=zi+gi.shift(),Ii=_i+gi.shift(),yi=Fi+(gi.length===1?gi.shift():0),Ai(Ci,zi,Fi,_i,yi,Ii);break;case 31:for(;gi.length>0&&(Ci=yi+gi.shift(),zi=Ii,Fi=Ci+gi.shift(),_i=zi+gi.shift(),Ii=_i+gi.shift(),yi=Fi+(gi.length===1?gi.shift():0),Ai(Ci,zi,Fi,_i,yi,Ii),gi.length!==0);)Ci=yi,zi=Ii+gi.shift(),Fi=Ci+gi.shift(),_i=zi+gi.shift(),yi=Fi+gi.shift(),Ii=_i+(gi.length===1?gi.shift():0),Ai(Ci,zi,Fi,_i,yi,Ii);break;default:if(bi<32)throw new In.FormatError(`unknown operator: ${bi}`);bi<247?gi.push(bi-139):bi<251?gi.push((bi-247)*256+ai[Vn++]+108):bi<255?gi.push(-(bi-251)*256-ai[Vn++]-108):(gi.push((ai[Vn]<<24|ai[Vn+1]<<16|ai[Vn+2]<<8|ai[Vn+3])/65536),Vn+=4);break}ci&&(gi.length=0)}}Qn(Zn)}const di=[];class fi{constructor(Gn){this.constructor===fi&&(0,In.unreachable)("Cannot initialize CompiledFont."),this.fontMatrix=Gn,this.compiledGlyphs=Object.create(null),this.compiledCharCodeToGlyphId=Object.create(null)}getPathJs(Gn){const{charCode:mi,glyphId:Wn}=Xn(this.cmap,Gn);let ni=this.compiledGlyphs[Wn];if(!ni)try{ni=this.compileGlyph(this.glyphs[Wn],Wn),this.compiledGlyphs[Wn]=ni}catch(li){throw this.compiledGlyphs[Wn]=di,this.compiledCharCodeToGlyphId[mi]===void 0&&(this.compiledCharCodeToGlyphId[mi]=Wn),li}return this.compiledCharCodeToGlyphId[mi]===void 0&&(this.compiledCharCodeToGlyphId[mi]=Wn),ni}compileGlyph(Gn,mi){if(!Gn||Gn.length===0||Gn[0]===14)return di;let Wn=this.fontMatrix;if(this.isCFFCIDFont){const li=this.fdSelect.getFDIndex(mi);li>=0&&li<this.fdArray.length?Wn=this.fdArray[li].getByName("FontMatrix")||In.FONT_IDENTITY_MATRIX:(0,In.warn)("Invalid fd index for glyph index.")}const ni=[{cmd:"save"},{cmd:"transform",args:Wn.slice()},{cmd:"scale",args:["size","-size"]}];return this.compileGlyphImpl(Gn,ni,mi),ni.push({cmd:"restore"}),ni}compileGlyphImpl(){(0,In.unreachable)("Children classes should implement this.")}hasBuiltPath(Gn){const{charCode:mi,glyphId:Wn}=Xn(this.cmap,Gn);return this.compiledGlyphs[Wn]!==void 0&&this.compiledCharCodeToGlyphId[mi]!==void 0}}class wi extends fi{constructor(Gn,mi,Wn){super(Wn||[488e-6,0,0,488e-6,0,0]),this.glyphs=Gn,this.cmap=mi}compileGlyphImpl(Gn,mi){ii(Gn,mi,this)}}class Jn extends fi{constructor(Gn,mi,Wn,ni){super(Wn||[.001,0,0,.001,0,0]),this.glyphs=Gn.glyphs,this.gsubrs=Gn.gsubrs||[],this.subrs=Gn.subrs||[],this.cmap=mi,this.glyphNameMap=ni||(0,jn.getGlyphsUnicode)(),this.gsubrsBias=Nn(this.gsubrs),this.subrsBias=Nn(this.subrs),this.isCFFCIDFont=Gn.isCFFCIDFont,this.fdSelect=Gn.fdSelect,this.fdArray=Gn.fdArray}compileGlyphImpl(Gn,mi,Wn){ri(Gn,mi,this,Wn)}}class pi{static create(Gn,mi){const Wn=new Uint8Array(Gn.data);let ni,li,Ai,gi,yi,Ii;const xi=ui(Wn,4);for(let Qn=0,ai=12;Qn<xi;Qn++,ai+=16){const Vn=(0,In.bytesToString)(Wn.subarray(ai,ai+4)),Yn=Rn(Wn,ai+8),ci=Rn(Wn,ai+12);switch(Vn){case"cmap":ni=Hn(Wn,Yn);break;case"glyf":li=Wn.subarray(Yn,Yn+ci);break;case"loca":Ai=Wn.subarray(Yn,Yn+ci);break;case"head":Ii=ui(Wn,Yn+18),yi=ui(Wn,Yn+50);break;case"CFF ":gi=On(Wn,Yn,Yn+ci,mi);break}}if(li){const Qn=Ii?[1/Ii,0,0,1/Ii,0,0]:Gn.fontMatrix;return new wi(hi(li,Ai,yi),ni,Qn)}return new Jn(gi,ni,Gn.fontMatrix,Gn.glyphNameMap)}}Mn.FontRendererFactory=pi},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.getMetrics=Mn.getFontBasicMetrics=void 0;var In=ti(3);const Ln=(0,In.getLookupTableFactory)(function(Cn){Cn.Courier=600,Cn["Courier-Bold"]=600,Cn["Courier-BoldOblique"]=600,Cn["Courier-Oblique"]=600,Cn.Helvetica=(0,In.getLookupTableFactory)(function(Tn){Tn.space=278,Tn.exclam=278,Tn.quotedbl=355,Tn.numbersign=556,Tn.dollar=556,Tn.percent=889,Tn.ampersand=667,Tn.quoteright=222,Tn.parenleft=333,Tn.parenright=333,Tn.asterisk=389,Tn.plus=584,Tn.comma=278,Tn.hyphen=333,Tn.period=278,Tn.slash=278,Tn.zero=556,Tn.one=556,Tn.two=556,Tn.three=556,Tn.four=556,Tn.five=556,Tn.six=556,Tn.seven=556,Tn.eight=556,Tn.nine=556,Tn.colon=278,Tn.semicolon=278,Tn.less=584,Tn.equal=584,Tn.greater=584,Tn.question=556,Tn.at=1015,Tn.A=667,Tn.B=667,Tn.C=722,Tn.D=722,Tn.E=667,Tn.F=611,Tn.G=778,Tn.H=722,Tn.I=278,Tn.J=500,Tn.K=667,Tn.L=556,Tn.M=833,Tn.N=722,Tn.O=778,Tn.P=667,Tn.Q=778,Tn.R=722,Tn.S=667,Tn.T=611,Tn.U=722,Tn.V=667,Tn.W=944,Tn.X=667,Tn.Y=667,Tn.Z=611,Tn.bracketleft=278,Tn.backslash=278,Tn.bracketright=278,Tn.asciicircum=469,Tn.underscore=556,Tn.quoteleft=222,Tn.a=556,Tn.b=556,Tn.c=500,Tn.d=556,Tn.e=556,Tn.f=278,Tn.g=556,Tn.h=556,Tn.i=222,Tn.j=222,Tn.k=500,Tn.l=222,Tn.m=833,Tn.n=556,Tn.o=556,Tn.p=556,Tn.q=556,Tn.r=333,Tn.s=500,Tn.t=278,Tn.u=556,Tn.v=500,Tn.w=722,Tn.x=500,Tn.y=500,Tn.z=500,Tn.braceleft=334,Tn.bar=260,Tn.braceright=334,Tn.asciitilde=584,Tn.exclamdown=333,Tn.cent=556,Tn.sterling=556,Tn.fraction=167,Tn.yen=556,Tn.florin=556,Tn.section=556,Tn.currency=556,Tn.quotesingle=191,Tn.quotedblleft=333,Tn.guillemotleft=556,Tn.guilsinglleft=333,Tn.guilsinglright=333,Tn.fi=500,Tn.fl=500,Tn.endash=556,Tn.dagger=556,Tn.daggerdbl=556,Tn.periodcentered=278,Tn.paragraph=537,Tn.bullet=350,Tn.quotesinglbase=222,Tn.quotedblbase=333,Tn.quotedblright=333,Tn.guillemotright=556,Tn.ellipsis=1e3,Tn.perthousand=1e3,Tn.questiondown=611,Tn.grave=333,Tn.acute=333,Tn.circumflex=333,Tn.tilde=333,Tn.macron=333,Tn.breve=333,Tn.dotaccent=333,Tn.dieresis=333,Tn.ring=333,Tn.cedilla=333,Tn.hungarumlaut=333,Tn.ogonek=333,Tn.caron=333,Tn.emdash=1e3,Tn.AE=1e3,Tn.ordfeminine=370,Tn.Lslash=556,Tn.Oslash=778,Tn.OE=1e3,Tn.ordmasculine=365,Tn.ae=889,Tn.dotlessi=278,Tn.lslash=222,Tn.oslash=611,Tn.oe=944,Tn.germandbls=611,Tn.Idieresis=278,Tn.eacute=556,Tn.abreve=556,Tn.uhungarumlaut=556,Tn.ecaron=556,Tn.Ydieresis=667,Tn.divide=584,Tn.Yacute=667,Tn.Acircumflex=667,Tn.aacute=556,Tn.Ucircumflex=722,Tn.yacute=500,Tn.scommaaccent=500,Tn.ecircumflex=556,Tn.Uring=722,Tn.Udieresis=722,Tn.aogonek=556,Tn.Uacute=722,Tn.uogonek=556,Tn.Edieresis=667,Tn.Dcroat=722,Tn.commaaccent=250,Tn.copyright=737,Tn.Emacron=667,Tn.ccaron=500,Tn.aring=556,Tn.Ncommaaccent=722,Tn.lacute=222,Tn.agrave=556,Tn.Tcommaaccent=611,Tn.Cacute=722,Tn.atilde=556,Tn.Edotaccent=667,Tn.scaron=500,Tn.scedilla=500,Tn.iacute=278,Tn.lozenge=471,Tn.Rcaron=722,Tn.Gcommaaccent=778,Tn.ucircumflex=556,Tn.acircumflex=556,Tn.Amacron=667,Tn.rcaron=333,Tn.ccedilla=500,Tn.Zdotaccent=611,Tn.Thorn=667,Tn.Omacron=778,Tn.Racute=722,Tn.Sacute=667,Tn.dcaron=643,Tn.Umacron=722,Tn.uring=556,Tn.threesuperior=333,Tn.Ograve=778,Tn.Agrave=667,Tn.Abreve=667,Tn.multiply=584,Tn.uacute=556,Tn.Tcaron=611,Tn.partialdiff=476,Tn.ydieresis=500,Tn.Nacute=722,Tn.icircumflex=278,Tn.Ecircumflex=667,Tn.adieresis=556,Tn.edieresis=556,Tn.cacute=500,Tn.nacute=556,Tn.umacron=556,Tn.Ncaron=722,Tn.Iacute=278,Tn.plusminus=584,Tn.brokenbar=260,Tn.registered=737,Tn.Gbreve=778,Tn.Idotaccent=278,Tn.summation=600,Tn.Egrave=667,Tn.racute=333,Tn.omacron=556,Tn.Zacute=611,Tn.Zcaron=611,Tn.greaterequal=549,Tn.Eth=722,Tn.Ccedilla=722,Tn.lcommaaccent=222,Tn.tcaron=317,Tn.eogonek=556,Tn.Uogonek=722,Tn.Aacute=667,Tn.Adieresis=667,Tn.egrave=556,Tn.zacute=500,Tn.iogonek=222,Tn.Oacute=778,Tn.oacute=556,Tn.amacron=556,Tn.sacute=500,Tn.idieresis=278,Tn.Ocircumflex=778,Tn.Ugrave=722,Tn.Delta=612,Tn.thorn=556,Tn.twosuperior=333,Tn.Odieresis=778,Tn.mu=556,Tn.igrave=278,Tn.ohungarumlaut=556,Tn.Eogonek=667,Tn.dcroat=556,Tn.threequarters=834,Tn.Scedilla=667,Tn.lcaron=299,Tn.Kcommaaccent=667,Tn.Lacute=556,Tn.trademark=1e3,Tn.edotaccent=556,Tn.Igrave=278,Tn.Imacron=278,Tn.Lcaron=556,Tn.onehalf=834,Tn.lessequal=549,Tn.ocircumflex=556,Tn.ntilde=556,Tn.Uhungarumlaut=722,Tn.Eacute=667,Tn.emacron=556,Tn.gbreve=556,Tn.onequarter=834,Tn.Scaron=667,Tn.Scommaaccent=667,Tn.Ohungarumlaut=778,Tn.degree=400,Tn.ograve=556,Tn.Ccaron=722,Tn.ugrave=556,Tn.radical=453,Tn.Dcaron=722,Tn.rcommaaccent=333,Tn.Ntilde=722,Tn.otilde=556,Tn.Rcommaaccent=722,Tn.Lcommaaccent=556,Tn.Atilde=667,Tn.Aogonek=667,Tn.Aring=667,Tn.Otilde=778,Tn.zdotaccent=500,Tn.Ecaron=667,Tn.Iogonek=278,Tn.kcommaaccent=500,Tn.minus=584,Tn.Icircumflex=278,Tn.ncaron=556,Tn.tcommaaccent=278,Tn.logicalnot=584,Tn.odieresis=556,Tn.udieresis=556,Tn.notequal=549,Tn.gcommaaccent=556,Tn.eth=556,Tn.zcaron=500,Tn.ncommaaccent=556,Tn.onesuperior=333,Tn.imacron=278,Tn.Euro=556}),Cn["Helvetica-Bold"]=(0,In.getLookupTableFactory)(function(Tn){Tn.space=278,Tn.exclam=333,Tn.quotedbl=474,Tn.numbersign=556,Tn.dollar=556,Tn.percent=889,Tn.ampersand=722,Tn.quoteright=278,Tn.parenleft=333,Tn.parenright=333,Tn.asterisk=389,Tn.plus=584,Tn.comma=278,Tn.hyphen=333,Tn.period=278,Tn.slash=278,Tn.zero=556,Tn.one=556,Tn.two=556,Tn.three=556,Tn.four=556,Tn.five=556,Tn.six=556,Tn.seven=556,Tn.eight=556,Tn.nine=556,Tn.colon=333,Tn.semicolon=333,Tn.less=584,Tn.equal=584,Tn.greater=584,Tn.question=611,Tn.at=975,Tn.A=722,Tn.B=722,Tn.C=722,Tn.D=722,Tn.E=667,Tn.F=611,Tn.G=778,Tn.H=722,Tn.I=278,Tn.J=556,Tn.K=722,Tn.L=611,Tn.M=833,Tn.N=722,Tn.O=778,Tn.P=667,Tn.Q=778,Tn.R=722,Tn.S=667,Tn.T=611,Tn.U=722,Tn.V=667,Tn.W=944,Tn.X=667,Tn.Y=667,Tn.Z=611,Tn.bracketleft=333,Tn.backslash=278,Tn.bracketright=333,Tn.asciicircum=584,Tn.underscore=556,Tn.quoteleft=278,Tn.a=556,Tn.b=611,Tn.c=556,Tn.d=611,Tn.e=556,Tn.f=333,Tn.g=611,Tn.h=611,Tn.i=278,Tn.j=278,Tn.k=556,Tn.l=278,Tn.m=889,Tn.n=611,Tn.o=611,Tn.p=611,Tn.q=611,Tn.r=389,Tn.s=556,Tn.t=333,Tn.u=611,Tn.v=556,Tn.w=778,Tn.x=556,Tn.y=556,Tn.z=500,Tn.braceleft=389,Tn.bar=280,Tn.braceright=389,Tn.asciitilde=584,Tn.exclamdown=333,Tn.cent=556,Tn.sterling=556,Tn.fraction=167,Tn.yen=556,Tn.florin=556,Tn.section=556,Tn.currency=556,Tn.quotesingle=238,Tn.quotedblleft=500,Tn.guillemotleft=556,Tn.guilsinglleft=333,Tn.guilsinglright=333,Tn.fi=611,Tn.fl=611,Tn.endash=556,Tn.dagger=556,Tn.daggerdbl=556,Tn.periodcentered=278,Tn.paragraph=556,Tn.bullet=350,Tn.quotesinglbase=278,Tn.quotedblbase=500,Tn.quotedblright=500,Tn.guillemotright=556,Tn.ellipsis=1e3,Tn.perthousand=1e3,Tn.questiondown=611,Tn.grave=333,Tn.acute=333,Tn.circumflex=333,Tn.tilde=333,Tn.macron=333,Tn.breve=333,Tn.dotaccent=333,Tn.dieresis=333,Tn.ring=333,Tn.cedilla=333,Tn.hungarumlaut=333,Tn.ogonek=333,Tn.caron=333,Tn.emdash=1e3,Tn.AE=1e3,Tn.ordfeminine=370,Tn.Lslash=611,Tn.Oslash=778,Tn.OE=1e3,Tn.ordmasculine=365,Tn.ae=889,Tn.dotlessi=278,Tn.lslash=278,Tn.oslash=611,Tn.oe=944,Tn.germandbls=611,Tn.Idieresis=278,Tn.eacute=556,Tn.abreve=556,Tn.uhungarumlaut=611,Tn.ecaron=556,Tn.Ydieresis=667,Tn.divide=584,Tn.Yacute=667,Tn.Acircumflex=722,Tn.aacute=556,Tn.Ucircumflex=722,Tn.yacute=556,Tn.scommaaccent=556,Tn.ecircumflex=556,Tn.Uring=722,Tn.Udieresis=722,Tn.aogonek=556,Tn.Uacute=722,Tn.uogonek=611,Tn.Edieresis=667,Tn.Dcroat=722,Tn.commaaccent=250,Tn.copyright=737,Tn.Emacron=667,Tn.ccaron=556,Tn.aring=556,Tn.Ncommaaccent=722,Tn.lacute=278,Tn.agrave=556,Tn.Tcommaaccent=611,Tn.Cacute=722,Tn.atilde=556,Tn.Edotaccent=667,Tn.scaron=556,Tn.scedilla=556,Tn.iacute=278,Tn.lozenge=494,Tn.Rcaron=722,Tn.Gcommaaccent=778,Tn.ucircumflex=611,Tn.acircumflex=556,Tn.Amacron=722,Tn.rcaron=389,Tn.ccedilla=556,Tn.Zdotaccent=611,Tn.Thorn=667,Tn.Omacron=778,Tn.Racute=722,Tn.Sacute=667,Tn.dcaron=743,Tn.Umacron=722,Tn.uring=611,Tn.threesuperior=333,Tn.Ograve=778,Tn.Agrave=722,Tn.Abreve=722,Tn.multiply=584,Tn.uacute=611,Tn.Tcaron=611,Tn.partialdiff=494,Tn.ydieresis=556,Tn.Nacute=722,Tn.icircumflex=278,Tn.Ecircumflex=667,Tn.adieresis=556,Tn.edieresis=556,Tn.cacute=556,Tn.nacute=611,Tn.umacron=611,Tn.Ncaron=722,Tn.Iacute=278,Tn.plusminus=584,Tn.brokenbar=280,Tn.registered=737,Tn.Gbreve=778,Tn.Idotaccent=278,Tn.summation=600,Tn.Egrave=667,Tn.racute=389,Tn.omacron=611,Tn.Zacute=611,Tn.Zcaron=611,Tn.greaterequal=549,Tn.Eth=722,Tn.Ccedilla=722,Tn.lcommaaccent=278,Tn.tcaron=389,Tn.eogonek=556,Tn.Uogonek=722,Tn.Aacute=722,Tn.Adieresis=722,Tn.egrave=556,Tn.zacute=500,Tn.iogonek=278,Tn.Oacute=778,Tn.oacute=611,Tn.amacron=556,Tn.sacute=556,Tn.idieresis=278,Tn.Ocircumflex=778,Tn.Ugrave=722,Tn.Delta=612,Tn.thorn=611,Tn.twosuperior=333,Tn.Odieresis=778,Tn.mu=611,Tn.igrave=278,Tn.ohungarumlaut=611,Tn.Eogonek=667,Tn.dcroat=611,Tn.threequarters=834,Tn.Scedilla=667,Tn.lcaron=400,Tn.Kcommaaccent=722,Tn.Lacute=611,Tn.trademark=1e3,Tn.edotaccent=556,Tn.Igrave=278,Tn.Imacron=278,Tn.Lcaron=611,Tn.onehalf=834,Tn.lessequal=549,Tn.ocircumflex=611,Tn.ntilde=611,Tn.Uhungarumlaut=722,Tn.Eacute=667,Tn.emacron=556,Tn.gbreve=611,Tn.onequarter=834,Tn.Scaron=667,Tn.Scommaaccent=667,Tn.Ohungarumlaut=778,Tn.degree=400,Tn.ograve=611,Tn.Ccaron=722,Tn.ugrave=611,Tn.radical=549,Tn.Dcaron=722,Tn.rcommaaccent=389,Tn.Ntilde=722,Tn.otilde=611,Tn.Rcommaaccent=722,Tn.Lcommaaccent=611,Tn.Atilde=722,Tn.Aogonek=722,Tn.Aring=722,Tn.Otilde=778,Tn.zdotaccent=500,Tn.Ecaron=667,Tn.Iogonek=278,Tn.kcommaaccent=556,Tn.minus=584,Tn.Icircumflex=278,Tn.ncaron=611,Tn.tcommaaccent=333,Tn.logicalnot=584,Tn.odieresis=611,Tn.udieresis=611,Tn.notequal=549,Tn.gcommaaccent=611,Tn.eth=611,Tn.zcaron=500,Tn.ncommaaccent=611,Tn.onesuperior=333,Tn.imacron=278,Tn.Euro=556}),Cn["Helvetica-BoldOblique"]=(0,In.getLookupTableFactory)(function(Tn){Tn.space=278,Tn.exclam=333,Tn.quotedbl=474,Tn.numbersign=556,Tn.dollar=556,Tn.percent=889,Tn.ampersand=722,Tn.quoteright=278,Tn.parenleft=333,Tn.parenright=333,Tn.asterisk=389,Tn.plus=584,Tn.comma=278,Tn.hyphen=333,Tn.period=278,Tn.slash=278,Tn.zero=556,Tn.one=556,Tn.two=556,Tn.three=556,Tn.four=556,Tn.five=556,Tn.six=556,Tn.seven=556,Tn.eight=556,Tn.nine=556,Tn.colon=333,Tn.semicolon=333,Tn.less=584,Tn.equal=584,Tn.greater=584,Tn.question=611,Tn.at=975,Tn.A=722,Tn.B=722,Tn.C=722,Tn.D=722,Tn.E=667,Tn.F=611,Tn.G=778,Tn.H=722,Tn.I=278,Tn.J=556,Tn.K=722,Tn.L=611,Tn.M=833,Tn.N=722,Tn.O=778,Tn.P=667,Tn.Q=778,Tn.R=722,Tn.S=667,Tn.T=611,Tn.U=722,Tn.V=667,Tn.W=944,Tn.X=667,Tn.Y=667,Tn.Z=611,Tn.bracketleft=333,Tn.backslash=278,Tn.bracketright=333,Tn.asciicircum=584,Tn.underscore=556,Tn.quoteleft=278,Tn.a=556,Tn.b=611,Tn.c=556,Tn.d=611,Tn.e=556,Tn.f=333,Tn.g=611,Tn.h=611,Tn.i=278,Tn.j=278,Tn.k=556,Tn.l=278,Tn.m=889,Tn.n=611,Tn.o=611,Tn.p=611,Tn.q=611,Tn.r=389,Tn.s=556,Tn.t=333,Tn.u=611,Tn.v=556,Tn.w=778,Tn.x=556,Tn.y=556,Tn.z=500,Tn.braceleft=389,Tn.bar=280,Tn.braceright=389,Tn.asciitilde=584,Tn.exclamdown=333,Tn.cent=556,Tn.sterling=556,Tn.fraction=167,Tn.yen=556,Tn.florin=556,Tn.section=556,Tn.currency=556,Tn.quotesingle=238,Tn.quotedblleft=500,Tn.guillemotleft=556,Tn.guilsinglleft=333,Tn.guilsinglright=333,Tn.fi=611,Tn.fl=611,Tn.endash=556,Tn.dagger=556,Tn.daggerdbl=556,Tn.periodcentered=278,Tn.paragraph=556,Tn.bullet=350,Tn.quotesinglbase=278,Tn.quotedblbase=500,Tn.quotedblright=500,Tn.guillemotright=556,Tn.ellipsis=1e3,Tn.perthousand=1e3,Tn.questiondown=611,Tn.grave=333,Tn.acute=333,Tn.circumflex=333,Tn.tilde=333,Tn.macron=333,Tn.breve=333,Tn.dotaccent=333,Tn.dieresis=333,Tn.ring=333,Tn.cedilla=333,Tn.hungarumlaut=333,Tn.ogonek=333,Tn.caron=333,Tn.emdash=1e3,Tn.AE=1e3,Tn.ordfeminine=370,Tn.Lslash=611,Tn.Oslash=778,Tn.OE=1e3,Tn.ordmasculine=365,Tn.ae=889,Tn.dotlessi=278,Tn.lslash=278,Tn.oslash=611,Tn.oe=944,Tn.germandbls=611,Tn.Idieresis=278,Tn.eacute=556,Tn.abreve=556,Tn.uhungarumlaut=611,Tn.ecaron=556,Tn.Ydieresis=667,Tn.divide=584,Tn.Yacute=667,Tn.Acircumflex=722,Tn.aacute=556,Tn.Ucircumflex=722,Tn.yacute=556,Tn.scommaaccent=556,Tn.ecircumflex=556,Tn.Uring=722,Tn.Udieresis=722,Tn.aogonek=556,Tn.Uacute=722,Tn.uogonek=611,Tn.Edieresis=667,Tn.Dcroat=722,Tn.commaaccent=250,Tn.copyright=737,Tn.Emacron=667,Tn.ccaron=556,Tn.aring=556,Tn.Ncommaaccent=722,Tn.lacute=278,Tn.agrave=556,Tn.Tcommaaccent=611,Tn.Cacute=722,Tn.atilde=556,Tn.Edotaccent=667,Tn.scaron=556,Tn.scedilla=556,Tn.iacute=278,Tn.lozenge=494,Tn.Rcaron=722,Tn.Gcommaaccent=778,Tn.ucircumflex=611,Tn.acircumflex=556,Tn.Amacron=722,Tn.rcaron=389,Tn.ccedilla=556,Tn.Zdotaccent=611,Tn.Thorn=667,Tn.Omacron=778,Tn.Racute=722,Tn.Sacute=667,Tn.dcaron=743,Tn.Umacron=722,Tn.uring=611,Tn.threesuperior=333,Tn.Ograve=778,Tn.Agrave=722,Tn.Abreve=722,Tn.multiply=584,Tn.uacute=611,Tn.Tcaron=611,Tn.partialdiff=494,Tn.ydieresis=556,Tn.Nacute=722,Tn.icircumflex=278,Tn.Ecircumflex=667,Tn.adieresis=556,Tn.edieresis=556,Tn.cacute=556,Tn.nacute=611,Tn.umacron=611,Tn.Ncaron=722,Tn.Iacute=278,Tn.plusminus=584,Tn.brokenbar=280,Tn.registered=737,Tn.Gbreve=778,Tn.Idotaccent=278,Tn.summation=600,Tn.Egrave=667,Tn.racute=389,Tn.omacron=611,Tn.Zacute=611,Tn.Zcaron=611,Tn.greaterequal=549,Tn.Eth=722,Tn.Ccedilla=722,Tn.lcommaaccent=278,Tn.tcaron=389,Tn.eogonek=556,Tn.Uogonek=722,Tn.Aacute=722,Tn.Adieresis=722,Tn.egrave=556,Tn.zacute=500,Tn.iogonek=278,Tn.Oacute=778,Tn.oacute=611,Tn.amacron=556,Tn.sacute=556,Tn.idieresis=278,Tn.Ocircumflex=778,Tn.Ugrave=722,Tn.Delta=612,Tn.thorn=611,Tn.twosuperior=333,Tn.Odieresis=778,Tn.mu=611,Tn.igrave=278,Tn.ohungarumlaut=611,Tn.Eogonek=667,Tn.dcroat=611,Tn.threequarters=834,Tn.Scedilla=667,Tn.lcaron=400,Tn.Kcommaaccent=722,Tn.Lacute=611,Tn.trademark=1e3,Tn.edotaccent=556,Tn.Igrave=278,Tn.Imacron=278,Tn.Lcaron=611,Tn.onehalf=834,Tn.lessequal=549,Tn.ocircumflex=611,Tn.ntilde=611,Tn.Uhungarumlaut=722,Tn.Eacute=667,Tn.emacron=556,Tn.gbreve=611,Tn.onequarter=834,Tn.Scaron=667,Tn.Scommaaccent=667,Tn.Ohungarumlaut=778,Tn.degree=400,Tn.ograve=611,Tn.Ccaron=722,Tn.ugrave=611,Tn.radical=549,Tn.Dcaron=722,Tn.rcommaaccent=389,Tn.Ntilde=722,Tn.otilde=611,Tn.Rcommaaccent=722,Tn.Lcommaaccent=611,Tn.Atilde=722,Tn.Aogonek=722,Tn.Aring=722,Tn.Otilde=778,Tn.zdotaccent=500,Tn.Ecaron=667,Tn.Iogonek=278,Tn.kcommaaccent=556,Tn.minus=584,Tn.Icircumflex=278,Tn.ncaron=611,Tn.tcommaaccent=333,Tn.logicalnot=584,Tn.odieresis=611,Tn.udieresis=611,Tn.notequal=549,Tn.gcommaaccent=611,Tn.eth=611,Tn.zcaron=500,Tn.ncommaaccent=611,Tn.onesuperior=333,Tn.imacron=278,Tn.Euro=556}),Cn["Helvetica-Oblique"]=(0,In.getLookupTableFactory)(function(Tn){Tn.space=278,Tn.exclam=278,Tn.quotedbl=355,Tn.numbersign=556,Tn.dollar=556,Tn.percent=889,Tn.ampersand=667,Tn.quoteright=222,Tn.parenleft=333,Tn.parenright=333,Tn.asterisk=389,Tn.plus=584,Tn.comma=278,Tn.hyphen=333,Tn.period=278,Tn.slash=278,Tn.zero=556,Tn.one=556,Tn.two=556,Tn.three=556,Tn.four=556,Tn.five=556,Tn.six=556,Tn.seven=556,Tn.eight=556,Tn.nine=556,Tn.colon=278,Tn.semicolon=278,Tn.less=584,Tn.equal=584,Tn.greater=584,Tn.question=556,Tn.at=1015,Tn.A=667,Tn.B=667,Tn.C=722,Tn.D=722,Tn.E=667,Tn.F=611,Tn.G=778,Tn.H=722,Tn.I=278,Tn.J=500,Tn.K=667,Tn.L=556,Tn.M=833,Tn.N=722,Tn.O=778,Tn.P=667,Tn.Q=778,Tn.R=722,Tn.S=667,Tn.T=611,Tn.U=722,Tn.V=667,Tn.W=944,Tn.X=667,Tn.Y=667,Tn.Z=611,Tn.bracketleft=278,Tn.backslash=278,Tn.bracketright=278,Tn.asciicircum=469,Tn.underscore=556,Tn.quoteleft=222,Tn.a=556,Tn.b=556,Tn.c=500,Tn.d=556,Tn.e=556,Tn.f=278,Tn.g=556,Tn.h=556,Tn.i=222,Tn.j=222,Tn.k=500,Tn.l=222,Tn.m=833,Tn.n=556,Tn.o=556,Tn.p=556,Tn.q=556,Tn.r=333,Tn.s=500,Tn.t=278,Tn.u=556,Tn.v=500,Tn.w=722,Tn.x=500,Tn.y=500,Tn.z=500,Tn.braceleft=334,Tn.bar=260,Tn.braceright=334,Tn.asciitilde=584,Tn.exclamdown=333,Tn.cent=556,Tn.sterling=556,Tn.fraction=167,Tn.yen=556,Tn.florin=556,Tn.section=556,Tn.currency=556,Tn.quotesingle=191,Tn.quotedblleft=333,Tn.guillemotleft=556,Tn.guilsinglleft=333,Tn.guilsinglright=333,Tn.fi=500,Tn.fl=500,Tn.endash=556,Tn.dagger=556,Tn.daggerdbl=556,Tn.periodcentered=278,Tn.paragraph=537,Tn.bullet=350,Tn.quotesinglbase=222,Tn.quotedblbase=333,Tn.quotedblright=333,Tn.guillemotright=556,Tn.ellipsis=1e3,Tn.perthousand=1e3,Tn.questiondown=611,Tn.grave=333,Tn.acute=333,Tn.circumflex=333,Tn.tilde=333,Tn.macron=333,Tn.breve=333,Tn.dotaccent=333,Tn.dieresis=333,Tn.ring=333,Tn.cedilla=333,Tn.hungarumlaut=333,Tn.ogonek=333,Tn.caron=333,Tn.emdash=1e3,Tn.AE=1e3,Tn.ordfeminine=370,Tn.Lslash=556,Tn.Oslash=778,Tn.OE=1e3,Tn.ordmasculine=365,Tn.ae=889,Tn.dotlessi=278,Tn.lslash=222,Tn.oslash=611,Tn.oe=944,Tn.germandbls=611,Tn.Idieresis=278,Tn.eacute=556,Tn.abreve=556,Tn.uhungarumlaut=556,Tn.ecaron=556,Tn.Ydieresis=667,Tn.divide=584,Tn.Yacute=667,Tn.Acircumflex=667,Tn.aacute=556,Tn.Ucircumflex=722,Tn.yacute=500,Tn.scommaaccent=500,Tn.ecircumflex=556,Tn.Uring=722,Tn.Udieresis=722,Tn.aogonek=556,Tn.Uacute=722,Tn.uogonek=556,Tn.Edieresis=667,Tn.Dcroat=722,Tn.commaaccent=250,Tn.copyright=737,Tn.Emacron=667,Tn.ccaron=500,Tn.aring=556,Tn.Ncommaaccent=722,Tn.lacute=222,Tn.agrave=556,Tn.Tcommaaccent=611,Tn.Cacute=722,Tn.atilde=556,Tn.Edotaccent=667,Tn.scaron=500,Tn.scedilla=500,Tn.iacute=278,Tn.lozenge=471,Tn.Rcaron=722,Tn.Gcommaaccent=778,Tn.ucircumflex=556,Tn.acircumflex=556,Tn.Amacron=667,Tn.rcaron=333,Tn.ccedilla=500,Tn.Zdotaccent=611,Tn.Thorn=667,Tn.Omacron=778,Tn.Racute=722,Tn.Sacute=667,Tn.dcaron=643,Tn.Umacron=722,Tn.uring=556,Tn.threesuperior=333,Tn.Ograve=778,Tn.Agrave=667,Tn.Abreve=667,Tn.multiply=584,Tn.uacute=556,Tn.Tcaron=611,Tn.partialdiff=476,Tn.ydieresis=500,Tn.Nacute=722,Tn.icircumflex=278,Tn.Ecircumflex=667,Tn.adieresis=556,Tn.edieresis=556,Tn.cacute=500,Tn.nacute=556,Tn.umacron=556,Tn.Ncaron=722,Tn.Iacute=278,Tn.plusminus=584,Tn.brokenbar=260,Tn.registered=737,Tn.Gbreve=778,Tn.Idotaccent=278,Tn.summation=600,Tn.Egrave=667,Tn.racute=333,Tn.omacron=556,Tn.Zacute=611,Tn.Zcaron=611,Tn.greaterequal=549,Tn.Eth=722,Tn.Ccedilla=722,Tn.lcommaaccent=222,Tn.tcaron=317,Tn.eogonek=556,Tn.Uogonek=722,Tn.Aacute=667,Tn.Adieresis=667,Tn.egrave=556,Tn.zacute=500,Tn.iogonek=222,Tn.Oacute=778,Tn.oacute=556,Tn.amacron=556,Tn.sacute=500,Tn.idieresis=278,Tn.Ocircumflex=778,Tn.Ugrave=722,Tn.Delta=612,Tn.thorn=556,Tn.twosuperior=333,Tn.Odieresis=778,Tn.mu=556,Tn.igrave=278,Tn.ohungarumlaut=556,Tn.Eogonek=667,Tn.dcroat=556,Tn.threequarters=834,Tn.Scedilla=667,Tn.lcaron=299,Tn.Kcommaaccent=667,Tn.Lacute=556,Tn.trademark=1e3,Tn.edotaccent=556,Tn.Igrave=278,Tn.Imacron=278,Tn.Lcaron=556,Tn.onehalf=834,Tn.lessequal=549,Tn.ocircumflex=556,Tn.ntilde=556,Tn.Uhungarumlaut=722,Tn.Eacute=667,Tn.emacron=556,Tn.gbreve=556,Tn.onequarter=834,Tn.Scaron=667,Tn.Scommaaccent=667,Tn.Ohungarumlaut=778,Tn.degree=400,Tn.ograve=556,Tn.Ccaron=722,Tn.ugrave=556,Tn.radical=453,Tn.Dcaron=722,Tn.rcommaaccent=333,Tn.Ntilde=722,Tn.otilde=556,Tn.Rcommaaccent=722,Tn.Lcommaaccent=556,Tn.Atilde=667,Tn.Aogonek=667,Tn.Aring=667,Tn.Otilde=778,Tn.zdotaccent=500,Tn.Ecaron=667,Tn.Iogonek=278,Tn.kcommaaccent=500,Tn.minus=584,Tn.Icircumflex=278,Tn.ncaron=556,Tn.tcommaaccent=278,Tn.logicalnot=584,Tn.odieresis=556,Tn.udieresis=556,Tn.notequal=549,Tn.gcommaaccent=556,Tn.eth=556,Tn.zcaron=500,Tn.ncommaaccent=556,Tn.onesuperior=333,Tn.imacron=278,Tn.Euro=556}),Cn.Symbol=(0,In.getLookupTableFactory)(function(Tn){Tn.space=250,Tn.exclam=333,Tn.universal=713,Tn.numbersign=500,Tn.existential=549,Tn.percent=833,Tn.ampersand=778,Tn.suchthat=439,Tn.parenleft=333,Tn.parenright=333,Tn.asteriskmath=500,Tn.plus=549,Tn.comma=250,Tn.minus=549,Tn.period=250,Tn.slash=278,Tn.zero=500,Tn.one=500,Tn.two=500,Tn.three=500,Tn.four=500,Tn.five=500,Tn.six=500,Tn.seven=500,Tn.eight=500,Tn.nine=500,Tn.colon=278,Tn.semicolon=278,Tn.less=549,Tn.equal=549,Tn.greater=549,Tn.question=444,Tn.congruent=549,Tn.Alpha=722,Tn.Beta=667,Tn.Chi=722,Tn.Delta=612,Tn.Epsilon=611,Tn.Phi=763,Tn.Gamma=603,Tn.Eta=722,Tn.Iota=333,Tn.theta1=631,Tn.Kappa=722,Tn.Lambda=686,Tn.Mu=889,Tn.Nu=722,Tn.Omicron=722,Tn.Pi=768,Tn.Theta=741,Tn.Rho=556,Tn.Sigma=592,Tn.Tau=611,Tn.Upsilon=690,Tn.sigma1=439,Tn.Omega=768,Tn.Xi=645,Tn.Psi=795,Tn.Zeta=611,Tn.bracketleft=333,Tn.therefore=863,Tn.bracketright=333,Tn.perpendicular=658,Tn.underscore=500,Tn.radicalex=500,Tn.alpha=631,Tn.beta=549,Tn.chi=549,Tn.delta=494,Tn.epsilon=439,Tn.phi=521,Tn.gamma=411,Tn.eta=603,Tn.iota=329,Tn.phi1=603,Tn.kappa=549,Tn.lambda=549,Tn.mu=576,Tn.nu=521,Tn.omicron=549,Tn.pi=549,Tn.theta=521,Tn.rho=549,Tn.sigma=603,Tn.tau=439,Tn.upsilon=576,Tn.omega1=713,Tn.omega=686,Tn.xi=493,Tn.psi=686,Tn.zeta=494,Tn.braceleft=480,Tn.bar=200,Tn.braceright=480,Tn.similar=549,Tn.Euro=750,Tn.Upsilon1=620,Tn.minute=247,Tn.lessequal=549,Tn.fraction=167,Tn.infinity=713,Tn.florin=500,Tn.club=753,Tn.diamond=753,Tn.heart=753,Tn.spade=753,Tn.arrowboth=1042,Tn.arrowleft=987,Tn.arrowup=603,Tn.arrowright=987,Tn.arrowdown=603,Tn.degree=400,Tn.plusminus=549,Tn.second=411,Tn.greaterequal=549,Tn.multiply=549,Tn.proportional=713,Tn.partialdiff=494,Tn.bullet=460,Tn.divide=549,Tn.notequal=549,Tn.equivalence=549,Tn.approxequal=549,Tn.ellipsis=1e3,Tn.arrowvertex=603,Tn.arrowhorizex=1e3,Tn.carriagereturn=658,Tn.aleph=823,Tn.Ifraktur=686,Tn.Rfraktur=795,Tn.weierstrass=987,Tn.circlemultiply=768,Tn.circleplus=768,Tn.emptyset=823,Tn.intersection=768,Tn.union=768,Tn.propersuperset=713,Tn.reflexsuperset=713,Tn.notsubset=713,Tn.propersubset=713,Tn.reflexsubset=713,Tn.element=713,Tn.notelement=713,Tn.angle=768,Tn.gradient=713,Tn.registerserif=790,Tn.copyrightserif=790,Tn.trademarkserif=890,Tn.product=823,Tn.radical=549,Tn.dotmath=250,Tn.logicalnot=713,Tn.logicaland=603,Tn.logicalor=603,Tn.arrowdblboth=1042,Tn.arrowdblleft=987,Tn.arrowdblup=603,Tn.arrowdblright=987,Tn.arrowdbldown=603,Tn.lozenge=494,Tn.angleleft=329,Tn.registersans=790,Tn.copyrightsans=790,Tn.trademarksans=786,Tn.summation=713,Tn.parenlefttp=384,Tn.parenleftex=384,Tn.parenleftbt=384,Tn.bracketlefttp=384,Tn.bracketleftex=384,Tn.bracketleftbt=384,Tn.bracelefttp=494,Tn.braceleftmid=494,Tn.braceleftbt=494,Tn.braceex=494,Tn.angleright=329,Tn.integral=274,Tn.integraltp=686,Tn.integralex=686,Tn.integralbt=686,Tn.parenrighttp=384,Tn.parenrightex=384,Tn.parenrightbt=384,Tn.bracketrighttp=384,Tn.bracketrightex=384,Tn.bracketrightbt=384,Tn.bracerighttp=494,Tn.bracerightmid=494,Tn.bracerightbt=494,Tn.apple=790}),Cn["Times-Roman"]=(0,In.getLookupTableFactory)(function(Tn){Tn.space=250,Tn.exclam=333,Tn.quotedbl=408,Tn.numbersign=500,Tn.dollar=500,Tn.percent=833,Tn.ampersand=778,Tn.quoteright=333,Tn.parenleft=333,Tn.parenright=333,Tn.asterisk=500,Tn.plus=564,Tn.comma=250,Tn.hyphen=333,Tn.period=250,Tn.slash=278,Tn.zero=500,Tn.one=500,Tn.two=500,Tn.three=500,Tn.four=500,Tn.five=500,Tn.six=500,Tn.seven=500,Tn.eight=500,Tn.nine=500,Tn.colon=278,Tn.semicolon=278,Tn.less=564,Tn.equal=564,Tn.greater=564,Tn.question=444,Tn.at=921,Tn.A=722,Tn.B=667,Tn.C=667,Tn.D=722,Tn.E=611,Tn.F=556,Tn.G=722,Tn.H=722,Tn.I=333,Tn.J=389,Tn.K=722,Tn.L=611,Tn.M=889,Tn.N=722,Tn.O=722,Tn.P=556,Tn.Q=722,Tn.R=667,Tn.S=556,Tn.T=611,Tn.U=722,Tn.V=722,Tn.W=944,Tn.X=722,Tn.Y=722,Tn.Z=611,Tn.bracketleft=333,Tn.backslash=278,Tn.bracketright=333,Tn.asciicircum=469,Tn.underscore=500,Tn.quoteleft=333,Tn.a=444,Tn.b=500,Tn.c=444,Tn.d=500,Tn.e=444,Tn.f=333,Tn.g=500,Tn.h=500,Tn.i=278,Tn.j=278,Tn.k=500,Tn.l=278,Tn.m=778,Tn.n=500,Tn.o=500,Tn.p=500,Tn.q=500,Tn.r=333,Tn.s=389,Tn.t=278,Tn.u=500,Tn.v=500,Tn.w=722,Tn.x=500,Tn.y=500,Tn.z=444,Tn.braceleft=480,Tn.bar=200,Tn.braceright=480,Tn.asciitilde=541,Tn.exclamdown=333,Tn.cent=500,Tn.sterling=500,Tn.fraction=167,Tn.yen=500,Tn.florin=500,Tn.section=500,Tn.currency=500,Tn.quotesingle=180,Tn.quotedblleft=444,Tn.guillemotleft=500,Tn.guilsinglleft=333,Tn.guilsinglright=333,Tn.fi=556,Tn.fl=556,Tn.endash=500,Tn.dagger=500,Tn.daggerdbl=500,Tn.periodcentered=250,Tn.paragraph=453,Tn.bullet=350,Tn.quotesinglbase=333,Tn.quotedblbase=444,Tn.quotedblright=444,Tn.guillemotright=500,Tn.ellipsis=1e3,Tn.perthousand=1e3,Tn.questiondown=444,Tn.grave=333,Tn.acute=333,Tn.circumflex=333,Tn.tilde=333,Tn.macron=333,Tn.breve=333,Tn.dotaccent=333,Tn.dieresis=333,Tn.ring=333,Tn.cedilla=333,Tn.hungarumlaut=333,Tn.ogonek=333,Tn.caron=333,Tn.emdash=1e3,Tn.AE=889,Tn.ordfeminine=276,Tn.Lslash=611,Tn.Oslash=722,Tn.OE=889,Tn.ordmasculine=310,Tn.ae=667,Tn.dotlessi=278,Tn.lslash=278,Tn.oslash=500,Tn.oe=722,Tn.germandbls=500,Tn.Idieresis=333,Tn.eacute=444,Tn.abreve=444,Tn.uhungarumlaut=500,Tn.ecaron=444,Tn.Ydieresis=722,Tn.divide=564,Tn.Yacute=722,Tn.Acircumflex=722,Tn.aacute=444,Tn.Ucircumflex=722,Tn.yacute=500,Tn.scommaaccent=389,Tn.ecircumflex=444,Tn.Uring=722,Tn.Udieresis=722,Tn.aogonek=444,Tn.Uacute=722,Tn.uogonek=500,Tn.Edieresis=611,Tn.Dcroat=722,Tn.commaaccent=250,Tn.copyright=760,Tn.Emacron=611,Tn.ccaron=444,Tn.aring=444,Tn.Ncommaaccent=722,Tn.lacute=278,Tn.agrave=444,Tn.Tcommaaccent=611,Tn.Cacute=667,Tn.atilde=444,Tn.Edotaccent=611,Tn.scaron=389,Tn.scedilla=389,Tn.iacute=278,Tn.lozenge=471,Tn.Rcaron=667,Tn.Gcommaaccent=722,Tn.ucircumflex=500,Tn.acircumflex=444,Tn.Amacron=722,Tn.rcaron=333,Tn.ccedilla=444,Tn.Zdotaccent=611,Tn.Thorn=556,Tn.Omacron=722,Tn.Racute=667,Tn.Sacute=556,Tn.dcaron=588,Tn.Umacron=722,Tn.uring=500,Tn.threesuperior=300,Tn.Ograve=722,Tn.Agrave=722,Tn.Abreve=722,Tn.multiply=564,Tn.uacute=500,Tn.Tcaron=611,Tn.partialdiff=476,Tn.ydieresis=500,Tn.Nacute=722,Tn.icircumflex=278,Tn.Ecircumflex=611,Tn.adieresis=444,Tn.edieresis=444,Tn.cacute=444,Tn.nacute=500,Tn.umacron=500,Tn.Ncaron=722,Tn.Iacute=333,Tn.plusminus=564,Tn.brokenbar=200,Tn.registered=760,Tn.Gbreve=722,Tn.Idotaccent=333,Tn.summation=600,Tn.Egrave=611,Tn.racute=333,Tn.omacron=500,Tn.Zacute=611,Tn.Zcaron=611,Tn.greaterequal=549,Tn.Eth=722,Tn.Ccedilla=667,Tn.lcommaaccent=278,Tn.tcaron=326,Tn.eogonek=444,Tn.Uogonek=722,Tn.Aacute=722,Tn.Adieresis=722,Tn.egrave=444,Tn.zacute=444,Tn.iogonek=278,Tn.Oacute=722,Tn.oacute=500,Tn.amacron=444,Tn.sacute=389,Tn.idieresis=278,Tn.Ocircumflex=722,Tn.Ugrave=722,Tn.Delta=612,Tn.thorn=500,Tn.twosuperior=300,Tn.Odieresis=722,Tn.mu=500,Tn.igrave=278,Tn.ohungarumlaut=500,Tn.Eogonek=611,Tn.dcroat=500,Tn.threequarters=750,Tn.Scedilla=556,Tn.lcaron=344,Tn.Kcommaaccent=722,Tn.Lacute=611,Tn.trademark=980,Tn.edotaccent=444,Tn.Igrave=333,Tn.Imacron=333,Tn.Lcaron=611,Tn.onehalf=750,Tn.lessequal=549,Tn.ocircumflex=500,Tn.ntilde=500,Tn.Uhungarumlaut=722,Tn.Eacute=611,Tn.emacron=444,Tn.gbreve=500,Tn.onequarter=750,Tn.Scaron=556,Tn.Scommaaccent=556,Tn.Ohungarumlaut=722,Tn.degree=400,Tn.ograve=500,Tn.Ccaron=667,Tn.ugrave=500,Tn.radical=453,Tn.Dcaron=722,Tn.rcommaaccent=333,Tn.Ntilde=722,Tn.otilde=500,Tn.Rcommaaccent=667,Tn.Lcommaaccent=611,Tn.Atilde=722,Tn.Aogonek=722,Tn.Aring=722,Tn.Otilde=722,Tn.zdotaccent=444,Tn.Ecaron=611,Tn.Iogonek=333,Tn.kcommaaccent=500,Tn.minus=564,Tn.Icircumflex=333,Tn.ncaron=500,Tn.tcommaaccent=278,Tn.logicalnot=564,Tn.odieresis=500,Tn.udieresis=500,Tn.notequal=549,Tn.gcommaaccent=500,Tn.eth=500,Tn.zcaron=444,Tn.ncommaaccent=500,Tn.onesuperior=300,Tn.imacron=278,Tn.Euro=500}),Cn["Times-Bold"]=(0,In.getLookupTableFactory)(function(Tn){Tn.space=250,Tn.exclam=333,Tn.quotedbl=555,Tn.numbersign=500,Tn.dollar=500,Tn.percent=1e3,Tn.ampersand=833,Tn.quoteright=333,Tn.parenleft=333,Tn.parenright=333,Tn.asterisk=500,Tn.plus=570,Tn.comma=250,Tn.hyphen=333,Tn.period=250,Tn.slash=278,Tn.zero=500,Tn.one=500,Tn.two=500,Tn.three=500,Tn.four=500,Tn.five=500,Tn.six=500,Tn.seven=500,Tn.eight=500,Tn.nine=500,Tn.colon=333,Tn.semicolon=333,Tn.less=570,Tn.equal=570,Tn.greater=570,Tn.question=500,Tn.at=930,Tn.A=722,Tn.B=667,Tn.C=722,Tn.D=722,Tn.E=667,Tn.F=611,Tn.G=778,Tn.H=778,Tn.I=389,Tn.J=500,Tn.K=778,Tn.L=667,Tn.M=944,Tn.N=722,Tn.O=778,Tn.P=611,Tn.Q=778,Tn.R=722,Tn.S=556,Tn.T=667,Tn.U=722,Tn.V=722,Tn.W=1e3,Tn.X=722,Tn.Y=722,Tn.Z=667,Tn.bracketleft=333,Tn.backslash=278,Tn.bracketright=333,Tn.asciicircum=581,Tn.underscore=500,Tn.quoteleft=333,Tn.a=500,Tn.b=556,Tn.c=444,Tn.d=556,Tn.e=444,Tn.f=333,Tn.g=500,Tn.h=556,Tn.i=278,Tn.j=333,Tn.k=556,Tn.l=278,Tn.m=833,Tn.n=556,Tn.o=500,Tn.p=556,Tn.q=556,Tn.r=444,Tn.s=389,Tn.t=333,Tn.u=556,Tn.v=500,Tn.w=722,Tn.x=500,Tn.y=500,Tn.z=444,Tn.braceleft=394,Tn.bar=220,Tn.braceright=394,Tn.asciitilde=520,Tn.exclamdown=333,Tn.cent=500,Tn.sterling=500,Tn.fraction=167,Tn.yen=500,Tn.florin=500,Tn.section=500,Tn.currency=500,Tn.quotesingle=278,Tn.quotedblleft=500,Tn.guillemotleft=500,Tn.guilsinglleft=333,Tn.guilsinglright=333,Tn.fi=556,Tn.fl=556,Tn.endash=500,Tn.dagger=500,Tn.daggerdbl=500,Tn.periodcentered=250,Tn.paragraph=540,Tn.bullet=350,Tn.quotesinglbase=333,Tn.quotedblbase=500,Tn.quotedblright=500,Tn.guillemotright=500,Tn.ellipsis=1e3,Tn.perthousand=1e3,Tn.questiondown=500,Tn.grave=333,Tn.acute=333,Tn.circumflex=333,Tn.tilde=333,Tn.macron=333,Tn.breve=333,Tn.dotaccent=333,Tn.dieresis=333,Tn.ring=333,Tn.cedilla=333,Tn.hungarumlaut=333,Tn.ogonek=333,Tn.caron=333,Tn.emdash=1e3,Tn.AE=1e3,Tn.ordfeminine=300,Tn.Lslash=667,Tn.Oslash=778,Tn.OE=1e3,Tn.ordmasculine=330,Tn.ae=722,Tn.dotlessi=278,Tn.lslash=278,Tn.oslash=500,Tn.oe=722,Tn.germandbls=556,Tn.Idieresis=389,Tn.eacute=444,Tn.abreve=500,Tn.uhungarumlaut=556,Tn.ecaron=444,Tn.Ydieresis=722,Tn.divide=570,Tn.Yacute=722,Tn.Acircumflex=722,Tn.aacute=500,Tn.Ucircumflex=722,Tn.yacute=500,Tn.scommaaccent=389,Tn.ecircumflex=444,Tn.Uring=722,Tn.Udieresis=722,Tn.aogonek=500,Tn.Uacute=722,Tn.uogonek=556,Tn.Edieresis=667,Tn.Dcroat=722,Tn.commaaccent=250,Tn.copyright=747,Tn.Emacron=667,Tn.ccaron=444,Tn.aring=500,Tn.Ncommaaccent=722,Tn.lacute=278,Tn.agrave=500,Tn.Tcommaaccent=667,Tn.Cacute=722,Tn.atilde=500,Tn.Edotaccent=667,Tn.scaron=389,Tn.scedilla=389,Tn.iacute=278,Tn.lozenge=494,Tn.Rcaron=722,Tn.Gcommaaccent=778,Tn.ucircumflex=556,Tn.acircumflex=500,Tn.Amacron=722,Tn.rcaron=444,Tn.ccedilla=444,Tn.Zdotaccent=667,Tn.Thorn=611,Tn.Omacron=778,Tn.Racute=722,Tn.Sacute=556,Tn.dcaron=672,Tn.Umacron=722,Tn.uring=556,Tn.threesuperior=300,Tn.Ograve=778,Tn.Agrave=722,Tn.Abreve=722,Tn.multiply=570,Tn.uacute=556,Tn.Tcaron=667,Tn.partialdiff=494,Tn.ydieresis=500,Tn.Nacute=722,Tn.icircumflex=278,Tn.Ecircumflex=667,Tn.adieresis=500,Tn.edieresis=444,Tn.cacute=444,Tn.nacute=556,Tn.umacron=556,Tn.Ncaron=722,Tn.Iacute=389,Tn.plusminus=570,Tn.brokenbar=220,Tn.registered=747,Tn.Gbreve=778,Tn.Idotaccent=389,Tn.summation=600,Tn.Egrave=667,Tn.racute=444,Tn.omacron=500,Tn.Zacute=667,Tn.Zcaron=667,Tn.greaterequal=549,Tn.Eth=722,Tn.Ccedilla=722,Tn.lcommaaccent=278,Tn.tcaron=416,Tn.eogonek=444,Tn.Uogonek=722,Tn.Aacute=722,Tn.Adieresis=722,Tn.egrave=444,Tn.zacute=444,Tn.iogonek=278,Tn.Oacute=778,Tn.oacute=500,Tn.amacron=500,Tn.sacute=389,Tn.idieresis=278,Tn.Ocircumflex=778,Tn.Ugrave=722,Tn.Delta=612,Tn.thorn=556,Tn.twosuperior=300,Tn.Odieresis=778,Tn.mu=556,Tn.igrave=278,Tn.ohungarumlaut=500,Tn.Eogonek=667,Tn.dcroat=556,Tn.threequarters=750,Tn.Scedilla=556,Tn.lcaron=394,Tn.Kcommaaccent=778,Tn.Lacute=667,Tn.trademark=1e3,Tn.edotaccent=444,Tn.Igrave=389,Tn.Imacron=389,Tn.Lcaron=667,Tn.onehalf=750,Tn.lessequal=549,Tn.ocircumflex=500,Tn.ntilde=556,Tn.Uhungarumlaut=722,Tn.Eacute=667,Tn.emacron=444,Tn.gbreve=500,Tn.onequarter=750,Tn.Scaron=556,Tn.Scommaaccent=556,Tn.Ohungarumlaut=778,Tn.degree=400,Tn.ograve=500,Tn.Ccaron=722,Tn.ugrave=556,Tn.radical=549,Tn.Dcaron=722,Tn.rcommaaccent=444,Tn.Ntilde=722,Tn.otilde=500,Tn.Rcommaaccent=722,Tn.Lcommaaccent=667,Tn.Atilde=722,Tn.Aogonek=722,Tn.Aring=722,Tn.Otilde=778,Tn.zdotaccent=444,Tn.Ecaron=667,Tn.Iogonek=389,Tn.kcommaaccent=556,Tn.minus=570,Tn.Icircumflex=389,Tn.ncaron=556,Tn.tcommaaccent=333,Tn.logicalnot=570,Tn.odieresis=500,Tn.udieresis=556,Tn.notequal=549,Tn.gcommaaccent=500,Tn.eth=500,Tn.zcaron=444,Tn.ncommaaccent=556,Tn.onesuperior=300,Tn.imacron=278,Tn.Euro=500}),Cn["Times-BoldItalic"]=(0,In.getLookupTableFactory)(function(Tn){Tn.space=250,Tn.exclam=389,Tn.quotedbl=555,Tn.numbersign=500,Tn.dollar=500,Tn.percent=833,Tn.ampersand=778,Tn.quoteright=333,Tn.parenleft=333,Tn.parenright=333,Tn.asterisk=500,Tn.plus=570,Tn.comma=250,Tn.hyphen=333,Tn.period=250,Tn.slash=278,Tn.zero=500,Tn.one=500,Tn.two=500,Tn.three=500,Tn.four=500,Tn.five=500,Tn.six=500,Tn.seven=500,Tn.eight=500,Tn.nine=500,Tn.colon=333,Tn.semicolon=333,Tn.less=570,Tn.equal=570,Tn.greater=570,Tn.question=500,Tn.at=832,Tn.A=667,Tn.B=667,Tn.C=667,Tn.D=722,Tn.E=667,Tn.F=667,Tn.G=722,Tn.H=778,Tn.I=389,Tn.J=500,Tn.K=667,Tn.L=611,Tn.M=889,Tn.N=722,Tn.O=722,Tn.P=611,Tn.Q=722,Tn.R=667,Tn.S=556,Tn.T=611,Tn.U=722,Tn.V=667,Tn.W=889,Tn.X=667,Tn.Y=611,Tn.Z=611,Tn.bracketleft=333,Tn.backslash=278,Tn.bracketright=333,Tn.asciicircum=570,Tn.underscore=500,Tn.quoteleft=333,Tn.a=500,Tn.b=500,Tn.c=444,Tn.d=500,Tn.e=444,Tn.f=333,Tn.g=500,Tn.h=556,Tn.i=278,Tn.j=278,Tn.k=500,Tn.l=278,Tn.m=778,Tn.n=556,Tn.o=500,Tn.p=500,Tn.q=500,Tn.r=389,Tn.s=389,Tn.t=278,Tn.u=556,Tn.v=444,Tn.w=667,Tn.x=500,Tn.y=444,Tn.z=389,Tn.braceleft=348,Tn.bar=220,Tn.braceright=348,Tn.asciitilde=570,Tn.exclamdown=389,Tn.cent=500,Tn.sterling=500,Tn.fraction=167,Tn.yen=500,Tn.florin=500,Tn.section=500,Tn.currency=500,Tn.quotesingle=278,Tn.quotedblleft=500,Tn.guillemotleft=500,Tn.guilsinglleft=333,Tn.guilsinglright=333,Tn.fi=556,Tn.fl=556,Tn.endash=500,Tn.dagger=500,Tn.daggerdbl=500,Tn.periodcentered=250,Tn.paragraph=500,Tn.bullet=350,Tn.quotesinglbase=333,Tn.quotedblbase=500,Tn.quotedblright=500,Tn.guillemotright=500,Tn.ellipsis=1e3,Tn.perthousand=1e3,Tn.questiondown=500,Tn.grave=333,Tn.acute=333,Tn.circumflex=333,Tn.tilde=333,Tn.macron=333,Tn.breve=333,Tn.dotaccent=333,Tn.dieresis=333,Tn.ring=333,Tn.cedilla=333,Tn.hungarumlaut=333,Tn.ogonek=333,Tn.caron=333,Tn.emdash=1e3,Tn.AE=944,Tn.ordfeminine=266,Tn.Lslash=611,Tn.Oslash=722,Tn.OE=944,Tn.ordmasculine=300,Tn.ae=722,Tn.dotlessi=278,Tn.lslash=278,Tn.oslash=500,Tn.oe=722,Tn.germandbls=500,Tn.Idieresis=389,Tn.eacute=444,Tn.abreve=500,Tn.uhungarumlaut=556,Tn.ecaron=444,Tn.Ydieresis=611,Tn.divide=570,Tn.Yacute=611,Tn.Acircumflex=667,Tn.aacute=500,Tn.Ucircumflex=722,Tn.yacute=444,Tn.scommaaccent=389,Tn.ecircumflex=444,Tn.Uring=722,Tn.Udieresis=722,Tn.aogonek=500,Tn.Uacute=722,Tn.uogonek=556,Tn.Edieresis=667,Tn.Dcroat=722,Tn.commaaccent=250,Tn.copyright=747,Tn.Emacron=667,Tn.ccaron=444,Tn.aring=500,Tn.Ncommaaccent=722,Tn.lacute=278,Tn.agrave=500,Tn.Tcommaaccent=611,Tn.Cacute=667,Tn.atilde=500,Tn.Edotaccent=667,Tn.scaron=389,Tn.scedilla=389,Tn.iacute=278,Tn.lozenge=494,Tn.Rcaron=667,Tn.Gcommaaccent=722,Tn.ucircumflex=556,Tn.acircumflex=500,Tn.Amacron=667,Tn.rcaron=389,Tn.ccedilla=444,Tn.Zdotaccent=611,Tn.Thorn=611,Tn.Omacron=722,Tn.Racute=667,Tn.Sacute=556,Tn.dcaron=608,Tn.Umacron=722,Tn.uring=556,Tn.threesuperior=300,Tn.Ograve=722,Tn.Agrave=667,Tn.Abreve=667,Tn.multiply=570,Tn.uacute=556,Tn.Tcaron=611,Tn.partialdiff=494,Tn.ydieresis=444,Tn.Nacute=722,Tn.icircumflex=278,Tn.Ecircumflex=667,Tn.adieresis=500,Tn.edieresis=444,Tn.cacute=444,Tn.nacute=556,Tn.umacron=556,Tn.Ncaron=722,Tn.Iacute=389,Tn.plusminus=570,Tn.brokenbar=220,Tn.registered=747,Tn.Gbreve=722,Tn.Idotaccent=389,Tn.summation=600,Tn.Egrave=667,Tn.racute=389,Tn.omacron=500,Tn.Zacute=611,Tn.Zcaron=611,Tn.greaterequal=549,Tn.Eth=722,Tn.Ccedilla=667,Tn.lcommaaccent=278,Tn.tcaron=366,Tn.eogonek=444,Tn.Uogonek=722,Tn.Aacute=667,Tn.Adieresis=667,Tn.egrave=444,Tn.zacute=389,Tn.iogonek=278,Tn.Oacute=722,Tn.oacute=500,Tn.amacron=500,Tn.sacute=389,Tn.idieresis=278,Tn.Ocircumflex=722,Tn.Ugrave=722,Tn.Delta=612,Tn.thorn=500,Tn.twosuperior=300,Tn.Odieresis=722,Tn.mu=576,Tn.igrave=278,Tn.ohungarumlaut=500,Tn.Eogonek=667,Tn.dcroat=500,Tn.threequarters=750,Tn.Scedilla=556,Tn.lcaron=382,Tn.Kcommaaccent=667,Tn.Lacute=611,Tn.trademark=1e3,Tn.edotaccent=444,Tn.Igrave=389,Tn.Imacron=389,Tn.Lcaron=611,Tn.onehalf=750,Tn.lessequal=549,Tn.ocircumflex=500,Tn.ntilde=556,Tn.Uhungarumlaut=722,Tn.Eacute=667,Tn.emacron=444,Tn.gbreve=500,Tn.onequarter=750,Tn.Scaron=556,Tn.Scommaaccent=556,Tn.Ohungarumlaut=722,Tn.degree=400,Tn.ograve=500,Tn.Ccaron=667,Tn.ugrave=556,Tn.radical=549,Tn.Dcaron=722,Tn.rcommaaccent=389,Tn.Ntilde=722,Tn.otilde=500,Tn.Rcommaaccent=667,Tn.Lcommaaccent=611,Tn.Atilde=667,Tn.Aogonek=667,Tn.Aring=667,Tn.Otilde=722,Tn.zdotaccent=389,Tn.Ecaron=667,Tn.Iogonek=389,Tn.kcommaaccent=500,Tn.minus=606,Tn.Icircumflex=389,Tn.ncaron=556,Tn.tcommaaccent=278,Tn.logicalnot=606,Tn.odieresis=500,Tn.udieresis=556,Tn.notequal=549,Tn.gcommaaccent=500,Tn.eth=500,Tn.zcaron=389,Tn.ncommaaccent=556,Tn.onesuperior=300,Tn.imacron=278,Tn.Euro=500}),Cn["Times-Italic"]=(0,In.getLookupTableFactory)(function(Tn){Tn.space=250,Tn.exclam=333,Tn.quotedbl=420,Tn.numbersign=500,Tn.dollar=500,Tn.percent=833,Tn.ampersand=778,Tn.quoteright=333,Tn.parenleft=333,Tn.parenright=333,Tn.asterisk=500,Tn.plus=675,Tn.comma=250,Tn.hyphen=333,Tn.period=250,Tn.slash=278,Tn.zero=500,Tn.one=500,Tn.two=500,Tn.three=500,Tn.four=500,Tn.five=500,Tn.six=500,Tn.seven=500,Tn.eight=500,Tn.nine=500,Tn.colon=333,Tn.semicolon=333,Tn.less=675,Tn.equal=675,Tn.greater=675,Tn.question=500,Tn.at=920,Tn.A=611,Tn.B=611,Tn.C=667,Tn.D=722,Tn.E=611,Tn.F=611,Tn.G=722,Tn.H=722,Tn.I=333,Tn.J=444,Tn.K=667,Tn.L=556,Tn.M=833,Tn.N=667,Tn.O=722,Tn.P=611,Tn.Q=722,Tn.R=611,Tn.S=500,Tn.T=556,Tn.U=722,Tn.V=611,Tn.W=833,Tn.X=611,Tn.Y=556,Tn.Z=556,Tn.bracketleft=389,Tn.backslash=278,Tn.bracketright=389,Tn.asciicircum=422,Tn.underscore=500,Tn.quoteleft=333,Tn.a=500,Tn.b=500,Tn.c=444,Tn.d=500,Tn.e=444,Tn.f=278,Tn.g=500,Tn.h=500,Tn.i=278,Tn.j=278,Tn.k=444,Tn.l=278,Tn.m=722,Tn.n=500,Tn.o=500,Tn.p=500,Tn.q=500,Tn.r=389,Tn.s=389,Tn.t=278,Tn.u=500,Tn.v=444,Tn.w=667,Tn.x=444,Tn.y=444,Tn.z=389,Tn.braceleft=400,Tn.bar=275,Tn.braceright=400,Tn.asciitilde=541,Tn.exclamdown=389,Tn.cent=500,Tn.sterling=500,Tn.fraction=167,Tn.yen=500,Tn.florin=500,Tn.section=500,Tn.currency=500,Tn.quotesingle=214,Tn.quotedblleft=556,Tn.guillemotleft=500,Tn.guilsinglleft=333,Tn.guilsinglright=333,Tn.fi=500,Tn.fl=500,Tn.endash=500,Tn.dagger=500,Tn.daggerdbl=500,Tn.periodcentered=250,Tn.paragraph=523,Tn.bullet=350,Tn.quotesinglbase=333,Tn.quotedblbase=556,Tn.quotedblright=556,Tn.guillemotright=500,Tn.ellipsis=889,Tn.perthousand=1e3,Tn.questiondown=500,Tn.grave=333,Tn.acute=333,Tn.circumflex=333,Tn.tilde=333,Tn.macron=333,Tn.breve=333,Tn.dotaccent=333,Tn.dieresis=333,Tn.ring=333,Tn.cedilla=333,Tn.hungarumlaut=333,Tn.ogonek=333,Tn.caron=333,Tn.emdash=889,Tn.AE=889,Tn.ordfeminine=276,Tn.Lslash=556,Tn.Oslash=722,Tn.OE=944,Tn.ordmasculine=310,Tn.ae=667,Tn.dotlessi=278,Tn.lslash=278,Tn.oslash=500,Tn.oe=667,Tn.germandbls=500,Tn.Idieresis=333,Tn.eacute=444,Tn.abreve=500,Tn.uhungarumlaut=500,Tn.ecaron=444,Tn.Ydieresis=556,Tn.divide=675,Tn.Yacute=556,Tn.Acircumflex=611,Tn.aacute=500,Tn.Ucircumflex=722,Tn.yacute=444,Tn.scommaaccent=389,Tn.ecircumflex=444,Tn.Uring=722,Tn.Udieresis=722,Tn.aogonek=500,Tn.Uacute=722,Tn.uogonek=500,Tn.Edieresis=611,Tn.Dcroat=722,Tn.commaaccent=250,Tn.copyright=760,Tn.Emacron=611,Tn.ccaron=444,Tn.aring=500,Tn.Ncommaaccent=667,Tn.lacute=278,Tn.agrave=500,Tn.Tcommaaccent=556,Tn.Cacute=667,Tn.atilde=500,Tn.Edotaccent=611,Tn.scaron=389,Tn.scedilla=389,Tn.iacute=278,Tn.lozenge=471,Tn.Rcaron=611,Tn.Gcommaaccent=722,Tn.ucircumflex=500,Tn.acircumflex=500,Tn.Amacron=611,Tn.rcaron=389,Tn.ccedilla=444,Tn.Zdotaccent=556,Tn.Thorn=611,Tn.Omacron=722,Tn.Racute=611,Tn.Sacute=500,Tn.dcaron=544,Tn.Umacron=722,Tn.uring=500,Tn.threesuperior=300,Tn.Ograve=722,Tn.Agrave=611,Tn.Abreve=611,Tn.multiply=675,Tn.uacute=500,Tn.Tcaron=556,Tn.partialdiff=476,Tn.ydieresis=444,Tn.Nacute=667,Tn.icircumflex=278,Tn.Ecircumflex=611,Tn.adieresis=500,Tn.edieresis=444,Tn.cacute=444,Tn.nacute=500,Tn.umacron=500,Tn.Ncaron=667,Tn.Iacute=333,Tn.plusminus=675,Tn.brokenbar=275,Tn.registered=760,Tn.Gbreve=722,Tn.Idotaccent=333,Tn.summation=600,Tn.Egrave=611,Tn.racute=389,Tn.omacron=500,Tn.Zacute=556,Tn.Zcaron=556,Tn.greaterequal=549,Tn.Eth=722,Tn.Ccedilla=667,Tn.lcommaaccent=278,Tn.tcaron=300,Tn.eogonek=444,Tn.Uogonek=722,Tn.Aacute=611,Tn.Adieresis=611,Tn.egrave=444,Tn.zacute=389,Tn.iogonek=278,Tn.Oacute=722,Tn.oacute=500,Tn.amacron=500,Tn.sacute=389,Tn.idieresis=278,Tn.Ocircumflex=722,Tn.Ugrave=722,Tn.Delta=612,Tn.thorn=500,Tn.twosuperior=300,Tn.Odieresis=722,Tn.mu=500,Tn.igrave=278,Tn.ohungarumlaut=500,Tn.Eogonek=611,Tn.dcroat=500,Tn.threequarters=750,Tn.Scedilla=500,Tn.lcaron=300,Tn.Kcommaaccent=667,Tn.Lacute=556,Tn.trademark=980,Tn.edotaccent=444,Tn.Igrave=333,Tn.Imacron=333,Tn.Lcaron=611,Tn.onehalf=750,Tn.lessequal=549,Tn.ocircumflex=500,Tn.ntilde=500,Tn.Uhungarumlaut=722,Tn.Eacute=611,Tn.emacron=444,Tn.gbreve=500,Tn.onequarter=750,Tn.Scaron=500,Tn.Scommaaccent=500,Tn.Ohungarumlaut=722,Tn.degree=400,Tn.ograve=500,Tn.Ccaron=667,Tn.ugrave=500,Tn.radical=453,Tn.Dcaron=722,Tn.rcommaaccent=389,Tn.Ntilde=667,Tn.otilde=500,Tn.Rcommaaccent=611,Tn.Lcommaaccent=556,Tn.Atilde=611,Tn.Aogonek=611,Tn.Aring=611,Tn.Otilde=722,Tn.zdotaccent=389,Tn.Ecaron=611,Tn.Iogonek=333,Tn.kcommaaccent=444,Tn.minus=675,Tn.Icircumflex=333,Tn.ncaron=500,Tn.tcommaaccent=278,Tn.logicalnot=675,Tn.odieresis=500,Tn.udieresis=500,Tn.notequal=549,Tn.gcommaaccent=500,Tn.eth=500,Tn.zcaron=389,Tn.ncommaaccent=500,Tn.onesuperior=300,Tn.imacron=278,Tn.Euro=500}),Cn.ZapfDingbats=(0,In.getLookupTableFactory)(function(Tn){Tn.space=278,Tn.a1=974,Tn.a2=961,Tn.a202=974,Tn.a3=980,Tn.a4=719,Tn.a5=789,Tn.a119=790,Tn.a118=791,Tn.a117=690,Tn.a11=960,Tn.a12=939,Tn.a13=549,Tn.a14=855,Tn.a15=911,Tn.a16=933,Tn.a105=911,Tn.a17=945,Tn.a18=974,Tn.a19=755,Tn.a20=846,Tn.a21=762,Tn.a22=761,Tn.a23=571,Tn.a24=677,Tn.a25=763,Tn.a26=760,Tn.a27=759,Tn.a28=754,Tn.a6=494,Tn.a7=552,Tn.a8=537,Tn.a9=577,Tn.a10=692,Tn.a29=786,Tn.a30=788,Tn.a31=788,Tn.a32=790,Tn.a33=793,Tn.a34=794,Tn.a35=816,Tn.a36=823,Tn.a37=789,Tn.a38=841,Tn.a39=823,Tn.a40=833,Tn.a41=816,Tn.a42=831,Tn.a43=923,Tn.a44=744,Tn.a45=723,Tn.a46=749,Tn.a47=790,Tn.a48=792,Tn.a49=695,Tn.a50=776,Tn.a51=768,Tn.a52=792,Tn.a53=759,Tn.a54=707,Tn.a55=708,Tn.a56=682,Tn.a57=701,Tn.a58=826,Tn.a59=815,Tn.a60=789,Tn.a61=789,Tn.a62=707,Tn.a63=687,Tn.a64=696,Tn.a65=689,Tn.a66=786,Tn.a67=787,Tn.a68=713,Tn.a69=791,Tn.a70=785,Tn.a71=791,Tn.a72=873,Tn.a73=761,Tn.a74=762,Tn.a203=762,Tn.a75=759,Tn.a204=759,Tn.a76=892,Tn.a77=892,Tn.a78=788,Tn.a79=784,Tn.a81=438,Tn.a82=138,Tn.a83=277,Tn.a84=415,Tn.a97=392,Tn.a98=392,Tn.a99=668,Tn.a100=668,Tn.a89=390,Tn.a90=390,Tn.a93=317,Tn.a94=317,Tn.a91=276,Tn.a92=276,Tn.a205=509,Tn.a85=509,Tn.a206=410,Tn.a86=410,Tn.a87=234,Tn.a88=234,Tn.a95=334,Tn.a96=334,Tn.a101=732,Tn.a102=544,Tn.a103=544,Tn.a104=910,Tn.a106=667,Tn.a107=760,Tn.a108=760,Tn.a112=776,Tn.a111=595,Tn.a110=694,Tn.a109=626,Tn.a120=788,Tn.a121=788,Tn.a122=788,Tn.a123=788,Tn.a124=788,Tn.a125=788,Tn.a126=788,Tn.a127=788,Tn.a128=788,Tn.a129=788,Tn.a130=788,Tn.a131=788,Tn.a132=788,Tn.a133=788,Tn.a134=788,Tn.a135=788,Tn.a136=788,Tn.a137=788,Tn.a138=788,Tn.a139=788,Tn.a140=788,Tn.a141=788,Tn.a142=788,Tn.a143=788,Tn.a144=788,Tn.a145=788,Tn.a146=788,Tn.a147=788,Tn.a148=788,Tn.a149=788,Tn.a150=788,Tn.a151=788,Tn.a152=788,Tn.a153=788,Tn.a154=788,Tn.a155=788,Tn.a156=788,Tn.a157=788,Tn.a158=788,Tn.a159=788,Tn.a160=894,Tn.a161=838,Tn.a163=1016,Tn.a164=458,Tn.a196=748,Tn.a165=924,Tn.a192=748,Tn.a166=918,Tn.a167=927,Tn.a168=928,Tn.a169=928,Tn.a170=834,Tn.a171=873,Tn.a172=828,Tn.a173=924,Tn.a162=924,Tn.a174=917,Tn.a175=930,Tn.a176=931,Tn.a177=463,Tn.a178=883,Tn.a179=836,Tn.a193=836,Tn.a180=867,Tn.a199=867,Tn.a181=696,Tn.a200=696,Tn.a182=874,Tn.a201=874,Tn.a183=760,Tn.a184=946,Tn.a197=771,Tn.a185=865,Tn.a194=771,Tn.a198=888,Tn.a186=967,Tn.a195=888,Tn.a187=831,Tn.a188=873,Tn.a189=927,Tn.a190=970,Tn.a191=918})});Mn.getMetrics=Ln;const jn=(0,In.getLookupTableFactory)(function(Cn){Cn.Courier={ascent:629,descent:-157,capHeight:562,xHeight:-426},Cn["Courier-Bold"]={ascent:629,descent:-157,capHeight:562,xHeight:439},Cn["Courier-Oblique"]={ascent:629,descent:-157,capHeight:562,xHeight:426},Cn["Courier-BoldOblique"]={ascent:629,descent:-157,capHeight:562,xHeight:426},Cn.Helvetica={ascent:718,descent:-207,capHeight:718,xHeight:523},Cn["Helvetica-Bold"]={ascent:718,descent:-207,capHeight:718,xHeight:532},Cn["Helvetica-Oblique"]={ascent:718,descent:-207,capHeight:718,xHeight:523},Cn["Helvetica-BoldOblique"]={ascent:718,descent:-207,capHeight:718,xHeight:532},Cn["Times-Roman"]={ascent:683,descent:-217,capHeight:662,xHeight:450},Cn["Times-Bold"]={ascent:683,descent:-217,capHeight:676,xHeight:461},Cn["Times-Italic"]={ascent:683,descent:-217,capHeight:653,xHeight:441},Cn["Times-BoldItalic"]={ascent:683,descent:-217,capHeight:669,xHeight:462},Cn.Symbol={ascent:Math.NaN,descent:Math.NaN,capHeight:Math.NaN,xHeight:Math.NaN},Cn.ZapfDingbats={ascent:Math.NaN,descent:Math.NaN,capHeight:Math.NaN,xHeight:Math.NaN}});Mn.getFontBasicMetrics=jn},(oi,Mn)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.GlyfTable=void 0;const ti=1,In=2,Ln=4,jn=8,Cn=16,Tn=32,Rn=64,ui=1,si=2,ei=8,Bn=32,Nn=64,Hn=128,On=256;class hi{constructor({glyfTable:Jn,isGlyphLocationsLong:pi,locaTable:Zn,numGlyphs:Gn}){this.glyphs=[];const mi=new DataView(Zn.buffer,Zn.byteOffset,Zn.byteLength),Wn=new DataView(Jn.buffer,Jn.byteOffset,Jn.byteLength),ni=pi?4:2;let li=pi?mi.getUint32(0):2*mi.getUint16(0),Ai=0;for(let gi=0;gi<Gn;gi++){Ai+=ni;const yi=pi?mi.getUint32(Ai):2*mi.getUint16(Ai);if(yi===li){this.glyphs.push(new Xn({}));continue}const Ii=Xn.parse(li,Wn);this.glyphs.push(Ii),li=yi}}getSize(){return this.glyphs.reduce((Jn,pi)=>{const Zn=pi.getSize();return Jn+(Zn+3&-4)},0)}write(){const Jn=this.getSize(),pi=new DataView(new ArrayBuffer(Jn)),Zn=Jn>131070,Gn=Zn?4:2,mi=new DataView(new ArrayBuffer((this.glyphs.length+1)*Gn));Zn?mi.setUint32(0,0):mi.setUint16(0,0);let Wn=0,ni=0;for(const li of this.glyphs)Wn+=li.write(Wn,pi),Wn=Wn+3&-4,ni+=Gn,Zn?mi.setUint32(ni,Wn):mi.setUint16(ni,Wn>>1);return{isLocationLong:Zn,loca:new Uint8Array(mi.buffer),glyf:new Uint8Array(pi.buffer)}}scale(Jn){for(let pi=0,Zn=this.glyphs.length;pi<Zn;pi++)this.glyphs[pi].scale(Jn[pi])}}Mn.GlyfTable=hi;class Xn{constructor({header:Jn=null,simple:pi=null,composites:Zn=null}){this.header=Jn,this.simple=pi,this.composites=Zn}static parse(Jn,pi){const[Zn,Gn]=ii.parse(Jn,pi);if(Jn+=Zn,Gn.numberOfContours<0){const Wn=[];for(;;){const[ni,li]=fi.parse(Jn,pi);if(Jn+=ni,Wn.push(li),!(li.flags&Bn))break}return new Xn({header:Gn,composites:Wn})}const mi=di.parse(Jn,pi,Gn.numberOfContours);return new Xn({header:Gn,simple:mi})}getSize(){if(!this.header)return 0;const Jn=this.simple?this.simple.getSize():this.composites.reduce((pi,Zn)=>pi+Zn.getSize(),0);return this.header.getSize()+Jn}write(Jn,pi){if(!this.header)return 0;const Zn=Jn;if(Jn+=this.header.write(Jn,pi),this.simple)Jn+=this.simple.write(Jn,pi);else for(const Gn of this.composites)Jn+=Gn.write(Jn,pi);return Jn-Zn}scale(Jn){if(!this.header)return;const pi=(this.header.xMin+this.header.xMax)/2;if(this.header.scale(pi,Jn),this.simple)this.simple.scale(pi,Jn);else for(const Zn of this.composites)Zn.scale(pi,Jn)}}class ii{constructor({numberOfContours:Jn,xMin:pi,yMin:Zn,xMax:Gn,yMax:mi}){this.numberOfContours=Jn,this.xMin=pi,this.yMin=Zn,this.xMax=Gn,this.yMax=mi}static parse(Jn,pi){return[10,new ii({numberOfContours:pi.getInt16(Jn),xMin:pi.getInt16(Jn+2),yMin:pi.getInt16(Jn+4),xMax:pi.getInt16(Jn+6),yMax:pi.getInt16(Jn+8)})]}getSize(){return 10}write(Jn,pi){return pi.setInt16(Jn,this.numberOfContours),pi.setInt16(Jn+2,this.xMin),pi.setInt16(Jn+4,this.yMin),pi.setInt16(Jn+6,this.xMax),pi.setInt16(Jn+8,this.yMax),10}scale(Jn,pi){this.xMin=Math.round(Jn+(this.xMin-Jn)*pi),this.xMax=Math.round(Jn+(this.xMax-Jn)*pi)}}class ri{constructor({flags:Jn,xCoordinates:pi,yCoordinates:Zn}){this.xCoordinates=pi,this.yCoordinates=Zn,this.flags=Jn}}class di{constructor({contours:Jn,instructions:pi}){this.contours=Jn,this.instructions=pi}static parse(Jn,pi,Zn){const Gn=[];for(let Vn=0;Vn<Zn;Vn++){const Yn=pi.getUint16(Jn);Jn+=2,Gn.push(Yn)}const mi=Gn[Zn-1]+1,Wn=pi.getUint16(Jn);Jn+=2;const ni=new Uint8Array(pi).slice(Jn,Jn+Wn);Jn+=Wn;const li=[];for(let Vn=0;Vn<mi;Jn++,Vn++){let Yn=pi.getUint8(Jn);if(li.push(Yn),Yn&jn){const ci=pi.getUint8(++Jn);Yn^=jn;for(let bi=0;bi<ci;bi++)li.push(Yn);Vn+=ci}}const Ai=[];let gi=[],yi=[],Ii=[];const xi=[];let Qn=0,ai=0;for(let Vn=0;Vn<mi;Vn++){const Yn=li[Vn];if(Yn&In){const ci=pi.getUint8(Jn++);ai+=Yn&Cn?ci:-ci,gi.push(ai)}else Yn&Cn||(ai+=pi.getInt16(Jn),Jn+=2),gi.push(ai);Gn[Qn]===Vn&&(Qn++,Ai.push(gi),gi=[])}ai=0,Qn=0;for(let Vn=0;Vn<mi;Vn++){const Yn=li[Vn];if(Yn&Ln){const ci=pi.getUint8(Jn++);ai+=Yn&Tn?ci:-ci,yi.push(ai)}else Yn&Tn||(ai+=pi.getInt16(Jn),Jn+=2),yi.push(ai);Ii.push(Yn&ti|Yn&Rn),Gn[Qn]===Vn&&(gi=Ai[Qn],Qn++,xi.push(new ri({flags:Ii,xCoordinates:gi,yCoordinates:yi})),yi=[],Ii=[])}return new di({contours:xi,instructions:ni})}getSize(){let Jn=this.contours.length*2+2+this.instructions.length,pi=0,Zn=0;for(const Gn of this.contours){Jn+=Gn.flags.length;for(let mi=0,Wn=Gn.xCoordinates.length;mi<Wn;mi++){const ni=Gn.xCoordinates[mi],li=Gn.yCoordinates[mi];let Ai=Math.abs(ni-pi);Ai>255?Jn+=2:Ai>0&&(Jn+=1),pi=ni,Ai=Math.abs(li-Zn),Ai>255?Jn+=2:Ai>0&&(Jn+=1),Zn=li}}return Jn}write(Jn,pi){const Zn=Jn,Gn=[],mi=[],Wn=[];let ni=0,li=0;for(const Ai of this.contours){for(let gi=0,yi=Ai.xCoordinates.length;gi<yi;gi++){let Ii=Ai.flags[gi];const xi=Ai.xCoordinates[gi];let Qn=xi-ni;if(Qn===0)Ii|=Cn,Gn.push(0);else{const Vn=Math.abs(Qn);Vn<=255?(Ii|=Qn>=0?In|Cn:In,Gn.push(Vn)):Gn.push(Qn)}ni=xi;const ai=Ai.yCoordinates[gi];if(Qn=ai-li,Qn===0)Ii|=Tn,mi.push(0);else{const Vn=Math.abs(Qn);Vn<=255?(Ii|=Qn>=0?Ln|Tn:Ln,mi.push(Vn)):mi.push(Qn)}li=ai,Wn.push(Ii)}pi.setUint16(Jn,Gn.length-1),Jn+=2}pi.setUint16(Jn,this.instructions.length),Jn+=2,this.instructions.length&&(new Uint8Array(pi.buffer,0,pi.buffer.byteLength).set(this.instructions,Jn),Jn+=this.instructions.length);for(const Ai of Wn)pi.setUint8(Jn++,Ai);for(let Ai=0,gi=Gn.length;Ai<gi;Ai++){const yi=Gn[Ai],Ii=Wn[Ai];Ii&In?pi.setUint8(Jn++,yi):Ii&Cn||(pi.setInt16(Jn,yi),Jn+=2)}for(let Ai=0,gi=mi.length;Ai<gi;Ai++){const yi=mi[Ai],Ii=Wn[Ai];Ii&Ln?pi.setUint8(Jn++,yi):Ii&Tn||(pi.setInt16(Jn,yi),Jn+=2)}return Jn-Zn}scale(Jn,pi){for(const Zn of this.contours)if(Zn.xCoordinates.length!==0)for(let Gn=0,mi=Zn.xCoordinates.length;Gn<mi;Gn++)Zn.xCoordinates[Gn]=Math.round(Jn+(Zn.xCoordinates[Gn]-Jn)*pi)}}class fi{constructor({flags:Jn,glyphIndex:pi,argument1:Zn,argument2:Gn,transf:mi,instructions:Wn}){this.flags=Jn,this.glyphIndex=pi,this.argument1=Zn,this.argument2=Gn,this.transf=mi,this.instructions=Wn}static parse(Jn,pi){const Zn=Jn,Gn=[];let mi=pi.getUint16(Jn);const Wn=pi.getUint16(Jn+2);Jn+=4;let ni,li;mi&ui?(mi&si?(ni=pi.getInt16(Jn),li=pi.getInt16(Jn+2)):(ni=pi.getUint16(Jn),li=pi.getUint16(Jn+2)),Jn+=4,mi^=ui):(mi&si?(ni=pi.getInt8(Jn),li=pi.getInt8(Jn+1)):(ni=pi.getUint8(Jn),li=pi.getUint8(Jn+1)),Jn+=2),mi&ei?(Gn.push(pi.getUint16(Jn)),Jn+=2):mi&Nn?(Gn.push(pi.getUint16(Jn),pi.getUint16(Jn+2)),Jn+=4):mi&Hn&&(Gn.push(pi.getUint16(Jn),pi.getUint16(Jn+2),pi.getUint16(Jn+4),pi.getUint16(Jn+6)),Jn+=8);let Ai=null;if(mi&On){const gi=pi.getUint16(Jn);Jn+=2,Ai=new Uint8Array(pi).slice(Jn,Jn+gi),Jn+=gi}return[Jn-Zn,new fi({flags:mi,glyphIndex:Wn,argument1:ni,argument2:li,transf:Gn,instructions:Ai})]}getSize(){let Jn=4+this.transf.length*2;return this.flags&On&&(Jn+=2+this.instructions.length),Jn+=2,this.flags&2?this.argument1>=-128&&this.argument1<=127&&this.argument2>=-128&&this.argument2<=127||(Jn+=2):this.argument1>=0&&this.argument1<=255&&this.argument2>=0&&this.argument2<=255||(Jn+=2),Jn}write(Jn,pi){const Zn=Jn;return this.flags&si?this.argument1>=-128&&this.argument1<=127&&this.argument2>=-128&&this.argument2<=127||(this.flags|=ui):this.argument1>=0&&this.argument1<=255&&this.argument2>=0&&this.argument2<=255||(this.flags|=ui),pi.setUint16(Jn,this.flags),pi.setUint16(Jn+2,this.glyphIndex),Jn+=4,this.flags&ui?(this.flags&si?(pi.setInt16(Jn,this.argument1),pi.setInt16(Jn+2,this.argument2)):(pi.setUint16(Jn,this.argument1),pi.setUint16(Jn+2,this.argument2)),Jn+=4):(pi.setUint8(Jn,this.argument1),pi.setUint8(Jn+1,this.argument2),Jn+=2),this.flags&On&&(pi.setUint16(Jn,this.instructions.length),Jn+=2,this.instructions.length&&(new Uint8Array(pi.buffer,0,pi.buffer.byteLength).set(this.instructions,Jn),Jn+=this.instructions.length)),Jn-Zn}scale(Jn,pi){}}},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.OpenTypeFileBuilder=void 0;var In=ti(3),Ln=ti(2);function jn(ei,Bn,Nn){ei[Bn]=Nn>>8&255,ei[Bn+1]=Nn&255}function Cn(ei,Bn,Nn){ei[Bn]=Nn>>24&255,ei[Bn+1]=Nn>>16&255,ei[Bn+2]=Nn>>8&255,ei[Bn+3]=Nn&255}function Tn(ei,Bn,Nn){if(Nn instanceof Uint8Array)ei.set(Nn,Bn);else if(typeof Nn=="string")for(let Hn=0,On=Nn.length;Hn<On;Hn++)ei[Bn++]=Nn.charCodeAt(Hn)&255;else for(const Hn of Nn)ei[Bn++]=Hn&255}const Rn=12,ui=16;class si{constructor(Bn){this.sfnt=Bn,this.tables=Object.create(null)}static getSearchParams(Bn,Nn){let Hn=1,On=0;for(;(Hn^Bn)>Hn;)Hn<<=1,On++;const hi=Hn*Nn;return{range:hi,entry:On,rangeShift:Nn*Bn-hi}}toArray(){let Bn=this.sfnt;const Nn=this.tables,Hn=Object.keys(Nn);Hn.sort();const On=Hn.length;let hi,Xn,ii,ri,di,fi=Rn+On*ui;const wi=[fi];for(hi=0;hi<On;hi++){ri=Nn[Hn[hi]];const Zn=(ri.length+3&-4)>>>0;fi+=Zn,wi.push(fi)}const Jn=new Uint8Array(fi);for(hi=0;hi<On;hi++)ri=Nn[Hn[hi]],Tn(Jn,wi[hi],ri);Bn==="true"&&(Bn=(0,Ln.string32)(65536)),Jn[0]=Bn.charCodeAt(0)&255,Jn[1]=Bn.charCodeAt(1)&255,Jn[2]=Bn.charCodeAt(2)&255,Jn[3]=Bn.charCodeAt(3)&255,jn(Jn,4,On);const pi=si.getSearchParams(On,16);for(jn(Jn,6,pi.range),jn(Jn,8,pi.entry),jn(Jn,10,pi.rangeShift),fi=Rn,hi=0;hi<On;hi++){di=Hn[hi],Jn[fi]=di.charCodeAt(0)&255,Jn[fi+1]=di.charCodeAt(1)&255,Jn[fi+2]=di.charCodeAt(2)&255,Jn[fi+3]=di.charCodeAt(3)&255;let Zn=0;for(Xn=wi[hi],ii=wi[hi+1];Xn<ii;Xn+=4){const Gn=(0,In.readUint32)(Jn,Xn);Zn=Zn+Gn>>>0}Cn(Jn,fi+4,Zn),Cn(Jn,fi+8,wi[hi]),Cn(Jn,fi+12,Nn[di].length),fi+=ui}return Jn}addTable(Bn,Nn){if(Bn in this.tables)throw new Error("Table "+Bn+" already exists");this.tables[Bn]=Nn}}Mn.OpenTypeFileBuilder=si},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.Type1Font=void 0;var In=ti(35),Ln=ti(2),jn=ti(38),Cn=ti(3),Tn=ti(8),Rn=ti(49);function ui(Nn,Hn,On){const hi=Nn.length,Xn=Hn.length,ii=hi-Xn;let ri=On,di=!1;for(;ri<ii;){let fi=0;for(;fi<Xn&&Nn[ri+fi]===Hn[fi];)fi++;if(fi>=Xn){for(ri+=fi;ri<hi&&(0,Cn.isWhiteSpace)(Nn[ri]);)ri++;di=!0;break}ri++}return{found:di,length:ri}}function si(Nn,Hn){const On=[101,101,120,101,99],hi=Nn.pos;let Xn,ii,ri;try{Xn=Nn.getBytes(Hn),ii=Xn.length}catch{}if(ii===Hn&&(ri=ui(Xn,On,Hn-2*On.length),ri.found&&ri.length===Hn))return{stream:new Tn.Stream(Xn),length:Hn};(0,Ln.warn)('Invalid "Length1" property in Type1 font -- trying to recover.'),Nn.pos=hi;const di=2048;let fi;for(;;){const wi=Nn.peekBytes(di);if(ri=ui(wi,On,0),ri.length===0)break;if(Nn.pos+=ri.length,ri.found){fi=Nn.pos-hi;break}}return Nn.pos=hi,fi?{stream:new Tn.Stream(Nn.getBytes(fi)),length:fi}:((0,Ln.warn)('Unable to recover "Length1" property in Type1 font -- using as is.'),{stream:new Tn.Stream(Nn.getBytes(Hn)),length:Hn})}function ei(Nn,Hn){const On=Nn.getBytes();if(On.length===0)throw new Ln.FormatError("getEexecBlock - no font program found.");return{stream:new Tn.Stream(On),length:On.length}}class Bn{constructor(Hn,On,hi){let ii=hi.length1;hi.length2;let ri=On.peekBytes(6);const di=ri[0]===128&&ri[1]===1;di&&(On.skip(6),ii=ri[5]<<24|ri[4]<<16|ri[3]<<8|ri[2]);const fi=si(On,ii);new Rn.Type1Parser(fi.stream,!1,jn.SEAC_ANALYSIS_ENABLED).extractFontHeader(hi),di&&(ri=On.getBytes(6),ri[5]<<24|ri[4]<<16|ri[3]<<8|ri[2]);const Jn=ei(On),Zn=new Rn.Type1Parser(Jn.stream,!0,jn.SEAC_ANALYSIS_ENABLED).extractFontProgram(hi);for(const ni in Zn.properties)hi[ni]=Zn.properties[ni];const Gn=Zn.charstrings,mi=this.getType2Charstrings(Gn),Wn=this.getType2Subrs(Zn.subrs);this.charstrings=Gn,this.data=this.wrap(Hn,mi,this.charstrings,Wn,hi),this.seacs=this.getSeacs(Zn.charstrings)}get numGlyphs(){return this.charstrings.length+1}getCharset(){const Hn=[".notdef"];for(const{glyphName:On}of this.charstrings)Hn.push(On);return Hn}getGlyphMapping(Hn){const On=this.charstrings;if(Hn.composite){const di=Object.create(null);for(let fi=0,wi=On.length;fi<wi;fi++){const Jn=Hn.cMap.charCodeOf(fi);di[Jn]=fi+1}return di}const hi=[".notdef"];let Xn,ii;for(ii=0;ii<On.length;ii++)hi.push(On[ii].glyphName);const ri=Hn.builtInEncoding;if(ri){Xn=Object.create(null);for(const di in ri)ii=hi.indexOf(ri[di]),ii>=0&&(Xn[di]=ii)}return(0,jn.type1FontGlyphMapping)(Hn,Xn,hi)}hasGlyphId(Hn){return Hn<0||Hn>=this.numGlyphs?!1:Hn===0?!0:this.charstrings[Hn-1].charstring.length>0}getSeacs(Hn){const On=[];for(let hi=0,Xn=Hn.length;hi<Xn;hi++){const ii=Hn[hi];ii.seac&&(On[hi+1]=ii.seac)}return On}getType2Charstrings(Hn){const On=[];for(const hi of Hn)On.push(hi.charstring);return On}getType2Subrs(Hn){let On=0;const hi=Hn.length;hi<1133?On=107:hi<33769?On=1131:On=32768;const Xn=[];let ii;for(ii=0;ii<On;ii++)Xn.push([11]);for(ii=0;ii<hi;ii++)Xn.push(Hn[ii]);return Xn}wrap(Hn,On,hi,Xn,ii){const ri=new In.CFF;ri.header=new In.CFFHeader(1,0,4,4),ri.names=[Hn];const di=new In.CFFTopDict;di.setByName("version",391),di.setByName("Notice",392),di.setByName("FullName",393),di.setByName("FamilyName",394),di.setByName("Weight",395),di.setByName("Encoding",null),di.setByName("FontMatrix",ii.fontMatrix),di.setByName("FontBBox",ii.bbox),di.setByName("charset",null),di.setByName("CharStrings",null),di.setByName("Private",null),ri.topDict=di;const fi=new In.CFFStrings;fi.add("Version 0.11"),fi.add("See original notice"),fi.add(Hn),fi.add(Hn),fi.add("Medium"),ri.strings=fi,ri.globalSubrIndex=new In.CFFIndex;const wi=On.length,Jn=[".notdef"];let pi,Zn;for(pi=0;pi<wi;pi++){const Ai=hi[pi].glyphName;In.CFFStandardStrings.indexOf(Ai)===-1&&fi.add(Ai),Jn.push(Ai)}ri.charset=new In.CFFCharset(!1,0,Jn);const Gn=new In.CFFIndex;for(Gn.add([139,14]),pi=0;pi<wi;pi++)Gn.add(On[pi]);ri.charStrings=Gn;const mi=new In.CFFPrivateDict;mi.setByName("Subrs",null);const Wn=["BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StemSnapH","StemSnapV","BlueShift","BlueFuzz","BlueScale","LanguageGroup","ExpansionFactor","ForceBold","StdHW","StdVW"];for(pi=0,Zn=Wn.length;pi<Zn;pi++){const Ai=Wn[pi];if(!(Ai in ii.privateData))continue;const gi=ii.privateData[Ai];if(Array.isArray(gi))for(let yi=gi.length-1;yi>0;yi--)gi[yi]-=gi[yi-1];mi.setByName(Ai,gi)}ri.topDict.privateDict=mi;const ni=new In.CFFIndex;for(pi=0,Zn=Xn.length;pi<Zn;pi++)ni.add(Xn[pi]);return mi.subrsIndex=ni,new In.CFFCompiler(ri).compile()}}Mn.Type1Font=Bn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.Type1Parser=void 0;var In=ti(37),Ln=ti(3),jn=ti(8),Cn=ti(2);const Tn=!1,Rn={hstem:[1],vstem:[3],vmoveto:[4],rlineto:[5],hlineto:[6],vlineto:[7],rrcurveto:[8],callsubr:[10],flex:[12,35],drop:[12,18],endchar:[14],rmoveto:[21],hmoveto:[22],vhcurveto:[30],hvcurveto:[31]};class ui{constructor(){this.width=0,this.lsb=0,this.flexing=!1,this.output=[],this.stack=[]}convert(ii,ri,di){const fi=ii.length;let wi=!1,Jn,pi,Zn;for(let Gn=0;Gn<fi;Gn++){let mi=ii[Gn];if(mi<32){switch(mi===12&&(mi=(mi<<8)+ii[++Gn]),mi){case 1:{this.stack=[];break}case 3:{this.stack=[];break}case 4:if(this.flexing){if(this.stack.length<1){wi=!0;break}const gi=this.stack.pop();this.stack.push(0,gi);break}wi=this.executeCommand(1,Rn.vmoveto);break;case 5:wi=this.executeCommand(2,Rn.rlineto);break;case 6:wi=this.executeCommand(1,Rn.hlineto);break;case 7:wi=this.executeCommand(1,Rn.vlineto);break;case 8:wi=this.executeCommand(6,Rn.rrcurveto);break;case 9:this.stack=[];break;case 10:if(this.stack.length<1){wi=!0;break}if(Zn=this.stack.pop(),!ri[Zn]){wi=!0;break}wi=this.convert(ri[Zn],ri,di);break;case 11:return wi;case 13:if(this.stack.length<2){wi=!0;break}Jn=this.stack.pop(),pi=this.stack.pop(),this.lsb=pi,this.width=Jn,this.stack.push(Jn,pi),wi=this.executeCommand(2,Rn.hmoveto);break;case 14:this.output.push(Rn.endchar[0]);break;case 21:if(this.flexing)break;wi=this.executeCommand(2,Rn.rmoveto);break;case 22:if(this.flexing){this.stack.push(0);break}wi=this.executeCommand(1,Rn.hmoveto);break;case 30:wi=this.executeCommand(4,Rn.vhcurveto);break;case 31:wi=this.executeCommand(4,Rn.hvcurveto);break;case 3072:this.stack=[];break;case 3073:{this.stack=[];break}case 3074:{this.stack=[];break}case 3078:if(di){const gi=this.stack.at(-5);this.seac=this.stack.splice(-4,4),this.seac[0]+=this.lsb-gi,wi=this.executeCommand(0,Rn.endchar)}else wi=this.executeCommand(4,Rn.endchar);break;case 3079:if(this.stack.length<4){wi=!0;break}this.stack.pop(),Jn=this.stack.pop();const Wn=this.stack.pop();pi=this.stack.pop(),this.lsb=pi,this.width=Jn,this.stack.push(Jn,pi,Wn),wi=this.executeCommand(3,Rn.rmoveto);break;case 3084:if(this.stack.length<2){wi=!0;break}const ni=this.stack.pop(),li=this.stack.pop();this.stack.push(li/ni);break;case 3088:if(this.stack.length<2){wi=!0;break}Zn=this.stack.pop();const Ai=this.stack.pop();if(Zn===0&&Ai===3){const gi=this.stack.splice(-17,17);this.stack.push(gi[2]+gi[0],gi[3]+gi[1],gi[4],gi[5],gi[6],gi[7],gi[8],gi[9],gi[10],gi[11],gi[12],gi[13],gi[14]),wi=this.executeCommand(13,Rn.flex,!0),this.flexing=!1,this.stack.push(gi[15],gi[16])}else Zn===1&&Ai===0&&(this.flexing=!0);break;case 3089:break;case 3105:this.stack=[];break;default:(0,Cn.warn)('Unknown type 1 charstring command of "'+mi+'"');break}if(wi)break;continue}else mi<=246?mi-=139:mi<=250?mi=(mi-247)*256+ii[++Gn]+108:mi<=254?mi=-((mi-251)*256)-ii[++Gn]-108:mi=(ii[++Gn]&255)<<24|(ii[++Gn]&255)<<16|(ii[++Gn]&255)<<8|(ii[++Gn]&255)<<0;this.stack.push(mi)}return wi}executeCommand(ii,ri,di){const fi=this.stack.length;if(ii>fi)return!0;const wi=fi-ii;for(let Jn=wi;Jn<fi;Jn++){let pi=this.stack[Jn];Number.isInteger(pi)?this.output.push(28,pi>>8&255,pi&255):(pi=65536*pi|0,this.output.push(255,pi>>24&255,pi>>16&255,pi>>8&255,pi&255))}return this.output.push(...ri),di?this.stack.splice(wi,ii):this.stack.length=0,!1}}const si=55665,ei=4330;function Bn(Xn){return Xn>=48&&Xn<=57||Xn>=65&&Xn<=70||Xn>=97&&Xn<=102}function Nn(Xn,ii,ri){if(ri>=Xn.length)return new Uint8Array(0);const di=52845,fi=22719;let wi=ii|0,Jn,pi;for(Jn=0;Jn<ri;Jn++)wi=(Xn[Jn]+wi)*di+fi&65535;const Zn=Xn.length-ri,Gn=new Uint8Array(Zn);for(Jn=ri,pi=0;pi<Zn;Jn++,pi++){const mi=Xn[Jn];Gn[pi]=mi^wi>>8,wi=(mi+wi)*di+fi&65535}return Gn}function Hn(Xn,ii,ri){let wi=ii|0;const Jn=Xn.length,pi=Jn>>>1,Zn=new Uint8Array(pi);let Gn,mi;for(Gn=0,mi=0;Gn<Jn;Gn++){const Wn=Xn[Gn];if(!Bn(Wn))continue;Gn++;let ni;for(;Gn<Jn&&!Bn(ni=Xn[Gn]);)Gn++;if(Gn<Jn){const li=parseInt(String.fromCharCode(Wn,ni),16);Zn[mi++]=li^wi>>8,wi=(li+wi)*52845+22719&65535}}return Zn.slice(ri,mi)}function On(Xn){return Xn===47||Xn===91||Xn===93||Xn===123||Xn===125||Xn===40||Xn===41}class hi{constructor(ii,ri,di){if(ri){const fi=ii.getBytes(),wi=!((Bn(fi[0])||(0,Ln.isWhiteSpace)(fi[0]))&&Bn(fi[1])&&Bn(fi[2])&&Bn(fi[3])&&Bn(fi[4])&&Bn(fi[5])&&Bn(fi[6])&&Bn(fi[7]));ii=new jn.Stream(wi?Nn(fi,si,4):Hn(fi,si,4))}this.seacAnalysisEnabled=!!di,this.stream=ii,this.nextChar()}readNumberArray(){this.getToken();const ii=[];for(;;){const ri=this.getToken();if(ri===null||ri==="]"||ri==="}")break;ii.push(parseFloat(ri||0))}return ii}readNumber(){const ii=this.getToken();return parseFloat(ii||0)}readInt(){const ii=this.getToken();return parseInt(ii||0,10)|0}readBoolean(){return this.getToken()==="true"?1:0}nextChar(){return this.currentChar=this.stream.getByte()}prevChar(){return this.stream.skip(-2),this.currentChar=this.stream.getByte()}getToken(){let ii=!1,ri=this.currentChar;for(;;){if(ri===-1)return null;if(ii)(ri===10||ri===13)&&(ii=!1);else if(ri===37)ii=!0;else if(!(0,Ln.isWhiteSpace)(ri))break;ri=this.nextChar()}if(On(ri))return this.nextChar(),String.fromCharCode(ri);let di="";do di+=String.fromCharCode(ri),ri=this.nextChar();while(ri>=0&&!(0,Ln.isWhiteSpace)(ri)&&!On(ri));return di}readCharStrings(ii,ri){return ri===-1?ii:Nn(ii,ei,ri)}extractFontProgram(ii){const ri=this.stream,di=[],fi=[],wi=Object.create(null);wi.lenIV=4;const Jn={subrs:[],charstrings:[],properties:{privateData:wi}};let pi,Zn,Gn,mi;for(;(pi=this.getToken())!==null;)if(pi==="/")switch(pi=this.getToken(),pi){case"CharStrings":for(this.getToken(),this.getToken(),this.getToken(),this.getToken();pi=this.getToken(),!(pi===null||pi==="end");){if(pi!=="/")continue;const ni=this.getToken();Zn=this.readInt(),this.getToken(),Gn=Zn>0?ri.getBytes(Zn):new Uint8Array(0),mi=Jn.properties.privateData.lenIV;const li=this.readCharStrings(Gn,mi);this.nextChar(),pi=this.getToken(),pi==="noaccess"?this.getToken():pi==="/"&&this.prevChar(),fi.push({glyph:ni,encoded:li})}break;case"Subrs":for(this.readInt(),this.getToken();this.getToken()==="dup";){const ni=this.readInt();Zn=this.readInt(),this.getToken(),Gn=Zn>0?ri.getBytes(Zn):new Uint8Array(0),mi=Jn.properties.privateData.lenIV;const li=this.readCharStrings(Gn,mi);this.nextChar(),pi=this.getToken(),pi==="noaccess"&&this.getToken(),di[ni]=li}break;case"BlueValues":case"OtherBlues":case"FamilyBlues":case"FamilyOtherBlues":const Wn=this.readNumberArray();Wn.length>0&&Wn.length%2===0&&Tn&&(Jn.properties.privateData[pi]=Wn);break;case"StemSnapH":case"StemSnapV":Jn.properties.privateData[pi]=this.readNumberArray();break;case"StdHW":case"StdVW":Jn.properties.privateData[pi]=this.readNumberArray()[0];break;case"BlueShift":case"lenIV":case"BlueFuzz":case"BlueScale":case"LanguageGroup":Jn.properties.privateData[pi]=this.readNumber();break;case"ExpansionFactor":Jn.properties.privateData[pi]=this.readNumber()||.06;break;case"ForceBold":Jn.properties.privateData[pi]=this.readBoolean();break}for(const{encoded:Wn,glyph:ni}of fi){const li=new ui,Ai=li.convert(Wn,di,this.seacAnalysisEnabled);let gi=li.output;Ai&&(gi=[14]);const yi={glyphName:ni,charstring:gi,width:li.width,lsb:li.lsb,seac:li.seac};if(ni===".notdef"?Jn.charstrings.unshift(yi):Jn.charstrings.push(yi),ii.builtInEncoding){const Ii=ii.builtInEncoding.indexOf(ni);Ii>-1&&ii.widths[Ii]===void 0&&Ii>=ii.firstChar&&Ii<=ii.lastChar&&(ii.widths[Ii]=li.width)}}return Jn}extractFontHeader(ii){let ri;for(;(ri=this.getToken())!==null;)if(ri==="/")switch(ri=this.getToken(),ri){case"FontMatrix":const di=this.readNumberArray();ii.fontMatrix=di;break;case"Encoding":const fi=this.getToken();let wi;if(!/^\d+$/.test(fi))wi=(0,In.getEncoding)(fi);else{wi=[];const pi=parseInt(fi,10)|0;this.getToken();for(let Zn=0;Zn<pi;Zn++){for(ri=this.getToken();ri!=="dup"&&ri!=="def";)if(ri=this.getToken(),ri===null)return;if(ri==="def")break;const Gn=this.readInt();this.getToken();const mi=this.getToken();wi[Gn]=mi,this.getToken()}}ii.builtInEncoding=wi;break;case"FontBBox":const Jn=this.readNumberArray();ii.ascent=Math.max(Jn[3],Jn[1]),ii.descent=Math.min(Jn[1],Jn[3]),ii.ascentScaled=!0;break}}}Mn.Type1Parser=hi},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.Pattern=void 0,Mn.clearPatternCaches=On,Mn.getTilingPatternIR=ii;var In=ti(2),Ln=ti(5),jn=ti(12),Cn=ti(3);const Tn={FUNCTION_BASED:1,AXIAL:2,RADIAL:3,FREE_FORM_MESH:4,LATTICE_FORM_MESH:5,COONS_PATCH_MESH:6,TENSOR_PATCH_MESH:7};class Rn{constructor(){(0,In.unreachable)("Cannot initialize Pattern.")}static parseShading(wi,Jn,pi,Zn,Gn){const mi=wi instanceof Ln.BaseStream?wi.dict:wi,Wn=mi.get("ShadingType");try{switch(Wn){case Tn.AXIAL:case Tn.RADIAL:return new si(mi,Jn,pi,Zn,Gn);case Tn.FREE_FORM_MESH:case Tn.LATTICE_FORM_MESH:case Tn.COONS_PATCH_MESH:case Tn.TENSOR_PATCH_MESH:return new hi(wi,Jn,pi,Zn,Gn);default:throw new In.FormatError("Unsupported ShadingType: "+Wn)}}catch(ni){if(ni instanceof Cn.MissingDataException)throw ni;return(0,In.warn)(ni),new Xn}}}Mn.Pattern=Rn;const ri=class ri{constructor(){this.constructor===ri&&(0,In.unreachable)("Cannot initialize BaseShading.")}getIR(){(0,In.unreachable)("Abstract method `getIR` called.")}};ta(ri,"SMALL_NUMBER",1e-6);let ui=ri;class si extends ui{constructor(wi,Jn,pi,Zn,Gn){super(),this.coordsArr=wi.getArray("Coords"),this.shadingType=wi.get("ShadingType");const mi=jn.ColorSpace.parse({cs:wi.getRaw("CS")||wi.getRaw("ColorSpace"),xref:Jn,resources:pi,pdfFunctionFactory:Zn,localColorSpaceCache:Gn}),Wn=wi.getArray("BBox");this.bbox=Array.isArray(Wn)&&Wn.length===4?In.Util.normalizeRect(Wn):null;let ni=0,li=1;if(wi.has("Domain")){const Hi=wi.getArray("Domain");ni=Hi[0],li=Hi[1]}let Ai=!1,gi=!1;if(wi.has("Extend")){const Hi=wi.getArray("Extend");Ai=Hi[0],gi=Hi[1]}if(this.shadingType===Tn.RADIAL&&(!Ai||!gi)){const[Hi,Li,Ei,$i,Bi,Oi]=this.coordsArr,Xi=Math.hypot(Hi-$i,Li-Bi);Ei<=Oi+Xi&&Oi<=Ei+Xi&&(0,In.warn)("Unsupported radial gradient.")}this.extendStart=Ai,this.extendEnd=gi;const yi=wi.getRaw("Function"),Ii=Zn.createFromArray(yi),xi=840,Qn=(li-ni)/xi,ai=this.colorStops=[];if(ni>=li||Qn<=0){(0,In.info)("Bad shading domain.");return}const Vn=new Float32Array(mi.numComps),Yn=new Float32Array(1);let ci,bi=0;Yn[0]=ni,Ii(Yn,0,Vn,0);let Ci=mi.getRgb(Vn,0);const Fi=In.Util.makeHexColor(Ci[0],Ci[1],Ci[2]);ai.push([0,Fi]);let zi=1;Yn[0]=ni+Qn,Ii(Yn,0,Vn,0);let _i=mi.getRgb(Vn,0),ji=_i[0]-Ci[0]+1,Pi=_i[1]-Ci[1]+1,Ni=_i[2]-Ci[2]+1,Si=_i[0]-Ci[0]-1,Ti=_i[1]-Ci[1]-1,Ri=_i[2]-Ci[2]-1;for(let Hi=2;Hi<xi;Hi++){Yn[0]=ni+Hi*Qn,Ii(Yn,0,Vn,0),ci=mi.getRgb(Vn,0);const Li=Hi-bi;if(ji=Math.min(ji,(ci[0]-Ci[0]+1)/Li),Pi=Math.min(Pi,(ci[1]-Ci[1]+1)/Li),Ni=Math.min(Ni,(ci[2]-Ci[2]+1)/Li),Si=Math.max(Si,(ci[0]-Ci[0]-1)/Li),Ti=Math.max(Ti,(ci[1]-Ci[1]-1)/Li),Ri=Math.max(Ri,(ci[2]-Ci[2]-1)/Li),!(Si<=ji&&Ti<=Pi&&Ri<=Ni)){const $i=In.Util.makeHexColor(_i[0],_i[1],_i[2]);ai.push([zi/xi,$i]),ji=ci[0]-_i[0]+1,Pi=ci[1]-_i[1]+1,Ni=ci[2]-_i[2]+1,Si=ci[0]-_i[0]-1,Ti=ci[1]-_i[1]-1,Ri=ci[2]-_i[2]-1,bi=zi,Ci=_i}zi=Hi,_i=ci}const Mi=In.Util.makeHexColor(_i[0],_i[1],_i[2]);ai.push([1,Mi]);let Ui="transparent";wi.has("Background")&&(ci=mi.getRgb(wi.get("Background"),0),Ui=In.Util.makeHexColor(ci[0],ci[1],ci[2])),Ai||(ai.unshift([0,Ui]),ai[1][0]+=ui.SMALL_NUMBER),gi||(ai.at(-1)[0]-=ui.SMALL_NUMBER,ai.push([1,Ui])),this.colorStops=ai}getIR(){const wi=this.coordsArr,Jn=this.shadingType;let pi,Zn,Gn,mi,Wn;return Jn===Tn.AXIAL?(Zn=[wi[0],wi[1]],Gn=[wi[2],wi[3]],mi=null,Wn=null,pi="axial"):Jn===Tn.RADIAL?(Zn=[wi[0],wi[1]],Gn=[wi[3],wi[4]],mi=wi[2],Wn=wi[5],pi="radial"):(0,In.unreachable)(`getPattern type unknown: ${Jn}`),["RadialAxial",pi,this.bbox,this.colorStops,Zn,Gn,mi,Wn]}}class ei{constructor(wi,Jn){this.stream=wi,this.context=Jn,this.buffer=0,this.bufferLength=0;const pi=Jn.numComps;this.tmpCompsBuf=new Float32Array(pi);const Zn=Jn.colorSpace.numComps;this.tmpCsCompsBuf=Jn.colorFn?new Float32Array(Zn):this.tmpCompsBuf}get hasData(){if(this.stream.end)return this.stream.pos<this.stream.end;if(this.bufferLength>0)return!0;const wi=this.stream.getByte();return wi<0?!1:(this.buffer=wi,this.bufferLength=8,!0)}readBits(wi){let Jn=this.buffer,pi=this.bufferLength;if(wi===32){if(pi===0)return(this.stream.getByte()<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte())>>>0;Jn=Jn<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte();const Zn=this.stream.getByte();return this.buffer=Zn&(1<<pi)-1,(Jn<<8-pi|(Zn&255)>>pi)>>>0}if(wi===8&&pi===0)return this.stream.getByte();for(;pi<wi;)Jn=Jn<<8|this.stream.getByte(),pi+=8;return pi-=wi,this.bufferLength=pi,this.buffer=Jn&(1<<pi)-1,Jn>>pi}align(){this.buffer=0,this.bufferLength=0}readFlag(){return this.readBits(this.context.bitsPerFlag)}readCoordinate(){const wi=this.context.bitsPerCoordinate,Jn=this.readBits(wi),pi=this.readBits(wi),Zn=this.context.decode,Gn=wi<32?1/((1<<wi)-1):23283064365386963e-26;return[Jn*Gn*(Zn[1]-Zn[0])+Zn[0],pi*Gn*(Zn[3]-Zn[2])+Zn[2]]}readComponents(){const wi=this.context.numComps,Jn=this.context.bitsPerComponent,pi=Jn<32?1/((1<<Jn)-1):23283064365386963e-26,Zn=this.context.decode,Gn=this.tmpCompsBuf;for(let Wn=0,ni=4;Wn<wi;Wn++,ni+=2){const li=this.readBits(Jn);Gn[Wn]=li*pi*(Zn[ni+1]-Zn[ni])+Zn[ni]}const mi=this.tmpCsCompsBuf;return this.context.colorFn&&this.context.colorFn(Gn,0,mi,0),this.context.colorSpace.getRgb(mi,0)}}let Bn=Object.create(null);function Nn(fi){const wi=[];for(let Jn=0;Jn<=fi;Jn++){const pi=Jn/fi,Zn=1-pi;wi.push(new Float32Array([Zn**3,3*pi*Zn**2,3*pi**2*Zn,pi**3]))}return wi}function Hn(fi){return Bn[fi]||(Bn[fi]=Nn(fi))}function On(){Bn=Object.create(null)}const di=class di extends ui{constructor(wi,Jn,pi,Zn,Gn){if(super(),!(wi instanceof Ln.BaseStream))throw new In.FormatError("Mesh data is not a stream");const mi=wi.dict;this.shadingType=mi.get("ShadingType");const Wn=mi.getArray("BBox");this.bbox=Array.isArray(Wn)&&Wn.length===4?In.Util.normalizeRect(Wn):null;const ni=jn.ColorSpace.parse({cs:mi.getRaw("CS")||mi.getRaw("ColorSpace"),xref:Jn,resources:pi,pdfFunctionFactory:Zn,localColorSpaceCache:Gn});this.background=mi.has("Background")?ni.getRgb(mi.get("Background"),0):null;const li=mi.getRaw("Function"),Ai=li?Zn.createFromArray(li):null;this.coords=[],this.colors=[],this.figures=[];const gi={bitsPerCoordinate:mi.get("BitsPerCoordinate"),bitsPerComponent:mi.get("BitsPerComponent"),bitsPerFlag:mi.get("BitsPerFlag"),decode:mi.getArray("Decode"),colorFn:Ai,colorSpace:ni,numComps:Ai?1:ni.numComps},yi=new ei(wi,gi);let Ii=!1;switch(this.shadingType){case Tn.FREE_FORM_MESH:this._decodeType4Shading(yi);break;case Tn.LATTICE_FORM_MESH:const xi=mi.get("VerticesPerRow")|0;if(xi<2)throw new In.FormatError("Invalid VerticesPerRow");this._decodeType5Shading(yi,xi);break;case Tn.COONS_PATCH_MESH:this._decodeType6Shading(yi),Ii=!0;break;case Tn.TENSOR_PATCH_MESH:this._decodeType7Shading(yi),Ii=!0;break;default:(0,In.unreachable)("Unsupported mesh type.");break}if(Ii){this._updateBounds();for(let xi=0,Qn=this.figures.length;xi<Qn;xi++)this._buildFigureFromPatch(xi)}this._updateBounds(),this._packData()}_decodeType4Shading(wi){const Jn=this.coords,pi=this.colors,Zn=[];let Gn=0;for(;wi.hasData;){const mi=wi.readFlag(),Wn=wi.readCoordinate(),ni=wi.readComponents();if(Gn===0){if(!(0<=mi&&mi<=2))throw new In.FormatError("Unknown type4 flag");switch(mi){case 0:Gn=3;break;case 1:Zn.push(Zn.at(-2),Zn.at(-1)),Gn=1;break;case 2:Zn.push(Zn.at(-3),Zn.at(-1)),Gn=1;break}}Zn.push(Jn.length),Jn.push(Wn),pi.push(ni),Gn--,wi.align()}this.figures.push({type:"triangles",coords:new Int32Array(Zn),colors:new Int32Array(Zn)})}_decodeType5Shading(wi,Jn){const pi=this.coords,Zn=this.colors,Gn=[];for(;wi.hasData;){const mi=wi.readCoordinate(),Wn=wi.readComponents();Gn.push(pi.length),pi.push(mi),Zn.push(Wn)}this.figures.push({type:"lattice",coords:new Int32Array(Gn),colors:new Int32Array(Gn),verticesPerRow:Jn})}_decodeType6Shading(wi){const Jn=this.coords,pi=this.colors,Zn=new Int32Array(16),Gn=new Int32Array(4);for(;wi.hasData;){const mi=wi.readFlag();if(!(0<=mi&&mi<=3))throw new In.FormatError("Unknown type6 flag");const Wn=Jn.length;for(let Ii=0,xi=mi!==0?8:12;Ii<xi;Ii++)Jn.push(wi.readCoordinate());const ni=pi.length;for(let Ii=0,xi=mi!==0?2:4;Ii<xi;Ii++)pi.push(wi.readComponents());let li,Ai,gi,yi;switch(mi){case 0:Zn[12]=Wn+3,Zn[13]=Wn+4,Zn[14]=Wn+5,Zn[15]=Wn+6,Zn[8]=Wn+2,Zn[11]=Wn+7,Zn[4]=Wn+1,Zn[7]=Wn+8,Zn[0]=Wn,Zn[1]=Wn+11,Zn[2]=Wn+10,Zn[3]=Wn+9,Gn[2]=ni+1,Gn[3]=ni+2,Gn[0]=ni,Gn[1]=ni+3;break;case 1:li=Zn[12],Ai=Zn[13],gi=Zn[14],yi=Zn[15],Zn[12]=yi,Zn[13]=Wn+0,Zn[14]=Wn+1,Zn[15]=Wn+2,Zn[8]=gi,Zn[11]=Wn+3,Zn[4]=Ai,Zn[7]=Wn+4,Zn[0]=li,Zn[1]=Wn+7,Zn[2]=Wn+6,Zn[3]=Wn+5,li=Gn[2],Ai=Gn[3],Gn[2]=Ai,Gn[3]=ni,Gn[0]=li,Gn[1]=ni+1;break;case 2:li=Zn[15],Ai=Zn[11],Zn[12]=Zn[3],Zn[13]=Wn+0,Zn[14]=Wn+1,Zn[15]=Wn+2,Zn[8]=Zn[7],Zn[11]=Wn+3,Zn[4]=Ai,Zn[7]=Wn+4,Zn[0]=li,Zn[1]=Wn+7,Zn[2]=Wn+6,Zn[3]=Wn+5,li=Gn[3],Gn[2]=Gn[1],Gn[3]=ni,Gn[0]=li,Gn[1]=ni+1;break;case 3:Zn[12]=Zn[0],Zn[13]=Wn+0,Zn[14]=Wn+1,Zn[15]=Wn+2,Zn[8]=Zn[1],Zn[11]=Wn+3,Zn[4]=Zn[2],Zn[7]=Wn+4,Zn[0]=Zn[3],Zn[1]=Wn+7,Zn[2]=Wn+6,Zn[3]=Wn+5,Gn[2]=Gn[0],Gn[3]=ni,Gn[0]=Gn[1],Gn[1]=ni+1;break}Zn[5]=Jn.length,Jn.push([(-4*Jn[Zn[0]][0]-Jn[Zn[15]][0]+6*(Jn[Zn[4]][0]+Jn[Zn[1]][0])-2*(Jn[Zn[12]][0]+Jn[Zn[3]][0])+3*(Jn[Zn[13]][0]+Jn[Zn[7]][0]))/9,(-4*Jn[Zn[0]][1]-Jn[Zn[15]][1]+6*(Jn[Zn[4]][1]+Jn[Zn[1]][1])-2*(Jn[Zn[12]][1]+Jn[Zn[3]][1])+3*(Jn[Zn[13]][1]+Jn[Zn[7]][1]))/9]),Zn[6]=Jn.length,Jn.push([(-4*Jn[Zn[3]][0]-Jn[Zn[12]][0]+6*(Jn[Zn[2]][0]+Jn[Zn[7]][0])-2*(Jn[Zn[0]][0]+Jn[Zn[15]][0])+3*(Jn[Zn[4]][0]+Jn[Zn[14]][0]))/9,(-4*Jn[Zn[3]][1]-Jn[Zn[12]][1]+6*(Jn[Zn[2]][1]+Jn[Zn[7]][1])-2*(Jn[Zn[0]][1]+Jn[Zn[15]][1])+3*(Jn[Zn[4]][1]+Jn[Zn[14]][1]))/9]),Zn[9]=Jn.length,Jn.push([(-4*Jn[Zn[12]][0]-Jn[Zn[3]][0]+6*(Jn[Zn[8]][0]+Jn[Zn[13]][0])-2*(Jn[Zn[0]][0]+Jn[Zn[15]][0])+3*(Jn[Zn[11]][0]+Jn[Zn[1]][0]))/9,(-4*Jn[Zn[12]][1]-Jn[Zn[3]][1]+6*(Jn[Zn[8]][1]+Jn[Zn[13]][1])-2*(Jn[Zn[0]][1]+Jn[Zn[15]][1])+3*(Jn[Zn[11]][1]+Jn[Zn[1]][1]))/9]),Zn[10]=Jn.length,Jn.push([(-4*Jn[Zn[15]][0]-Jn[Zn[0]][0]+6*(Jn[Zn[11]][0]+Jn[Zn[14]][0])-2*(Jn[Zn[12]][0]+Jn[Zn[3]][0])+3*(Jn[Zn[2]][0]+Jn[Zn[8]][0]))/9,(-4*Jn[Zn[15]][1]-Jn[Zn[0]][1]+6*(Jn[Zn[11]][1]+Jn[Zn[14]][1])-2*(Jn[Zn[12]][1]+Jn[Zn[3]][1])+3*(Jn[Zn[2]][1]+Jn[Zn[8]][1]))/9]),this.figures.push({type:"patch",coords:new Int32Array(Zn),colors:new Int32Array(Gn)})}}_decodeType7Shading(wi){const Jn=this.coords,pi=this.colors,Zn=new Int32Array(16),Gn=new Int32Array(4);for(;wi.hasData;){const mi=wi.readFlag();if(!(0<=mi&&mi<=3))throw new In.FormatError("Unknown type7 flag");const Wn=Jn.length;for(let Ii=0,xi=mi!==0?12:16;Ii<xi;Ii++)Jn.push(wi.readCoordinate());const ni=pi.length;for(let Ii=0,xi=mi!==0?2:4;Ii<xi;Ii++)pi.push(wi.readComponents());let li,Ai,gi,yi;switch(mi){case 0:Zn[12]=Wn+3,Zn[13]=Wn+4,Zn[14]=Wn+5,Zn[15]=Wn+6,Zn[8]=Wn+2,Zn[9]=Wn+13,Zn[10]=Wn+14,Zn[11]=Wn+7,Zn[4]=Wn+1,Zn[5]=Wn+12,Zn[6]=Wn+15,Zn[7]=Wn+8,Zn[0]=Wn,Zn[1]=Wn+11,Zn[2]=Wn+10,Zn[3]=Wn+9,Gn[2]=ni+1,Gn[3]=ni+2,Gn[0]=ni,Gn[1]=ni+3;break;case 1:li=Zn[12],Ai=Zn[13],gi=Zn[14],yi=Zn[15],Zn[12]=yi,Zn[13]=Wn+0,Zn[14]=Wn+1,Zn[15]=Wn+2,Zn[8]=gi,Zn[9]=Wn+9,Zn[10]=Wn+10,Zn[11]=Wn+3,Zn[4]=Ai,Zn[5]=Wn+8,Zn[6]=Wn+11,Zn[7]=Wn+4,Zn[0]=li,Zn[1]=Wn+7,Zn[2]=Wn+6,Zn[3]=Wn+5,li=Gn[2],Ai=Gn[3],Gn[2]=Ai,Gn[3]=ni,Gn[0]=li,Gn[1]=ni+1;break;case 2:li=Zn[15],Ai=Zn[11],Zn[12]=Zn[3],Zn[13]=Wn+0,Zn[14]=Wn+1,Zn[15]=Wn+2,Zn[8]=Zn[7],Zn[9]=Wn+9,Zn[10]=Wn+10,Zn[11]=Wn+3,Zn[4]=Ai,Zn[5]=Wn+8,Zn[6]=Wn+11,Zn[7]=Wn+4,Zn[0]=li,Zn[1]=Wn+7,Zn[2]=Wn+6,Zn[3]=Wn+5,li=Gn[3],Gn[2]=Gn[1],Gn[3]=ni,Gn[0]=li,Gn[1]=ni+1;break;case 3:Zn[12]=Zn[0],Zn[13]=Wn+0,Zn[14]=Wn+1,Zn[15]=Wn+2,Zn[8]=Zn[1],Zn[9]=Wn+9,Zn[10]=Wn+10,Zn[11]=Wn+3,Zn[4]=Zn[2],Zn[5]=Wn+8,Zn[6]=Wn+11,Zn[7]=Wn+4,Zn[0]=Zn[3],Zn[1]=Wn+7,Zn[2]=Wn+6,Zn[3]=Wn+5,Gn[2]=Gn[0],Gn[3]=ni,Gn[0]=Gn[1],Gn[1]=ni+1;break}this.figures.push({type:"patch",coords:new Int32Array(Zn),colors:new Int32Array(Gn)})}}_buildFigureFromPatch(wi){const Jn=this.figures[wi];(0,In.assert)(Jn.type==="patch","Unexpected patch mesh figure");const pi=this.coords,Zn=this.colors,Gn=Jn.coords,mi=Jn.colors,Wn=Math.min(pi[Gn[0]][0],pi[Gn[3]][0],pi[Gn[12]][0],pi[Gn[15]][0]),ni=Math.min(pi[Gn[0]][1],pi[Gn[3]][1],pi[Gn[12]][1],pi[Gn[15]][1]),li=Math.max(pi[Gn[0]][0],pi[Gn[3]][0],pi[Gn[12]][0],pi[Gn[15]][0]),Ai=Math.max(pi[Gn[0]][1],pi[Gn[3]][1],pi[Gn[12]][1],pi[Gn[15]][1]);let gi=Math.ceil((li-Wn)*di.TRIANGLE_DENSITY/(this.bounds[2]-this.bounds[0]));gi=Math.max(di.MIN_SPLIT_PATCH_CHUNKS_AMOUNT,Math.min(di.MAX_SPLIT_PATCH_CHUNKS_AMOUNT,gi));let yi=Math.ceil((Ai-ni)*di.TRIANGLE_DENSITY/(this.bounds[3]-this.bounds[1]));yi=Math.max(di.MIN_SPLIT_PATCH_CHUNKS_AMOUNT,Math.min(di.MAX_SPLIT_PATCH_CHUNKS_AMOUNT,yi));const Ii=gi+1,xi=new Int32Array((yi+1)*Ii),Qn=new Int32Array((yi+1)*Ii);let ai=0;const Vn=new Uint8Array(3),Yn=new Uint8Array(3),ci=Zn[mi[0]],bi=Zn[mi[1]],Ci=Zn[mi[2]],Fi=Zn[mi[3]],zi=Hn(yi),_i=Hn(gi);for(let ji=0;ji<=yi;ji++){Vn[0]=(ci[0]*(yi-ji)+Ci[0]*ji)/yi|0,Vn[1]=(ci[1]*(yi-ji)+Ci[1]*ji)/yi|0,Vn[2]=(ci[2]*(yi-ji)+Ci[2]*ji)/yi|0,Yn[0]=(bi[0]*(yi-ji)+Fi[0]*ji)/yi|0,Yn[1]=(bi[1]*(yi-ji)+Fi[1]*ji)/yi|0,Yn[2]=(bi[2]*(yi-ji)+Fi[2]*ji)/yi|0;for(let Pi=0;Pi<=gi;Pi++,ai++){if((ji===0||ji===yi)&&(Pi===0||Pi===gi))continue;let Ni=0,Si=0,Ti=0;for(let Mi=0;Mi<=3;Mi++)for(let Ui=0;Ui<=3;Ui++,Ti++){const Hi=zi[ji][Mi]*_i[Pi][Ui];Ni+=pi[Gn[Ti]][0]*Hi,Si+=pi[Gn[Ti]][1]*Hi}xi[ai]=pi.length,pi.push([Ni,Si]),Qn[ai]=Zn.length;const Ri=new Uint8Array(3);Ri[0]=(Vn[0]*(gi-Pi)+Yn[0]*Pi)/gi|0,Ri[1]=(Vn[1]*(gi-Pi)+Yn[1]*Pi)/gi|0,Ri[2]=(Vn[2]*(gi-Pi)+Yn[2]*Pi)/gi|0,Zn.push(Ri)}}xi[0]=Gn[0],Qn[0]=mi[0],xi[gi]=Gn[3],Qn[gi]=mi[1],xi[Ii*yi]=Gn[12],Qn[Ii*yi]=mi[2],xi[Ii*yi+gi]=Gn[15],Qn[Ii*yi+gi]=mi[3],this.figures[wi]={type:"lattice",coords:xi,colors:Qn,verticesPerRow:Ii}}_updateBounds(){let wi=this.coords[0][0],Jn=this.coords[0][1],pi=wi,Zn=Jn;for(let Gn=1,mi=this.coords.length;Gn<mi;Gn++){const Wn=this.coords[Gn][0],ni=this.coords[Gn][1];wi=wi>Wn?Wn:wi,Jn=Jn>ni?ni:Jn,pi=pi<Wn?Wn:pi,Zn=Zn<ni?ni:Zn}this.bounds=[wi,Jn,pi,Zn]}_packData(){let wi,Jn,pi,Zn;const Gn=this.coords,mi=new Float32Array(Gn.length*2);for(wi=0,pi=0,Jn=Gn.length;wi<Jn;wi++){const Ai=Gn[wi];mi[pi++]=Ai[0],mi[pi++]=Ai[1]}this.coords=mi;const Wn=this.colors,ni=new Uint8Array(Wn.length*3);for(wi=0,pi=0,Jn=Wn.length;wi<Jn;wi++){const Ai=Wn[wi];ni[pi++]=Ai[0],ni[pi++]=Ai[1],ni[pi++]=Ai[2]}this.colors=ni;const li=this.figures;for(wi=0,Jn=li.length;wi<Jn;wi++){const Ai=li[wi],gi=Ai.coords,yi=Ai.colors;for(pi=0,Zn=gi.length;pi<Zn;pi++)gi[pi]*=2,yi[pi]*=3}}getIR(){return["Mesh",this.shadingType,this.coords,this.colors,this.figures,this.bounds,this.bbox,this.background]}};ta(di,"MIN_SPLIT_PATCH_CHUNKS_AMOUNT",3),ta(di,"MAX_SPLIT_PATCH_CHUNKS_AMOUNT",20),ta(di,"TRIANGLE_DENSITY",20);let hi=di;class Xn extends ui{getIR(){return["Dummy"]}}function ii(fi,wi,Jn){const pi=wi.getArray("Matrix"),Zn=In.Util.normalizeRect(wi.getArray("BBox")),Gn=wi.get("XStep"),mi=wi.get("YStep"),Wn=wi.get("PaintType"),ni=wi.get("TilingType");if(Zn[2]-Zn[0]===0||Zn[3]-Zn[1]===0)throw new In.FormatError(`Invalid getTilingPatternIR /BBox array: [${Zn}].`);return["TilingPattern",Jn,fi,pi,Zn,Gn,mi,Wn,ni]}},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.getXfaFontDict=Hn,Mn.getXfaFontName=Bn;var In=ti(52),Ln=ti(4),jn=ti(53),Cn=ti(54),Tn=ti(55),Rn=ti(56),ui=ti(3),si=ti(38);const ei=(0,ui.getLookupTableFactory)(function(On){On["MyriadPro-Regular"]=On["PdfJS-Fallback-Regular"]={name:"LiberationSans-Regular",factors:Tn.MyriadProRegularFactors,baseWidths:Cn.LiberationSansRegularWidths,baseMapping:Cn.LiberationSansRegularMapping,metrics:Tn.MyriadProRegularMetrics},On["MyriadPro-Bold"]=On["PdfJS-Fallback-Bold"]={name:"LiberationSans-Bold",factors:Tn.MyriadProBoldFactors,baseWidths:Cn.LiberationSansBoldWidths,baseMapping:Cn.LiberationSansBoldMapping,metrics:Tn.MyriadProBoldMetrics},On["MyriadPro-It"]=On["MyriadPro-Italic"]=On["PdfJS-Fallback-Italic"]={name:"LiberationSans-Italic",factors:Tn.MyriadProItalicFactors,baseWidths:Cn.LiberationSansItalicWidths,baseMapping:Cn.LiberationSansItalicMapping,metrics:Tn.MyriadProItalicMetrics},On["MyriadPro-BoldIt"]=On["MyriadPro-BoldItalic"]=On["PdfJS-Fallback-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:Tn.MyriadProBoldItalicFactors,baseWidths:Cn.LiberationSansBoldItalicWidths,baseMapping:Cn.LiberationSansBoldItalicMapping,metrics:Tn.MyriadProBoldItalicMetrics},On.ArialMT=On.Arial=On["Arial-Regular"]={name:"LiberationSans-Regular",baseWidths:Cn.LiberationSansRegularWidths,baseMapping:Cn.LiberationSansRegularMapping},On["Arial-BoldMT"]=On["Arial-Bold"]={name:"LiberationSans-Bold",baseWidths:Cn.LiberationSansBoldWidths,baseMapping:Cn.LiberationSansBoldMapping},On["Arial-ItalicMT"]=On["Arial-Italic"]={name:"LiberationSans-Italic",baseWidths:Cn.LiberationSansItalicWidths,baseMapping:Cn.LiberationSansItalicMapping},On["Arial-BoldItalicMT"]=On["Arial-BoldItalic"]={name:"LiberationSans-BoldItalic",baseWidths:Cn.LiberationSansBoldItalicWidths,baseMapping:Cn.LiberationSansBoldItalicMapping},On["Calibri-Regular"]={name:"LiberationSans-Regular",factors:In.CalibriRegularFactors,baseWidths:Cn.LiberationSansRegularWidths,baseMapping:Cn.LiberationSansRegularMapping,metrics:In.CalibriRegularMetrics},On["Calibri-Bold"]={name:"LiberationSans-Bold",factors:In.CalibriBoldFactors,baseWidths:Cn.LiberationSansBoldWidths,baseMapping:Cn.LiberationSansBoldMapping,metrics:In.CalibriBoldMetrics},On["Calibri-Italic"]={name:"LiberationSans-Italic",factors:In.CalibriItalicFactors,baseWidths:Cn.LiberationSansItalicWidths,baseMapping:Cn.LiberationSansItalicMapping,metrics:In.CalibriItalicMetrics},On["Calibri-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:In.CalibriBoldItalicFactors,baseWidths:Cn.LiberationSansBoldItalicWidths,baseMapping:Cn.LiberationSansBoldItalicMapping,metrics:In.CalibriBoldItalicMetrics},On["Segoeui-Regular"]={name:"LiberationSans-Regular",factors:Rn.SegoeuiRegularFactors,baseWidths:Cn.LiberationSansRegularWidths,baseMapping:Cn.LiberationSansRegularMapping,metrics:Rn.SegoeuiRegularMetrics},On["Segoeui-Bold"]={name:"LiberationSans-Bold",factors:Rn.SegoeuiBoldFactors,baseWidths:Cn.LiberationSansBoldWidths,baseMapping:Cn.LiberationSansBoldMapping,metrics:Rn.SegoeuiBoldMetrics},On["Segoeui-Italic"]={name:"LiberationSans-Italic",factors:Rn.SegoeuiItalicFactors,baseWidths:Cn.LiberationSansItalicWidths,baseMapping:Cn.LiberationSansItalicMapping,metrics:Rn.SegoeuiItalicMetrics},On["Segoeui-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:Rn.SegoeuiBoldItalicFactors,baseWidths:Cn.LiberationSansBoldItalicWidths,baseMapping:Cn.LiberationSansBoldItalicMapping,metrics:Rn.SegoeuiBoldItalicMetrics},On["Helvetica-Regular"]=On.Helvetica={name:"LiberationSans-Regular",factors:jn.HelveticaRegularFactors,baseWidths:Cn.LiberationSansRegularWidths,baseMapping:Cn.LiberationSansRegularMapping,metrics:jn.HelveticaRegularMetrics},On["Helvetica-Bold"]={name:"LiberationSans-Bold",factors:jn.HelveticaBoldFactors,baseWidths:Cn.LiberationSansBoldWidths,baseMapping:Cn.LiberationSansBoldMapping,metrics:jn.HelveticaBoldMetrics},On["Helvetica-Italic"]={name:"LiberationSans-Italic",factors:jn.HelveticaItalicFactors,baseWidths:Cn.LiberationSansItalicWidths,baseMapping:Cn.LiberationSansItalicMapping,metrics:jn.HelveticaItalicMetrics},On["Helvetica-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:jn.HelveticaBoldItalicFactors,baseWidths:Cn.LiberationSansBoldItalicWidths,baseMapping:Cn.LiberationSansBoldItalicMapping,metrics:jn.HelveticaBoldItalicMetrics}});function Bn(On){const hi=(0,si.normalizeFontName)(On);return ei()[hi]}function Nn(On){const hi=Bn(On);if(!hi)return null;const{baseWidths:Xn,baseMapping:ii,factors:ri}=hi,di=ri?Xn.map((pi,Zn)=>pi*ri[Zn]):Xn;let fi=-2,wi;const Jn=[];for(const[pi,Zn]of ii.map((Gn,mi)=>[Gn,mi]).sort(([Gn],[mi])=>Gn-mi))pi!==-1&&(pi===fi+1?(wi.push(di[Zn]),fi+=1):(fi=pi,wi=[di[Zn]],Jn.push(pi,wi)));return Jn}function Hn(On){const hi=Nn(On),Xn=new Ln.Dict(null);Xn.set("BaseFont",Ln.Name.get(On)),Xn.set("Type",Ln.Name.get("Font")),Xn.set("Subtype",Ln.Name.get("CIDFontType2")),Xn.set("Encoding",Ln.Name.get("Identity-H")),Xn.set("CIDToGIDMap",Ln.Name.get("Identity")),Xn.set("W",hi),Xn.set("FirstChar",hi[0]),Xn.set("LastChar",hi.at(-2)+hi.at(-1).length-1);const ii=new Ln.Dict(null);Xn.set("FontDescriptor",ii);const ri=new Ln.Dict(null);return ri.set("Ordering","Identity"),ri.set("Registry","Adobe"),ri.set("Supplement",0),Xn.set("CIDSystemInfo",ri),Xn}},(oi,Mn)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.CalibriRegularMetrics=Mn.CalibriRegularFactors=Mn.CalibriItalicMetrics=Mn.CalibriItalicFactors=Mn.CalibriBoldMetrics=Mn.CalibriBoldItalicMetrics=Mn.CalibriBoldItalicFactors=Mn.CalibriBoldFactors=void 0;const ti=[1.3877,1,1,1,.97801,.92482,.89552,.91133,.81988,.97566,.98152,.93548,.93548,1.2798,.85284,.92794,1,.96134,1.54657,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.82845,.82845,.85284,.85284,.85284,.75859,.92138,.83908,.7762,.73293,.87289,.73133,.7514,.81921,.87356,.95958,.59526,.75727,.69225,1.04924,.9121,.86943,.79795,.88198,.77958,.70864,.81055,.90399,.88653,.96017,.82577,.77892,.78257,.97507,1.54657,.97507,.85284,.89552,.90176,.88762,.8785,.75241,.8785,.90518,.95015,.77618,.8785,.88401,.91916,.86304,.88401,.91488,.8785,.8801,.8785,.8785,.91343,.7173,1.04106,.8785,.85075,.95794,.82616,.85162,.79492,.88331,1.69808,.88331,.85284,.97801,.89552,.91133,.89552,.91133,1.7801,.89552,1.24487,1.13254,1.12401,.96839,.85284,.68787,.70645,.85592,.90747,1.01466,1.0088,.90323,1,1.07463,1,.91056,.75806,1.19118,.96839,.78864,.82845,.84133,.75859,.83908,.83908,.83908,.83908,.83908,.83908,.77539,.73293,.73133,.73133,.73133,.73133,.95958,.95958,.95958,.95958,.88506,.9121,.86943,.86943,.86943,.86943,.86943,.85284,.87508,.90399,.90399,.90399,.90399,.77892,.79795,.90807,.88762,.88762,.88762,.88762,.88762,.88762,.8715,.75241,.90518,.90518,.90518,.90518,.88401,.88401,.88401,.88401,.8785,.8785,.8801,.8801,.8801,.8801,.8801,.90747,.89049,.8785,.8785,.8785,.8785,.85162,.8785,.85162,.83908,.88762,.83908,.88762,.83908,.88762,.73293,.75241,.73293,.75241,.73293,.75241,.73293,.75241,.87289,.83016,.88506,.93125,.73133,.90518,.73133,.90518,.73133,.90518,.73133,.90518,.73133,.90518,.81921,.77618,.81921,.77618,.81921,.77618,1,1,.87356,.8785,.91075,.89608,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.76229,.90167,.59526,.91916,1,1,.86304,.69225,.88401,1,1,.70424,.79468,.91926,.88175,.70823,.94903,.9121,.8785,1,1,.9121,.8785,.87802,.88656,.8785,.86943,.8801,.86943,.8801,.86943,.8801,.87402,.89291,.77958,.91343,1,1,.77958,.91343,.70864,.7173,.70864,.7173,.70864,.7173,.70864,.7173,1,1,.81055,.75841,.81055,1.06452,.90399,.8785,.90399,.8785,.90399,.8785,.90399,.8785,.90399,.8785,.90399,.8785,.96017,.95794,.77892,.85162,.77892,.78257,.79492,.78257,.79492,.78257,.79492,.9297,.56892,.83908,.88762,.77539,.8715,.87508,.89049,1,1,.81055,1.04106,1.20528,1.20528,1,1.15543,.70674,.98387,.94721,1.33431,1.45894,.95161,1.06303,.83908,.80352,.57184,.6965,.56289,.82001,.56029,.81235,1.02988,.83908,.7762,.68156,.80367,.73133,.78257,.87356,.86943,.95958,.75727,.89019,1.04924,.9121,.7648,.86943,.87356,.79795,.78275,.81055,.77892,.9762,.82577,.99819,.84896,.95958,.77892,.96108,1.01407,.89049,1.02988,.94211,.96108,.8936,.84021,.87842,.96399,.79109,.89049,1.00813,1.02988,.86077,.87445,.92099,.84723,.86513,.8801,.75638,.85714,.78216,.79586,.87965,.94211,.97747,.78287,.97926,.84971,1.02988,.94211,.8801,.94211,.84971,.73133,1,1,1,1,1,1,1,1,1,1,1,1,.90264,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.90518,1,1,1,1,1,1,1,1,1,1,1,1,.90548,1,1,1,1,1,1,.96017,.95794,.96017,.95794,.96017,.95794,.77892,.85162,1,1,.89552,.90527,1,.90363,.92794,.92794,.92794,.92794,.87012,.87012,.87012,.89552,.89552,1.42259,.71143,1.06152,1,1,1.03372,1.03372,.97171,1.4956,2.2807,.93835,.83406,.91133,.84107,.91133,1,1,1,.72021,1,1.23108,.83489,.88525,.88525,.81499,.90527,1.81055,.90527,1.81055,1.31006,1.53711,.94434,1.08696,1,.95018,.77192,.85284,.90747,1.17534,.69825,.9716,1.37077,.90747,.90747,.85356,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.08004,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,.90727,.90727,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];Mn.CalibriBoldFactors=ti;const In={lineHeight:1.2207,lineGap:.2207};Mn.CalibriBoldMetrics=In;const Ln=[1.3877,1,1,1,.97801,.92482,.89552,.91133,.81988,.97566,.98152,.93548,.93548,1.2798,.85284,.92794,1,.96134,1.56239,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.82845,.82845,.85284,.85284,.85284,.75859,.92138,.83908,.7762,.71805,.87289,.73133,.7514,.81921,.87356,.95958,.59526,.75727,.69225,1.04924,.90872,.85938,.79795,.87068,.77958,.69766,.81055,.90399,.88653,.96068,.82577,.77892,.78257,.97507,1.529,.97507,.85284,.89552,.90176,.94908,.86411,.74012,.86411,.88323,.95015,.86411,.86331,.88401,.91916,.86304,.88401,.9039,.86331,.86331,.86411,.86411,.90464,.70852,1.04106,.86331,.84372,.95794,.82616,.84548,.79492,.88331,1.69808,.88331,.85284,.97801,.89552,.91133,.89552,.91133,1.7801,.89552,1.24487,1.13254,1.19129,.96839,.85284,.68787,.70645,.85592,.90747,1.01466,1.0088,.90323,1,1.07463,1,.91056,.75806,1.19118,.96839,.78864,.82845,.84133,.75859,.83908,.83908,.83908,.83908,.83908,.83908,.77539,.71805,.73133,.73133,.73133,.73133,.95958,.95958,.95958,.95958,.88506,.90872,.85938,.85938,.85938,.85938,.85938,.85284,.87068,.90399,.90399,.90399,.90399,.77892,.79795,.90807,.94908,.94908,.94908,.94908,.94908,.94908,.85887,.74012,.88323,.88323,.88323,.88323,.88401,.88401,.88401,.88401,.8785,.86331,.86331,.86331,.86331,.86331,.86331,.90747,.89049,.86331,.86331,.86331,.86331,.84548,.86411,.84548,.83908,.94908,.83908,.94908,.83908,.94908,.71805,.74012,.71805,.74012,.71805,.74012,.71805,.74012,.87289,.79538,.88506,.92726,.73133,.88323,.73133,.88323,.73133,.88323,.73133,.88323,.73133,.88323,.81921,.86411,.81921,.86411,.81921,.86411,1,1,.87356,.86331,.91075,.8777,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.76467,.90167,.59526,.91916,1,1,.86304,.69225,.88401,1,1,.70424,.77312,.91926,.88175,.70823,.94903,.90872,.86331,1,1,.90872,.86331,.86906,.88116,.86331,.85938,.86331,.85938,.86331,.85938,.86331,.87402,.86549,.77958,.90464,1,1,.77958,.90464,.69766,.70852,.69766,.70852,.69766,.70852,.69766,.70852,1,1,.81055,.75841,.81055,1.06452,.90399,.86331,.90399,.86331,.90399,.86331,.90399,.86331,.90399,.86331,.90399,.86331,.96068,.95794,.77892,.84548,.77892,.78257,.79492,.78257,.79492,.78257,.79492,.9297,.56892,.83908,.94908,.77539,.85887,.87068,.89049,1,1,.81055,1.04106,1.20528,1.20528,1,1.15543,.70088,.98387,.94721,1.33431,1.45894,.95161,1.48387,.83908,.80352,.57118,.6965,.56347,.79179,.55853,.80346,1.02988,.83908,.7762,.67174,.86036,.73133,.78257,.87356,.86441,.95958,.75727,.89019,1.04924,.90872,.74889,.85938,.87891,.79795,.7957,.81055,.77892,.97447,.82577,.97466,.87179,.95958,.77892,.94252,.95612,.8753,1.02988,.92733,.94252,.87411,.84021,.8728,.95612,.74081,.8753,1.02189,1.02988,.84814,.87445,.91822,.84723,.85668,.86331,.81344,.87581,.76422,.82046,.96057,.92733,.99375,.78022,.95452,.86015,1.02988,.92733,.86331,.92733,.86015,.73133,1,1,1,1,1,1,1,1,1,1,1,1,.90631,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.88323,1,1,1,1,1,1,1,1,1,1,1,1,.85174,1,1,1,1,1,1,.96068,.95794,.96068,.95794,.96068,.95794,.77892,.84548,1,1,.89552,.90527,1,.90363,.92794,.92794,.92794,.89807,.87012,.87012,.87012,.89552,.89552,1.42259,.71094,1.06152,1,1,1.03372,1.03372,.97171,1.4956,2.2807,.92972,.83406,.91133,.83326,.91133,1,1,1,.72021,1,1.23108,.83489,.88525,.88525,.81499,.90616,1.81055,.90527,1.81055,1.3107,1.53711,.94434,1.08696,1,.95018,.77192,.85284,.90747,1.17534,.69825,.9716,1.37077,.90747,.90747,.85356,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.08004,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,.90727,.90727,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];Mn.CalibriBoldItalicFactors=Ln;const jn={lineHeight:1.2207,lineGap:.2207};Mn.CalibriBoldItalicMetrics=jn;const Cn=[1.3877,1,1,1,1.17223,1.1293,.89552,.91133,.80395,1.02269,1.15601,.91056,.91056,1.2798,.85284,.89807,1,.90861,1.39543,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.96309,.96309,.85284,.85284,.85284,.83319,.88071,.8675,.81552,.72346,.85193,.73206,.7522,.81105,.86275,.90685,.6377,.77892,.75593,1.02638,.89249,.84118,.77452,.85374,.75186,.67789,.79776,.88844,.85066,.94309,.77818,.7306,.76659,1.10369,1.38313,1.10369,1.06139,.89552,.8739,.9245,.9245,.83203,.9245,.85865,1.09842,.9245,.9245,1.03297,1.07692,.90918,1.03297,.94959,.9245,.92274,.9245,.9245,1.02933,.77832,1.20562,.9245,.8916,.98986,.86621,.89453,.79004,.94152,1.77256,.94152,.85284,.97801,.89552,.91133,.89552,.91133,1.91729,.89552,1.17889,1.13254,1.16359,.92098,.85284,.68787,.71353,.84737,.90747,1.0088,1.0044,.87683,1,1.09091,1,.92229,.739,1.15642,.92098,.76288,.80504,.80972,.75859,.8675,.8675,.8675,.8675,.8675,.8675,.76318,.72346,.73206,.73206,.73206,.73206,.90685,.90685,.90685,.90685,.86477,.89249,.84118,.84118,.84118,.84118,.84118,.85284,.84557,.88844,.88844,.88844,.88844,.7306,.77452,.86331,.9245,.9245,.9245,.9245,.9245,.9245,.84843,.83203,.85865,.85865,.85865,.85865,.82601,.82601,.82601,.82601,.94469,.9245,.92274,.92274,.92274,.92274,.92274,.90747,.86651,.9245,.9245,.9245,.9245,.89453,.9245,.89453,.8675,.9245,.8675,.9245,.8675,.9245,.72346,.83203,.72346,.83203,.72346,.83203,.72346,.83203,.85193,.8875,.86477,.99034,.73206,.85865,.73206,.85865,.73206,.85865,.73206,.85865,.73206,.85865,.81105,.9245,.81105,.9245,.81105,.9245,1,1,.86275,.9245,.90872,.93591,.90685,.82601,.90685,.82601,.90685,.82601,.90685,1.03297,.90685,.82601,.77896,1.05611,.6377,1.07692,1,1,.90918,.75593,1.03297,1,1,.76032,.9375,.98156,.93407,.77261,1.11429,.89249,.9245,1,1,.89249,.9245,.92534,.86698,.9245,.84118,.92274,.84118,.92274,.84118,.92274,.8667,.86291,.75186,1.02933,1,1,.75186,1.02933,.67789,.77832,.67789,.77832,.67789,.77832,.67789,.77832,1,1,.79776,.97655,.79776,1.23023,.88844,.9245,.88844,.9245,.88844,.9245,.88844,.9245,.88844,.9245,.88844,.9245,.94309,.98986,.7306,.89453,.7306,.76659,.79004,.76659,.79004,.76659,.79004,1.09231,.54873,.8675,.9245,.76318,.84843,.84557,.86651,1,1,.79776,1.20562,1.18622,1.18622,1,1.1437,.67009,.96334,.93695,1.35191,1.40909,.95161,1.48387,.8675,.90861,.6192,.7363,.64824,.82411,.56321,.85696,1.23516,.8675,.81552,.7286,.84134,.73206,.76659,.86275,.84369,.90685,.77892,.85871,1.02638,.89249,.75828,.84118,.85984,.77452,.76466,.79776,.7306,.90782,.77818,.903,.87291,.90685,.7306,.99058,1.03667,.94635,1.23516,.9849,.99058,.92393,.8916,.942,1.03667,.75026,.94635,1.0297,1.23516,.90918,.94048,.98217,.89746,.84153,.92274,.82507,.88832,.84438,.88178,1.03525,.9849,1.00225,.78086,.97248,.89404,1.23516,.9849,.92274,.9849,.89404,.73206,1,1,1,1,1,1,1,1,1,1,1,1,.89693,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.85865,1,1,1,1,1,1,1,1,1,1,1,1,.90933,1,1,1,1,1,1,.94309,.98986,.94309,.98986,.94309,.98986,.7306,.89453,1,1,.89552,.90527,1,.90186,1.12308,1.12308,1.12308,1.12308,1.2566,1.2566,1.2566,.89552,.89552,1.42259,.68994,1.03809,1,1,1.0176,1.0176,1.11523,1.4956,2.01462,.97858,.82616,.91133,.83437,.91133,1,1,1,.70508,1,1.23108,.79801,.84426,.84426,.774,.90572,1.81055,.90749,1.81055,1.28809,1.55469,.94434,1.07806,1,.97094,.7589,.85284,.90747,1.19658,.69825,.97622,1.33512,.90747,.90747,.85284,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.0336,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,1.05859,1.05859,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];Mn.CalibriItalicFactors=Cn;const Tn={lineHeight:1.2207,lineGap:.2207};Mn.CalibriItalicMetrics=Tn;const Rn=[1.3877,1,1,1,1.17223,1.1293,.89552,.91133,.80395,1.02269,1.15601,.91056,.91056,1.2798,.85284,.89807,1,.90861,1.39016,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.96309,.96309,.85284,.85284,.85284,.83319,.88071,.8675,.81552,.73834,.85193,.73206,.7522,.81105,.86275,.90685,.6377,.77892,.75593,1.02638,.89385,.85122,.77452,.86503,.75186,.68887,.79776,.88844,.85066,.94258,.77818,.7306,.76659,1.10369,1.39016,1.10369,1.06139,.89552,.8739,.86128,.94469,.8457,.94469,.89464,1.09842,.84636,.94469,1.03297,1.07692,.90918,1.03297,.95897,.94469,.9482,.94469,.94469,1.04692,.78223,1.20562,.94469,.90332,.98986,.86621,.90527,.79004,.94152,1.77256,.94152,.85284,.97801,.89552,.91133,.89552,.91133,1.91729,.89552,1.17889,1.13254,1.08707,.92098,.85284,.68787,.71353,.84737,.90747,1.0088,1.0044,.87683,1,1.09091,1,.92229,.739,1.15642,.92098,.76288,.80504,.80972,.75859,.8675,.8675,.8675,.8675,.8675,.8675,.76318,.73834,.73206,.73206,.73206,.73206,.90685,.90685,.90685,.90685,.86477,.89385,.85122,.85122,.85122,.85122,.85122,.85284,.85311,.88844,.88844,.88844,.88844,.7306,.77452,.86331,.86128,.86128,.86128,.86128,.86128,.86128,.8693,.8457,.89464,.89464,.89464,.89464,.82601,.82601,.82601,.82601,.94469,.94469,.9482,.9482,.9482,.9482,.9482,.90747,.86651,.94469,.94469,.94469,.94469,.90527,.94469,.90527,.8675,.86128,.8675,.86128,.8675,.86128,.73834,.8457,.73834,.8457,.73834,.8457,.73834,.8457,.85193,.92454,.86477,.9921,.73206,.89464,.73206,.89464,.73206,.89464,.73206,.89464,.73206,.89464,.81105,.84636,.81105,.84636,.81105,.84636,1,1,.86275,.94469,.90872,.95786,.90685,.82601,.90685,.82601,.90685,.82601,.90685,1.03297,.90685,.82601,.77741,1.05611,.6377,1.07692,1,1,.90918,.75593,1.03297,1,1,.76032,.90452,.98156,1.11842,.77261,1.11429,.89385,.94469,1,1,.89385,.94469,.95877,.86901,.94469,.85122,.9482,.85122,.9482,.85122,.9482,.8667,.90016,.75186,1.04692,1,1,.75186,1.04692,.68887,.78223,.68887,.78223,.68887,.78223,.68887,.78223,1,1,.79776,.92188,.79776,1.23023,.88844,.94469,.88844,.94469,.88844,.94469,.88844,.94469,.88844,.94469,.88844,.94469,.94258,.98986,.7306,.90527,.7306,.76659,.79004,.76659,.79004,.76659,.79004,1.09231,.54873,.8675,.86128,.76318,.8693,.85311,.86651,1,1,.79776,1.20562,1.18622,1.18622,1,1.1437,.67742,.96334,.93695,1.35191,1.40909,.95161,1.48387,.86686,.90861,.62267,.74359,.65649,.85498,.56963,.88254,1.23516,.8675,.81552,.75443,.84503,.73206,.76659,.86275,.85122,.90685,.77892,.85746,1.02638,.89385,.75657,.85122,.86275,.77452,.74171,.79776,.7306,.95165,.77818,.89772,.88831,.90685,.7306,.98142,1.02191,.96576,1.23516,.99018,.98142,.9236,.89258,.94035,1.02191,.78848,.96576,.9561,1.23516,.90918,.92578,.95424,.89746,.83969,.9482,.80113,.89442,.85208,.86155,.98022,.99018,1.00452,.81209,.99247,.89181,1.23516,.99018,.9482,.99018,.89181,.73206,1,1,1,1,1,1,1,1,1,1,1,1,.88844,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.89464,1,1,1,1,1,1,1,1,1,1,1,1,.96766,1,1,1,1,1,1,.94258,.98986,.94258,.98986,.94258,.98986,.7306,.90527,1,1,.89552,.90527,1,.90186,1.12308,1.12308,1.12308,1.12308,1.2566,1.2566,1.2566,.89552,.89552,1.42259,.69043,1.03809,1,1,1.0176,1.0176,1.11523,1.4956,2.01462,.99331,.82616,.91133,.84286,.91133,1,1,1,.70508,1,1.23108,.79801,.84426,.84426,.774,.90527,1.81055,.90527,1.81055,1.28809,1.55469,.94434,1.07806,1,.97094,.7589,.85284,.90747,1.19658,.69825,.97622,1.33512,.90747,.90747,.85356,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.0336,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,1.05859,1.05859,1,1,1,1.07185,.99413,.96334,1.08065,1,1,1,1,1,1,1,1,1,1,1];Mn.CalibriRegularFactors=Rn;const ui={lineHeight:1.2207,lineGap:.2207};Mn.CalibriRegularMetrics=ui},(oi,Mn)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.HelveticaRegularMetrics=Mn.HelveticaRegularFactors=Mn.HelveticaItalicMetrics=Mn.HelveticaItalicFactors=Mn.HelveticaBoldMetrics=Mn.HelveticaBoldItalicMetrics=Mn.HelveticaBoldItalicFactors=Mn.HelveticaBoldFactors=void 0;const ti=[.76116,1,1,1.0006,.99998,.99974,.99973,.99973,.99982,.99977,1.00087,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99998,1,1.00003,1.00003,1.00003,1.00026,.9999,.99977,.99977,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,.99973,.99977,1.00026,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,.99998,1.0006,.99998,1.00003,.99973,.99998,.99973,1.00026,.99973,1.00026,.99973,.99998,1.00026,1.00026,1.0006,1.0006,.99973,1.0006,.99982,1.00026,1.00026,1.00026,1.00026,.99959,.99973,.99998,1.00026,.99973,1.00022,.99973,.99973,1,.99959,1.00077,.99959,1.00003,.99998,.99973,.99973,.99973,.99973,1.00077,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.99973,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,.99977,.99977,.99977,.99977,.99977,.99977,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,.99973,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.06409,1.00026,1.00026,1.00026,1.00026,1.00026,.99973,1.00026,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,1.03374,.99977,1.00026,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,.99977,1.00026,.99977,1.00026,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.00042,.99973,.99973,1.0006,.99977,.99973,.99973,1.00026,1.0006,1.00026,1.0006,1.00026,1.03828,1.00026,.99999,1.00026,1.0006,.99977,1.00026,.99977,1.00026,.99977,1.00026,.9993,.9998,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1,1.00016,.99977,.99959,.99977,.99959,.99977,.99959,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00026,.99998,1.00026,.8121,1.00026,.99998,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,1.00016,1.00022,1.00001,.99973,1.00001,1.00026,1,1.00026,1,1.00026,1,1.0006,.99973,.99977,.99973,1,.99982,1.00022,1.00026,1.00001,.99973,1.00026,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,1.00034,.99977,1,.99997,1.00026,1.00078,1.00036,.99973,1.00013,1.0006,.99977,.99977,.99988,.85148,1.00001,1.00026,.99977,1.00022,1.0006,.99977,1.00001,.99999,.99977,1.00069,1.00022,.99977,1.00001,.99984,1.00026,1.00001,1.00024,1.00001,.9999,1,1.0006,1.00001,1.00041,.99962,1.00026,1.0006,.99995,1.00041,.99942,.99973,.99927,1.00082,.99902,1.00026,1.00087,1.0006,1.00069,.99973,.99867,.99973,.9993,1.00026,1.00049,1.00056,1,.99988,.99935,.99995,.99954,1.00055,.99945,1.00032,1.0006,.99995,1.00026,.99995,1.00032,1.00001,1.00008,.99971,1.00019,.9994,1.00001,1.0006,1.00044,.99973,1.00023,1.00047,1,.99942,.99561,.99989,1.00035,.99977,1.00035,.99977,1.00019,.99944,1.00001,1.00021,.99926,1.00035,1.00035,.99942,1.00048,.99999,.99977,1.00022,1.00035,1.00001,.99977,1.00026,.99989,1.00057,1.00001,.99936,1.00052,1.00012,.99996,1.00043,1,1.00035,.9994,.99976,1.00035,.99973,1.00052,1.00041,1.00119,1.00037,.99973,1.00002,.99986,1.00041,1.00041,.99902,.9996,1.00034,.99999,1.00026,.99999,1.00026,.99973,1.00052,.99973,1,.99973,1.00041,1.00075,.9994,1.0003,.99999,1,1.00041,.99955,1,.99915,.99973,.99973,1.00026,1.00119,.99955,.99973,1.0006,.99911,1.0006,1.00026,.99972,1.00026,.99902,1.00041,.99973,.99999,1,1,1.00038,1.0005,1.00016,1.00022,1.00016,1.00022,1.00016,1.00022,1.00001,.99973,1,1,.99973,1,1,.99955,1.0006,1.0006,1.0006,1.0006,1,1,1,.99973,.99973,.99972,1,1,1.00106,.99999,.99998,.99998,.99999,.99998,1.66475,1,.99973,.99973,1.00023,.99973,.99971,1.00047,1.00023,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1,1,1,1,1,1,1,.99972,1,1.20985,1.39713,1.00003,1.00031,1.00015,1,.99561,1.00027,1.00031,1.00031,.99915,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.99972,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,.99998,.99998,.99998,.99998,1,1,1,1,1,1,1,1,1,1,1];Mn.HelveticaBoldFactors=ti;const In={lineHeight:1.2,lineGap:.2};Mn.HelveticaBoldMetrics=In;const Ln=[.76116,1,1,1.0006,.99998,.99974,.99973,.99973,.99982,.99977,1.00087,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99998,1,1.00003,1.00003,1.00003,1.00026,.9999,.99977,.99977,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,.99973,.99977,1.00026,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,.99998,1.0006,.99998,1.00003,.99973,.99998,.99973,1.00026,.99973,1.00026,.99973,.99998,1.00026,1.00026,1.0006,1.0006,.99973,1.0006,.99982,1.00026,1.00026,1.00026,1.00026,.99959,.99973,.99998,1.00026,.99973,1.00022,.99973,.99973,1,.99959,1.00077,.99959,1.00003,.99998,.99973,.99973,.99973,.99973,1.00077,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.99973,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,.99977,.99977,.99977,.99977,.99977,.99977,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,.99973,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.06409,1.00026,1.00026,1.00026,1.00026,1.00026,.99973,1.00026,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,1.0044,.99977,1.00026,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,.99977,1.00026,.99977,1.00026,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,.99971,.99973,.99973,1.0006,.99977,.99973,.99973,1.00026,1.0006,1.00026,1.0006,1.00026,1.01011,1.00026,.99999,1.00026,1.0006,.99977,1.00026,.99977,1.00026,.99977,1.00026,.9993,.9998,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1,1.00016,.99977,.99959,.99977,.99959,.99977,.99959,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00026,.99998,1.00026,.8121,1.00026,.99998,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,1.00016,1.00022,1.00001,.99973,1.00001,1.00026,1,1.00026,1,1.00026,1,1.0006,.99973,.99977,.99973,1,.99982,1.00022,1.00026,1.00001,.99973,1.00026,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99977,1,1,1.00026,.99969,.99972,.99981,.9998,1.0006,.99977,.99977,1.00022,.91155,1.00001,1.00026,.99977,1.00022,1.0006,.99977,1.00001,.99999,.99977,.99966,1.00022,1.00032,1.00001,.99944,1.00026,1.00001,.99968,1.00001,1.00047,1,1.0006,1.00001,.99981,1.00101,1.00026,1.0006,.99948,.99981,1.00064,.99973,.99942,1.00101,1.00061,1.00026,1.00069,1.0006,1.00014,.99973,1.01322,.99973,1.00065,1.00026,1.00012,.99923,1,1.00064,1.00076,.99948,1.00055,1.00063,1.00007,.99943,1.0006,.99948,1.00026,.99948,.99943,1.00001,1.00001,1.00029,1.00038,1.00035,1.00001,1.0006,1.0006,.99973,.99978,1.00001,1.00057,.99989,.99967,.99964,.99967,.99977,.99999,.99977,1.00038,.99977,1.00001,.99973,1.00066,.99967,.99967,1.00041,.99998,.99999,.99977,1.00022,.99967,1.00001,.99977,1.00026,.99964,1.00031,1.00001,.99999,.99999,1,1.00023,1,1,.99999,1.00035,1.00001,.99999,.99973,.99977,.99999,1.00058,.99973,.99973,.99955,.9995,1.00026,1.00026,1.00032,.99989,1.00034,.99999,1.00026,1.00026,1.00026,.99973,.45998,.99973,1.00026,.99973,1.00001,.99999,.99982,.99994,.99996,1,1.00042,1.00044,1.00029,1.00023,.99973,.99973,1.00026,.99949,1.00002,.99973,1.0006,1.0006,1.0006,.99975,1.00026,1.00026,1.00032,.98685,.99973,1.00026,1,1,.99966,1.00044,1.00016,1.00022,1.00016,1.00022,1.00016,1.00022,1.00001,.99973,1,1,.99973,1,1,.99955,1.0006,1.0006,1.0006,1.0006,1,1,1,.99973,.99973,.99972,1,1,1.00106,.99999,.99998,.99998,.99999,.99998,1.66475,1,.99973,.99973,1,.99973,.99971,.99978,1,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1.00098,1,1,1,1.00049,1,1,.99972,1,1.20985,1.39713,1.00003,1.00031,1.00015,1,.99561,1.00027,1.00031,1.00031,.99915,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.99972,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,.99998,.99998,.99998,.99998,1,1,1,1,1,1,1,1,1,1,1];Mn.HelveticaBoldItalicFactors=Ln;const jn={lineHeight:1.35,lineGap:.2};Mn.HelveticaBoldItalicMetrics=jn;const Cn=[.76116,1,1,1.0006,1.0006,1.00006,.99973,.99973,.99982,1.00001,1.00043,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.0006,1,1.00003,1.00003,1.00003,.99973,.99987,1.00001,1.00001,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,1,1.00001,.99973,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,1.0006,1.0006,1.0006,.99949,.99973,.99998,.99973,.99973,1,.99973,.99973,1.0006,.99973,.99973,.99924,.99924,1,.99924,.99999,.99973,.99973,.99973,.99973,.99998,1,1.0006,.99973,1,.99977,1,1,1,1.00005,1.0009,1.00005,1.00003,.99998,.99973,.99973,.99973,.99973,1.0009,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.9998,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,1.00001,1.00001,1.00001,1.00001,1.00001,1.00001,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,1,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.06409,1.00026,.99973,.99973,.99973,.99973,1,.99973,1,1.00001,.99973,1.00001,.99973,1.00001,.99973,.99977,1,.99977,1,.99977,1,.99977,1,.99977,1.0288,.99977,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,.99977,.99973,.99977,.99973,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,.99924,1.0006,1.0006,.99946,1.00034,1,.99924,1.00001,1,1,.99973,.99924,.99973,.99924,.99973,1.06311,.99973,1.00024,.99973,.99924,.99977,.99973,.99977,.99973,.99977,.99973,1.00041,.9998,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1,1.00016,.99977,.99998,.99977,.99998,.99977,.99998,1.00001,1,1.00001,1,1.00001,1,1.00001,1,1.00026,1.0006,1.00026,.89547,1.00026,1.0006,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,1.00016,.99977,1.00001,1,1.00001,1.00026,1,1.00026,1,1.00026,1,.99924,.99973,1.00001,.99973,1,.99982,1.00022,1.00026,1.00001,1,1.00026,1.0006,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,1.00001,1,1.00054,.99977,1.00084,1.00007,.99973,1.00013,.99924,1.00001,1.00001,.99945,.91221,1.00001,1.00026,.99977,1.00022,1.0006,1.00001,1.00001,.99999,.99977,.99933,1.00022,1.00054,1.00001,1.00065,1.00026,1.00001,1.0001,1.00001,1.00052,1,1.0006,1.00001,.99945,.99897,.99968,.99924,1.00036,.99945,.99949,1,1.0006,.99897,.99918,.99968,.99911,.99924,1,.99962,1.01487,1,1.0005,.99973,1.00012,1.00043,1,.99995,.99994,1.00036,.99947,1.00019,1.00063,1.00025,.99924,1.00036,.99973,1.00036,1.00025,1.00001,1.00001,1.00027,1.0001,1.00068,1.00001,1.0006,1.0006,1,1.00008,.99957,.99972,.9994,.99954,.99975,1.00051,1.00001,1.00019,1.00001,1.0001,.99986,1.00001,1.00001,1.00038,.99954,.99954,.9994,1.00066,.99999,.99977,1.00022,1.00054,1.00001,.99977,1.00026,.99975,1.0001,1.00001,.99993,.9995,.99955,1.00016,.99978,.99974,1.00019,1.00022,.99955,1.00053,.99973,1.00089,1.00005,.99967,1.00048,.99973,1.00002,1.00034,.99973,.99973,.99964,1.00006,1.00066,.99947,.99973,.98894,.99973,1,.44898,1,.99946,1,1.00039,1.00082,.99991,.99991,.99985,1.00022,1.00023,1.00061,1.00006,.99966,.99973,.99973,.99973,1.00019,1.0008,1,.99924,.99924,.99924,.99983,1.00044,.99973,.99964,.98332,1,.99973,1,1,.99962,.99895,1.00016,.99977,1.00016,.99977,1.00016,.99977,1.00001,1,1,1,.99973,1,1,.99955,.99924,.99924,.99924,.99924,.99998,.99998,.99998,.99973,.99973,.99972,1,1,1.00267,.99999,.99998,.99998,1,.99998,1.66475,1,.99973,.99973,1.00023,.99973,1.00423,.99925,.99999,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1.00049,1,1.00245,1,1,1,1,.96329,1,1.20985,1.39713,1.00003,.8254,1.00015,1,1.00035,1.00027,1.00031,1.00031,1.00003,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.95317,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,.99998,.99998,.99998,.99998,1,1,1,1,1,1,1,1,1,1,1];Mn.HelveticaItalicFactors=Cn;const Tn={lineHeight:1.35,lineGap:.2};Mn.HelveticaItalicMetrics=Tn;const Rn=[.76116,1,1,1.0006,1.0006,1.00006,.99973,.99973,.99982,1.00001,1.00043,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.0006,1,1.00003,1.00003,1.00003,.99973,.99987,1.00001,1.00001,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,1,1.00001,.99973,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,1.0006,1.0006,1.0006,.99949,.99973,.99998,.99973,.99973,1,.99973,.99973,1.0006,.99973,.99973,.99924,.99924,1,.99924,.99999,.99973,.99973,.99973,.99973,.99998,1,1.0006,.99973,1,.99977,1,1,1,1.00005,1.0009,1.00005,1.00003,.99998,.99973,.99973,.99973,.99973,1.0009,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.9998,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,1.00001,1.00001,1.00001,1.00001,1.00001,1.00001,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,1,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.06409,1.00026,.99973,.99973,.99973,.99973,1,.99973,1,1.00001,.99973,1.00001,.99973,1.00001,.99973,.99977,1,.99977,1,.99977,1,.99977,1,.99977,1.04596,.99977,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,.99977,.99973,.99977,.99973,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,.99924,1.0006,1.0006,1.00019,1.00034,1,.99924,1.00001,1,1,.99973,.99924,.99973,.99924,.99973,1.02572,.99973,1.00005,.99973,.99924,.99977,.99973,.99977,.99973,.99977,.99973,.99999,.9998,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1,1.00016,.99977,.99998,.99977,.99998,.99977,.99998,1.00001,1,1.00001,1,1.00001,1,1.00001,1,1.00026,1.0006,1.00026,.84533,1.00026,1.0006,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,1.00016,.99977,1.00001,1,1.00001,1.00026,1,1.00026,1,1.00026,1,.99924,.99973,1.00001,.99973,1,.99982,1.00022,1.00026,1.00001,1,1.00026,1.0006,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99928,1,.99977,1.00013,1.00055,.99947,.99945,.99941,.99924,1.00001,1.00001,1.0004,.91621,1.00001,1.00026,.99977,1.00022,1.0006,1.00001,1.00005,.99999,.99977,1.00015,1.00022,.99977,1.00001,.99973,1.00026,1.00001,1.00019,1.00001,.99946,1,1.0006,1.00001,.99978,1.00045,.99973,.99924,1.00023,.99978,.99966,1,1.00065,1.00045,1.00019,.99973,.99973,.99924,1,1,.96499,1,1.00055,.99973,1.00008,1.00027,1,.9997,.99995,1.00023,.99933,1.00019,1.00015,1.00031,.99924,1.00023,.99973,1.00023,1.00031,1.00001,.99928,1.00029,1.00092,1.00035,1.00001,1.0006,1.0006,1,.99988,.99975,1,1.00082,.99561,.9996,1.00035,1.00001,.99962,1.00001,1.00092,.99964,1.00001,.99963,.99999,1.00035,1.00035,1.00082,.99962,.99999,.99977,1.00022,1.00035,1.00001,.99977,1.00026,.9996,.99967,1.00001,1.00034,1.00074,1.00054,1.00053,1.00063,.99971,.99962,1.00035,.99975,.99977,.99973,1.00043,.99953,1.0007,.99915,.99973,1.00008,.99892,1.00073,1.00073,1.00114,.99915,1.00073,.99955,.99973,1.00092,.99973,1,.99998,1,1.0003,1,1.00043,1.00001,.99969,1.0003,1,1.00035,1.00001,.9995,1,1.00092,.99973,.99973,.99973,1.0007,.9995,1,.99924,1.0006,.99924,.99972,1.00062,.99973,1.00114,1.00073,1,.99955,1,1,1.00047,.99968,1.00016,.99977,1.00016,.99977,1.00016,.99977,1.00001,1,1,1,.99973,1,1,.99955,.99924,.99924,.99924,.99924,.99998,.99998,.99998,.99973,.99973,.99972,1,1,1.00267,.99999,.99998,.99998,1,.99998,1.66475,1,.99973,.99973,1.00023,.99973,.99971,.99925,1.00023,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1,1,1,1,1,1,1,.96329,1,1.20985,1.39713,1.00003,.8254,1.00015,1,1.00035,1.00027,1.00031,1.00031,.99915,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.95317,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];Mn.HelveticaRegularFactors=Rn;const ui={lineHeight:1.2,lineGap:.2};Mn.HelveticaRegularMetrics=ui},(oi,Mn)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.LiberationSansRegularWidths=Mn.LiberationSansRegularMapping=Mn.LiberationSansItalicWidths=Mn.LiberationSansItalicMapping=Mn.LiberationSansBoldWidths=Mn.LiberationSansBoldMapping=Mn.LiberationSansBoldItalicWidths=Mn.LiberationSansBoldItalicMapping=void 0;const ti=[365,0,333,278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,333,556,556,556,556,280,556,333,737,370,556,584,737,552,400,549,333,333,333,576,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,549,611,611,611,611,611,556,611,556,722,556,722,556,722,556,722,556,722,556,722,556,722,556,722,719,722,611,667,556,667,556,667,556,667,556,667,556,778,611,778,611,778,611,778,611,722,611,722,611,278,278,278,278,278,278,278,278,278,278,785,556,556,278,722,556,556,611,278,611,278,611,385,611,479,611,278,722,611,722,611,722,611,708,723,611,778,611,778,611,778,611,1e3,944,722,389,722,389,722,389,667,556,667,556,667,556,667,556,611,333,611,479,611,333,722,611,722,611,722,611,722,611,722,611,722,611,944,778,667,556,667,611,500,611,500,611,500,278,556,722,556,1e3,889,778,611,667,556,611,333,333,333,333,333,333,333,333,333,333,333,465,722,333,853,906,474,825,927,838,278,722,722,601,719,667,611,722,778,278,722,667,833,722,644,778,722,667,600,611,667,821,667,809,802,278,667,615,451,611,278,582,615,610,556,606,475,460,611,541,278,558,556,612,556,445,611,766,619,520,684,446,582,715,576,753,845,278,582,611,582,845,667,669,885,567,711,667,278,276,556,1094,1062,875,610,722,622,719,722,719,722,567,712,667,904,626,719,719,610,702,833,722,778,719,667,722,611,622,854,667,730,703,1005,1019,870,979,719,711,1031,719,556,618,615,417,635,556,709,497,615,615,500,635,740,604,611,604,611,556,490,556,875,556,615,581,833,844,729,854,615,552,854,583,556,556,611,417,552,556,278,281,278,969,906,611,500,615,556,604,778,611,487,447,944,778,944,778,944,778,667,556,333,333,556,1e3,1e3,552,278,278,278,278,500,500,500,556,556,350,1e3,1e3,240,479,333,333,604,333,167,396,556,556,1094,556,885,489,1115,1e3,768,600,834,834,834,834,1e3,500,1e3,500,1e3,500,500,494,612,823,713,584,549,713,979,722,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,611,611,333,333,333,333,333,333,333,333,222,222,333,333,333,333,333,333,333,333];Mn.LiberationSansBoldWidths=ti;const In=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];Mn.LiberationSansBoldMapping=In;const Ln=[365,0,333,278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,333,556,556,556,556,280,556,333,737,370,556,584,737,552,400,549,333,333,333,576,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,549,611,611,611,611,611,556,611,556,722,556,722,556,722,556,722,556,722,556,722,556,722,556,722,740,722,611,667,556,667,556,667,556,667,556,667,556,778,611,778,611,778,611,778,611,722,611,722,611,278,278,278,278,278,278,278,278,278,278,782,556,556,278,722,556,556,611,278,611,278,611,396,611,479,611,278,722,611,722,611,722,611,708,723,611,778,611,778,611,778,611,1e3,944,722,389,722,389,722,389,667,556,667,556,667,556,667,556,611,333,611,479,611,333,722,611,722,611,722,611,722,611,722,611,722,611,944,778,667,556,667,611,500,611,500,611,500,278,556,722,556,1e3,889,778,611,667,556,611,333,333,333,333,333,333,333,333,333,333,333,333,722,333,854,906,473,844,930,847,278,722,722,610,671,667,611,722,778,278,722,667,833,722,657,778,718,667,590,611,667,822,667,829,781,278,667,620,479,611,278,591,620,621,556,610,479,492,611,558,278,566,556,603,556,450,611,712,605,532,664,409,591,704,578,773,834,278,591,611,591,834,667,667,886,614,719,667,278,278,556,1094,1042,854,622,719,677,719,722,708,722,614,722,667,927,643,719,719,615,687,833,722,778,719,667,722,611,677,781,667,729,708,979,989,854,1e3,708,719,1042,729,556,619,604,534,618,556,736,510,611,611,507,622,740,604,611,611,611,556,889,556,885,556,646,583,889,935,707,854,594,552,865,589,556,556,611,469,563,556,278,278,278,969,906,611,507,619,556,611,778,611,575,467,944,778,944,778,944,778,667,556,333,333,556,1e3,1e3,552,278,278,278,278,500,500,500,556,556,350,1e3,1e3,240,479,333,333,604,333,167,396,556,556,1104,556,885,516,1146,1e3,768,600,834,834,834,834,999,500,1e3,500,1e3,500,500,494,612,823,713,584,549,713,979,722,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,611,611,333,333,333,333,333,333,333,333,222,222,333,333,333,333,333,333,333,333];Mn.LiberationSansBoldItalicWidths=Ln;const jn=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];Mn.LiberationSansBoldItalicMapping=jn;const Cn=[365,0,333,278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,333,556,556,556,556,260,556,333,737,370,556,584,737,552,400,549,333,333,333,576,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,549,611,556,556,556,556,500,556,500,667,556,667,556,667,556,722,500,722,500,722,500,722,500,722,625,722,556,667,556,667,556,667,556,667,556,667,556,778,556,778,556,778,556,778,556,722,556,722,556,278,278,278,278,278,278,278,222,278,278,733,444,500,222,667,500,500,556,222,556,222,556,281,556,400,556,222,722,556,722,556,722,556,615,723,556,778,556,778,556,778,556,1e3,944,722,333,722,333,722,333,667,500,667,500,667,500,667,500,611,278,611,354,611,278,722,556,722,556,722,556,722,556,722,556,722,556,944,722,667,500,667,611,500,611,500,611,500,222,556,667,556,1e3,889,778,611,667,500,611,278,333,333,333,333,333,333,333,333,333,333,333,667,278,789,846,389,794,865,775,222,667,667,570,671,667,611,722,778,278,667,667,833,722,648,778,725,667,600,611,667,837,667,831,761,278,667,570,439,555,222,550,570,571,500,556,439,463,555,542,222,500,492,548,500,447,556,670,573,486,603,374,550,652,546,728,779,222,550,556,550,779,667,667,843,544,708,667,278,278,500,1066,982,844,589,715,639,724,667,651,667,544,704,667,917,614,715,715,589,686,833,722,778,725,667,722,611,639,795,667,727,673,920,923,805,886,651,694,1022,682,556,562,522,493,553,556,688,465,556,556,472,564,686,550,556,556,556,500,833,500,835,500,572,518,830,851,621,736,526,492,752,534,556,556,556,378,496,500,222,222,222,910,828,556,472,565,500,556,778,556,492,339,944,722,944,722,944,722,667,500,333,333,556,1e3,1e3,552,222,222,222,222,333,333,333,556,556,350,1e3,1e3,188,354,333,333,500,333,167,365,556,556,1094,556,885,323,1083,1e3,768,600,834,834,834,834,1e3,500,998,500,1e3,500,500,494,612,823,713,584,549,713,979,719,274,549,549,584,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,500,500,333,333,333,333,333,333,333,333,222,222,294,294,324,324,316,328,398,285];Mn.LiberationSansItalicWidths=Cn;const Tn=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];Mn.LiberationSansItalicMapping=Tn;const Rn=[365,0,333,278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,333,556,556,556,556,260,556,333,737,370,556,584,737,552,400,549,333,333,333,576,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,549,611,556,556,556,556,500,556,500,667,556,667,556,667,556,722,500,722,500,722,500,722,500,722,615,722,556,667,556,667,556,667,556,667,556,667,556,778,556,778,556,778,556,778,556,722,556,722,556,278,278,278,278,278,278,278,222,278,278,735,444,500,222,667,500,500,556,222,556,222,556,292,556,334,556,222,722,556,722,556,722,556,604,723,556,778,556,778,556,778,556,1e3,944,722,333,722,333,722,333,667,500,667,500,667,500,667,500,611,278,611,375,611,278,722,556,722,556,722,556,722,556,722,556,722,556,944,722,667,500,667,611,500,611,500,611,500,222,556,667,556,1e3,889,778,611,667,500,611,278,333,333,333,333,333,333,333,333,333,333,333,667,278,784,838,384,774,855,752,222,667,667,551,668,667,611,722,778,278,667,668,833,722,650,778,722,667,618,611,667,798,667,835,748,278,667,578,446,556,222,547,578,575,500,557,446,441,556,556,222,500,500,576,500,448,556,690,569,482,617,395,547,648,525,713,781,222,547,556,547,781,667,667,865,542,719,667,278,278,500,1057,1010,854,583,722,635,719,667,656,667,542,677,667,923,604,719,719,583,656,833,722,778,719,667,722,611,635,760,667,740,667,917,938,792,885,656,719,1010,722,556,573,531,365,583,556,669,458,559,559,438,583,688,552,556,542,556,500,458,500,823,500,573,521,802,823,625,719,521,510,750,542,556,556,556,365,510,500,222,278,222,906,812,556,438,559,500,552,778,556,489,411,944,722,944,722,944,722,667,500,333,333,556,1e3,1e3,552,222,222,222,222,333,333,333,556,556,350,1e3,1e3,188,354,333,333,500,333,167,365,556,556,1094,556,885,323,1073,1e3,768,600,834,834,834,834,1e3,500,1e3,500,1e3,500,500,494,612,823,713,584,549,713,979,719,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,500,500,333,333,333,333,333,333,333,333,222,222,294,294,324,324,316,328,398,285];Mn.LiberationSansRegularWidths=Rn;const ui=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];Mn.LiberationSansRegularMapping=ui},(oi,Mn)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.MyriadProRegularMetrics=Mn.MyriadProRegularFactors=Mn.MyriadProItalicMetrics=Mn.MyriadProItalicFactors=Mn.MyriadProBoldMetrics=Mn.MyriadProBoldItalicMetrics=Mn.MyriadProBoldItalicFactors=Mn.MyriadProBoldFactors=void 0;const ti=[1.36898,1,1,.72706,.80479,.83734,.98894,.99793,.9897,.93884,.86209,.94292,.94292,1.16661,1.02058,.93582,.96694,.93582,1.19137,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.78076,.78076,1.02058,1.02058,1.02058,.72851,.78966,.90838,.83637,.82391,.96376,.80061,.86275,.8768,.95407,1.0258,.73901,.85022,.83655,1.0156,.95546,.92179,.87107,.92179,.82114,.8096,.89713,.94438,.95353,.94083,.91905,.90406,.9446,.94292,1.18777,.94292,1.02058,.89903,.90088,.94938,.97898,.81093,.97571,.94938,1.024,.9577,.95933,.98621,1.0474,.97455,.98981,.9672,.95933,.9446,.97898,.97407,.97646,.78036,1.10208,.95442,.95298,.97579,.9332,.94039,.938,.80687,1.01149,.80687,1.02058,.80479,.99793,.99793,.99793,.99793,1.01149,1.00872,.90088,.91882,1.0213,.8361,1.02058,.62295,.54324,.89022,1.08595,1,1,.90088,1,.97455,.93582,.90088,1,1.05686,.8361,.99642,.99642,.99642,.72851,.90838,.90838,.90838,.90838,.90838,.90838,.868,.82391,.80061,.80061,.80061,.80061,1.0258,1.0258,1.0258,1.0258,.97484,.95546,.92179,.92179,.92179,.92179,.92179,1.02058,.92179,.94438,.94438,.94438,.94438,.90406,.86958,.98225,.94938,.94938,.94938,.94938,.94938,.94938,.9031,.81093,.94938,.94938,.94938,.94938,.98621,.98621,.98621,.98621,.93969,.95933,.9446,.9446,.9446,.9446,.9446,1.08595,.9446,.95442,.95442,.95442,.95442,.94039,.97898,.94039,.90838,.94938,.90838,.94938,.90838,.94938,.82391,.81093,.82391,.81093,.82391,.81093,.82391,.81093,.96376,.84313,.97484,.97571,.80061,.94938,.80061,.94938,.80061,.94938,.80061,.94938,.80061,.94938,.8768,.9577,.8768,.9577,.8768,.9577,1,1,.95407,.95933,.97069,.95933,1.0258,.98621,1.0258,.98621,1.0258,.98621,1.0258,.98621,1.0258,.98621,.887,1.01591,.73901,1.0474,1,1,.97455,.83655,.98981,1,1,.83655,.73977,.83655,.73903,.84638,1.033,.95546,.95933,1,1,.95546,.95933,.8271,.95417,.95933,.92179,.9446,.92179,.9446,.92179,.9446,.936,.91964,.82114,.97646,1,1,.82114,.97646,.8096,.78036,.8096,.78036,1,1,.8096,.78036,1,1,.89713,.77452,.89713,1.10208,.94438,.95442,.94438,.95442,.94438,.95442,.94438,.95442,.94438,.95442,.94438,.95442,.94083,.97579,.90406,.94039,.90406,.9446,.938,.9446,.938,.9446,.938,1,.99793,.90838,.94938,.868,.9031,.92179,.9446,1,1,.89713,1.10208,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90989,.9358,.91945,.83181,.75261,.87992,.82976,.96034,.83689,.97268,1.0078,.90838,.83637,.8019,.90157,.80061,.9446,.95407,.92436,1.0258,.85022,.97153,1.0156,.95546,.89192,.92179,.92361,.87107,.96318,.89713,.93704,.95638,.91905,.91709,.92796,1.0258,.93704,.94836,1.0373,.95933,1.0078,.95871,.94836,.96174,.92601,.9498,.98607,.95776,.95933,1.05453,1.0078,.98275,.9314,.95617,.91701,1.05993,.9446,.78367,.9553,1,.86832,1.0128,.95871,.99394,.87548,.96361,.86774,1.0078,.95871,.9446,.95871,.86774,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.94083,.97579,.94083,.97579,.94083,.97579,.90406,.94039,.96694,1,.89903,1,1,1,.93582,.93582,.93582,1,.908,.908,.918,.94219,.94219,.96544,1,1.285,1,1,.81079,.81079,1,1,.74854,1,1,1,1,.99793,1,1,1,.65,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.17173,1,.80535,.76169,1.02058,1.0732,1.05486,1,1,1.30692,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.16161,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];Mn.MyriadProBoldFactors=ti;const In={lineHeight:1.2,lineGap:.2};Mn.MyriadProBoldMetrics=In;const Ln=[1.36898,1,1,.66227,.80779,.81625,.97276,.97276,.97733,.92222,.83266,.94292,.94292,1.16148,1.02058,.93582,.96694,.93582,1.17337,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.78076,.78076,1.02058,1.02058,1.02058,.71541,.76813,.85576,.80591,.80729,.94299,.77512,.83655,.86523,.92222,.98621,.71743,.81698,.79726,.98558,.92222,.90637,.83809,.90637,.80729,.76463,.86275,.90699,.91605,.9154,.85308,.85458,.90531,.94292,1.21296,.94292,1.02058,.89903,1.18616,.99613,.91677,.78216,.91677,.90083,.98796,.9135,.92168,.95381,.98981,.95298,.95381,.93459,.92168,.91513,.92004,.91677,.95077,.748,1.04502,.91677,.92061,.94236,.89544,.89364,.9,.80687,.8578,.80687,1.02058,.80779,.97276,.97276,.97276,.97276,.8578,.99973,1.18616,.91339,1.08074,.82891,1.02058,.55509,.71526,.89022,1.08595,1,1,1.18616,1,.96736,.93582,1.18616,1,1.04864,.82711,.99043,.99043,.99043,.71541,.85576,.85576,.85576,.85576,.85576,.85576,.845,.80729,.77512,.77512,.77512,.77512,.98621,.98621,.98621,.98621,.95961,.92222,.90637,.90637,.90637,.90637,.90637,1.02058,.90251,.90699,.90699,.90699,.90699,.85458,.83659,.94951,.99613,.99613,.99613,.99613,.99613,.99613,.85811,.78216,.90083,.90083,.90083,.90083,.95381,.95381,.95381,.95381,.9135,.92168,.91513,.91513,.91513,.91513,.91513,1.08595,.91677,.91677,.91677,.91677,.91677,.89364,.92332,.89364,.85576,.99613,.85576,.99613,.85576,.99613,.80729,.78216,.80729,.78216,.80729,.78216,.80729,.78216,.94299,.76783,.95961,.91677,.77512,.90083,.77512,.90083,.77512,.90083,.77512,.90083,.77512,.90083,.86523,.9135,.86523,.9135,.86523,.9135,1,1,.92222,.92168,.92222,.92168,.98621,.95381,.98621,.95381,.98621,.95381,.98621,.95381,.98621,.95381,.86036,.97096,.71743,.98981,1,1,.95298,.79726,.95381,1,1,.79726,.6894,.79726,.74321,.81691,1.0006,.92222,.92168,1,1,.92222,.92168,.79464,.92098,.92168,.90637,.91513,.90637,.91513,.90637,.91513,.909,.87514,.80729,.95077,1,1,.80729,.95077,.76463,.748,.76463,.748,1,1,.76463,.748,1,1,.86275,.72651,.86275,1.04502,.90699,.91677,.90699,.91677,.90699,.91677,.90699,.91677,.90699,.91677,.90699,.91677,.9154,.94236,.85458,.89364,.85458,.90531,.9,.90531,.9,.90531,.9,1,.97276,.85576,.99613,.845,.85811,.90251,.91677,1,1,.86275,1.04502,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.00899,1.30628,.85576,.80178,.66862,.7927,.69323,.88127,.72459,.89711,.95381,.85576,.80591,.7805,.94729,.77512,.90531,.92222,.90637,.98621,.81698,.92655,.98558,.92222,.85359,.90637,.90976,.83809,.94523,.86275,.83509,.93157,.85308,.83392,.92346,.98621,.83509,.92886,.91324,.92168,.95381,.90646,.92886,.90557,.86847,.90276,.91324,.86842,.92168,.99531,.95381,.9224,.85408,.92699,.86847,1.0051,.91513,.80487,.93481,1,.88159,1.05214,.90646,.97355,.81539,.89398,.85923,.95381,.90646,.91513,.90646,.85923,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.9154,.94236,.9154,.94236,.9154,.94236,.85458,.89364,.96694,1,.89903,1,1,1,.91782,.91782,.91782,1,.896,.896,.896,.9332,.9332,.95973,1,1.26,1,1,.80479,.80178,1,1,.85633,1,1,1,1,.97276,1,1,1,.698,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.14542,1,.79199,.78694,1.02058,1.03493,1.05486,1,1,1.23026,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.20006,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];Mn.MyriadProBoldItalicFactors=Ln;const jn={lineHeight:1.2,lineGap:.2};Mn.MyriadProBoldItalicMetrics=jn;const Cn=[1.36898,1,1,.65507,.84943,.85639,.88465,.88465,.86936,.88307,.86948,.85283,.85283,1.06383,1.02058,.75945,.9219,.75945,1.17337,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.75945,.75945,1.02058,1.02058,1.02058,.69046,.70926,.85158,.77812,.76852,.89591,.70466,.76125,.80094,.86822,.83864,.728,.77212,.79475,.93637,.87514,.8588,.76013,.8588,.72421,.69866,.77598,.85991,.80811,.87832,.78112,.77512,.8562,1.0222,1.18417,1.0222,1.27014,.89903,1.15012,.93859,.94399,.846,.94399,.81453,1.0186,.94219,.96017,1.03075,1.02175,.912,1.03075,.96998,.96017,.93859,.94399,.94399,.95493,.746,1.12658,.94578,.91,.979,.882,.882,.83,.85034,.83537,.85034,1.02058,.70869,.88465,.88465,.88465,.88465,.83537,.90083,1.15012,.9161,.94565,.73541,1.02058,.53609,.69353,.79519,1.08595,1,1,1.15012,1,.91974,.75945,1.15012,1,.9446,.73361,.9005,.9005,.9005,.62864,.85158,.85158,.85158,.85158,.85158,.85158,.773,.76852,.70466,.70466,.70466,.70466,.83864,.83864,.83864,.83864,.90561,.87514,.8588,.8588,.8588,.8588,.8588,1.02058,.85751,.85991,.85991,.85991,.85991,.77512,.76013,.88075,.93859,.93859,.93859,.93859,.93859,.93859,.8075,.846,.81453,.81453,.81453,.81453,.82424,.82424,.82424,.82424,.9278,.96017,.93859,.93859,.93859,.93859,.93859,1.08595,.8562,.94578,.94578,.94578,.94578,.882,.94578,.882,.85158,.93859,.85158,.93859,.85158,.93859,.76852,.846,.76852,.846,.76852,.846,.76852,.846,.89591,.8544,.90561,.94399,.70466,.81453,.70466,.81453,.70466,.81453,.70466,.81453,.70466,.81453,.80094,.94219,.80094,.94219,.80094,.94219,1,1,.86822,.96017,.86822,.96017,.83864,.82424,.83864,.82424,.83864,.82424,.83864,1.03075,.83864,.82424,.81402,1.02738,.728,1.02175,1,1,.912,.79475,1.03075,1,1,.79475,.83911,.79475,.66266,.80553,1.06676,.87514,.96017,1,1,.87514,.96017,.86865,.87396,.96017,.8588,.93859,.8588,.93859,.8588,.93859,.867,.84759,.72421,.95493,1,1,.72421,.95493,.69866,.746,.69866,.746,1,1,.69866,.746,1,1,.77598,.88417,.77598,1.12658,.85991,.94578,.85991,.94578,.85991,.94578,.85991,.94578,.85991,.94578,.85991,.94578,.87832,.979,.77512,.882,.77512,.8562,.83,.8562,.83,.8562,.83,1,.88465,.85158,.93859,.773,.8075,.85751,.8562,1,1,.77598,1.12658,1.15012,1.15012,1.15012,1.15012,1.15012,1.15313,1.15012,1.15012,1.15012,1.08106,1.03901,.85158,.77025,.62264,.7646,.65351,.86026,.69461,.89947,1.03075,.85158,.77812,.76449,.88836,.70466,.8562,.86822,.8588,.83864,.77212,.85308,.93637,.87514,.82352,.8588,.85701,.76013,.89058,.77598,.8156,.82565,.78112,.77899,.89386,.83864,.8156,.9486,.92388,.96186,1.03075,.91123,.9486,.93298,.878,.93942,.92388,.84596,.96186,.95119,1.03075,.922,.88787,.95829,.88,.93559,.93859,.78815,.93758,1,.89217,1.03737,.91123,.93969,.77487,.85769,.86799,1.03075,.91123,.93859,.91123,.86799,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.87832,.979,.87832,.979,.87832,.979,.77512,.882,.9219,1,.89903,1,1,1,.87321,.87321,.87321,1,1.027,1.027,1.027,.86847,.86847,.79121,1,1.124,1,1,.73572,.73572,1,1,.85034,1,1,1,1,.88465,1,1,1,.669,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.04828,1,.74948,.75187,1.02058,.98391,1.02119,1,1,1.06233,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.05233,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];Mn.MyriadProItalicFactors=Cn;const Tn={lineHeight:1.2,lineGap:.2};Mn.MyriadProItalicMetrics=Tn;const Rn=[1.36898,1,1,.76305,.82784,.94935,.89364,.92241,.89073,.90706,.98472,.85283,.85283,1.0664,1.02058,.74505,.9219,.74505,1.23456,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.74505,.74505,1.02058,1.02058,1.02058,.73002,.72601,.91755,.8126,.80314,.92222,.73764,.79726,.83051,.90284,.86023,.74,.8126,.84869,.96518,.91115,.8858,.79761,.8858,.74498,.73914,.81363,.89591,.83659,.89633,.85608,.8111,.90531,1.0222,1.22736,1.0222,1.27014,.89903,.90088,.86667,1.0231,.896,1.01411,.90083,1.05099,1.00512,.99793,1.05326,1.09377,.938,1.06226,1.00119,.99793,.98714,1.0231,1.01231,.98196,.792,1.19137,.99074,.962,1.01915,.926,.942,.856,.85034,.92006,.85034,1.02058,.69067,.92241,.92241,.92241,.92241,.92006,.9332,.90088,.91882,.93484,.75339,1.02058,.56866,.54324,.79519,1.08595,1,1,.90088,1,.95325,.74505,.90088,1,.97198,.75339,.91009,.91009,.91009,.66466,.91755,.91755,.91755,.91755,.91755,.91755,.788,.80314,.73764,.73764,.73764,.73764,.86023,.86023,.86023,.86023,.92915,.91115,.8858,.8858,.8858,.8858,.8858,1.02058,.8858,.89591,.89591,.89591,.89591,.8111,.79611,.89713,.86667,.86667,.86667,.86667,.86667,.86667,.86936,.896,.90083,.90083,.90083,.90083,.84224,.84224,.84224,.84224,.97276,.99793,.98714,.98714,.98714,.98714,.98714,1.08595,.89876,.99074,.99074,.99074,.99074,.942,1.0231,.942,.91755,.86667,.91755,.86667,.91755,.86667,.80314,.896,.80314,.896,.80314,.896,.80314,.896,.92222,.93372,.92915,1.01411,.73764,.90083,.73764,.90083,.73764,.90083,.73764,.90083,.73764,.90083,.83051,1.00512,.83051,1.00512,.83051,1.00512,1,1,.90284,.99793,.90976,.99793,.86023,.84224,.86023,.84224,.86023,.84224,.86023,1.05326,.86023,.84224,.82873,1.07469,.74,1.09377,1,1,.938,.84869,1.06226,1,1,.84869,.83704,.84869,.81441,.85588,1.08927,.91115,.99793,1,1,.91115,.99793,.91887,.90991,.99793,.8858,.98714,.8858,.98714,.8858,.98714,.894,.91434,.74498,.98196,1,1,.74498,.98196,.73914,.792,.73914,.792,1,1,.73914,.792,1,1,.81363,.904,.81363,1.19137,.89591,.99074,.89591,.99074,.89591,.99074,.89591,.99074,.89591,.99074,.89591,.99074,.89633,1.01915,.8111,.942,.8111,.90531,.856,.90531,.856,.90531,.856,1,.92241,.91755,.86667,.788,.86936,.8858,.89876,1,1,.81363,1.19137,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90388,1.03901,.92138,.78105,.7154,.86169,.80513,.94007,.82528,.98612,1.06226,.91755,.8126,.81884,.92819,.73764,.90531,.90284,.8858,.86023,.8126,.91172,.96518,.91115,.83089,.8858,.87791,.79761,.89297,.81363,.88157,.89992,.85608,.81992,.94307,.86023,.88157,.95308,.98699,.99793,1.06226,.95817,.95308,.97358,.928,.98088,.98699,.92761,.99793,.96017,1.06226,.986,.944,.95978,.938,.96705,.98714,.80442,.98972,1,.89762,1.04552,.95817,.99007,.87064,.91879,.88888,1.06226,.95817,.98714,.95817,.88888,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.89633,1.01915,.89633,1.01915,.89633,1.01915,.8111,.942,.9219,1,.89903,1,1,1,.93173,.93173,.93173,1,1.06304,1.06304,1.06904,.89903,.89903,.80549,1,1.156,1,1,.76575,.76575,1,1,.72458,1,1,1,1,.92241,1,1,1,.619,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.07257,1,.74705,.71119,1.02058,1.024,1.02119,1,1,1.1536,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.05638,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];Mn.MyriadProRegularFactors=Rn;const ui={lineHeight:1.2,lineGap:.2};Mn.MyriadProRegularMetrics=ui},(oi,Mn)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.SegoeuiRegularMetrics=Mn.SegoeuiRegularFactors=Mn.SegoeuiItalicMetrics=Mn.SegoeuiItalicFactors=Mn.SegoeuiBoldMetrics=Mn.SegoeuiBoldItalicMetrics=Mn.SegoeuiBoldItalicFactors=Mn.SegoeuiBoldFactors=void 0;const ti=[1.76738,1,1,.99297,.9824,1.04016,1.06497,1.03424,.97529,1.17647,1.23203,1.1085,1.1085,1.16939,1.2107,.9754,1.21408,.9754,1.59578,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,.81378,.81378,1.2107,1.2107,1.2107,.71703,.97847,.97363,.88776,.8641,1.02096,.79795,.85132,.914,1.06085,1.1406,.8007,.89858,.83693,1.14889,1.09398,.97489,.92094,.97489,.90399,.84041,.95923,1.00135,1,1.06467,.98243,.90996,.99361,1.1085,1.56942,1.1085,1.2107,.74627,.94282,.96752,1.01519,.86304,1.01359,.97278,1.15103,1.01359,.98561,1.02285,1.02285,1.00527,1.02285,1.0302,.99041,1.0008,1.01519,1.01359,1.02258,.79104,1.16862,.99041,.97454,1.02511,.99298,.96752,.95801,.94856,1.16579,.94856,1.2107,.9824,1.03424,1.03424,1,1.03424,1.16579,.8727,1.3871,1.18622,1.10818,1.04478,1.2107,1.18622,.75155,.94994,1.28826,1.21408,1.21408,.91056,1,.91572,.9754,.64663,1.18328,1.24866,1.04478,1.14169,1.15749,1.17389,.71703,.97363,.97363,.97363,.97363,.97363,.97363,.93506,.8641,.79795,.79795,.79795,.79795,1.1406,1.1406,1.1406,1.1406,1.02096,1.09398,.97426,.97426,.97426,.97426,.97426,1.2107,.97489,1.00135,1.00135,1.00135,1.00135,.90996,.92094,1.02798,.96752,.96752,.96752,.96752,.96752,.96752,.93136,.86304,.97278,.97278,.97278,.97278,1.02285,1.02285,1.02285,1.02285,.97122,.99041,1,1,1,1,1,1.28826,1.0008,.99041,.99041,.99041,.99041,.96752,1.01519,.96752,.97363,.96752,.97363,.96752,.97363,.96752,.8641,.86304,.8641,.86304,.8641,.86304,.8641,.86304,1.02096,1.03057,1.02096,1.03517,.79795,.97278,.79795,.97278,.79795,.97278,.79795,.97278,.79795,.97278,.914,1.01359,.914,1.01359,.914,1.01359,1,1,1.06085,.98561,1.06085,1.00879,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,.97138,1.08692,.8007,1.02285,1,1,1.00527,.83693,1.02285,1,1,.83693,.9455,.83693,.90418,.83693,1.13005,1.09398,.99041,1,1,1.09398,.99041,.96692,1.09251,.99041,.97489,1.0008,.97489,1.0008,.97489,1.0008,.93994,.97931,.90399,1.02258,1,1,.90399,1.02258,.84041,.79104,.84041,.79104,.84041,.79104,.84041,.79104,1,1,.95923,1.07034,.95923,1.16862,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.06467,1.02511,.90996,.96752,.90996,.99361,.95801,.99361,.95801,.99361,.95801,1.07733,1.03424,.97363,.96752,.93506,.93136,.97489,1.0008,1,1,.95923,1.16862,1.15103,1.15103,1.01173,1.03959,.75953,.81378,.79912,1.15103,1.21994,.95161,.87815,1.01149,.81525,.7676,.98167,1.01134,1.02546,.84097,1.03089,1.18102,.97363,.88776,.85134,.97826,.79795,.99361,1.06085,.97489,1.1406,.89858,1.0388,1.14889,1.09398,.86039,.97489,1.0595,.92094,.94793,.95923,.90996,.99346,.98243,1.02112,.95493,1.1406,.90996,1.03574,1.02597,1.0008,1.18102,1.06628,1.03574,1.0192,1.01932,1.00886,.97531,1.0106,1.0008,1.13189,1.18102,1.02277,.98683,1.0016,.99561,1.07237,1.0008,.90434,.99921,.93803,.8965,1.23085,1.06628,1.04983,.96268,1.0499,.98439,1.18102,1.06628,1.0008,1.06628,.98439,.79795,1,1,1,1,1,1,1,1,1,1,1,1,1.09466,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.97278,1,1,1,1,1,1,1,1,1,1,1,1,1.02065,1,1,1,1,1,1,1.06467,1.02511,1.06467,1.02511,1.06467,1.02511,.90996,.96752,1,1.21408,.89903,1,1,.75155,1.04394,1.04394,1.04394,1.04394,.98633,.98633,.98633,.73047,.73047,1.20642,.91211,1.25635,1.222,1.02956,1.03372,1.03372,.96039,1.24633,1,1.12454,.93503,1.03424,1.19687,1.03424,1,1,1,.771,1,1,1.15749,1.15749,1.15749,1.10948,.86279,.94434,.86279,.94434,.86182,1,1,1.16897,1,.96085,.90137,1.2107,1.18416,1.13973,.69825,.9716,2.10339,1.29004,1.29004,1.21172,1.29004,1.29004,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.18874,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.09193,1.09193,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];Mn.SegoeuiBoldFactors=ti;const In={lineHeight:1.33008,lineGap:0};Mn.SegoeuiBoldMetrics=In;const Ln=[1.76738,1,1,.98946,1.03959,1.04016,1.02809,1.036,.97639,1.10953,1.23203,1.11144,1.11144,1.16939,1.21237,.9754,1.21261,.9754,1.59754,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,.81378,.81378,1.21237,1.21237,1.21237,.73541,.97847,.97363,.89723,.87897,1.0426,.79429,.85292,.91149,1.05815,1.1406,.79631,.90128,.83853,1.04396,1.10615,.97552,.94436,.97552,.88641,.80527,.96083,1.00135,1,1.06777,.9817,.91142,.99361,1.11144,1.57293,1.11144,1.21237,.74627,1.31818,1.06585,.97042,.83055,.97042,.93503,1.1261,.97042,.97922,1.14236,.94552,1.01054,1.14236,1.02471,.97922,.94165,.97042,.97042,1.0276,.78929,1.1261,.97922,.95874,1.02197,.98507,.96752,.97168,.95107,1.16579,.95107,1.21237,1.03959,1.036,1.036,1,1.036,1.16579,.87357,1.31818,1.18754,1.26781,1.05356,1.21237,1.18622,.79487,.94994,1.29004,1.24047,1.24047,1.31818,1,.91484,.9754,1.31818,1.1349,1.24866,1.05356,1.13934,1.15574,1.17389,.73541,.97363,.97363,.97363,.97363,.97363,.97363,.94385,.87897,.79429,.79429,.79429,.79429,1.1406,1.1406,1.1406,1.1406,1.0426,1.10615,.97552,.97552,.97552,.97552,.97552,1.21237,.97552,1.00135,1.00135,1.00135,1.00135,.91142,.94436,.98721,1.06585,1.06585,1.06585,1.06585,1.06585,1.06585,.96705,.83055,.93503,.93503,.93503,.93503,1.14236,1.14236,1.14236,1.14236,.93125,.97922,.94165,.94165,.94165,.94165,.94165,1.29004,.94165,.97922,.97922,.97922,.97922,.96752,.97042,.96752,.97363,1.06585,.97363,1.06585,.97363,1.06585,.87897,.83055,.87897,.83055,.87897,.83055,.87897,.83055,1.0426,1.0033,1.0426,.97042,.79429,.93503,.79429,.93503,.79429,.93503,.79429,.93503,.79429,.93503,.91149,.97042,.91149,.97042,.91149,.97042,1,1,1.05815,.97922,1.05815,.97922,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,.97441,1.04302,.79631,1.01582,1,1,1.01054,.83853,1.14236,1,1,.83853,1.09125,.83853,.90418,.83853,1.19508,1.10615,.97922,1,1,1.10615,.97922,1.01034,1.10466,.97922,.97552,.94165,.97552,.94165,.97552,.94165,.91602,.91981,.88641,1.0276,1,1,.88641,1.0276,.80527,.78929,.80527,.78929,.80527,.78929,.80527,.78929,1,1,.96083,1.05403,.95923,1.16862,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.06777,1.02197,.91142,.96752,.91142,.99361,.97168,.99361,.97168,.99361,.97168,1.23199,1.036,.97363,1.06585,.94385,.96705,.97552,.94165,1,1,.96083,1.1261,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,.95161,1.27126,1.00811,.83284,.77702,.99137,.95253,1.0347,.86142,1.07205,1.14236,.97363,.89723,.86869,1.09818,.79429,.99361,1.05815,.97552,1.1406,.90128,1.06662,1.04396,1.10615,.84918,.97552,1.04694,.94436,.98015,.96083,.91142,1.00356,.9817,1.01945,.98999,1.1406,.91142,1.04961,.9898,1.00639,1.14236,1.07514,1.04961,.99607,1.02897,1.008,.9898,.95134,1.00639,1.11121,1.14236,1.00518,.97981,1.02186,1,1.08578,.94165,.99314,.98387,.93028,.93377,1.35125,1.07514,1.10687,.93491,1.04232,1.00351,1.14236,1.07514,.94165,1.07514,1.00351,.79429,1,1,1,1,1,1,1,1,1,1,1,1,1.09097,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.93503,1,1,1,1,1,1,1,1,1,1,1,1,.96609,1,1,1,1,1,1,1.06777,1.02197,1.06777,1.02197,1.06777,1.02197,.91142,.96752,1,1.21261,.89903,1,1,.75155,1.04745,1.04745,1.04745,1.04394,.98633,.98633,.98633,.72959,.72959,1.20502,.91406,1.26514,1.222,1.02956,1.03372,1.03372,.96039,1.24633,1,1.09125,.93327,1.03336,1.16541,1.036,1,1,1,.771,1,1,1.15574,1.15574,1.15574,1.15574,.86364,.94434,.86279,.94434,.86224,1,1,1.16798,1,.96085,.90068,1.21237,1.18416,1.13904,.69825,.9716,2.10339,1.29004,1.29004,1.21339,1.29004,1.29004,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.18775,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.13269,1.13269,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];Mn.SegoeuiBoldItalicFactors=Ln;const jn={lineHeight:1.33008,lineGap:0};Mn.SegoeuiBoldItalicMetrics=jn;const Cn=[1.76738,1,1,.98946,1.14763,1.05365,1.06234,.96927,.92586,1.15373,1.18414,.91349,.91349,1.07403,1.17308,.78383,1.20088,.78383,1.42531,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.78383,.78383,1.17308,1.17308,1.17308,.77349,.94565,.94729,.85944,.88506,.9858,.74817,.80016,.88449,.98039,.95782,.69238,.89898,.83231,.98183,1.03989,.96924,.86237,.96924,.80595,.74524,.86091,.95402,.94143,.98448,.8858,.83089,.93285,1.0949,1.39016,1.0949,1.45994,.74627,1.04839,.97454,.97454,.87207,.97454,.87533,1.06151,.97454,1.00176,1.16484,1.08132,.98047,1.16484,1.02989,1.01054,.96225,.97454,.97454,1.06598,.79004,1.16344,1.00351,.94629,.9973,.91016,.96777,.9043,.91082,.92481,.91082,1.17308,.95748,.96927,.96927,1,.96927,.92481,.80597,1.04839,1.23393,1.1781,.9245,1.17308,1.20808,.63218,.94261,1.24822,1.09971,1.09971,1.04839,1,.85273,.78032,1.04839,1.09971,1.22326,.9245,1.09836,1.13525,1.15222,.70424,.94729,.94729,.94729,.94729,.94729,.94729,.85498,.88506,.74817,.74817,.74817,.74817,.95782,.95782,.95782,.95782,.9858,1.03989,.96924,.96924,.96924,.96924,.96924,1.17308,.96924,.95402,.95402,.95402,.95402,.83089,.86237,.88409,.97454,.97454,.97454,.97454,.97454,.97454,.92916,.87207,.87533,.87533,.87533,.87533,.93146,.93146,.93146,.93146,.93854,1.01054,.96225,.96225,.96225,.96225,.96225,1.24822,.8761,1.00351,1.00351,1.00351,1.00351,.96777,.97454,.96777,.94729,.97454,.94729,.97454,.94729,.97454,.88506,.87207,.88506,.87207,.88506,.87207,.88506,.87207,.9858,.95391,.9858,.97454,.74817,.87533,.74817,.87533,.74817,.87533,.74817,.87533,.74817,.87533,.88449,.97454,.88449,.97454,.88449,.97454,1,1,.98039,1.00176,.98039,1.00176,.95782,.93146,.95782,.93146,.95782,.93146,.95782,1.16484,.95782,.93146,.84421,1.12761,.69238,1.08132,1,1,.98047,.83231,1.16484,1,1,.84723,1.04861,.84723,.78755,.83231,1.23736,1.03989,1.01054,1,1,1.03989,1.01054,.9857,1.03849,1.01054,.96924,.96225,.96924,.96225,.96924,.96225,.92383,.90171,.80595,1.06598,1,1,.80595,1.06598,.74524,.79004,.74524,.79004,.74524,.79004,.74524,.79004,1,1,.86091,1.02759,.85771,1.16344,.95402,1.00351,.95402,1.00351,.95402,1.00351,.95402,1.00351,.95402,1.00351,.95402,1.00351,.98448,.9973,.83089,.96777,.83089,.93285,.9043,.93285,.9043,.93285,.9043,1.31868,.96927,.94729,.97454,.85498,.92916,.96924,.8761,1,1,.86091,1.16344,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,.81965,.81965,.94729,.78032,.71022,.90883,.84171,.99877,.77596,1.05734,1.2,.94729,.85944,.82791,.9607,.74817,.93285,.98039,.96924,.95782,.89898,.98316,.98183,1.03989,.78614,.96924,.97642,.86237,.86075,.86091,.83089,.90082,.8858,.97296,1.01284,.95782,.83089,1.0976,1.04,1.03342,1.2,1.0675,1.0976,.98205,1.03809,1.05097,1.04,.95364,1.03342,1.05401,1.2,1.02148,1.0119,1.04724,1.0127,1.02732,.96225,.8965,.97783,.93574,.94818,1.30679,1.0675,1.11826,.99821,1.0557,1.0326,1.2,1.0675,.96225,1.0675,1.0326,.74817,1,1,1,1,1,1,1,1,1,1,1,1,1.03754,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.87533,1,1,1,1,1,1,1,1,1,1,1,1,.98705,1,1,1,1,1,1,.98448,.9973,.98448,.9973,.98448,.9973,.83089,.96777,1,1.20088,.89903,1,1,.75155,.94945,.94945,.94945,.94945,1.12317,1.12317,1.12317,.67603,.67603,1.15621,.73584,1.21191,1.22135,1.06483,.94868,.94868,.95996,1.24633,1,1.07497,.87709,.96927,1.01473,.96927,1,1,1,.77295,1,1,1.09836,1.09836,1.09836,1.01522,.86321,.94434,.8649,.94434,.86182,1,1,1.083,1,.91578,.86438,1.17308,1.18416,1.14589,.69825,.97622,1.96791,1.24822,1.24822,1.17308,1.24822,1.24822,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.17984,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.10742,1.10742,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];Mn.SegoeuiItalicFactors=Cn;const Tn={lineHeight:1.33008,lineGap:0};Mn.SegoeuiItalicMetrics=Tn;const Rn=[1.76738,1,1,.98594,1.02285,1.10454,1.06234,.96927,.92037,1.19985,1.2046,.90616,.90616,1.07152,1.1714,.78032,1.20088,.78032,1.40246,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.78032,.78032,1.1714,1.1714,1.1714,.80597,.94084,.96706,.85944,.85734,.97093,.75842,.79936,.88198,.9831,.95782,.71387,.86969,.84636,1.07796,1.03584,.96924,.83968,.96924,.82826,.79649,.85771,.95132,.93119,.98965,.88433,.8287,.93365,1.08612,1.3638,1.08612,1.45786,.74627,.80499,.91484,1.05707,.92383,1.05882,.9403,1.12654,1.05882,1.01756,1.09011,1.09011,.99414,1.09011,1.034,1.01756,1.05356,1.05707,1.05882,1.04399,.84863,1.21968,1.01756,.95801,1.00068,.91797,.96777,.9043,.90351,.92105,.90351,1.1714,.85337,.96927,.96927,.99912,.96927,.92105,.80597,1.2434,1.20808,1.05937,.90957,1.1714,1.20808,.75155,.94261,1.24644,1.09971,1.09971,.84751,1,.85273,.78032,.61584,1.05425,1.17914,.90957,1.08665,1.11593,1.14169,.73381,.96706,.96706,.96706,.96706,.96706,.96706,.86035,.85734,.75842,.75842,.75842,.75842,.95782,.95782,.95782,.95782,.97093,1.03584,.96924,.96924,.96924,.96924,.96924,1.1714,.96924,.95132,.95132,.95132,.95132,.8287,.83968,.89049,.91484,.91484,.91484,.91484,.91484,.91484,.93575,.92383,.9403,.9403,.9403,.9403,.8717,.8717,.8717,.8717,1.00527,1.01756,1.05356,1.05356,1.05356,1.05356,1.05356,1.24644,.95923,1.01756,1.01756,1.01756,1.01756,.96777,1.05707,.96777,.96706,.91484,.96706,.91484,.96706,.91484,.85734,.92383,.85734,.92383,.85734,.92383,.85734,.92383,.97093,1.0969,.97093,1.05882,.75842,.9403,.75842,.9403,.75842,.9403,.75842,.9403,.75842,.9403,.88198,1.05882,.88198,1.05882,.88198,1.05882,1,1,.9831,1.01756,.9831,1.01756,.95782,.8717,.95782,.8717,.95782,.8717,.95782,1.09011,.95782,.8717,.84784,1.11551,.71387,1.09011,1,1,.99414,.84636,1.09011,1,1,.84636,1.0536,.84636,.94298,.84636,1.23297,1.03584,1.01756,1,1,1.03584,1.01756,1.00323,1.03444,1.01756,.96924,1.05356,.96924,1.05356,.96924,1.05356,.93066,.98293,.82826,1.04399,1,1,.82826,1.04399,.79649,.84863,.79649,.84863,.79649,.84863,.79649,.84863,1,1,.85771,1.17318,.85771,1.21968,.95132,1.01756,.95132,1.01756,.95132,1.01756,.95132,1.01756,.95132,1.01756,.95132,1.01756,.98965,1.00068,.8287,.96777,.8287,.93365,.9043,.93365,.9043,.93365,.9043,1.08571,.96927,.96706,.91484,.86035,.93575,.96924,.95923,1,1,.85771,1.21968,1.11437,1.11437,.93109,.91202,.60411,.84164,.55572,1.01173,.97361,.81818,.81818,.96635,.78032,.72727,.92366,.98601,1.03405,.77968,1.09799,1.2,.96706,.85944,.85638,.96491,.75842,.93365,.9831,.96924,.95782,.86969,.94152,1.07796,1.03584,.78437,.96924,.98715,.83968,.83491,.85771,.8287,.94492,.88433,.9287,1.0098,.95782,.8287,1.0625,.98248,1.03424,1.2,1.01071,1.0625,.95246,1.03809,1.04912,.98248,1.00221,1.03424,1.05443,1.2,1.04785,.99609,1.00169,1.05176,.99346,1.05356,.9087,1.03004,.95542,.93117,1.23362,1.01071,1.07831,1.02512,1.05205,1.03502,1.2,1.01071,1.05356,1.01071,1.03502,.75842,1,1,1,1,1,1,1,1,1,1,1,1,1.03719,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.9403,1,1,1,1,1,1,1,1,1,1,1,1,1.04021,1,1,1,1,1,1,.98965,1.00068,.98965,1.00068,.98965,1.00068,.8287,.96777,1,1.20088,.89903,1,1,.75155,1.03077,1.03077,1.03077,1.03077,1.13196,1.13196,1.13196,.67428,.67428,1.16039,.73291,1.20996,1.22135,1.06483,.94868,.94868,.95996,1.24633,1,1.07497,.87796,.96927,1.01518,.96927,1,1,1,.77295,1,1,1.10539,1.10539,1.11358,1.06967,.86279,.94434,.86279,.94434,.86182,1,1,1.083,1,.91578,.86507,1.1714,1.18416,1.14589,.69825,.97622,1.9697,1.24822,1.24822,1.17238,1.24822,1.24822,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.18083,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.10938,1.10938,1,1,1,1.05425,1.09971,1.09971,1.09971,1,1,1,1,1,1,1,1,1,1,1];Mn.SegoeuiRegularFactors=Rn;const ui={lineHeight:1.33008,lineGap:0};Mn.SegoeuiRegularMetrics=ui},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.PostScriptEvaluator=Mn.PostScriptCompiler=Mn.PDFFunctionFactory=void 0,Mn.isPDFFunction=ei;var In=ti(4),Ln=ti(2),jn=ti(58),Cn=ti(5),Tn=ti(59);class Rn{constructor({xref:ni,isEvalSupported:li=!0}){this.xref=ni,this.isEvalSupported=li!==!1}create(ni){const li=this.getCached(ni);if(li)return li;const Ai=si.parse({xref:this.xref,isEvalSupported:this.isEvalSupported,fn:ni instanceof In.Ref?this.xref.fetch(ni):ni});return this._cache(ni,Ai),Ai}createFromArray(ni){const li=this.getCached(ni);if(li)return li;const Ai=si.parseArray({xref:this.xref,isEvalSupported:this.isEvalSupported,fnObj:ni instanceof In.Ref?this.xref.fetch(ni):ni});return this._cache(ni,Ai),Ai}getCached(ni){var Ai;let li;if(ni instanceof In.Ref?li=ni:ni instanceof In.Dict?li=ni.objId:ni instanceof Cn.BaseStream&&(li=(Ai=ni.dict)==null?void 0:Ai.objId),li){const gi=this._localFunctionCache.getByRef(li);if(gi)return gi}return null}_cache(ni,li){var gi;if(!li)throw new Error('PDFFunctionFactory._cache - expected "parsedFunction" argument.');let Ai;ni instanceof In.Ref?Ai=ni:ni instanceof In.Dict?Ai=ni.objId:ni instanceof Cn.BaseStream&&(Ai=(gi=ni.dict)==null?void 0:gi.objId),Ai&&this._localFunctionCache.set(null,Ai,li)}get _localFunctionCache(){return(0,Ln.shadow)(this,"_localFunctionCache",new Tn.LocalFunctionCache)}}Mn.PDFFunctionFactory=Rn;function ui(Wn){if(!Array.isArray(Wn))return null;const ni=Wn.length;for(let li=0;li<ni;li++)if(typeof Wn[li]!="number"){const Ai=new Array(ni);for(let gi=0;gi<ni;gi++)Ai[gi]=+Wn[gi];return Ai}return Wn}class si{static getSampleArray(ni,li,Ai,gi){let yi,Ii,xi=1;for(yi=0,Ii=ni.length;yi<Ii;yi++)xi*=ni[yi];xi*=li;const Qn=new Array(xi);let ai=0,Vn=0;const Yn=1/(2**Ai-1),ci=gi.getBytes((xi*Ai+7)/8);let bi=0;for(yi=0;yi<xi;yi++){for(;ai<Ai;)Vn<<=8,Vn|=ci[bi++],ai+=8;ai-=Ai,Qn[yi]=(Vn>>ai)*Yn,Vn&=(1<<ai)-1}return Qn}static parse({xref:ni,isEvalSupported:li,fn:Ai}){const gi=Ai.dict||Ai;switch(gi.get("FunctionType")){case 0:return this.constructSampled({xref:ni,isEvalSupported:li,fn:Ai,dict:gi});case 1:break;case 2:return this.constructInterpolated({xref:ni,isEvalSupported:li,dict:gi});case 3:return this.constructStiched({xref:ni,isEvalSupported:li,dict:gi});case 4:return this.constructPostScript({xref:ni,isEvalSupported:li,fn:Ai,dict:gi})}throw new Ln.FormatError("Unknown type of function")}static parseArray({xref:ni,isEvalSupported:li,fnObj:Ai}){if(!Array.isArray(Ai))return this.parse({xref:ni,isEvalSupported:li,fn:Ai});const gi=[];for(const yi of Ai)gi.push(this.parse({xref:ni,isEvalSupported:li,fn:ni.fetchIfRef(yi)}));return function(yi,Ii,xi,Qn){for(let ai=0,Vn=gi.length;ai<Vn;ai++)gi[ai](yi,Ii,xi,Qn+ai)}}static constructSampled({xref:ni,isEvalSupported:li,fn:Ai,dict:gi}){function yi(_i){const ji=_i.length,Pi=[];let Ni=0;for(let Si=0;Si<ji;Si+=2)Pi[Ni++]=[_i[Si],_i[Si+1]];return Pi}function Ii(_i,ji,Pi,Ni,Si){return Ni+(_i-ji)*((Si-Ni)/(Pi-ji))}let xi=ui(gi.getArray("Domain")),Qn=ui(gi.getArray("Range"));if(!xi||!Qn)throw new Ln.FormatError("No domain or range");const ai=xi.length/2,Vn=Qn.length/2;xi=yi(xi),Qn=yi(Qn);const Yn=ui(gi.getArray("Size")),ci=gi.get("BitsPerSample"),bi=gi.get("Order")||1;bi!==1&&(0,Ln.info)("No support for cubic spline interpolation: "+bi);let Ci=ui(gi.getArray("Encode"));if(Ci)Ci=yi(Ci);else{Ci=[];for(let _i=0;_i<ai;++_i)Ci.push([0,Yn[_i]-1])}let Fi=ui(gi.getArray("Decode"));Fi=Fi?yi(Fi):Qn;const zi=this.getSampleArray(Yn,Vn,ci,Ai);return function(ji,Pi,Ni,Si){const Ti=1<<ai,Ri=new Float64Array(Ti),Mi=new Uint32Array(Ti);let Ui,Hi;for(Hi=0;Hi<Ti;Hi++)Ri[Hi]=1;let Li=Vn,Ei=1;for(Ui=0;Ui<ai;++Ui){const $i=xi[Ui][0],Bi=xi[Ui][1],Oi=Math.min(Math.max(ji[Pi+Ui],$i),Bi);let Xi=Ii(Oi,$i,Bi,Ci[Ui][0],Ci[Ui][1]);const Gi=Yn[Ui];Xi=Math.min(Math.max(Xi,0),Gi-1);const qi=Xi<Gi-1?Math.floor(Xi):Xi-1,ns=qi+1-Xi,is=Xi-qi,as=qi*Li,hs=as+Li;for(Hi=0;Hi<Ti;Hi++)Hi&Ei?(Ri[Hi]*=is,Mi[Hi]+=hs):(Ri[Hi]*=ns,Mi[Hi]+=as);Li*=Gi,Ei<<=1}for(Hi=0;Hi<Vn;++Hi){let $i=0;for(Ui=0;Ui<Ti;Ui++)$i+=zi[Mi[Ui]+Hi]*Ri[Ui];$i=Ii($i,0,1,Fi[Hi][0],Fi[Hi][1]),Ni[Si+Hi]=Math.min(Math.max($i,Qn[Hi][0]),Qn[Hi][1])}}}static constructInterpolated({xref:ni,isEvalSupported:li,dict:Ai}){const gi=ui(Ai.getArray("C0"))||[0],yi=ui(Ai.getArray("C1"))||[1],Ii=Ai.get("N"),xi=[];for(let ai=0,Vn=gi.length;ai<Vn;++ai)xi.push(yi[ai]-gi[ai]);const Qn=xi.length;return function(Vn,Yn,ci,bi){const Ci=Ii===1?Vn[Yn]:Vn[Yn]**Ii;for(let Fi=0;Fi<Qn;++Fi)ci[bi+Fi]=gi[Fi]+Ci*xi[Fi]}}static constructStiched({xref:ni,isEvalSupported:li,dict:Ai}){const gi=ui(Ai.getArray("Domain"));if(!gi)throw new Ln.FormatError("No domain");if(gi.length/2!==1)throw new Ln.FormatError("Bad domain for stiched function");const Ii=[];for(const Vn of Ai.get("Functions"))Ii.push(this.parse({xref:ni,isEvalSupported:li,fn:ni.fetchIfRef(Vn)}));const xi=ui(Ai.getArray("Bounds")),Qn=ui(Ai.getArray("Encode")),ai=new Float32Array(1);return function(Yn,ci,bi,Ci){const zi=function(Mi,Ui,Hi){return Mi>Hi?Mi=Hi:Mi<Ui&&(Mi=Ui),Mi}(Yn[ci],gi[0],gi[1]),_i=xi.length;let ji;for(ji=0;ji<_i&&!(zi<xi[ji]);++ji);let Pi=gi[0];ji>0&&(Pi=xi[ji-1]);let Ni=gi[1];ji<xi.length&&(Ni=xi[ji]);const Si=Qn[2*ji],Ti=Qn[2*ji+1];ai[0]=Pi===Ni?Si:Si+(zi-Pi)*(Ti-Si)/(Ni-Pi),Ii[ji](ai,0,bi,Ci)}}static constructPostScript({xref:ni,isEvalSupported:li,fn:Ai,dict:gi}){const yi=ui(gi.getArray("Domain")),Ii=ui(gi.getArray("Range"));if(!yi)throw new Ln.FormatError("No domain.");if(!Ii)throw new Ln.FormatError("No range.");const xi=new jn.PostScriptLexer(Ai),ai=new jn.PostScriptParser(xi).parse();if(li&&Ln.FeatureTest.isEvalSupported){const _i=new Gn().compile(ai,yi,Ii);if(_i)return new Function("src","srcOffset","dest","destOffset",_i)}(0,Ln.info)("Unable to compile PS function");const Vn=Ii.length>>1,Yn=yi.length>>1,ci=new Nn(ai),bi=Object.create(null);let Fi=2048*4;const zi=new Float32Array(Yn);return function(ji,Pi,Ni,Si){let Ti,Ri,Mi="";const Ui=zi;for(Ti=0;Ti<Yn;Ti++)Ri=ji[Pi+Ti],Ui[Ti]=Ri,Mi+=Ri+"_";const Hi=bi[Mi];if(Hi!==void 0){Ni.set(Hi,Si);return}const Li=new Float32Array(Vn),Ei=ci.execute(Ui),$i=Ei.length-Vn;for(Ti=0;Ti<Vn;Ti++){Ri=Ei[$i+Ti];let Bi=Ii[Ti*2];Ri<Bi?Ri=Bi:(Bi=Ii[Ti*2+1],Ri>Bi&&(Ri=Bi)),Li[Ti]=Ri}Fi>0&&(Fi--,bi[Mi]=Li),Ni.set(Li,Si)}}}function ei(Wn){let ni;if(Wn instanceof In.Dict)ni=Wn;else if(Wn instanceof Cn.BaseStream)ni=Wn.dict;else return!1;return ni.has("FunctionType")}const mi=class mi{constructor(ni){this.stack=ni?Array.from(ni):[]}push(ni){if(this.stack.length>=mi.MAX_STACK_SIZE)throw new Error("PostScript function stack overflow.");this.stack.push(ni)}pop(){if(this.stack.length<=0)throw new Error("PostScript function stack underflow.");return this.stack.pop()}copy(ni){if(this.stack.length+ni>=mi.MAX_STACK_SIZE)throw new Error("PostScript function stack overflow.");const li=this.stack;for(let Ai=li.length-ni,gi=ni-1;gi>=0;gi--,Ai++)li.push(li[Ai])}index(ni){this.push(this.stack[this.stack.length-ni-1])}roll(ni,li){const Ai=this.stack,gi=Ai.length-ni,yi=Ai.length-1,Ii=gi+(li-Math.floor(li/ni)*ni);for(let xi=gi,Qn=yi;xi<Qn;xi++,Qn--){const ai=Ai[xi];Ai[xi]=Ai[Qn],Ai[Qn]=ai}for(let xi=gi,Qn=Ii-1;xi<Qn;xi++,Qn--){const ai=Ai[xi];Ai[xi]=Ai[Qn],Ai[Qn]=ai}for(let xi=Ii,Qn=yi;xi<Qn;xi++,Qn--){const ai=Ai[xi];Ai[xi]=Ai[Qn],Ai[Qn]=ai}}};ta(mi,"MAX_STACK_SIZE",100);let Bn=mi;class Nn{constructor(ni){this.operators=ni}execute(ni){const li=new Bn(ni);let Ai=0;const gi=this.operators,yi=gi.length;let Ii,xi,Qn;for(;Ai<yi;){if(Ii=gi[Ai++],typeof Ii=="number"){li.push(Ii);continue}switch(Ii){case"jz":Qn=li.pop(),xi=li.pop(),xi||(Ai=Qn);break;case"j":xi=li.pop(),Ai=xi;break;case"abs":xi=li.pop(),li.push(Math.abs(xi));break;case"add":Qn=li.pop(),xi=li.pop(),li.push(xi+Qn);break;case"and":Qn=li.pop(),xi=li.pop(),typeof xi=="boolean"&&typeof Qn=="boolean"?li.push(xi&&Qn):li.push(xi&Qn);break;case"atan":Qn=li.pop(),xi=li.pop(),xi=Math.atan2(xi,Qn)/Math.PI*180,xi<0&&(xi+=360),li.push(xi);break;case"bitshift":Qn=li.pop(),xi=li.pop(),xi>0?li.push(xi<<Qn):li.push(xi>>Qn);break;case"ceiling":xi=li.pop(),li.push(Math.ceil(xi));break;case"copy":xi=li.pop(),li.copy(xi);break;case"cos":xi=li.pop(),li.push(Math.cos(xi%360/180*Math.PI));break;case"cvi":xi=li.pop()|0,li.push(xi);break;case"cvr":break;case"div":Qn=li.pop(),xi=li.pop(),li.push(xi/Qn);break;case"dup":li.copy(1);break;case"eq":Qn=li.pop(),xi=li.pop(),li.push(xi===Qn);break;case"exch":li.roll(2,1);break;case"exp":Qn=li.pop(),xi=li.pop(),li.push(xi**Qn);break;case"false":li.push(!1);break;case"floor":xi=li.pop(),li.push(Math.floor(xi));break;case"ge":Qn=li.pop(),xi=li.pop(),li.push(xi>=Qn);break;case"gt":Qn=li.pop(),xi=li.pop(),li.push(xi>Qn);break;case"idiv":Qn=li.pop(),xi=li.pop(),li.push(xi/Qn|0);break;case"index":xi=li.pop(),li.index(xi);break;case"le":Qn=li.pop(),xi=li.pop(),li.push(xi<=Qn);break;case"ln":xi=li.pop(),li.push(Math.log(xi));break;case"log":xi=li.pop(),li.push(Math.log10(xi));break;case"lt":Qn=li.pop(),xi=li.pop(),li.push(xi<Qn);break;case"mod":Qn=li.pop(),xi=li.pop(),li.push(xi%Qn);break;case"mul":Qn=li.pop(),xi=li.pop(),li.push(xi*Qn);break;case"ne":Qn=li.pop(),xi=li.pop(),li.push(xi!==Qn);break;case"neg":xi=li.pop(),li.push(-xi);break;case"not":xi=li.pop(),typeof xi=="boolean"?li.push(!xi):li.push(~xi);break;case"or":Qn=li.pop(),xi=li.pop(),typeof xi=="boolean"&&typeof Qn=="boolean"?li.push(xi||Qn):li.push(xi|Qn);break;case"pop":li.pop();break;case"roll":Qn=li.pop(),xi=li.pop(),li.roll(xi,Qn);break;case"round":xi=li.pop(),li.push(Math.round(xi));break;case"sin":xi=li.pop(),li.push(Math.sin(xi%360/180*Math.PI));break;case"sqrt":xi=li.pop(),li.push(Math.sqrt(xi));break;case"sub":Qn=li.pop(),xi=li.pop(),li.push(xi-Qn);break;case"true":li.push(!0);break;case"truncate":xi=li.pop(),xi=xi<0?Math.ceil(xi):Math.floor(xi),li.push(xi);break;case"xor":Qn=li.pop(),xi=li.pop(),typeof xi=="boolean"&&typeof Qn=="boolean"?li.push(xi!==Qn):li.push(xi^Qn);break;default:throw new Ln.FormatError(`Unknown operator ${Ii}`)}}return li.stack}}Mn.PostScriptEvaluator=Nn;class Hn{constructor(ni){this.type=ni}visit(ni){(0,Ln.unreachable)("abstract method")}}class On extends Hn{constructor(ni,li,Ai){super("args"),this.index=ni,this.min=li,this.max=Ai}visit(ni){ni.visitArgument(this)}}class hi extends Hn{constructor(ni){super("literal"),this.number=ni,this.min=ni,this.max=ni}visit(ni){ni.visitLiteral(this)}}class Xn extends Hn{constructor(ni,li,Ai,gi,yi){super("binary"),this.op=ni,this.arg1=li,this.arg2=Ai,this.min=gi,this.max=yi}visit(ni){ni.visitBinaryOperation(this)}}class ii extends Hn{constructor(ni,li){super("max"),this.arg=ni,this.min=ni.min,this.max=li}visit(ni){ni.visitMin(this)}}class ri extends Hn{constructor(ni,li,Ai){super("var"),this.index=ni,this.min=li,this.max=Ai}visit(ni){ni.visitVariable(this)}}class di extends Hn{constructor(ni,li){super("definition"),this.variable=ni,this.arg=li}visit(ni){ni.visitVariableDefinition(this)}}class fi{constructor(){this.parts=[]}visitArgument(ni){this.parts.push("Math.max(",ni.min,", Math.min(",ni.max,", src[srcOffset + ",ni.index,"]))")}visitVariable(ni){this.parts.push("v",ni.index)}visitLiteral(ni){this.parts.push(ni.number)}visitBinaryOperation(ni){this.parts.push("("),ni.arg1.visit(this),this.parts.push(" ",ni.op," "),ni.arg2.visit(this),this.parts.push(")")}visitVariableDefinition(ni){this.parts.push("var "),ni.variable.visit(this),this.parts.push(" = "),ni.arg.visit(this),this.parts.push(";")}visitMin(ni){this.parts.push("Math.min("),ni.arg.visit(this),this.parts.push(", ",ni.max,")")}toString(){return this.parts.join("")}}function wi(Wn,ni){return ni.type==="literal"&&ni.number===0?Wn:Wn.type==="literal"&&Wn.number===0?ni:ni.type==="literal"&&Wn.type==="literal"?new hi(Wn.number+ni.number):new Xn("+",Wn,ni,Wn.min+ni.min,Wn.max+ni.max)}function Jn(Wn,ni){if(ni.type==="literal"){if(ni.number===0)return new hi(0);if(ni.number===1)return Wn;if(Wn.type==="literal")return new hi(Wn.number*ni.number)}if(Wn.type==="literal"){if(Wn.number===0)return new hi(0);if(Wn.number===1)return ni}const li=Math.min(Wn.min*ni.min,Wn.min*ni.max,Wn.max*ni.min,Wn.max*ni.max),Ai=Math.max(Wn.min*ni.min,Wn.min*ni.max,Wn.max*ni.min,Wn.max*ni.max);return new Xn("*",Wn,ni,li,Ai)}function pi(Wn,ni){if(ni.type==="literal"){if(ni.number===0)return Wn;if(Wn.type==="literal")return new hi(Wn.number-ni.number)}return ni.type==="binary"&&ni.op==="-"&&Wn.type==="literal"&&Wn.number===1&&ni.arg1.type==="literal"&&ni.arg1.number===1?ni.arg2:new Xn("-",Wn,ni,Wn.min-ni.max,Wn.max-ni.min)}function Zn(Wn,ni){return Wn.min>=ni?new hi(ni):Wn.max<=ni?Wn:new ii(Wn,ni)}class Gn{compile(ni,li,Ai){const gi=[],yi=[],Ii=li.length>>1,xi=Ai.length>>1;let Qn=0,ai,Vn,Yn,ci,bi,Ci,Fi,zi;for(let ji=0;ji<Ii;ji++)gi.push(new On(ji,li[ji*2],li[ji*2+1]));for(let ji=0,Pi=ni.length;ji<Pi;ji++){if(zi=ni[ji],typeof zi=="number"){gi.push(new hi(zi));continue}switch(zi){case"add":if(gi.length<2)return null;ci=gi.pop(),Yn=gi.pop(),gi.push(wi(Yn,ci));break;case"cvr":if(gi.length<1)return null;break;case"mul":if(gi.length<2)return null;ci=gi.pop(),Yn=gi.pop(),gi.push(Jn(Yn,ci));break;case"sub":if(gi.length<2)return null;ci=gi.pop(),Yn=gi.pop(),gi.push(pi(Yn,ci));break;case"exch":if(gi.length<2)return null;bi=gi.pop(),Ci=gi.pop(),gi.push(bi,Ci);break;case"pop":if(gi.length<1)return null;gi.pop();break;case"index":if(gi.length<1||(Yn=gi.pop(),Yn.type!=="literal")||(ai=Yn.number,ai<0||!Number.isInteger(ai)||gi.length<ai))return null;if(bi=gi[gi.length-ai-1],bi.type==="literal"||bi.type==="var"){gi.push(bi);break}Fi=new ri(Qn++,bi.min,bi.max),gi[gi.length-ai-1]=Fi,gi.push(Fi),yi.push(new di(Fi,bi));break;case"dup":if(gi.length<1)return null;if(typeof ni[ji+1]=="number"&&ni[ji+2]==="gt"&&ni[ji+3]===ji+7&&ni[ji+4]==="jz"&&ni[ji+5]==="pop"&&ni[ji+6]===ni[ji+1]){Yn=gi.pop(),gi.push(Zn(Yn,ni[ji+1])),ji+=6;break}if(bi=gi.at(-1),bi.type==="literal"||bi.type==="var"){gi.push(bi);break}Fi=new ri(Qn++,bi.min,bi.max),gi[gi.length-1]=Fi,gi.push(Fi),yi.push(new di(Fi,bi));break;case"roll":if(gi.length<2||(ci=gi.pop(),Yn=gi.pop(),ci.type!=="literal"||Yn.type!=="literal")||(Vn=ci.number,ai=Yn.number,ai<=0||!Number.isInteger(ai)||!Number.isInteger(Vn)||gi.length<ai))return null;if(Vn=(Vn%ai+ai)%ai,Vn===0)break;gi.push(...gi.splice(gi.length-ai,ai-Vn));break;default:return null}}if(gi.length!==xi)return null;const _i=[];for(const ji of yi){const Pi=new fi;ji.visit(Pi),_i.push(Pi.toString())}for(let ji=0,Pi=gi.length;ji<Pi;ji++){const Ni=gi[ji],Si=new fi;Ni.visit(Si);const Ti=Ai[ji*2],Ri=Ai[ji*2+1],Mi=[Si.toString()];Ti>Ni.min&&(Mi.unshift("Math.max(",Ti,", "),Mi.push(")")),Ri<Ni.max&&(Mi.unshift("Math.min(",Ri,", "),Mi.push(")")),Mi.unshift("dest[destOffset + ",ji,"] = "),Mi.push(";"),_i.push(Mi.join(""))}return _i.join(`
`)}}Mn.PostScriptCompiler=Gn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.PostScriptParser=Mn.PostScriptLexer=void 0;var In=ti(2),Ln=ti(4),jn=ti(3);class Cn{constructor(ei){this.lexer=ei,this.operators=[],this.token=null,this.prev=null}nextToken(){this.prev=this.token,this.token=this.lexer.getToken()}accept(ei){return this.token.type===ei?(this.nextToken(),!0):!1}expect(ei){if(this.accept(ei))return!0;throw new In.FormatError(`Unexpected symbol: found ${this.token.type} expected ${ei}.`)}parse(){return this.nextToken(),this.expect(Tn.LBRACE),this.parseBlock(),this.expect(Tn.RBRACE),this.operators}parseBlock(){for(;;)if(this.accept(Tn.NUMBER))this.operators.push(this.prev.value);else if(this.accept(Tn.OPERATOR))this.operators.push(this.prev.value);else if(this.accept(Tn.LBRACE))this.parseCondition();else return}parseCondition(){const ei=this.operators.length;if(this.operators.push(null,null),this.parseBlock(),this.expect(Tn.RBRACE),this.accept(Tn.IF))this.operators[ei]=this.operators.length,this.operators[ei+1]="jz";else if(this.accept(Tn.LBRACE)){const Bn=this.operators.length;this.operators.push(null,null);const Nn=this.operators.length;this.parseBlock(),this.expect(Tn.RBRACE),this.expect(Tn.IFELSE),this.operators[Bn]=this.operators.length,this.operators[Bn+1]="j",this.operators[ei]=Nn,this.operators[ei+1]="jz"}else throw new In.FormatError("PS Function: error parsing conditional.")}}Mn.PostScriptParser=Cn;const Tn={LBRACE:0,RBRACE:1,NUMBER:2,OPERATOR:3,IF:4,IFELSE:5};class Rn{static get opCache(){return(0,In.shadow)(this,"opCache",Object.create(null))}constructor(ei,Bn){this.type=ei,this.value=Bn}static getOperator(ei){var Bn;return(Bn=Rn.opCache)[ei]||(Bn[ei]=new Rn(Tn.OPERATOR,ei))}static get LBRACE(){return(0,In.shadow)(this,"LBRACE",new Rn(Tn.LBRACE,"{"))}static get RBRACE(){return(0,In.shadow)(this,"RBRACE",new Rn(Tn.RBRACE,"}"))}static get IF(){return(0,In.shadow)(this,"IF",new Rn(Tn.IF,"IF"))}static get IFELSE(){return(0,In.shadow)(this,"IFELSE",new Rn(Tn.IFELSE,"IFELSE"))}}class ui{constructor(ei){this.stream=ei,this.nextChar(),this.strBuf=[]}nextChar(){return this.currentChar=this.stream.getByte()}getToken(){let ei=!1,Bn=this.currentChar;for(;;){if(Bn<0)return Ln.EOF;if(ei)(Bn===10||Bn===13)&&(ei=!1);else if(Bn===37)ei=!0;else if(!(0,jn.isWhiteSpace)(Bn))break;Bn=this.nextChar()}switch(Bn|0){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return new Rn(Tn.NUMBER,this.getNumber());case 123:return this.nextChar(),Rn.LBRACE;case 125:return this.nextChar(),Rn.RBRACE}const Nn=this.strBuf;for(Nn.length=0,Nn[0]=String.fromCharCode(Bn);(Bn=this.nextChar())>=0&&(Bn>=65&&Bn<=90||Bn>=97&&Bn<=122);)Nn.push(String.fromCharCode(Bn));const Hn=Nn.join("");switch(Hn.toLowerCase()){case"if":return Rn.IF;case"ifelse":return Rn.IFELSE;default:return Rn.getOperator(Hn)}}getNumber(){let ei=this.currentChar;const Bn=this.strBuf;for(Bn.length=0,Bn[0]=String.fromCharCode(ei);(ei=this.nextChar())>=0&&(ei>=48&&ei<=57||ei===45||ei===46);)Bn.push(String.fromCharCode(ei));const Nn=parseFloat(Bn.join(""));if(isNaN(Nn))throw new In.FormatError(`Invalid floating point number: ${Nn}`);return Nn}}Mn.PostScriptLexer=ui},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.RegionalImageCache=Mn.LocalTilingPatternCache=Mn.LocalImageCache=Mn.LocalGStateCache=Mn.LocalFunctionCache=Mn.LocalColorSpaceCache=Mn.GlobalImageCache=void 0;var In=ti(2),Ln=ti(4);class jn{constructor(On){this.constructor===jn&&(0,In.unreachable)("Cannot initialize BaseLocalCache."),this._onlyRefs=(On==null?void 0:On.onlyRefs)===!0,this._onlyRefs||(this._nameRefMap=new Map,this._imageMap=new Map),this._imageCache=new Ln.RefSetCache}getByName(On){this._onlyRefs&&(0,In.unreachable)("Should not call `getByName` method.");const hi=this._nameRefMap.get(On);return hi?this.getByRef(hi):this._imageMap.get(On)||null}getByRef(On){return this._imageCache.get(On)||null}set(On,hi,Xn){(0,In.unreachable)("Abstract method `set` called.")}}class Cn extends jn{set(On,hi=null,Xn){if(typeof On!="string")throw new Error('LocalImageCache.set - expected "name" argument.');if(hi){if(this._imageCache.has(hi))return;this._nameRefMap.set(On,hi),this._imageCache.put(hi,Xn);return}this._imageMap.has(On)||this._imageMap.set(On,Xn)}}Mn.LocalImageCache=Cn;class Tn extends jn{set(On=null,hi=null,Xn){if(typeof On!="string"&&!hi)throw new Error('LocalColorSpaceCache.set - expected "name" and/or "ref" argument.');if(hi){if(this._imageCache.has(hi))return;On!==null&&this._nameRefMap.set(On,hi),this._imageCache.put(hi,Xn);return}this._imageMap.has(On)||this._imageMap.set(On,Xn)}}Mn.LocalColorSpaceCache=Tn;class Rn extends jn{constructor(On){super({onlyRefs:!0})}set(On=null,hi,Xn){if(!hi)throw new Error('LocalFunctionCache.set - expected "ref" argument.');this._imageCache.has(hi)||this._imageCache.put(hi,Xn)}}Mn.LocalFunctionCache=Rn;class ui extends jn{set(On,hi=null,Xn){if(typeof On!="string")throw new Error('LocalGStateCache.set - expected "name" argument.');if(hi){if(this._imageCache.has(hi))return;this._nameRefMap.set(On,hi),this._imageCache.put(hi,Xn);return}this._imageMap.has(On)||this._imageMap.set(On,Xn)}}Mn.LocalGStateCache=ui;class si extends jn{constructor(On){super({onlyRefs:!0})}set(On=null,hi,Xn){if(!hi)throw new Error('LocalTilingPatternCache.set - expected "ref" argument.');this._imageCache.has(hi)||this._imageCache.put(hi,Xn)}}Mn.LocalTilingPatternCache=si;class ei extends jn{constructor(On){super({onlyRefs:!0})}set(On=null,hi,Xn){if(!hi)throw new Error('RegionalImageCache.set - expected "ref" argument.');this._imageCache.has(hi)||this._imageCache.put(hi,Xn)}}Mn.RegionalImageCache=ei;const Nn=class Nn{constructor(){this._refCache=new Ln.RefSetCache,this._imageCache=new Ln.RefSetCache}get _byteSize(){let On=0;for(const hi of this._imageCache)On+=hi.byteSize;return On}get _cacheLimitReached(){return!(this._imageCache.size<Nn.MIN_IMAGES_TO_CACHE||this._byteSize<Nn.MAX_BYTE_SIZE)}shouldCache(On,hi){let Xn=this._refCache.get(On);return Xn||(Xn=new Set,this._refCache.put(On,Xn)),Xn.add(hi),!(Xn.size<Nn.NUM_PAGES_THRESHOLD||!this._imageCache.has(On)&&this._cacheLimitReached)}addByteSize(On,hi){const Xn=this._imageCache.get(On);Xn&&(Xn.byteSize||(Xn.byteSize=hi))}getData(On,hi){const Xn=this._refCache.get(On);if(!Xn||Xn.size<Nn.NUM_PAGES_THRESHOLD)return null;const ii=this._imageCache.get(On);return ii?(Xn.add(hi),ii):null}setData(On,hi){if(!this._refCache.has(On))throw new Error('GlobalImageCache.setData - expected "shouldCache" to have been called.');if(!this._imageCache.has(On)){if(this._cacheLimitReached){(0,In.warn)("GlobalImageCache.setData - cache limit reached.");return}this._imageCache.put(On,hi)}}clear(On=!1){On||this._refCache.clear(),this._imageCache.clear()}};ta(Nn,"NUM_PAGES_THRESHOLD",2),ta(Nn,"MIN_IMAGES_TO_CACHE",10),ta(Nn,"MAX_BYTE_SIZE",5*In.MAX_IMAGE_SIZE_TO_CACHE);let Bn=Nn;Mn.GlobalImageCache=Bn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.bidi=Hn;var In=ti(2);const Ln=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","ON","ON","ET","ET","ET","ON","ON","ON","ON","ON","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","ON","ET","ET","ET","ET","ON","ON","ON","ON","L","ON","ON","BN","ON","ON","ET","ET","EN","EN","ON","L","ON","ON","ON","EN","L","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L"],jn=["AN","AN","AN","AN","AN","AN","ON","ON","AL","ET","ET","AL","CS","AL","ON","ON","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","ON","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","ON","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL"];function Cn(On){return(On&1)!==0}function Tn(On){return(On&1)===0}function Rn(On,hi,Xn){let ii,ri;for(ii=hi,ri=On.length;ii<ri;++ii)if(On[ii]!==Xn)return ii;return ii}function ui(On,hi,Xn,ii){for(let ri=hi;ri<Xn;++ri)On[ri]=ii}function si(On,hi,Xn){for(let ii=hi,ri=Xn-1;ii<ri;++ii,--ri){const di=On[ii];On[ii]=On[ri],On[ri]=di}}function ei(On,hi,Xn=!1){let ii="ltr";return Xn?ii="ttb":hi||(ii="rtl"),{str:On,dir:ii}}const Bn=[],Nn=[];function Hn(On,hi=-1,Xn=!1){let ii=!0;const ri=On.length;if(ri===0||Xn)return ei(On,ii,Xn);Bn.length=ri,Nn.length=ri;let di=0,fi,wi;for(fi=0;fi<ri;++fi){Bn[fi]=On.charAt(fi);const gi=On.charCodeAt(fi);let yi="L";gi<=255?yi=Ln[gi]:1424<=gi&&gi<=1524?yi="R":1536<=gi&&gi<=1791?(yi=jn[gi&255],yi||(0,In.warn)("Bidi: invalid Unicode character "+gi.toString(16))):(1792<=gi&&gi<=2220||64336<=gi&&gi<=65023||65136<=gi&&gi<=65279)&&(yi="AL"),(yi==="R"||yi==="AL"||yi==="AN")&&di++,Nn[fi]=yi}if(di===0)return ii=!0,ei(On,ii);hi===-1&&(di/ri<.3&&ri>4?(ii=!0,hi=0):(ii=!1,hi=1));const Jn=[];for(fi=0;fi<ri;++fi)Jn[fi]=hi;const pi=Cn(hi)?"R":"L",Zn=pi,Gn=Zn;let mi=Zn;for(fi=0;fi<ri;++fi)Nn[fi]==="NSM"?Nn[fi]=mi:mi=Nn[fi];mi=Zn;let Wn;for(fi=0;fi<ri;++fi)Wn=Nn[fi],Wn==="EN"?Nn[fi]=mi==="AL"?"AN":"EN":(Wn==="R"||Wn==="L"||Wn==="AL")&&(mi=Wn);for(fi=0;fi<ri;++fi)Wn=Nn[fi],Wn==="AL"&&(Nn[fi]="R");for(fi=1;fi<ri-1;++fi)Nn[fi]==="ES"&&Nn[fi-1]==="EN"&&Nn[fi+1]==="EN"&&(Nn[fi]="EN"),Nn[fi]==="CS"&&(Nn[fi-1]==="EN"||Nn[fi-1]==="AN")&&Nn[fi+1]===Nn[fi-1]&&(Nn[fi]=Nn[fi-1]);for(fi=0;fi<ri;++fi)if(Nn[fi]==="EN"){for(let gi=fi-1;gi>=0&&Nn[gi]==="ET";--gi)Nn[gi]="EN";for(let gi=fi+1;gi<ri&&Nn[gi]==="ET";++gi)Nn[gi]="EN"}for(fi=0;fi<ri;++fi)Wn=Nn[fi],(Wn==="WS"||Wn==="ES"||Wn==="ET"||Wn==="CS")&&(Nn[fi]="ON");for(mi=Zn,fi=0;fi<ri;++fi)Wn=Nn[fi],Wn==="EN"?Nn[fi]=mi==="L"?"L":"EN":(Wn==="R"||Wn==="L")&&(mi=Wn);for(fi=0;fi<ri;++fi)if(Nn[fi]==="ON"){const gi=Rn(Nn,fi+1,"ON");let yi=Zn;fi>0&&(yi=Nn[fi-1]);let Ii=Gn;gi+1<ri&&(Ii=Nn[gi+1]),yi!=="L"&&(yi="R"),Ii!=="L"&&(Ii="R"),yi===Ii&&ui(Nn,fi,gi,yi),fi=gi-1}for(fi=0;fi<ri;++fi)Nn[fi]==="ON"&&(Nn[fi]=pi);for(fi=0;fi<ri;++fi)Wn=Nn[fi],Tn(Jn[fi])?Wn==="R"?Jn[fi]+=1:(Wn==="AN"||Wn==="EN")&&(Jn[fi]+=2):(Wn==="L"||Wn==="AN"||Wn==="EN")&&(Jn[fi]+=1);let ni=-1,li=99,Ai;for(fi=0,wi=Jn.length;fi<wi;++fi)Ai=Jn[fi],ni<Ai&&(ni=Ai),li>Ai&&Cn(Ai)&&(li=Ai);for(Ai=ni;Ai>=li;--Ai){let gi=-1;for(fi=0,wi=Jn.length;fi<wi;++fi)Jn[fi]<Ai?gi>=0&&(si(Bn,gi,fi),gi=-1):gi<0&&(gi=fi);gi>=0&&si(Bn,gi,Jn.length)}for(fi=0,wi=Bn.length;fi<wi;++fi){const gi=Bn[fi];(gi==="<"||gi===">")&&(Bn[fi]="")}return ei(Bn.join(""),ii)}},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.getFontSubstitution=Nn;var In=ti(38),Ln=ti(3);const jn={style:"normal",weight:"normal"},Cn={style:"normal",weight:"bold"},Tn={style:"italic",weight:"normal"},Rn={style:"italic",weight:"bold"},ui=new Map([["Times-Roman",{local:["Times New Roman","Times-Roman","Times","Liberation Serif","Nimbus Roman","Nimbus Roman L","Tinos","Thorndale","TeX Gyre Termes","FreeSerif","DejaVu Serif","Bitstream Vera Serif","Ubuntu"],style:jn,ultimate:"serif"}],["Times-Bold",{alias:"Times-Roman",style:Cn,ultimate:"serif"}],["Times-Italic",{alias:"Times-Roman",style:Tn,ultimate:"serif"}],["Times-BoldItalic",{alias:"Times-Roman",style:Rn,ultimate:"serif"}],["Helvetica",{local:["Helvetica","Helvetica Neue","Arial","Arial Nova","Liberation Sans","Arimo","Nimbus Sans","Nimbus Sans L","A030","TeX Gyre Heros","FreeSans","DejaVu Sans","Albany","Bitstream Vera Sans","Arial Unicode MS","Microsoft Sans Serif","Apple Symbols","Cantarell"],path:"LiberationSans-Regular.ttf",style:jn,ultimate:"sans-serif"}],["Helvetica-Bold",{alias:"Helvetica",path:"LiberationSans-Bold.ttf",style:Cn,ultimate:"sans-serif"}],["Helvetica-Oblique",{alias:"Helvetica",path:"LiberationSans-Italic.ttf",style:Tn,ultimate:"sans-serif"}],["Helvetica-BoldOblique",{alias:"Helvetica",path:"LiberationSans-BoldItalic.ttf",style:Rn,ultimate:"sans-serif"}],["Courier",{local:["Courier","Courier New","Liberation Mono","Nimbus Mono","Nimbus Mono L","Cousine","Cumberland","TeX Gyre Cursor","FreeMono"],style:jn,ultimate:"monospace"}],["Courier-Bold",{alias:"Courier",style:Cn,ultimate:"monospace"}],["Courier-Oblique",{alias:"Courier",style:Tn,ultimate:"monospace"}],["Courier-BoldOblique",{alias:"Courier",style:Rn,ultimate:"monospace"}],["ArialBlack",{local:["Arial Black"],style:{style:"normal",weight:"900"},fallback:"Helvetica-Bold"}],["ArialBlack-Bold",{alias:"ArialBlack"}],["ArialBlack-Italic",{alias:"ArialBlack",style:{style:"italic",weight:"900"},fallback:"Helvetica-BoldOblique"}],["ArialBlack-BoldItalic",{alias:"ArialBlack-Italic"}],["ArialNarrow",{local:["Arial Narrow","Liberation Sans Narrow","Helvetica Condensed","Nimbus Sans Narrow","TeX Gyre Heros Cn"],style:jn,fallback:"Helvetica"}],["ArialNarrow-Bold",{alias:"ArialNarrow",style:Cn,fallback:"Helvetica-Bold"}],["ArialNarrow-Italic",{alias:"ArialNarrow",style:Tn,fallback:"Helvetica-Oblique"}],["ArialNarrow-BoldItalic",{alias:"ArialNarrow",style:Rn,fallback:"Helvetica-BoldOblique"}],["Calibri",{local:["Calibri","Carlito"],style:jn,fallback:"Helvetica"}],["Calibri-Bold",{alias:"Calibri",style:Cn,fallback:"Helvetica-Bold"}],["Calibri-Italic",{alias:"Calibri",style:Tn,fallback:"Helvetica-Oblique"}],["Calibri-BoldItalic",{alias:"Calibri",style:Rn,fallback:"Helvetica-BoldOblique"}],["Wingdings",{local:["Wingdings","URW Dingbats"],style:jn}],["Wingdings-Regular",{alias:"Wingdings"}],["Wingdings-Bold",{alias:"Wingdings"}]]),si=new Map([["Arial-Black","ArialBlack"]]);function ei(Hn){switch(Hn){case Cn:return"Bold";case Tn:return"Italic";case Rn:return"Bold Italic";default:if((Hn==null?void 0:Hn.weight)==="bold")return"Bold";if((Hn==null?void 0:Hn.style)==="italic")return"Italic"}return""}function Bn({alias:Hn,local:On,path:hi,fallback:Xn,style:ii,ultimate:ri},di,fi,wi=!0,Jn=!0,pi=""){const Zn={style:null,ultimate:null};if(On){const Gn=pi?` ${pi}`:"";for(const mi of On)di.push(`local(${mi}${Gn})`)}if(Hn){const Gn=ui.get(Hn),mi=pi||ei(ii);Object.assign(Zn,Bn(Gn,di,fi,wi&&!Xn,Jn&&!hi,mi))}if(ii&&(Zn.style=ii),ri&&(Zn.ultimate=ri),wi&&Xn){const Gn=ui.get(Xn),{ultimate:mi}=Bn(Gn,di,fi,wi,Jn&&!hi,pi);Zn.ultimate||(Zn.ultimate=mi)}return Jn&&hi&&fi&&di.push(`url(${fi}${hi})`),Zn}function Nn(Hn,On,hi,Xn,ii){Xn=(0,In.normalizeFontName)(Xn);const ri=Xn;let di=Hn.get(ri);if(di)return di;let fi=ui.get(Xn);if(!fi){for(const[ni,li]of si)if(Xn.startsWith(ni)){Xn=`${li}${Xn.substring(ni.length)}`,fi=ui.get(Xn);break}}let wi=!1;fi||(fi=ui.get(ii),wi=!0);const Jn=`${On.getDocId()}_s${On.createFontId()}`;if(!fi){if(!(0,Ln.validateFontName)(Xn))return Hn.set(ri,null),null;const ni=/bold/gi.test(Xn),li=/oblique|italic/gi.test(Xn),Ai=ni&&li&&Rn||ni&&Cn||li&&Tn||jn;return di={css:Jn,guessFallback:!0,loadedName:Jn,baseFontName:Xn,src:`local(${Xn})`,style:Ai},Hn.set(ri,di),di}const pi=[];wi&&(0,Ln.validateFontName)(Xn)&&pi.push(`local(${Xn})`);const{style:Zn,ultimate:Gn}=Bn(fi,pi,hi),mi=Gn===null,Wn=mi?"":`,${Gn}`;return di={css:`${Jn}${Wn}`,guessFallback:mi,loadedName:Jn,baseFontName:Xn,src:pi.join(","),style:Zn},Hn.set(ri,di),di}},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.ImageResizer=void 0;var In=ti(2);const Ln=2048,jn=65537,Cn=128;class Tn{constructor(ui,si){this._imgData=ui,this._isMask=si}static needsToBeResized(ui,si){if(ui<=this._goodSquareLength&&si<=this._goodSquareLength)return!1;const{MAX_DIM:ei}=this;if(ui>ei||si>ei)return!0;const Bn=ui*si;if(this._hasMaxArea)return Bn>this.MAX_AREA;if(Bn<this._goodSquareLength**2)return!1;if(this._areGoodDims(ui,si))return this._goodSquareLength=Math.max(this._goodSquareLength,Math.floor(Math.sqrt(ui*si))),!1;this._goodSquareLength=this._guessMax(this._goodSquareLength,ei,Cn,0);const Nn=this.MAX_AREA=this._goodSquareLength**2;return Bn>Nn}static get MAX_DIM(){return(0,In.shadow)(this,"MAX_DIM",this._guessMax(Ln,jn,0,1))}static get MAX_AREA(){return this._hasMaxArea=!0,(0,In.shadow)(this,"MAX_AREA",this._guessMax(Tn._goodSquareLength,this.MAX_DIM,Cn,0)**2)}static set MAX_AREA(ui){ui>=0&&(this._hasMaxArea=!0,(0,In.shadow)(this,"MAX_AREA",ui))}static setMaxArea(ui){this._hasMaxArea||(this.MAX_AREA=ui>>2)}static _areGoodDims(ui,si){try{const ei=new OffscreenCanvas(ui,si),Bn=ei.getContext("2d");Bn.fillRect(0,0,1,1);const Nn=Bn.getImageData(0,0,1,1).data[3];return ei.width=ei.height=1,Nn!==0}catch{return!1}}static _guessMax(ui,si,ei,Bn){for(;ui+ei+1<si;){const Nn=Math.floor((ui+si)/2),Hn=Bn||Nn;this._areGoodDims(Nn,Hn)?ui=Nn:si=Nn}return ui}static async createImage(ui,si=!1){return new Tn(ui,si)._createImage()}async _createImage(){const ui=this._encodeBMP(),si=new Blob([ui.buffer],{type:"image/bmp"}),ei=createImageBitmap(si),{MAX_AREA:Bn,MAX_DIM:Nn}=Tn,{_imgData:Hn}=this,{width:On,height:hi}=Hn,Xn=Math.max(On/Nn,hi/Nn,Math.sqrt(On*hi/Bn)),ii=Math.max(Xn,2),ri=Math.round(10*(Xn+1.25))/10/ii,di=Math.floor(Math.log2(ri)),fi=new Array(di+2).fill(2);fi[0]=ii,fi.splice(-1,1,ri/(1<<di));let wi=On,Jn=hi,pi=await ei;for(const Zn of fi){const Gn=wi,mi=Jn;wi=Math.floor(wi/Zn)-1,Jn=Math.floor(Jn/Zn)-1;const Wn=new OffscreenCanvas(wi,Jn);Wn.getContext("2d").drawImage(pi,0,0,Gn,mi,0,0,wi,Jn),pi=Wn.transferToImageBitmap()}return Hn.data=null,Hn.bitmap=pi,Hn.width=wi,Hn.height=Jn,Hn}_encodeBMP(){const{width:ui,height:si,kind:ei}=this._imgData;let Bn=this._imgData.data,Nn,Hn=new Uint8Array(0),On=Hn,hi=0;switch(ei){case In.ImageKind.GRAYSCALE_1BPP:{Nn=1,Hn=new Uint8Array(this._isMask?[255,255,255,255,0,0,0,0]:[0,0,0,0,255,255,255,255]);const Jn=ui+7>>3,pi=Jn+3&-4;if(Jn!==pi){const Zn=new Uint8Array(pi*si);let Gn=0;for(let mi=0,Wn=si*Jn;mi<Wn;mi+=Jn,Gn+=pi)Zn.set(Bn.subarray(mi,mi+Jn),Gn);Bn=Zn}break}case In.ImageKind.RGB_24BPP:{if(Nn=24,ui&3){const Jn=3*ui,pi=Jn+3&-4,Zn=pi-Jn,Gn=new Uint8Array(pi*si);let mi=0;for(let Wn=0,ni=si*Jn;Wn<ni;Wn+=Jn){const li=Bn.subarray(Wn,Wn+Jn);for(let Ai=0;Ai<Jn;Ai+=3)Gn[mi++]=li[Ai+2],Gn[mi++]=li[Ai+1],Gn[mi++]=li[Ai];mi+=Zn}Bn=Gn}else for(let Jn=0,pi=Bn.length;Jn<pi;Jn+=3){const Zn=Bn[Jn];Bn[Jn]=Bn[Jn+2],Bn[Jn+2]=Zn}break}case In.ImageKind.RGBA_32BPP:Nn=32,hi=3,On=new Uint8Array(68);const wi=new DataView(On.buffer);In.FeatureTest.isLittleEndian?(wi.setUint32(0,255,!0),wi.setUint32(4,65280,!0),wi.setUint32(8,16711680,!0),wi.setUint32(12,4278190080,!0)):(wi.setUint32(0,4278190080,!0),wi.setUint32(4,16711680,!0),wi.setUint32(8,65280,!0),wi.setUint32(12,255,!0));break;default:throw new Error("invalid format")}let Xn=0;const ii=40+On.length,ri=14+ii+Hn.length+Bn.length,di=new Uint8Array(ri),fi=new DataView(di.buffer);return fi.setUint16(Xn,19778,!0),Xn+=2,fi.setUint32(Xn,ri,!0),Xn+=4,fi.setUint32(Xn,0,!0),Xn+=4,fi.setUint32(Xn,14+ii+Hn.length,!0),Xn+=4,fi.setUint32(Xn,ii,!0),Xn+=4,fi.setInt32(Xn,ui,!0),Xn+=4,fi.setInt32(Xn,-si,!0),Xn+=4,fi.setUint16(Xn,1,!0),Xn+=2,fi.setUint16(Xn,Nn,!0),Xn+=2,fi.setUint32(Xn,hi,!0),Xn+=4,fi.setUint32(Xn,0,!0),Xn+=4,fi.setInt32(Xn,0,!0),Xn+=4,fi.setInt32(Xn,0,!0),Xn+=4,fi.setUint32(Xn,Hn.length/4,!0),Xn+=4,fi.setUint32(Xn,0,!0),Xn+=4,di.set(On,Xn),Xn+=On.length,di.set(Hn,Xn),Xn+=Hn.length,di.set(Bn,Xn),di}}Mn.ImageResizer=Tn,Tn._goodSquareLength=Ln},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.MurmurHash3_64=void 0;var In=ti(2);const Ln=3285377520,jn=4294901760,Cn=65535;class Tn{constructor(ui){this.h1=ui?ui&4294967295:Ln,this.h2=ui?ui&4294967295:Ln}update(ui){let si,ei;if(typeof ui=="string"){si=new Uint8Array(ui.length*2),ei=0;for(let Jn=0,pi=ui.length;Jn<pi;Jn++){const Zn=ui.charCodeAt(Jn);Zn<=255?si[ei++]=Zn:(si[ei++]=Zn>>>8,si[ei++]=Zn&255)}}else if((0,In.isArrayBuffer)(ui))si=ui.slice(),ei=si.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const Bn=ei>>2,Nn=ei-Bn*4,Hn=new Uint32Array(si.buffer,0,Bn);let On=0,hi=0,Xn=this.h1,ii=this.h2;const ri=3432918353,di=461845907,fi=ri&Cn,wi=di&Cn;for(let Jn=0;Jn<Bn;Jn++)Jn&1?(On=Hn[Jn],On=On*ri&jn|On*fi&Cn,On=On<<15|On>>>17,On=On*di&jn|On*wi&Cn,Xn^=On,Xn=Xn<<13|Xn>>>19,Xn=Xn*5+3864292196):(hi=Hn[Jn],hi=hi*ri&jn|hi*fi&Cn,hi=hi<<15|hi>>>17,hi=hi*di&jn|hi*wi&Cn,ii^=hi,ii=ii<<13|ii>>>19,ii=ii*5+3864292196);switch(On=0,Nn){case 3:On^=si[Bn*4+2]<<16;case 2:On^=si[Bn*4+1]<<8;case 1:On^=si[Bn*4],On=On*ri&jn|On*fi&Cn,On=On<<15|On>>>17,On=On*di&jn|On*wi&Cn,Bn&1?Xn^=On:ii^=On}this.h1=Xn,this.h2=ii}hexdigest(){let ui=this.h1,si=this.h2;return ui^=si>>>1,ui=ui*3981806797&jn|ui*36045&Cn,si=si*4283543511&jn|((si<<16|ui>>>16)*2950163797&jn)>>>16,ui^=si>>>1,ui=ui*444984403&jn|ui*60499&Cn,si=si*3301882366&jn|((si<<16|ui>>>16)*3120437893&jn)>>>16,ui^=si>>>1,(ui>>>0).toString(16).padStart(8,"0")+(si>>>0).toString(16).padStart(8,"0")}}Mn.MurmurHash3_64=Tn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.OperatorList=void 0;var In=ti(2);function Ln(si,ei,Bn,Nn,Hn){let On=si;for(let hi=0,Xn=ei.length-1;hi<Xn;hi++){const ii=ei[hi];On=On[ii]||(On[ii]=[])}On[ei.at(-1)]={checkFn:Bn,iterateFn:Nn,processFn:Hn}}const jn=[];Ln(jn,[In.OPS.save,In.OPS.transform,In.OPS.paintInlineImageXObject,In.OPS.restore],null,function(ei,Bn){const Nn=ei.fnArray,Hn=ei.iCurr-3,On=(Bn-Hn)%4;switch(On){case 0:return Nn[Bn]===In.OPS.save;case 1:return Nn[Bn]===In.OPS.transform;case 2:return Nn[Bn]===In.OPS.paintInlineImageXObject;case 3:return Nn[Bn]===In.OPS.restore}throw new Error(`iterateInlineImageGroup - invalid pos: ${On}`)},function(ei,Bn){const Xn=ei.fnArray,ii=ei.argsArray,ri=ei.iCurr,di=ri-3,fi=ri-2,wi=ri-1,Jn=Math.min(Math.floor((Bn-di)/4),200);if(Jn<10)return Bn-(Bn-di)%4;let pi=0;const Zn=[];let Gn=0,mi=1,Wn=1;for(let Ii=0;Ii<Jn;Ii++){const xi=ii[fi+(Ii<<2)],Qn=ii[wi+(Ii<<2)][0];mi+Qn.width>1e3&&(pi=Math.max(pi,mi),Wn+=Gn+2,mi=0,Gn=0),Zn.push({transform:xi,x:mi,y:Wn,w:Qn.width,h:Qn.height}),mi+=Qn.width+2,Gn=Math.max(Gn,Qn.height)}const ni=Math.max(pi,mi)+1,li=Wn+Gn+1,Ai=new Uint8Array(ni*li*4),gi=ni<<2;for(let Ii=0;Ii<Jn;Ii++){const xi=ii[wi+(Ii<<2)][0].data,Qn=Zn[Ii].w<<2;let ai=0,Vn=Zn[Ii].x+Zn[Ii].y*ni<<2;Ai.set(xi.subarray(0,Qn),Vn-gi);for(let Yn=0,ci=Zn[Ii].h;Yn<ci;Yn++)Ai.set(xi.subarray(ai,ai+Qn),Vn),ai+=Qn,Vn+=gi;for(Ai.set(xi.subarray(ai-Qn,ai),Vn);Vn>=0;)xi[Vn-4]=xi[Vn],xi[Vn-3]=xi[Vn+1],xi[Vn-2]=xi[Vn+2],xi[Vn-1]=xi[Vn+3],xi[Vn+Qn]=xi[Vn+Qn-4],xi[Vn+Qn+1]=xi[Vn+Qn-3],xi[Vn+Qn+2]=xi[Vn+Qn-2],xi[Vn+Qn+3]=xi[Vn+Qn-1],Vn-=gi}const yi={width:ni,height:li};if(ei.isOffscreenCanvasSupported){const Ii=new OffscreenCanvas(ni,li);Ii.getContext("2d").putImageData(new ImageData(new Uint8ClampedArray(Ai.buffer),ni,li),0,0),yi.bitmap=Ii.transferToImageBitmap(),yi.data=null}else yi.kind=In.ImageKind.RGBA_32BPP,yi.data=Ai;return Xn.splice(di,Jn*4,In.OPS.paintInlineImageXObjectGroup),ii.splice(di,Jn*4,[yi,Zn]),di+1}),Ln(jn,[In.OPS.save,In.OPS.transform,In.OPS.paintImageMaskXObject,In.OPS.restore],null,function(ei,Bn){const Nn=ei.fnArray,Hn=ei.iCurr-3,On=(Bn-Hn)%4;switch(On){case 0:return Nn[Bn]===In.OPS.save;case 1:return Nn[Bn]===In.OPS.transform;case 2:return Nn[Bn]===In.OPS.paintImageMaskXObject;case 3:return Nn[Bn]===In.OPS.restore}throw new Error(`iterateImageMaskGroup - invalid pos: ${On}`)},function(ei,Bn){const hi=ei.fnArray,Xn=ei.argsArray,ii=ei.iCurr,ri=ii-3,di=ii-2,fi=ii-1;let wi=Math.floor((Bn-ri)/4);if(wi<10)return Bn-(Bn-ri)%4;let Jn=!1,pi,Zn;const Gn=Xn[fi][0],mi=Xn[di][0],Wn=Xn[di][1],ni=Xn[di][2],li=Xn[di][3];if(Wn===ni){Jn=!0,pi=di+4;let Ai=fi+4;for(let gi=1;gi<wi;gi++,pi+=4,Ai+=4)if(Zn=Xn[pi],Xn[Ai][0]!==Gn||Zn[0]!==mi||Zn[1]!==Wn||Zn[2]!==ni||Zn[3]!==li){gi<10?Jn=!1:wi=gi;break}}if(Jn){wi=Math.min(wi,1e3);const Ai=new Float32Array(wi*2);pi=di;for(let gi=0;gi<wi;gi++,pi+=4)Zn=Xn[pi],Ai[gi<<1]=Zn[4],Ai[(gi<<1)+1]=Zn[5];hi.splice(ri,wi*4,In.OPS.paintImageMaskXObjectRepeat),Xn.splice(ri,wi*4,[Gn,mi,Wn,ni,li,Ai])}else{wi=Math.min(wi,100);const Ai=[];for(let gi=0;gi<wi;gi++){Zn=Xn[di+(gi<<2)];const yi=Xn[fi+(gi<<2)][0];Ai.push({data:yi.data,width:yi.width,height:yi.height,interpolate:yi.interpolate,count:yi.count,transform:Zn})}hi.splice(ri,wi*4,In.OPS.paintImageMaskXObjectGroup),Xn.splice(ri,wi*4,[Ai])}return ri+1}),Ln(jn,[In.OPS.save,In.OPS.transform,In.OPS.paintImageXObject,In.OPS.restore],function(si){const ei=si.argsArray,Bn=si.iCurr-2;return ei[Bn][1]===0&&ei[Bn][2]===0},function(ei,Bn){const Nn=ei.fnArray,Hn=ei.argsArray,On=ei.iCurr-3,hi=(Bn-On)%4;switch(hi){case 0:return Nn[Bn]===In.OPS.save;case 1:if(Nn[Bn]!==In.OPS.transform)return!1;const Xn=ei.iCurr-2,ii=Hn[Xn][0],ri=Hn[Xn][3];return!(Hn[Bn][0]!==ii||Hn[Bn][1]!==0||Hn[Bn][2]!==0||Hn[Bn][3]!==ri);case 2:if(Nn[Bn]!==In.OPS.paintImageXObject)return!1;const di=ei.iCurr-1,fi=Hn[di][0];return Hn[Bn][0]===fi;case 3:return Nn[Bn]===In.OPS.restore}throw new Error(`iterateImageGroup - invalid pos: ${hi}`)},function(si,ei){const Hn=si.fnArray,On=si.argsArray,hi=si.iCurr,Xn=hi-3,ii=hi-2,ri=hi-1,di=On[ri][0],fi=On[ii][0],wi=On[ii][3],Jn=Math.min(Math.floor((ei-Xn)/4),1e3);if(Jn<3)return ei-(ei-Xn)%4;const pi=new Float32Array(Jn*2);let Zn=ii;for(let mi=0;mi<Jn;mi++,Zn+=4){const Wn=On[Zn];pi[mi<<1]=Wn[4],pi[(mi<<1)+1]=Wn[5]}const Gn=[di,fi,wi,pi];return Hn.splice(Xn,Jn*4,In.OPS.paintImageXObjectRepeat),On.splice(Xn,Jn*4,Gn),Xn+1}),Ln(jn,[In.OPS.beginText,In.OPS.setFont,In.OPS.setTextMatrix,In.OPS.showText,In.OPS.endText],null,function(ei,Bn){const Nn=ei.fnArray,Hn=ei.argsArray,On=ei.iCurr-4,hi=(Bn-On)%5;switch(hi){case 0:return Nn[Bn]===In.OPS.beginText;case 1:return Nn[Bn]===In.OPS.setFont;case 2:return Nn[Bn]===In.OPS.setTextMatrix;case 3:if(Nn[Bn]!==In.OPS.showText)return!1;const Xn=ei.iCurr-3,ii=Hn[Xn][0],ri=Hn[Xn][1];return!(Hn[Bn][0]!==ii||Hn[Bn][1]!==ri);case 4:return Nn[Bn]===In.OPS.endText}throw new Error(`iterateShowTextGroup - invalid pos: ${hi}`)},function(si,ei){const Hn=si.fnArray,On=si.argsArray,hi=si.iCurr,Xn=hi-4,ii=hi-3,ri=hi-2,di=hi-1,fi=hi,wi=On[ii][0],Jn=On[ii][1];let pi=Math.min(Math.floor((ei-Xn)/5),1e3);if(pi<3)return ei-(ei-Xn)%5;let Zn=Xn;Xn>=4&&Hn[Xn-4]===Hn[ii]&&Hn[Xn-3]===Hn[ri]&&Hn[Xn-2]===Hn[di]&&Hn[Xn-1]===Hn[fi]&&On[Xn-4][0]===wi&&On[Xn-4][1]===Jn&&(pi++,Zn-=5);let Gn=Zn+4;for(let mi=1;mi<pi;mi++)Hn.splice(Gn,3),On.splice(Gn,3),Gn+=2;return Gn+1});class Cn{constructor(ei){this.queue=ei}_optimize(){}push(ei,Bn){this.queue.fnArray.push(ei),this.queue.argsArray.push(Bn),this._optimize()}flush(){}reset(){}}class Tn extends Cn{constructor(ei){super(ei),this.state=null,this.context={iCurr:0,fnArray:ei.fnArray,argsArray:ei.argsArray,isOffscreenCanvasSupported:!1},this.match=null,this.lastProcessed=0}set isOffscreenCanvasSupported(ei){this.context.isOffscreenCanvasSupported=ei}_optimize(){const ei=this.queue.fnArray;let Bn=this.lastProcessed,Nn=ei.length,Hn=this.state,On=this.match;if(!Hn&&!On&&Bn+1===Nn&&!jn[ei[Bn]]){this.lastProcessed=Nn;return}const hi=this.context;for(;Bn<Nn;){if(On){if((0,On.iterateFn)(hi,Bn)){Bn++;continue}if(Bn=(0,On.processFn)(hi,Bn+1),Nn=ei.length,On=null,Hn=null,Bn>=Nn)break}if(Hn=(Hn||jn)[ei[Bn]],!Hn||Array.isArray(Hn)){Bn++;continue}if(hi.iCurr=Bn,Bn++,Hn.checkFn&&!(0,Hn.checkFn)(hi)){Hn=null;continue}On=Hn,Hn=null}this.state=Hn,this.match=On,this.lastProcessed=Bn}flush(){for(;this.match;){const ei=this.queue.fnArray.length;this.lastProcessed=(0,this.match.processFn)(this.context,ei),this.match=null,this.state=null,this._optimize()}}reset(){this.state=null,this.match=null,this.lastProcessed=0}}const ui=class ui{constructor(ei=0,Bn){this._streamSink=Bn,this.fnArray=[],this.argsArray=[],this.optimizer=Bn&&!(ei&In.RenderingIntentFlag.OPLIST)?new Tn(this):new Cn(this),this.dependencies=new Set,this._totalLength=0,this.weight=0,this._resolved=Bn?null:Promise.resolve()}set isOffscreenCanvasSupported(ei){this.optimizer.isOffscreenCanvasSupported=ei}get length(){return this.argsArray.length}get ready(){return this._resolved||this._streamSink.ready}get totalLength(){return this._totalLength+this.length}addOp(ei,Bn){this.optimizer.push(ei,Bn),this.weight++,this._streamSink&&(this.weight>=ui.CHUNK_SIZE?this.flush():this.weight>=ui.CHUNK_SIZE_ABOUT&&(ei===In.OPS.restore||ei===In.OPS.endText)&&this.flush())}addImageOps(ei,Bn,Nn){Nn!==void 0&&this.addOp(In.OPS.beginMarkedContentProps,["OC",Nn]),this.addOp(ei,Bn),Nn!==void 0&&this.addOp(In.OPS.endMarkedContent,[])}addDependency(ei){this.dependencies.has(ei)||(this.dependencies.add(ei),this.addOp(In.OPS.dependency,[ei]))}addDependencies(ei){for(const Bn of ei)this.addDependency(Bn)}addOpList(ei){if(!(ei instanceof ui)){(0,In.warn)('addOpList - ignoring invalid "opList" parameter.');return}for(const Bn of ei.dependencies)this.dependencies.add(Bn);for(let Bn=0,Nn=ei.length;Bn<Nn;Bn++)this.addOp(ei.fnArray[Bn],ei.argsArray[Bn])}getIR(){return{fnArray:this.fnArray,argsArray:this.argsArray,length:this.length}}get _transfers(){var On;const ei=[],{fnArray:Bn,argsArray:Nn,length:Hn}=this;for(let hi=0;hi<Hn;hi++)switch(Bn[hi]){case In.OPS.paintInlineImageXObject:case In.OPS.paintInlineImageXObjectGroup:case In.OPS.paintImageMaskXObject:const Xn=Nn[hi][0];!Xn.cached&&((On=Xn.data)==null?void 0:On.buffer)instanceof ArrayBuffer&&ei.push(Xn.data.buffer);break}return ei}flush(ei=!1,Bn=null){this.optimizer.flush();const Nn=this.length;this._totalLength+=Nn,this._streamSink.enqueue({fnArray:this.fnArray,argsArray:this.argsArray,lastChunk:ei,separateAnnots:Bn,length:Nn},1,this._transfers),this.dependencies.clear(),this.fnArray.length=0,this.argsArray.length=0,this.weight=0,this.optimizer.reset()}};ta(ui,"CHUNK_SIZE",1e3),ta(ui,"CHUNK_SIZE_ABOUT",ui.CHUNK_SIZE-5);let Rn=ui;Mn.OperatorList=Rn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.PDFImage=void 0;var In=ti(2),Ln=ti(28),jn=ti(5),Cn=ti(12),Tn=ti(18),Rn=ti(62),ui=ti(26),si=ti(30),ei=ti(4);function Bn(On,hi,Xn,ii){return On=hi+On*Xn,On<0?On=0:On>ii&&(On=ii),On}function Nn(On,hi,Xn,ii,ri,di){const fi=ri*di;let wi;hi<=8?wi=new Uint8Array(fi):hi<=16?wi=new Uint16Array(fi):wi=new Uint32Array(fi);const Jn=Xn/ri,pi=ii/di;let Zn,Gn,mi,Wn=0,ni;const li=new Uint16Array(ri),Ai=Xn;for(Zn=0;Zn<ri;Zn++)li[Zn]=Math.floor(Zn*Jn);for(Zn=0;Zn<di;Zn++)for(mi=Math.floor(Zn*pi)*Ai,Gn=0;Gn<ri;Gn++)ni=mi+li[Gn],wi[Wn++]=On[ni];return wi}class Hn{constructor({xref:hi,res:Xn,image:ii,isInline:ri=!1,smask:di=null,mask:fi=null,isMask:wi=!1,pdfFunctionFactory:Jn,localColorSpaceCache:pi}){var Ai;this.image=ii;const Zn=ii.dict,Gn=Zn.get("F","Filter");let mi;if(Gn instanceof ei.Name)mi=Gn.name;else if(Array.isArray(Gn)){const gi=hi.fetchIfRef(Gn[0]);gi instanceof ei.Name&&(mi=gi.name)}switch(mi){case"JPXDecode":const gi=new si.JpxImage;gi.parseImageProperties(ii.stream),ii.stream.reset(),ii.width=gi.width,ii.height=gi.height,ii.bitsPerComponent=gi.bitsPerComponent,ii.numComps=gi.componentsCount;break;case"JBIG2Decode":ii.bitsPerComponent=1,ii.numComps=1;break}let Wn=Zn.get("W","Width"),ni=Zn.get("H","Height");if(Number.isInteger(ii.width)&&ii.width>0&&Number.isInteger(ii.height)&&ii.height>0&&(ii.width!==Wn||ii.height!==ni)&&((0,In.warn)("PDFImage - using the Width/Height of the image data, rather than the image dictionary."),Wn=ii.width,ni=ii.height),Wn<1||ni<1)throw new In.FormatError(`Invalid image width: ${Wn} or height: ${ni}`);this.width=Wn,this.height=ni,this.interpolate=Zn.get("I","Interpolate"),this.imageMask=Zn.get("IM","ImageMask")||!1,this.matte=Zn.get("Matte")||!1;let li=ii.bitsPerComponent;if(!li&&(li=Zn.get("BPC","BitsPerComponent"),!li))if(this.imageMask)li=1;else throw new In.FormatError(`Bits per component missing in image: ${this.imageMask}`);if(this.bpc=li,!this.imageMask){let gi=Zn.getRaw("CS")||Zn.getRaw("ColorSpace");if(!gi)switch((0,In.info)("JPX images (which do not require color spaces)"),ii.numComps){case 1:gi=ei.Name.get("DeviceGray");break;case 3:gi=ei.Name.get("DeviceRGB");break;case 4:gi=ei.Name.get("DeviceCMYK");break;default:throw new Error(`JPX images with ${ii.numComps} color components not supported.`)}this.colorSpace=Cn.ColorSpace.parse({cs:gi,xref:hi,resources:ri?Xn:null,pdfFunctionFactory:Jn,localColorSpaceCache:pi}),this.numComps=this.colorSpace.numComps}if(this.decode=Zn.getArray("D","Decode"),this.needsDecode=!1,this.decode&&(this.colorSpace&&!this.colorSpace.isDefaultDecode(this.decode,li)||wi&&!Cn.ColorSpace.isDefaultDecode(this.decode,1))){this.needsDecode=!0;const gi=(1<<li)-1;this.decodeCoefficients=[],this.decodeAddends=[];const yi=((Ai=this.colorSpace)==null?void 0:Ai.name)==="Indexed";for(let Ii=0,xi=0;Ii<this.decode.length;Ii+=2,++xi){const Qn=this.decode[Ii],ai=this.decode[Ii+1];this.decodeCoefficients[xi]=yi?(ai-Qn)/gi:ai-Qn,this.decodeAddends[xi]=yi?Qn:gi*Qn}}di?this.smask=new Hn({xref:hi,res:Xn,image:di,isInline:ri,pdfFunctionFactory:Jn,localColorSpaceCache:pi}):fi&&(fi instanceof jn.BaseStream?fi.dict.get("IM","ImageMask")?this.mask=new Hn({xref:hi,res:Xn,image:fi,isInline:ri,isMask:!0,pdfFunctionFactory:Jn,localColorSpaceCache:pi}):(0,In.warn)("Ignoring /Mask in image without /ImageMask."):this.mask=fi)}static async buildImage({xref:hi,res:Xn,image:ii,isInline:ri=!1,pdfFunctionFactory:di,localColorSpaceCache:fi}){const wi=ii;let Jn=null,pi=null;const Zn=ii.dict.get("SMask"),Gn=ii.dict.get("Mask");return Zn?Zn instanceof jn.BaseStream?Jn=Zn:(0,In.warn)("Unsupported /SMask format."):Gn&&(Gn instanceof jn.BaseStream||Array.isArray(Gn)?pi=Gn:(0,In.warn)("Unsupported /Mask format.")),new Hn({xref:hi,res:Xn,image:wi,isInline:ri,smask:Jn,mask:pi,pdfFunctionFactory:di,localColorSpaceCache:fi})}static createRawMask({imgArray:hi,width:Xn,height:ii,imageIsFromDecodeStream:ri,inverseDecode:di,interpolate:fi}){const wi=(Xn+7>>3)*ii,Jn=hi.byteLength,pi=wi===Jn;let Zn,Gn;if(ri&&(!di||pi)?Zn=hi:di?(Zn=new Uint8Array(wi),Zn.set(hi),Zn.fill(255,Jn)):Zn=new Uint8Array(hi),di)for(Gn=0;Gn<Jn;Gn++)Zn[Gn]^=255;return{data:Zn,width:Xn,height:ii,interpolate:fi}}static async createMask({imgArray:hi,width:Xn,height:ii,imageIsFromDecodeStream:ri,inverseDecode:di,interpolate:fi,isOffscreenCanvasSupported:wi=!1}){const Jn=Xn===1&&ii===1&&di===(hi.length===0||!!(hi[0]&128));if(Jn)return{isSingleOpaquePixel:Jn};if(wi){if(Rn.ImageResizer.needsToBeResized(Xn,ii)){const Wn=new Uint8ClampedArray(Xn*ii*4);return(0,Ln.convertBlackAndWhiteToRGBA)({src:hi,dest:Wn,width:Xn,height:ii,nonBlackColor:0,inverseDecode:di}),Rn.ImageResizer.createImage({kind:In.ImageKind.RGBA_32BPP,data:Wn,width:Xn,height:ii,interpolate:fi})}const pi=new OffscreenCanvas(Xn,ii),Zn=pi.getContext("2d"),Gn=Zn.createImageData(Xn,ii);(0,Ln.convertBlackAndWhiteToRGBA)({src:hi,dest:Gn.data,width:Xn,height:ii,nonBlackColor:0,inverseDecode:di}),Zn.putImageData(Gn,0,0);const mi=pi.transferToImageBitmap();return{data:null,width:Xn,height:ii,interpolate:fi,bitmap:mi}}return this.createRawMask({imgArray:hi,width:Xn,height:ii,inverseDecode:di,imageIsFromDecodeStream:ri,interpolate:fi})}get drawWidth(){var hi,Xn;return Math.max(this.width,((hi=this.smask)==null?void 0:hi.width)||0,((Xn=this.mask)==null?void 0:Xn.width)||0)}get drawHeight(){var hi,Xn;return Math.max(this.height,((hi=this.smask)==null?void 0:hi.height)||0,((Xn=this.mask)==null?void 0:Xn.height)||0)}decodeBuffer(hi){const Xn=this.bpc,ii=this.numComps,ri=this.decodeAddends,di=this.decodeCoefficients,fi=(1<<Xn)-1;let wi,Jn;if(Xn===1){for(wi=0,Jn=hi.length;wi<Jn;wi++)hi[wi]=+!hi[wi];return}let pi=0;for(wi=0,Jn=this.width*this.height;wi<Jn;wi++)for(let Zn=0;Zn<ii;Zn++)hi[pi]=Bn(hi[pi],ri[Zn],di[Zn],fi),pi++}getComponents(hi){const Xn=this.bpc;if(Xn===8)return hi;const ii=this.width,ri=this.height,di=this.numComps,fi=ii*ri*di;let wi=0,Jn;Xn<=8?Jn=new Uint8Array(fi):Xn<=16?Jn=new Uint16Array(fi):Jn=new Uint32Array(fi);const pi=ii*di,Zn=(1<<Xn)-1;let Gn=0,mi,Wn;if(Xn===1){let ni,li,Ai;for(let gi=0;gi<ri;gi++){for(li=Gn+(pi&-8),Ai=Gn+pi;Gn<li;)Wn=hi[wi++],Jn[Gn]=Wn>>7&1,Jn[Gn+1]=Wn>>6&1,Jn[Gn+2]=Wn>>5&1,Jn[Gn+3]=Wn>>4&1,Jn[Gn+4]=Wn>>3&1,Jn[Gn+5]=Wn>>2&1,Jn[Gn+6]=Wn>>1&1,Jn[Gn+7]=Wn&1,Gn+=8;if(Gn<Ai)for(Wn=hi[wi++],ni=128;Gn<Ai;)Jn[Gn++]=+!!(Wn&ni),ni>>=1}}else{let ni=0;for(Wn=0,Gn=0,mi=fi;Gn<mi;++Gn){for(Gn%pi===0&&(Wn=0,ni=0);ni<Xn;)Wn=Wn<<8|hi[wi++],ni+=8;const li=ni-Xn;let Ai=Wn>>li;Ai<0?Ai=0:Ai>Zn&&(Ai=Zn),Jn[Gn]=Ai,Wn&=(1<<li)-1,ni=li}}return Jn}fillOpacity(hi,Xn,ii,ri,di){const fi=this.smask,wi=this.mask;let Jn,pi,Zn,Gn,mi,Wn;if(fi)pi=fi.width,Zn=fi.height,Jn=new Uint8ClampedArray(pi*Zn),fi.fillGrayBuffer(Jn),(pi!==Xn||Zn!==ii)&&(Jn=Nn(Jn,fi.bpc,pi,Zn,Xn,ii));else if(wi)if(wi instanceof Hn){for(pi=wi.width,Zn=wi.height,Jn=new Uint8ClampedArray(pi*Zn),wi.numComps=1,wi.fillGrayBuffer(Jn),Gn=0,mi=pi*Zn;Gn<mi;++Gn)Jn[Gn]=255-Jn[Gn];(pi!==Xn||Zn!==ii)&&(Jn=Nn(Jn,wi.bpc,pi,Zn,Xn,ii))}else if(Array.isArray(wi)){Jn=new Uint8ClampedArray(Xn*ii);const ni=this.numComps;for(Gn=0,mi=Xn*ii;Gn<mi;++Gn){let li=0;const Ai=Gn*ni;for(Wn=0;Wn<ni;++Wn){const gi=di[Ai+Wn],yi=Wn*2;if(gi<wi[yi]||gi>wi[yi+1]){li=255;break}}Jn[Gn]=li}}else throw new In.FormatError("Unknown mask format.");if(Jn)for(Gn=0,Wn=3,mi=Xn*ri;Gn<mi;++Gn,Wn+=4)hi[Wn]=Jn[Gn];else for(Gn=0,Wn=3,mi=Xn*ri;Gn<mi;++Gn,Wn+=4)hi[Wn]=255}undoPreblend(hi,Xn,ii){var Zn;const ri=(Zn=this.smask)==null?void 0:Zn.matte;if(!ri)return;const di=this.colorSpace.getRgb(ri,0),fi=di[0],wi=di[1],Jn=di[2],pi=Xn*ii*4;for(let Gn=0;Gn<pi;Gn+=4){const mi=hi[Gn+3];if(mi===0){hi[Gn]=255,hi[Gn+1]=255,hi[Gn+2]=255;continue}const Wn=255/mi;hi[Gn]=(hi[Gn]-fi)*Wn+fi,hi[Gn+1]=(hi[Gn+1]-wi)*Wn+wi,hi[Gn+2]=(hi[Gn+2]-Jn)*Wn+Jn}}async createImageData(hi=!1,Xn=!1){const ii=this.drawWidth,ri=this.drawHeight,di={width:ii,height:ri,interpolate:this.interpolate,kind:0,data:null},fi=this.numComps,wi=this.width,Jn=this.height,pi=this.bpc,Zn=wi*fi*pi+7>>3,Gn=Xn&&Rn.ImageResizer.needsToBeResized(ii,ri);if(!hi){let Qn;if(this.colorSpace.name==="DeviceGray"&&pi===1?Qn=In.ImageKind.GRAYSCALE_1BPP:this.colorSpace.name==="DeviceRGB"&&pi===8&&!this.needsDecode&&(Qn=In.ImageKind.RGB_24BPP),Qn&&!this.smask&&!this.mask&&ii===wi&&ri===Jn){const ai=this.getImageBytes(Jn*Zn,{});if(Xn)return Gn?Rn.ImageResizer.createImage({data:ai,kind:Qn,width:ii,height:ri,interpolate:this.interpolate},this.needsDecode):this.createBitmap(Qn,wi,Jn,ai);if(di.kind=Qn,di.data=ai,this.needsDecode){(0,In.assert)(Qn===In.ImageKind.GRAYSCALE_1BPP,"PDFImage.createImageData: The image must be grayscale.");const Vn=di.data;for(let Yn=0,ci=Vn.length;Yn<ci;Yn++)Vn[Yn]^=255}return di}if(this.image instanceof ui.JpegStream&&!this.smask&&!this.mask&&!this.needsDecode){let ai=Jn*Zn;if(Xn&&!Gn){let Vn=!1;switch(this.colorSpace.name){case"DeviceGray":ai*=4,Vn=!0;break;case"DeviceRGB":ai=ai/3*4,Vn=!0;break;case"DeviceCMYK":Vn=!0;break}if(Vn){const Yn=this.getImageBytes(ai,{drawWidth:ii,drawHeight:ri,forceRGBA:!0});return this.createBitmap(In.ImageKind.RGBA_32BPP,ii,ri,Yn)}}else switch(this.colorSpace.name){case"DeviceGray":ai*=3;case"DeviceRGB":case"DeviceCMYK":return di.kind=In.ImageKind.RGB_24BPP,di.data=this.getImageBytes(ai,{drawWidth:ii,drawHeight:ri,forceRGB:!0}),Gn?Rn.ImageResizer.createImage(di):di}}}const mi=this.getImageBytes(Jn*Zn,{internal:!0}),Wn=0|mi.length/Zn*ri/Jn,ni=this.getComponents(mi);let li,Ai,gi,yi,Ii,xi;if(Xn&&!Gn&&(gi=new OffscreenCanvas(ii,ri),yi=gi.getContext("2d"),Ii=yi.createImageData(ii,ri),xi=Ii.data),di.kind=In.ImageKind.RGBA_32BPP,!hi&&!this.smask&&!this.mask?(!Xn||Gn?(di.kind=In.ImageKind.RGB_24BPP,xi=new Uint8ClampedArray(ii*ri*3),li=0):(new Uint32Array(xi.buffer).fill(In.FeatureTest.isLittleEndian?4278190080:255),li=1),Ai=!1):((!Xn||Gn)&&(xi=new Uint8ClampedArray(ii*ri*4)),li=1,Ai=!0,this.fillOpacity(xi,ii,ri,Wn,ni)),this.needsDecode&&this.decodeBuffer(ni),this.colorSpace.fillRgb(xi,wi,Jn,ii,ri,Wn,pi,ni,li),Ai&&this.undoPreblend(xi,ii,Wn),Xn&&!Gn){yi.putImageData(Ii,0,0);const Qn=gi.transferToImageBitmap();return{data:null,width:ii,height:ri,bitmap:Qn,interpolate:this.interpolate}}return di.data=xi,Gn?Rn.ImageResizer.createImage(di):di}fillGrayBuffer(hi){const Xn=this.numComps;if(Xn!==1)throw new In.FormatError(`Reading gray scale from a color image: ${Xn}`);const ii=this.width,ri=this.height,di=this.bpc,fi=ii*Xn*di+7>>3,wi=this.getImageBytes(ri*fi,{internal:!0}),Jn=this.getComponents(wi);let pi,Zn;if(di===1){if(Zn=ii*ri,this.needsDecode)for(pi=0;pi<Zn;++pi)hi[pi]=Jn[pi]-1&255;else for(pi=0;pi<Zn;++pi)hi[pi]=-Jn[pi]&255;return}this.needsDecode&&this.decodeBuffer(Jn),Zn=ii*ri;const Gn=255/((1<<di)-1);for(pi=0;pi<Zn;++pi)hi[pi]=Gn*Jn[pi]}createBitmap(hi,Xn,ii,ri){const di=new OffscreenCanvas(Xn,ii),fi=di.getContext("2d");let wi;hi===In.ImageKind.RGBA_32BPP?wi=new ImageData(ri,Xn,ii):(wi=fi.createImageData(Xn,ii),(0,Ln.convertToRGBA)({kind:hi,src:ri,dest:new Uint32Array(wi.data.buffer),width:Xn,height:ii,inverseDecode:this.needsDecode})),fi.putImageData(wi,0,0);const Jn=di.transferToImageBitmap();return{data:null,width:Xn,height:ii,bitmap:Jn,interpolate:this.interpolate}}getImageBytes(hi,{drawWidth:Xn,drawHeight:ii,forceRGBA:ri=!1,forceRGB:di=!1,internal:fi=!1}){this.image.reset(),this.image.drawWidth=Xn||this.width,this.image.drawHeight=ii||this.height,this.image.forceRGBA=!!ri,this.image.forceRGB=!!di;const wi=this.image.getBytes(hi);return fi||this.image instanceof Tn.DecodeStream?wi:((0,In.assert)(wi instanceof Uint8Array,'PDFImage.getImageBytes: Unsupported "imageBytes" type.'),new Uint8Array(wi))}}Mn.PDFImage=Hn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.Catalog=void 0;var In=ti(3),Ln=ti(2),jn=ti(4),Cn=ti(67),Tn=ti(5),Rn=ti(68),ui=ti(12),si=ti(69),ei=ti(59),Bn=ti(70),Nn=ti(72);function Hn(hi){return hi instanceof jn.Dict&&(hi=hi.get("D")),Array.isArray(hi)?hi:null}class On{constructor(Xn,ii){if(this.pdfManager=Xn,this.xref=ii,this._catDict=ii.getCatalogObj(),!(this._catDict instanceof jn.Dict))throw new Ln.FormatError("Catalog object is not a dictionary.");this.toplevelPagesDict,this._actualNumPages=null,this.fontCache=new jn.RefSetCache,this.builtInCMapCache=new Map,this.standardFontDataCache=new Map,this.globalImageCache=new ei.GlobalImageCache,this.pageKidsCountCache=new jn.RefSetCache,this.pageIndexCache=new jn.RefSetCache,this.nonBlendModesSet=new jn.RefSet,this.systemFontCache=new Map}cloneDict(){return this._catDict.clone()}get version(){const Xn=this._catDict.get("Version");if(Xn instanceof jn.Name){if(In.PDF_VERSION_REGEXP.test(Xn.name))return(0,Ln.shadow)(this,"version",Xn.name);(0,Ln.warn)(`Invalid PDF catalog version: ${Xn.name}`)}return(0,Ln.shadow)(this,"version",null)}get lang(){const Xn=this._catDict.get("Lang");return(0,Ln.shadow)(this,"lang",typeof Xn=="string"?(0,Ln.stringToPDFString)(Xn):null)}get needsRendering(){const Xn=this._catDict.get("NeedsRendering");return(0,Ln.shadow)(this,"needsRendering",typeof Xn=="boolean"?Xn:!1)}get collection(){let Xn=null;try{const ii=this._catDict.get("Collection");ii instanceof jn.Dict&&ii.size>0&&(Xn=ii)}catch(ii){if(ii instanceof In.MissingDataException)throw ii;(0,Ln.info)("Cannot fetch Collection entry; assuming no collection is present.")}return(0,Ln.shadow)(this,"collection",Xn)}get acroForm(){let Xn=null;try{const ii=this._catDict.get("AcroForm");ii instanceof jn.Dict&&ii.size>0&&(Xn=ii)}catch(ii){if(ii instanceof In.MissingDataException)throw ii;(0,Ln.info)("Cannot fetch AcroForm entry; assuming no forms are present.")}return(0,Ln.shadow)(this,"acroForm",Xn)}get acroFormRef(){const Xn=this._catDict.getRaw("AcroForm");return(0,Ln.shadow)(this,"acroFormRef",Xn instanceof jn.Ref?Xn:null)}get metadata(){var ri;const Xn=this._catDict.getRaw("Metadata");if(!(Xn instanceof jn.Ref))return(0,Ln.shadow)(this,"metadata",null);let ii=null;try{const di=this.xref.fetch(Xn,!((ri=this.xref.encrypt)!=null&&ri.encryptMetadata));if(di instanceof Tn.BaseStream&&di.dict instanceof jn.Dict){const fi=di.dict.get("Type"),wi=di.dict.get("Subtype");if((0,jn.isName)(fi,"Metadata")&&(0,jn.isName)(wi,"XML")){const Jn=(0,Ln.stringToUTF8String)(di.getString());Jn&&(ii=new Bn.MetadataParser(Jn).serializable)}}}catch(di){if(di instanceof In.MissingDataException)throw di;(0,Ln.info)(`Skipping invalid Metadata: "${di}".`)}return(0,Ln.shadow)(this,"metadata",ii)}get markInfo(){let Xn=null;try{Xn=this._readMarkInfo()}catch(ii){if(ii instanceof In.MissingDataException)throw ii;(0,Ln.warn)("Unable to read mark info.")}return(0,Ln.shadow)(this,"markInfo",Xn)}_readMarkInfo(){const Xn=this._catDict.get("MarkInfo");if(!(Xn instanceof jn.Dict))return null;const ii={Marked:!1,UserProperties:!1,Suspects:!1};for(const ri in ii){const di=Xn.get(ri);typeof di=="boolean"&&(ii[ri]=di)}return ii}get structTreeRoot(){let Xn=null;try{Xn=this._readStructTreeRoot()}catch(ii){if(ii instanceof In.MissingDataException)throw ii;(0,Ln.warn)("Unable read to structTreeRoot info.")}return(0,Ln.shadow)(this,"structTreeRoot",Xn)}_readStructTreeRoot(){const Xn=this._catDict.getRaw("StructTreeRoot"),ii=this.xref.fetchIfRef(Xn);if(!(ii instanceof jn.Dict))return null;const ri=new Nn.StructTreeRoot(ii,Xn);return ri.init(),ri}get toplevelPagesDict(){const Xn=this._catDict.get("Pages");if(!(Xn instanceof jn.Dict))throw new Ln.FormatError("Invalid top-level pages dictionary.");return(0,Ln.shadow)(this,"toplevelPagesDict",Xn)}get documentOutline(){let Xn=null;try{Xn=this._readDocumentOutline()}catch(ii){if(ii instanceof In.MissingDataException)throw ii;(0,Ln.warn)("Unable to read document outline.")}return(0,Ln.shadow)(this,"documentOutline",Xn)}_readDocumentOutline(){let Xn=this._catDict.get("Outlines");if(!(Xn instanceof jn.Dict)||(Xn=Xn.getRaw("First"),!(Xn instanceof jn.Ref)))return null;const ii={items:[]},ri=[{obj:Xn,parent:ii}],di=new jn.RefSet;di.put(Xn);const fi=this.xref,wi=new Uint8ClampedArray(3);for(;ri.length>0;){const Jn=ri.shift(),pi=fi.fetchIfRef(Jn.obj);if(pi===null)continue;if(!pi.has("Title"))throw new Ln.FormatError("Invalid outline item encountered.");const Zn={url:null,dest:null,action:null};On.parseDestDictionary({destDict:pi,resultObj:Zn,docBaseUrl:this.baseUrl,docAttachments:this.attachments});const Gn=pi.get("Title"),mi=pi.get("F")||0,Wn=pi.getArray("C"),ni=pi.get("Count");let li=wi;Array.isArray(Wn)&&Wn.length===3&&(Wn[0]!==0||Wn[1]!==0||Wn[2]!==0)&&(li=ui.ColorSpace.singletons.rgb.getRgb(Wn,0));const Ai={action:Zn.action,attachment:Zn.attachment,dest:Zn.dest,url:Zn.url,unsafeUrl:Zn.unsafeUrl,newWindow:Zn.newWindow,setOCGState:Zn.setOCGState,title:(0,Ln.stringToPDFString)(Gn),color:li,count:Number.isInteger(ni)?ni:void 0,bold:!!(mi&2),italic:!!(mi&1),items:[]};Jn.parent.items.push(Ai),Xn=pi.getRaw("First"),Xn instanceof jn.Ref&&!di.has(Xn)&&(ri.push({obj:Xn,parent:Ai}),di.put(Xn)),Xn=pi.getRaw("Next"),Xn instanceof jn.Ref&&!di.has(Xn)&&(ri.push({obj:Xn,parent:Jn.parent}),di.put(Xn))}return ii.items.length>0?ii.items:null}get permissions(){let Xn=null;try{Xn=this._readPermissions()}catch(ii){if(ii instanceof In.MissingDataException)throw ii;(0,Ln.warn)("Unable to read permissions.")}return(0,Ln.shadow)(this,"permissions",Xn)}_readPermissions(){const Xn=this.xref.trailer.get("Encrypt");if(!(Xn instanceof jn.Dict))return null;let ii=Xn.get("P");if(typeof ii!="number")return null;ii+=4294967296;const ri=[];for(const di in Ln.PermissionFlag){const fi=Ln.PermissionFlag[di];ii&fi&&ri.push(fi)}return ri}get optionalContentConfig(){let Xn=null;try{const ii=this._catDict.get("OCProperties");if(!ii)return(0,Ln.shadow)(this,"optionalContentConfig",null);const ri=ii.get("D");if(!ri)return(0,Ln.shadow)(this,"optionalContentConfig",null);const di=ii.get("OCGs");if(!Array.isArray(di))return(0,Ln.shadow)(this,"optionalContentConfig",null);const fi=[],wi=[];for(const Jn of di){if(!(Jn instanceof jn.Ref))continue;wi.push(Jn);const pi=this.xref.fetchIfRef(Jn);fi.push({id:Jn.toString(),name:typeof pi.get("Name")=="string"?(0,Ln.stringToPDFString)(pi.get("Name")):null,intent:typeof pi.get("Intent")=="string"?(0,Ln.stringToPDFString)(pi.get("Intent")):null})}Xn=this._readOptionalContentConfig(ri,wi),Xn.groups=fi}catch(ii){if(ii instanceof In.MissingDataException)throw ii;(0,Ln.warn)(`Unable to read optional content config: ${ii}`)}return(0,Ln.shadow)(this,"optionalContentConfig",Xn)}_readOptionalContentConfig(Xn,ii){function ri(Zn){const Gn=[];if(Array.isArray(Zn))for(const mi of Zn)mi instanceof jn.Ref&&ii.includes(mi)&&Gn.push(mi.toString());return Gn}function di(Zn,Gn=0){if(!Array.isArray(Zn))return null;const mi=[];for(const ni of Zn){if(ni instanceof jn.Ref&&ii.includes(ni)){Jn.put(ni),mi.push(ni.toString());continue}const li=fi(ni,Gn);li&&mi.push(li)}if(Gn>0)return mi;const Wn=[];for(const ni of ii)Jn.has(ni)||Wn.push(ni.toString());return Wn.length&&mi.push({name:null,order:Wn}),mi}function fi(Zn,Gn){if(++Gn>pi)return(0,Ln.warn)("parseNestedOrder - reached MAX_NESTED_LEVELS."),null;const mi=wi.fetchIfRef(Zn);if(!Array.isArray(mi))return null;const Wn=wi.fetchIfRef(mi[0]);if(typeof Wn!="string")return null;const ni=di(mi.slice(1),Gn);return!ni||!ni.length?null:{name:(0,Ln.stringToPDFString)(Wn),order:ni}}const wi=this.xref,Jn=new jn.RefSet,pi=10;return{name:typeof Xn.get("Name")=="string"?(0,Ln.stringToPDFString)(Xn.get("Name")):null,creator:typeof Xn.get("Creator")=="string"?(0,Ln.stringToPDFString)(Xn.get("Creator")):null,baseState:Xn.get("BaseState")instanceof jn.Name?Xn.get("BaseState").name:null,on:ri(Xn.get("ON")),off:ri(Xn.get("OFF")),order:di(Xn.get("Order")),groups:null}}setActualNumPages(Xn=null){this._actualNumPages=Xn}get hasActualNumPages(){return this._actualNumPages!==null}get _pagesCount(){const Xn=this.toplevelPagesDict.get("Count");if(!Number.isInteger(Xn))throw new Ln.FormatError("Page count in top-level pages dictionary is not an integer.");return(0,Ln.shadow)(this,"_pagesCount",Xn)}get numPages(){return this.hasActualNumPages?this._actualNumPages:this._pagesCount}get destinations(){const Xn=this._readDests(),ii=Object.create(null);if(Xn instanceof Cn.NameTree)for(const[ri,di]of Xn.getAll()){const fi=Hn(di);fi&&(ii[(0,Ln.stringToPDFString)(ri)]=fi)}else Xn instanceof jn.Dict&&Xn.forEach(function(ri,di){const fi=Hn(di);fi&&(ii[ri]=fi)});return(0,Ln.shadow)(this,"destinations",ii)}getDestination(Xn){const ii=this._readDests();if(ii instanceof Cn.NameTree){const ri=Hn(ii.get(Xn));if(ri)return ri;const di=this.destinations[Xn];if(di)return(0,Ln.warn)(`Found "${Xn}" at an incorrect position in the NameTree.`),di}else if(ii instanceof jn.Dict){const ri=Hn(ii.get(Xn));if(ri)return ri}return null}_readDests(){const Xn=this._catDict.get("Names");if(Xn!=null&&Xn.has("Dests"))return new Cn.NameTree(Xn.getRaw("Dests"),this.xref);if(this._catDict.has("Dests"))return this._catDict.get("Dests")}get pageLabels(){let Xn=null;try{Xn=this._readPageLabels()}catch(ii){if(ii instanceof In.MissingDataException)throw ii;(0,Ln.warn)("Unable to read page labels.")}return(0,Ln.shadow)(this,"pageLabels",Xn)}_readPageLabels(){const Xn=this._catDict.getRaw("PageLabels");if(!Xn)return null;const ii=new Array(this.numPages);let ri=null,di="";const wi=new Cn.NumberTree(Xn,this.xref).getAll();let Jn="",pi=1;for(let Zn=0,Gn=this.numPages;Zn<Gn;Zn++){const mi=wi.get(Zn);if(mi!==void 0){if(!(mi instanceof jn.Dict))throw new Ln.FormatError("PageLabel is not a dictionary.");if(mi.has("Type")&&!(0,jn.isName)(mi.get("Type"),"PageLabel"))throw new Ln.FormatError("Invalid type in PageLabel dictionary.");if(mi.has("S")){const Wn=mi.get("S");if(!(Wn instanceof jn.Name))throw new Ln.FormatError("Invalid style in PageLabel dictionary.");ri=Wn.name}else ri=null;if(mi.has("P")){const Wn=mi.get("P");if(typeof Wn!="string")throw new Ln.FormatError("Invalid prefix in PageLabel dictionary.");di=(0,Ln.stringToPDFString)(Wn)}else di="";if(mi.has("St")){const Wn=mi.get("St");if(!(Number.isInteger(Wn)&&Wn>=1))throw new Ln.FormatError("Invalid start in PageLabel dictionary.");pi=Wn}else pi=1}switch(ri){case"D":Jn=pi;break;case"R":case"r":Jn=(0,In.toRomanNumerals)(pi,ri==="r");break;case"A":case"a":const Wn=26,Ai=ri==="a"?97:65,gi=pi-1;Jn=String.fromCharCode(Ai+gi%Wn).repeat(Math.floor(gi/Wn)+1);break;default:if(ri)throw new Ln.FormatError(`Invalid style "${ri}" in PageLabel dictionary.`);Jn=""}ii[Zn]=di+Jn,pi++}return ii}get pageLayout(){const Xn=this._catDict.get("PageLayout");let ii="";if(Xn instanceof jn.Name)switch(Xn.name){case"SinglePage":case"OneColumn":case"TwoColumnLeft":case"TwoColumnRight":case"TwoPageLeft":case"TwoPageRight":ii=Xn.name}return(0,Ln.shadow)(this,"pageLayout",ii)}get pageMode(){const Xn=this._catDict.get("PageMode");let ii="UseNone";if(Xn instanceof jn.Name)switch(Xn.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"FullScreen":case"UseOC":case"UseAttachments":ii=Xn.name}return(0,Ln.shadow)(this,"pageMode",ii)}get viewerPreferences(){const Xn=this._catDict.get("ViewerPreferences");if(!(Xn instanceof jn.Dict))return(0,Ln.shadow)(this,"viewerPreferences",null);let ii=null;for(const ri of Xn.getKeys()){const di=Xn.get(ri);let fi;switch(ri){case"HideToolbar":case"HideMenubar":case"HideWindowUI":case"FitWindow":case"CenterWindow":case"DisplayDocTitle":case"PickTrayByPDFSize":typeof di=="boolean"&&(fi=di);break;case"NonFullScreenPageMode":if(di instanceof jn.Name)switch(di.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"UseOC":fi=di.name;break;default:fi="UseNone"}break;case"Direction":if(di instanceof jn.Name)switch(di.name){case"L2R":case"R2L":fi=di.name;break;default:fi="L2R"}break;case"ViewArea":case"ViewClip":case"PrintArea":case"PrintClip":if(di instanceof jn.Name)switch(di.name){case"MediaBox":case"CropBox":case"BleedBox":case"TrimBox":case"ArtBox":fi=di.name;break;default:fi="CropBox"}break;case"PrintScaling":if(di instanceof jn.Name)switch(di.name){case"None":case"AppDefault":fi=di.name;break;default:fi="AppDefault"}break;case"Duplex":if(di instanceof jn.Name)switch(di.name){case"Simplex":case"DuplexFlipShortEdge":case"DuplexFlipLongEdge":fi=di.name;break;default:fi="None"}break;case"PrintPageRange":Array.isArray(di)&&di.length%2===0&&di.every((Jn,pi,Zn)=>Number.isInteger(Jn)&&Jn>0&&(pi===0||Jn>=Zn[pi-1])&&Jn<=this.numPages)&&(fi=di);break;case"NumCopies":Number.isInteger(di)&&di>0&&(fi=di);break;default:(0,Ln.warn)(`Ignoring non-standard key in ViewerPreferences: ${ri}.`);continue}if(fi===void 0){(0,Ln.warn)(`Bad value, for key "${ri}", in ViewerPreferences: ${di}.`);continue}ii||(ii=Object.create(null)),ii[ri]=fi}return(0,Ln.shadow)(this,"viewerPreferences",ii)}get openAction(){const Xn=this._catDict.get("OpenAction"),ii=Object.create(null);if(Xn instanceof jn.Dict){const ri=new jn.Dict(this.xref);ri.set("A",Xn);const di={url:null,dest:null,action:null};On.parseDestDictionary({destDict:ri,resultObj:di}),Array.isArray(di.dest)?ii.dest=di.dest:di.action&&(ii.action=di.action)}else Array.isArray(Xn)&&(ii.dest=Xn);return(0,Ln.shadow)(this,"openAction",(0,Ln.objectSize)(ii)>0?ii:null)}get attachments(){const Xn=this._catDict.get("Names");let ii=null;if(Xn instanceof jn.Dict&&Xn.has("EmbeddedFiles")){const ri=new Cn.NameTree(Xn.getRaw("EmbeddedFiles"),this.xref);for(const[di,fi]of ri.getAll()){const wi=new si.FileSpec(fi,this.xref);ii||(ii=Object.create(null)),ii[(0,Ln.stringToPDFString)(di)]=wi.serializable}}return(0,Ln.shadow)(this,"attachments",ii)}get xfaImages(){const Xn=this._catDict.get("Names");let ii=null;if(Xn instanceof jn.Dict&&Xn.has("XFAImages")){const ri=new Cn.NameTree(Xn.getRaw("XFAImages"),this.xref);for(const[di,fi]of ri.getAll())ii||(ii=new jn.Dict(this.xref)),ii.set((0,Ln.stringToPDFString)(di),fi)}return(0,Ln.shadow)(this,"xfaImages",ii)}_collectJavaScript(){const Xn=this._catDict.get("Names");let ii=null;function ri(fi,wi){if(!(wi instanceof jn.Dict)||!(0,jn.isName)(wi.get("S"),"JavaScript"))return;let Jn=wi.get("JS");if(Jn instanceof Tn.BaseStream)Jn=Jn.getString();else if(typeof Jn!="string")return;Jn=(0,Ln.stringToPDFString)(Jn).replaceAll("\0",""),Jn&&(ii||(ii=new Map)).set(fi,Jn)}if(Xn instanceof jn.Dict&&Xn.has("JavaScript")){const fi=new Cn.NameTree(Xn.getRaw("JavaScript"),this.xref);for(const[wi,Jn]of fi.getAll())ri((0,Ln.stringToPDFString)(wi),Jn)}const di=this._catDict.get("OpenAction");return di&&ri("OpenAction",di),ii}get jsActions(){const Xn=this._collectJavaScript();let ii=(0,In.collectActions)(this.xref,this._catDict,Ln.DocumentActionEventType);if(Xn){ii||(ii=Object.create(null));for(const[ri,di]of Xn)ri in ii?ii[ri].push(di):ii[ri]=[di]}return(0,Ln.shadow)(this,"jsActions",ii)}async fontFallback(Xn,ii){const ri=await Promise.all(this.fontCache);for(const di of ri)if(di.loadedName===Xn){di.fallback(ii);return}}async cleanup(Xn=!1){(0,Rn.clearGlobalCaches)(),this.globalImageCache.clear(Xn),this.pageKidsCountCache.clear(),this.pageIndexCache.clear(),this.nonBlendModesSet.clear();const ii=await Promise.all(this.fontCache);for(const{dict:ri}of ii)delete ri.cacheKey;this.fontCache.clear(),this.builtInCMapCache.clear(),this.standardFontDataCache.clear(),this.systemFontCache.clear()}async getPageDict(Xn){const ii=[this.toplevelPagesDict],ri=new jn.RefSet,di=this._catDict.getRaw("Pages");di instanceof jn.Ref&&ri.put(di);const fi=this.xref,wi=this.pageKidsCountCache,Jn=this.pageIndexCache;let pi=0;for(;ii.length;){const Zn=ii.pop();if(Zn instanceof jn.Ref){const ni=wi.get(Zn);if(ni>=0&&pi+ni<=Xn){pi+=ni;continue}if(ri.has(Zn))throw new Ln.FormatError("Pages tree contains circular reference.");ri.put(Zn);const li=await fi.fetchAsync(Zn);if(li instanceof jn.Dict){let Ai=li.getRaw("Type");if(Ai instanceof jn.Ref&&(Ai=await fi.fetchAsync(Ai)),(0,jn.isName)(Ai,"Page")||!li.has("Kids")){if(wi.has(Zn)||wi.put(Zn,1),Jn.has(Zn)||Jn.put(Zn,pi),pi===Xn)return[li,Zn];pi++;continue}}ii.push(li);continue}if(!(Zn instanceof jn.Dict))throw new Ln.FormatError("Page dictionary kid reference points to wrong type of object.");const{objId:Gn}=Zn;let mi=Zn.getRaw("Count");if(mi instanceof jn.Ref&&(mi=await fi.fetchAsync(mi)),Number.isInteger(mi)&&mi>=0&&(Gn&&!wi.has(Gn)&&wi.put(Gn,mi),pi+mi<=Xn)){pi+=mi;continue}let Wn=Zn.getRaw("Kids");if(Wn instanceof jn.Ref&&(Wn=await fi.fetchAsync(Wn)),!Array.isArray(Wn)){let ni=Zn.getRaw("Type");if(ni instanceof jn.Ref&&(ni=await fi.fetchAsync(ni)),(0,jn.isName)(ni,"Page")||!Zn.has("Kids")){if(pi===Xn)return[Zn,null];pi++;continue}throw new Ln.FormatError("Page dictionary kids object is not an array.")}for(let ni=Wn.length-1;ni>=0;ni--)ii.push(Wn[ni])}throw new Error(`Page index ${Xn} not found.`)}async getAllPageDicts(Xn=!1){const{ignoreErrors:ii}=this.pdfManager.evaluatorOptions,ri=[{currentNode:this.toplevelPagesDict,posInKids:0}],di=new jn.RefSet,fi=this._catDict.getRaw("Pages");fi instanceof jn.Ref&&di.put(fi);const wi=new Map,Jn=this.xref,pi=this.pageIndexCache;let Zn=0;function Gn(Wn,ni){ni&&!pi.has(ni)&&pi.put(ni,Zn),wi.set(Zn++,[Wn,ni])}function mi(Wn){if(Wn instanceof In.XRefEntryException&&!Xn)throw Wn;Xn&&ii&&Zn===0&&((0,Ln.warn)(`getAllPageDicts - Skipping invalid first page: "${Wn}".`),Wn=jn.Dict.empty),wi.set(Zn++,[Wn,null])}for(;ri.length>0;){const Wn=ri.at(-1),{currentNode:ni,posInKids:li}=Wn;let Ai=ni.getRaw("Kids");if(Ai instanceof jn.Ref)try{Ai=await Jn.fetchAsync(Ai)}catch(xi){mi(xi);break}if(!Array.isArray(Ai)){mi(new Ln.FormatError("Page dictionary kids object is not an array."));break}if(li>=Ai.length){ri.pop();continue}const gi=Ai[li];let yi;if(gi instanceof jn.Ref){if(di.has(gi)){mi(new Ln.FormatError("Pages tree contains circular reference."));break}di.put(gi);try{yi=await Jn.fetchAsync(gi)}catch(xi){mi(xi);break}}else yi=gi;if(!(yi instanceof jn.Dict)){mi(new Ln.FormatError("Page dictionary kid reference points to wrong type of object."));break}let Ii=yi.getRaw("Type");if(Ii instanceof jn.Ref)try{Ii=await Jn.fetchAsync(Ii)}catch(xi){mi(xi);break}(0,jn.isName)(Ii,"Page")||!yi.has("Kids")?Gn(yi,gi instanceof jn.Ref?gi:null):ri.push({currentNode:yi,posInKids:0}),Wn.posInKids++}return wi}getPageIndex(Xn){const ii=this.pageIndexCache.get(Xn);if(ii!==void 0)return Promise.resolve(ii);const ri=this.xref;function di(Jn){let pi=0,Zn;return ri.fetchAsync(Jn).then(function(Gn){if((0,jn.isRefsEqual)(Jn,Xn)&&!(0,jn.isDict)(Gn,"Page")&&!(Gn instanceof jn.Dict&&!Gn.has("Type")&&Gn.has("Contents")))throw new Ln.FormatError("The reference does not point to a /Page dictionary.");if(!Gn)return null;if(!(Gn instanceof jn.Dict))throw new Ln.FormatError("Node must be a dictionary.");return Zn=Gn.getRaw("Parent"),Gn.getAsync("Parent")}).then(function(Gn){if(!Gn)return null;if(!(Gn instanceof jn.Dict))throw new Ln.FormatError("Parent must be a dictionary.");return Gn.getAsync("Kids")}).then(function(Gn){if(!Gn)return null;const mi=[];let Wn=!1;for(const ni of Gn){if(!(ni instanceof jn.Ref))throw new Ln.FormatError("Kid must be a reference.");if((0,jn.isRefsEqual)(ni,Jn)){Wn=!0;break}mi.push(ri.fetchAsync(ni).then(function(li){if(!(li instanceof jn.Dict))throw new Ln.FormatError("Kid node must be a dictionary.");li.has("Count")?pi+=li.get("Count"):pi++}))}if(!Wn)throw new Ln.FormatError("Kid reference not found in parent's kids.");return Promise.all(mi).then(function(){return[pi,Zn]})})}let fi=0;const wi=Jn=>di(Jn).then(pi=>{if(!pi)return this.pageIndexCache.put(Xn,fi),fi;const[Zn,Gn]=pi;return fi+=Zn,wi(Gn)});return wi(Xn)}get baseUrl(){const Xn=this._catDict.get("URI");if(Xn instanceof jn.Dict){const ii=Xn.get("Base");if(typeof ii=="string"){const ri=(0,Ln.createValidAbsoluteUrl)(ii,null,{tryConvertEncoding:!0});if(ri)return(0,Ln.shadow)(this,"baseUrl",ri.href)}}return(0,Ln.shadow)(this,"baseUrl",this.pdfManager.docBaseUrl)}static parseDestDictionary({destDict:Xn,resultObj:ii,docBaseUrl:ri=null,docAttachments:di=null}){if(!(Xn instanceof jn.Dict)){(0,Ln.warn)("parseDestDictionary: `destDict` must be a dictionary.");return}let fi=Xn.get("A"),wi,Jn;if(fi instanceof jn.Dict||(Xn.has("Dest")?fi=Xn.get("Dest"):(fi=Xn.get("AA"),fi instanceof jn.Dict&&(fi.has("D")?fi=fi.get("D"):fi.has("U")&&(fi=fi.get("U"))))),fi instanceof jn.Dict){const pi=fi.get("S");if(!(pi instanceof jn.Name)){(0,Ln.warn)("parseDestDictionary: Invalid type in Action dictionary.");return}const Zn=pi.name;switch(Zn){case"ResetForm":const Gn=fi.get("Flags"),mi=((typeof Gn=="number"?Gn:0)&1)===0,Wn=[],ni=[];for(const Ci of fi.get("Fields")||[])Ci instanceof jn.Ref?ni.push(Ci.toString()):typeof Ci=="string"&&Wn.push((0,Ln.stringToPDFString)(Ci));ii.resetForm={fields:Wn,refs:ni,include:mi};break;case"URI":wi=fi.get("URI"),wi instanceof jn.Name&&(wi="/"+wi.name);break;case"GoTo":Jn=fi.get("D");break;case"Launch":case"GoToR":const li=fi.get("F");li instanceof jn.Dict?wi=li.get("F")||null:typeof li=="string"&&(wi=li);let Ai=fi.get("D");if(Ai&&(Ai instanceof jn.Name&&(Ai=Ai.name),typeof wi=="string")){const Ci=wi.split("#")[0];typeof Ai=="string"?wi=Ci+"#"+Ai:Array.isArray(Ai)&&(wi=Ci+"#"+JSON.stringify(Ai))}const gi=fi.get("NewWindow");typeof gi=="boolean"&&(ii.newWindow=gi);break;case"GoToE":const yi=fi.get("T");let Ii;if(di&&yi instanceof jn.Dict){const Ci=yi.get("R"),Fi=yi.get("N");(0,jn.isName)(Ci,"C")&&typeof Fi=="string"&&(Ii=di[(0,Ln.stringToPDFString)(Fi)])}Ii?ii.attachment=Ii:(0,Ln.warn)('parseDestDictionary - unimplemented "GoToE" action.');break;case"Named":const xi=fi.get("N");xi instanceof jn.Name&&(ii.action=xi.name);break;case"SetOCGState":const Qn=fi.get("State"),ai=fi.get("PreserveRB");if(!Array.isArray(Qn)||Qn.length===0)break;const Vn=[];for(const Ci of Qn)if(Ci instanceof jn.Name)switch(Ci.name){case"ON":case"OFF":case"Toggle":Vn.push(Ci.name);break}else Ci instanceof jn.Ref&&Vn.push(Ci.toString());if(Vn.length!==Qn.length)break;ii.setOCGState={state:Vn,preserveRB:typeof ai=="boolean"?ai:!0};break;case"JavaScript":const Yn=fi.get("JS");let ci;Yn instanceof Tn.BaseStream?ci=Yn.getString():typeof Yn=="string"&&(ci=Yn);const bi=ci&&(0,In.recoverJsURL)((0,Ln.stringToPDFString)(ci));if(bi){wi=bi.url,ii.newWindow=bi.newWindow;break}default:if(Zn==="JavaScript"||Zn==="SubmitForm")break;(0,Ln.warn)(`parseDestDictionary - unsupported action: "${Zn}".`);break}}else Xn.has("Dest")&&(Jn=Xn.get("Dest"));if(typeof wi=="string"){const pi=(0,Ln.createValidAbsoluteUrl)(wi,ri,{addDefaultProtocol:!0,tryConvertEncoding:!0});pi&&(ii.url=pi.href),ii.unsafeUrl=wi}Jn&&(Jn instanceof jn.Name&&(Jn=Jn.name),typeof Jn=="string"?ii.dest=(0,Ln.stringToPDFString)(Jn):Array.isArray(Jn)&&(ii.dest=Jn))}}Mn.Catalog=On},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.NumberTree=Mn.NameTree=void 0;var In=ti(4),Ln=ti(2);class jn{constructor(ui,si,ei){this.constructor===jn&&(0,Ln.unreachable)("Cannot initialize NameOrNumberTree."),this.root=ui,this.xref=si,this._type=ei}getAll(){const ui=new Map;if(!this.root)return ui;const si=this.xref,ei=new In.RefSet;ei.put(this.root);const Bn=[this.root];for(;Bn.length>0;){const Nn=si.fetchIfRef(Bn.shift());if(!(Nn instanceof In.Dict))continue;if(Nn.has("Kids")){const On=Nn.get("Kids");if(!Array.isArray(On))continue;for(const hi of On){if(ei.has(hi))throw new Ln.FormatError(`Duplicate entry in "${this._type}" tree.`);Bn.push(hi),ei.put(hi)}continue}const Hn=Nn.get(this._type);if(Array.isArray(Hn))for(let On=0,hi=Hn.length;On<hi;On+=2)ui.set(si.fetchIfRef(Hn[On]),si.fetchIfRef(Hn[On+1]))}return ui}get(ui){if(!this.root)return null;const si=this.xref;let ei=si.fetchIfRef(this.root),Bn=0;const Nn=10;for(;ei.has("Kids");){if(++Bn>Nn)return(0,Ln.warn)(`Search depth limit reached for "${this._type}" tree.`),null;const On=ei.get("Kids");if(!Array.isArray(On))return null;let hi=0,Xn=On.length-1;for(;hi<=Xn;){const ii=hi+Xn>>1,ri=si.fetchIfRef(On[ii]),di=ri.get("Limits");if(ui<si.fetchIfRef(di[0]))Xn=ii-1;else if(ui>si.fetchIfRef(di[1]))hi=ii+1;else{ei=ri;break}}if(hi>Xn)return null}const Hn=ei.get(this._type);if(Array.isArray(Hn)){let On=0,hi=Hn.length-2;for(;On<=hi;){const Xn=On+hi>>1,ii=Xn+(Xn&1),ri=si.fetchIfRef(Hn[ii]);if(ui<ri)hi=ii-2;else if(ui>ri)On=ii+2;else return si.fetchIfRef(Hn[ii+1])}}return null}}class Cn extends jn{constructor(ui,si){super(ui,si,"Names")}}Mn.NameTree=Cn;class Tn extends jn{constructor(ui,si){super(ui,si,"Nums")}}Mn.NumberTree=Tn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.clearGlobalCaches=Cn;var In=ti(50),Ln=ti(4),jn=ti(40);function Cn(){(0,In.clearPatternCaches)(),(0,Ln.clearPrimitiveCaches)(),(0,jn.clearUnicodeCaches)()}},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.FileSpec=void 0;var In=ti(2),Ln=ti(5),jn=ti(4);function Cn(Rn){return Rn.has("UF")?Rn.get("UF"):Rn.has("F")?Rn.get("F"):Rn.has("Unix")?Rn.get("Unix"):Rn.has("Mac")?Rn.get("Mac"):Rn.has("DOS")?Rn.get("DOS"):null}class Tn{constructor(ui,si){ui instanceof jn.Dict&&(this.xref=si,this.root=ui,ui.has("FS")&&(this.fs=ui.get("FS")),this.description=ui.has("Desc")?(0,In.stringToPDFString)(ui.get("Desc")):"",ui.has("RF")&&(0,In.warn)("Related file specifications are not supported"),this.contentAvailable=!0,ui.has("EF")||(this.contentAvailable=!1,(0,In.warn)("Non-embedded file specifications are not supported")))}get filename(){if(!this._filename&&this.root){const ui=Cn(this.root)||"unnamed";this._filename=(0,In.stringToPDFString)(ui).replaceAll("\\\\","\\").replaceAll("\\/","/").replaceAll("\\","/")}return this._filename}get content(){if(!this.contentAvailable)return null;!this.contentRef&&this.root&&(this.contentRef=Cn(this.root.get("EF")));let ui=null;if(this.contentRef){const si=this.xref.fetchIfRef(this.contentRef);si instanceof Ln.BaseStream?ui=si.getBytes():(0,In.warn)("Embedded file specification points to non-existing/invalid content")}else(0,In.warn)("Embedded file specification does not have a content");return ui}get serializable(){return{filename:this.filename,content:this.content}}}Mn.FileSpec=Tn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.MetadataParser=void 0;var In=ti(71);class Ln{constructor(Cn){Cn=this._repair(Cn);const Rn=new In.SimpleXMLParser({lowerCaseName:!0}).parseFromString(Cn);this._metadataMap=new Map,this._data=Cn,Rn&&this._parse(Rn)}_repair(Cn){return Cn.replace(/^[^<]+/,"").replaceAll(/>\\376\\377([^<]+)/g,function(Tn,Rn){const ui=Rn.replaceAll(/\\([0-3])([0-7])([0-7])/g,function(ei,Bn,Nn,Hn){return String.fromCharCode(Bn*64+Nn*8+Hn*1)}).replaceAll(/&(amp|apos|gt|lt|quot);/g,function(ei,Bn){switch(Bn){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error(`_repair: ${Bn} isn't defined.`)}),si=[">"];for(let ei=0,Bn=ui.length;ei<Bn;ei+=2){const Nn=ui.charCodeAt(ei)*256+ui.charCodeAt(ei+1);Nn>=32&&Nn<127&&Nn!==60&&Nn!==62&&Nn!==38?si.push(String.fromCharCode(Nn)):si.push("&#x"+(65536+Nn).toString(16).substring(1)+";")}return si.join("")})}_getSequence(Cn){const Tn=Cn.nodeName;return Tn!=="rdf:bag"&&Tn!=="rdf:seq"&&Tn!=="rdf:alt"?null:Cn.childNodes.filter(Rn=>Rn.nodeName==="rdf:li")}_parseArray(Cn){if(!Cn.hasChildNodes())return;const[Tn]=Cn.childNodes,Rn=this._getSequence(Tn)||[];this._metadataMap.set(Cn.nodeName,Rn.map(ui=>ui.textContent.trim()))}_parse(Cn){let Tn=Cn.documentElement;if(Tn.nodeName!=="rdf:rdf")for(Tn=Tn.firstChild;Tn&&Tn.nodeName!=="rdf:rdf";)Tn=Tn.nextSibling;if(!(!Tn||Tn.nodeName!=="rdf:rdf"||!Tn.hasChildNodes())){for(const Rn of Tn.childNodes)if(Rn.nodeName==="rdf:description")for(const ui of Rn.childNodes){const si=ui.nodeName;switch(si){case"#text":continue;case"dc:creator":case"dc:subject":this._parseArray(ui);continue}this._metadataMap.set(si,ui.textContent.trim())}}}get serializable(){return{parsedData:this._metadataMap,rawData:this._data}}}Mn.MetadataParser=Ln},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.XMLParserErrorCode=Mn.XMLParserBase=Mn.SimpleXMLParser=Mn.SimpleDOMNode=void 0;var In=ti(3);const Ln={NoError:0,EndOfDocument:-1,UnterminatedCdat:-2,UnterminatedXmlDeclaration:-3,UnterminatedDoctypeDeclaration:-4,UnterminatedComment:-5,MalformedElement:-6,OutOfMemory:-7,UnterminatedAttributeValue:-8,UnterminatedElement:-9,ElementNeverBegun:-10};Mn.XMLParserErrorCode=Ln;function jn(si,ei){const Bn=si[ei];return Bn===" "||Bn===`
`||Bn==="\r"||Bn==="	"}function Cn(si){for(let ei=0,Bn=si.length;ei<Bn;ei++)if(!jn(si,ei))return!1;return!0}class Tn{_resolveEntities(ei){return ei.replaceAll(/&([^;]+);/g,(Bn,Nn)=>{if(Nn.substring(0,2)==="#x")return String.fromCodePoint(parseInt(Nn.substring(2),16));if(Nn.substring(0,1)==="#")return String.fromCodePoint(parseInt(Nn.substring(1),10));switch(Nn){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"';case"apos":return"'"}return this.onResolveEntity(Nn)})}_parseContent(ei,Bn){const Nn=[];let Hn=Bn;function On(){for(;Hn<ei.length&&jn(ei,Hn);)++Hn}for(;Hn<ei.length&&!jn(ei,Hn)&&ei[Hn]!==">"&&ei[Hn]!=="/";)++Hn;const hi=ei.substring(Bn,Hn);for(On();Hn<ei.length&&ei[Hn]!==">"&&ei[Hn]!=="/"&&ei[Hn]!=="?";){On();let Xn="",ii="";for(;Hn<ei.length&&!jn(ei,Hn)&&ei[Hn]!=="=";)Xn+=ei[Hn],++Hn;if(On(),ei[Hn]!=="=")return null;++Hn,On();const ri=ei[Hn];if(ri!=='"'&&ri!=="'")return null;const di=ei.indexOf(ri,++Hn);if(di<0)return null;ii=ei.substring(Hn,di),Nn.push({name:Xn,value:this._resolveEntities(ii)}),Hn=di+1,On()}return{name:hi,attributes:Nn,parsed:Hn-Bn}}_parseProcessingInstruction(ei,Bn){let Nn=Bn;function Hn(){for(;Nn<ei.length&&jn(ei,Nn);)++Nn}for(;Nn<ei.length&&!jn(ei,Nn)&&ei[Nn]!==">"&&ei[Nn]!=="?"&&ei[Nn]!=="/";)++Nn;const On=ei.substring(Bn,Nn);Hn();const hi=Nn;for(;Nn<ei.length&&(ei[Nn]!=="?"||ei[Nn+1]!==">");)++Nn;const Xn=ei.substring(hi,Nn);return{name:On,value:Xn,parsed:Nn-Bn}}parseXml(ei){let Bn=0;for(;Bn<ei.length;){const Nn=ei[Bn];let Hn=Bn;if(Nn==="<"){++Hn;const On=ei[Hn];let hi;switch(On){case"/":if(++Hn,hi=ei.indexOf(">",Hn),hi<0){this.onError(Ln.UnterminatedElement);return}this.onEndElement(ei.substring(Hn,hi)),Hn=hi+1;break;case"?":++Hn;const Xn=this._parseProcessingInstruction(ei,Hn);if(ei.substring(Hn+Xn.parsed,Hn+Xn.parsed+2)!=="?>"){this.onError(Ln.UnterminatedXmlDeclaration);return}this.onPi(Xn.name,Xn.value),Hn+=Xn.parsed+2;break;case"!":if(ei.substring(Hn+1,Hn+3)==="--"){if(hi=ei.indexOf("-->",Hn+3),hi<0){this.onError(Ln.UnterminatedComment);return}this.onComment(ei.substring(Hn+3,hi)),Hn=hi+3}else if(ei.substring(Hn+1,Hn+8)==="[CDATA["){if(hi=ei.indexOf("]]>",Hn+8),hi<0){this.onError(Ln.UnterminatedCdat);return}this.onCdata(ei.substring(Hn+8,hi)),Hn=hi+3}else if(ei.substring(Hn+1,Hn+8)==="DOCTYPE"){const di=ei.indexOf("[",Hn+8);let fi=!1;if(hi=ei.indexOf(">",Hn+8),hi<0){this.onError(Ln.UnterminatedDoctypeDeclaration);return}if(di>0&&hi>di){if(hi=ei.indexOf("]>",Hn+8),hi<0){this.onError(Ln.UnterminatedDoctypeDeclaration);return}fi=!0}const wi=ei.substring(Hn+8,hi+(fi?1:0));this.onDoctype(wi),Hn=hi+(fi?2:1)}else{this.onError(Ln.MalformedElement);return}break;default:const ii=this._parseContent(ei,Hn);if(ii===null){this.onError(Ln.MalformedElement);return}let ri=!1;if(ei.substring(Hn+ii.parsed,Hn+ii.parsed+2)==="/>")ri=!0;else if(ei.substring(Hn+ii.parsed,Hn+ii.parsed+1)!==">"){this.onError(Ln.UnterminatedElement);return}this.onBeginElement(ii.name,ii.attributes,ri),Hn+=ii.parsed+(ri?2:1);break}}else{for(;Hn<ei.length&&ei[Hn]!=="<";)Hn++;const On=ei.substring(Bn,Hn);this.onText(this._resolveEntities(On))}Bn=Hn}}onResolveEntity(ei){return`&${ei};`}onPi(ei,Bn){}onComment(ei){}onCdata(ei){}onDoctype(ei){}onText(ei){}onBeginElement(ei,Bn,Nn){}onEndElement(ei){}onError(ei){}}Mn.XMLParserBase=Tn;class Rn{constructor(ei,Bn){this.nodeName=ei,this.nodeValue=Bn,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}get firstChild(){var ei;return(ei=this.childNodes)==null?void 0:ei[0]}get nextSibling(){const ei=this.parentNode.childNodes;if(!ei)return;const Bn=ei.indexOf(this);if(Bn!==-1)return ei[Bn+1]}get textContent(){return this.childNodes?this.childNodes.map(function(ei){return ei.textContent}).join(""):this.nodeValue||""}get children(){return this.childNodes||[]}hasChildNodes(){var ei;return((ei=this.childNodes)==null?void 0:ei.length)>0}searchNode(ei,Bn){var hi;if(Bn>=ei.length)return this;const Nn=ei[Bn];if(Nn.name.startsWith("#")&&Bn<ei.length-1)return this.searchNode(ei,Bn+1);const Hn=[];let On=this;for(;;){if(Nn.name===On.nodeName)if(Nn.pos===0){const Xn=On.searchNode(ei,Bn+1);if(Xn!==null)return Xn}else{if(Hn.length===0)return null;{const[Xn]=Hn.pop();let ii=0;for(const ri of Xn.childNodes)if(Nn.name===ri.nodeName){if(ii===Nn.pos)return ri.searchNode(ei,Bn+1);ii++}return On.searchNode(ei,Bn+1)}}if(((hi=On.childNodes)==null?void 0:hi.length)>0)Hn.push([On,0]),On=On.childNodes[0];else{if(Hn.length===0)return null;for(;Hn.length!==0;){const[Xn,ii]=Hn.pop(),ri=ii+1;if(ri<Xn.childNodes.length){Hn.push([Xn,ri]),On=Xn.childNodes[ri];break}}if(Hn.length===0)return null}}}dump(ei){if(this.nodeName==="#text"){ei.push((0,In.encodeToXmlString)(this.nodeValue));return}if(ei.push(`<${this.nodeName}`),this.attributes)for(const Bn of this.attributes)ei.push(` ${Bn.name}="${(0,In.encodeToXmlString)(Bn.value)}"`);if(this.hasChildNodes()){ei.push(">");for(const Bn of this.childNodes)Bn.dump(ei);ei.push(`</${this.nodeName}>`)}else this.nodeValue?ei.push(`>${(0,In.encodeToXmlString)(this.nodeValue)}</${this.nodeName}>`):ei.push("/>")}}Mn.SimpleDOMNode=Rn;class ui extends Tn{constructor({hasAttributes:ei=!1,lowerCaseName:Bn=!1}){super(),this._currentFragment=null,this._stack=null,this._errorCode=Ln.NoError,this._hasAttributes=ei,this._lowerCaseName=Bn}parseFromString(ei){if(this._currentFragment=[],this._stack=[],this._errorCode=Ln.NoError,this.parseXml(ei),this._errorCode!==Ln.NoError)return;const[Bn]=this._currentFragment;if(Bn)return{documentElement:Bn}}onText(ei){if(Cn(ei))return;const Bn=new Rn("#text",ei);this._currentFragment.push(Bn)}onCdata(ei){const Bn=new Rn("#text",ei);this._currentFragment.push(Bn)}onBeginElement(ei,Bn,Nn){this._lowerCaseName&&(ei=ei.toLowerCase());const Hn=new Rn(ei);Hn.childNodes=[],this._hasAttributes&&(Hn.attributes=Bn),this._currentFragment.push(Hn),!Nn&&(this._stack.push(this._currentFragment),this._currentFragment=Hn.childNodes)}onEndElement(ei){this._currentFragment=this._stack.pop()||[];const Bn=this._currentFragment.at(-1);if(!Bn)return null;for(const Nn of Bn.childNodes)Nn.parentNode=Bn;return Bn}onError(ei){this._errorCode=ei}}Mn.SimpleXMLParser=ui},(oi,Mn,ti)=>{var Nn,th,On,Qc,Xn,nh,ri,ih;Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.StructTreeRoot=Mn.StructTreePage=void 0;var In=ti(2),Ln=ti(4),jn=ti(67),Cn=ti(73);const Tn=40,Rn={PAGE_CONTENT:1,STREAM_CONTENT:2,OBJECT:3,ANNOTATION:4,ELEMENT:5},fi=class fi{constructor(Jn,pi){Ki(this,Nn);this.dict=Jn,this.ref=pi instanceof Ln.Ref?pi:null,this.roleMap=new Map,this.structParentIds=null}init(){this.readRoleMap()}addAnnotationIdToPage(Jn,pi){Qi(this,Nn,th).call(this,Jn,pi,Rn.ANNOTATION)}readRoleMap(){const Jn=this.dict.get("RoleMap");Jn instanceof Ln.Dict&&Jn.forEach((pi,Zn)=>{Zn instanceof Ln.Name&&this.roleMap.set(pi,Zn.name)})}static async canCreateStructureTree({catalogRef:Jn,pdfManager:pi,newAnnotationsByPage:Zn}){var Wn;if(!(Jn instanceof Ln.Ref))return(0,In.warn)("Cannot save the struct tree: no catalog reference."),!1;let Gn=0,mi=!0;for(const[ni,li]of Zn){const{ref:Ai}=await pi.getPage(ni);if(!(Ai instanceof Ln.Ref)){(0,In.warn)(`Cannot save the struct tree: page ${ni} has no ref.`),mi=!0;break}for(const gi of li)(Wn=gi.accessibilityData)!=null&&Wn.type&&(gi.parentTreeId=Gn++,mi=!1)}if(mi){for(const ni of Zn.values())for(const li of ni)delete li.parentTreeId;return!1}return!0}static async createStructureTree({newAnnotationsByPage:Jn,xref:pi,catalogRef:Zn,pdfManager:Gn,newRefs:mi}){const Wn=Gn.catalog.cloneDict(),ni=pi.getNewTemporaryRef();Wn.set("StructTreeRoot",ni);const li=[];await(0,Cn.writeObject)(Zn,Wn,li,pi),mi.push({ref:Zn,data:li.join("")});const Ai=new Ln.Dict(pi);Ai.set("Type",Ln.Name.get("StructTreeRoot"));const gi=pi.getNewTemporaryRef();Ai.set("ParentTree",gi);const yi=[];Ai.set("K",yi);const Ii=new Ln.Dict(pi),xi=[];Ii.set("Nums",xi);const Qn=await Qi(this,On,Qc).call(this,{newAnnotationsByPage:Jn,structTreeRootRef:ni,kids:yi,nums:xi,xref:pi,pdfManager:Gn,newRefs:mi,buffer:li});Ai.set("ParentTreeNextKey",Qn),li.length=0,await(0,Cn.writeObject)(gi,Ii,li,pi),mi.push({ref:gi,data:li.join("")}),li.length=0,await(0,Cn.writeObject)(ni,Ai,li,pi),mi.push({ref:ni,data:li.join("")})}async canUpdateStructTree({pdfManager:Jn,newAnnotationsByPage:pi}){var li,Ai;if(!this.ref)return(0,In.warn)("Cannot update the struct tree: no root reference."),!1;let Zn=this.dict.get("ParentTreeNextKey");if(!Number.isInteger(Zn)||Zn<0)return(0,In.warn)("Cannot update the struct tree: invalid next key."),!1;const Gn=this.dict.get("ParentTree");if(!(Gn instanceof Ln.Dict))return(0,In.warn)("Cannot update the struct tree: ParentTree isn't a dict."),!1;const mi=Gn.get("Nums");if(!Array.isArray(mi))return(0,In.warn)("Cannot update the struct tree: nums isn't an array."),!1;const{numPages:Wn}=Jn.catalog;for(const gi of pi.keys()){const{pageDict:yi,ref:Ii}=await Jn.getPage(gi);if(!(Ii instanceof Ln.Ref))return(0,In.warn)(`Cannot save the struct tree: page ${gi} has no ref.`),!1;const xi=yi.get("StructParents");if(!Number.isInteger(xi)||xi<0||xi>=Wn)return(0,In.warn)(`Cannot save the struct tree: page ${gi} has no id.`),!1}let ni=!0;for(const[gi,yi]of pi){const{pageDict:Ii}=await Jn.getPage(gi);Qi(li=fi,Xn,nh).call(li,{elements:yi,xref:this.dict.xref,pageDict:Ii,parentTree:Gn});for(const xi of yi)(Ai=xi.accessibilityData)!=null&&Ai.type&&(xi.parentTreeId=Zn++,ni=!1)}if(ni){for(const gi of pi.values())for(const yi of gi)delete yi.parentTreeId,delete yi.structTreeParent;return!1}return!0}async updateStructureTree({newAnnotationsByPage:Jn,pdfManager:pi,newRefs:Zn}){var ai;const Gn=this.dict.xref,mi=this.dict.clone(),Wn=this.ref;let ni=mi.getRaw("ParentTree"),li;ni instanceof Ln.Ref?li=Gn.fetch(ni):(li=ni,ni=Gn.getNewTemporaryRef(),mi.set("ParentTree",ni)),li=li.clone();let Ai=li.getRaw("Nums"),gi=null;Ai instanceof Ln.Ref&&(gi=Ai,Ai=Gn.fetch(gi)),Ai=Ai.slice(),gi||li.set("Nums",Ai);let yi=mi.getRaw("K"),Ii=null;yi instanceof Ln.Ref?(Ii=yi,yi=Gn.fetch(Ii)):(Ii=Gn.getNewTemporaryRef(),mi.set("K",Ii)),yi=Array.isArray(yi)?yi.slice():[yi];const xi=[],Qn=await Qi(ai=fi,On,Qc).call(ai,{newAnnotationsByPage:Jn,structTreeRootRef:Wn,kids:yi,nums:Ai,xref:Gn,pdfManager:pi,newRefs:Zn,buffer:xi});mi.set("ParentTreeNextKey",Qn),xi.length=0,await(0,Cn.writeObject)(Ii,yi,xi,Gn),Zn.push({ref:Ii,data:xi.join("")}),gi&&(xi.length=0,await(0,Cn.writeObject)(gi,Ai,xi,Gn),Zn.push({ref:gi,data:xi.join("")})),xi.length=0,await(0,Cn.writeObject)(ni,li,xi,Gn),Zn.push({ref:ni,data:xi.join("")}),xi.length=0,await(0,Cn.writeObject)(Wn,mi,xi,Gn),Zn.push({ref:Wn,data:xi.join("")})}};Nn=new WeakSet,th=function(Jn,pi,Zn){if(!(Jn instanceof Ln.Ref)||pi<0)return;this.structParentIds||(this.structParentIds=new Ln.RefSetCache);let Gn=this.structParentIds.get(Jn);Gn||(Gn=[],this.structParentIds.put(Jn,Gn)),Gn.push([pi,Zn])},On=new WeakSet,Qc=async function({newAnnotationsByPage:Jn,structTreeRootRef:pi,kids:Zn,nums:Gn,xref:mi,pdfManager:Wn,newRefs:ni,buffer:li}){const Ai=Ln.Name.get("OBJR");let gi=-1/0;for(const[yi,Ii]of Jn){const{ref:xi}=await Wn.getPage(yi);for(const{accessibilityData:{type:Qn,title:ai,lang:Vn,alt:Yn,expanded:ci,actualText:bi},ref:Ci,parentTreeId:Fi,structTreeParent:zi}of Ii){gi=Math.max(gi,Fi);const _i=mi.getNewTemporaryRef(),ji=new Ln.Dict(mi);ji.set("S",Ln.Name.get(Qn)),ai&&ji.set("T",ai),Vn&&ji.set("Lang",Vn),Yn&&ji.set("Alt",Yn),ci&&ji.set("E",ci),bi&&ji.set("ActualText",bi),zi?await Qi(this,ri,ih).call(this,{structTreeParent:zi,tagDict:ji,newTagRef:_i,fallbackRef:pi,xref:mi,newRefs:ni,buffer:li}):ji.set("P",pi);const Pi=new Ln.Dict(mi);ji.set("K",Pi),Pi.set("Type",Ai),Pi.set("Pg",xi),Pi.set("Obj",Ci),li.length=0,await(0,Cn.writeObject)(_i,ji,li,mi),ni.push({ref:_i,data:li.join("")}),Gn.push(Fi,_i),Zn.push(_i)}}return gi+1},Xn=new WeakSet,nh=function({elements:Jn,xref:pi,pageDict:Zn,parentTree:Gn}){const mi=new Map;for(const gi of Jn)if(gi.structTreeParentId){const yi=parseInt(gi.structTreeParentId.split("_mc")[1],10);mi.set(yi,gi)}const Wn=Zn.get("StructParents"),li=new jn.NumberTree(Gn,pi).get(Wn);if(!Array.isArray(li))return;const Ai=(gi,yi,Ii)=>{const xi=mi.get(gi);if(xi){const Qn=yi.getRaw("P"),ai=pi.fetchIfRef(Qn);return Qn instanceof Ln.Ref&&ai instanceof Ln.Dict&&(xi.structTreeParent={ref:Ii,dict:yi}),!0}return!1};for(const gi of li){if(!(gi instanceof Ln.Ref))continue;const yi=pi.fetch(gi),Ii=yi.get("K");if(Number.isInteger(Ii)){Ai(Ii,yi,gi);continue}if(Array.isArray(Ii)){for(let xi of Ii)if(xi=pi.fetchIfRef(xi),Number.isInteger(xi)&&Ai(xi,yi,gi))break}}},ri=new WeakSet,ih=async function({structTreeParent:{ref:Jn,dict:pi},tagDict:Zn,newTagRef:Gn,fallbackRef:mi,xref:Wn,newRefs:ni,buffer:li}){const Ai=pi.getRaw("P");let gi=Wn.fetchIfRef(Ai);Zn.set("P",Ai);let yi=!1,Ii,xi=gi.getRaw("K");if(xi instanceof Ln.Ref?Ii=Wn.fetch(xi):(Ii=xi,xi=Wn.getNewTemporaryRef(),gi=gi.clone(),gi.set("K",xi),yi=!0),Array.isArray(Ii)){const Qn=Ii.indexOf(Jn);if(Qn>=0)Ii=Ii.slice(),Ii.splice(Qn+1,0,Gn);else{(0,In.warn)("Cannot update the struct tree: parent kid not found."),Zn.set("P",mi);return}}else Ii instanceof Ln.Dict&&(Ii=[xi,Gn],xi=Wn.getNewTemporaryRef(),gi.set("K",xi),yi=!0);li.length=0,await(0,Cn.writeObject)(xi,Ii,li,Wn),ni.push({ref:xi,data:li.join("")}),yi&&(li.length=0,await(0,Cn.writeObject)(Ai,gi,li,Wn),ni.push({ref:Ai,data:li.join("")}))},Ki(fi,On),Ki(fi,Xn),Ki(fi,ri);let ui=fi;Mn.StructTreeRoot=ui;class si{constructor(Jn,pi){this.tree=Jn,this.dict=pi,this.kids=[],this.parseKids()}get role(){const Jn=this.dict.get("S"),pi=Jn instanceof Ln.Name?Jn.name:"",{root:Zn}=this.tree;return Zn.roleMap.has(pi)?Zn.roleMap.get(pi):pi}parseKids(){let Jn=null;const pi=this.dict.getRaw("Pg");pi instanceof Ln.Ref&&(Jn=pi.toString());const Zn=this.dict.get("K");if(Array.isArray(Zn))for(const Gn of Zn){const mi=this.parseKid(Jn,Gn);mi&&this.kids.push(mi)}else{const Gn=this.parseKid(Jn,Zn);Gn&&this.kids.push(Gn)}}parseKid(Jn,pi){if(Number.isInteger(pi))return this.tree.pageDict.objId!==Jn?null:new ei({type:Rn.PAGE_CONTENT,mcid:pi,pageObjId:Jn});let Zn=null;if(pi instanceof Ln.Ref?Zn=this.dict.xref.fetch(pi):pi instanceof Ln.Dict&&(Zn=pi),!Zn)return null;const Gn=Zn.getRaw("Pg");Gn instanceof Ln.Ref&&(Jn=Gn.toString());const mi=Zn.get("Type")instanceof Ln.Name?Zn.get("Type").name:null;if(mi==="MCR"){if(this.tree.pageDict.objId!==Jn)return null;const Wn=Zn.getRaw("Stm");return new ei({type:Rn.STREAM_CONTENT,refObjId:Wn instanceof Ln.Ref?Wn.toString():null,pageObjId:Jn,mcid:Zn.get("MCID")})}if(mi==="OBJR"){if(this.tree.pageDict.objId!==Jn)return null;const Wn=Zn.getRaw("Obj");return new ei({type:Rn.OBJECT,refObjId:Wn instanceof Ln.Ref?Wn.toString():null,pageObjId:Jn})}return new ei({type:Rn.ELEMENT,dict:Zn})}}class ei{constructor({type:Jn,dict:pi=null,mcid:Zn=null,pageObjId:Gn=null,refObjId:mi=null}){this.type=Jn,this.dict=pi,this.mcid=Zn,this.pageObjId=Gn,this.refObjId=mi,this.parentNode=null}}class Bn{constructor(Jn,pi){this.root=Jn,this.rootDict=Jn?Jn.dict:null,this.pageDict=pi,this.nodes=[]}parse(Jn){var ni,li;if(!this.root||!this.rootDict)return;const pi=this.rootDict.get("ParentTree");if(!pi)return;const Zn=this.pageDict.get("StructParents"),Gn=Jn instanceof Ln.Ref&&((ni=this.root.structParentIds)==null?void 0:ni.get(Jn));if(!Number.isInteger(Zn)&&!Gn)return;const mi=new Map,Wn=new jn.NumberTree(pi,this.rootDict.xref);if(Number.isInteger(Zn)){const Ai=Wn.get(Zn);if(Array.isArray(Ai))for(const gi of Ai)gi instanceof Ln.Ref&&this.addNode(this.rootDict.xref.fetch(gi),mi)}if(Gn)for(const[Ai,gi]of Gn){const yi=Wn.get(Ai);if(yi){const Ii=this.addNode(this.rootDict.xref.fetchIfRef(yi),mi);((li=Ii==null?void 0:Ii.kids)==null?void 0:li.length)===1&&Ii.kids[0].type===Rn.OBJECT&&(Ii.kids[0].type=gi)}}}addNode(Jn,pi,Zn=0){if(Zn>Tn)return(0,In.warn)("StructTree MAX_DEPTH reached."),null;if(pi.has(Jn))return pi.get(Jn);const Gn=new si(this,Jn);pi.set(Jn,Gn);const mi=Jn.get("P");if(!mi||(0,Ln.isName)(mi.get("Type"),"StructTreeRoot"))return this.addTopLevelNode(Jn,Gn)||pi.delete(Jn),Gn;const Wn=this.addNode(mi,pi,Zn+1);if(!Wn)return Gn;let ni=!1;for(const li of Wn.kids)li.type===Rn.ELEMENT&&li.dict===Jn&&(li.parentNode=Gn,ni=!0);return ni||pi.delete(Jn),Gn}addTopLevelNode(Jn,pi){const Zn=this.rootDict.get("K");if(!Zn)return!1;if(Zn instanceof Ln.Dict)return Zn.objId!==Jn.objId?!1:(this.nodes[0]=pi,!0);if(!Array.isArray(Zn))return!0;let Gn=!1;for(let mi=0;mi<Zn.length;mi++){const Wn=Zn[mi];(Wn==null?void 0:Wn.toString())===Jn.objId&&(this.nodes[mi]=pi,Gn=!0)}return Gn}get serializable(){function Jn(Zn,Gn,mi=0){if(mi>Tn){(0,In.warn)("StructTree too deep to be fully serialized.");return}const Wn=Object.create(null);Wn.role=Zn.role,Wn.children=[],Gn.children.push(Wn);const ni=Zn.dict.get("Alt");typeof ni=="string"&&(Wn.alt=(0,In.stringToPDFString)(ni));const li=Zn.dict.get("Lang");typeof li=="string"&&(Wn.lang=(0,In.stringToPDFString)(li));for(const Ai of Zn.kids){const gi=Ai.type===Rn.ELEMENT?Ai.parentNode:null;if(gi){Jn(gi,Wn,mi+1);continue}else Ai.type===Rn.PAGE_CONTENT||Ai.type===Rn.STREAM_CONTENT?Wn.children.push({type:"content",id:`p${Ai.pageObjId}_mc${Ai.mcid}`}):Ai.type===Rn.OBJECT?Wn.children.push({type:"object",id:Ai.refObjId}):Ai.type===Rn.ANNOTATION&&Wn.children.push({type:"annotation",id:`${In.AnnotationPrefix}${Ai.refObjId}`})}}const pi=Object.create(null);pi.children=[],pi.role="Root";for(const Zn of this.nodes)Zn&&Jn(Zn,pi);return pi}}Mn.StructTreePage=Bn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.incrementalUpdate=di,Mn.writeDict=si,Mn.writeObject=ui;var In=ti(2),Ln=ti(4),jn=ti(3),Cn=ti(71),Tn=ti(5),Rn=ti(74);async function ui(fi,wi,Jn,{encrypt:pi=null}){const Zn=pi==null?void 0:pi.createCipherTransform(fi.num,fi.gen);Jn.push(`${fi.num} ${fi.gen} obj
`),wi instanceof Ln.Dict?await si(wi,Jn,Zn):wi instanceof Tn.BaseStream?await ei(wi,Jn,Zn):Array.isArray(wi)&&await Bn(wi,Jn,Zn),Jn.push(`
endobj
`)}async function si(fi,wi,Jn){wi.push("<<");for(const pi of fi.getKeys())wi.push(` /${(0,jn.escapePDFName)(pi)} `),await Nn(fi.getRaw(pi),wi,Jn);wi.push(">>")}async function ei(fi,wi,Jn){let pi=fi.getString();const{dict:Zn}=fi,[Gn,mi]=await Promise.all([Zn.getAsync("Filter"),Zn.getAsync("DecodeParms")]),Wn=Array.isArray(Gn)?await Zn.xref.fetchIfRefAsync(Gn[0]):Gn,ni=(0,Ln.isName)(Wn,"FlateDecode");if(typeof CompressionStream<"u"&&(pi.length>=256||ni))try{const Ai=(0,In.stringToBytes)(pi),gi=new CompressionStream("deflate"),yi=gi.writable.getWriter();yi.write(Ai),yi.close();const Ii=await new Response(gi.readable).arrayBuffer();pi=(0,In.bytesToString)(new Uint8Array(Ii));let xi,Qn;Gn?ni||(xi=Array.isArray(Gn)?[Ln.Name.get("FlateDecode"),...Gn]:[Ln.Name.get("FlateDecode"),Gn],mi&&(Qn=Array.isArray(mi)?[null,...mi]:[null,mi])):xi=Ln.Name.get("FlateDecode"),xi&&Zn.set("Filter",xi),Qn&&Zn.set("DecodeParms",Qn)}catch(Ai){(0,In.info)(`writeStream - cannot compress data: "${Ai}".`)}Jn&&(pi=Jn.encryptString(pi)),Zn.set("Length",pi.length),await si(Zn,wi,Jn),wi.push(` stream
`,pi,`
endstream`)}async function Bn(fi,wi,Jn){wi.push("[");let pi=!0;for(const Zn of fi)pi?pi=!1:wi.push(" "),await Nn(Zn,wi,Jn);wi.push("]")}async function Nn(fi,wi,Jn){fi instanceof Ln.Name?wi.push(`/${(0,jn.escapePDFName)(fi.name)}`):fi instanceof Ln.Ref?wi.push(`${fi.num} ${fi.gen} R`):Array.isArray(fi)?await Bn(fi,wi,Jn):typeof fi=="string"?(Jn&&(fi=Jn.encryptString(fi)),wi.push(`(${(0,jn.escapeString)(fi)})`)):typeof fi=="number"?wi.push((0,jn.numberToString)(fi)):typeof fi=="boolean"?wi.push(fi.toString()):fi instanceof Ln.Dict?await si(fi,wi,Jn):fi instanceof Tn.BaseStream?await ei(fi,wi,Jn):fi===null?wi.push("null"):(0,In.warn)(`Unhandled value in writer: ${typeof fi}, please file a bug.`)}function Hn(fi,wi,Jn,pi){for(let Zn=wi+Jn-1;Zn>Jn-1;Zn--)pi[Zn]=fi&255,fi>>=8;return Jn+wi}function On(fi,wi,Jn){for(let pi=0,Zn=fi.length;pi<Zn;pi++)Jn[wi+pi]=fi.charCodeAt(pi)&255}function hi(fi,wi){const Jn=Math.floor(Date.now()/1e3),pi=wi.filename||"",Zn=[Jn.toString(),pi,fi.toString()];let Gn=Zn.reduce((ni,li)=>ni+li.length,0);for(const ni of Object.values(wi.info))Zn.push(ni),Gn+=ni.length;const mi=new Uint8Array(Gn);let Wn=0;for(const ni of Zn)On(ni,Wn,mi),Wn+=ni.length;return(0,In.bytesToString)((0,Rn.calculateMD5)(mi))}function Xn(fi,wi){const Jn=new Cn.SimpleXMLParser({hasAttributes:!0}).parseFromString(fi);for(const{xfa:Zn}of wi){if(!Zn)continue;const{path:Gn,value:mi}=Zn;if(!Gn)continue;const Wn=(0,jn.parseXFAPath)(Gn);let ni=Jn.documentElement.searchNode(Wn,0);!ni&&Wn.length>1&&(ni=Jn.documentElement.searchNode([Wn.at(-1)],0)),ni?ni.childNodes=Array.isArray(mi)?mi.map(li=>new Cn.SimpleDOMNode("value",li)):[new Cn.SimpleDOMNode("#text",mi)]:(0,In.warn)(`Node not found for path: ${Gn}`)}const pi=[];return Jn.documentElement.dump(pi),pi.join("")}async function ii({xref:fi,acroForm:wi,acroFormRef:Jn,hasXfa:pi,hasXfaDatasetsEntry:Zn,xfaDatasetsRef:Gn,needAppearances:mi,newRefs:Wn}){if(pi&&!Zn&&!Gn&&(0,In.warn)("XFA - Cannot save it"),!mi&&(!pi||!Gn||Zn))return;const ni=wi.clone();if(pi&&!Zn){const Ai=wi.get("XFA").slice();Ai.splice(2,0,"datasets"),Ai.splice(3,0,Gn),ni.set("XFA",Ai)}mi&&ni.set("NeedAppearances",!0);const li=[];await ui(Jn,ni,li,fi),Wn.push({ref:Jn,data:li.join("")})}function ri({xfaData:fi,xfaDatasetsRef:wi,newRefs:Jn,xref:pi}){if(fi===null){const mi=pi.fetchIfRef(wi);fi=Xn(mi.getString(),Jn)}const Zn=pi.encrypt;Zn&&(fi=Zn.createCipherTransform(wi.num,wi.gen).encryptString(fi));const Gn=`${wi.num} ${wi.gen} obj
<< /Type /EmbeddedFile /Length ${fi.length}>>
stream
`+fi+`
endstream
endobj
`;Jn.push({ref:wi,data:Gn})}async function di({originalData:fi,xrefInfo:wi,newRefs:Jn,xref:pi=null,hasXfa:Zn=!1,xfaDatasetsRef:Gn=null,hasXfaDatasetsEntry:mi=!1,needAppearances:Wn,acroFormRef:ni=null,acroForm:li=null,xfaData:Ai=null}){await ii({xref:pi,acroForm:li,acroFormRef:ni,hasXfa:Zn,hasXfaDatasetsEntry:mi,xfaDatasetsRef:Gn,needAppearances:Wn,newRefs:Jn}),Zn&&ri({xfaData:Ai,xfaDatasetsRef:Gn,newRefs:Jn,xref:pi});const gi=new Ln.Dict(null),yi=wi.newRef;let Ii,xi;const Qn=fi.at(-1);Qn===10||Qn===13?(Ii=[],xi=fi.length):(Ii=[`
`],xi=fi.length+1),gi.set("Size",yi.num+1),gi.set("Prev",wi.startXRef),gi.set("Type",Ln.Name.get("XRef")),wi.rootRef!==null&&gi.set("Root",wi.rootRef),wi.infoRef!==null&&gi.set("Info",wi.infoRef),wi.encryptRef!==null&&gi.set("Encrypt",wi.encryptRef),Jn.push({ref:yi,data:""}),Jn=Jn.sort((Ni,Si)=>Ni.ref.num-Si.ref.num);const ai=[[0,1,65535]],Vn=[0,1];let Yn=0;for(const{ref:Ni,data:Si}of Jn)Yn=Math.max(Yn,xi),ai.push([1,xi,Math.min(Ni.gen,65535)]),xi+=Si.length,Vn.push(Ni.num,1),Ii.push(Si);if(gi.set("Index",Vn),Array.isArray(wi.fileIds)&&wi.fileIds.length>0){const Ni=hi(xi,wi);gi.set("ID",[wi.fileIds[0],Ni])}const bi=[1,Math.ceil(Math.log2(Yn)/8),2],Fi=(bi[0]+bi[1]+bi[2])*ai.length;gi.set("W",bi),gi.set("Length",Fi),Ii.push(`${yi.num} ${yi.gen} obj
`),await si(gi,Ii,null),Ii.push(` stream
`);const zi=Ii.reduce((Ni,Si)=>Ni+Si.length,0),_i=`
endstream
endobj
startxref
${xi}
%%EOF
`,ji=new Uint8Array(fi.length+zi+Fi+_i.length);ji.set(fi);let Pi=fi.length;for(const Ni of Ii)On(Ni,Pi,ji),Pi+=Ni.length;for(const[Ni,Si,Ti]of ai)Pi=Hn(Ni,bi[0],Pi,ji),Pi=Hn(Si,bi[1],Pi,ji),Pi=Hn(Ti,bi[2],Pi,ji);return On(_i,Pi,ji),ji}},(oi,Mn,ti)=>{var di,fi,sh,Jn,el,Zn,ah,mi,cc,ni,tl;Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.calculateSHA256=Mn.calculateMD5=Mn.PDF20=Mn.PDF17=Mn.CipherTransformFactory=Mn.ARCFourCipher=Mn.AES256Cipher=Mn.AES128Cipher=void 0,Mn.calculateSHA384=ei,Mn.calculateSHA512=void 0;var In=ti(2),Ln=ti(4),jn=ti(75);class Cn{constructor(yi){this.a=0,this.b=0;const Ii=new Uint8Array(256),xi=yi.length;for(let Qn=0;Qn<256;++Qn)Ii[Qn]=Qn;for(let Qn=0,ai=0;Qn<256;++Qn){const Vn=Ii[Qn];ai=ai+Vn+yi[Qn%xi]&255,Ii[Qn]=Ii[ai],Ii[ai]=Vn}this.s=Ii}encryptBlock(yi){let Ii=this.a,xi=this.b;const Qn=this.s,ai=yi.length,Vn=new Uint8Array(ai);for(let Yn=0;Yn<ai;++Yn){Ii=Ii+1&255;const ci=Qn[Ii];xi=xi+ci&255;const bi=Qn[xi];Qn[Ii]=bi,Qn[xi]=ci,Vn[Yn]=yi[Yn]^Qn[ci+bi&255]}return this.a=Ii,this.b=xi,Vn}decryptBlock(yi){return this.encryptBlock(yi)}encrypt(yi){return this.encryptBlock(yi)}}Mn.ARCFourCipher=Cn;const Tn=function(){const yi=new Uint8Array([7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21]),Ii=new Int32Array([-680876936,-389564586,606105819,-1044525330,-176418897,1200080426,-1473231341,-45705983,1770035416,-1958414417,-42063,-1990404162,1804603682,-40341101,-1502002290,1236535329,-165796510,-1069501632,643717713,-373897302,-701558691,38016083,-660478335,-405537848,568446438,-1019803690,-187363961,1163531501,-1444681467,-51403784,1735328473,-1926607734,-378558,-2022574463,1839030562,-35309556,-1530992060,1272893353,-155497632,-1094730640,681279174,-358537222,-722521979,76029189,-640364487,-421815835,530742520,-995338651,-198630844,1126891415,-1416354905,-57434055,1700485571,-1894986606,-1051523,-2054922799,1873313359,-30611744,-1560198380,1309151649,-145523070,-1120210379,718787259,-343485551]);function xi(Qn,ai,Vn){let Yn=1732584193,ci=-271733879,bi=-1732584194,Ci=271733878;const Fi=Vn+72&-64,zi=new Uint8Array(Fi);let _i,ji;for(_i=0;_i<Vn;++_i)zi[_i]=Qn[ai++];zi[_i++]=128;const Pi=Fi-8;for(;_i<Pi;)zi[_i++]=0;zi[_i++]=Vn<<3&255,zi[_i++]=Vn>>5&255,zi[_i++]=Vn>>13&255,zi[_i++]=Vn>>21&255,zi[_i++]=Vn>>>29&255,zi[_i++]=0,zi[_i++]=0,zi[_i++]=0;const Ni=new Int32Array(16);for(_i=0;_i<Fi;){for(ji=0;ji<16;++ji,_i+=4)Ni[ji]=zi[_i]|zi[_i+1]<<8|zi[_i+2]<<16|zi[_i+3]<<24;let Si=Yn,Ti=ci,Ri=bi,Mi=Ci,Ui,Hi;for(ji=0;ji<64;++ji){ji<16?(Ui=Ti&Ri|~Ti&Mi,Hi=ji):ji<32?(Ui=Mi&Ti|~Mi&Ri,Hi=5*ji+1&15):ji<48?(Ui=Ti^Ri^Mi,Hi=3*ji+5&15):(Ui=Ri^(Ti|~Mi),Hi=7*ji&15);const Li=Mi,Ei=Si+Ui+Ii[ji]+Ni[Hi]|0,$i=yi[ji];Mi=Ri,Ri=Ti,Ti=Ti+(Ei<<$i|Ei>>>32-$i)|0,Si=Li}Yn=Yn+Si|0,ci=ci+Ti|0,bi=bi+Ri|0,Ci=Ci+Mi|0}return new Uint8Array([Yn&255,Yn>>8&255,Yn>>16&255,Yn>>>24&255,ci&255,ci>>8&255,ci>>16&255,ci>>>24&255,bi&255,bi>>8&255,bi>>16&255,bi>>>24&255,Ci&255,Ci>>8&255,Ci>>16&255,Ci>>>24&255])}return xi}();Mn.calculateMD5=Tn;class Rn{constructor(yi,Ii){this.high=yi|0,this.low=Ii|0}and(yi){this.high&=yi.high,this.low&=yi.low}xor(yi){this.high^=yi.high,this.low^=yi.low}or(yi){this.high|=yi.high,this.low|=yi.low}shiftRight(yi){yi>=32?(this.low=this.high>>>yi-32|0,this.high=0):(this.low=this.low>>>yi|this.high<<32-yi,this.high=this.high>>>yi|0)}shiftLeft(yi){yi>=32?(this.high=this.low<<yi-32,this.low=0):(this.high=this.high<<yi|this.low>>>32-yi,this.low<<=yi)}rotateRight(yi){let Ii,xi;yi&32?(xi=this.low,Ii=this.high):(Ii=this.low,xi=this.high),yi&=31,this.low=Ii>>>yi|xi<<32-yi,this.high=xi>>>yi|Ii<<32-yi}not(){this.high=~this.high,this.low=~this.low}add(yi){const Ii=(this.low>>>0)+(yi.low>>>0);let xi=(this.high>>>0)+(yi.high>>>0);Ii>4294967295&&(xi+=1),this.low=Ii|0,this.high=xi|0}copyTo(yi,Ii){yi[Ii]=this.high>>>24&255,yi[Ii+1]=this.high>>16&255,yi[Ii+2]=this.high>>8&255,yi[Ii+3]=this.high&255,yi[Ii+4]=this.low>>>24&255,yi[Ii+5]=this.low>>16&255,yi[Ii+6]=this.low>>8&255,yi[Ii+7]=this.low&255}assign(yi){this.high=yi.high,this.low=yi.low}}const ui=function(){function yi(Ci,Fi){return Ci>>>Fi|Ci<<32-Fi}function Ii(Ci,Fi,zi){return Ci&Fi^~Ci&zi}function xi(Ci,Fi,zi){return Ci&Fi^Ci&zi^Fi&zi}function Qn(Ci){return yi(Ci,2)^yi(Ci,13)^yi(Ci,22)}function ai(Ci){return yi(Ci,6)^yi(Ci,11)^yi(Ci,25)}function Vn(Ci){return yi(Ci,7)^yi(Ci,18)^Ci>>>3}function Yn(Ci){return yi(Ci,17)^yi(Ci,19)^Ci>>>10}const ci=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bi(Ci,Fi,zi){let _i=1779033703,ji=3144134277,Pi=1013904242,Ni=2773480762,Si=1359893119,Ti=2600822924,Ri=528734635,Mi=1541459225;const Ui=Math.ceil((zi+9)/64)*64,Hi=new Uint8Array(Ui);let Li,Ei;for(Li=0;Li<zi;++Li)Hi[Li]=Ci[Fi++];Hi[Li++]=128;const $i=Ui-8;for(;Li<$i;)Hi[Li++]=0;Hi[Li++]=0,Hi[Li++]=0,Hi[Li++]=0,Hi[Li++]=zi>>>29&255,Hi[Li++]=zi>>21&255,Hi[Li++]=zi>>13&255,Hi[Li++]=zi>>5&255,Hi[Li++]=zi<<3&255;const Bi=new Uint32Array(64);for(Li=0;Li<Ui;){for(Ei=0;Ei<16;++Ei)Bi[Ei]=Hi[Li]<<24|Hi[Li+1]<<16|Hi[Li+2]<<8|Hi[Li+3],Li+=4;for(Ei=16;Ei<64;++Ei)Bi[Ei]=Yn(Bi[Ei-2])+Bi[Ei-7]+Vn(Bi[Ei-15])+Bi[Ei-16]|0;let Oi=_i,Xi=ji,Gi=Pi,qi=Ni,ns=Si,is=Ti,as=Ri,hs=Mi,Yi,Vi;for(Ei=0;Ei<64;++Ei)Yi=hs+ai(ns)+Ii(ns,is,as)+ci[Ei]+Bi[Ei],Vi=Qn(Oi)+xi(Oi,Xi,Gi),hs=as,as=is,is=ns,ns=qi+Yi|0,qi=Gi,Gi=Xi,Xi=Oi,Oi=Yi+Vi|0;_i=_i+Oi|0,ji=ji+Xi|0,Pi=Pi+Gi|0,Ni=Ni+qi|0,Si=Si+ns|0,Ti=Ti+is|0,Ri=Ri+as|0,Mi=Mi+hs|0}return new Uint8Array([_i>>24&255,_i>>16&255,_i>>8&255,_i&255,ji>>24&255,ji>>16&255,ji>>8&255,ji&255,Pi>>24&255,Pi>>16&255,Pi>>8&255,Pi&255,Ni>>24&255,Ni>>16&255,Ni>>8&255,Ni&255,Si>>24&255,Si>>16&255,Si>>8&255,Si&255,Ti>>24&255,Ti>>16&255,Ti>>8&255,Ti&255,Ri>>24&255,Ri>>16&255,Ri>>8&255,Ri&255,Mi>>24&255,Mi>>16&255,Mi>>8&255,Mi&255])}return bi}();Mn.calculateSHA256=ui;const si=function(){function yi(bi,Ci,Fi,zi,_i){bi.assign(Ci),bi.and(Fi),_i.assign(Ci),_i.not(),_i.and(zi),bi.xor(_i)}function Ii(bi,Ci,Fi,zi,_i){bi.assign(Ci),bi.and(Fi),_i.assign(Ci),_i.and(zi),bi.xor(_i),_i.assign(Fi),_i.and(zi),bi.xor(_i)}function xi(bi,Ci,Fi){bi.assign(Ci),bi.rotateRight(28),Fi.assign(Ci),Fi.rotateRight(34),bi.xor(Fi),Fi.assign(Ci),Fi.rotateRight(39),bi.xor(Fi)}function Qn(bi,Ci,Fi){bi.assign(Ci),bi.rotateRight(14),Fi.assign(Ci),Fi.rotateRight(18),bi.xor(Fi),Fi.assign(Ci),Fi.rotateRight(41),bi.xor(Fi)}function ai(bi,Ci,Fi){bi.assign(Ci),bi.rotateRight(1),Fi.assign(Ci),Fi.rotateRight(8),bi.xor(Fi),Fi.assign(Ci),Fi.shiftRight(7),bi.xor(Fi)}function Vn(bi,Ci,Fi){bi.assign(Ci),bi.rotateRight(19),Fi.assign(Ci),Fi.rotateRight(61),bi.xor(Fi),Fi.assign(Ci),Fi.shiftRight(6),bi.xor(Fi)}const Yn=[new Rn(1116352408,3609767458),new Rn(1899447441,602891725),new Rn(3049323471,3964484399),new Rn(3921009573,2173295548),new Rn(961987163,4081628472),new Rn(1508970993,3053834265),new Rn(2453635748,2937671579),new Rn(2870763221,3664609560),new Rn(3624381080,2734883394),new Rn(310598401,1164996542),new Rn(607225278,1323610764),new Rn(1426881987,3590304994),new Rn(1925078388,4068182383),new Rn(2162078206,991336113),new Rn(2614888103,633803317),new Rn(3248222580,3479774868),new Rn(3835390401,2666613458),new Rn(4022224774,944711139),new Rn(264347078,2341262773),new Rn(604807628,2007800933),new Rn(770255983,1495990901),new Rn(1249150122,1856431235),new Rn(1555081692,3175218132),new Rn(1996064986,2198950837),new Rn(2554220882,3999719339),new Rn(2821834349,766784016),new Rn(2952996808,2566594879),new Rn(3210313671,3203337956),new Rn(3336571891,1034457026),new Rn(3584528711,2466948901),new Rn(113926993,3758326383),new Rn(338241895,168717936),new Rn(666307205,1188179964),new Rn(773529912,1546045734),new Rn(1294757372,1522805485),new Rn(1396182291,2643833823),new Rn(1695183700,2343527390),new Rn(1986661051,1014477480),new Rn(2177026350,1206759142),new Rn(2456956037,344077627),new Rn(2730485921,1290863460),new Rn(2820302411,3158454273),new Rn(3259730800,3505952657),new Rn(3345764771,106217008),new Rn(3516065817,3606008344),new Rn(3600352804,1432725776),new Rn(4094571909,1467031594),new Rn(275423344,851169720),new Rn(430227734,3100823752),new Rn(506948616,1363258195),new Rn(659060556,3750685593),new Rn(883997877,3785050280),new Rn(958139571,3318307427),new Rn(1322822218,3812723403),new Rn(1537002063,2003034995),new Rn(1747873779,3602036899),new Rn(1955562222,1575990012),new Rn(2024104815,1125592928),new Rn(2227730452,2716904306),new Rn(2361852424,442776044),new Rn(2428436474,593698344),new Rn(2756734187,3733110249),new Rn(3204031479,2999351573),new Rn(3329325298,3815920427),new Rn(3391569614,3928383900),new Rn(3515267271,566280711),new Rn(3940187606,3454069534),new Rn(4118630271,4000239992),new Rn(116418474,1914138554),new Rn(174292421,2731055270),new Rn(289380356,3203993006),new Rn(460393269,320620315),new Rn(685471733,587496836),new Rn(852142971,1086792851),new Rn(1017036298,365543100),new Rn(1126000580,2618297676),new Rn(1288033470,3409855158),new Rn(1501505948,4234509866),new Rn(1607167915,987167468),new Rn(1816402316,1246189591)];function ci(bi,Ci,Fi,zi=!1){let _i,ji,Pi,Ni,Si,Ti,Ri,Mi;zi?(_i=new Rn(3418070365,3238371032),ji=new Rn(1654270250,914150663),Pi=new Rn(2438529370,812702999),Ni=new Rn(355462360,4144912697),Si=new Rn(1731405415,4290775857),Ti=new Rn(2394180231,1750603025),Ri=new Rn(3675008525,1694076839),Mi=new Rn(1203062813,3204075428)):(_i=new Rn(1779033703,4089235720),ji=new Rn(3144134277,2227873595),Pi=new Rn(1013904242,4271175723),Ni=new Rn(2773480762,1595750129),Si=new Rn(1359893119,2917565137),Ti=new Rn(2600822924,725511199),Ri=new Rn(528734635,4215389547),Mi=new Rn(1541459225,327033209));const Ui=Math.ceil((Fi+17)/128)*128,Hi=new Uint8Array(Ui);let Li,Ei;for(Li=0;Li<Fi;++Li)Hi[Li]=bi[Ci++];Hi[Li++]=128;const $i=Ui-16;for(;Li<$i;)Hi[Li++]=0;Hi[Li++]=0,Hi[Li++]=0,Hi[Li++]=0,Hi[Li++]=0,Hi[Li++]=0,Hi[Li++]=0,Hi[Li++]=0,Hi[Li++]=0,Hi[Li++]=0,Hi[Li++]=0,Hi[Li++]=0,Hi[Li++]=Fi>>>29&255,Hi[Li++]=Fi>>21&255,Hi[Li++]=Fi>>13&255,Hi[Li++]=Fi>>5&255,Hi[Li++]=Fi<<3&255;const Bi=new Array(80);for(Li=0;Li<80;Li++)Bi[Li]=new Rn(0,0);let Oi=new Rn(0,0),Xi=new Rn(0,0),Gi=new Rn(0,0),qi=new Rn(0,0),ns=new Rn(0,0),is=new Rn(0,0),as=new Rn(0,0),hs=new Rn(0,0);const Yi=new Rn(0,0),Vi=new Rn(0,0),Zi=new Rn(0,0),us=new Rn(0,0);let ts;for(Li=0;Li<Ui;){for(Ei=0;Ei<16;++Ei)Bi[Ei].high=Hi[Li]<<24|Hi[Li+1]<<16|Hi[Li+2]<<8|Hi[Li+3],Bi[Ei].low=Hi[Li+4]<<24|Hi[Li+5]<<16|Hi[Li+6]<<8|Hi[Li+7],Li+=8;for(Ei=16;Ei<80;++Ei)ts=Bi[Ei],Vn(ts,Bi[Ei-2],us),ts.add(Bi[Ei-7]),ai(Zi,Bi[Ei-15],us),ts.add(Zi),ts.add(Bi[Ei-16]);for(Oi.assign(_i),Xi.assign(ji),Gi.assign(Pi),qi.assign(Ni),ns.assign(Si),is.assign(Ti),as.assign(Ri),hs.assign(Mi),Ei=0;Ei<80;++Ei)Yi.assign(hs),Qn(Zi,ns,us),Yi.add(Zi),yi(Zi,ns,is,as,us),Yi.add(Zi),Yi.add(Yn[Ei]),Yi.add(Bi[Ei]),xi(Vi,Oi,us),Ii(Zi,Oi,Xi,Gi,us),Vi.add(Zi),ts=hs,hs=as,as=is,is=ns,qi.add(Yi),ns=qi,qi=Gi,Gi=Xi,Xi=Oi,ts.assign(Yi),ts.add(Vi),Oi=ts;_i.add(Oi),ji.add(Xi),Pi.add(Gi),Ni.add(qi),Si.add(ns),Ti.add(is),Ri.add(as),Mi.add(hs)}let es;return zi?(es=new Uint8Array(48),_i.copyTo(es,0),ji.copyTo(es,8),Pi.copyTo(es,16),Ni.copyTo(es,24),Si.copyTo(es,32),Ti.copyTo(es,40)):(es=new Uint8Array(64),_i.copyTo(es,0),ji.copyTo(es,8),Pi.copyTo(es,16),Ni.copyTo(es,24),Si.copyTo(es,32),Ti.copyTo(es,40),Ri.copyTo(es,48),Mi.copyTo(es,56)),es}return ci}();Mn.calculateSHA512=si;function ei(gi,yi,Ii){return si(gi,yi,Ii,!0)}class Bn{decryptBlock(yi){return yi}encrypt(yi){return yi}}class Nn{constructor(){this.constructor===Nn&&(0,In.unreachable)("Cannot initialize AESBaseCipher."),this._s=new Uint8Array([99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22]),this._inv_s=new Uint8Array([82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125]),this._mix=new Uint32Array([0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795]),this._mixCol=new Uint8Array(256);for(let yi=0;yi<256;yi++)this._mixCol[yi]=yi<128?yi<<1:yi<<1^27;this.buffer=new Uint8Array(16),this.bufferPosition=0}_expandKey(yi){(0,In.unreachable)("Cannot call `_expandKey` on the base class")}_decrypt(yi,Ii){let xi,Qn,ai;const Vn=new Uint8Array(16);Vn.set(yi);for(let Yn=0,ci=this._keySize;Yn<16;++Yn,++ci)Vn[Yn]^=Ii[ci];for(let Yn=this._cyclesOfRepetition-1;Yn>=1;--Yn){xi=Vn[13],Vn[13]=Vn[9],Vn[9]=Vn[5],Vn[5]=Vn[1],Vn[1]=xi,xi=Vn[14],Qn=Vn[10],Vn[14]=Vn[6],Vn[10]=Vn[2],Vn[6]=xi,Vn[2]=Qn,xi=Vn[15],Qn=Vn[11],ai=Vn[7],Vn[15]=Vn[3],Vn[11]=xi,Vn[7]=Qn,Vn[3]=ai;for(let ci=0;ci<16;++ci)Vn[ci]=this._inv_s[Vn[ci]];for(let ci=0,bi=Yn*16;ci<16;++ci,++bi)Vn[ci]^=Ii[bi];for(let ci=0;ci<16;ci+=4){const bi=this._mix[Vn[ci]],Ci=this._mix[Vn[ci+1]],Fi=this._mix[Vn[ci+2]],zi=this._mix[Vn[ci+3]];xi=bi^Ci>>>8^Ci<<24^Fi>>>16^Fi<<16^zi>>>24^zi<<8,Vn[ci]=xi>>>24&255,Vn[ci+1]=xi>>16&255,Vn[ci+2]=xi>>8&255,Vn[ci+3]=xi&255}}xi=Vn[13],Vn[13]=Vn[9],Vn[9]=Vn[5],Vn[5]=Vn[1],Vn[1]=xi,xi=Vn[14],Qn=Vn[10],Vn[14]=Vn[6],Vn[10]=Vn[2],Vn[6]=xi,Vn[2]=Qn,xi=Vn[15],Qn=Vn[11],ai=Vn[7],Vn[15]=Vn[3],Vn[11]=xi,Vn[7]=Qn,Vn[3]=ai;for(let Yn=0;Yn<16;++Yn)Vn[Yn]=this._inv_s[Vn[Yn]],Vn[Yn]^=Ii[Yn];return Vn}_encrypt(yi,Ii){const xi=this._s;let Qn,ai,Vn;const Yn=new Uint8Array(16);Yn.set(yi);for(let ci=0;ci<16;++ci)Yn[ci]^=Ii[ci];for(let ci=1;ci<this._cyclesOfRepetition;ci++){for(let bi=0;bi<16;++bi)Yn[bi]=xi[Yn[bi]];Vn=Yn[1],Yn[1]=Yn[5],Yn[5]=Yn[9],Yn[9]=Yn[13],Yn[13]=Vn,Vn=Yn[2],ai=Yn[6],Yn[2]=Yn[10],Yn[6]=Yn[14],Yn[10]=Vn,Yn[14]=ai,Vn=Yn[3],ai=Yn[7],Qn=Yn[11],Yn[3]=Yn[15],Yn[7]=Vn,Yn[11]=ai,Yn[15]=Qn;for(let bi=0;bi<16;bi+=4){const Ci=Yn[bi+0],Fi=Yn[bi+1],zi=Yn[bi+2],_i=Yn[bi+3];Qn=Ci^Fi^zi^_i,Yn[bi+0]^=Qn^this._mixCol[Ci^Fi],Yn[bi+1]^=Qn^this._mixCol[Fi^zi],Yn[bi+2]^=Qn^this._mixCol[zi^_i],Yn[bi+3]^=Qn^this._mixCol[_i^Ci]}for(let bi=0,Ci=ci*16;bi<16;++bi,++Ci)Yn[bi]^=Ii[Ci]}for(let ci=0;ci<16;++ci)Yn[ci]=xi[Yn[ci]];Vn=Yn[1],Yn[1]=Yn[5],Yn[5]=Yn[9],Yn[9]=Yn[13],Yn[13]=Vn,Vn=Yn[2],ai=Yn[6],Yn[2]=Yn[10],Yn[6]=Yn[14],Yn[10]=Vn,Yn[14]=ai,Vn=Yn[3],ai=Yn[7],Qn=Yn[11],Yn[3]=Yn[15],Yn[7]=Vn,Yn[11]=ai,Yn[15]=Qn;for(let ci=0,bi=this._keySize;ci<16;++ci,++bi)Yn[ci]^=Ii[bi];return Yn}_decryptBlock2(yi,Ii){const xi=yi.length;let Qn=this.buffer,ai=this.bufferPosition;const Vn=[];let Yn=this.iv;for(let Ci=0;Ci<xi;++Ci){if(Qn[ai]=yi[Ci],++ai,ai<16)continue;const Fi=this._decrypt(Qn,this._key);for(let zi=0;zi<16;++zi)Fi[zi]^=Yn[zi];Yn=Qn,Vn.push(Fi),Qn=new Uint8Array(16),ai=0}if(this.buffer=Qn,this.bufferLength=ai,this.iv=Yn,Vn.length===0)return new Uint8Array(0);let ci=16*Vn.length;if(Ii){const Ci=Vn.at(-1);let Fi=Ci[15];if(Fi<=16){for(let zi=15,_i=16-Fi;zi>=_i;--zi)if(Ci[zi]!==Fi){Fi=0;break}ci-=Fi,Vn[Vn.length-1]=Ci.subarray(0,16-Fi)}}const bi=new Uint8Array(ci);for(let Ci=0,Fi=0,zi=Vn.length;Ci<zi;++Ci,Fi+=16)bi.set(Vn[Ci],Fi);return bi}decryptBlock(yi,Ii,xi=null){const Qn=yi.length,ai=this.buffer;let Vn=this.bufferPosition;if(xi)this.iv=xi;else{for(let Yn=0;Vn<16&&Yn<Qn;++Yn,++Vn)ai[Vn]=yi[Yn];if(Vn<16)return this.bufferLength=Vn,new Uint8Array(0);this.iv=ai,yi=yi.subarray(16)}return this.buffer=new Uint8Array(16),this.bufferLength=0,this.decryptBlock=this._decryptBlock2,this.decryptBlock(yi,Ii)}encrypt(yi,Ii){const xi=yi.length;let Qn=this.buffer,ai=this.bufferPosition;const Vn=[];Ii||(Ii=new Uint8Array(16));for(let bi=0;bi<xi;++bi){if(Qn[ai]=yi[bi],++ai,ai<16)continue;for(let Fi=0;Fi<16;++Fi)Qn[Fi]^=Ii[Fi];const Ci=this._encrypt(Qn,this._key);Ii=Ci,Vn.push(Ci),Qn=new Uint8Array(16),ai=0}if(this.buffer=Qn,this.bufferLength=ai,this.iv=Ii,Vn.length===0)return new Uint8Array(0);const Yn=16*Vn.length,ci=new Uint8Array(Yn);for(let bi=0,Ci=0,Fi=Vn.length;bi<Fi;++bi,Ci+=16)ci.set(Vn[bi],Ci);return ci}}class Hn extends Nn{constructor(yi){super(),this._cyclesOfRepetition=10,this._keySize=160,this._rcon=new Uint8Array([141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141]),this._key=this._expandKey(yi)}_expandKey(yi){const xi=this._s,Qn=this._rcon,ai=new Uint8Array(176);ai.set(yi);for(let Vn=16,Yn=1;Vn<176;++Yn){let ci=ai[Vn-3],bi=ai[Vn-2],Ci=ai[Vn-1],Fi=ai[Vn-4];ci=xi[ci],bi=xi[bi],Ci=xi[Ci],Fi=xi[Fi],ci^=Qn[Yn];for(let zi=0;zi<4;++zi)ai[Vn]=ci^=ai[Vn-16],Vn++,ai[Vn]=bi^=ai[Vn-16],Vn++,ai[Vn]=Ci^=ai[Vn-16],Vn++,ai[Vn]=Fi^=ai[Vn-16],Vn++}return ai}}Mn.AES128Cipher=Hn;class On extends Nn{constructor(yi){super(),this._cyclesOfRepetition=14,this._keySize=224,this._key=this._expandKey(yi)}_expandKey(yi){const xi=this._s,Qn=new Uint8Array(240);Qn.set(yi);let ai=1,Vn,Yn,ci,bi;for(let Ci=32,Fi=1;Ci<240;++Fi){Ci%32===16?(Vn=xi[Vn],Yn=xi[Yn],ci=xi[ci],bi=xi[bi]):Ci%32===0&&(Vn=Qn[Ci-3],Yn=Qn[Ci-2],ci=Qn[Ci-1],bi=Qn[Ci-4],Vn=xi[Vn],Yn=xi[Yn],ci=xi[ci],bi=xi[bi],Vn^=ai,(ai<<=1)>=256&&(ai=(ai^27)&255));for(let zi=0;zi<4;++zi)Qn[Ci]=Vn^=Qn[Ci-32],Ci++,Qn[Ci]=Yn^=Qn[Ci-32],Ci++,Qn[Ci]=ci^=Qn[Ci-32],Ci++,Qn[Ci]=bi^=Qn[Ci-32],Ci++}return Qn}}Mn.AES256Cipher=On;class hi{checkOwnerPassword(yi,Ii,xi,Qn){const ai=new Uint8Array(yi.length+56);ai.set(yi,0),ai.set(Ii,yi.length),ai.set(xi,yi.length+Ii.length);const Vn=ui(ai,0,ai.length);return(0,In.isArrayEqual)(Vn,Qn)}checkUserPassword(yi,Ii,xi){const Qn=new Uint8Array(yi.length+8);Qn.set(yi,0),Qn.set(Ii,yi.length);const ai=ui(Qn,0,Qn.length);return(0,In.isArrayEqual)(ai,xi)}getOwnerKey(yi,Ii,xi,Qn){const ai=new Uint8Array(yi.length+56);ai.set(yi,0),ai.set(Ii,yi.length),ai.set(xi,yi.length+Ii.length);const Vn=ui(ai,0,ai.length);return new On(Vn).decryptBlock(Qn,!1,new Uint8Array(16))}getUserKey(yi,Ii,xi){const Qn=new Uint8Array(yi.length+8);Qn.set(yi,0),Qn.set(Ii,yi.length);const ai=ui(Qn,0,Qn.length);return new On(ai).decryptBlock(xi,!1,new Uint8Array(16))}}Mn.PDF17=hi;class Xn{_hash(yi,Ii,xi){let Qn=ui(Ii,0,Ii.length).subarray(0,32),ai=[0],Vn=0;for(;Vn<64||ai.at(-1)>Vn-32;){const Yn=yi.length+Qn.length+xi.length,ci=new Uint8Array(Yn);let bi=0;ci.set(yi,bi),bi+=yi.length,ci.set(Qn,bi),bi+=Qn.length,ci.set(xi,bi);const Ci=new Uint8Array(Yn*64);for(let _i=0,ji=0;_i<64;_i++,ji+=Yn)Ci.set(ci,ji);ai=new Hn(Qn.subarray(0,16)).encrypt(Ci,Qn.subarray(16,32));const zi=ai.slice(0,16).reduce((_i,ji)=>_i+ji,0)%3;zi===0?Qn=ui(ai,0,ai.length):zi===1?Qn=ei(ai,0,ai.length):zi===2&&(Qn=si(ai,0,ai.length)),Vn++}return Qn.subarray(0,32)}checkOwnerPassword(yi,Ii,xi,Qn){const ai=new Uint8Array(yi.length+56);ai.set(yi,0),ai.set(Ii,yi.length),ai.set(xi,yi.length+Ii.length);const Vn=this._hash(yi,ai,xi);return(0,In.isArrayEqual)(Vn,Qn)}checkUserPassword(yi,Ii,xi){const Qn=new Uint8Array(yi.length+8);Qn.set(yi,0),Qn.set(Ii,yi.length);const ai=this._hash(yi,Qn,[]);return(0,In.isArrayEqual)(ai,xi)}getOwnerKey(yi,Ii,xi,Qn){const ai=new Uint8Array(yi.length+56);ai.set(yi,0),ai.set(Ii,yi.length),ai.set(xi,yi.length+Ii.length);const Vn=this._hash(yi,ai,xi);return new On(Vn).decryptBlock(Qn,!1,new Uint8Array(16))}getUserKey(yi,Ii,xi){const Qn=new Uint8Array(yi.length+8);Qn.set(yi,0),Qn.set(Ii,yi.length);const ai=this._hash(yi,Qn,[]);return new On(ai).decryptBlock(xi,!1,new Uint8Array(16))}}Mn.PDF20=Xn;class ii{constructor(yi,Ii){this.StringCipherConstructor=yi,this.StreamCipherConstructor=Ii}createStream(yi,Ii){const xi=new this.StreamCipherConstructor;return new jn.DecryptStream(yi,Ii,function(ai,Vn){return xi.decryptBlock(ai,Vn)})}decryptString(yi){const Ii=new this.StringCipherConstructor;let xi=(0,In.stringToBytes)(yi);return xi=Ii.decryptBlock(xi,!0),(0,In.bytesToString)(xi)}encryptString(yi){const Ii=new this.StringCipherConstructor;if(Ii instanceof Nn){const ai=16-yi.length%16;yi+=String.fromCharCode(ai).repeat(ai);const Vn=new Uint8Array(16);if(typeof crypto<"u")crypto.getRandomValues(Vn);else for(let bi=0;bi<16;bi++)Vn[bi]=Math.floor(256*Math.random());let Yn=(0,In.stringToBytes)(yi);Yn=Ii.encrypt(Yn,Vn);const ci=new Uint8Array(16+Yn.length);return ci.set(Vn),ci.set(Yn,16),(0,In.bytesToString)(ci)}let xi=(0,In.stringToBytes)(yi);return xi=Ii.encrypt(xi),(0,In.bytesToString)(xi)}}const Ai=class Ai{constructor(yi,Ii,xi){Ki(this,fi);Ki(this,Jn);Ki(this,Zn);Ki(this,mi);Ki(this,ni);const Qn=yi.get("Filter");if(!(0,Ln.isName)(Qn,"Standard"))throw new In.FormatError("unknown encryption method");this.filterName=Qn.name,this.dict=yi;const ai=yi.get("V");if(!Number.isInteger(ai)||ai!==1&&ai!==2&&ai!==4&&ai!==5)throw new In.FormatError("unsupported encryption algorithm");this.algorithm=ai;let Vn=yi.get("Length");if(!Vn)if(ai<=3)Vn=40;else{const Si=yi.get("CF"),Ti=yi.get("StmF");if(Si instanceof Ln.Dict&&Ti instanceof Ln.Name){Si.suppressEncryption=!0;const Ri=Si.get(Ti.name);Vn=(Ri==null?void 0:Ri.get("Length"))||128,Vn<40&&(Vn<<=3)}}if(!Number.isInteger(Vn)||Vn<40||Vn%8!==0)throw new In.FormatError("invalid key length");const Yn=(0,In.stringToBytes)(yi.get("O")),ci=(0,In.stringToBytes)(yi.get("U")),bi=Yn.subarray(0,32),Ci=ci.subarray(0,32),Fi=yi.get("P"),zi=yi.get("R"),_i=(ai===4||ai===5)&&yi.get("EncryptMetadata")!==!1;this.encryptMetadata=_i;const ji=(0,In.stringToBytes)(Ii);let Pi;if(xi){if(zi===6)try{xi=(0,In.utf8StringToString)(xi)}catch{(0,In.warn)("CipherTransformFactory: Unable to convert UTF8 encoded password.")}Pi=(0,In.stringToBytes)(xi)}let Ni;if(ai!==5)Ni=Qi(this,Jn,el).call(this,ji,Pi,bi,Ci,Fi,zi,Vn,_i);else{const Si=Yn.subarray(32,40),Ti=Yn.subarray(40,48),Ri=ci.subarray(0,48),Mi=ci.subarray(32,40),Ui=ci.subarray(40,48),Hi=(0,In.stringToBytes)(yi.get("OE")),Li=(0,In.stringToBytes)(yi.get("UE")),Ei=(0,In.stringToBytes)(yi.get("Perms"));Ni=Qi(this,fi,sh).call(this,zi,Pi,bi,Si,Ti,Ri,Ci,Mi,Ui,Hi,Li,Ei)}if(!Ni&&!xi)throw new In.PasswordException("No password given",In.PasswordResponses.NEED_PASSWORD);if(!Ni&&xi){const Si=Qi(this,Zn,ah).call(this,Pi,bi,zi,Vn);Ni=Qi(this,Jn,el).call(this,ji,Si,bi,Ci,Fi,zi,Vn,_i)}if(!Ni)throw new In.PasswordException("Incorrect Password",In.PasswordResponses.INCORRECT_PASSWORD);if(this.encryptionKey=Ni,ai>=4){const Si=yi.get("CF");Si instanceof Ln.Dict&&(Si.suppressEncryption=!0),this.cf=Si,this.stmf=yi.get("StmF")||Ln.Name.get("Identity"),this.strf=yi.get("StrF")||Ln.Name.get("Identity"),this.eff=yi.get("EFF")||this.stmf}}createCipherTransform(yi,Ii){if(this.algorithm===4||this.algorithm===5)return new ii(Qi(this,ni,tl).call(this,this.cf,this.strf,yi,Ii,this.encryptionKey),Qi(this,ni,tl).call(this,this.cf,this.stmf,yi,Ii,this.encryptionKey));const xi=Qi(this,mi,cc).call(this,yi,Ii,this.encryptionKey,!1),Qn=function(){return new Cn(xi)};return new ii(Qn,Qn)}};di=new WeakMap,fi=new WeakSet,sh=function(yi,Ii,xi,Qn,ai,Vn,Yn,ci,bi,Ci,Fi,zi){if(Ii){const ji=Math.min(127,Ii.length);Ii=Ii.subarray(0,ji)}else Ii=[];const _i=yi===6?new Xn:new hi;return _i.checkUserPassword(Ii,ci,Yn)?_i.getUserKey(Ii,bi,Fi):Ii.length&&_i.checkOwnerPassword(Ii,Qn,Vn,xi)?_i.getOwnerKey(Ii,ai,Vn,Ci):null},Jn=new WeakSet,el=function(yi,Ii,xi,Qn,ai,Vn,Yn,ci){const bi=40+xi.length+yi.length,Ci=new Uint8Array(bi);let Fi=0,zi,_i;if(Ii)for(_i=Math.min(32,Ii.length);Fi<_i;++Fi)Ci[Fi]=Ii[Fi];for(zi=0;Fi<32;)Ci[Fi++]=vi(Ai,di)[zi++];for(zi=0,_i=xi.length;zi<_i;++zi)Ci[Fi++]=xi[zi];for(Ci[Fi++]=ai&255,Ci[Fi++]=ai>>8&255,Ci[Fi++]=ai>>16&255,Ci[Fi++]=ai>>>24&255,zi=0,_i=yi.length;zi<_i;++zi)Ci[Fi++]=yi[zi];Vn>=4&&!ci&&(Ci[Fi++]=255,Ci[Fi++]=255,Ci[Fi++]=255,Ci[Fi++]=255);let ji=Tn(Ci,0,Fi);const Pi=Yn>>3;if(Vn>=3)for(zi=0;zi<50;++zi)ji=Tn(ji,0,Pi);const Ni=ji.subarray(0,Pi);let Si,Ti;if(Vn>=3){for(Fi=0;Fi<32;++Fi)Ci[Fi]=vi(Ai,di)[Fi];for(zi=0,_i=yi.length;zi<_i;++zi)Ci[Fi++]=yi[zi];Si=new Cn(Ni),Ti=Si.encryptBlock(Tn(Ci,0,Fi)),_i=Ni.length;const Ri=new Uint8Array(_i);for(zi=1;zi<=19;++zi){for(let Mi=0;Mi<_i;++Mi)Ri[Mi]=Ni[Mi]^zi;Si=new Cn(Ri),Ti=Si.encryptBlock(Ti)}for(zi=0,_i=Ti.length;zi<_i;++zi)if(Qn[zi]!==Ti[zi])return null}else for(Si=new Cn(Ni),Ti=Si.encryptBlock(vi(Ai,di)),zi=0,_i=Ti.length;zi<_i;++zi)if(Qn[zi]!==Ti[zi])return null;return Ni},Zn=new WeakSet,ah=function(yi,Ii,xi,Qn){const ai=new Uint8Array(32);let Vn=0;const Yn=Math.min(32,yi.length);for(;Vn<Yn;++Vn)ai[Vn]=yi[Vn];let ci=0;for(;Vn<32;)ai[Vn++]=vi(Ai,di)[ci++];let bi=Tn(ai,0,Vn);const Ci=Qn>>3;if(xi>=3)for(ci=0;ci<50;++ci)bi=Tn(bi,0,bi.length);let Fi,zi;if(xi>=3){zi=Ii;const _i=new Uint8Array(Ci);for(ci=19;ci>=0;ci--){for(let ji=0;ji<Ci;++ji)_i[ji]=bi[ji]^ci;Fi=new Cn(_i),zi=Fi.encryptBlock(zi)}}else Fi=new Cn(bi.subarray(0,Ci)),zi=Fi.encryptBlock(Ii);return zi},mi=new WeakSet,cc=function(yi,Ii,xi,Qn=!1){const ai=new Uint8Array(xi.length+9),Vn=xi.length;let Yn;for(Yn=0;Yn<Vn;++Yn)ai[Yn]=xi[Yn];return ai[Yn++]=yi&255,ai[Yn++]=yi>>8&255,ai[Yn++]=yi>>16&255,ai[Yn++]=Ii&255,ai[Yn++]=Ii>>8&255,Qn&&(ai[Yn++]=115,ai[Yn++]=65,ai[Yn++]=108,ai[Yn++]=84),Tn(ai,0,Yn).subarray(0,Math.min(xi.length+5,16))},ni=new WeakSet,tl=function(yi,Ii,xi,Qn,ai){if(!(Ii instanceof Ln.Name))throw new In.FormatError("Invalid crypt filter name.");const Vn=this,Yn=yi.get(Ii.name),ci=Yn==null?void 0:Yn.get("CFM");if(!ci||ci.name==="None")return function(){return new Bn};if(ci.name==="V2")return function(){var bi;return new Cn(Qi(bi=Vn,mi,cc).call(bi,xi,Qn,ai,!1))};if(ci.name==="AESV2")return function(){var bi;return new Hn(Qi(bi=Vn,mi,cc).call(bi,xi,Qn,ai,!0))};if(ci.name==="AESV3")return function(){return new On(ai)};throw new In.FormatError("Unknown crypto method")},Ki(Ai,di,new Uint8Array([40,191,78,94,78,117,138,65,100,0,78,86,255,250,1,8,46,46,0,182,208,104,62,128,47,12,169,254,100,83,105,122]));let ri=Ai;Mn.CipherTransformFactory=ri},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.DecryptStream=void 0;var In=ti(18);const Ln=512;class jn extends In.DecodeStream{constructor(Tn,Rn,ui){super(Rn),this.str=Tn,this.dict=Tn.dict,this.decrypt=ui,this.nextChunk=null,this.initialized=!1}readBlock(){var Nn;let Tn;if(this.initialized?Tn=this.nextChunk:(Tn=this.str.getBytes(Ln),this.initialized=!0),!Tn||Tn.length===0){this.eof=!0;return}this.nextChunk=this.str.getBytes(Ln);const Rn=((Nn=this.nextChunk)==null?void 0:Nn.length)>0,ui=this.decrypt;Tn=ui(Tn,!Rn);const si=this.bufferLength,ei=si+Tn.length;this.ensureBuffer(ei).set(Tn,si),this.bufferLength=ei}}Mn.DecryptStream=jn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.ObjectLoader=void 0;var In=ti(4),Ln=ti(5),jn=ti(3),Cn=ti(2);function Tn(si){return si instanceof In.Ref||si instanceof In.Dict||si instanceof Ln.BaseStream||Array.isArray(si)}function Rn(si,ei){if(si instanceof In.Dict)si=si.getRawValues();else if(si instanceof Ln.BaseStream)si=si.dict.getRawValues();else if(!Array.isArray(si))return;for(const Bn of si)Tn(Bn)&&ei.push(Bn)}class ui{constructor(ei,Bn,Nn){this.dict=ei,this.keys=Bn,this.xref=Nn,this.refSet=null}async load(){if(this.xref.stream.isDataLoaded)return;const{keys:ei,dict:Bn}=this;this.refSet=new In.RefSet;const Nn=[];for(const Hn of ei){const On=Bn.getRaw(Hn);On!==void 0&&Nn.push(On)}return this._walk(Nn)}async _walk(ei){const Bn=[],Nn=[];for(;ei.length;){let Hn=ei.pop();if(Hn instanceof In.Ref){if(this.refSet.has(Hn))continue;try{this.refSet.put(Hn),Hn=this.xref.fetch(Hn)}catch(On){if(!(On instanceof jn.MissingDataException)){(0,Cn.warn)(`ObjectLoader._walk - requesting all data: "${On}".`),this.refSet=null;const{manager:hi}=this.xref.stream;return hi.requestAllChunks()}Bn.push(Hn),Nn.push({begin:On.begin,end:On.end})}}if(Hn instanceof Ln.BaseStream){const On=Hn.getBaseStreams();if(On){let hi=!1;for(const Xn of On)Xn.isDataLoaded||(hi=!0,Nn.push({begin:Xn.start,end:Xn.end}));hi&&Bn.push(Hn)}}Rn(Hn,ei)}if(Nn.length){await this.xref.stream.manager.requestRanges(Nn);for(const Hn of Bn)Hn instanceof In.Ref&&this.refSet.remove(Hn);return this._walk(Bn)}this.refSet=null}}Mn.ObjectLoader=ui},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.XFAFactory=void 0;var In=ti(78),Ln=ti(79),jn=ti(89),Cn=ti(85),Tn=ti(84),Rn=ti(2),ui=ti(90),si=ti(100);class ei{constructor(Nn){try{this.root=new ui.XFAParser().parse(ei._createDocument(Nn));const Hn=new Ln.Binder(this.root);this.form=Hn.bind(),this.dataHandler=new jn.DataHandler(this.root,Hn.getData()),this.form[In.$globalData].template=this.form}catch(Hn){(0,Rn.warn)(`XFA - an error occurred during parsing and binding: ${Hn}`)}}isValid(){return this.root&&this.form}_createPagesHelper(){const Nn=this.form[In.$toPages]();return new Promise((Hn,On)=>{const hi=()=>{try{const Xn=Nn.next();Xn.done?Hn(Xn.value):setTimeout(hi,0)}catch(Xn){On(Xn)}};setTimeout(hi,0)})}async _createPages(){try{this.pages=await this._createPagesHelper(),this.dims=this.pages.children.map(Nn=>{const{width:Hn,height:On}=Nn.attributes.style;return[0,0,parseInt(Hn),parseInt(On)]})}catch(Nn){(0,Rn.warn)(`XFA - an error occurred during layout: ${Nn}`)}}getBoundingBox(Nn){return this.dims[Nn]}async getNumPages(){return this.pages||await this._createPages(),this.dims.length}setImages(Nn){this.form[In.$globalData].images=Nn}setFonts(Nn){this.form[In.$globalData].fontFinder=new Cn.FontFinder(Nn);const Hn=[];for(let On of this.form[In.$globalData].usedTypefaces)On=(0,Tn.stripQuotes)(On),this.form[In.$globalData].fontFinder.find(On)||Hn.push(On);return Hn.length>0?Hn:null}appendFonts(Nn,Hn){this.form[In.$globalData].fontFinder.add(Nn,Hn)}async getPages(){this.pages||await this._createPages();const Nn=this.pages;return this.pages=null,Nn}serializeData(Nn){return this.dataHandler.serialize(Nn)}static _createDocument(Nn){return Nn["/xdp:xdp"]?Object.values(Nn).join(""):Nn["xdp:xdp"]}static getRichTextAsHtml(Nn){if(!Nn||typeof Nn!="string")return null;try{let Hn=new ui.XFAParser(si.XhtmlNamespace,!0).parse(Nn);if(!["body","xhtml"].includes(Hn[In.$nodeName])){const ii=si.XhtmlNamespace.body({});ii[In.$appendChild](Hn),Hn=ii}const On=Hn[In.$toHTML]();if(!On.success)return null;const{html:hi}=On,{attributes:Xn}=hi;return Xn&&(Xn.class&&(Xn.class=Xn.class.filter(ii=>!ii.startsWith("xfa"))),Xn.dir="auto"),{html:hi,str:Hn[In.$text]()}}catch(Hn){(0,Rn.warn)(`XFA - an error occurred during parsing of rich text: ${Hn}`)}return null}}Mn.XFAFactory=ei},(oi,Mn)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.$uid=Mn.$toStyle=Mn.$toString=Mn.$toPages=Mn.$toHTML=Mn.$text=Mn.$tabIndex=Mn.$setValue=Mn.$setSetAttributes=Mn.$setId=Mn.$searchNode=Mn.$root=Mn.$resolvePrototypes=Mn.$removeChild=Mn.$pushPara=Mn.$pushGlyphs=Mn.$popPara=Mn.$onText=Mn.$onChildCheck=Mn.$onChild=Mn.$nsAttributes=Mn.$nodeName=Mn.$namespaceId=Mn.$lastAttribute=Mn.$isUsable=Mn.$isTransparent=Mn.$isThereMoreWidth=Mn.$isSplittable=Mn.$isNsAgnostic=Mn.$isDescendent=Mn.$isDataValue=Mn.$isCDATAXml=Mn.$isBindable=Mn.$insertAt=Mn.$indexOf=Mn.$ids=Mn.$hasSettableValue=Mn.$globalData=Mn.$getTemplateRoot=Mn.$getSubformParent=Mn.$getRealChildrenByNameIt=Mn.$getParent=Mn.$getNextPage=Mn.$getExtra=Mn.$getDataValue=Mn.$getContainedChildren=Mn.$getChildrenByNameIt=Mn.$getChildrenByName=Mn.$getChildrenByClass=Mn.$getChildren=Mn.$getAvailableSpace=Mn.$getAttributes=Mn.$getAttributeIt=Mn.$flushHTML=Mn.$finalize=Mn.$extra=Mn.$dump=Mn.$data=Mn.$content=Mn.$consumed=Mn.$clone=Mn.$cleanup=Mn.$cleanPage=Mn.$clean=Mn.$childrenToHTML=Mn.$appendChild=Mn.$addHTML=Mn.$acceptWhitespace=void 0;const ti=Symbol();Mn.$acceptWhitespace=ti;const In=Symbol();Mn.$addHTML=In;const Ln=Symbol();Mn.$appendChild=Ln;const jn=Symbol();Mn.$childrenToHTML=jn;const Cn=Symbol();Mn.$clean=Cn;const Tn=Symbol();Mn.$cleanPage=Tn;const Rn=Symbol();Mn.$cleanup=Rn;const ui=Symbol();Mn.$clone=ui;const si=Symbol();Mn.$consumed=si;const ei=Symbol("content");Mn.$content=ei;const Bn=Symbol("data");Mn.$data=Bn;const Nn=Symbol();Mn.$dump=Nn;const Hn=Symbol("extra");Mn.$extra=Hn;const On=Symbol();Mn.$finalize=On;const hi=Symbol();Mn.$flushHTML=hi;const Xn=Symbol();Mn.$getAttributeIt=Xn;const ii=Symbol();Mn.$getAttributes=ii;const ri=Symbol();Mn.$getAvailableSpace=ri;const di=Symbol();Mn.$getChildrenByClass=di;const fi=Symbol();Mn.$getChildrenByName=fi;const wi=Symbol();Mn.$getChildrenByNameIt=wi;const Jn=Symbol();Mn.$getDataValue=Jn;const pi=Symbol();Mn.$getExtra=pi;const Zn=Symbol();Mn.$getRealChildrenByNameIt=Zn;const Gn=Symbol();Mn.$getChildren=Gn;const mi=Symbol();Mn.$getContainedChildren=mi;const Wn=Symbol();Mn.$getNextPage=Wn;const ni=Symbol();Mn.$getSubformParent=ni;const li=Symbol();Mn.$getParent=li;const Ai=Symbol();Mn.$getTemplateRoot=Ai;const gi=Symbol();Mn.$globalData=gi;const yi=Symbol();Mn.$hasSettableValue=yi;const Ii=Symbol();Mn.$ids=Ii;const xi=Symbol();Mn.$indexOf=xi;const Qn=Symbol();Mn.$insertAt=Qn;const ai=Symbol();Mn.$isCDATAXml=ai;const Vn=Symbol();Mn.$isBindable=Vn;const Yn=Symbol();Mn.$isDataValue=Yn;const ci=Symbol();Mn.$isDescendent=ci;const bi=Symbol();Mn.$isNsAgnostic=bi;const Ci=Symbol();Mn.$isSplittable=Ci;const Fi=Symbol();Mn.$isThereMoreWidth=Fi;const zi=Symbol();Mn.$isTransparent=zi;const _i=Symbol();Mn.$isUsable=_i;const ji=Symbol();Mn.$lastAttribute=ji;const Pi=Symbol("namespaceId");Mn.$namespaceId=Pi;const Ni=Symbol("nodeName");Mn.$nodeName=Ni;const Si=Symbol();Mn.$nsAttributes=Si;const Ti=Symbol();Mn.$onChild=Ti;const Ri=Symbol();Mn.$onChildCheck=Ri;const Mi=Symbol();Mn.$onText=Mi;const Ui=Symbol();Mn.$pushGlyphs=Ui;const Hi=Symbol();Mn.$popPara=Hi;const Li=Symbol();Mn.$pushPara=Li;const Ei=Symbol();Mn.$removeChild=Ei;const $i=Symbol("root");Mn.$root=$i;const Bi=Symbol();Mn.$resolvePrototypes=Bi;const Oi=Symbol();Mn.$searchNode=Oi;const Xi=Symbol();Mn.$setId=Xi;const Gi=Symbol();Mn.$setSetAttributes=Gi;const qi=Symbol();Mn.$setValue=qi;const ns=Symbol();Mn.$tabIndex=ns;const is=Symbol();Mn.$text=is;const as=Symbol();Mn.$toPages=as;const hs=Symbol();Mn.$toHTML=hs;const Yi=Symbol();Mn.$toString=Yi;const Vi=Symbol();Mn.$toStyle=Vi;const Zi=Symbol("uid");Mn.$uid=Zi},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.Binder=void 0;var In=ti(78),Ln=ti(80),jn=ti(88),Cn=ti(87),Tn=ti(81),Rn=ti(2);const ui=Tn.NamespaceIds.datasets.id;function si(Bn){const Nn=new Ln.Text({});return Nn[In.$content]=Bn,Nn}class ei{constructor(Nn){var Hn;this.root=Nn,this.datasets=Nn.datasets,this.data=((Hn=Nn.datasets)==null?void 0:Hn.data)||new Cn.XmlObject(Tn.NamespaceIds.datasets.id,"data"),this.emptyMerge=this.data[In.$getChildren]().length===0,this.root.form=this.form=Nn.template[In.$clone]()}_isConsumeData(){return!this.emptyMerge&&this._mergeMode}_isMatchTemplate(){return!this._isConsumeData()}bind(){return this._bindElement(this.form,this.data),this.form}getData(){return this.data}_bindValue(Nn,Hn,On){var hi,Xn;if(Nn[In.$data]=Hn,Nn[In.$hasSettableValue]())if(Hn[In.$isDataValue]()){const ii=Hn[In.$getDataValue]();Nn[In.$setValue](si(ii))}else if(Nn instanceof Ln.Field&&((Xn=(hi=Nn.ui)==null?void 0:hi.choiceList)==null?void 0:Xn.open)==="multiSelect"){const ii=Hn[In.$getChildren]().map(ri=>ri[In.$content].trim()).join(`
`);Nn[In.$setValue](si(ii))}else this._isConsumeData()&&(0,Rn.warn)("XFA - Nodes haven't the same type.");else!Hn[In.$isDataValue]()||this._isMatchTemplate()?this._bindElement(Nn,Hn):(0,Rn.warn)("XFA - Nodes haven't the same type.")}_findDataByNameToConsume(Nn,Hn,On,hi){if(!Nn)return null;let Xn,ii;for(let ri=0;ri<3;ri++){for(Xn=On[In.$getRealChildrenByNameIt](Nn,!1,!0);ii=Xn.next().value,!!ii;)if(Hn===ii[In.$isDataValue]())return ii;if(On[In.$namespaceId]===Tn.NamespaceIds.datasets.id&&On[In.$nodeName]==="data")break;On=On[In.$getParent]()}return hi?(Xn=this.data[In.$getRealChildrenByNameIt](Nn,!0,!1),ii=Xn.next().value,ii||(Xn=this.data[In.$getAttributeIt](Nn,!0),ii=Xn.next().value,ii!=null&&ii[In.$isDataValue]())?ii:null):null}_setProperties(Nn,Hn){if(Nn.hasOwnProperty("setProperty"))for(const{ref:On,target:hi,connection:Xn}of Nn.setProperty.children){if(Xn||!On)continue;const ii=(0,jn.searchNode)(this.root,Hn,On,!1,!1);if(!ii){(0,Rn.warn)(`XFA - Invalid reference: ${On}.`);continue}const[ri]=ii;if(!ri[In.$isDescendent](this.data)){(0,Rn.warn)("XFA - Invalid node: must be a data node.");continue}const di=(0,jn.searchNode)(this.root,Nn,hi,!1,!1);if(!di){(0,Rn.warn)(`XFA - Invalid target: ${hi}.`);continue}const[fi]=di;if(!fi[In.$isDescendent](Nn)){(0,Rn.warn)("XFA - Invalid target: must be a property or subproperty.");continue}const wi=fi[In.$getParent]();if(fi instanceof Ln.SetProperty||wi instanceof Ln.SetProperty){(0,Rn.warn)("XFA - Invalid target: cannot be a setProperty or one of its properties.");continue}if(fi instanceof Ln.BindItems||wi instanceof Ln.BindItems){(0,Rn.warn)("XFA - Invalid target: cannot be a bindItems or one of its properties.");continue}const Jn=ri[In.$text](),pi=fi[In.$nodeName];if(fi instanceof Cn.XFAAttribute){const Zn=Object.create(null);Zn[pi]=Jn;const Gn=Reflect.construct(Object.getPrototypeOf(wi).constructor,[Zn]);wi[pi]=Gn[pi];continue}if(!fi.hasOwnProperty(In.$content)){(0,Rn.warn)("XFA - Invalid node to use in setProperty");continue}fi[In.$data]=ri,fi[In.$content]=Jn,fi[In.$finalize]()}}_bindItems(Nn,Hn){if(!Nn.hasOwnProperty("items")||!Nn.hasOwnProperty("bindItems")||Nn.bindItems.isEmpty())return;for(const Xn of Nn.items.children)Nn[In.$removeChild](Xn);Nn.items.clear();const On=new Ln.Items({}),hi=new Ln.Items({});Nn[In.$appendChild](On),Nn.items.push(On),Nn[In.$appendChild](hi),Nn.items.push(hi);for(const{ref:Xn,labelRef:ii,valueRef:ri,connection:di}of Nn.bindItems.children){if(di||!Xn)continue;const fi=(0,jn.searchNode)(this.root,Hn,Xn,!1,!1);if(!fi){(0,Rn.warn)(`XFA - Invalid reference: ${Xn}.`);continue}for(const wi of fi){if(!wi[In.$isDescendent](this.datasets)){(0,Rn.warn)(`XFA - Invalid ref (${Xn}): must be a datasets child.`);continue}const Jn=(0,jn.searchNode)(this.root,wi,ii,!0,!1);if(!Jn){(0,Rn.warn)(`XFA - Invalid label: ${ii}.`);continue}const[pi]=Jn;if(!pi[In.$isDescendent](this.datasets)){(0,Rn.warn)("XFA - Invalid label: must be a datasets child.");continue}const Zn=(0,jn.searchNode)(this.root,wi,ri,!0,!1);if(!Zn){(0,Rn.warn)(`XFA - Invalid value: ${ri}.`);continue}const[Gn]=Zn;if(!Gn[In.$isDescendent](this.datasets)){(0,Rn.warn)("XFA - Invalid value: must be a datasets child.");continue}const mi=si(pi[In.$text]()),Wn=si(Gn[In.$text]());On[In.$appendChild](mi),On.text.push(mi),hi[In.$appendChild](Wn),hi.text.push(Wn)}}}_bindOccurrences(Nn,Hn,On){let hi;if(Hn.length>1&&(hi=Nn[In.$clone](),hi[In.$removeChild](hi.occur),hi.occur=null),this._bindValue(Nn,Hn[0],On),this._setProperties(Nn,Hn[0]),this._bindItems(Nn,Hn[0]),Hn.length===1)return;const Xn=Nn[In.$getParent](),ii=Nn[In.$nodeName],ri=Xn[In.$indexOf](Nn);for(let di=1,fi=Hn.length;di<fi;di++){const wi=Hn[di],Jn=hi[In.$clone]();Xn[ii].push(Jn),Xn[In.$insertAt](ri+di,Jn),this._bindValue(Jn,wi,On),this._setProperties(Jn,wi),this._bindItems(Jn,wi)}}_createOccurrences(Nn){if(!this.emptyMerge)return;const{occur:Hn}=Nn;if(!Hn||Hn.initial<=1)return;const On=Nn[In.$getParent](),hi=Nn[In.$nodeName];if(!(On[hi]instanceof Cn.XFAObjectArray))return;let Xn;Nn.name?Xn=On[hi].children.filter(di=>di.name===Nn.name).length:Xn=On[hi].children.length;const ii=On[In.$indexOf](Nn)+1,ri=Hn.initial-Xn;if(ri){const di=Nn[In.$clone]();di[In.$removeChild](di.occur),di.occur=null,On[hi].push(di),On[In.$insertAt](ii,di);for(let fi=1;fi<ri;fi++){const wi=di[In.$clone]();On[hi].push(wi),On[In.$insertAt](ii+fi,wi)}}}_getOccurInfo(Nn){const{name:Hn,occur:On}=Nn;if(!On||!Hn)return[1,1];const hi=On.max===-1?1/0:On.max;return[On.min,hi]}_setAndBind(Nn,Hn){this._setProperties(Nn,Hn),this._bindItems(Nn,Hn),this._bindElement(Nn,Hn)}_bindElement(Nn,Hn){const On=[];this._createOccurrences(Nn);for(const hi of Nn[In.$getChildren]()){if(hi[In.$data])continue;if(this._mergeMode===void 0&&hi[In.$nodeName]==="subform"){this._mergeMode=hi.mergeMode==="consumeData";const Jn=Hn[In.$getChildren]();if(Jn.length>0)this._bindOccurrences(hi,[Jn[0]],null);else if(this.emptyMerge){const pi=Hn[In.$namespaceId]===ui?-1:Hn[In.$namespaceId],Zn=hi[In.$data]=new Cn.XmlObject(pi,hi.name||"root");Hn[In.$appendChild](Zn),this._bindElement(hi,Zn)}continue}if(!hi[In.$isBindable]())continue;let Xn=!1,ii=null,ri=null,di=null;if(hi.bind){switch(hi.bind.match){case"none":this._setAndBind(hi,Hn);continue;case"global":Xn=!0;break;case"dataRef":if(!hi.bind.ref){(0,Rn.warn)(`XFA - ref is empty in node ${hi[In.$nodeName]}.`),this._setAndBind(hi,Hn);continue}ri=hi.bind.ref;break}hi.bind.picture&&(ii=hi.bind.picture[In.$content])}const[fi,wi]=this._getOccurInfo(hi);if(ri)if(di=(0,jn.searchNode)(this.root,Hn,ri,!0,!1),di===null){if(di=(0,jn.createDataNode)(this.data,Hn,ri),!di)continue;this._isConsumeData()&&(di[In.$consumed]=!0),this._setAndBind(hi,di);continue}else this._isConsumeData()&&(di=di.filter(Jn=>!Jn[In.$consumed])),di.length>wi?di=di.slice(0,wi):di.length===0&&(di=null),di&&this._isConsumeData()&&di.forEach(Jn=>{Jn[In.$consumed]=!0});else{if(!hi.name){this._setAndBind(hi,Hn);continue}if(this._isConsumeData()){const Jn=[];for(;Jn.length<wi;){const pi=this._findDataByNameToConsume(hi.name,hi[In.$hasSettableValue](),Hn,Xn);if(!pi)break;pi[In.$consumed]=!0,Jn.push(pi)}di=Jn.length>0?Jn:null}else{if(di=Hn[In.$getRealChildrenByNameIt](hi.name,!1,this.emptyMerge).next().value,!di){if(fi===0){On.push(hi);continue}const Jn=Hn[In.$namespaceId]===ui?-1:Hn[In.$namespaceId];di=hi[In.$data]=new Cn.XmlObject(Jn,hi.name),this.emptyMerge&&(di[In.$consumed]=!0),Hn[In.$appendChild](di),this._setAndBind(hi,di);continue}this.emptyMerge&&(di[In.$consumed]=!0),di=[di]}}di?this._bindOccurrences(hi,di,ii):fi>0?this._setAndBind(hi,Hn):On.push(hi)}On.forEach(hi=>hi[In.$getParent]()[In.$removeChild](hi))}}Mn.Binder=ei},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.Value=Mn.Text=Mn.TemplateNamespace=Mn.Template=Mn.SetProperty=Mn.Items=Mn.Field=Mn.BindItems=void 0;var In=ti(78),Ln=ti(81),jn=ti(82),Cn=ti(83),Tn=ti(87),Rn=ti(84),ui=ti(2),si=ti(85),ei=ti(3),Bn=ti(88);const Nn=Ln.NamespaceIds.template.id,Hn="http://www.w3.org/2000/svg",On=2,hi=3,Xn=5e3,ii=/^H(\d+)$/,ri=new Set(["image/gif","image/jpeg","image/jpg","image/pjpeg","image/png","image/apng","image/x-png","image/bmp","image/x-ms-bmp","image/tiff","image/tif","application/octet-stream"]),di=[[[66,77],"image/bmp"],[[255,216,255],"image/jpeg"],[[73,73,42,0],"image/tiff"],[[77,77,0,42],"image/tiff"],[[71,73,70,56,57,97],"image/gif"],[[137,80,78,71,13,10,26,10],"image/png"]];function fi(Cs){if(!Cs||!Cs.border)return{w:0,h:0};const qn=Cs.border[In.$getExtra]();return qn?{w:qn.widths[0]+qn.widths[2]+qn.insets[0]+qn.insets[2],h:qn.widths[1]+qn.widths[3]+qn.insets[1]+qn.insets[3]}:{w:0,h:0}}function wi(Cs){return Cs.margin&&(Cs.margin.topInset||Cs.margin.rightInset||Cs.margin.bottomInset||Cs.margin.leftInset)}function Jn(Cs,qn){if(!Cs.value){const Di=new Io({});Cs[In.$appendChild](Di),Cs.value=Di}Cs.value[In.$setValue](qn)}function*pi(Cs){for(const qn of Cs[In.$getChildren]()){if(qn instanceof k0){yield*qn[In.$getContainedChildren]();continue}yield qn}}function Zn(Cs){var qn;return((qn=Cs.validate)==null?void 0:qn.nullTest)==="error"}function Gn(Cs){for(;Cs;){if(!Cs.traversal){Cs[In.$tabIndex]=Cs[In.$getParent]()[In.$tabIndex];return}if(Cs[In.$tabIndex])return;let qn=null;for(const Fs of Cs.traversal[In.$getChildren]())if(Fs.operation==="next"){qn=Fs;break}if(!qn||!qn.ref){Cs[In.$tabIndex]=Cs[In.$getParent]()[In.$tabIndex];return}const Di=Cs[In.$getTemplateRoot]();Cs[In.$tabIndex]=++Di[In.$tabIndex];const ys=Di[In.$searchNode](qn.ref,Cs);if(!ys)return;Cs=ys[0]}}function mi(Cs,qn){var ys;const Di=Cs.assist;if(Di){const Fs=Di[In.$toHTML]();Fs&&(qn.title=Fs);const Hs=Di.role.match(ii);if(Hs){const qs="heading",Ks=Hs[1];qn.role=qs,qn["aria-level"]=Ks}}if(Cs.layout==="table")qn.role="table";else if(Cs.layout==="row")qn.role="row";else{const Fs=Cs[In.$getParent]();Fs.layout==="row"&&(qn.role=((ys=Fs.assist)==null?void 0:ys.role)==="TH"?"columnheader":"cell")}}function Wn(Cs){if(!Cs.assist)return null;const qn=Cs.assist;return qn.speak&&qn.speak[In.$content]!==""?qn.speak[In.$content]:qn.toolTip?qn.toolTip[In.$content]:null}function ni(Cs){return Rn.HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:Object.create(null)},children:[{name:"span",attributes:{style:Object.create(null)},value:Cs}]})}function li(Cs){const qn=Cs[In.$getTemplateRoot]();qn[In.$extra].firstUnsplittable===null&&(qn[In.$extra].firstUnsplittable=Cs,qn[In.$extra].noLayoutFailure=!0)}function Ai(Cs){const qn=Cs[In.$getTemplateRoot]();qn[In.$extra].firstUnsplittable===Cs&&(qn[In.$extra].noLayoutFailure=!1)}function gi(Cs){if(Cs[In.$extra]||(Cs[In.$extra]=Object.create(null),Cs.targetType==="auto"))return!1;const qn=Cs[In.$getTemplateRoot]();let Di=null;if(Cs.target){if(Di=qn[In.$searchNode](Cs.target,Cs[In.$getParent]()),!Di)return!1;Di=Di[0]}const{currentPageArea:ys,currentContentArea:Fs}=qn[In.$extra];if(Cs.targetType==="pageArea")return Di instanceof Js||(Di=null),Cs.startNew?(Cs[In.$extra].target=Di||ys,!0):Di&&Di!==ys?(Cs[In.$extra].target=Di,!0):!1;Di instanceof $i||(Di=null);const Ps=Di&&Di[In.$getParent]();let Hs,qs=Ps;if(Cs.startNew)if(Di){const Ks=Ps.contentArea.children,ra=Ks.indexOf(Fs),ha=Ks.indexOf(Di);ra!==-1&&ra<ha&&(qs=null),Hs=ha-1}else Hs=ys.contentArea.children.indexOf(Fs);else if(Di&&Di!==Fs)Hs=Ps.contentArea.children.indexOf(Di)-1,qs=Ps===ys?null:Ps;else return!1;return Cs[In.$extra].target=qs,Cs[In.$extra].index=Hs,!0}function yi(Cs,qn,Di){const ys=Cs[In.$getTemplateRoot](),Fs=ys[In.$extra].noLayoutFailure,Ps=qn[In.$getSubformParent];qn[In.$getSubformParent]=()=>Cs,ys[In.$extra].noLayoutFailure=!0;const Hs=qn[In.$toHTML](Di);Cs[In.$addHTML](Hs.html,Hs.bbox),ys[In.$extra].noLayoutFailure=Fs,qn[In.$getSubformParent]=Ps}class Ii extends Tn.StringObject{constructor(qn){super(Nn,"appearanceFilter"),this.id=qn.id||"",this.type=(0,Rn.getStringOption)(qn.type,["optional","required"]),this.use=qn.use||"",this.usehref=qn.usehref||""}}class xi extends Tn.XFAObject{constructor(qn){super(Nn,"arc",!0),this.circular=(0,Rn.getInteger)({data:qn.circular,defaultValue:0,validate:Di=>Di===1}),this.hand=(0,Rn.getStringOption)(qn.hand,["even","left","right"]),this.id=qn.id||"",this.startAngle=(0,Rn.getFloat)({data:qn.startAngle,defaultValue:0,validate:Di=>!0}),this.sweepAngle=(0,Rn.getFloat)({data:qn.sweepAngle,defaultValue:360,validate:Di=>!0}),this.use=qn.use||"",this.usehref=qn.usehref||"",this.edge=null,this.fill=null}[In.$toHTML](){var Ks;const qn=this.edge||new Vi({}),Di=qn[In.$toStyle](),ys=Object.create(null);((Ks=this.fill)==null?void 0:Ks.presence)==="visible"?Object.assign(ys,this.fill[In.$toStyle]()):ys.fill="transparent",ys.strokeWidth=(0,Cn.measureToString)(qn.presence==="visible"?qn.thickness:0),ys.stroke=Di.color;let Fs;const Ps={xmlns:Hn,style:{width:"100%",height:"100%",overflow:"visible"}};if(this.sweepAngle===360)Fs={name:"ellipse",attributes:{xmlns:Hn,cx:"50%",cy:"50%",rx:"50%",ry:"50%",style:ys}};else{const ra=this.startAngle*Math.PI/180,ha=this.sweepAngle*Math.PI/180,ba=this.sweepAngle>180?1:0,[ga,ya,Aa,oa]=[50*(1+Math.cos(ra)),50*(1-Math.sin(ra)),50*(1+Math.cos(ra+ha)),50*(1-Math.sin(ra+ha))];Fs={name:"path",attributes:{xmlns:Hn,d:`M ${ga} ${ya} A 50 50 0 ${ba} 0 ${Aa} ${oa}`,vectorEffect:"non-scaling-stroke",style:ys}},Object.assign(Ps,{viewBox:"0 0 100 100",preserveAspectRatio:"none"})}const Hs={name:"svg",children:[Fs],attributes:Ps},qs=this[In.$getParent]()[In.$getParent]();return wi(qs)?Rn.HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[Hs]}):(Hs.attributes.style.position="absolute",Rn.HTMLResult.success(Hs))}}class Qn extends Tn.XFAObject{constructor(qn){super(Nn,"area",!0),this.colSpan=(0,Rn.getInteger)({data:qn.colSpan,defaultValue:1,validate:Di=>Di>=1||Di===-1}),this.id=qn.id||"",this.name=qn.name||"",this.relevant=(0,Rn.getRelevant)(qn.relevant),this.use=qn.use||"",this.usehref=qn.usehref||"",this.x=(0,Rn.getMeasurement)(qn.x,"0pt"),this.y=(0,Rn.getMeasurement)(qn.y,"0pt"),this.desc=null,this.extras=null,this.area=new Tn.XFAObjectArray,this.draw=new Tn.XFAObjectArray,this.exObject=new Tn.XFAObjectArray,this.exclGroup=new Tn.XFAObjectArray,this.field=new Tn.XFAObjectArray,this.subform=new Tn.XFAObjectArray,this.subformSet=new Tn.XFAObjectArray}*[In.$getContainedChildren](){yield*pi(this)}[In.$isTransparent](){return!0}[In.$isBindable](){return!0}[In.$addHTML](qn,Di){const[ys,Fs,Ps,Hs]=Di;this[In.$extra].width=Math.max(this[In.$extra].width,ys+Ps),this[In.$extra].height=Math.max(this[In.$extra].height,Fs+Hs),this[In.$extra].children.push(qn)}[In.$getAvailableSpace](){return this[In.$extra].availableSpace}[In.$toHTML](qn){const Di=(0,Cn.toStyle)(this,"position"),ys={style:Di,id:this[In.$uid],class:["xfaArea"]};(0,Cn.isPrintOnly)(this)&&ys.class.push("xfaPrintOnly"),this.name&&(ys.xfaName=this.name);const Fs=[];this[In.$extra]={children:Fs,width:0,height:0,availableSpace:qn};const Ps=this[In.$childrenToHTML]({filter:new Set(["area","draw","field","exclGroup","subform","subformSet"]),include:!0});if(!Ps.success)return Ps.isBreak()?Ps:(delete this[In.$extra],Rn.HTMLResult.FAILURE);Di.width=(0,Cn.measureToString)(this[In.$extra].width),Di.height=(0,Cn.measureToString)(this[In.$extra].height);const Hs={name:"div",attributes:ys,children:Fs},qs=[this.x,this.y,this[In.$extra].width,this[In.$extra].height];return delete this[In.$extra],Rn.HTMLResult.success(Hs,qs)}}class ai extends Tn.XFAObject{constructor(qn){super(Nn,"assist",!0),this.id=qn.id||"",this.role=qn.role||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.speak=null,this.toolTip=null}[In.$toHTML](){var qn;return((qn=this.toolTip)==null?void 0:qn[In.$content])||null}}class Vn extends Tn.XFAObject{constructor(qn){super(Nn,"barcode",!0),this.charEncoding=(0,Rn.getKeyword)({data:qn.charEncoding?qn.charEncoding.toLowerCase():"",defaultValue:"",validate:Di=>["utf-8","big-five","fontspecific","gbk","gb-18030","gb-2312","ksc-5601","none","shift-jis","ucs-2","utf-16"].includes(Di)||Di.match(/iso-8859-\d{2}/)}),this.checksum=(0,Rn.getStringOption)(qn.checksum,["none","1mod10","1mod10_1mod11","2mod10","auto"]),this.dataColumnCount=(0,Rn.getInteger)({data:qn.dataColumnCount,defaultValue:-1,validate:Di=>Di>=0}),this.dataLength=(0,Rn.getInteger)({data:qn.dataLength,defaultValue:-1,validate:Di=>Di>=0}),this.dataPrep=(0,Rn.getStringOption)(qn.dataPrep,["none","flateCompress"]),this.dataRowCount=(0,Rn.getInteger)({data:qn.dataRowCount,defaultValue:-1,validate:Di=>Di>=0}),this.endChar=qn.endChar||"",this.errorCorrectionLevel=(0,Rn.getInteger)({data:qn.errorCorrectionLevel,defaultValue:-1,validate:Di=>Di>=0&&Di<=8}),this.id=qn.id||"",this.moduleHeight=(0,Rn.getMeasurement)(qn.moduleHeight,"5mm"),this.moduleWidth=(0,Rn.getMeasurement)(qn.moduleWidth,"0.25mm"),this.printCheckDigit=(0,Rn.getInteger)({data:qn.printCheckDigit,defaultValue:0,validate:Di=>Di===1}),this.rowColumnRatio=(0,Rn.getRatio)(qn.rowColumnRatio),this.startChar=qn.startChar||"",this.textLocation=(0,Rn.getStringOption)(qn.textLocation,["below","above","aboveEmbedded","belowEmbedded","none"]),this.truncate=(0,Rn.getInteger)({data:qn.truncate,defaultValue:0,validate:Di=>Di===1}),this.type=(0,Rn.getStringOption)(qn.type?qn.type.toLowerCase():"",["aztec","codabar","code2of5industrial","code2of5interleaved","code2of5matrix","code2of5standard","code3of9","code3of9extended","code11","code49","code93","code128","code128a","code128b","code128c","code128sscc","datamatrix","ean8","ean8add2","ean8add5","ean13","ean13add2","ean13add5","ean13pwcd","fim","logmars","maxicode","msi","pdf417","pdf417macro","plessey","postauscust2","postauscust3","postausreplypaid","postausstandard","postukrm4scc","postusdpbc","postusimb","postusstandard","postus5zip","qrcode","rfid","rss14","rss14expanded","rss14limited","rss14stacked","rss14stackedomni","rss14truncated","telepen","ucc128","ucc128random","ucc128sscc","upca","upcaadd2","upcaadd5","upcapwcd","upce","upceadd2","upceadd5","upcean2","upcean5","upsmaxicode"]),this.upsMode=(0,Rn.getStringOption)(qn.upsMode,["usCarrier","internationalCarrier","secureSymbol","standardSymbol"]),this.use=qn.use||"",this.usehref=qn.usehref||"",this.wideNarrowRatio=(0,Rn.getRatio)(qn.wideNarrowRatio),this.encrypt=null,this.extras=null}}class Yn extends Tn.XFAObject{constructor(qn){super(Nn,"bind",!0),this.match=(0,Rn.getStringOption)(qn.match,["once","dataRef","global","none"]),this.ref=qn.ref||"",this.picture=null}}class ci extends Tn.XFAObject{constructor(qn){super(Nn,"bindItems"),this.connection=qn.connection||"",this.labelRef=qn.labelRef||"",this.ref=qn.ref||"",this.valueRef=qn.valueRef||""}}Mn.BindItems=ci;class bi extends Tn.XFAObject{constructor(qn){super(Nn,"bookend"),this.id=qn.id||"",this.leader=qn.leader||"",this.trailer=qn.trailer||"",this.use=qn.use||"",this.usehref=qn.usehref||""}}class Ci extends Tn.Option01{constructor(qn){super(Nn,"boolean"),this.id=qn.id||"",this.name=qn.name||"",this.use=qn.use||"",this.usehref=qn.usehref||""}[In.$toHTML](qn){return ni(this[In.$content]===1?"1":"0")}}class Fi extends Tn.XFAObject{constructor(qn){super(Nn,"border",!0),this.break=(0,Rn.getStringOption)(qn.break,["close","open"]),this.hand=(0,Rn.getStringOption)(qn.hand,["even","left","right"]),this.id=qn.id||"",this.presence=(0,Rn.getStringOption)(qn.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,Rn.getRelevant)(qn.relevant),this.use=qn.use||"",this.usehref=qn.usehref||"",this.corner=new Tn.XFAObjectArray(4),this.edge=new Tn.XFAObjectArray(4),this.extras=null,this.fill=null,this.margin=null}[In.$getExtra](){if(!this[In.$extra]){const qn=this.edge.children.slice();if(qn.length<4){const Fs=qn.at(-1)||new Vi({});for(let Ps=qn.length;Ps<4;Ps++)qn.push(Fs)}const Di=qn.map(Fs=>Fs.thickness),ys=[0,0,0,0];this.margin&&(ys[0]=this.margin.topInset,ys[1]=this.margin.rightInset,ys[2]=this.margin.bottomInset,ys[3]=this.margin.leftInset),this[In.$extra]={widths:Di,insets:ys,edges:qn}}return this[In.$extra]}[In.$toStyle](){var Fs;const{edges:qn}=this[In.$getExtra](),Di=qn.map(Ps=>{const Hs=Ps[In.$toStyle]();return Hs.color||(Hs.color="#000000"),Hs}),ys=Object.create(null);if(this.margin&&Object.assign(ys,this.margin[In.$toStyle]()),((Fs=this.fill)==null?void 0:Fs.presence)==="visible"&&Object.assign(ys,this.fill[In.$toStyle]()),this.corner.children.some(Ps=>Ps.radius!==0)){const Ps=this.corner.children.map(Hs=>Hs[In.$toStyle]());if(Ps.length===2||Ps.length===3){const Hs=Ps.at(-1);for(let qs=Ps.length;qs<4;qs++)Ps.push(Hs)}ys.borderRadius=Ps.map(Hs=>Hs.radius).join(" ")}switch(this.presence){case"invisible":case"hidden":ys.borderStyle="";break;case"inactive":ys.borderStyle="none";break;default:ys.borderStyle=Di.map(Ps=>Ps.style).join(" ");break}return ys.borderWidth=Di.map(Ps=>Ps.width).join(" "),ys.borderColor=Di.map(Ps=>Ps.color).join(" "),ys}}class zi extends Tn.XFAObject{constructor(qn){super(Nn,"break",!0),this.after=(0,Rn.getStringOption)(qn.after,["auto","contentArea","pageArea","pageEven","pageOdd"]),this.afterTarget=qn.afterTarget||"",this.before=(0,Rn.getStringOption)(qn.before,["auto","contentArea","pageArea","pageEven","pageOdd"]),this.beforeTarget=qn.beforeTarget||"",this.bookendLeader=qn.bookendLeader||"",this.bookendTrailer=qn.bookendTrailer||"",this.id=qn.id||"",this.overflowLeader=qn.overflowLeader||"",this.overflowTarget=qn.overflowTarget||"",this.overflowTrailer=qn.overflowTrailer||"",this.startNew=(0,Rn.getInteger)({data:qn.startNew,defaultValue:0,validate:Di=>Di===1}),this.use=qn.use||"",this.usehref=qn.usehref||"",this.extras=null}}class _i extends Tn.XFAObject{constructor(qn){super(Nn,"breakAfter",!0),this.id=qn.id||"",this.leader=qn.leader||"",this.startNew=(0,Rn.getInteger)({data:qn.startNew,defaultValue:0,validate:Di=>Di===1}),this.target=qn.target||"",this.targetType=(0,Rn.getStringOption)(qn.targetType,["auto","contentArea","pageArea"]),this.trailer=qn.trailer||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.script=null}}class ji extends Tn.XFAObject{constructor(qn){super(Nn,"breakBefore",!0),this.id=qn.id||"",this.leader=qn.leader||"",this.startNew=(0,Rn.getInteger)({data:qn.startNew,defaultValue:0,validate:Di=>Di===1}),this.target=qn.target||"",this.targetType=(0,Rn.getStringOption)(qn.targetType,["auto","contentArea","pageArea"]),this.trailer=qn.trailer||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.script=null}[In.$toHTML](qn){return this[In.$extra]={},Rn.HTMLResult.FAILURE}}class Pi extends Tn.XFAObject{constructor(qn){super(Nn,"button",!0),this.highlight=(0,Rn.getStringOption)(qn.highlight,["inverted","none","outline","push"]),this.id=qn.id||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.extras=null}[In.$toHTML](qn){const ys=this[In.$getParent]()[In.$getParent](),Fs={name:"button",attributes:{id:this[In.$uid],class:["xfaButton"],style:{}},children:[]};for(const Ps of ys.event.children){if(Ps.activity!=="click"||!Ps.script)continue;const Hs=(0,ei.recoverJsURL)(Ps.script[In.$content]);if(!Hs)continue;const qs=(0,Cn.fixURL)(Hs.url);qs&&Fs.children.push({name:"a",attributes:{id:"link"+this[In.$uid],href:qs,newWindow:Hs.newWindow,class:["xfaLink"],style:{}},children:[]})}return Rn.HTMLResult.success(Fs)}}class Ni extends Tn.XFAObject{constructor(qn){super(Nn,"calculate",!0),this.id=qn.id||"",this.override=(0,Rn.getStringOption)(qn.override,["disabled","error","ignore","warning"]),this.use=qn.use||"",this.usehref=qn.usehref||"",this.extras=null,this.message=null,this.script=null}}class Si extends Tn.XFAObject{constructor(qn){super(Nn,"caption",!0),this.id=qn.id||"",this.placement=(0,Rn.getStringOption)(qn.placement,["left","bottom","inline","right","top"]),this.presence=(0,Rn.getStringOption)(qn.presence,["visible","hidden","inactive","invisible"]),this.reserve=Math.ceil((0,Rn.getMeasurement)(qn.reserve)),this.use=qn.use||"",this.usehref=qn.usehref||"",this.extras=null,this.font=null,this.margin=null,this.para=null,this.value=null}[In.$setValue](qn){Jn(this,qn)}[In.$getExtra](qn){if(!this[In.$extra]){let{width:Di,height:ys}=qn;switch(this.placement){case"left":case"right":case"inline":Di=this.reserve<=0?Di:this.reserve;break;case"top":case"bottom":ys=this.reserve<=0?ys:this.reserve;break}this[In.$extra]=(0,Cn.layoutNode)(this,{width:Di,height:ys})}return this[In.$extra]}[In.$toHTML](qn){if(!this.value)return Rn.HTMLResult.EMPTY;this[In.$pushPara]();const Di=this.value[In.$toHTML](qn).html;if(!Di)return this[In.$popPara](),Rn.HTMLResult.EMPTY;const ys=this.reserve;if(this.reserve<=0){const{w:Hs,h:qs}=this[In.$getExtra](qn);switch(this.placement){case"left":case"right":case"inline":this.reserve=Hs;break;case"top":case"bottom":this.reserve=qs;break}}const Fs=[];typeof Di=="string"?Fs.push({name:"#text",value:Di}):Fs.push(Di);const Ps=(0,Cn.toStyle)(this,"font","margin","visibility");switch(this.placement){case"left":case"right":this.reserve>0&&(Ps.width=(0,Cn.measureToString)(this.reserve));break;case"top":case"bottom":this.reserve>0&&(Ps.height=(0,Cn.measureToString)(this.reserve));break}return(0,Cn.setPara)(this,null,Di),this[In.$popPara](),this.reserve=ys,Rn.HTMLResult.success({name:"div",attributes:{style:Ps,class:["xfaCaption"]},children:Fs})}}class Ti extends Tn.StringObject{constructor(qn){super(Nn,"certificate"),this.id=qn.id||"",this.name=qn.name||"",this.use=qn.use||"",this.usehref=qn.usehref||""}}class Ri extends Tn.XFAObject{constructor(qn){super(Nn,"certificates",!0),this.credentialServerPolicy=(0,Rn.getStringOption)(qn.credentialServerPolicy,["optional","required"]),this.id=qn.id||"",this.url=qn.url||"",this.urlPolicy=qn.urlPolicy||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.encryption=null,this.issuers=null,this.keyUsage=null,this.oids=null,this.signing=null,this.subjectDNs=null}}class Mi extends Tn.XFAObject{constructor(qn){super(Nn,"checkButton",!0),this.id=qn.id||"",this.mark=(0,Rn.getStringOption)(qn.mark,["default","check","circle","cross","diamond","square","star"]),this.shape=(0,Rn.getStringOption)(qn.shape,["square","round"]),this.size=(0,Rn.getMeasurement)(qn.size,"10pt"),this.use=qn.use||"",this.usehref=qn.usehref||"",this.border=null,this.extras=null,this.margin=null}[In.$toHTML](qn){var Ea,Sa,Ua;const Di=(0,Cn.toStyle)("margin"),ys=(0,Cn.measureToString)(this.size);Di.width=Di.height=ys;let Fs,Ps,Hs;const qs=this[In.$getParent]()[In.$getParent](),Ks=qs.items.children.length&&qs.items.children[0][In.$toHTML]().html||[],ra={on:(Ks[0]!==void 0?Ks[0]:"on").toString(),off:(Ks[1]!==void 0?Ks[1]:"off").toString()},ba=(((Ea=qs.value)==null?void 0:Ea[In.$text]())||"off")===ra.on||void 0,ga=qs[In.$getSubformParent](),ya=qs[In.$uid];let Aa;ga instanceof ms?(Hs=ga[In.$uid],Fs="radio",Ps="xfaRadio",Aa=((Sa=ga[In.$data])==null?void 0:Sa[In.$uid])||ga[In.$uid]):(Fs="checkbox",Ps="xfaCheckbox",Aa=((Ua=qs[In.$data])==null?void 0:Ua[In.$uid])||qs[In.$uid]);const oa={name:"input",attributes:{class:[Ps],style:Di,fieldId:ya,dataId:Aa,type:Fs,checked:ba,xfaOn:ra.on,xfaOff:ra.off,"aria-label":Wn(qs),"aria-required":!1}};return Hs&&(oa.attributes.name=Hs),Zn(qs)&&(oa.attributes["aria-required"]=!0,oa.attributes.required=!0),Rn.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[oa]})}}class Ui extends Tn.XFAObject{constructor(qn){super(Nn,"choiceList",!0),this.commitOn=(0,Rn.getStringOption)(qn.commitOn,["select","exit"]),this.id=qn.id||"",this.open=(0,Rn.getStringOption)(qn.open,["userControl","always","multiSelect","onEntry"]),this.textEntry=(0,Rn.getInteger)({data:qn.textEntry,defaultValue:0,validate:Di=>Di===1}),this.use=qn.use||"",this.usehref=qn.usehref||"",this.border=null,this.extras=null,this.margin=null}[In.$toHTML](qn){var ra,ha,ba;const Di=(0,Cn.toStyle)(this,"border","margin"),Fs=this[In.$getParent]()[In.$getParent](),Hs={fontSize:`calc(${((ra=Fs.font)==null?void 0:ra.size)||10}px * var(--scale-factor))`},qs=[];if(Fs.items.children.length>0){const ga=Fs.items;let ya=0,Aa=0;ga.children.length===2&&(ya=ga.children[0].save,Aa=1-ya);const oa=ga.children[ya][In.$toHTML]().html,Ea=ga.children[Aa][In.$toHTML]().html;let Sa=!1;const Ua=((ha=Fs.value)==null?void 0:ha[In.$text]())||"";for(let Fa=0,ua=oa.length;Fa<ua;Fa++){const Ys={name:"option",attributes:{value:Ea[Fa]||oa[Fa],style:Hs},value:oa[Fa]};Ea[Fa]===Ua&&(Ys.attributes.selected=Sa=!0),qs.push(Ys)}Sa||qs.splice(0,0,{name:"option",attributes:{hidden:!0,selected:!0},value:" "})}const Ks={class:["xfaSelect"],fieldId:Fs[In.$uid],dataId:((ba=Fs[In.$data])==null?void 0:ba[In.$uid])||Fs[In.$uid],style:Di,"aria-label":Wn(Fs),"aria-required":!1};return Zn(Fs)&&(Ks["aria-required"]=!0,Ks.required=!0),this.open==="multiSelect"&&(Ks.multiple=!0),Rn.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[{name:"select",children:qs,attributes:Ks}]})}}class Hi extends Tn.XFAObject{constructor(qn){super(Nn,"color",!0),this.cSpace=(0,Rn.getStringOption)(qn.cSpace,["SRGB"]),this.id=qn.id||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.value=qn.value?(0,Rn.getColor)(qn.value):"",this.extras=null}[In.$hasSettableValue](){return!1}[In.$toStyle](){return this.value?ui.Util.makeHexColor(this.value.r,this.value.g,this.value.b):null}}class Li extends Tn.XFAObject{constructor(qn){super(Nn,"comb"),this.id=qn.id||"",this.numberOfCells=(0,Rn.getInteger)({data:qn.numberOfCells,defaultValue:0,validate:Di=>Di>=0}),this.use=qn.use||"",this.usehref=qn.usehref||""}}class Ei extends Tn.XFAObject{constructor(qn){super(Nn,"connect",!0),this.connection=qn.connection||"",this.id=qn.id||"",this.ref=qn.ref||"",this.usage=(0,Rn.getStringOption)(qn.usage,["exportAndImport","exportOnly","importOnly"]),this.use=qn.use||"",this.usehref=qn.usehref||"",this.picture=null}}class $i extends Tn.XFAObject{constructor(qn){super(Nn,"contentArea",!0),this.h=(0,Rn.getMeasurement)(qn.h),this.id=qn.id||"",this.name=qn.name||"",this.relevant=(0,Rn.getRelevant)(qn.relevant),this.use=qn.use||"",this.usehref=qn.usehref||"",this.w=(0,Rn.getMeasurement)(qn.w),this.x=(0,Rn.getMeasurement)(qn.x,"0pt"),this.y=(0,Rn.getMeasurement)(qn.y,"0pt"),this.desc=null,this.extras=null}[In.$toHTML](qn){const Di=(0,Cn.measureToString)(this.x),ys=(0,Cn.measureToString)(this.y),Fs={left:Di,top:ys,width:(0,Cn.measureToString)(this.w),height:(0,Cn.measureToString)(this.h)},Ps=["xfaContentarea"];return(0,Cn.isPrintOnly)(this)&&Ps.push("xfaPrintOnly"),Rn.HTMLResult.success({name:"div",children:[],attributes:{style:Fs,class:Ps,id:this[In.$uid]}})}}class Bi extends Tn.XFAObject{constructor(qn){super(Nn,"corner",!0),this.id=qn.id||"",this.inverted=(0,Rn.getInteger)({data:qn.inverted,defaultValue:0,validate:Di=>Di===1}),this.join=(0,Rn.getStringOption)(qn.join,["square","round"]),this.presence=(0,Rn.getStringOption)(qn.presence,["visible","hidden","inactive","invisible"]),this.radius=(0,Rn.getMeasurement)(qn.radius),this.stroke=(0,Rn.getStringOption)(qn.stroke,["solid","dashDot","dashDotDot","dashed","dotted","embossed","etched","lowered","raised"]),this.thickness=(0,Rn.getMeasurement)(qn.thickness,"0.5pt"),this.use=qn.use||"",this.usehref=qn.usehref||"",this.color=null,this.extras=null}[In.$toStyle](){const qn=(0,Cn.toStyle)(this,"visibility");return qn.radius=(0,Cn.measureToString)(this.join==="square"?0:this.radius),qn}}class Oi extends Tn.ContentObject{constructor(qn){super(Nn,"date"),this.id=qn.id||"",this.name=qn.name||"",this.use=qn.use||"",this.usehref=qn.usehref||""}[In.$finalize](){const qn=this[In.$content].trim();this[In.$content]=qn?new Date(qn):null}[In.$toHTML](qn){return ni(this[In.$content]?this[In.$content].toString():"")}}class Xi extends Tn.ContentObject{constructor(qn){super(Nn,"dateTime"),this.id=qn.id||"",this.name=qn.name||"",this.use=qn.use||"",this.usehref=qn.usehref||""}[In.$finalize](){const qn=this[In.$content].trim();this[In.$content]=qn?new Date(qn):null}[In.$toHTML](qn){return ni(this[In.$content]?this[In.$content].toString():"")}}class Gi extends Tn.XFAObject{constructor(qn){super(Nn,"dateTimeEdit",!0),this.hScrollPolicy=(0,Rn.getStringOption)(qn.hScrollPolicy,["auto","off","on"]),this.id=qn.id||"",this.picker=(0,Rn.getStringOption)(qn.picker,["host","none"]),this.use=qn.use||"",this.usehref=qn.usehref||"",this.border=null,this.comb=null,this.extras=null,this.margin=null}[In.$toHTML](qn){var Ps;const Di=(0,Cn.toStyle)(this,"border","font","margin"),ys=this[In.$getParent]()[In.$getParent](),Fs={name:"input",attributes:{type:"text",fieldId:ys[In.$uid],dataId:((Ps=ys[In.$data])==null?void 0:Ps[In.$uid])||ys[In.$uid],class:["xfaTextfield"],style:Di,"aria-label":Wn(ys),"aria-required":!1}};return Zn(ys)&&(Fs.attributes["aria-required"]=!0,Fs.attributes.required=!0),Rn.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[Fs]})}}class qi extends Tn.ContentObject{constructor(qn){super(Nn,"decimal"),this.fracDigits=(0,Rn.getInteger)({data:qn.fracDigits,defaultValue:2,validate:Di=>!0}),this.id=qn.id||"",this.leadDigits=(0,Rn.getInteger)({data:qn.leadDigits,defaultValue:-1,validate:Di=>!0}),this.name=qn.name||"",this.use=qn.use||"",this.usehref=qn.usehref||""}[In.$finalize](){const qn=parseFloat(this[In.$content].trim());this[In.$content]=isNaN(qn)?null:qn}[In.$toHTML](qn){return ni(this[In.$content]!==null?this[In.$content].toString():"")}}class ns extends Tn.XFAObject{constructor(qn){super(Nn,"defaultUi",!0),this.id=qn.id||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.extras=null}}class is extends Tn.XFAObject{constructor(qn){super(Nn,"desc",!0),this.id=qn.id||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.boolean=new Tn.XFAObjectArray,this.date=new Tn.XFAObjectArray,this.dateTime=new Tn.XFAObjectArray,this.decimal=new Tn.XFAObjectArray,this.exData=new Tn.XFAObjectArray,this.float=new Tn.XFAObjectArray,this.image=new Tn.XFAObjectArray,this.integer=new Tn.XFAObjectArray,this.text=new Tn.XFAObjectArray,this.time=new Tn.XFAObjectArray}}class as extends Tn.OptionObject{constructor(qn){super(Nn,"digestMethod",["","SHA1","SHA256","SHA512","RIPEMD160"]),this.id=qn.id||"",this.use=qn.use||"",this.usehref=qn.usehref||""}}class hs extends Tn.XFAObject{constructor(qn){super(Nn,"digestMethods",!0),this.id=qn.id||"",this.type=(0,Rn.getStringOption)(qn.type,["optional","required"]),this.use=qn.use||"",this.usehref=qn.usehref||"",this.digestMethod=new Tn.XFAObjectArray}}class Yi extends Tn.XFAObject{constructor(qn){super(Nn,"draw",!0),this.anchorType=(0,Rn.getStringOption)(qn.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,Rn.getInteger)({data:qn.colSpan,defaultValue:1,validate:Di=>Di>=1||Di===-1}),this.h=qn.h?(0,Rn.getMeasurement)(qn.h):"",this.hAlign=(0,Rn.getStringOption)(qn.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=qn.id||"",this.locale=qn.locale||"",this.maxH=(0,Rn.getMeasurement)(qn.maxH,"0pt"),this.maxW=(0,Rn.getMeasurement)(qn.maxW,"0pt"),this.minH=(0,Rn.getMeasurement)(qn.minH,"0pt"),this.minW=(0,Rn.getMeasurement)(qn.minW,"0pt"),this.name=qn.name||"",this.presence=(0,Rn.getStringOption)(qn.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,Rn.getRelevant)(qn.relevant),this.rotate=(0,Rn.getInteger)({data:qn.rotate,defaultValue:0,validate:Di=>Di%90===0}),this.use=qn.use||"",this.usehref=qn.usehref||"",this.w=qn.w?(0,Rn.getMeasurement)(qn.w):"",this.x=(0,Rn.getMeasurement)(qn.x,"0pt"),this.y=(0,Rn.getMeasurement)(qn.y,"0pt"),this.assist=null,this.border=null,this.caption=null,this.desc=null,this.extras=null,this.font=null,this.keep=null,this.margin=null,this.para=null,this.traversal=null,this.ui=null,this.value=null,this.setProperty=new Tn.XFAObjectArray}[In.$setValue](qn){Jn(this,qn)}[In.$toHTML](qn){if(Gn(this),this.presence==="hidden"||this.presence==="inactive")return Rn.HTMLResult.EMPTY;(0,Cn.fixDimensions)(this),this[In.$pushPara]();const Di=this.w,ys=this.h,{w:Fs,h:Ps,isBroken:Hs}=(0,Cn.layoutNode)(this,qn);if(Fs&&this.w===""){if(Hs&&this[In.$getSubformParent]()[In.$isThereMoreWidth]())return this[In.$popPara](),Rn.HTMLResult.FAILURE;this.w=Fs}if(Ps&&this.h===""&&(this.h=Ps),li(this),!(0,jn.checkDimensions)(this,qn))return this.w=Di,this.h=ys,this[In.$popPara](),Rn.HTMLResult.FAILURE;Ai(this);const qs=(0,Cn.toStyle)(this,"font","hAlign","dimensions","position","presence","rotate","anchorType","border","margin");(0,Cn.setMinMaxDimensions)(this,qs),qs.margin&&(qs.padding=qs.margin,delete qs.margin);const Ks=["xfaDraw"];this.font&&Ks.push("xfaFont"),(0,Cn.isPrintOnly)(this)&&Ks.push("xfaPrintOnly");const ra={style:qs,id:this[In.$uid],class:Ks};this.name&&(ra.xfaName=this.name);const ha={name:"div",attributes:ra,children:[]};mi(this,ra);const ba=(0,Cn.computeBbox)(this,ha,qn),ga=this.value?this.value[In.$toHTML](qn).html:null;return ga===null?(this.w=Di,this.h=ys,this[In.$popPara](),Rn.HTMLResult.success((0,Cn.createWrapper)(this,ha),ba)):(ha.children.push(ga),(0,Cn.setPara)(this,qs,ga),this.w=Di,this.h=ys,this[In.$popPara](),Rn.HTMLResult.success((0,Cn.createWrapper)(this,ha),ba))}}class Vi extends Tn.XFAObject{constructor(qn){super(Nn,"edge",!0),this.cap=(0,Rn.getStringOption)(qn.cap,["square","butt","round"]),this.id=qn.id||"",this.presence=(0,Rn.getStringOption)(qn.presence,["visible","hidden","inactive","invisible"]),this.stroke=(0,Rn.getStringOption)(qn.stroke,["solid","dashDot","dashDotDot","dashed","dotted","embossed","etched","lowered","raised"]),this.thickness=(0,Rn.getMeasurement)(qn.thickness,"0.5pt"),this.use=qn.use||"",this.usehref=qn.usehref||"",this.color=null,this.extras=null}[In.$toStyle](){const qn=(0,Cn.toStyle)(this,"visibility");if(Object.assign(qn,{linecap:this.cap,width:(0,Cn.measureToString)(this.thickness),color:this.color?this.color[In.$toStyle]():"#000000",style:""}),this.presence!=="visible")qn.style="none";else switch(this.stroke){case"solid":qn.style="solid";break;case"dashDot":qn.style="dashed";break;case"dashDotDot":qn.style="dashed";break;case"dashed":qn.style="dashed";break;case"dotted":qn.style="dotted";break;case"embossed":qn.style="ridge";break;case"etched":qn.style="groove";break;case"lowered":qn.style="inset";break;case"raised":qn.style="outset";break}return qn}}class Zi extends Tn.OptionObject{constructor(qn){super(Nn,"encoding",["adbe.x509.rsa_sha1","adbe.pkcs7.detached","adbe.pkcs7.sha1"]),this.id=qn.id||"",this.use=qn.use||"",this.usehref=qn.usehref||""}}class us extends Tn.XFAObject{constructor(qn){super(Nn,"encodings",!0),this.id=qn.id||"",this.type=(0,Rn.getStringOption)(qn.type,["optional","required"]),this.use=qn.use||"",this.usehref=qn.usehref||"",this.encoding=new Tn.XFAObjectArray}}class ts extends Tn.XFAObject{constructor(qn){super(Nn,"encrypt",!0),this.id=qn.id||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.certificate=null}}class es extends Tn.XFAObject{constructor(qn){super(Nn,"encryptData",!0),this.id=qn.id||"",this.operation=(0,Rn.getStringOption)(qn.operation,["encrypt","decrypt"]),this.target=qn.target||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.filter=null,this.manifest=null}}class rs extends Tn.XFAObject{constructor(qn){super(Nn,"encryption",!0),this.id=qn.id||"",this.type=(0,Rn.getStringOption)(qn.type,["optional","required"]),this.use=qn.use||"",this.usehref=qn.usehref||"",this.certificate=new Tn.XFAObjectArray}}class ss extends Tn.OptionObject{constructor(qn){super(Nn,"encryptionMethod",["","AES256-CBC","TRIPLEDES-CBC","AES128-CBC","AES192-CBC"]),this.id=qn.id||"",this.use=qn.use||"",this.usehref=qn.usehref||""}}class os extends Tn.XFAObject{constructor(qn){super(Nn,"encryptionMethods",!0),this.id=qn.id||"",this.type=(0,Rn.getStringOption)(qn.type,["optional","required"]),this.use=qn.use||"",this.usehref=qn.usehref||"",this.encryptionMethod=new Tn.XFAObjectArray}}class ks extends Tn.XFAObject{constructor(qn){super(Nn,"event",!0),this.activity=(0,Rn.getStringOption)(qn.activity,["click","change","docClose","docReady","enter","exit","full","indexChange","initialize","mouseDown","mouseEnter","mouseExit","mouseUp","postExecute","postOpen","postPrint","postSave","postSign","postSubmit","preExecute","preOpen","prePrint","preSave","preSign","preSubmit","ready","validationState"]),this.id=qn.id||"",this.listen=(0,Rn.getStringOption)(qn.listen,["refOnly","refAndDescendents"]),this.name=qn.name||"",this.ref=qn.ref||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.extras=null,this.encryptData=null,this.execute=null,this.script=null,this.signData=null,this.submit=null}}class xs extends Tn.ContentObject{constructor(qn){super(Nn,"exData"),this.contentType=qn.contentType||"",this.href=qn.href||"",this.id=qn.id||"",this.maxLength=(0,Rn.getInteger)({data:qn.maxLength,defaultValue:-1,validate:Di=>Di>=-1}),this.name=qn.name||"",this.rid=qn.rid||"",this.transferEncoding=(0,Rn.getStringOption)(qn.transferEncoding,["none","base64","package"]),this.use=qn.use||"",this.usehref=qn.usehref||""}[In.$isCDATAXml](){return this.contentType==="text/html"}[In.$onChild](qn){return this.contentType==="text/html"&&qn[In.$namespaceId]===Ln.NamespaceIds.xhtml.id?(this[In.$content]=qn,!0):this.contentType==="text/xml"?(this[In.$content]=qn,!0):!1}[In.$toHTML](qn){return this.contentType!=="text/html"||!this[In.$content]?Rn.HTMLResult.EMPTY:this[In.$content][In.$toHTML](qn)}}class Rs extends Tn.XFAObject{constructor(qn){super(Nn,"exObject",!0),this.archive=qn.archive||"",this.classId=qn.classId||"",this.codeBase=qn.codeBase||"",this.codeType=qn.codeType||"",this.id=qn.id||"",this.name=qn.name||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.extras=null,this.boolean=new Tn.XFAObjectArray,this.date=new Tn.XFAObjectArray,this.dateTime=new Tn.XFAObjectArray,this.decimal=new Tn.XFAObjectArray,this.exData=new Tn.XFAObjectArray,this.exObject=new Tn.XFAObjectArray,this.float=new Tn.XFAObjectArray,this.image=new Tn.XFAObjectArray,this.integer=new Tn.XFAObjectArray,this.text=new Tn.XFAObjectArray,this.time=new Tn.XFAObjectArray}}class ms extends Tn.XFAObject{constructor(qn){super(Nn,"exclGroup",!0),this.access=(0,Rn.getStringOption)(qn.access,["open","nonInteractive","protected","readOnly"]),this.accessKey=qn.accessKey||"",this.anchorType=(0,Rn.getStringOption)(qn.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,Rn.getInteger)({data:qn.colSpan,defaultValue:1,validate:Di=>Di>=1||Di===-1}),this.h=qn.h?(0,Rn.getMeasurement)(qn.h):"",this.hAlign=(0,Rn.getStringOption)(qn.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=qn.id||"",this.layout=(0,Rn.getStringOption)(qn.layout,["position","lr-tb","rl-row","rl-tb","row","table","tb"]),this.maxH=(0,Rn.getMeasurement)(qn.maxH,"0pt"),this.maxW=(0,Rn.getMeasurement)(qn.maxW,"0pt"),this.minH=(0,Rn.getMeasurement)(qn.minH,"0pt"),this.minW=(0,Rn.getMeasurement)(qn.minW,"0pt"),this.name=qn.name||"",this.presence=(0,Rn.getStringOption)(qn.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,Rn.getRelevant)(qn.relevant),this.use=qn.use||"",this.usehref=qn.usehref||"",this.w=qn.w?(0,Rn.getMeasurement)(qn.w):"",this.x=(0,Rn.getMeasurement)(qn.x,"0pt"),this.y=(0,Rn.getMeasurement)(qn.y,"0pt"),this.assist=null,this.bind=null,this.border=null,this.calculate=null,this.caption=null,this.desc=null,this.extras=null,this.margin=null,this.para=null,this.traversal=null,this.validate=null,this.connect=new Tn.XFAObjectArray,this.event=new Tn.XFAObjectArray,this.field=new Tn.XFAObjectArray,this.setProperty=new Tn.XFAObjectArray}[In.$isBindable](){return!0}[In.$hasSettableValue](){return!0}[In.$setValue](qn){for(const Di of this.field.children){if(!Di.value){const ys=new Io({});Di[In.$appendChild](ys),Di.value=ys}Di.value[In.$setValue](qn)}}[In.$isThereMoreWidth](){return this.layout.endsWith("-tb")&&this[In.$extra].attempt===0&&this[In.$extra].numberInLine>0||this[In.$getParent]()[In.$isThereMoreWidth]()}[In.$isSplittable](){var Di;const qn=this[In.$getSubformParent]();return qn[In.$isSplittable]()?this[In.$extra]._isSplittable!==void 0?this[In.$extra]._isSplittable:this.layout==="position"||this.layout.includes("row")?(this[In.$extra]._isSplittable=!1,!1):(Di=qn.layout)!=null&&Di.endsWith("-tb")&&qn[In.$extra].numberInLine!==0?!1:(this[In.$extra]._isSplittable=!0,!0):!1}[In.$flushHTML](){return(0,jn.flushHTML)(this)}[In.$addHTML](qn,Di){(0,jn.addHTML)(this,qn,Di)}[In.$getAvailableSpace](){return(0,jn.getAvailableSpace)(this)}[In.$toHTML](qn){if(Gn(this),this.presence==="hidden"||this.presence==="inactive"||this.h===0||this.w===0)return Rn.HTMLResult.EMPTY;(0,Cn.fixDimensions)(this);const Di=[],ys={id:this[In.$uid],class:[]};(0,Cn.setAccess)(this,ys.class),this[In.$extra]||(this[In.$extra]=Object.create(null)),Object.assign(this[In.$extra],{children:Di,attributes:ys,attempt:0,line:null,numberInLine:0,availableSpace:{width:Math.min(this.w||1/0,qn.width),height:Math.min(this.h||1/0,qn.height)},width:0,height:0,prevHeight:0,currentWidth:0});const Fs=this[In.$isSplittable]();if(Fs||li(this),!(0,jn.checkDimensions)(this,qn))return Rn.HTMLResult.FAILURE;const Ps=new Set(["field"]);if(this.layout.includes("row")){const Sa=this[In.$getSubformParent]().columnWidths;Array.isArray(Sa)&&Sa.length>0&&(this[In.$extra].columnWidths=Sa,this[In.$extra].currentColumn=0)}const Hs=(0,Cn.toStyle)(this,"anchorType","dimensions","position","presence","border","margin","hAlign"),qs=["xfaExclgroup"],Ks=(0,Cn.layoutClass)(this);Ks&&qs.push(Ks),(0,Cn.isPrintOnly)(this)&&qs.push("xfaPrintOnly"),ys.style=Hs,ys.class=qs,this.name&&(ys.xfaName=this.name),this[In.$pushPara]();const ra=this.layout==="lr-tb"||this.layout==="rl-tb",ha=ra?On:1;for(;this[In.$extra].attempt<ha;this[In.$extra].attempt++){ra&&this[In.$extra].attempt===On-1&&(this[In.$extra].numberInLine=0);const Sa=this[In.$childrenToHTML]({filter:Ps,include:!0});if(Sa.success)break;if(Sa.isBreak())return this[In.$popPara](),Sa;if(ra&&this[In.$extra].attempt===0&&this[In.$extra].numberInLine===0&&!this[In.$getTemplateRoot]()[In.$extra].noLayoutFailure){this[In.$extra].attempt=ha;break}}if(this[In.$popPara](),Fs||Ai(this),this[In.$extra].attempt===ha)return Fs||delete this[In.$extra],Rn.HTMLResult.FAILURE;let ba=0,ga=0;this.margin&&(ba=this.margin.leftInset+this.margin.rightInset,ga=this.margin.topInset+this.margin.bottomInset);const ya=Math.max(this[In.$extra].width+ba,this.w||0),Aa=Math.max(this[In.$extra].height+ga,this.h||0),oa=[this.x,this.y,ya,Aa];this.w===""&&(Hs.width=(0,Cn.measureToString)(ya)),this.h===""&&(Hs.height=(0,Cn.measureToString)(Aa));const Ea={name:"div",attributes:ys,children:Di};return mi(this,ys),delete this[In.$extra],Rn.HTMLResult.success((0,Cn.createWrapper)(this,Ea),oa)}}class Bs extends Tn.XFAObject{constructor(qn){super(Nn,"execute"),this.connection=qn.connection||"",this.executeType=(0,Rn.getStringOption)(qn.executeType,["import","remerge"]),this.id=qn.id||"",this.runAt=(0,Rn.getStringOption)(qn.runAt,["client","both","server"]),this.use=qn.use||"",this.usehref=qn.usehref||""}}class ws extends Tn.XFAObject{constructor(qn){super(Nn,"extras",!0),this.id=qn.id||"",this.name=qn.name||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.boolean=new Tn.XFAObjectArray,this.date=new Tn.XFAObjectArray,this.dateTime=new Tn.XFAObjectArray,this.decimal=new Tn.XFAObjectArray,this.exData=new Tn.XFAObjectArray,this.extras=new Tn.XFAObjectArray,this.float=new Tn.XFAObjectArray,this.image=new Tn.XFAObjectArray,this.integer=new Tn.XFAObjectArray,this.text=new Tn.XFAObjectArray,this.time=new Tn.XFAObjectArray}}class Ts extends Tn.XFAObject{constructor(qn){super(Nn,"field",!0),this.access=(0,Rn.getStringOption)(qn.access,["open","nonInteractive","protected","readOnly"]),this.accessKey=qn.accessKey||"",this.anchorType=(0,Rn.getStringOption)(qn.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,Rn.getInteger)({data:qn.colSpan,defaultValue:1,validate:Di=>Di>=1||Di===-1}),this.h=qn.h?(0,Rn.getMeasurement)(qn.h):"",this.hAlign=(0,Rn.getStringOption)(qn.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=qn.id||"",this.locale=qn.locale||"",this.maxH=(0,Rn.getMeasurement)(qn.maxH,"0pt"),this.maxW=(0,Rn.getMeasurement)(qn.maxW,"0pt"),this.minH=(0,Rn.getMeasurement)(qn.minH,"0pt"),this.minW=(0,Rn.getMeasurement)(qn.minW,"0pt"),this.name=qn.name||"",this.presence=(0,Rn.getStringOption)(qn.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,Rn.getRelevant)(qn.relevant),this.rotate=(0,Rn.getInteger)({data:qn.rotate,defaultValue:0,validate:Di=>Di%90===0}),this.use=qn.use||"",this.usehref=qn.usehref||"",this.w=qn.w?(0,Rn.getMeasurement)(qn.w):"",this.x=(0,Rn.getMeasurement)(qn.x,"0pt"),this.y=(0,Rn.getMeasurement)(qn.y,"0pt"),this.assist=null,this.bind=null,this.border=null,this.calculate=null,this.caption=null,this.desc=null,this.extras=null,this.font=null,this.format=null,this.items=new Tn.XFAObjectArray(2),this.keep=null,this.margin=null,this.para=null,this.traversal=null,this.ui=null,this.validate=null,this.value=null,this.bindItems=new Tn.XFAObjectArray,this.connect=new Tn.XFAObjectArray,this.event=new Tn.XFAObjectArray,this.setProperty=new Tn.XFAObjectArray}[In.$isBindable](){return!0}[In.$setValue](qn){Jn(this,qn)}[In.$toHTML](qn){var Sa,Ua,Fa;if(Gn(this),!this.ui){this.ui=new T0({}),this.ui[In.$globalData]=this[In.$globalData],this[In.$appendChild](this.ui);let ua;switch(this.items.children.length){case 0:ua=new ic({}),this.ui.textEdit=ua;break;case 1:ua=new Mi({}),this.ui.checkButton=ua;break;case 2:ua=new Ui({}),this.ui.choiceList=ua;break}this.ui[In.$appendChild](ua)}if(!this.ui||this.presence==="hidden"||this.presence==="inactive"||this.h===0||this.w===0)return Rn.HTMLResult.EMPTY;this.caption&&delete this.caption[In.$extra],this[In.$pushPara]();const Di=this.caption?this.caption[In.$toHTML](qn).html:null,ys=this.w,Fs=this.h;let Ps=0,Hs=0;this.margin&&(Ps=this.margin.leftInset+this.margin.rightInset,Hs=this.margin.topInset+this.margin.bottomInset);let qs=null;if(this.w===""||this.h===""){let ua=null,Ys=null,Qa=0,Xa=0;if(this.ui.checkButton)Qa=Xa=this.ui.checkButton.size;else{const{w:Br,h:ar}=(0,Cn.layoutNode)(this,qn);Br!==null?(Qa=Br,Xa=ar):Xa=(0,si.getMetrics)(this.font,!0).lineNoGap}if(qs=fi(this.ui[In.$getExtra]()),Qa+=qs.w,Xa+=qs.h,this.caption){const{w:Br,h:ar,isBroken:Ia}=this.caption[In.$getExtra](qn);if(Ia&&this[In.$getSubformParent]()[In.$isThereMoreWidth]())return this[In.$popPara](),Rn.HTMLResult.FAILURE;switch(ua=Br,Ys=ar,this.caption.placement){case"left":case"right":case"inline":ua+=Qa;break;case"top":case"bottom":Ys+=Xa;break}}else ua=Qa,Ys=Xa;ua&&this.w===""&&(ua+=Ps,this.w=Math.min(this.maxW<=0?1/0:this.maxW,this.minW+1<ua?ua:this.minW)),Ys&&this.h===""&&(Ys+=Hs,this.h=Math.min(this.maxH<=0?1/0:this.maxH,this.minH+1<Ys?Ys:this.minH))}if(this[In.$popPara](),(0,Cn.fixDimensions)(this),li(this),!(0,jn.checkDimensions)(this,qn))return this.w=ys,this.h=Fs,this[In.$popPara](),Rn.HTMLResult.FAILURE;Ai(this);const Ks=(0,Cn.toStyle)(this,"font","dimensions","position","rotate","anchorType","presence","margin","hAlign");(0,Cn.setMinMaxDimensions)(this,Ks);const ra=["xfaField"];this.font&&ra.push("xfaFont"),(0,Cn.isPrintOnly)(this)&&ra.push("xfaPrintOnly");const ha={style:Ks,id:this[In.$uid],class:ra};Ks.margin&&(Ks.padding=Ks.margin,delete Ks.margin),(0,Cn.setAccess)(this,ra),this.name&&(ha.xfaName=this.name);const ba=[],ga={name:"div",attributes:ha,children:ba};mi(this,ha);const ya=this.border?this.border[In.$toStyle]():null,Aa=(0,Cn.computeBbox)(this,ga,qn),oa=this.ui[In.$toHTML]().html;if(!oa)return Object.assign(Ks,ya),Rn.HTMLResult.success((0,Cn.createWrapper)(this,ga),Aa);this[In.$tabIndex]&&((Sa=oa.children)!=null&&Sa[0]?oa.children[0].attributes.tabindex=this[In.$tabIndex]:oa.attributes.tabindex=this[In.$tabIndex]),oa.attributes.style||(oa.attributes.style=Object.create(null));let Ea=null;if(this.ui.button?(oa.children.length===1&&([Ea]=oa.children.splice(0,1)),Object.assign(oa.attributes.style,ya)):Object.assign(Ks,ya),ba.push(oa),this.value){if(this.ui.imageEdit)oa.children.push(this.value[In.$toHTML]().html);else if(!this.ui.button){let ua="";if(this.value.exData)ua=this.value.exData[In.$text]();else if(this.value.text)ua=this.value.text[In.$getExtra]();else{const Ys=this.value[In.$toHTML]().html;Ys!==null&&(ua=Ys.children[0].value)}this.ui.textEdit&&((Ua=this.value.text)!=null&&Ua.maxChars)&&(oa.children[0].attributes.maxLength=this.value.text.maxChars),ua&&(this.ui.numericEdit&&(ua=parseFloat(ua),ua=isNaN(ua)?"":ua.toString()),oa.children[0].name==="textarea"?oa.children[0].attributes.textContent=ua:oa.children[0].attributes.value=ua)}}if(!this.ui.imageEdit&&((Fa=oa.children)!=null&&Fa[0])&&this.h){qs=qs||fi(this.ui[In.$getExtra]());let ua=0;if(this.caption&&["top","bottom"].includes(this.caption.placement)){ua=this.caption.reserve,ua<=0&&(ua=this.caption[In.$getExtra](qn).h);const Ys=this.h-ua-Hs-qs.h;oa.children[0].attributes.style.height=(0,Cn.measureToString)(Ys)}else oa.children[0].attributes.style.height="100%"}if(Ea&&oa.children.push(Ea),!Di)return oa.attributes.class&&oa.attributes.class.push("xfaLeft"),this.w=ys,this.h=Fs,Rn.HTMLResult.success((0,Cn.createWrapper)(this,ga),Aa);if(this.ui.button)return Ks.padding&&delete Ks.padding,Di.name==="div"&&(Di.name="span"),oa.children.push(Di),Rn.HTMLResult.success(ga,Aa);switch(this.ui.checkButton&&(Di.attributes.class[0]="xfaCaptionForCheckButton"),oa.attributes.class||(oa.attributes.class=[]),oa.children.splice(0,0,Di),this.caption.placement){case"left":oa.attributes.class.push("xfaLeft");break;case"right":oa.attributes.class.push("xfaRight");break;case"top":oa.attributes.class.push("xfaTop");break;case"bottom":oa.attributes.class.push("xfaBottom");break;case"inline":oa.attributes.class.push("xfaLeft");break}return this.w=ys,this.h=Fs,Rn.HTMLResult.success((0,Cn.createWrapper)(this,ga),Aa)}}Mn.Field=Ts;class Is extends Tn.XFAObject{constructor(qn){super(Nn,"fill",!0),this.id=qn.id||"",this.presence=(0,Rn.getStringOption)(qn.presence,["visible","hidden","inactive","invisible"]),this.use=qn.use||"",this.usehref=qn.usehref||"",this.color=null,this.extras=null,this.linear=null,this.pattern=null,this.radial=null,this.solid=null,this.stipple=null}[In.$toStyle](){var qs;const qn=this[In.$getParent](),ys=qn[In.$getParent]()[In.$getParent](),Fs=Object.create(null);let Ps="color",Hs=Ps;qn instanceof Fi&&(Ps="background-color",Hs="background",ys instanceof T0&&(Fs.backgroundColor="white")),(qn instanceof ia||qn instanceof xi)&&(Ps=Hs="fill",Fs.fill="white");for(const Ks of Object.getOwnPropertyNames(this)){if(Ks==="extras"||Ks==="color")continue;const ra=this[Ks];if(!(ra instanceof Tn.XFAObject))continue;const ha=ra[In.$toStyle](this.color);return ha&&(Fs[ha.startsWith("#")?Ps:Hs]=ha),Fs}if((qs=this.color)!=null&&qs.value){const Ks=this.color[In.$toStyle]();Fs[Ks.startsWith("#")?Ps:Hs]=Ks}return Fs}}class ls extends Tn.XFAObject{constructor(qn){super(Nn,"filter",!0),this.addRevocationInfo=(0,Rn.getStringOption)(qn.addRevocationInfo,["","required","optional","none"]),this.id=qn.id||"",this.name=qn.name||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.version=(0,Rn.getInteger)({data:this.version,defaultValue:5,validate:Di=>Di>=1&&Di<=5}),this.appearanceFilter=null,this.certificates=null,this.digestMethods=null,this.encodings=null,this.encryptionMethods=null,this.handler=null,this.lockDocument=null,this.mdp=null,this.reasons=null,this.timeStamp=null}}class Wi extends Tn.ContentObject{constructor(qn){super(Nn,"float"),this.id=qn.id||"",this.name=qn.name||"",this.use=qn.use||"",this.usehref=qn.usehref||""}[In.$finalize](){const qn=parseFloat(this[In.$content].trim());this[In.$content]=isNaN(qn)?null:qn}[In.$toHTML](qn){return ni(this[In.$content]!==null?this[In.$content].toString():"")}}class Ji extends Tn.XFAObject{constructor(qn){super(Nn,"font",!0),this.baselineShift=(0,Rn.getMeasurement)(qn.baselineShift),this.fontHorizontalScale=(0,Rn.getFloat)({data:qn.fontHorizontalScale,defaultValue:100,validate:Di=>Di>=0}),this.fontVerticalScale=(0,Rn.getFloat)({data:qn.fontVerticalScale,defaultValue:100,validate:Di=>Di>=0}),this.id=qn.id||"",this.kerningMode=(0,Rn.getStringOption)(qn.kerningMode,["none","pair"]),this.letterSpacing=(0,Rn.getMeasurement)(qn.letterSpacing,"0"),this.lineThrough=(0,Rn.getInteger)({data:qn.lineThrough,defaultValue:0,validate:Di=>Di===1||Di===2}),this.lineThroughPeriod=(0,Rn.getStringOption)(qn.lineThroughPeriod,["all","word"]),this.overline=(0,Rn.getInteger)({data:qn.overline,defaultValue:0,validate:Di=>Di===1||Di===2}),this.overlinePeriod=(0,Rn.getStringOption)(qn.overlinePeriod,["all","word"]),this.posture=(0,Rn.getStringOption)(qn.posture,["normal","italic"]),this.size=(0,Rn.getMeasurement)(qn.size,"10pt"),this.typeface=qn.typeface||"Courier",this.underline=(0,Rn.getInteger)({data:qn.underline,defaultValue:0,validate:Di=>Di===1||Di===2}),this.underlinePeriod=(0,Rn.getStringOption)(qn.underlinePeriod,["all","word"]),this.use=qn.use||"",this.usehref=qn.usehref||"",this.weight=(0,Rn.getStringOption)(qn.weight,["normal","bold"]),this.extras=null,this.fill=null}[In.$clean](qn){super[In.$clean](qn),this[In.$globalData].usedTypefaces.add(this.typeface)}[In.$toStyle](){const qn=(0,Cn.toStyle)(this,"fill"),Di=qn.color;return Di&&(Di==="#000000"?delete qn.color:Di.startsWith("#")||(qn.background=Di,qn.backgroundClip="text",qn.color="transparent")),this.baselineShift&&(qn.verticalAlign=(0,Cn.measureToString)(this.baselineShift)),qn.fontKerning=this.kerningMode==="none"?"none":"normal",qn.letterSpacing=(0,Cn.measureToString)(this.letterSpacing),this.lineThrough!==0&&(qn.textDecoration="line-through",this.lineThrough===2&&(qn.textDecorationStyle="double")),this.overline!==0&&(qn.textDecoration="overline",this.overline===2&&(qn.textDecorationStyle="double")),qn.fontStyle=this.posture,qn.fontSize=(0,Cn.measureToString)(.99*this.size),(0,Cn.setFontFamily)(this,this,this[In.$globalData].fontFinder,qn),this.underline!==0&&(qn.textDecoration="underline",this.underline===2&&(qn.textDecorationStyle="double")),qn.fontWeight=this.weight,qn}}class cs extends Tn.XFAObject{constructor(qn){super(Nn,"format",!0),this.id=qn.id||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.extras=null,this.picture=null}}class fs extends Tn.StringObject{constructor(qn){super(Nn,"handler"),this.id=qn.id||"",this.type=(0,Rn.getStringOption)(qn.type,["optional","required"]),this.use=qn.use||"",this.usehref=qn.usehref||""}}class ps extends Tn.XFAObject{constructor(qn){super(Nn,"hyphenation"),this.excludeAllCaps=(0,Rn.getInteger)({data:qn.excludeAllCaps,defaultValue:0,validate:Di=>Di===1}),this.excludeInitialCap=(0,Rn.getInteger)({data:qn.excludeInitialCap,defaultValue:0,validate:Di=>Di===1}),this.hyphenate=(0,Rn.getInteger)({data:qn.hyphenate,defaultValue:0,validate:Di=>Di===1}),this.id=qn.id||"",this.pushCharacterCount=(0,Rn.getInteger)({data:qn.pushCharacterCount,defaultValue:3,validate:Di=>Di>=0}),this.remainCharacterCount=(0,Rn.getInteger)({data:qn.remainCharacterCount,defaultValue:3,validate:Di=>Di>=0}),this.use=qn.use||"",this.usehref=qn.usehref||"",this.wordCharacterCount=(0,Rn.getInteger)({data:qn.wordCharacterCount,defaultValue:7,validate:Di=>Di>=0})}}class gs extends Tn.StringObject{constructor(qn){super(Nn,"image"),this.aspect=(0,Rn.getStringOption)(qn.aspect,["fit","actual","height","none","width"]),this.contentType=qn.contentType||"",this.href=qn.href||"",this.id=qn.id||"",this.name=qn.name||"",this.transferEncoding=(0,Rn.getStringOption)(qn.transferEncoding,["base64","none","package"]),this.use=qn.use||"",this.usehref=qn.usehref||""}[In.$toHTML](){if(this.contentType&&!ri.has(this.contentType.toLowerCase()))return Rn.HTMLResult.EMPTY;let qn=this[In.$globalData].images&&this[In.$globalData].images.get(this.href);if(!qn&&(this.href||!this[In.$content])||(!qn&&this.transferEncoding==="base64"&&(qn=(0,ui.stringToBytes)(atob(this[In.$content]))),!qn))return Rn.HTMLResult.EMPTY;if(!this.contentType){for(const[Ps,Hs]of di)if(qn.length>Ps.length&&Ps.every((qs,Ks)=>qs===qn[Ks])){this.contentType=Hs;break}if(!this.contentType)return Rn.HTMLResult.EMPTY}const Di=new Blob([qn],{type:this.contentType});let ys;switch(this.aspect){case"fit":case"actual":break;case"height":ys={height:"100%",objectFit:"fill"};break;case"none":ys={width:"100%",height:"100%",objectFit:"fill"};break;case"width":ys={width:"100%",objectFit:"fill"};break}const Fs=this[In.$getParent]();return Rn.HTMLResult.success({name:"img",attributes:{class:["xfaImage"],style:ys,src:URL.createObjectURL(Di),alt:Fs?Wn(Fs[In.$getParent]()):null}})}}class bs extends Tn.XFAObject{constructor(qn){super(Nn,"imageEdit",!0),this.data=(0,Rn.getStringOption)(qn.data,["link","embed"]),this.id=qn.id||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.border=null,this.extras=null,this.margin=null}[In.$toHTML](qn){return this.data==="embed"?Rn.HTMLResult.success({name:"div",children:[],attributes:{}}):Rn.HTMLResult.EMPTY}}class vs extends Tn.ContentObject{constructor(qn){super(Nn,"integer"),this.id=qn.id||"",this.name=qn.name||"",this.use=qn.use||"",this.usehref=qn.usehref||""}[In.$finalize](){const qn=parseInt(this[In.$content].trim(),10);this[In.$content]=isNaN(qn)?null:qn}[In.$toHTML](qn){return ni(this[In.$content]!==null?this[In.$content].toString():"")}}class _s extends Tn.XFAObject{constructor(qn){super(Nn,"issuers",!0),this.id=qn.id||"",this.type=(0,Rn.getStringOption)(qn.type,["optional","required"]),this.use=qn.use||"",this.usehref=qn.usehref||"",this.certificate=new Tn.XFAObjectArray}}class Us extends Tn.XFAObject{constructor(qn){super(Nn,"items",!0),this.id=qn.id||"",this.name=qn.name||"",this.presence=(0,Rn.getStringOption)(qn.presence,["visible","hidden","inactive","invisible"]),this.ref=qn.ref||"",this.save=(0,Rn.getInteger)({data:qn.save,defaultValue:0,validate:Di=>Di===1}),this.use=qn.use||"",this.usehref=qn.usehref||"",this.boolean=new Tn.XFAObjectArray,this.date=new Tn.XFAObjectArray,this.dateTime=new Tn.XFAObjectArray,this.decimal=new Tn.XFAObjectArray,this.exData=new Tn.XFAObjectArray,this.float=new Tn.XFAObjectArray,this.image=new Tn.XFAObjectArray,this.integer=new Tn.XFAObjectArray,this.text=new Tn.XFAObjectArray,this.time=new Tn.XFAObjectArray}[In.$toHTML](){const qn=[];for(const Di of this[In.$getChildren]())qn.push(Di[In.$text]());return Rn.HTMLResult.success(qn)}}Mn.Items=Us;class Ds extends Tn.XFAObject{constructor(qn){super(Nn,"keep",!0),this.id=qn.id||"";const Di=["none","contentArea","pageArea"];this.intact=(0,Rn.getStringOption)(qn.intact,Di),this.next=(0,Rn.getStringOption)(qn.next,Di),this.previous=(0,Rn.getStringOption)(qn.previous,Di),this.use=qn.use||"",this.usehref=qn.usehref||"",this.extras=null}}class Ms extends Tn.XFAObject{constructor(qn){super(Nn,"keyUsage");const Di=["","yes","no"];this.crlSign=(0,Rn.getStringOption)(qn.crlSign,Di),this.dataEncipherment=(0,Rn.getStringOption)(qn.dataEncipherment,Di),this.decipherOnly=(0,Rn.getStringOption)(qn.decipherOnly,Di),this.digitalSignature=(0,Rn.getStringOption)(qn.digitalSignature,Di),this.encipherOnly=(0,Rn.getStringOption)(qn.encipherOnly,Di),this.id=qn.id||"",this.keyAgreement=(0,Rn.getStringOption)(qn.keyAgreement,Di),this.keyCertSign=(0,Rn.getStringOption)(qn.keyCertSign,Di),this.keyEncipherment=(0,Rn.getStringOption)(qn.keyEncipherment,Di),this.nonRepudiation=(0,Rn.getStringOption)(qn.nonRepudiation,Di),this.type=(0,Rn.getStringOption)(qn.type,["optional","required"]),this.use=qn.use||"",this.usehref=qn.usehref||""}}class js extends Tn.XFAObject{constructor(qn){super(Nn,"line",!0),this.hand=(0,Rn.getStringOption)(qn.hand,["even","left","right"]),this.id=qn.id||"",this.slope=(0,Rn.getStringOption)(qn.slope,["\\","/"]),this.use=qn.use||"",this.usehref=qn.usehref||"",this.edge=null}[In.$toHTML](){const qn=this[In.$getParent]()[In.$getParent](),Di=this.edge||new Vi({}),ys=Di[In.$toStyle](),Fs=Object.create(null),Ps=Di.presence==="visible"?Di.thickness:0;Fs.strokeWidth=(0,Cn.measureToString)(Ps),Fs.stroke=ys.color;let Hs,qs,Ks,ra,ha="100%",ba="100%";qn.w<=Ps?([Hs,qs,Ks,ra]=["50%",0,"50%","100%"],ha=Fs.strokeWidth):qn.h<=Ps?([Hs,qs,Ks,ra]=[0,"50%","100%","50%"],ba=Fs.strokeWidth):this.slope==="\\"?[Hs,qs,Ks,ra]=[0,0,"100%","100%"]:[Hs,qs,Ks,ra]=[0,"100%","100%",0];const ya={name:"svg",children:[{name:"line",attributes:{xmlns:Hn,x1:Hs,y1:qs,x2:Ks,y2:ra,style:Fs}}],attributes:{xmlns:Hn,width:ha,height:ba,style:{overflow:"visible"}}};return wi(qn)?Rn.HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[ya]}):(ya.attributes.style.position="absolute",Rn.HTMLResult.success(ya))}}class Vs extends Tn.XFAObject{constructor(qn){super(Nn,"linear",!0),this.id=qn.id||"",this.type=(0,Rn.getStringOption)(qn.type,["toRight","toBottom","toLeft","toTop"]),this.use=qn.use||"",this.usehref=qn.usehref||"",this.color=null,this.extras=null}[In.$toStyle](qn){qn=qn?qn[In.$toStyle]():"#FFFFFF";const Di=this.type.replace(/([RBLT])/," $1").toLowerCase(),ys=this.color?this.color[In.$toStyle]():"#000000";return`linear-gradient(${Di}, ${qn}, ${ys})`}}class Ss extends Tn.ContentObject{constructor(qn){super(Nn,"lockDocument"),this.id=qn.id||"",this.type=(0,Rn.getStringOption)(qn.type,["optional","required"]),this.use=qn.use||"",this.usehref=qn.usehref||""}[In.$finalize](){this[In.$content]=(0,Rn.getStringOption)(this[In.$content],["auto","0","1"])}}class As extends Tn.XFAObject{constructor(qn){super(Nn,"manifest",!0),this.action=(0,Rn.getStringOption)(qn.action,["include","all","exclude"]),this.id=qn.id||"",this.name=qn.name||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.extras=null,this.ref=new Tn.XFAObjectArray}}class Es extends Tn.XFAObject{constructor(qn){super(Nn,"margin",!0),this.bottomInset=(0,Rn.getMeasurement)(qn.bottomInset,"0"),this.id=qn.id||"",this.leftInset=(0,Rn.getMeasurement)(qn.leftInset,"0"),this.rightInset=(0,Rn.getMeasurement)(qn.rightInset,"0"),this.topInset=(0,Rn.getMeasurement)(qn.topInset,"0"),this.use=qn.use||"",this.usehref=qn.usehref||"",this.extras=null}[In.$toStyle](){return{margin:(0,Cn.measureToString)(this.topInset)+" "+(0,Cn.measureToString)(this.rightInset)+" "+(0,Cn.measureToString)(this.bottomInset)+" "+(0,Cn.measureToString)(this.leftInset)}}}class Os extends Tn.XFAObject{constructor(qn){super(Nn,"mdp"),this.id=qn.id||"",this.permissions=(0,Rn.getInteger)({data:qn.permissions,defaultValue:2,validate:Di=>Di===1||Di===3}),this.signatureType=(0,Rn.getStringOption)(qn.signatureType,["filler","author"]),this.use=qn.use||"",this.usehref=qn.usehref||""}}class $s extends Tn.XFAObject{constructor(qn){super(Nn,"medium"),this.id=qn.id||"",this.imagingBBox=(0,Rn.getBBox)(qn.imagingBBox),this.long=(0,Rn.getMeasurement)(qn.long),this.orientation=(0,Rn.getStringOption)(qn.orientation,["portrait","landscape"]),this.short=(0,Rn.getMeasurement)(qn.short),this.stock=qn.stock||"",this.trayIn=(0,Rn.getStringOption)(qn.trayIn,["auto","delegate","pageFront"]),this.trayOut=(0,Rn.getStringOption)(qn.trayOut,["auto","delegate"]),this.use=qn.use||"",this.usehref=qn.usehref||""}}class Ws extends Tn.XFAObject{constructor(qn){super(Nn,"message",!0),this.id=qn.id||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.text=new Tn.XFAObjectArray}}class Ns extends Tn.XFAObject{constructor(qn){super(Nn,"numericEdit",!0),this.hScrollPolicy=(0,Rn.getStringOption)(qn.hScrollPolicy,["auto","off","on"]),this.id=qn.id||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.border=null,this.comb=null,this.extras=null,this.margin=null}[In.$toHTML](qn){var Ps;const Di=(0,Cn.toStyle)(this,"border","font","margin"),ys=this[In.$getParent]()[In.$getParent](),Fs={name:"input",attributes:{type:"text",fieldId:ys[In.$uid],dataId:((Ps=ys[In.$data])==null?void 0:Ps[In.$uid])||ys[In.$uid],class:["xfaTextfield"],style:Di,"aria-label":Wn(ys),"aria-required":!1}};return Zn(ys)&&(Fs.attributes["aria-required"]=!0,Fs.attributes.required=!0),Rn.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[Fs]})}}class Ls extends Tn.XFAObject{constructor(qn){super(Nn,"occur",!0),this.id=qn.id||"",this.initial=qn.initial!==""?(0,Rn.getInteger)({data:qn.initial,defaultValue:"",validate:Di=>!0}):"",this.max=qn.max!==""?(0,Rn.getInteger)({data:qn.max,defaultValue:1,validate:Di=>!0}):"",this.min=qn.min!==""?(0,Rn.getInteger)({data:qn.min,defaultValue:1,validate:Di=>!0}):"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.extras=null}[In.$clean](){const qn=this[In.$getParent](),Di=this.min;this.min===""&&(this.min=qn instanceof Js||qn instanceof Zs?0:1),this.max===""&&(Di===""?this.max=qn instanceof Js||qn instanceof Zs?-1:1:this.max=this.min),this.max!==-1&&this.max<this.min&&(this.max=this.min),this.initial===""&&(this.initial=qn instanceof C0?1:this.min)}}class zs extends Tn.StringObject{constructor(qn){super(Nn,"oid"),this.id=qn.id||"",this.name=qn.name||"",this.use=qn.use||"",this.usehref=qn.usehref||""}}class Qs extends Tn.XFAObject{constructor(qn){super(Nn,"oids",!0),this.id=qn.id||"",this.type=(0,Rn.getStringOption)(qn.type,["optional","required"]),this.use=qn.use||"",this.usehref=qn.usehref||"",this.oid=new Tn.XFAObjectArray}}class ca extends Tn.XFAObject{constructor(qn){super(Nn,"overflow"),this.id=qn.id||"",this.leader=qn.leader||"",this.target=qn.target||"",this.trailer=qn.trailer||"",this.use=qn.use||"",this.usehref=qn.usehref||""}[In.$getExtra](){if(!this[In.$extra]){const qn=this[In.$getParent](),Di=this[In.$getTemplateRoot](),ys=Di[In.$searchNode](this.target,qn),Fs=Di[In.$searchNode](this.leader,qn),Ps=Di[In.$searchNode](this.trailer,qn);this[In.$extra]={target:(ys==null?void 0:ys[0])||null,leader:(Fs==null?void 0:Fs[0])||null,trailer:(Ps==null?void 0:Ps[0])||null,addLeader:!1,addTrailer:!1}}return this[In.$extra]}}class Js extends Tn.XFAObject{constructor(qn){super(Nn,"pageArea",!0),this.blankOrNotBlank=(0,Rn.getStringOption)(qn.blankOrNotBlank,["any","blank","notBlank"]),this.id=qn.id||"",this.initialNumber=(0,Rn.getInteger)({data:qn.initialNumber,defaultValue:1,validate:Di=>!0}),this.name=qn.name||"",this.numbered=(0,Rn.getInteger)({data:qn.numbered,defaultValue:1,validate:Di=>!0}),this.oddOrEven=(0,Rn.getStringOption)(qn.oddOrEven,["any","even","odd"]),this.pagePosition=(0,Rn.getStringOption)(qn.pagePosition,["any","first","last","only","rest"]),this.relevant=(0,Rn.getRelevant)(qn.relevant),this.use=qn.use||"",this.usehref=qn.usehref||"",this.desc=null,this.extras=null,this.medium=null,this.occur=null,this.area=new Tn.XFAObjectArray,this.contentArea=new Tn.XFAObjectArray,this.draw=new Tn.XFAObjectArray,this.exclGroup=new Tn.XFAObjectArray,this.field=new Tn.XFAObjectArray,this.subform=new Tn.XFAObjectArray}[In.$isUsable](){return this[In.$extra]?!this.occur||this.occur.max===-1||this[In.$extra].numberOfUse<this.occur.max:(this[In.$extra]={numberOfUse:0},!0)}[In.$cleanPage](){delete this[In.$extra]}[In.$getNextPage](){this[In.$extra]||(this[In.$extra]={numberOfUse:0});const qn=this[In.$getParent]();return qn.relation==="orderedOccurrence"&&this[In.$isUsable]()?(this[In.$extra].numberOfUse+=1,this):qn[In.$getNextPage]()}[In.$getAvailableSpace](){return this[In.$extra].space||{width:0,height:0}}[In.$toHTML](){this[In.$extra]||(this[In.$extra]={numberOfUse:1});const qn=[];this[In.$extra].children=qn;const Di=Object.create(null);if(this.medium&&this.medium.short&&this.medium.long){if(Di.width=(0,Cn.measureToString)(this.medium.short),Di.height=(0,Cn.measureToString)(this.medium.long),this[In.$extra].space={width:this.medium.short,height:this.medium.long},this.medium.orientation==="landscape"){const ys=Di.width;Di.width=Di.height,Di.height=ys,this[In.$extra].space={width:this.medium.long,height:this.medium.short}}}else(0,ui.warn)("XFA - No medium specified in pageArea: please file a bug.");return this[In.$childrenToHTML]({filter:new Set(["area","draw","field","subform"]),include:!0}),this[In.$childrenToHTML]({filter:new Set(["contentArea"]),include:!0}),Rn.HTMLResult.success({name:"div",children:qn,attributes:{class:["xfaPage"],id:this[In.$uid],style:Di,xfaName:this.name}})}}class Zs extends Tn.XFAObject{constructor(qn){super(Nn,"pageSet",!0),this.duplexImposition=(0,Rn.getStringOption)(qn.duplexImposition,["longEdge","shortEdge"]),this.id=qn.id||"",this.name=qn.name||"",this.relation=(0,Rn.getStringOption)(qn.relation,["orderedOccurrence","duplexPaginated","simplexPaginated"]),this.relevant=(0,Rn.getRelevant)(qn.relevant),this.use=qn.use||"",this.usehref=qn.usehref||"",this.extras=null,this.occur=null,this.pageArea=new Tn.XFAObjectArray,this.pageSet=new Tn.XFAObjectArray}[In.$cleanPage](){for(const qn of this.pageArea.children)qn[In.$cleanPage]();for(const qn of this.pageSet.children)qn[In.$cleanPage]()}[In.$isUsable](){return!this.occur||this.occur.max===-1||this[In.$extra].numberOfUse<this.occur.max}[In.$getNextPage](){if(this[In.$extra]||(this[In.$extra]={numberOfUse:1,pageIndex:-1,pageSetIndex:-1}),this.relation==="orderedOccurrence"){if(this[In.$extra].pageIndex+1<this.pageArea.children.length)return this[In.$extra].pageIndex+=1,this.pageArea.children[this[In.$extra].pageIndex][In.$getNextPage]();if(this[In.$extra].pageSetIndex+1<this.pageSet.children.length)return this[In.$extra].pageSetIndex+=1,this.pageSet.children[this[In.$extra].pageSetIndex][In.$getNextPage]();if(this[In.$isUsable]())return this[In.$extra].numberOfUse+=1,this[In.$extra].pageIndex=-1,this[In.$extra].pageSetIndex=-1,this[In.$getNextPage]();const Ps=this[In.$getParent]();return Ps instanceof Zs?Ps[In.$getNextPage]():(this[In.$cleanPage](),this[In.$getNextPage]())}const qn=this[In.$getTemplateRoot]()[In.$extra].pageNumber,Di=qn%2===0?"even":"odd",ys=qn===0?"first":"rest";let Fs=this.pageArea.children.find(Ps=>Ps.oddOrEven===Di&&Ps.pagePosition===ys);return Fs||(Fs=this.pageArea.children.find(Ps=>Ps.oddOrEven==="any"&&Ps.pagePosition===ys),Fs)||(Fs=this.pageArea.children.find(Ps=>Ps.oddOrEven==="any"&&Ps.pagePosition==="any"),Fs)?Fs:this.pageArea.children[0]}}class aa extends Tn.XFAObject{constructor(qn){super(Nn,"para",!0),this.hAlign=(0,Rn.getStringOption)(qn.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=qn.id||"",this.lineHeight=qn.lineHeight?(0,Rn.getMeasurement)(qn.lineHeight,"0pt"):"",this.marginLeft=qn.marginLeft?(0,Rn.getMeasurement)(qn.marginLeft,"0pt"):"",this.marginRight=qn.marginRight?(0,Rn.getMeasurement)(qn.marginRight,"0pt"):"",this.orphans=(0,Rn.getInteger)({data:qn.orphans,defaultValue:0,validate:Di=>Di>=0}),this.preserve=qn.preserve||"",this.radixOffset=qn.radixOffset?(0,Rn.getMeasurement)(qn.radixOffset,"0pt"):"",this.spaceAbove=qn.spaceAbove?(0,Rn.getMeasurement)(qn.spaceAbove,"0pt"):"",this.spaceBelow=qn.spaceBelow?(0,Rn.getMeasurement)(qn.spaceBelow,"0pt"):"",this.tabDefault=qn.tabDefault?(0,Rn.getMeasurement)(this.tabDefault):"",this.tabStops=(qn.tabStops||"").trim().split(/\s+/).map((Di,ys)=>ys%2===1?(0,Rn.getMeasurement)(Di):Di),this.textIndent=qn.textIndent?(0,Rn.getMeasurement)(qn.textIndent,"0pt"):"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.vAlign=(0,Rn.getStringOption)(qn.vAlign,["top","bottom","middle"]),this.widows=(0,Rn.getInteger)({data:qn.widows,defaultValue:0,validate:Di=>Di>=0}),this.hyphenation=null}[In.$toStyle](){const qn=(0,Cn.toStyle)(this,"hAlign");return this.marginLeft!==""&&(qn.paddingLeft=(0,Cn.measureToString)(this.marginLeft)),this.marginRight!==""&&(qn.paddingight=(0,Cn.measureToString)(this.marginRight)),this.spaceAbove!==""&&(qn.paddingTop=(0,Cn.measureToString)(this.spaceAbove)),this.spaceBelow!==""&&(qn.paddingBottom=(0,Cn.measureToString)(this.spaceBelow)),this.textIndent!==""&&(qn.textIndent=(0,Cn.measureToString)(this.textIndent),(0,Cn.fixTextIndent)(qn)),this.lineHeight>0&&(qn.lineHeight=(0,Cn.measureToString)(this.lineHeight)),this.tabDefault!==""&&(qn.tabSize=(0,Cn.measureToString)(this.tabDefault)),this.tabStops.length>0,this.hyphenatation&&Object.assign(qn,this.hyphenatation[In.$toStyle]()),qn}}class Gs extends Tn.XFAObject{constructor(qn){super(Nn,"passwordEdit",!0),this.hScrollPolicy=(0,Rn.getStringOption)(qn.hScrollPolicy,["auto","off","on"]),this.id=qn.id||"",this.passwordChar=qn.passwordChar||"*",this.use=qn.use||"",this.usehref=qn.usehref||"",this.border=null,this.extras=null,this.margin=null}}class ea extends Tn.XFAObject{constructor(qn){super(Nn,"pattern",!0),this.id=qn.id||"",this.type=(0,Rn.getStringOption)(qn.type,["crossHatch","crossDiagonal","diagonalLeft","diagonalRight","horizontal","vertical"]),this.use=qn.use||"",this.usehref=qn.usehref||"",this.color=null,this.extras=null}[In.$toStyle](qn){qn=qn?qn[In.$toStyle]():"#FFFFFF";const Di=this.color?this.color[In.$toStyle]():"#000000",ys=5,Fs="repeating-linear-gradient",Ps=`${qn},${qn} ${ys}px,${Di} ${ys}px,${Di} ${2*ys}px`;switch(this.type){case"crossHatch":return`${Fs}(to top,${Ps}) ${Fs}(to right,${Ps})`;case"crossDiagonal":return`${Fs}(45deg,${Ps}) ${Fs}(-45deg,${Ps})`;case"diagonalLeft":return`${Fs}(45deg,${Ps})`;case"diagonalRight":return`${Fs}(-45deg,${Ps})`;case"horizontal":return`${Fs}(to top,${Ps})`;case"vertical":return`${Fs}(to right,${Ps})`}return""}}class Xs extends Tn.StringObject{constructor(qn){super(Nn,"picture"),this.id=qn.id||"",this.use=qn.use||"",this.usehref=qn.usehref||""}}class sa extends Tn.XFAObject{constructor(qn){super(Nn,"proto",!0),this.appearanceFilter=new Tn.XFAObjectArray,this.arc=new Tn.XFAObjectArray,this.area=new Tn.XFAObjectArray,this.assist=new Tn.XFAObjectArray,this.barcode=new Tn.XFAObjectArray,this.bindItems=new Tn.XFAObjectArray,this.bookend=new Tn.XFAObjectArray,this.boolean=new Tn.XFAObjectArray,this.border=new Tn.XFAObjectArray,this.break=new Tn.XFAObjectArray,this.breakAfter=new Tn.XFAObjectArray,this.breakBefore=new Tn.XFAObjectArray,this.button=new Tn.XFAObjectArray,this.calculate=new Tn.XFAObjectArray,this.caption=new Tn.XFAObjectArray,this.certificate=new Tn.XFAObjectArray,this.certificates=new Tn.XFAObjectArray,this.checkButton=new Tn.XFAObjectArray,this.choiceList=new Tn.XFAObjectArray,this.color=new Tn.XFAObjectArray,this.comb=new Tn.XFAObjectArray,this.connect=new Tn.XFAObjectArray,this.contentArea=new Tn.XFAObjectArray,this.corner=new Tn.XFAObjectArray,this.date=new Tn.XFAObjectArray,this.dateTime=new Tn.XFAObjectArray,this.dateTimeEdit=new Tn.XFAObjectArray,this.decimal=new Tn.XFAObjectArray,this.defaultUi=new Tn.XFAObjectArray,this.desc=new Tn.XFAObjectArray,this.digestMethod=new Tn.XFAObjectArray,this.digestMethods=new Tn.XFAObjectArray,this.draw=new Tn.XFAObjectArray,this.edge=new Tn.XFAObjectArray,this.encoding=new Tn.XFAObjectArray,this.encodings=new Tn.XFAObjectArray,this.encrypt=new Tn.XFAObjectArray,this.encryptData=new Tn.XFAObjectArray,this.encryption=new Tn.XFAObjectArray,this.encryptionMethod=new Tn.XFAObjectArray,this.encryptionMethods=new Tn.XFAObjectArray,this.event=new Tn.XFAObjectArray,this.exData=new Tn.XFAObjectArray,this.exObject=new Tn.XFAObjectArray,this.exclGroup=new Tn.XFAObjectArray,this.execute=new Tn.XFAObjectArray,this.extras=new Tn.XFAObjectArray,this.field=new Tn.XFAObjectArray,this.fill=new Tn.XFAObjectArray,this.filter=new Tn.XFAObjectArray,this.float=new Tn.XFAObjectArray,this.font=new Tn.XFAObjectArray,this.format=new Tn.XFAObjectArray,this.handler=new Tn.XFAObjectArray,this.hyphenation=new Tn.XFAObjectArray,this.image=new Tn.XFAObjectArray,this.imageEdit=new Tn.XFAObjectArray,this.integer=new Tn.XFAObjectArray,this.issuers=new Tn.XFAObjectArray,this.items=new Tn.XFAObjectArray,this.keep=new Tn.XFAObjectArray,this.keyUsage=new Tn.XFAObjectArray,this.line=new Tn.XFAObjectArray,this.linear=new Tn.XFAObjectArray,this.lockDocument=new Tn.XFAObjectArray,this.manifest=new Tn.XFAObjectArray,this.margin=new Tn.XFAObjectArray,this.mdp=new Tn.XFAObjectArray,this.medium=new Tn.XFAObjectArray,this.message=new Tn.XFAObjectArray,this.numericEdit=new Tn.XFAObjectArray,this.occur=new Tn.XFAObjectArray,this.oid=new Tn.XFAObjectArray,this.oids=new Tn.XFAObjectArray,this.overflow=new Tn.XFAObjectArray,this.pageArea=new Tn.XFAObjectArray,this.pageSet=new Tn.XFAObjectArray,this.para=new Tn.XFAObjectArray,this.passwordEdit=new Tn.XFAObjectArray,this.pattern=new Tn.XFAObjectArray,this.picture=new Tn.XFAObjectArray,this.radial=new Tn.XFAObjectArray,this.reason=new Tn.XFAObjectArray,this.reasons=new Tn.XFAObjectArray,this.rectangle=new Tn.XFAObjectArray,this.ref=new Tn.XFAObjectArray,this.script=new Tn.XFAObjectArray,this.setProperty=new Tn.XFAObjectArray,this.signData=new Tn.XFAObjectArray,this.signature=new Tn.XFAObjectArray,this.signing=new Tn.XFAObjectArray,this.solid=new Tn.XFAObjectArray,this.speak=new Tn.XFAObjectArray,this.stipple=new Tn.XFAObjectArray,this.subform=new Tn.XFAObjectArray,this.subformSet=new Tn.XFAObjectArray,this.subjectDN=new Tn.XFAObjectArray,this.subjectDNs=new Tn.XFAObjectArray,this.submit=new Tn.XFAObjectArray,this.text=new Tn.XFAObjectArray,this.textEdit=new Tn.XFAObjectArray,this.time=new Tn.XFAObjectArray,this.timeStamp=new Tn.XFAObjectArray,this.toolTip=new Tn.XFAObjectArray,this.traversal=new Tn.XFAObjectArray,this.traverse=new Tn.XFAObjectArray,this.ui=new Tn.XFAObjectArray,this.validate=new Tn.XFAObjectArray,this.value=new Tn.XFAObjectArray,this.variables=new Tn.XFAObjectArray}}class la extends Tn.XFAObject{constructor(qn){super(Nn,"radial",!0),this.id=qn.id||"",this.type=(0,Rn.getStringOption)(qn.type,["toEdge","toCenter"]),this.use=qn.use||"",this.usehref=qn.usehref||"",this.color=null,this.extras=null}[In.$toStyle](qn){qn=qn?qn[In.$toStyle]():"#FFFFFF";const Di=this.color?this.color[In.$toStyle]():"#000000";return`radial-gradient(circle at center, ${this.type==="toEdge"?`${qn},${Di}`:`${Di},${qn}`})`}}class va extends Tn.StringObject{constructor(qn){super(Nn,"reason"),this.id=qn.id||"",this.name=qn.name||"",this.use=qn.use||"",this.usehref=qn.usehref||""}}class na extends Tn.XFAObject{constructor(qn){super(Nn,"reasons",!0),this.id=qn.id||"",this.type=(0,Rn.getStringOption)(qn.type,["optional","required"]),this.use=qn.use||"",this.usehref=qn.usehref||"",this.reason=new Tn.XFAObjectArray}}class ia extends Tn.XFAObject{constructor(qn){super(Nn,"rectangle",!0),this.hand=(0,Rn.getStringOption)(qn.hand,["even","left","right"]),this.id=qn.id||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.corner=new Tn.XFAObjectArray(4),this.edge=new Tn.XFAObjectArray(4),this.fill=null}[In.$toHTML](){var ra;const qn=this.edge.children.length?this.edge.children[0]:new Vi({}),Di=qn[In.$toStyle](),ys=Object.create(null);((ra=this.fill)==null?void 0:ra.presence)==="visible"?Object.assign(ys,this.fill[In.$toStyle]()):ys.fill="transparent",ys.strokeWidth=(0,Cn.measureToString)(qn.presence==="visible"?qn.thickness:0),ys.stroke=Di.color;const Ps=(this.corner.children.length?this.corner.children[0]:new Bi({}))[In.$toStyle](),qs={name:"svg",children:[{name:"rect",attributes:{xmlns:Hn,width:"100%",height:"100%",x:0,y:0,rx:Ps.radius,ry:Ps.radius,style:ys}}],attributes:{xmlns:Hn,style:{overflow:"visible"},width:"100%",height:"100%"}},Ks=this[In.$getParent]()[In.$getParent]();return wi(Ks)?Rn.HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[qs]}):(qs.attributes.style.position="absolute",Rn.HTMLResult.success(qs))}}class fa extends Tn.StringObject{constructor(qn){super(Nn,"ref"),this.id=qn.id||"",this.use=qn.use||"",this.usehref=qn.usehref||""}}class wa extends Tn.StringObject{constructor(qn){super(Nn,"script"),this.binding=qn.binding||"",this.contentType=qn.contentType||"",this.id=qn.id||"",this.name=qn.name||"",this.runAt=(0,Rn.getStringOption)(qn.runAt,["client","both","server"]),this.use=qn.use||"",this.usehref=qn.usehref||""}}class Pa extends Tn.XFAObject{constructor(qn){super(Nn,"setProperty"),this.connection=qn.connection||"",this.ref=qn.ref||"",this.target=qn.target||""}}Mn.SetProperty=Pa;class eo extends Tn.XFAObject{constructor(qn){super(Nn,"signData",!0),this.id=qn.id||"",this.operation=(0,Rn.getStringOption)(qn.operation,["sign","clear","verify"]),this.ref=qn.ref||"",this.target=qn.target||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.filter=null,this.manifest=null}}class _c extends Tn.XFAObject{constructor(qn){super(Nn,"signature",!0),this.id=qn.id||"",this.type=(0,Rn.getStringOption)(qn.type,["PDF1.3","PDF1.6"]),this.use=qn.use||"",this.usehref=qn.usehref||"",this.border=null,this.extras=null,this.filter=null,this.manifest=null,this.margin=null}}class Mc extends Tn.XFAObject{constructor(qn){super(Nn,"signing",!0),this.id=qn.id||"",this.type=(0,Rn.getStringOption)(qn.type,["optional","required"]),this.use=qn.use||"",this.usehref=qn.usehref||"",this.certificate=new Tn.XFAObjectArray}}class Pc extends Tn.XFAObject{constructor(qn){super(Nn,"solid",!0),this.id=qn.id||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.extras=null}[In.$toStyle](qn){return qn?qn[In.$toStyle]():"#FFFFFF"}}class Rc extends Tn.StringObject{constructor(qn){super(Nn,"speak"),this.disable=(0,Rn.getInteger)({data:qn.disable,defaultValue:0,validate:Di=>Di===1}),this.id=qn.id||"",this.priority=(0,Rn.getStringOption)(qn.priority,["custom","caption","name","toolTip"]),this.rid=qn.rid||"",this.use=qn.use||"",this.usehref=qn.usehref||""}}class Lc extends Tn.XFAObject{constructor(qn){super(Nn,"stipple",!0),this.id=qn.id||"",this.rate=(0,Rn.getInteger)({data:qn.rate,defaultValue:50,validate:Di=>Di>=0&&Di<=100}),this.use=qn.use||"",this.usehref=qn.usehref||"",this.color=null,this.extras=null}[In.$toStyle](qn){const Di=this.rate/100;return ui.Util.makeHexColor(Math.round(qn.value.r*(1-Di)+this.value.r*Di),Math.round(qn.value.g*(1-Di)+this.value.g*Di),Math.round(qn.value.b*(1-Di)+this.value.b*Di))}}class tc extends Tn.XFAObject{constructor(qn){super(Nn,"subform",!0),this.access=(0,Rn.getStringOption)(qn.access,["open","nonInteractive","protected","readOnly"]),this.allowMacro=(0,Rn.getInteger)({data:qn.allowMacro,defaultValue:0,validate:Di=>Di===1}),this.anchorType=(0,Rn.getStringOption)(qn.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,Rn.getInteger)({data:qn.colSpan,defaultValue:1,validate:Di=>Di>=1||Di===-1}),this.columnWidths=(qn.columnWidths||"").trim().split(/\s+/).map(Di=>Di==="-1"?-1:(0,Rn.getMeasurement)(Di)),this.h=qn.h?(0,Rn.getMeasurement)(qn.h):"",this.hAlign=(0,Rn.getStringOption)(qn.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=qn.id||"",this.layout=(0,Rn.getStringOption)(qn.layout,["position","lr-tb","rl-row","rl-tb","row","table","tb"]),this.locale=qn.locale||"",this.maxH=(0,Rn.getMeasurement)(qn.maxH,"0pt"),this.maxW=(0,Rn.getMeasurement)(qn.maxW,"0pt"),this.mergeMode=(0,Rn.getStringOption)(qn.mergeMode,["consumeData","matchTemplate"]),this.minH=(0,Rn.getMeasurement)(qn.minH,"0pt"),this.minW=(0,Rn.getMeasurement)(qn.minW,"0pt"),this.name=qn.name||"",this.presence=(0,Rn.getStringOption)(qn.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,Rn.getRelevant)(qn.relevant),this.restoreState=(0,Rn.getStringOption)(qn.restoreState,["manual","auto"]),this.scope=(0,Rn.getStringOption)(qn.scope,["name","none"]),this.use=qn.use||"",this.usehref=qn.usehref||"",this.w=qn.w?(0,Rn.getMeasurement)(qn.w):"",this.x=(0,Rn.getMeasurement)(qn.x,"0pt"),this.y=(0,Rn.getMeasurement)(qn.y,"0pt"),this.assist=null,this.bind=null,this.bookend=null,this.border=null,this.break=null,this.calculate=null,this.desc=null,this.extras=null,this.keep=null,this.margin=null,this.occur=null,this.overflow=null,this.pageSet=null,this.para=null,this.traversal=null,this.validate=null,this.variables=null,this.area=new Tn.XFAObjectArray,this.breakAfter=new Tn.XFAObjectArray,this.breakBefore=new Tn.XFAObjectArray,this.connect=new Tn.XFAObjectArray,this.draw=new Tn.XFAObjectArray,this.event=new Tn.XFAObjectArray,this.exObject=new Tn.XFAObjectArray,this.exclGroup=new Tn.XFAObjectArray,this.field=new Tn.XFAObjectArray,this.proto=new Tn.XFAObjectArray,this.setProperty=new Tn.XFAObjectArray,this.subform=new Tn.XFAObjectArray,this.subformSet=new Tn.XFAObjectArray}[In.$getSubformParent](){const qn=this[In.$getParent]();return qn instanceof k0?qn[In.$getSubformParent]():qn}[In.$isBindable](){return!0}[In.$isThereMoreWidth](){return this.layout.endsWith("-tb")&&this[In.$extra].attempt===0&&this[In.$extra].numberInLine>0||this[In.$getParent]()[In.$isThereMoreWidth]()}*[In.$getContainedChildren](){yield*pi(this)}[In.$flushHTML](){return(0,jn.flushHTML)(this)}[In.$addHTML](qn,Di){(0,jn.addHTML)(this,qn,Di)}[In.$getAvailableSpace](){return(0,jn.getAvailableSpace)(this)}[In.$isSplittable](){var Di;const qn=this[In.$getSubformParent]();return qn[In.$isSplittable]()?this[In.$extra]._isSplittable!==void 0?this[In.$extra]._isSplittable:this.layout==="position"||this.layout.includes("row")?(this[In.$extra]._isSplittable=!1,!1):this.keep&&this.keep.intact!=="none"?(this[In.$extra]._isSplittable=!1,!1):(Di=qn.layout)!=null&&Di.endsWith("-tb")&&qn[In.$extra].numberInLine!==0?!1:(this[In.$extra]._isSplittable=!0,!0):!1}[In.$toHTML](qn){var ua;if(Gn(this),this.break){if(this.break.after!=="auto"||this.break.afterTarget!==""){const Ys=new _i({targetType:this.break.after,target:this.break.afterTarget,startNew:this.break.startNew.toString()});Ys[In.$globalData]=this[In.$globalData],this[In.$appendChild](Ys),this.breakAfter.push(Ys)}if(this.break.before!=="auto"||this.break.beforeTarget!==""){const Ys=new ji({targetType:this.break.before,target:this.break.beforeTarget,startNew:this.break.startNew.toString()});Ys[In.$globalData]=this[In.$globalData],this[In.$appendChild](Ys),this.breakBefore.push(Ys)}if(this.break.overflowTarget!==""){const Ys=new ca({target:this.break.overflowTarget,leader:this.break.overflowLeader,trailer:this.break.overflowTrailer});Ys[In.$globalData]=this[In.$globalData],this[In.$appendChild](Ys),this.overflow.push(Ys)}this[In.$removeChild](this.break),this.break=null}if(this.presence==="hidden"||this.presence==="inactive")return Rn.HTMLResult.EMPTY;if((this.breakBefore.children.length>1||this.breakAfter.children.length>1)&&(0,ui.warn)("XFA - Several breakBefore or breakAfter in subforms: please file a bug."),this.breakBefore.children.length>=1){const Ys=this.breakBefore.children[0];if(gi(Ys))return Rn.HTMLResult.breakNode(Ys)}if((ua=this[In.$extra])!=null&&ua.afterBreakAfter)return Rn.HTMLResult.EMPTY;(0,Cn.fixDimensions)(this);const Di=[],ys={id:this[In.$uid],class:[]};(0,Cn.setAccess)(this,ys.class),this[In.$extra]||(this[In.$extra]=Object.create(null)),Object.assign(this[In.$extra],{children:Di,line:null,attributes:ys,attempt:0,numberInLine:0,availableSpace:{width:Math.min(this.w||1/0,qn.width),height:Math.min(this.h||1/0,qn.height)},width:0,height:0,prevHeight:0,currentWidth:0});const Fs=this[In.$getTemplateRoot](),Ps=Fs[In.$extra].noLayoutFailure,Hs=this[In.$isSplittable]();if(Hs||li(this),!(0,jn.checkDimensions)(this,qn))return Rn.HTMLResult.FAILURE;const qs=new Set(["area","draw","exclGroup","field","subform","subformSet"]);if(this.layout.includes("row")){const Ys=this[In.$getSubformParent]().columnWidths;Array.isArray(Ys)&&Ys.length>0&&(this[In.$extra].columnWidths=Ys,this[In.$extra].currentColumn=0)}const Ks=(0,Cn.toStyle)(this,"anchorType","dimensions","position","presence","border","margin","hAlign"),ra=["xfaSubform"],ha=(0,Cn.layoutClass)(this);if(ha&&ra.push(ha),ys.style=Ks,ys.class=ra,this.name&&(ys.xfaName=this.name),this.overflow){const Ys=this.overflow[In.$getExtra]();Ys.addLeader&&(Ys.addLeader=!1,yi(this,Ys.leader,qn))}this[In.$pushPara]();const ba=this.layout==="lr-tb"||this.layout==="rl-tb",ga=ba?On:1;for(;this[In.$extra].attempt<ga;this[In.$extra].attempt++){ba&&this[In.$extra].attempt===On-1&&(this[In.$extra].numberInLine=0);const Ys=this[In.$childrenToHTML]({filter:qs,include:!0});if(Ys.success)break;if(Ys.isBreak())return this[In.$popPara](),Ys;if(ba&&this[In.$extra].attempt===0&&this[In.$extra].numberInLine===0&&!Fs[In.$extra].noLayoutFailure){this[In.$extra].attempt=ga;break}}if(this[In.$popPara](),Hs||Ai(this),Fs[In.$extra].noLayoutFailure=Ps,this[In.$extra].attempt===ga)return this.overflow&&(this[In.$getTemplateRoot]()[In.$extra].overflowNode=this.overflow),Hs||delete this[In.$extra],Rn.HTMLResult.FAILURE;if(this.overflow){const Ys=this.overflow[In.$getExtra]();Ys.addTrailer&&(Ys.addTrailer=!1,yi(this,Ys.trailer,qn))}let ya=0,Aa=0;this.margin&&(ya=this.margin.leftInset+this.margin.rightInset,Aa=this.margin.topInset+this.margin.bottomInset);const oa=Math.max(this[In.$extra].width+ya,this.w||0),Ea=Math.max(this[In.$extra].height+Aa,this.h||0),Sa=[this.x,this.y,oa,Ea];if(this.w===""&&(Ks.width=(0,Cn.measureToString)(oa)),this.h===""&&(Ks.height=(0,Cn.measureToString)(Ea)),(Ks.width==="0px"||Ks.height==="0px")&&Di.length===0)return Rn.HTMLResult.EMPTY;const Ua={name:"div",attributes:ys,children:Di};mi(this,ys);const Fa=Rn.HTMLResult.success((0,Cn.createWrapper)(this,Ua),Sa);if(this.breakAfter.children.length>=1){const Ys=this.breakAfter.children[0];if(gi(Ys))return this[In.$extra].afterBreakAfter=Fa,Rn.HTMLResult.breakNode(Ys)}return delete this[In.$extra],Fa}}class k0 extends Tn.XFAObject{constructor(qn){super(Nn,"subformSet",!0),this.id=qn.id||"",this.name=qn.name||"",this.relation=(0,Rn.getStringOption)(qn.relation,["ordered","choice","unordered"]),this.relevant=(0,Rn.getRelevant)(qn.relevant),this.use=qn.use||"",this.usehref=qn.usehref||"",this.bookend=null,this.break=null,this.desc=null,this.extras=null,this.occur=null,this.overflow=null,this.breakAfter=new Tn.XFAObjectArray,this.breakBefore=new Tn.XFAObjectArray,this.subform=new Tn.XFAObjectArray,this.subformSet=new Tn.XFAObjectArray}*[In.$getContainedChildren](){yield*pi(this)}[In.$getSubformParent](){let qn=this[In.$getParent]();for(;!(qn instanceof tc);)qn=qn[In.$getParent]();return qn}[In.$isBindable](){return!0}}class Dc extends Tn.ContentObject{constructor(qn){super(Nn,"subjectDN"),this.delimiter=qn.delimiter||",",this.id=qn.id||"",this.name=qn.name||"",this.use=qn.use||"",this.usehref=qn.usehref||""}[In.$finalize](){this[In.$content]=new Map(this[In.$content].split(this.delimiter).map(qn=>(qn=qn.split("=",2),qn[0]=qn[0].trim(),qn)))}}class Nc extends Tn.XFAObject{constructor(qn){super(Nn,"subjectDNs",!0),this.id=qn.id||"",this.type=(0,Rn.getStringOption)(qn.type,["optional","required"]),this.use=qn.use||"",this.usehref=qn.usehref||"",this.subjectDN=new Tn.XFAObjectArray}}class Bc extends Tn.XFAObject{constructor(qn){super(Nn,"submit",!0),this.embedPDF=(0,Rn.getInteger)({data:qn.embedPDF,defaultValue:0,validate:Di=>Di===1}),this.format=(0,Rn.getStringOption)(qn.format,["xdp","formdata","pdf","urlencoded","xfd","xml"]),this.id=qn.id||"",this.target=qn.target||"",this.textEncoding=(0,Rn.getKeyword)({data:qn.textEncoding?qn.textEncoding.toLowerCase():"",defaultValue:"",validate:Di=>["utf-8","big-five","fontspecific","gbk","gb-18030","gb-2312","ksc-5601","none","shift-jis","ucs-2","utf-16"].includes(Di)||Di.match(/iso-8859-\d{2}/)}),this.use=qn.use||"",this.usehref=qn.usehref||"",this.xdpContent=qn.xdpContent||"",this.encrypt=null,this.encryptData=new Tn.XFAObjectArray,this.signData=new Tn.XFAObjectArray}}class C0 extends Tn.XFAObject{constructor(qn){super(Nn,"template",!0),this.baseProfile=(0,Rn.getStringOption)(qn.baseProfile,["full","interactiveForms"]),this.extras=null,this.subform=new Tn.XFAObjectArray}[In.$finalize](){this.subform.children.length===0&&(0,ui.warn)("XFA - No subforms in template node."),this.subform.children.length>=2&&(0,ui.warn)("XFA - Several subforms in template node: please file a bug."),this[In.$tabIndex]=Xn}[In.$isSplittable](){return!0}[In.$searchNode](qn,Di){return qn.startsWith("#")?[this[In.$ids].get(qn.slice(1))]:(0,Bn.searchNode)(this,Di,qn,!0,!0)}*[In.$toPages](){var Aa,oa,Ea;if(!this.subform.children.length)return Rn.HTMLResult.success({name:"div",children:[]});this[In.$extra]={overflowNode:null,firstUnsplittable:null,currentContentArea:null,currentPageArea:null,noLayoutFailure:!1,pageNumber:1,pagePosition:"first",oddOrEven:"odd",blankOrNotBlank:"nonBlank",paraStack:[]};const qn=this.subform.children[0];qn.pageSet[In.$cleanPage]();const Di=qn.pageSet.pageArea.children,ys={name:"div",children:[]};let Fs=null,Ps=null,Hs=null;if(qn.breakBefore.children.length>=1?(Ps=qn.breakBefore.children[0],Hs=Ps.target):qn.subform.children.length>=1&&qn.subform.children[0].breakBefore.children.length>=1?(Ps=qn.subform.children[0].breakBefore.children[0],Hs=Ps.target):(Aa=qn.break)!=null&&Aa.beforeTarget?(Ps=qn.break,Hs=Ps.beforeTarget):qn.subform.children.length>=1&&((oa=qn.subform.children[0].break)!=null&&oa.beforeTarget)&&(Ps=qn.subform.children[0].break,Hs=Ps.beforeTarget),Ps){const Sa=this[In.$searchNode](Hs,Ps[In.$getParent]());Sa instanceof Js&&(Fs=Sa,Ps[In.$extra]={})}Fs||(Fs=Di[0]),Fs[In.$extra]={numberOfUse:1};const qs=Fs[In.$getParent]();qs[In.$extra]={numberOfUse:1,pageIndex:qs.pageArea.children.indexOf(Fs),pageSetIndex:0};let Ks,ra=null,ha=null,ba=!0,ga=0,ya=0;for(;;){if(ba)ga=0;else if(ys.children.pop(),++ga===hi)return(0,ui.warn)("XFA - Something goes wrong: please file a bug."),ys;Ks=null,this[In.$extra].currentPageArea=Fs;const Sa=Fs[In.$toHTML]().html;ys.children.push(Sa),ra&&(this[In.$extra].noLayoutFailure=!0,Sa.children.push(ra[In.$toHTML](Fs[In.$extra].space).html),ra=null),ha&&(this[In.$extra].noLayoutFailure=!0,Sa.children.push(ha[In.$toHTML](Fs[In.$extra].space).html),ha=null);const Ua=Fs.contentArea.children,Fa=Sa.children.filter(Ys=>Ys.attributes.class.includes("xfaContentarea"));ba=!1,this[In.$extra].firstUnsplittable=null,this[In.$extra].noLayoutFailure=!1;const ua=Ys=>{var Xa;const Qa=qn[In.$flushHTML]();Qa&&(ba||(ba=((Xa=Qa.children)==null?void 0:Xa.length)>0),Fa[Ys].children.push(Qa))};for(let Ys=ya,Qa=Ua.length;Ys<Qa;Ys++){const Xa=this[In.$extra].currentContentArea=Ua[Ys],Br={width:Xa.w,height:Xa.h};ya=0,ra&&(Fa[Ys].children.push(ra[In.$toHTML](Br).html),ra=null),ha&&(Fa[Ys].children.push(ha[In.$toHTML](Br).html),ha=null);const ar=qn[In.$toHTML](Br);if(ar.success)return ar.html?(ba||(ba=((Ea=ar.html.children)==null?void 0:Ea.length)>0),Fa[Ys].children.push(ar.html)):!ba&&ys.children.length>1&&ys.children.pop(),ys;if(ar.isBreak()){const Ia=ar.breakNode;if(ua(Ys),Ia.targetType==="auto")continue;Ia.leader&&(ra=this[In.$searchNode](Ia.leader,Ia[In.$getParent]()),ra=ra?ra[0]:null),Ia.trailer&&(ha=this[In.$searchNode](Ia.trailer,Ia[In.$getParent]()),ha=ha?ha[0]:null),Ia.targetType==="pageArea"?(Ks=Ia[In.$extra].target,Ys=1/0):Ia[In.$extra].target?(Ks=Ia[In.$extra].target,ya=Ia[In.$extra].index+1,Ys=1/0):Ys=Ia[In.$extra].index;continue}if(this[In.$extra].overflowNode){const Ia=this[In.$extra].overflowNode;this[In.$extra].overflowNode=null;const E0=Ia[In.$getExtra](),_o=E0.target;E0.addLeader=E0.leader!==null,E0.addTrailer=E0.trailer!==null,ua(Ys);const iu=Ys;if(Ys=1/0,_o instanceof Js)Ks=_o;else if(_o instanceof $i){const sc=Ua.indexOf(_o);sc!==-1?sc>iu?Ys=sc-1:ya=sc:(Ks=_o[In.$getParent](),ya=Ks.contentArea.children.indexOf(_o))}continue}ua(Ys)}this[In.$extra].pageNumber+=1,Ks&&(Ks[In.$isUsable]()?Ks[In.$extra].numberOfUse+=1:Ks=null),Fs=Ks||Fs[In.$getNextPage](),yield null}}}Mn.Template=C0;class nc extends Tn.ContentObject{constructor(qn){super(Nn,"text"),this.id=qn.id||"",this.maxChars=(0,Rn.getInteger)({data:qn.maxChars,defaultValue:0,validate:Di=>Di>=0}),this.name=qn.name||"",this.rid=qn.rid||"",this.use=qn.use||"",this.usehref=qn.usehref||""}[In.$acceptWhitespace](){return!0}[In.$onChild](qn){return qn[In.$namespaceId]===Ln.NamespaceIds.xhtml.id?(this[In.$content]=qn,!0):((0,ui.warn)(`XFA - Invalid content in Text: ${qn[In.$nodeName]}.`),!1)}[In.$onText](qn){this[In.$content]instanceof Tn.XFAObject||super[In.$onText](qn)}[In.$finalize](){typeof this[In.$content]=="string"&&(this[In.$content]=this[In.$content].replaceAll(`\r
`,`
`))}[In.$getExtra](){return typeof this[In.$content]=="string"?this[In.$content].split(/[\u2029\u2028\n]/).reduce((qn,Di)=>(Di&&qn.push(Di),qn),[]).join(`
`):this[In.$content][In.$text]()}[In.$toHTML](qn){if(typeof this[In.$content]=="string"){const Di=ni(this[In.$content]).html;return this[In.$content].includes("\u2029")?(Di.name="div",Di.children=[],this[In.$content].split("\u2029").map(ys=>ys.split(/[\u2028\n]/).reduce((Fs,Ps)=>(Fs.push({name:"span",value:Ps},{name:"br"}),Fs),[])).forEach(ys=>{Di.children.push({name:"p",children:ys})})):/[\u2028\n]/.test(this[In.$content])&&(Di.name="div",Di.children=[],this[In.$content].split(/[\u2028\n]/).forEach(ys=>{Di.children.push({name:"span",value:ys},{name:"br"})})),Rn.HTMLResult.success(Di)}return this[In.$content][In.$toHTML](qn)}}Mn.Text=nc;class ic extends Tn.XFAObject{constructor(qn){super(Nn,"textEdit",!0),this.allowRichText=(0,Rn.getInteger)({data:qn.allowRichText,defaultValue:0,validate:Di=>Di===1}),this.hScrollPolicy=(0,Rn.getStringOption)(qn.hScrollPolicy,["auto","off","on"]),this.id=qn.id||"",this.multiLine=(0,Rn.getInteger)({data:qn.multiLine,defaultValue:"",validate:Di=>Di===0||Di===1}),this.use=qn.use||"",this.usehref=qn.usehref||"",this.vScrollPolicy=(0,Rn.getStringOption)(qn.vScrollPolicy,["auto","off","on"]),this.border=null,this.comb=null,this.extras=null,this.margin=null}[In.$toHTML](qn){var Ps,Hs;const Di=(0,Cn.toStyle)(this,"border","font","margin");let ys;const Fs=this[In.$getParent]()[In.$getParent]();return this.multiLine===""&&(this.multiLine=Fs instanceof Yi?1:0),this.multiLine===1?ys={name:"textarea",attributes:{dataId:((Ps=Fs[In.$data])==null?void 0:Ps[In.$uid])||Fs[In.$uid],fieldId:Fs[In.$uid],class:["xfaTextfield"],style:Di,"aria-label":Wn(Fs),"aria-required":!1}}:ys={name:"input",attributes:{type:"text",dataId:((Hs=Fs[In.$data])==null?void 0:Hs[In.$uid])||Fs[In.$uid],fieldId:Fs[In.$uid],class:["xfaTextfield"],style:Di,"aria-label":Wn(Fs),"aria-required":!1}},Zn(Fs)&&(ys.attributes["aria-required"]=!0,ys.attributes.required=!0),Rn.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[ys]})}}class $c extends Tn.StringObject{constructor(qn){super(Nn,"time"),this.id=qn.id||"",this.name=qn.name||"",this.use=qn.use||"",this.usehref=qn.usehref||""}[In.$finalize](){const qn=this[In.$content].trim();this[In.$content]=qn?new Date(qn):null}[In.$toHTML](qn){return ni(this[In.$content]?this[In.$content].toString():"")}}class Uc extends Tn.XFAObject{constructor(qn){super(Nn,"timeStamp"),this.id=qn.id||"",this.server=qn.server||"",this.type=(0,Rn.getStringOption)(qn.type,["optional","required"]),this.use=qn.use||"",this.usehref=qn.usehref||""}}class jc extends Tn.StringObject{constructor(qn){super(Nn,"toolTip"),this.id=qn.id||"",this.rid=qn.rid||"",this.use=qn.use||"",this.usehref=qn.usehref||""}}class Hc extends Tn.XFAObject{constructor(qn){super(Nn,"traversal",!0),this.id=qn.id||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.extras=null,this.traverse=new Tn.XFAObjectArray}}class Xc extends Tn.XFAObject{constructor(qn){super(Nn,"traverse",!0),this.id=qn.id||"",this.operation=(0,Rn.getStringOption)(qn.operation,["next","back","down","first","left","right","up"]),this.ref=qn.ref||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.extras=null,this.script=null}get name(){return this.operation}[In.$isTransparent](){return!1}}class T0 extends Tn.XFAObject{constructor(qn){super(Nn,"ui",!0),this.id=qn.id||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.extras=null,this.picture=null,this.barcode=null,this.button=null,this.checkButton=null,this.choiceList=null,this.dateTimeEdit=null,this.defaultUi=null,this.imageEdit=null,this.numericEdit=null,this.passwordEdit=null,this.signature=null,this.textEdit=null}[In.$getExtra](){if(this[In.$extra]===void 0){for(const qn of Object.getOwnPropertyNames(this)){if(qn==="extras"||qn==="picture")continue;const Di=this[qn];if(Di instanceof Tn.XFAObject)return this[In.$extra]=Di,Di}this[In.$extra]=null}return this[In.$extra]}[In.$toHTML](qn){const Di=this[In.$getExtra]();return Di?Di[In.$toHTML](qn):Rn.HTMLResult.EMPTY}}class zc extends Tn.XFAObject{constructor(qn){super(Nn,"validate",!0),this.formatTest=(0,Rn.getStringOption)(qn.formatTest,["warning","disabled","error"]),this.id=qn.id||"",this.nullTest=(0,Rn.getStringOption)(qn.nullTest,["disabled","error","warning"]),this.scriptTest=(0,Rn.getStringOption)(qn.scriptTest,["error","disabled","warning"]),this.use=qn.use||"",this.usehref=qn.usehref||"",this.extras=null,this.message=null,this.picture=null,this.script=null}}class Io extends Tn.XFAObject{constructor(qn){super(Nn,"value",!0),this.id=qn.id||"",this.override=(0,Rn.getInteger)({data:qn.override,defaultValue:0,validate:Di=>Di===1}),this.relevant=(0,Rn.getRelevant)(qn.relevant),this.use=qn.use||"",this.usehref=qn.usehref||"",this.arc=null,this.boolean=null,this.date=null,this.dateTime=null,this.decimal=null,this.exData=null,this.float=null,this.image=null,this.integer=null,this.line=null,this.rectangle=null,this.text=null,this.time=null}[In.$setValue](qn){var Fs;const Di=this[In.$getParent]();if(Di instanceof Ts&&(Fs=Di.ui)!=null&&Fs.imageEdit){this.image||(this.image=new gs({}),this[In.$appendChild](this.image)),this.image[In.$content]=qn[In.$content];return}const ys=qn[In.$nodeName];if(this[ys]!==null){this[ys][In.$content]=qn[In.$content];return}for(const Ps of Object.getOwnPropertyNames(this)){const Hs=this[Ps];Hs instanceof Tn.XFAObject&&(this[Ps]=null,this[In.$removeChild](Hs))}this[qn[In.$nodeName]]=qn,this[In.$appendChild](qn)}[In.$text](){if(this.exData)return typeof this.exData[In.$content]=="string"?this.exData[In.$content].trim():this.exData[In.$content][In.$text]().trim();for(const qn of Object.getOwnPropertyNames(this)){if(qn==="image")continue;const Di=this[qn];if(Di instanceof Tn.XFAObject)return(Di[In.$content]||"").toString().trim()}return null}[In.$toHTML](qn){for(const Di of Object.getOwnPropertyNames(this)){const ys=this[Di];if(ys instanceof Tn.XFAObject)return ys[In.$toHTML](qn)}return Rn.HTMLResult.EMPTY}}Mn.Value=Io;class Wc extends Tn.XFAObject{constructor(qn){super(Nn,"variables",!0),this.id=qn.id||"",this.use=qn.use||"",this.usehref=qn.usehref||"",this.boolean=new Tn.XFAObjectArray,this.date=new Tn.XFAObjectArray,this.dateTime=new Tn.XFAObjectArray,this.decimal=new Tn.XFAObjectArray,this.exData=new Tn.XFAObjectArray,this.float=new Tn.XFAObjectArray,this.image=new Tn.XFAObjectArray,this.integer=new Tn.XFAObjectArray,this.manifest=new Tn.XFAObjectArray,this.script=new Tn.XFAObjectArray,this.text=new Tn.XFAObjectArray,this.time=new Tn.XFAObjectArray}[In.$isTransparent](){return!0}}class Oo{static[Ln.$buildXFAObject](qn,Di){if(Oo.hasOwnProperty(qn)){const ys=Oo[qn](Di);return ys[In.$setSetAttributes](Di),ys}}static appearanceFilter(qn){return new Ii(qn)}static arc(qn){return new xi(qn)}static area(qn){return new Qn(qn)}static assist(qn){return new ai(qn)}static barcode(qn){return new Vn(qn)}static bind(qn){return new Yn(qn)}static bindItems(qn){return new ci(qn)}static bookend(qn){return new bi(qn)}static boolean(qn){return new Ci(qn)}static border(qn){return new Fi(qn)}static break(qn){return new zi(qn)}static breakAfter(qn){return new _i(qn)}static breakBefore(qn){return new ji(qn)}static button(qn){return new Pi(qn)}static calculate(qn){return new Ni(qn)}static caption(qn){return new Si(qn)}static certificate(qn){return new Ti(qn)}static certificates(qn){return new Ri(qn)}static checkButton(qn){return new Mi(qn)}static choiceList(qn){return new Ui(qn)}static color(qn){return new Hi(qn)}static comb(qn){return new Li(qn)}static connect(qn){return new Ei(qn)}static contentArea(qn){return new $i(qn)}static corner(qn){return new Bi(qn)}static date(qn){return new Oi(qn)}static dateTime(qn){return new Xi(qn)}static dateTimeEdit(qn){return new Gi(qn)}static decimal(qn){return new qi(qn)}static defaultUi(qn){return new ns(qn)}static desc(qn){return new is(qn)}static digestMethod(qn){return new as(qn)}static digestMethods(qn){return new hs(qn)}static draw(qn){return new Yi(qn)}static edge(qn){return new Vi(qn)}static encoding(qn){return new Zi(qn)}static encodings(qn){return new us(qn)}static encrypt(qn){return new ts(qn)}static encryptData(qn){return new es(qn)}static encryption(qn){return new rs(qn)}static encryptionMethod(qn){return new ss(qn)}static encryptionMethods(qn){return new os(qn)}static event(qn){return new ks(qn)}static exData(qn){return new xs(qn)}static exObject(qn){return new Rs(qn)}static exclGroup(qn){return new ms(qn)}static execute(qn){return new Bs(qn)}static extras(qn){return new ws(qn)}static field(qn){return new Ts(qn)}static fill(qn){return new Is(qn)}static filter(qn){return new ls(qn)}static float(qn){return new Wi(qn)}static font(qn){return new Ji(qn)}static format(qn){return new cs(qn)}static handler(qn){return new fs(qn)}static hyphenation(qn){return new ps(qn)}static image(qn){return new gs(qn)}static imageEdit(qn){return new bs(qn)}static integer(qn){return new vs(qn)}static issuers(qn){return new _s(qn)}static items(qn){return new Us(qn)}static keep(qn){return new Ds(qn)}static keyUsage(qn){return new Ms(qn)}static line(qn){return new js(qn)}static linear(qn){return new Vs(qn)}static lockDocument(qn){return new Ss(qn)}static manifest(qn){return new As(qn)}static margin(qn){return new Es(qn)}static mdp(qn){return new Os(qn)}static medium(qn){return new $s(qn)}static message(qn){return new Ws(qn)}static numericEdit(qn){return new Ns(qn)}static occur(qn){return new Ls(qn)}static oid(qn){return new zs(qn)}static oids(qn){return new Qs(qn)}static overflow(qn){return new ca(qn)}static pageArea(qn){return new Js(qn)}static pageSet(qn){return new Zs(qn)}static para(qn){return new aa(qn)}static passwordEdit(qn){return new Gs(qn)}static pattern(qn){return new ea(qn)}static picture(qn){return new Xs(qn)}static proto(qn){return new sa(qn)}static radial(qn){return new la(qn)}static reason(qn){return new va(qn)}static reasons(qn){return new na(qn)}static rectangle(qn){return new ia(qn)}static ref(qn){return new fa(qn)}static script(qn){return new wa(qn)}static setProperty(qn){return new Pa(qn)}static signData(qn){return new eo(qn)}static signature(qn){return new _c(qn)}static signing(qn){return new Mc(qn)}static solid(qn){return new Pc(qn)}static speak(qn){return new Rc(qn)}static stipple(qn){return new Lc(qn)}static subform(qn){return new tc(qn)}static subformSet(qn){return new k0(qn)}static subjectDN(qn){return new Dc(qn)}static subjectDNs(qn){return new Nc(qn)}static submit(qn){return new Bc(qn)}static template(qn){return new C0(qn)}static text(qn){return new nc(qn)}static textEdit(qn){return new ic(qn)}static time(qn){return new $c(qn)}static timeStamp(qn){return new Uc(qn)}static toolTip(qn){return new jc(qn)}static traversal(qn){return new Hc(qn)}static traverse(qn){return new Xc(qn)}static ui(qn){return new T0(qn)}static validate(qn){return new zc(qn)}static value(qn){return new Io(qn)}static variables(qn){return new Wc(qn)}}Mn.TemplateNamespace=Oo},(oi,Mn)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.NamespaceIds=Mn.$buildXFAObject=void 0;const ti=Symbol();Mn.$buildXFAObject=ti;const In={config:{id:0,check:Ln=>Ln.startsWith("http://www.xfa.org/schema/xci/")},connectionSet:{id:1,check:Ln=>Ln.startsWith("http://www.xfa.org/schema/xfa-connection-set/")},datasets:{id:2,check:Ln=>Ln.startsWith("http://www.xfa.org/schema/xfa-data/")},form:{id:3,check:Ln=>Ln.startsWith("http://www.xfa.org/schema/xfa-form/")},localeSet:{id:4,check:Ln=>Ln.startsWith("http://www.xfa.org/schema/xfa-locale-set/")},pdf:{id:5,check:Ln=>Ln==="http://ns.adobe.com/xdp/pdf/"},signature:{id:6,check:Ln=>Ln==="http://www.w3.org/2000/09/xmldsig#"},sourceSet:{id:7,check:Ln=>Ln.startsWith("http://www.xfa.org/schema/xfa-source-set/")},stylesheet:{id:8,check:Ln=>Ln==="http://www.w3.org/1999/XSL/Transform"},template:{id:9,check:Ln=>Ln.startsWith("http://www.xfa.org/schema/xfa-template/")},xdc:{id:10,check:Ln=>Ln.startsWith("http://www.xfa.org/schema/xdc/")},xdp:{id:11,check:Ln=>Ln==="http://ns.adobe.com/xdp/"},xfdf:{id:12,check:Ln=>Ln==="http://ns.adobe.com/xfdf/"},xhtml:{id:13,check:Ln=>Ln==="http://www.w3.org/1999/xhtml"},xmpmeta:{id:14,check:Ln=>Ln==="http://ns.adobe.com/xmpmeta/"}};Mn.NamespaceIds=In},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.addHTML=Tn,Mn.checkDimensions=si,Mn.flushHTML=Cn,Mn.getAvailableSpace=Rn;var In=ti(78),Ln=ti(83);function jn(ei,Bn){return{name:"div",attributes:{class:[ei.layout==="lr-tb"?"xfaLr":"xfaRl"]},children:Bn}}function Cn(ei){if(!ei[In.$extra])return null;const Nn={name:"div",attributes:ei[In.$extra].attributes,children:ei[In.$extra].children};if(ei[In.$extra].failingNode){const Hn=ei[In.$extra].failingNode[In.$flushHTML]();Hn&&(ei.layout.endsWith("-tb")?Nn.children.push(jn(ei,[Hn])):Nn.children.push(Hn))}return Nn.children.length===0?null:Nn}function Tn(ei,Bn,Nn){const Hn=ei[In.$extra],On=Hn.availableSpace,[hi,Xn,ii,ri]=Nn;switch(ei.layout){case"position":{Hn.width=Math.max(Hn.width,hi+ii),Hn.height=Math.max(Hn.height,Xn+ri),Hn.children.push(Bn);break}case"lr-tb":case"rl-tb":(!Hn.line||Hn.attempt===1)&&(Hn.line=jn(ei,[]),Hn.children.push(Hn.line),Hn.numberInLine=0),Hn.numberInLine+=1,Hn.line.children.push(Bn),Hn.attempt===0?(Hn.currentWidth+=ii,Hn.height=Math.max(Hn.height,Hn.prevHeight+ri)):(Hn.currentWidth=ii,Hn.prevHeight=Hn.height,Hn.height+=ri,Hn.attempt=0),Hn.width=Math.max(Hn.width,Hn.currentWidth);break;case"rl-row":case"row":{Hn.children.push(Bn),Hn.width+=ii,Hn.height=Math.max(Hn.height,ri);const di=(0,Ln.measureToString)(Hn.height);for(const fi of Hn.children)fi.attributes.style.height=di;break}case"table":{Hn.width=Math.min(On.width,Math.max(Hn.width,ii)),Hn.height+=ri,Hn.children.push(Bn);break}case"tb":{Hn.width=Math.min(On.width,Math.max(Hn.width,ii)),Hn.height+=ri,Hn.children.push(Bn);break}}}function Rn(ei){const Bn=ei[In.$extra].availableSpace,Nn=ei.margin?ei.margin.topInset+ei.margin.bottomInset:0,Hn=ei.margin?ei.margin.leftInset+ei.margin.rightInset:0;switch(ei.layout){case"lr-tb":case"rl-tb":return ei[In.$extra].attempt===0?{width:Bn.width-Hn-ei[In.$extra].currentWidth,height:Bn.height-Nn-ei[In.$extra].prevHeight}:{width:Bn.width-Hn,height:Bn.height-Nn-ei[In.$extra].height};case"rl-row":case"row":return{width:ei[In.$extra].columnWidths.slice(ei[In.$extra].currentColumn).reduce((hi,Xn)=>hi+Xn),height:Bn.height-Hn};case"table":case"tb":return{width:Bn.width-Hn,height:Bn.height-Nn-ei[In.$extra].height};case"position":default:return Bn}}function ui(ei){let Bn=ei.w===""?NaN:ei.w,Nn=ei.h===""?NaN:ei.h,[Hn,On]=[0,0];switch(ei.anchorType||""){case"bottomCenter":[Hn,On]=[Bn/2,Nn];break;case"bottomLeft":[Hn,On]=[0,Nn];break;case"bottomRight":[Hn,On]=[Bn,Nn];break;case"middleCenter":[Hn,On]=[Bn/2,Nn/2];break;case"middleLeft":[Hn,On]=[0,Nn/2];break;case"middleRight":[Hn,On]=[Bn,Nn/2];break;case"topCenter":[Hn,On]=[Bn/2,0];break;case"topRight":[Hn,On]=[Bn,0];break}let hi,Xn;switch(ei.rotate||0){case 0:[hi,Xn]=[-Hn,-On];break;case 90:[hi,Xn]=[-On,Hn],[Bn,Nn]=[Nn,-Bn];break;case 180:[hi,Xn]=[Hn,On],[Bn,Nn]=[-Bn,-Nn];break;case 270:[hi,Xn]=[On,-Hn],[Bn,Nn]=[-Nn,Bn];break}return[ei.x+hi+Math.min(0,Bn),ei.y+Xn+Math.min(0,Nn),Math.abs(Bn),Math.abs(Nn)]}function si(ei,Bn){var ri;if(ei[In.$getTemplateRoot]()[In.$extra].firstUnsplittable===null||ei.w===0||ei.h===0)return!0;const Nn=2,Hn=ei[In.$getSubformParent](),On=((ri=Hn[In.$extra])==null?void 0:ri.attempt)||0,[,hi,Xn,ii]=ui(ei);switch(Hn.layout){case"lr-tb":case"rl-tb":return On===0?ei[In.$getTemplateRoot]()[In.$extra].noLayoutFailure?ei.w!==""?Math.round(Xn-Bn.width)<=Nn:Bn.width>Nn:ei.h!==""&&Math.round(ii-Bn.height)>Nn?!1:ei.w!==""?Math.round(Xn-Bn.width)<=Nn?!0:Hn[In.$extra].numberInLine===0?Bn.height>Nn:!1:Bn.width>Nn:ei[In.$getTemplateRoot]()[In.$extra].noLayoutFailure?!0:ei.h!==""&&Math.round(ii-Bn.height)>Nn?!1:ei.w===""||Math.round(Xn-Bn.width)<=Nn?Bn.height>Nn:Hn[In.$isThereMoreWidth]()?!1:Bn.height>Nn;case"table":case"tb":return ei[In.$getTemplateRoot]()[In.$extra].noLayoutFailure?!0:ei.h!==""&&!ei[In.$isSplittable]()?Math.round(ii-Bn.height)<=Nn:ei.w===""||Math.round(Xn-Bn.width)<=Nn?Bn.height>Nn:Hn[In.$isThereMoreWidth]()?!1:Bn.height>Nn;case"position":if(ei[In.$getTemplateRoot]()[In.$extra].noLayoutFailure||ei.h===""||Math.round(ii+hi-Bn.height)<=Nn)return!0;const di=ei[In.$getTemplateRoot]()[In.$extra].currentContentArea;return ii+hi>di.h;case"rl-row":case"row":return ei[In.$getTemplateRoot]()[In.$extra].noLayoutFailure?!0:ei.h!==""?Math.round(ii-Bn.height)<=Nn:!0;default:return!0}}},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.computeBbox=Hn,Mn.createWrapper=ii,Mn.fixDimensions=On,Mn.fixTextIndent=ri,Mn.fixURL=Zn,Mn.isPrintOnly=fi,Mn.layoutClass=hi,Mn.layoutNode=Nn,Mn.measureToString=ui,Mn.setAccess=di,Mn.setFontFamily=pi,Mn.setMinMaxDimensions=ei,Mn.setPara=Jn,Mn.toStyle=Xn;var In=ti(78),Ln=ti(2),jn=ti(84),Cn=ti(85),Tn=ti(86),Rn=ti(87);function ui(Gn){return typeof Gn=="string"?"0px":Number.isInteger(Gn)?`${Gn}px`:`${Gn.toFixed(2)}px`}const si={anchorType(Gn,mi){const Wn=Gn[In.$getSubformParent]();if(!(!Wn||Wn.layout&&Wn.layout!=="position"))switch("transform"in mi||(mi.transform=""),Gn.anchorType){case"bottomCenter":mi.transform+="translate(-50%, -100%)";break;case"bottomLeft":mi.transform+="translate(0,-100%)";break;case"bottomRight":mi.transform+="translate(-100%,-100%)";break;case"middleCenter":mi.transform+="translate(-50%,-50%)";break;case"middleLeft":mi.transform+="translate(0,-50%)";break;case"middleRight":mi.transform+="translate(-100%,-50%)";break;case"topCenter":mi.transform+="translate(-50%,0)";break;case"topRight":mi.transform+="translate(-100%,0)";break}},dimensions(Gn,mi){var Ai;const Wn=Gn[In.$getSubformParent]();let ni=Gn.w;const li=Gn.h;if((Ai=Wn.layout)!=null&&Ai.includes("row")){const gi=Wn[In.$extra],yi=Gn.colSpan;let Ii;yi===-1?(Ii=gi.columnWidths.slice(gi.currentColumn).reduce((xi,Qn)=>xi+Qn,0),gi.currentColumn=0):(Ii=gi.columnWidths.slice(gi.currentColumn,gi.currentColumn+yi).reduce((xi,Qn)=>xi+Qn,0),gi.currentColumn=(gi.currentColumn+Gn.colSpan)%gi.columnWidths.length),isNaN(Ii)||(ni=Gn.w=Ii)}mi.width=ni!==""?ui(ni):"auto",mi.height=li!==""?ui(li):"auto"},position(Gn,mi){const Wn=Gn[In.$getSubformParent]();Wn!=null&&Wn.layout&&Wn.layout!=="position"||(mi.position="absolute",mi.left=ui(Gn.x),mi.top=ui(Gn.y))},rotate(Gn,mi){Gn.rotate&&("transform"in mi||(mi.transform=""),mi.transform+=`rotate(-${Gn.rotate}deg)`,mi.transformOrigin="top left")},presence(Gn,mi){switch(Gn.presence){case"invisible":mi.visibility="hidden";break;case"hidden":case"inactive":mi.display="none";break}},hAlign(Gn,mi){if(Gn[In.$nodeName]==="para")switch(Gn.hAlign){case"justifyAll":mi.textAlign="justify-all";break;case"radix":mi.textAlign="left";break;default:mi.textAlign=Gn.hAlign}else switch(Gn.hAlign){case"left":mi.alignSelf="start";break;case"center":mi.alignSelf="center";break;case"right":mi.alignSelf="end";break}},margin(Gn,mi){Gn.margin&&(mi.margin=Gn.margin[In.$toStyle]().margin)}};function ei(Gn,mi){Gn[In.$getSubformParent]().layout==="position"&&(Gn.minW>0&&(mi.minWidth=ui(Gn.minW)),Gn.maxW>0&&(mi.maxWidth=ui(Gn.maxW)),Gn.minH>0&&(mi.minHeight=ui(Gn.minH)),Gn.maxH>0&&(mi.maxHeight=ui(Gn.maxH)))}function Bn(Gn,mi,Wn,ni,li,Ai){const gi=new Tn.TextMeasure(mi,Wn,ni,li);return typeof Gn=="string"?gi.addString(Gn):Gn[In.$pushGlyphs](gi),gi.compute(Ai)}function Nn(Gn,mi){let Wn=null,ni=null,li=!1;if((!Gn.w||!Gn.h)&&Gn.value){let Ai=0,gi=0;Gn.margin&&(Ai=Gn.margin.leftInset+Gn.margin.rightInset,gi=Gn.margin.topInset+Gn.margin.bottomInset);let yi=null,Ii=null;Gn.para&&(Ii=Object.create(null),yi=Gn.para.lineHeight===""?null:Gn.para.lineHeight,Ii.top=Gn.para.spaceAbove===""?0:Gn.para.spaceAbove,Ii.bottom=Gn.para.spaceBelow===""?0:Gn.para.spaceBelow,Ii.left=Gn.para.marginLeft===""?0:Gn.para.marginLeft,Ii.right=Gn.para.marginRight===""?0:Gn.para.marginRight);let xi=Gn.font;if(!xi){const Vn=Gn[In.$getTemplateRoot]();let Yn=Gn[In.$getParent]();for(;Yn&&Yn!==Vn;){if(Yn.font){xi=Yn.font;break}Yn=Yn[In.$getParent]()}}const Qn=(Gn.w||mi.width)-Ai,ai=Gn[In.$globalData].fontFinder;if(Gn.value.exData&&Gn.value.exData[In.$content]&&Gn.value.exData.contentType==="text/html"){const Vn=Bn(Gn.value.exData[In.$content],xi,Ii,yi,ai,Qn);ni=Vn.width,Wn=Vn.height,li=Vn.isBroken}else{const Vn=Gn.value[In.$text]();if(Vn){const Yn=Bn(Vn,xi,Ii,yi,ai,Qn);ni=Yn.width,Wn=Yn.height,li=Yn.isBroken}}ni!==null&&!Gn.w&&(ni+=Ai),Wn!==null&&!Gn.h&&(Wn+=gi)}return{w:ni,h:Wn,isBroken:li}}function Hn(Gn,mi,Wn){let ni;if(Gn.w!==""&&Gn.h!=="")ni=[Gn.x,Gn.y,Gn.w,Gn.h];else{if(!Wn)return null;let li=Gn.w;if(li===""){if(Gn.maxW===0){const gi=Gn[In.$getSubformParent]();li=gi.layout==="position"&&gi.w!==""?0:Gn.minW}else li=Math.min(Gn.maxW,Wn.width);mi.attributes.style.width=ui(li)}let Ai=Gn.h;if(Ai===""){if(Gn.maxH===0){const gi=Gn[In.$getSubformParent]();Ai=gi.layout==="position"&&gi.h!==""?0:Gn.minH}else Ai=Math.min(Gn.maxH,Wn.height);mi.attributes.style.height=ui(Ai)}ni=[Gn.x,Gn.y,li,Ai]}return ni}function On(Gn){var Wn;const mi=Gn[In.$getSubformParent]();if((Wn=mi.layout)!=null&&Wn.includes("row")){const ni=mi[In.$extra],li=Gn.colSpan;let Ai;li===-1?Ai=ni.columnWidths.slice(ni.currentColumn).reduce((gi,yi)=>gi+yi,0):Ai=ni.columnWidths.slice(ni.currentColumn,ni.currentColumn+li).reduce((gi,yi)=>gi+yi,0),isNaN(Ai)||(Gn.w=Ai)}mi.layout&&mi.layout!=="position"&&(Gn.x=Gn.y=0),Gn.layout==="table"&&Gn.w===""&&Array.isArray(Gn.columnWidths)&&(Gn.w=Gn.columnWidths.reduce((ni,li)=>ni+li,0))}function hi(Gn){switch(Gn.layout){case"position":return"xfaPosition";case"lr-tb":return"xfaLrTb";case"rl-row":return"xfaRlRow";case"rl-tb":return"xfaRlTb";case"row":return"xfaRow";case"table":return"xfaTable";case"tb":return"xfaTb";default:return"xfaPosition"}}function Xn(Gn,...mi){const Wn=Object.create(null);for(const ni of mi){const li=Gn[ni];if(li!==null){if(si.hasOwnProperty(ni)){si[ni](Gn,Wn);continue}if(li instanceof Rn.XFAObject){const Ai=li[In.$toStyle]();Ai?Object.assign(Wn,Ai):(0,Ln.warn)(`(DEBUG) - XFA - style for ${ni} not implemented yet`)}}}return Wn}function ii(Gn,mi){const{attributes:Wn}=mi,{style:ni}=Wn,li={name:"div",attributes:{class:["xfaWrapper"],style:Object.create(null)},children:[]};if(Wn.class.push("xfaWrapped"),Gn.border){const{widths:Ai,insets:gi}=Gn.border[In.$extra];let yi,Ii,xi=gi[0],Qn=gi[3];const ai=gi[0]+gi[2],Vn=gi[1]+gi[3];switch(Gn.border.hand){case"even":xi-=Ai[0]/2,Qn-=Ai[3]/2,yi=`calc(100% + ${(Ai[1]+Ai[3])/2-Vn}px)`,Ii=`calc(100% + ${(Ai[0]+Ai[2])/2-ai}px)`;break;case"left":xi-=Ai[0],Qn-=Ai[3],yi=`calc(100% + ${Ai[1]+Ai[3]-Vn}px)`,Ii=`calc(100% + ${Ai[0]+Ai[2]-ai}px)`;break;case"right":yi=Vn?`calc(100% - ${Vn}px)`:"100%",Ii=ai?`calc(100% - ${ai}px)`:"100%";break}const Yn=["xfaBorder"];fi(Gn.border)&&Yn.push("xfaPrintOnly");const ci={name:"div",attributes:{class:Yn,style:{top:`${xi}px`,left:`${Qn}px`,width:yi,height:Ii}},children:[]};for(const bi of["border","borderWidth","borderColor","borderRadius","borderStyle"])ni[bi]!==void 0&&(ci.attributes.style[bi]=ni[bi],delete ni[bi]);li.children.push(ci,mi)}else li.children.push(mi);for(const Ai of["background","backgroundClip","top","left","width","height","minWidth","minHeight","maxWidth","maxHeight","transform","transformOrigin","visibility"])ni[Ai]!==void 0&&(li.attributes.style[Ai]=ni[Ai],delete ni[Ai]);return li.attributes.style.position=ni.position==="absolute"?"absolute":"relative",delete ni.position,ni.alignSelf&&(li.attributes.style.alignSelf=ni.alignSelf,delete ni.alignSelf),li}function ri(Gn){const mi=(0,jn.getMeasurement)(Gn.textIndent,"0px");if(mi>=0)return;const ni="padding"+((Gn.textAlign==="right"?"right":"left")==="left"?"Left":"Right"),li=(0,jn.getMeasurement)(Gn[ni],"0px");Gn[ni]=`${li-mi}px`}function di(Gn,mi){switch(Gn.access){case"nonInteractive":mi.push("xfaNonInteractive");break;case"readOnly":mi.push("xfaReadOnly");break;case"protected":mi.push("xfaDisabled");break}}function fi(Gn){return Gn.relevant.length>0&&!Gn.relevant[0].excluded&&Gn.relevant[0].viewname==="print"}function wi(Gn){const mi=Gn[In.$getTemplateRoot]()[In.$extra].paraStack;return mi.length?mi.at(-1):null}function Jn(Gn,mi,Wn){var ni;if((ni=Wn.attributes.class)!=null&&ni.includes("xfaRich")){mi&&(Gn.h===""&&(mi.height="auto"),Gn.w===""&&(mi.width="auto"));const li=wi(Gn);if(li){const Ai=Wn.attributes.style;switch(Ai.display="flex",Ai.flexDirection="column",li.vAlign){case"top":Ai.justifyContent="start";break;case"bottom":Ai.justifyContent="end";break;case"middle":Ai.justifyContent="center";break}const gi=li[In.$toStyle]();for(const[yi,Ii]of Object.entries(gi))yi in Ai||(Ai[yi]=Ii)}}}function pi(Gn,mi,Wn,ni){if(!Wn){delete ni.fontFamily;return}const li=(0,jn.stripQuotes)(Gn.typeface);ni.fontFamily=`"${li}"`;const Ai=Wn.find(li);if(Ai){const{fontFamily:gi}=Ai.regular.cssFontInfo;gi!==li&&(ni.fontFamily=`"${gi}"`);const yi=wi(mi);if(yi&&yi.lineHeight!==""||ni.lineHeight)return;const Ii=(0,Cn.selectFont)(Gn,Ai);Ii&&(ni.lineHeight=Math.max(1.2,Ii.lineHeight))}}function Zn(Gn){const mi=(0,Ln.createValidAbsoluteUrl)(Gn,null,{addDefaultProtocol:!0,tryConvertEncoding:!0});return mi?mi.href:null}},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.HTMLResult=void 0,Mn.getBBox=On,Mn.getColor=Hn,Mn.getFloat=Rn,Mn.getInteger=Tn,Mn.getKeyword=ui,Mn.getMeasurement=ei,Mn.getRatio=Bn,Mn.getRelevant=Nn,Mn.getStringOption=si,Mn.stripQuotes=Cn;var In=ti(2);const Ln={pt:Xn=>Xn,cm:Xn=>Xn/2.54*72,mm:Xn=>Xn/(10*2.54)*72,in:Xn=>Xn*72,px:Xn=>Xn},jn=/([+-]?\d+\.?\d*)(.*)/;function Cn(Xn){return Xn.startsWith("'")||Xn.startsWith('"')?Xn.slice(1,-1):Xn}function Tn({data:Xn,defaultValue:ii,validate:ri}){if(!Xn)return ii;Xn=Xn.trim();const di=parseInt(Xn,10);return!isNaN(di)&&ri(di)?di:ii}function Rn({data:Xn,defaultValue:ii,validate:ri}){if(!Xn)return ii;Xn=Xn.trim();const di=parseFloat(Xn);return!isNaN(di)&&ri(di)?di:ii}function ui({data:Xn,defaultValue:ii,validate:ri}){return Xn?(Xn=Xn.trim(),ri(Xn)?Xn:ii):ii}function si(Xn,ii){return ui({data:Xn,defaultValue:ii[0],validate:ri=>ii.includes(ri)})}function ei(Xn,ii="0"){if(ii||(ii="0"),!Xn)return ei(ii);const ri=Xn.trim().match(jn);if(!ri)return ei(ii);const[,di,fi]=ri,wi=parseFloat(di);if(isNaN(wi))return ei(ii);if(wi===0)return 0;const Jn=Ln[fi];return Jn?Jn(wi):wi}function Bn(Xn){if(!Xn)return{num:1,den:1};const ii=Xn.trim().split(/\s*:\s*/).map(fi=>parseFloat(fi)).filter(fi=>!isNaN(fi));if(ii.length===1&&ii.push(1),ii.length===0)return{num:1,den:1};const[ri,di]=ii;return{num:ri,den:di}}function Nn(Xn){return Xn?Xn.trim().split(/\s+/).map(ii=>({excluded:ii[0]==="-",viewname:ii.substring(1)})):[]}function Hn(Xn,ii=[0,0,0]){let[ri,di,fi]=ii;if(!Xn)return{r:ri,g:di,b:fi};const wi=Xn.trim().split(/\s*,\s*/).map(Jn=>Math.min(Math.max(0,parseInt(Jn.trim(),10)),255)).map(Jn=>isNaN(Jn)?0:Jn);return wi.length<3?{r:ri,g:di,b:fi}:([ri,di,fi]=wi,{r:ri,g:di,b:fi})}function On(Xn){if(!Xn)return{x:-1,y:-1,width:-1,height:-1};const ri=Xn.trim().split(/\s*,\s*/).map(pi=>ei(pi,"-1"));if(ri.length<4||ri[2]<0||ri[3]<0)return{x:-1,y:-1,width:-1,height:-1};const[di,fi,wi,Jn]=ri;return{x:di,y:fi,width:wi,height:Jn}}class hi{static get FAILURE(){return(0,In.shadow)(this,"FAILURE",new hi(!1,null,null,null))}static get EMPTY(){return(0,In.shadow)(this,"EMPTY",new hi(!0,null,null,null))}constructor(ii,ri,di,fi){this.success=ii,this.html=ri,this.bbox=di,this.breakNode=fi}isBreak(){return!!this.breakNode}static breakNode(ii){return new hi(!1,null,null,ii)}static success(ii,ri=null){return new hi(!0,ii,ri,null)}}Mn.HTMLResult=hi},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.FontFinder=void 0,Mn.getMetrics=Rn,Mn.selectFont=Tn;var In=ti(78),Ln=ti(84),jn=ti(2);class Cn{constructor(si){this.fonts=new Map,this.cache=new Map,this.warned=new Set,this.defaultFont=null,this.add(si)}add(si,ei=null){for(const Nn of si)this.addPdfFont(Nn);for(const Nn of this.fonts.values())Nn.regular||(Nn.regular=Nn.italic||Nn.bold||Nn.bolditalic);if(!ei||ei.size===0)return;const Bn=this.fonts.get("PdfJS-Fallback-PdfJS-XFA");for(const Nn of ei)this.fonts.set(Nn,Bn)}addPdfFont(si){var hi,Xn,ii;const ei=si.cssFontInfo,Bn=ei.fontFamily;let Nn=this.fonts.get(Bn);Nn||(Nn=Object.create(null),this.fonts.set(Bn,Nn),this.defaultFont||(this.defaultFont=Nn));let Hn="";const On=parseFloat(ei.fontWeight);parseFloat(ei.italicAngle)!==0?Hn=On>=700?"bolditalic":"italic":On>=700&&(Hn="bold"),Hn||((si.name.includes("Bold")||(hi=si.psName)!=null&&hi.includes("Bold"))&&(Hn="bold"),(si.name.includes("Italic")||si.name.endsWith("It")||(Xn=si.psName)!=null&&Xn.includes("Italic")||(ii=si.psName)!=null&&ii.endsWith("It"))&&(Hn+="italic")),Hn||(Hn="regular"),Nn[Hn]=si}getDefault(){return this.defaultFont}find(si,ei=!0){var hi,Xn;let Bn=this.fonts.get(si)||this.cache.get(si);if(Bn)return Bn;const Nn=/,|-|_| |bolditalic|bold|italic|regular|it/gi;let Hn=si.replaceAll(Nn,"");if(Bn=this.fonts.get(Hn),Bn)return this.cache.set(si,Bn),Bn;Hn=Hn.toLowerCase();const On=[];for(const[ii,ri]of this.fonts.entries())ii.replaceAll(Nn,"").toLowerCase().startsWith(Hn)&&On.push(ri);if(On.length===0)for(const[,ii]of this.fonts.entries())(hi=ii.regular.name)!=null&&hi.replaceAll(Nn,"").toLowerCase().startsWith(Hn)&&On.push(ii);if(On.length===0){Hn=Hn.replaceAll(/psmt|mt/gi,"");for(const[ii,ri]of this.fonts.entries())ii.replaceAll(Nn,"").toLowerCase().startsWith(Hn)&&On.push(ri)}if(On.length===0)for(const ii of this.fonts.values())(Xn=ii.regular.name)!=null&&Xn.replaceAll(Nn,"").toLowerCase().startsWith(Hn)&&On.push(ii);return On.length>=1?(On.length!==1&&ei&&(0,jn.warn)(`XFA - Too many choices to guess the correct font: ${si}`),this.cache.set(si,On[0]),On[0]):(ei&&!this.warned.has(si)&&(this.warned.add(si),(0,jn.warn)(`XFA - Cannot find the font: ${si}`)),null)}}Mn.FontFinder=Cn;function Tn(ui,si){return ui.posture==="italic"?ui.weight==="bold"?si.bolditalic:si.italic:ui.weight==="bold"?si.bold:si.regular}function Rn(ui,si=!1){let ei=null;if(ui){const On=(0,Ln.stripQuotes)(ui.typeface),hi=ui[In.$globalData].fontFinder.find(On);ei=Tn(ui,hi)}if(!ei)return{lineHeight:12,lineGap:2,lineNoGap:10};const Bn=ui.size||10,Nn=ei.lineHeight?Math.max(si?0:1.2,ei.lineHeight):1.2,Hn=ei.lineGap===void 0?.2:ei.lineGap;return{lineHeight:Nn*Bn,lineGap:Hn*Bn,lineNoGap:Math.max(1,Nn-Hn)*Bn}}},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.TextMeasure=void 0;var In=ti(85);const Ln=1.02;class jn{constructor(ui,si,ei,Bn){if(this.lineHeight=ei,this.paraMargin=si||{top:0,bottom:0,left:0,right:0},!ui){[this.pdfFont,this.xfaFont]=this.defaultFont(Bn);return}this.xfaFont={typeface:ui.typeface,posture:ui.posture,weight:ui.weight,size:ui.size,letterSpacing:ui.letterSpacing};const Nn=Bn.find(ui.typeface);if(!Nn){[this.pdfFont,this.xfaFont]=this.defaultFont(Bn);return}this.pdfFont=(0,In.selectFont)(ui,Nn),this.pdfFont||([this.pdfFont,this.xfaFont]=this.defaultFont(Bn))}defaultFont(ui){const si=ui.find("Helvetica",!1)||ui.find("Myriad Pro",!1)||ui.find("Arial",!1)||ui.getDefault();if(si!=null&&si.regular){const Bn=si.regular,Hn={typeface:Bn.cssFontInfo.fontFamily,posture:"normal",weight:"normal",size:10,letterSpacing:0};return[Bn,Hn]}return[null,{typeface:"Courier",posture:"normal",weight:"normal",size:10,letterSpacing:0}]}}class Cn{constructor(ui,si,ei,Bn){this.fontFinder=Bn,this.stack=[new jn(ui,si,ei,Bn)]}pushData(ui,si,ei){const Bn=this.stack.at(-1);for(const Hn of["typeface","posture","weight","size","letterSpacing"])ui[Hn]||(ui[Hn]=Bn.xfaFont[Hn]);for(const Hn of["top","bottom","left","right"])isNaN(si[Hn])&&(si[Hn]=Bn.paraMargin[Hn]);const Nn=new jn(ui,si,ei||Bn.lineHeight,this.fontFinder);Nn.pdfFont||(Nn.pdfFont=Bn.pdfFont),this.stack.push(Nn)}popFont(){this.stack.pop()}topFont(){return this.stack.at(-1)}}class Tn{constructor(ui,si,ei,Bn){this.glyphs=[],this.fontSelector=new Cn(ui,si,ei,Bn),this.extraHeight=0}pushData(ui,si,ei){this.fontSelector.pushData(ui,si,ei)}popFont(ui){return this.fontSelector.popFont()}addPara(){const ui=this.fontSelector.topFont();this.extraHeight+=ui.paraMargin.top+ui.paraMargin.bottom}addString(ui){if(!ui)return;const si=this.fontSelector.topFont(),ei=si.xfaFont.size;if(si.pdfFont){const Bn=si.xfaFont.letterSpacing,Nn=si.pdfFont,Hn=Nn.lineHeight||1.2,On=si.lineHeight||Math.max(1.2,Hn)*ei,hi=Nn.lineGap===void 0?.2:Nn.lineGap,Xn=Hn-hi,ii=Math.max(1,Xn)*ei,ri=ei/1e3,di=Nn.defaultWidth||Nn.charsToGlyphs(" ")[0].width;for(const fi of ui.split(/[\u2029\n]/)){const wi=Nn.encodeString(fi).join(""),Jn=Nn.charsToGlyphs(wi);for(const pi of Jn){const Zn=pi.width||di;this.glyphs.push([Zn*ri+Bn,On,ii,pi.unicode,!1])}this.glyphs.push([0,0,0,`
`,!0])}this.glyphs.pop();return}for(const Bn of ui.split(/[\u2029\n]/)){for(const Nn of Bn.split(""))this.glyphs.push([ei,1.2*ei,ei,Nn,!1]);this.glyphs.push([0,0,0,`
`,!0])}this.glyphs.pop()}compute(ui){let si=-1,ei=0,Bn=0,Nn=0,Hn=0,On=0,hi=!1,Xn=!0;for(let ii=0,ri=this.glyphs.length;ii<ri;ii++){const[di,fi,wi,Jn,pi]=this.glyphs[ii],Zn=Jn===" ",Gn=Xn?wi:fi;if(pi){Bn=Math.max(Bn,Hn),Hn=0,Nn+=On,On=Gn,si=-1,ei=0,Xn=!1;continue}if(Zn){Hn+di>ui?(Bn=Math.max(Bn,Hn),Hn=0,Nn+=On,On=Gn,si=-1,ei=0,hi=!0,Xn=!1):(On=Math.max(Gn,On),ei=Hn,Hn+=di,si=ii);continue}if(Hn+di>ui){Nn+=On,On=Gn,si!==-1?(ii=si,Bn=Math.max(Bn,ei),Hn=0,si=-1,ei=0):(Bn=Math.max(Bn,Hn),Hn=di),hi=!0,Xn=!1;continue}Hn+=di,On=Math.max(Gn,On)}return Bn=Math.max(Bn,Hn),Nn+=On+this.extraHeight,{width:Ln*Bn,height:Nn,isBroken:hi}}}Mn.TextMeasure=Tn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.XmlObject=Mn.XFAObjectArray=Mn.XFAObject=Mn.XFAAttribute=Mn.StringObject=Mn.OptionObject=Mn.Option10=Mn.Option01=Mn.IntegerObject=Mn.ContentObject=void 0;var In=ti(78),Ln=ti(84),jn=ti(2),Cn=ti(3),Tn=ti(81),Rn=ti(88);const ui=Symbol(),si=Symbol(),ei=Symbol(),Bn=Symbol("_children"),Nn=Symbol(),Hn=Symbol(),On=Symbol(),hi=Symbol(),Xn=Symbol(),ii=Symbol(),ri=Symbol(),di=Symbol(),fi=Symbol(),wi=Symbol("parent"),Jn=Symbol(),pi=Symbol(),Zn=Symbol();let Gn=0;const mi=Tn.NamespaceIds.datasets.id;class Wn{constructor(Yn,ci,bi=!1){this[In.$namespaceId]=Yn,this[In.$nodeName]=ci,this[ri]=bi,this[wi]=null,this[Bn]=[],this[In.$uid]=`${ci}${Gn++}`,this[In.$globalData]=null}get isXFAObject(){return!0}get isXFAObjectArray(){return!1}createNodes(Yn){let ci=this,bi=null;for(const{name:Ci,index:Fi}of Yn){for(let zi=0,_i=isFinite(Fi)?Fi:0;zi<=_i;zi++){const ji=ci[In.$namespaceId]===mi?-1:ci[In.$namespaceId];bi=new Ai(ji,Ci),ci[In.$appendChild](bi)}ci=bi}return bi}[In.$onChild](Yn){if(!this[ri]||!this[In.$onChildCheck](Yn))return!1;const ci=Yn[In.$nodeName],bi=this[ci];if(bi instanceof ni){if(bi.push(Yn))return this[In.$appendChild](Yn),!0}else return bi!==null&&this[In.$removeChild](bi),this[ci]=Yn,this[In.$appendChild](Yn),!0;let Ci="";return this.id?Ci=` (id: ${this.id})`:this.name&&(Ci=` (name: ${this.name} ${this.h.value})`),(0,jn.warn)(`XFA - node "${this[In.$nodeName]}"${Ci} has already enough "${ci}"!`),!1}[In.$onChildCheck](Yn){return this.hasOwnProperty(Yn[In.$nodeName])&&Yn[In.$namespaceId]===this[In.$namespaceId]}[In.$isNsAgnostic](){return!1}[In.$acceptWhitespace](){return!1}[In.$isCDATAXml](){return!1}[In.$isBindable](){return!1}[In.$popPara](){this.para&&this[In.$getTemplateRoot]()[In.$extra].paraStack.pop()}[In.$pushPara](){this[In.$getTemplateRoot]()[In.$extra].paraStack.push(this.para)}[In.$setId](Yn){this.id&&this[In.$namespaceId]===Tn.NamespaceIds.template.id&&Yn.set(this.id,this)}[In.$getTemplateRoot](){return this[In.$globalData].template}[In.$isSplittable](){return!1}[In.$isThereMoreWidth](){return!1}[In.$appendChild](Yn){Yn[wi]=this,this[Bn].push(Yn),!Yn[In.$globalData]&&this[In.$globalData]&&(Yn[In.$globalData]=this[In.$globalData])}[In.$removeChild](Yn){const ci=this[Bn].indexOf(Yn);this[Bn].splice(ci,1)}[In.$hasSettableValue](){return this.hasOwnProperty("value")}[In.$setValue](Yn){}[In.$onText](Yn){}[In.$finalize](){}[In.$clean](Yn){delete this[ri],this[In.$cleanup]&&(Yn.clean(this[In.$cleanup]),delete this[In.$cleanup])}[In.$indexOf](Yn){return this[Bn].indexOf(Yn)}[In.$insertAt](Yn,ci){ci[wi]=this,this[Bn].splice(Yn,0,ci),!ci[In.$globalData]&&this[In.$globalData]&&(ci[In.$globalData]=this[In.$globalData])}[In.$isTransparent](){return!this.name}[In.$lastAttribute](){return""}[In.$text](){return this[Bn].length===0?this[In.$content]:this[Bn].map(Yn=>Yn[In.$text]()).join("")}get[ei](){const Yn=Object.getPrototypeOf(this);if(!Yn._attributes){const ci=Yn._attributes=new Set;for(const bi of Object.getOwnPropertyNames(this)){if(this[bi]===null||this[bi]instanceof Wn||this[bi]instanceof ni)break;ci.add(bi)}}return(0,jn.shadow)(this,ei,Yn._attributes)}[In.$isDescendent](Yn){let ci=this;for(;ci;){if(ci===Yn)return!0;ci=ci[In.$getParent]()}return!1}[In.$getParent](){return this[wi]}[In.$getSubformParent](){return this[In.$getParent]()}[In.$getChildren](Yn=null){return Yn?this[Yn]:this[Bn]}[In.$dump](){const Yn=Object.create(null);this[In.$content]&&(Yn.$content=this[In.$content]);for(const ci of Object.getOwnPropertyNames(this)){const bi=this[ci];bi!==null&&(bi instanceof Wn?Yn[ci]=bi[In.$dump]():bi instanceof ni?bi.isEmpty()||(Yn[ci]=bi.dump()):Yn[ci]=bi)}return Yn}[In.$toStyle](){return null}[In.$toHTML](){return Ln.HTMLResult.EMPTY}*[In.$getContainedChildren](){for(const Yn of this[In.$getChildren]())yield Yn}*[hi](Yn,ci){for(const bi of this[In.$getContainedChildren]())if(!Yn||ci===Yn.has(bi[In.$nodeName])){const Ci=this[In.$getAvailableSpace](),Fi=bi[In.$toHTML](Ci);Fi.success||(this[In.$extra].failingNode=bi),yield Fi}}[In.$flushHTML](){return null}[In.$addHTML](Yn,ci){this[In.$extra].children.push(Yn)}[In.$getAvailableSpace](){}[In.$childrenToHTML]({filter:Yn=null,include:ci=!0}){if(!this[In.$extra].generator)this[In.$extra].generator=this[hi](Yn,ci);else{const bi=this[In.$getAvailableSpace](),Ci=this[In.$extra].failingNode[In.$toHTML](bi);if(!Ci.success)return Ci;Ci.html&&this[In.$addHTML](Ci.html,Ci.bbox),delete this[In.$extra].failingNode}for(;;){const bi=this[In.$extra].generator.next();if(bi.done)break;const Ci=bi.value;if(!Ci.success)return Ci;Ci.html&&this[In.$addHTML](Ci.html,Ci.bbox)}return this[In.$extra].generator=null,Ln.HTMLResult.EMPTY}[In.$setSetAttributes](Yn){this[pi]=new Set(Object.keys(Yn))}[ii](Yn){const ci=this[ei],bi=this[pi];return[...Yn].filter(Ci=>ci.has(Ci)&&!bi.has(Ci))}[In.$resolvePrototypes](Yn,ci=new Set){for(const bi of this[Bn])bi[Jn](Yn,ci)}[Jn](Yn,ci){const bi=this[Xn](Yn,ci);bi?this[ui](bi,Yn,ci):this[In.$resolvePrototypes](Yn,ci)}[Xn](Yn,ci){const{use:bi,usehref:Ci}=this;if(!bi&&!Ci)return null;let Fi=null,zi=null,_i=null,ji=bi;if(Ci?(ji=Ci,Ci.startsWith("#som(")&&Ci.endsWith(")")?zi=Ci.slice(5,-1):Ci.startsWith(".#som(")&&Ci.endsWith(")")?zi=Ci.slice(6,-1):Ci.startsWith("#")?_i=Ci.slice(1):Ci.startsWith(".#")&&(_i=Ci.slice(2))):bi.startsWith("#")?_i=bi.slice(1):zi=bi,this.use=this.usehref="",_i?Fi=Yn.get(_i):(Fi=(0,Rn.searchNode)(Yn.get(In.$root),this,zi,!0,!1),Fi&&(Fi=Fi[0])),!Fi)return(0,jn.warn)(`XFA - Invalid prototype reference: ${ji}.`),null;if(Fi[In.$nodeName]!==this[In.$nodeName])return(0,jn.warn)(`XFA - Incompatible prototype: ${Fi[In.$nodeName]} !== ${this[In.$nodeName]}.`),null;if(ci.has(Fi))return(0,jn.warn)("XFA - Cycle detected in prototypes use."),null;ci.add(Fi);const Pi=Fi[Xn](Yn,ci);return Pi&&Fi[ui](Pi,Yn,ci),Fi[In.$resolvePrototypes](Yn,ci),ci.delete(Fi),Fi}[ui](Yn,ci,bi){if(bi.has(Yn)){(0,jn.warn)("XFA - Cycle detected in prototypes use.");return}!this[In.$content]&&Yn[In.$content]&&(this[In.$content]=Yn[In.$content]),new Set(bi).add(Yn);for(const Fi of this[ii](Yn[pi]))this[Fi]=Yn[Fi],this[pi]&&this[pi].add(Fi);for(const Fi of Object.getOwnPropertyNames(this)){if(this[ei].has(Fi))continue;const zi=this[Fi],_i=Yn[Fi];if(zi instanceof ni){for(const ji of zi[Bn])ji[Jn](ci,bi);for(let ji=zi[Bn].length,Pi=_i[Bn].length;ji<Pi;ji++){const Ni=Yn[Bn][ji][In.$clone]();if(zi.push(Ni))Ni[wi]=this,this[Bn].push(Ni),Ni[Jn](ci,bi);else break}continue}if(zi!==null){zi[In.$resolvePrototypes](ci,bi),_i&&zi[ui](_i,ci,bi);continue}if(_i!==null){const ji=_i[In.$clone]();ji[wi]=this,this[Fi]=ji,this[Bn].push(ji),ji[Jn](ci,bi)}}}static[Nn](Yn){return Array.isArray(Yn)?Yn.map(ci=>Wn[Nn](ci)):typeof Yn=="object"&&Yn!==null?Object.assign({},Yn):Yn}[In.$clone](){const Yn=Object.create(Object.getPrototypeOf(this));for(const ci of Object.getOwnPropertySymbols(this))try{Yn[ci]=this[ci]}catch{(0,jn.shadow)(Yn,ci,this[ci])}Yn[In.$uid]=`${Yn[In.$nodeName]}${Gn++}`,Yn[Bn]=[];for(const ci of Object.getOwnPropertyNames(this)){if(this[ei].has(ci)){Yn[ci]=Wn[Nn](this[ci]);continue}const bi=this[ci];Yn[ci]=bi instanceof ni?new ni(bi[di]):null}for(const ci of this[Bn]){const bi=ci[In.$nodeName],Ci=ci[In.$clone]();Yn[Bn].push(Ci),Ci[wi]=Yn,Yn[bi]===null?Yn[bi]=Ci:Yn[bi][Bn].push(Ci)}return Yn}[In.$getChildren](Yn=null){return Yn?this[Bn].filter(ci=>ci[In.$nodeName]===Yn):this[Bn]}[In.$getChildrenByClass](Yn){return this[Yn]}[In.$getChildrenByName](Yn,ci,bi=!0){return Array.from(this[In.$getChildrenByNameIt](Yn,ci,bi))}*[In.$getChildrenByNameIt](Yn,ci,bi=!0){if(Yn==="parent"){yield this[wi];return}for(const Ci of this[Bn])Ci[In.$nodeName]===Yn&&(yield Ci),Ci.name===Yn&&(yield Ci),(ci||Ci[In.$isTransparent]())&&(yield*Ci[In.$getChildrenByNameIt](Yn,ci,!1));bi&&this[ei].has(Yn)&&(yield new li(this,Yn,this[Yn]))}}Mn.XFAObject=Wn;class ni{constructor(Yn=1/0){this[di]=Yn,this[Bn]=[]}get isXFAObject(){return!1}get isXFAObjectArray(){return!0}push(Yn){return this[Bn].length<=this[di]?(this[Bn].push(Yn),!0):((0,jn.warn)(`XFA - node "${Yn[In.$nodeName]}" accepts no more than ${this[di]} children`),!1)}isEmpty(){return this[Bn].length===0}dump(){return this[Bn].length===1?this[Bn][0][In.$dump]():this[Bn].map(Yn=>Yn[In.$dump]())}[In.$clone](){const Yn=new ni(this[di]);return Yn[Bn]=this[Bn].map(ci=>ci[In.$clone]()),Yn}get children(){return this[Bn]}clear(){this[Bn].length=0}}Mn.XFAObjectArray=ni;class li{constructor(Yn,ci,bi){this[wi]=Yn,this[In.$nodeName]=ci,this[In.$content]=bi,this[In.$consumed]=!1,this[In.$uid]=`attribute${Gn++}`}[In.$getParent](){return this[wi]}[In.$isDataValue](){return!0}[In.$getDataValue](){return this[In.$content].trim()}[In.$setValue](Yn){Yn=Yn.value||"",this[In.$content]=Yn.toString()}[In.$text](){return this[In.$content]}[In.$isDescendent](Yn){return this[wi]===Yn||this[wi][In.$isDescendent](Yn)}}Mn.XFAAttribute=li;class Ai extends Wn{constructor(Yn,ci,bi={}){if(super(Yn,ci),this[In.$content]="",this[Hn]=null,ci!=="#text"){const Ci=new Map;this[si]=Ci;for(const[Fi,zi]of Object.entries(bi))Ci.set(Fi,new li(this,Fi,zi));if(bi.hasOwnProperty(In.$nsAttributes)){const Fi=bi[In.$nsAttributes].xfa.dataNode;Fi!==void 0&&(Fi==="dataGroup"?this[Hn]=!1:Fi==="dataValue"&&(this[Hn]=!0))}}this[In.$consumed]=!1}[In.$toString](Yn){const ci=this[In.$nodeName];if(ci==="#text"){Yn.push((0,Cn.encodeToXmlString)(this[In.$content]));return}const bi=(0,jn.utf8StringToString)(ci),Ci=this[In.$namespaceId]===mi?"xfa:":"";Yn.push(`<${Ci}${bi}`);for(const[Fi,zi]of this[si].entries()){const _i=(0,jn.utf8StringToString)(Fi);Yn.push(` ${_i}="${(0,Cn.encodeToXmlString)(zi[In.$content])}"`)}if(this[Hn]!==null&&(this[Hn]?Yn.push(' xfa:dataNode="dataValue"'):Yn.push(' xfa:dataNode="dataGroup"')),!this[In.$content]&&this[Bn].length===0){Yn.push("/>");return}if(Yn.push(">"),this[In.$content])typeof this[In.$content]=="string"?Yn.push((0,Cn.encodeToXmlString)(this[In.$content])):this[In.$content][In.$toString](Yn);else for(const Fi of this[Bn])Fi[In.$toString](Yn);Yn.push(`</${Ci}${bi}>`)}[In.$onChild](Yn){if(this[In.$content]){const ci=new Ai(this[In.$namespaceId],"#text");this[In.$appendChild](ci),ci[In.$content]=this[In.$content],this[In.$content]=""}return this[In.$appendChild](Yn),!0}[In.$onText](Yn){this[In.$content]+=Yn}[In.$finalize](){if(this[In.$content]&&this[Bn].length>0){const Yn=new Ai(this[In.$namespaceId],"#text");this[In.$appendChild](Yn),Yn[In.$content]=this[In.$content],delete this[In.$content]}}[In.$toHTML](){return this[In.$nodeName]==="#text"?Ln.HTMLResult.success({name:"#text",value:this[In.$content]}):Ln.HTMLResult.EMPTY}[In.$getChildren](Yn=null){return Yn?this[Bn].filter(ci=>ci[In.$nodeName]===Yn):this[Bn]}[In.$getAttributes](){return this[si]}[In.$getChildrenByClass](Yn){const ci=this[si].get(Yn);return ci!==void 0?ci:this[In.$getChildren](Yn)}*[In.$getChildrenByNameIt](Yn,ci){const bi=this[si].get(Yn);bi&&(yield bi);for(const Ci of this[Bn])Ci[In.$nodeName]===Yn&&(yield Ci),ci&&(yield*Ci[In.$getChildrenByNameIt](Yn,ci))}*[In.$getAttributeIt](Yn,ci){const bi=this[si].get(Yn);bi&&(!ci||!bi[In.$consumed])&&(yield bi);for(const Ci of this[Bn])yield*Ci[In.$getAttributeIt](Yn,ci)}*[In.$getRealChildrenByNameIt](Yn,ci,bi){for(const Ci of this[Bn])Ci[In.$nodeName]===Yn&&(!bi||!Ci[In.$consumed])&&(yield Ci),ci&&(yield*Ci[In.$getRealChildrenByNameIt](Yn,ci,bi))}[In.$isDataValue](){return this[Hn]===null?this[Bn].length===0||this[Bn][0][In.$namespaceId]===Tn.NamespaceIds.xhtml.id:this[Hn]}[In.$getDataValue](){return this[Hn]===null?this[Bn].length===0?this[In.$content].trim():this[Bn][0][In.$namespaceId]===Tn.NamespaceIds.xhtml.id?this[Bn][0][In.$text]().trim():null:this[In.$content].trim()}[In.$setValue](Yn){Yn=Yn.value||"",this[In.$content]=Yn.toString()}[In.$dump](Yn=!1){const ci=Object.create(null);Yn&&(ci.$ns=this[In.$namespaceId]),this[In.$content]&&(ci.$content=this[In.$content]),ci.$name=this[In.$nodeName],ci.children=[];for(const bi of this[Bn])ci.children.push(bi[In.$dump](Yn));ci.attributes=Object.create(null);for(const[bi,Ci]of this[si])ci.attributes[bi]=Ci[In.$content];return ci}}Mn.XmlObject=Ai;class gi extends Wn{constructor(Yn,ci){super(Yn,ci),this[In.$content]=""}[In.$onText](Yn){this[In.$content]+=Yn}[In.$finalize](){}}Mn.ContentObject=gi;class yi extends gi{constructor(Yn,ci,bi){super(Yn,ci),this[fi]=bi}[In.$finalize](){this[In.$content]=(0,Ln.getKeyword)({data:this[In.$content],defaultValue:this[fi][0],validate:Yn=>this[fi].includes(Yn)})}[In.$clean](Yn){super[In.$clean](Yn),delete this[fi]}}Mn.OptionObject=yi;class Ii extends gi{[In.$finalize](){this[In.$content]=this[In.$content].trim()}}Mn.StringObject=Ii;class xi extends gi{constructor(Yn,ci,bi,Ci){super(Yn,ci),this[On]=bi,this[Zn]=Ci}[In.$finalize](){this[In.$content]=(0,Ln.getInteger)({data:this[In.$content],defaultValue:this[On],validate:this[Zn]})}[In.$clean](Yn){super[In.$clean](Yn),delete this[On],delete this[Zn]}}Mn.IntegerObject=xi;class Qn extends xi{constructor(Yn,ci){super(Yn,ci,0,bi=>bi===1)}}Mn.Option01=Qn;class ai extends xi{constructor(Yn,ci){super(Yn,ci,1,bi=>bi===0)}}Mn.Option10=ai},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.createDataNode=Nn,Mn.searchNode=Bn;var In=ti(78),Ln=ti(2);const jn=/^[^.[]+/,Cn=/^[^\]]+/,Tn={dot:0,dotDot:1,dotHash:2,dotBracket:3,dotParen:4},Rn=new Map([["$data",(Hn,On)=>Hn.datasets?Hn.datasets.data:Hn],["$record",(Hn,On)=>(Hn.datasets?Hn.datasets.data:Hn)[In.$getChildren]()[0]],["$template",(Hn,On)=>Hn.template],["$connectionSet",(Hn,On)=>Hn.connectionSet],["$form",(Hn,On)=>Hn.form],["$layout",(Hn,On)=>Hn.layout],["$host",(Hn,On)=>Hn.host],["$dataWindow",(Hn,On)=>Hn.dataWindow],["$event",(Hn,On)=>Hn.event],["!",(Hn,On)=>Hn.datasets],["$xfa",(Hn,On)=>Hn],["xfa",(Hn,On)=>Hn],["$",(Hn,On)=>On]]),ui=new WeakMap;function si(Hn){return Hn=Hn.trim(),Hn==="*"?1/0:parseInt(Hn,10)||0}function ei(Hn,On,hi=!0){let Xn=Hn.match(jn);if(!Xn)return null;let[ii]=Xn;const ri=[{name:ii,cacheName:"."+ii,index:0,js:null,formCalc:null,operator:Tn.dot}];let di=ii.length;for(;di<Hn.length;){const fi=di;if(Hn.charAt(di++)==="["){if(Xn=Hn.slice(di).match(Cn),!Xn)return(0,Ln.warn)("XFA - Invalid index in SOM expression"),null;ri.at(-1).index=si(Xn[0]),di+=Xn[0].length+1;continue}let Jn;switch(Hn.charAt(di)){case".":if(!On)return null;di++,Jn=Tn.dotDot;break;case"#":di++,Jn=Tn.dotHash;break;case"[":if(hi)return(0,Ln.warn)("XFA - SOM expression contains a FormCalc subexpression which is not supported for now."),null;Jn=Tn.dotBracket;break;case"(":if(hi)return(0,Ln.warn)("XFA - SOM expression contains a JavaScript subexpression which is not supported for now."),null;Jn=Tn.dotParen;break;default:Jn=Tn.dot;break}if(Xn=Hn.slice(di).match(jn),!Xn)break;[ii]=Xn,di+=ii.length,ri.push({name:ii,cacheName:Hn.slice(fi,di),operator:Jn,index:0,js:null,formCalc:null})}return ri}function Bn(Hn,On,hi,Xn=!0,ii=!0){const ri=ei(hi,Xn);if(!ri)return null;const di=Rn.get(ri[0].name);let fi=0,wi;di?(wi=!0,Hn=[di(Hn,On)],fi=1):(wi=On===null,Hn=[On||Hn]);for(let Jn=ri.length;fi<Jn;fi++){const{name:pi,cacheName:Zn,operator:Gn,index:mi}=ri[fi],Wn=[];for(const ni of Hn){if(!ni.isXFAObject)continue;let li,Ai;if(ii&&(Ai=ui.get(ni),Ai||(Ai=new Map,ui.set(ni,Ai)),li=Ai.get(Zn)),!li){switch(Gn){case Tn.dot:li=ni[In.$getChildrenByName](pi,!1);break;case Tn.dotDot:li=ni[In.$getChildrenByName](pi,!0);break;case Tn.dotHash:li=ni[In.$getChildrenByClass](pi),li=li.isXFAObjectArray?li.children:[li];break}ii&&Ai.set(Zn,li)}li.length>0&&Wn.push(li)}if(Wn.length===0&&!wi&&fi===0){if(On=On[In.$getParent](),!On)return null;fi=-1,Hn=[On];continue}Hn=isFinite(mi)?Wn.filter(ni=>mi<ni.length).map(ni=>ni[mi]):Wn.flat()}return Hn.length===0?null:Hn}function Nn(Hn,On,hi){const Xn=ei(hi);if(!Xn||Xn.some(di=>di.operator===Tn.dotDot))return null;const ii=Rn.get(Xn[0].name);let ri=0;ii?(Hn=ii(Hn,On),ri=1):Hn=On||Hn;for(let di=Xn.length;ri<di;ri++){const{name:fi,operator:wi,index:Jn}=Xn[ri];if(!isFinite(Jn))return Xn[ri].index=0,Hn.createNodes(Xn.slice(ri));let pi;switch(wi){case Tn.dot:pi=Hn[In.$getChildrenByName](fi,!1);break;case Tn.dotDot:pi=Hn[In.$getChildrenByName](fi,!0);break;case Tn.dotHash:pi=Hn[In.$getChildrenByClass](fi),pi=pi.isXFAObjectArray?pi.children:[pi];break}if(pi.length===0)return Hn.createNodes(Xn.slice(ri));if(Jn<pi.length){const Zn=pi[Jn];if(!Zn.isXFAObject)return(0,Ln.warn)("XFA - Cannot create a node."),null;Hn=Zn}else return Xn[ri].index=Jn-pi.length,Hn.createNodes(Xn.slice(ri))}return null}},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.DataHandler=void 0;var In=ti(78);class Ln{constructor(Cn,Tn){this.data=Tn,this.dataset=Cn.datasets||null}serialize(Cn){const Tn=[[-1,this.data[In.$getChildren]()]];for(;Tn.length>0;){const ui=Tn.at(-1),[si,ei]=ui;if(si+1===ei.length){Tn.pop();continue}const Bn=ei[++ui[0]],Nn=Cn.get(Bn[In.$uid]);if(Nn)Bn[In.$setValue](Nn);else{const On=Bn[In.$getAttributes]();for(const hi of On.values()){const Xn=Cn.get(hi[In.$uid]);if(Xn){hi[In.$setValue](Xn);break}}}const Hn=Bn[In.$getChildren]();Hn.length>0&&Tn.push([-1,Hn])}const Rn=['<xfa:datasets xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/">'];if(this.dataset)for(const ui of this.dataset[In.$getChildren]())ui[In.$nodeName]!=="data"&&ui[In.$toString](Rn);return this.data[In.$toString](Rn),Rn.push("</xfa:datasets>"),Rn.join("")}}Mn.DataHandler=Ln},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.XFAParser=void 0;var In=ti(78),Ln=ti(71),jn=ti(91),Cn=ti(2);class Tn extends Ln.XMLParserBase{constructor(ui=null,si=!1){super(),this._builder=new jn.Builder(ui),this._stack=[],this._globalData={usedTypefaces:new Set},this._ids=new Map,this._current=this._builder.buildRoot(this._ids),this._errorCode=Ln.XMLParserErrorCode.NoError,this._whiteRegex=/^\s+$/,this._nbsps=/\xa0+/g,this._richText=si}parse(ui){if(this.parseXml(ui),this._errorCode===Ln.XMLParserErrorCode.NoError)return this._current[In.$finalize](),this._current.element}onText(ui){if(ui=ui.replace(this._nbsps,si=>si.slice(1)+" "),this._richText||this._current[In.$acceptWhitespace]()){this._current[In.$onText](ui,this._richText);return}this._whiteRegex.test(ui)||this._current[In.$onText](ui.trim())}onCdata(ui){this._current[In.$onText](ui)}_mkAttributes(ui,si){let ei=null,Bn=null;const Nn=Object.create({});for(const{name:Hn,value:On}of ui)if(Hn==="xmlns")ei?(0,Cn.warn)(`XFA - multiple namespace definition in <${si}>`):ei=On;else if(Hn.startsWith("xmlns:")){const hi=Hn.substring(6);Bn||(Bn=[]),Bn.push({prefix:hi,value:On})}else{const hi=Hn.indexOf(":");if(hi===-1)Nn[Hn]=On;else{let Xn=Nn[In.$nsAttributes];Xn||(Xn=Nn[In.$nsAttributes]=Object.create(null));const[ii,ri]=[Hn.slice(0,hi),Hn.slice(hi+1)],di=Xn[ii]||(Xn[ii]=Object.create(null));di[ri]=On}}return[ei,Bn,Nn]}_getNameAndPrefix(ui,si){const ei=ui.indexOf(":");return ei===-1?[ui,null]:[ui.substring(ei+1),si?"":ui.substring(0,ei)]}onBeginElement(ui,si,ei){const[Bn,Nn,Hn]=this._mkAttributes(si,ui),[On,hi]=this._getNameAndPrefix(ui,this._builder.isNsAgnostic()),Xn=this._builder.build({nsPrefix:hi,name:On,attributes:Hn,namespace:Bn,prefixes:Nn});if(Xn[In.$globalData]=this._globalData,ei){Xn[In.$finalize](),this._current[In.$onChild](Xn)&&Xn[In.$setId](this._ids),Xn[In.$clean](this._builder);return}this._stack.push(this._current),this._current=Xn}onEndElement(ui){const si=this._current;if(si[In.$isCDATAXml]()&&typeof si[In.$content]=="string"){const ei=new Tn;ei._globalData=this._globalData;const Bn=ei.parse(si[In.$content]);si[In.$content]=null,si[In.$onChild](Bn)}si[In.$finalize](),this._current=this._stack.pop(),this._current[In.$onChild](si)&&si[In.$setId](this._ids),si[In.$clean](this._builder)}onError(ui){this._errorCode=ui}}Mn.XFAParser=Tn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.Builder=void 0;var In=ti(81),Ln=ti(78),jn=ti(92),Cn=ti(80),Tn=ti(101),Rn=ti(2),ui=ti(87);class si extends ui.XFAObject{constructor(Hn){super(-1,"root",Object.create(null)),this.element=null,this[Ln.$ids]=Hn}[Ln.$onChild](Hn){return this.element=Hn,!0}[Ln.$finalize](){super[Ln.$finalize](),this.element.template instanceof Cn.Template&&(this[Ln.$ids].set(Ln.$root,this.element),this.element.template[Ln.$resolvePrototypes](this[Ln.$ids]),this.element.template[Ln.$ids]=this[Ln.$ids])}}class ei extends ui.XFAObject{constructor(){super(-1,"",Object.create(null))}[Ln.$onChild](Hn){return!1}}class Bn{constructor(Hn=null){this._namespaceStack=[],this._nsAgnosticLevel=0,this._namespacePrefixes=new Map,this._namespaces=new Map,this._nextNsId=Math.max(...Object.values(In.NamespaceIds).map(({id:On})=>On)),this._currentNamespace=Hn||new Tn.UnknownNamespace(++this._nextNsId)}buildRoot(Hn){return new si(Hn)}build({nsPrefix:Hn,name:On,attributes:hi,namespace:Xn,prefixes:ii}){const ri=Xn!==null;if(ri&&(this._namespaceStack.push(this._currentNamespace),this._currentNamespace=this._searchNamespace(Xn)),ii&&this._addNamespacePrefix(ii),hi.hasOwnProperty(Ln.$nsAttributes)){const wi=jn.NamespaceSetUp.datasets,Jn=hi[Ln.$nsAttributes];let pi=null;for(const[Zn,Gn]of Object.entries(Jn))if(this._getNamespaceToUse(Zn)===wi){pi={xfa:Gn};break}pi?hi[Ln.$nsAttributes]=pi:delete hi[Ln.$nsAttributes]}const di=this._getNamespaceToUse(Hn),fi=(di==null?void 0:di[In.$buildXFAObject](On,hi))||new ei;return fi[Ln.$isNsAgnostic]()&&this._nsAgnosticLevel++,(ri||ii||fi[Ln.$isNsAgnostic]())&&(fi[Ln.$cleanup]={hasNamespace:ri,prefixes:ii,nsAgnostic:fi[Ln.$isNsAgnostic]()}),fi}isNsAgnostic(){return this._nsAgnosticLevel>0}_searchNamespace(Hn){let On=this._namespaces.get(Hn);if(On)return On;for(const[hi,{check:Xn}]of Object.entries(In.NamespaceIds))if(Xn(Hn)){if(On=jn.NamespaceSetUp[hi],On)return this._namespaces.set(Hn,On),On;break}return On=new Tn.UnknownNamespace(++this._nextNsId),this._namespaces.set(Hn,On),On}_addNamespacePrefix(Hn){for(const{prefix:On,value:hi}of Hn){const Xn=this._searchNamespace(hi);let ii=this._namespacePrefixes.get(On);ii||(ii=[],this._namespacePrefixes.set(On,ii)),ii.push(Xn)}}_getNamespaceToUse(Hn){if(!Hn)return this._currentNamespace;const On=this._namespacePrefixes.get(Hn);return(On==null?void 0:On.length)>0?On.at(-1):((0,Rn.warn)(`Unknown namespace prefix: ${Hn}.`),null)}clean(Hn){const{hasNamespace:On,prefixes:hi,nsAgnostic:Xn}=Hn;On&&(this._currentNamespace=this._namespaceStack.pop()),hi&&hi.forEach(({prefix:ii})=>{this._namespacePrefixes.get(ii).pop()}),Xn&&this._nsAgnosticLevel--}}Mn.Builder=Bn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.NamespaceSetUp=void 0;var In=ti(93),Ln=ti(94),jn=ti(95),Cn=ti(96),Tn=ti(97),Rn=ti(98),ui=ti(80),si=ti(99),ei=ti(100);const Bn={config:In.ConfigNamespace,connection:Ln.ConnectionSetNamespace,datasets:jn.DatasetsNamespace,localeSet:Cn.LocaleSetNamespace,signature:Tn.SignatureNamespace,stylesheet:Rn.StylesheetNamespace,template:ui.TemplateNamespace,xdp:si.XdpNamespace,xhtml:ei.XhtmlNamespace};Mn.NamespaceSetUp=Bn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.ConfigNamespace=void 0;var In=ti(81),Ln=ti(78),jn=ti(87),Cn=ti(84),Tn=ti(2);const Rn=In.NamespaceIds.config.id;class ui extends jn.XFAObject{constructor(Di){super(Rn,"acrobat",!0),this.acrobat7=null,this.autoSave=null,this.common=null,this.validate=null,this.validateApprovalSignatures=null,this.submitUrl=new jn.XFAObjectArray}}class si extends jn.XFAObject{constructor(Di){super(Rn,"acrobat7",!0),this.dynamicRender=null}}class ei extends jn.OptionObject{constructor(Di){super(Rn,"ADBE_JSConsole",["delegate","Enable","Disable"])}}class Bn extends jn.OptionObject{constructor(Di){super(Rn,"ADBE_JSDebugger",["delegate","Enable","Disable"])}}class Nn extends jn.Option01{constructor(Di){super(Rn,"addSilentPrint")}}class Hn extends jn.Option01{constructor(Di){super(Rn,"addViewerPreferences")}}class On extends jn.Option10{constructor(Di){super(Rn,"adjustData")}}class hi extends jn.IntegerObject{constructor(Di){super(Rn,"adobeExtensionLevel",0,ys=>ys>=1&&ys<=8)}}class Xn extends jn.XFAObject{constructor(Di){super(Rn,"agent",!0),this.name=Di.name?Di.name.trim():"",this.common=new jn.XFAObjectArray}}class ii extends jn.ContentObject{constructor(Di){super(Rn,"alwaysEmbed")}}class ri extends jn.StringObject{constructor(Di){super(Rn,"amd")}}class di extends jn.XFAObject{constructor(Di){super(Rn,"area"),this.level=(0,Cn.getInteger)({data:Di.level,defaultValue:0,validate:ys=>ys>=1&&ys<=3}),this.name=(0,Cn.getStringOption)(Di.name,["","barcode","coreinit","deviceDriver","font","general","layout","merge","script","signature","sourceSet","templateCache"])}}class fi extends jn.OptionObject{constructor(Di){super(Rn,"attributes",["preserve","delegate","ignore"])}}class wi extends jn.OptionObject{constructor(Di){super(Rn,"autoSave",["disabled","enabled"])}}class Jn extends jn.StringObject{constructor(Di){super(Rn,"base")}}class pi extends jn.XFAObject{constructor(Di){super(Rn,"batchOutput"),this.format=(0,Cn.getStringOption)(Di.format,["none","concat","zip","zipCompress"])}}class Zn extends jn.ContentObject{constructor(Di){super(Rn,"behaviorOverride")}[Ln.$finalize](){this[Ln.$content]=new Map(this[Ln.$content].trim().split(/\s+/).filter(Di=>Di.includes(":")).map(Di=>Di.split(":",2)))}}class Gn extends jn.XFAObject{constructor(Di){super(Rn,"cache",!0),this.templateCache=null}}class mi extends jn.Option01{constructor(Di){super(Rn,"change")}}class Wn extends jn.XFAObject{constructor(Di){super(Rn,"common",!0),this.data=null,this.locale=null,this.localeSet=null,this.messaging=null,this.suppressBanner=null,this.template=null,this.validationMessaging=null,this.versionControl=null,this.log=new jn.XFAObjectArray}}class ni extends jn.XFAObject{constructor(Di){super(Rn,"compress"),this.scope=(0,Cn.getStringOption)(Di.scope,["imageOnly","document"])}}class li extends jn.Option01{constructor(Di){super(Rn,"compressLogicalStructure")}}class Ai extends jn.Option10{constructor(Di){super(Rn,"compressObjectStream")}}class gi extends jn.XFAObject{constructor(Di){super(Rn,"compression",!0),this.compressLogicalStructure=null,this.compressObjectStream=null,this.level=null,this.type=null}}class yi extends jn.XFAObject{constructor(Di){super(Rn,"config",!0),this.acrobat=null,this.present=null,this.trace=null,this.agent=new jn.XFAObjectArray}}class Ii extends jn.OptionObject{constructor(Di){super(Rn,"conformance",["A","B"])}}class xi extends jn.Option01{constructor(Di){super(Rn,"contentCopy")}}class Qn extends jn.IntegerObject{constructor(Di){super(Rn,"copies",1,ys=>ys>=1)}}class ai extends jn.StringObject{constructor(Di){super(Rn,"creator")}}class Vn extends jn.IntegerObject{constructor(Di){super(Rn,"currentPage",0,ys=>ys>=0)}}class Yn extends jn.XFAObject{constructor(Di){super(Rn,"data",!0),this.adjustData=null,this.attributes=null,this.incrementalLoad=null,this.outputXSL=null,this.range=null,this.record=null,this.startNode=null,this.uri=null,this.window=null,this.xsl=null,this.excludeNS=new jn.XFAObjectArray,this.transform=new jn.XFAObjectArray}}class ci extends jn.XFAObject{constructor(Di){super(Rn,"debug",!0),this.uri=null}}class bi extends jn.ContentObject{constructor(Di){super(Rn,"defaultTypeface"),this.writingScript=(0,Cn.getStringOption)(Di.writingScript,["*","Arabic","Cyrillic","EastEuropeanRoman","Greek","Hebrew","Japanese","Korean","Roman","SimplifiedChinese","Thai","TraditionalChinese","Vietnamese"])}}class Ci extends jn.OptionObject{constructor(Di){super(Rn,"destination",["pdf","pcl","ps","webClient","zpl"])}}class Fi extends jn.Option01{constructor(Di){super(Rn,"documentAssembly")}}class zi extends jn.XFAObject{constructor(Di){super(Rn,"driver",!0),this.name=Di.name?Di.name.trim():"",this.fontInfo=null,this.xdc=null}}class _i extends jn.OptionObject{constructor(Di){super(Rn,"duplexOption",["simplex","duplexFlipLongEdge","duplexFlipShortEdge"])}}class ji extends jn.OptionObject{constructor(Di){super(Rn,"dynamicRender",["forbidden","required"])}}class Pi extends jn.Option01{constructor(Di){super(Rn,"embed")}}class Ni extends jn.Option01{constructor(Di){super(Rn,"encrypt")}}class Si extends jn.XFAObject{constructor(Di){super(Rn,"encryption",!0),this.encrypt=null,this.encryptionLevel=null,this.permissions=null}}class Ti extends jn.OptionObject{constructor(Di){super(Rn,"encryptionLevel",["40bit","128bit"])}}class Ri extends jn.StringObject{constructor(Di){super(Rn,"enforce")}}class Mi extends jn.XFAObject{constructor(Di){super(Rn,"equate"),this.force=(0,Cn.getInteger)({data:Di.force,defaultValue:1,validate:ys=>ys===0}),this.from=Di.from||"",this.to=Di.to||""}}class Ui extends jn.XFAObject{constructor(Di){super(Rn,"equateRange"),this.from=Di.from||"",this.to=Di.to||"",this._unicodeRange=Di.unicodeRange||""}get unicodeRange(){const Di=[],ys=/U\+([0-9a-fA-F]+)/,Fs=this._unicodeRange;for(let Ps of Fs.split(",").map(Hs=>Hs.trim()).filter(Hs=>!!Hs))Ps=Ps.split("-",2).map(Hs=>{const qs=Hs.match(ys);return qs?parseInt(qs[1],16):0}),Ps.length===1&&Ps.push(Ps[0]),Di.push(Ps);return(0,Tn.shadow)(this,"unicodeRange",Di)}}class Hi extends jn.ContentObject{constructor(Di){super(Rn,"exclude")}[Ln.$finalize](){this[Ln.$content]=this[Ln.$content].trim().split(/\s+/).filter(Di=>Di&&["calculate","close","enter","exit","initialize","ready","validate"].includes(Di))}}class Li extends jn.StringObject{constructor(Di){super(Rn,"excludeNS")}}class Ei extends jn.OptionObject{constructor(Di){super(Rn,"flipLabel",["usePrinterSetting","on","off"])}}class $i extends jn.XFAObject{constructor(Di){super(Rn,"fontInfo",!0),this.embed=null,this.map=null,this.subsetBelow=null,this.alwaysEmbed=new jn.XFAObjectArray,this.defaultTypeface=new jn.XFAObjectArray,this.neverEmbed=new jn.XFAObjectArray}}class Bi extends jn.Option01{constructor(Di){super(Rn,"formFieldFilling")}}class Oi extends jn.StringObject{constructor(Di){super(Rn,"groupParent")}}class Xi extends jn.OptionObject{constructor(Di){super(Rn,"ifEmpty",["dataValue","dataGroup","ignore","remove"])}}class Gi extends jn.StringObject{constructor(Di){super(Rn,"includeXDPContent")}}class qi extends jn.OptionObject{constructor(Di){super(Rn,"incrementalLoad",["none","forwardOnly"])}}class ns extends jn.Option01{constructor(Di){super(Rn,"incrementalMerge")}}class is extends jn.Option01{constructor(Di){super(Rn,"interactive")}}class as extends jn.OptionObject{constructor(Di){super(Rn,"jog",["usePrinterSetting","none","pageSet"])}}class hs extends jn.XFAObject{constructor(Di){super(Rn,"labelPrinter",!0),this.name=(0,Cn.getStringOption)(Di.name,["zpl","dpl","ipl","tcpl"]),this.batchOutput=null,this.flipLabel=null,this.fontInfo=null,this.xdc=null}}class Yi extends jn.OptionObject{constructor(Di){super(Rn,"layout",["paginate","panel"])}}class Vi extends jn.IntegerObject{constructor(Di){super(Rn,"level",0,ys=>ys>0)}}class Zi extends jn.Option01{constructor(Di){super(Rn,"linearized")}}class us extends jn.StringObject{constructor(Di){super(Rn,"locale")}}class ts extends jn.StringObject{constructor(Di){super(Rn,"localeSet")}}class es extends jn.XFAObject{constructor(Di){super(Rn,"log",!0),this.mode=null,this.threshold=null,this.to=null,this.uri=null}}class rs extends jn.XFAObject{constructor(Di){super(Rn,"map",!0),this.equate=new jn.XFAObjectArray,this.equateRange=new jn.XFAObjectArray}}class ss extends jn.XFAObject{constructor(Di){super(Rn,"mediumInfo",!0),this.map=null}}class os extends jn.XFAObject{constructor(Di){super(Rn,"message",!0),this.msgId=null,this.severity=null}}class ks extends jn.XFAObject{constructor(Di){super(Rn,"messaging",!0),this.message=new jn.XFAObjectArray}}class xs extends jn.OptionObject{constructor(Di){super(Rn,"mode",["append","overwrite"])}}class Rs extends jn.Option01{constructor(Di){super(Rn,"modifyAnnots")}}class ms extends jn.IntegerObject{constructor(Di){super(Rn,"msgId",1,ys=>ys>=1)}}class Bs extends jn.StringObject{constructor(Di){super(Rn,"nameAttr")}}class ws extends jn.ContentObject{constructor(Di){super(Rn,"neverEmbed")}}class Ts extends jn.IntegerObject{constructor(Di){super(Rn,"numberOfCopies",null,ys=>ys>=2&&ys<=5)}}class Is extends jn.XFAObject{constructor(Di){super(Rn,"openAction",!0),this.destination=null}}class ls extends jn.XFAObject{constructor(Di){super(Rn,"output",!0),this.to=null,this.type=null,this.uri=null}}class Wi extends jn.StringObject{constructor(Di){super(Rn,"outputBin")}}class Ji extends jn.XFAObject{constructor(Di){super(Rn,"outputXSL",!0),this.uri=null}}class cs extends jn.OptionObject{constructor(Di){super(Rn,"overprint",["none","both","draw","field"])}}class fs extends jn.StringObject{constructor(Di){super(Rn,"packets")}[Ln.$finalize](){this[Ln.$content]!=="*"&&(this[Ln.$content]=this[Ln.$content].trim().split(/\s+/).filter(Di=>["config","datasets","template","xfdf","xslt"].includes(Di)))}}class ps extends jn.XFAObject{constructor(Di){super(Rn,"pageOffset"),this.x=(0,Cn.getInteger)({data:Di.x,defaultValue:"useXDCSetting",validate:ys=>!0}),this.y=(0,Cn.getInteger)({data:Di.y,defaultValue:"useXDCSetting",validate:ys=>!0})}}class gs extends jn.StringObject{constructor(Di){super(Rn,"pageRange")}[Ln.$finalize](){const Di=this[Ln.$content].trim().split(/\s+/).map(Fs=>parseInt(Fs,10)),ys=[];for(let Fs=0,Ps=Di.length;Fs<Ps;Fs+=2)ys.push(Di.slice(Fs,Fs+2));this[Ln.$content]=ys}}class bs extends jn.OptionObject{constructor(Di){super(Rn,"pagination",["simplex","duplexShortEdge","duplexLongEdge"])}}class vs extends jn.OptionObject{constructor(Di){super(Rn,"paginationOverride",["none","forceDuplex","forceDuplexLongEdge","forceDuplexShortEdge","forceSimplex"])}}class _s extends jn.IntegerObject{constructor(Di){super(Rn,"part",1,ys=>!1)}}class Us extends jn.XFAObject{constructor(Di){super(Rn,"pcl",!0),this.name=Di.name||"",this.batchOutput=null,this.fontInfo=null,this.jog=null,this.mediumInfo=null,this.outputBin=null,this.pageOffset=null,this.staple=null,this.xdc=null}}class Ds extends jn.XFAObject{constructor(Di){super(Rn,"pdf",!0),this.name=Di.name||"",this.adobeExtensionLevel=null,this.batchOutput=null,this.compression=null,this.creator=null,this.encryption=null,this.fontInfo=null,this.interactive=null,this.linearized=null,this.openAction=null,this.pdfa=null,this.producer=null,this.renderPolicy=null,this.scriptModel=null,this.silentPrint=null,this.submitFormat=null,this.tagged=null,this.version=null,this.viewerPreferences=null,this.xdc=null}}class Ms extends jn.XFAObject{constructor(Di){super(Rn,"pdfa",!0),this.amd=null,this.conformance=null,this.includeXDPContent=null,this.part=null}}class js extends jn.XFAObject{constructor(Di){super(Rn,"permissions",!0),this.accessibleContent=null,this.change=null,this.contentCopy=null,this.documentAssembly=null,this.formFieldFilling=null,this.modifyAnnots=null,this.plaintextMetadata=null,this.print=null,this.printHighQuality=null}}class Vs extends jn.Option01{constructor(Di){super(Rn,"pickTrayByPDFSize")}}class Ss extends jn.StringObject{constructor(Di){super(Rn,"picture")}}class As extends jn.Option01{constructor(Di){super(Rn,"plaintextMetadata")}}class Es extends jn.OptionObject{constructor(Di){super(Rn,"presence",["preserve","dissolve","dissolveStructure","ignore","remove"])}}class Os extends jn.XFAObject{constructor(Di){super(Rn,"present",!0),this.behaviorOverride=null,this.cache=null,this.common=null,this.copies=null,this.destination=null,this.incrementalMerge=null,this.layout=null,this.output=null,this.overprint=null,this.pagination=null,this.paginationOverride=null,this.script=null,this.validate=null,this.xdp=null,this.driver=new jn.XFAObjectArray,this.labelPrinter=new jn.XFAObjectArray,this.pcl=new jn.XFAObjectArray,this.pdf=new jn.XFAObjectArray,this.ps=new jn.XFAObjectArray,this.submitUrl=new jn.XFAObjectArray,this.webClient=new jn.XFAObjectArray,this.zpl=new jn.XFAObjectArray}}class $s extends jn.Option01{constructor(Di){super(Rn,"print")}}class Ws extends jn.Option01{constructor(Di){super(Rn,"printHighQuality")}}class Ns extends jn.OptionObject{constructor(Di){super(Rn,"printScaling",["appdefault","noScaling"])}}class Ls extends jn.StringObject{constructor(Di){super(Rn,"printerName")}}class zs extends jn.StringObject{constructor(Di){super(Rn,"producer")}}class Qs extends jn.XFAObject{constructor(Di){super(Rn,"ps",!0),this.name=Di.name||"",this.batchOutput=null,this.fontInfo=null,this.jog=null,this.mediumInfo=null,this.outputBin=null,this.staple=null,this.xdc=null}}class ca extends jn.ContentObject{constructor(Di){super(Rn,"range")}[Ln.$finalize](){this[Ln.$content]=this[Ln.$content].trim().split(/\s*,\s*/,2).map(Di=>Di.split("-").map(ys=>parseInt(ys.trim(),10))).filter(Di=>Di.every(ys=>!isNaN(ys))).map(Di=>(Di.length===1&&Di.push(Di[0]),Di))}}class Js extends jn.ContentObject{constructor(Di){super(Rn,"record")}[Ln.$finalize](){this[Ln.$content]=this[Ln.$content].trim();const Di=parseInt(this[Ln.$content],10);!isNaN(Di)&&Di>=0&&(this[Ln.$content]=Di)}}class Zs extends jn.ContentObject{constructor(Di){super(Rn,"relevant")}[Ln.$finalize](){this[Ln.$content]=this[Ln.$content].trim().split(/\s+/)}}class aa extends jn.ContentObject{constructor(Di){super(Rn,"rename")}[Ln.$finalize](){this[Ln.$content]=this[Ln.$content].trim(),(this[Ln.$content].toLowerCase().startsWith("xml")||new RegExp("[\\p{L}_][\\p{L}\\d._\\p{M}-]*","u").test(this[Ln.$content]))&&(0,Tn.warn)("XFA - Rename: invalid XFA name")}}class Gs extends jn.OptionObject{constructor(Di){super(Rn,"renderPolicy",["server","client"])}}class ea extends jn.OptionObject{constructor(Di){super(Rn,"runScripts",["both","client","none","server"])}}class Xs extends jn.XFAObject{constructor(Di){super(Rn,"script",!0),this.currentPage=null,this.exclude=null,this.runScripts=null}}class sa extends jn.OptionObject{constructor(Di){super(Rn,"scriptModel",["XFA","none"])}}class la extends jn.OptionObject{constructor(Di){super(Rn,"severity",["ignore","error","information","trace","warning"])}}class va extends jn.XFAObject{constructor(Di){super(Rn,"silentPrint",!0),this.addSilentPrint=null,this.printerName=null}}class na extends jn.XFAObject{constructor(Di){super(Rn,"staple"),this.mode=(0,Cn.getStringOption)(Di.mode,["usePrinterSetting","on","off"])}}class ia extends jn.StringObject{constructor(Di){super(Rn,"startNode")}}class fa extends jn.IntegerObject{constructor(Di){super(Rn,"startPage",0,ys=>!0)}}class wa extends jn.OptionObject{constructor(Di){super(Rn,"submitFormat",["html","delegate","fdf","xml","pdf"])}}class Pa extends jn.StringObject{constructor(Di){super(Rn,"submitUrl")}}class eo extends jn.IntegerObject{constructor(Di){super(Rn,"subsetBelow",100,ys=>ys>=0&&ys<=100)}}class _c extends jn.Option01{constructor(Di){super(Rn,"suppressBanner")}}class Mc extends jn.Option01{constructor(Di){super(Rn,"tagged")}}class Pc extends jn.XFAObject{constructor(Di){super(Rn,"template",!0),this.base=null,this.relevant=null,this.startPage=null,this.uri=null,this.xsl=null}}class Rc extends jn.OptionObject{constructor(Di){super(Rn,"threshold",["trace","error","information","warning"])}}class Lc extends jn.OptionObject{constructor(Di){super(Rn,"to",["null","memory","stderr","stdout","system","uri"])}}class tc extends jn.XFAObject{constructor(Di){super(Rn,"templateCache"),this.maxEntries=(0,Cn.getInteger)({data:Di.maxEntries,defaultValue:5,validate:ys=>ys>=0})}}class k0 extends jn.XFAObject{constructor(Di){super(Rn,"trace",!0),this.area=new jn.XFAObjectArray}}class Dc extends jn.XFAObject{constructor(Di){super(Rn,"transform",!0),this.groupParent=null,this.ifEmpty=null,this.nameAttr=null,this.picture=null,this.presence=null,this.rename=null,this.whitespace=null}}class Nc extends jn.OptionObject{constructor(Di){super(Rn,"type",["none","ascii85","asciiHex","ccittfax","flate","lzw","runLength","native","xdp","mergedXDP"])}}class Bc extends jn.StringObject{constructor(Di){super(Rn,"uri")}}class C0 extends jn.OptionObject{constructor(Di){super(Rn,"validate",["preSubmit","prePrint","preExecute","preSave"])}}class nc extends jn.ContentObject{constructor(Di){super(Rn,"validateApprovalSignatures")}[Ln.$finalize](){this[Ln.$content]=this[Ln.$content].trim().split(/\s+/).filter(Di=>["docReady","postSign"].includes(Di))}}class ic extends jn.OptionObject{constructor(Di){super(Rn,"validationMessaging",["allMessagesIndividually","allMessagesTogether","firstMessageOnly","noMessages"])}}class $c extends jn.OptionObject{constructor(Di){super(Rn,"version",["1.7","1.6","1.5","1.4","1.3","1.2"])}}class Uc extends jn.XFAObject{constructor(Di){super(Rn,"VersionControl"),this.outputBelow=(0,Cn.getStringOption)(Di.outputBelow,["warn","error","update"]),this.sourceAbove=(0,Cn.getStringOption)(Di.sourceAbove,["warn","error"]),this.sourceBelow=(0,Cn.getStringOption)(Di.sourceBelow,["update","maintain"])}}class jc extends jn.XFAObject{constructor(Di){super(Rn,"viewerPreferences",!0),this.ADBE_JSConsole=null,this.ADBE_JSDebugger=null,this.addViewerPreferences=null,this.duplexOption=null,this.enforce=null,this.numberOfCopies=null,this.pageRange=null,this.pickTrayByPDFSize=null,this.printScaling=null}}class Hc extends jn.XFAObject{constructor(Di){super(Rn,"webClient",!0),this.name=Di.name?Di.name.trim():"",this.fontInfo=null,this.xdc=null}}class Xc extends jn.OptionObject{constructor(Di){super(Rn,"whitespace",["preserve","ltrim","normalize","rtrim","trim"])}}class T0 extends jn.ContentObject{constructor(Di){super(Rn,"window")}[Ln.$finalize](){const Di=this[Ln.$content].trim().split(/\s*,\s*/,2).map(ys=>parseInt(ys,10));if(Di.some(ys=>isNaN(ys))){this[Ln.$content]=[0,0];return}Di.length===1&&Di.push(Di[0]),this[Ln.$content]=Di}}class zc extends jn.XFAObject{constructor(Di){super(Rn,"xdc",!0),this.uri=new jn.XFAObjectArray,this.xsl=new jn.XFAObjectArray}}class Io extends jn.XFAObject{constructor(Di){super(Rn,"xdp",!0),this.packets=null}}class Wc extends jn.XFAObject{constructor(Di){super(Rn,"xsl",!0),this.debug=null,this.uri=null}}class Oo extends jn.XFAObject{constructor(Di){super(Rn,"zpl",!0),this.name=Di.name?Di.name.trim():"",this.batchOutput=null,this.flipLabel=null,this.fontInfo=null,this.xdc=null}}class Cs{static[In.$buildXFAObject](Di,ys){if(Cs.hasOwnProperty(Di))return Cs[Di](ys)}static acrobat(Di){return new ui(Di)}static acrobat7(Di){return new si(Di)}static ADBE_JSConsole(Di){return new ei(Di)}static ADBE_JSDebugger(Di){return new Bn(Di)}static addSilentPrint(Di){return new Nn(Di)}static addViewerPreferences(Di){return new Hn(Di)}static adjustData(Di){return new On(Di)}static adobeExtensionLevel(Di){return new hi(Di)}static agent(Di){return new Xn(Di)}static alwaysEmbed(Di){return new ii(Di)}static amd(Di){return new ri(Di)}static area(Di){return new di(Di)}static attributes(Di){return new fi(Di)}static autoSave(Di){return new wi(Di)}static base(Di){return new Jn(Di)}static batchOutput(Di){return new pi(Di)}static behaviorOverride(Di){return new Zn(Di)}static cache(Di){return new Gn(Di)}static change(Di){return new mi(Di)}static common(Di){return new Wn(Di)}static compress(Di){return new ni(Di)}static compressLogicalStructure(Di){return new li(Di)}static compressObjectStream(Di){return new Ai(Di)}static compression(Di){return new gi(Di)}static config(Di){return new yi(Di)}static conformance(Di){return new Ii(Di)}static contentCopy(Di){return new xi(Di)}static copies(Di){return new Qn(Di)}static creator(Di){return new ai(Di)}static currentPage(Di){return new Vn(Di)}static data(Di){return new Yn(Di)}static debug(Di){return new ci(Di)}static defaultTypeface(Di){return new bi(Di)}static destination(Di){return new Ci(Di)}static documentAssembly(Di){return new Fi(Di)}static driver(Di){return new zi(Di)}static duplexOption(Di){return new _i(Di)}static dynamicRender(Di){return new ji(Di)}static embed(Di){return new Pi(Di)}static encrypt(Di){return new Ni(Di)}static encryption(Di){return new Si(Di)}static encryptionLevel(Di){return new Ti(Di)}static enforce(Di){return new Ri(Di)}static equate(Di){return new Mi(Di)}static equateRange(Di){return new Ui(Di)}static exclude(Di){return new Hi(Di)}static excludeNS(Di){return new Li(Di)}static flipLabel(Di){return new Ei(Di)}static fontInfo(Di){return new $i(Di)}static formFieldFilling(Di){return new Bi(Di)}static groupParent(Di){return new Oi(Di)}static ifEmpty(Di){return new Xi(Di)}static includeXDPContent(Di){return new Gi(Di)}static incrementalLoad(Di){return new qi(Di)}static incrementalMerge(Di){return new ns(Di)}static interactive(Di){return new is(Di)}static jog(Di){return new as(Di)}static labelPrinter(Di){return new hs(Di)}static layout(Di){return new Yi(Di)}static level(Di){return new Vi(Di)}static linearized(Di){return new Zi(Di)}static locale(Di){return new us(Di)}static localeSet(Di){return new ts(Di)}static log(Di){return new es(Di)}static map(Di){return new rs(Di)}static mediumInfo(Di){return new ss(Di)}static message(Di){return new os(Di)}static messaging(Di){return new ks(Di)}static mode(Di){return new xs(Di)}static modifyAnnots(Di){return new Rs(Di)}static msgId(Di){return new ms(Di)}static nameAttr(Di){return new Bs(Di)}static neverEmbed(Di){return new ws(Di)}static numberOfCopies(Di){return new Ts(Di)}static openAction(Di){return new Is(Di)}static output(Di){return new ls(Di)}static outputBin(Di){return new Wi(Di)}static outputXSL(Di){return new Ji(Di)}static overprint(Di){return new cs(Di)}static packets(Di){return new fs(Di)}static pageOffset(Di){return new ps(Di)}static pageRange(Di){return new gs(Di)}static pagination(Di){return new bs(Di)}static paginationOverride(Di){return new vs(Di)}static part(Di){return new _s(Di)}static pcl(Di){return new Us(Di)}static pdf(Di){return new Ds(Di)}static pdfa(Di){return new Ms(Di)}static permissions(Di){return new js(Di)}static pickTrayByPDFSize(Di){return new Vs(Di)}static picture(Di){return new Ss(Di)}static plaintextMetadata(Di){return new As(Di)}static presence(Di){return new Es(Di)}static present(Di){return new Os(Di)}static print(Di){return new $s(Di)}static printHighQuality(Di){return new Ws(Di)}static printScaling(Di){return new Ns(Di)}static printerName(Di){return new Ls(Di)}static producer(Di){return new zs(Di)}static ps(Di){return new Qs(Di)}static range(Di){return new ca(Di)}static record(Di){return new Js(Di)}static relevant(Di){return new Zs(Di)}static rename(Di){return new aa(Di)}static renderPolicy(Di){return new Gs(Di)}static runScripts(Di){return new ea(Di)}static script(Di){return new Xs(Di)}static scriptModel(Di){return new sa(Di)}static severity(Di){return new la(Di)}static silentPrint(Di){return new va(Di)}static staple(Di){return new na(Di)}static startNode(Di){return new ia(Di)}static startPage(Di){return new fa(Di)}static submitFormat(Di){return new wa(Di)}static submitUrl(Di){return new Pa(Di)}static subsetBelow(Di){return new eo(Di)}static suppressBanner(Di){return new _c(Di)}static tagged(Di){return new Mc(Di)}static template(Di){return new Pc(Di)}static templateCache(Di){return new tc(Di)}static threshold(Di){return new Rc(Di)}static to(Di){return new Lc(Di)}static trace(Di){return new k0(Di)}static transform(Di){return new Dc(Di)}static type(Di){return new Nc(Di)}static uri(Di){return new Bc(Di)}static validate(Di){return new C0(Di)}static validateApprovalSignatures(Di){return new nc(Di)}static validationMessaging(Di){return new ic(Di)}static version(Di){return new $c(Di)}static versionControl(Di){return new Uc(Di)}static viewerPreferences(Di){return new jc(Di)}static webClient(Di){return new Hc(Di)}static whitespace(Di){return new Xc(Di)}static window(Di){return new T0(Di)}static xdc(Di){return new zc(Di)}static xdp(Di){return new Io(Di)}static xsl(Di){return new Wc(Di)}static zpl(Di){return new Oo(Di)}}Mn.ConfigNamespace=Cs},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.ConnectionSetNamespace=void 0;var In=ti(81),Ln=ti(87);const jn=In.NamespaceIds.connectionSet.id;class Cn extends Ln.XFAObject{constructor(di){super(jn,"connectionSet",!0),this.wsdlConnection=new Ln.XFAObjectArray,this.xmlConnection=new Ln.XFAObjectArray,this.xsdConnection=new Ln.XFAObjectArray}}class Tn extends Ln.XFAObject{constructor(di){super(jn,"effectiveInputPolicy"),this.id=di.id||"",this.name=di.name||"",this.use=di.use||"",this.usehref=di.usehref||""}}class Rn extends Ln.XFAObject{constructor(di){super(jn,"effectiveOutputPolicy"),this.id=di.id||"",this.name=di.name||"",this.use=di.use||"",this.usehref=di.usehref||""}}class ui extends Ln.StringObject{constructor(di){super(jn,"operation"),this.id=di.id||"",this.input=di.input||"",this.name=di.name||"",this.output=di.output||"",this.use=di.use||"",this.usehref=di.usehref||""}}class si extends Ln.StringObject{constructor(di){super(jn,"rootElement"),this.id=di.id||"",this.name=di.name||"",this.use=di.use||"",this.usehref=di.usehref||""}}class ei extends Ln.StringObject{constructor(di){super(jn,"soapAction"),this.id=di.id||"",this.name=di.name||"",this.use=di.use||"",this.usehref=di.usehref||""}}class Bn extends Ln.StringObject{constructor(di){super(jn,"soapAddress"),this.id=di.id||"",this.name=di.name||"",this.use=di.use||"",this.usehref=di.usehref||""}}class Nn extends Ln.StringObject{constructor(di){super(jn,"uri"),this.id=di.id||"",this.name=di.name||"",this.use=di.use||"",this.usehref=di.usehref||""}}class Hn extends Ln.StringObject{constructor(di){super(jn,"wsdlAddress"),this.id=di.id||"",this.name=di.name||"",this.use=di.use||"",this.usehref=di.usehref||""}}class On extends Ln.XFAObject{constructor(di){super(jn,"wsdlConnection",!0),this.dataDescription=di.dataDescription||"",this.name=di.name||"",this.effectiveInputPolicy=null,this.effectiveOutputPolicy=null,this.operation=null,this.soapAction=null,this.soapAddress=null,this.wsdlAddress=null}}class hi extends Ln.XFAObject{constructor(di){super(jn,"xmlConnection",!0),this.dataDescription=di.dataDescription||"",this.name=di.name||"",this.uri=null}}class Xn extends Ln.XFAObject{constructor(di){super(jn,"xsdConnection",!0),this.dataDescription=di.dataDescription||"",this.name=di.name||"",this.rootElement=null,this.uri=null}}class ii{static[In.$buildXFAObject](di,fi){if(ii.hasOwnProperty(di))return ii[di](fi)}static connectionSet(di){return new Cn(di)}static effectiveInputPolicy(di){return new Tn(di)}static effectiveOutputPolicy(di){return new Rn(di)}static operation(di){return new ui(di)}static rootElement(di){return new si(di)}static soapAction(di){return new ei(di)}static soapAddress(di){return new Bn(di)}static uri(di){return new Nn(di)}static wsdlAddress(di){return new Hn(di)}static wsdlConnection(di){return new On(di)}static xmlConnection(di){return new hi(di)}static xsdConnection(di){return new Xn(di)}}Mn.ConnectionSetNamespace=ii},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.DatasetsNamespace=void 0;var In=ti(78),Ln=ti(81),jn=ti(87);const Cn=Ln.NamespaceIds.datasets.id;class Tn extends jn.XmlObject{constructor(ei){super(Cn,"data",ei)}[In.$isNsAgnostic](){return!0}}class Rn extends jn.XFAObject{constructor(ei){super(Cn,"datasets",!0),this.data=null,this.Signature=null}[In.$onChild](ei){const Bn=ei[In.$nodeName];(Bn==="data"&&ei[In.$namespaceId]===Cn||Bn==="Signature"&&ei[In.$namespaceId]===Ln.NamespaceIds.signature.id)&&(this[Bn]=ei),this[In.$appendChild](ei)}}class ui{static[Ln.$buildXFAObject](ei,Bn){if(ui.hasOwnProperty(ei))return ui[ei](Bn)}static datasets(ei){return new Rn(ei)}static data(ei){return new Tn(ei)}}Mn.DatasetsNamespace=ui},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.LocaleSetNamespace=void 0;var In=ti(81),Ln=ti(87),jn=ti(84);const Cn=In.NamespaceIds.localeSet.id;class Tn extends Ln.XFAObject{constructor(yi){super(Cn,"calendarSymbols",!0),this.name="gregorian",this.dayNames=new Ln.XFAObjectArray(2),this.eraNames=null,this.meridiemNames=null,this.monthNames=new Ln.XFAObjectArray(2)}}class Rn extends Ln.StringObject{constructor(yi){super(Cn,"currencySymbol"),this.name=(0,jn.getStringOption)(yi.name,["symbol","isoname","decimal"])}}class ui extends Ln.XFAObject{constructor(yi){super(Cn,"currencySymbols",!0),this.currencySymbol=new Ln.XFAObjectArray(3)}}class si extends Ln.StringObject{constructor(yi){super(Cn,"datePattern"),this.name=(0,jn.getStringOption)(yi.name,["full","long","med","short"])}}class ei extends Ln.XFAObject{constructor(yi){super(Cn,"datePatterns",!0),this.datePattern=new Ln.XFAObjectArray(4)}}class Bn extends Ln.ContentObject{constructor(yi){super(Cn,"dateTimeSymbols")}}class Nn extends Ln.StringObject{constructor(yi){super(Cn,"day")}}class Hn extends Ln.XFAObject{constructor(yi){super(Cn,"dayNames",!0),this.abbr=(0,jn.getInteger)({data:yi.abbr,defaultValue:0,validate:Ii=>Ii===1}),this.day=new Ln.XFAObjectArray(7)}}class On extends Ln.StringObject{constructor(yi){super(Cn,"era")}}class hi extends Ln.XFAObject{constructor(yi){super(Cn,"eraNames",!0),this.era=new Ln.XFAObjectArray(2)}}class Xn extends Ln.XFAObject{constructor(yi){super(Cn,"locale",!0),this.desc=yi.desc||"",this.name="isoname",this.calendarSymbols=null,this.currencySymbols=null,this.datePatterns=null,this.dateTimeSymbols=null,this.numberPatterns=null,this.numberSymbols=null,this.timePatterns=null,this.typeFaces=null}}class ii extends Ln.XFAObject{constructor(yi){super(Cn,"localeSet",!0),this.locale=new Ln.XFAObjectArray}}class ri extends Ln.StringObject{constructor(yi){super(Cn,"meridiem")}}class di extends Ln.XFAObject{constructor(yi){super(Cn,"meridiemNames",!0),this.meridiem=new Ln.XFAObjectArray(2)}}class fi extends Ln.StringObject{constructor(yi){super(Cn,"month")}}class wi extends Ln.XFAObject{constructor(yi){super(Cn,"monthNames",!0),this.abbr=(0,jn.getInteger)({data:yi.abbr,defaultValue:0,validate:Ii=>Ii===1}),this.month=new Ln.XFAObjectArray(12)}}class Jn extends Ln.StringObject{constructor(yi){super(Cn,"numberPattern"),this.name=(0,jn.getStringOption)(yi.name,["full","long","med","short"])}}class pi extends Ln.XFAObject{constructor(yi){super(Cn,"numberPatterns",!0),this.numberPattern=new Ln.XFAObjectArray(4)}}class Zn extends Ln.StringObject{constructor(yi){super(Cn,"numberSymbol"),this.name=(0,jn.getStringOption)(yi.name,["decimal","grouping","percent","minus","zero"])}}class Gn extends Ln.XFAObject{constructor(yi){super(Cn,"numberSymbols",!0),this.numberSymbol=new Ln.XFAObjectArray(5)}}class mi extends Ln.StringObject{constructor(yi){super(Cn,"timePattern"),this.name=(0,jn.getStringOption)(yi.name,["full","long","med","short"])}}class Wn extends Ln.XFAObject{constructor(yi){super(Cn,"timePatterns",!0),this.timePattern=new Ln.XFAObjectArray(4)}}class ni extends Ln.XFAObject{constructor(yi){super(Cn,"typeFace",!0),this.name=yi.name|""}}class li extends Ln.XFAObject{constructor(yi){super(Cn,"typeFaces",!0),this.typeFace=new Ln.XFAObjectArray}}class Ai{static[In.$buildXFAObject](yi,Ii){if(Ai.hasOwnProperty(yi))return Ai[yi](Ii)}static calendarSymbols(yi){return new Tn(yi)}static currencySymbol(yi){return new Rn(yi)}static currencySymbols(yi){return new ui(yi)}static datePattern(yi){return new si(yi)}static datePatterns(yi){return new ei(yi)}static dateTimeSymbols(yi){return new Bn(yi)}static day(yi){return new Nn(yi)}static dayNames(yi){return new Hn(yi)}static era(yi){return new On(yi)}static eraNames(yi){return new hi(yi)}static locale(yi){return new Xn(yi)}static localeSet(yi){return new ii(yi)}static meridiem(yi){return new ri(yi)}static meridiemNames(yi){return new di(yi)}static month(yi){return new fi(yi)}static monthNames(yi){return new wi(yi)}static numberPattern(yi){return new Jn(yi)}static numberPatterns(yi){return new pi(yi)}static numberSymbol(yi){return new Zn(yi)}static numberSymbols(yi){return new Gn(yi)}static timePattern(yi){return new mi(yi)}static timePatterns(yi){return new Wn(yi)}static typeFace(yi){return new ni(yi)}static typeFaces(yi){return new li(yi)}}Mn.LocaleSetNamespace=Ai},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.SignatureNamespace=void 0;var In=ti(81),Ln=ti(87);const jn=In.NamespaceIds.signature.id;class Cn extends Ln.XFAObject{constructor(ui){super(jn,"signature",!0)}}class Tn{static[In.$buildXFAObject](ui,si){if(Tn.hasOwnProperty(ui))return Tn[ui](si)}static signature(ui){return new Cn(ui)}}Mn.SignatureNamespace=Tn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.StylesheetNamespace=void 0;var In=ti(81),Ln=ti(87);const jn=In.NamespaceIds.stylesheet.id;class Cn extends Ln.XFAObject{constructor(ui){super(jn,"stylesheet",!0)}}class Tn{static[In.$buildXFAObject](ui,si){if(Tn.hasOwnProperty(ui))return Tn[ui](si)}static stylesheet(ui){return new Cn(ui)}}Mn.StylesheetNamespace=Tn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.XdpNamespace=void 0;var In=ti(81),Ln=ti(78),jn=ti(87);const Cn=In.NamespaceIds.xdp.id;class Tn extends jn.XFAObject{constructor(si){super(Cn,"xdp",!0),this.uuid=si.uuid||"",this.timeStamp=si.timeStamp||"",this.config=null,this.connectionSet=null,this.datasets=null,this.localeSet=null,this.stylesheet=new jn.XFAObjectArray,this.template=null}[Ln.$onChildCheck](si){const ei=In.NamespaceIds[si[Ln.$nodeName]];return ei&&si[Ln.$namespaceId]===ei.id}}class Rn{static[In.$buildXFAObject](si,ei){if(Rn.hasOwnProperty(si))return Rn[si](ei)}static xdp(si){return new Tn(si)}}Mn.XdpNamespace=Rn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.XhtmlNamespace=void 0;var In=ti(78),Ln=ti(81),jn=ti(83),Cn=ti(84),Tn=ti(87);const Rn=Ln.NamespaceIds.xhtml.id,ui=Symbol(),si=new Set(["color","font","font-family","font-size","font-stretch","font-style","font-weight","margin","margin-bottom","margin-left","margin-right","margin-top","letter-spacing","line-height","orphans","page-break-after","page-break-before","page-break-inside","tab-interval","tab-stop","text-align","text-decoration","text-indent","vertical-align","widows","kerning-mode","xfa-font-horizontal-scale","xfa-font-vertical-scale","xfa-spacerun","xfa-tab-stops"]),ei=new Map([["page-break-after","breakAfter"],["page-break-before","breakBefore"],["page-break-inside","breakInside"],["kerning-mode",yi=>yi==="none"?"none":"normal"],["xfa-font-horizontal-scale",yi=>`scaleX(${Math.max(0,Math.min(parseInt(yi)/100)).toFixed(2)})`],["xfa-font-vertical-scale",yi=>`scaleY(${Math.max(0,Math.min(parseInt(yi)/100)).toFixed(2)})`],["xfa-spacerun",""],["xfa-tab-stops",""],["font-size",(yi,Ii)=>(yi=Ii.fontSize=(0,Cn.getMeasurement)(yi),(0,jn.measureToString)(.99*yi))],["letter-spacing",yi=>(0,jn.measureToString)((0,Cn.getMeasurement)(yi))],["line-height",yi=>(0,jn.measureToString)((0,Cn.getMeasurement)(yi))],["margin",yi=>(0,jn.measureToString)((0,Cn.getMeasurement)(yi))],["margin-bottom",yi=>(0,jn.measureToString)((0,Cn.getMeasurement)(yi))],["margin-left",yi=>(0,jn.measureToString)((0,Cn.getMeasurement)(yi))],["margin-right",yi=>(0,jn.measureToString)((0,Cn.getMeasurement)(yi))],["margin-top",yi=>(0,jn.measureToString)((0,Cn.getMeasurement)(yi))],["text-indent",yi=>(0,jn.measureToString)((0,Cn.getMeasurement)(yi))],["font-family",yi=>yi],["vertical-align",yi=>(0,jn.measureToString)((0,Cn.getMeasurement)(yi))]]),Bn=/\s+/g,Nn=/[\r\n]+/g,Hn=/\r\n?/g;function On(yi,Ii,xi){const Qn=Object.create(null);if(!yi)return Qn;const ai=Object.create(null);for(const[Vn,Yn]of yi.split(";").map(ci=>ci.split(":",2))){const ci=ei.get(Vn);if(ci==="")continue;let bi=Yn;ci&&(bi=typeof ci=="string"?ci:ci(Yn,ai)),Vn.endsWith("scale")?Qn.transform=Qn.transform?`${Qn[Vn]} ${bi}`:bi:Qn[Vn.replaceAll(/-([a-zA-Z])/g,(Ci,Fi)=>Fi.toUpperCase())]=bi}if(Qn.fontFamily&&(0,jn.setFontFamily)({typeface:Qn.fontFamily,weight:Qn.fontWeight||"normal",posture:Qn.fontStyle||"normal",size:ai.fontSize||0},Ii,Ii[In.$globalData].fontFinder,Qn),xi&&Qn.verticalAlign&&Qn.verticalAlign!=="0px"&&Qn.fontSize){const ci=(0,Cn.getMeasurement)(Qn.fontSize);Qn.fontSize=(0,jn.measureToString)(ci*.583),Qn.verticalAlign=(0,jn.measureToString)(Math.sign((0,Cn.getMeasurement)(Qn.verticalAlign))*ci*.333)}return xi&&Qn.fontSize&&(Qn.fontSize=`calc(${Qn.fontSize} * var(--scale-factor))`),(0,jn.fixTextIndent)(Qn),Qn}function hi(yi){return yi.style?yi.style.trim().split(/\s*;\s*/).filter(Ii=>!!Ii).map(Ii=>Ii.split(/\s*:\s*/,2)).filter(([Ii,xi])=>(Ii==="font-family"&&yi[In.$globalData].usedTypefaces.add(xi),si.has(Ii))).map(Ii=>Ii.join(":")).join(";"):""}const Xn=new Set(["body","html"]);class ii extends Tn.XmlObject{constructor(Ii,xi){super(Rn,xi),this[ui]=!1,this.style=Ii.style||""}[In.$clean](Ii){super[In.$clean](Ii),this.style=hi(this)}[In.$acceptWhitespace](){return!Xn.has(this[In.$nodeName])}[In.$onText](Ii,xi=!1){xi?this[ui]=!0:(Ii=Ii.replaceAll(Nn,""),this.style.includes("xfa-spacerun:yes")||(Ii=Ii.replaceAll(Bn," "))),Ii&&(this[In.$content]+=Ii)}[In.$pushGlyphs](Ii,xi=!0){const Qn=Object.create(null),ai={top:NaN,bottom:NaN,left:NaN,right:NaN};let Vn=null;for(const[Yn,ci]of this.style.split(";").map(bi=>bi.split(":",2)))switch(Yn){case"font-family":Qn.typeface=(0,Cn.stripQuotes)(ci);break;case"font-size":Qn.size=(0,Cn.getMeasurement)(ci);break;case"font-weight":Qn.weight=ci;break;case"font-style":Qn.posture=ci;break;case"letter-spacing":Qn.letterSpacing=(0,Cn.getMeasurement)(ci);break;case"margin":const bi=ci.split(/ \t/).map(Ci=>(0,Cn.getMeasurement)(Ci));switch(bi.length){case 1:ai.top=ai.bottom=ai.left=ai.right=bi[0];break;case 2:ai.top=ai.bottom=bi[0],ai.left=ai.right=bi[1];break;case 3:ai.top=bi[0],ai.bottom=bi[2],ai.left=ai.right=bi[1];break;case 4:ai.top=bi[0],ai.left=bi[1],ai.bottom=bi[2],ai.right=bi[3];break}break;case"margin-top":ai.top=(0,Cn.getMeasurement)(ci);break;case"margin-bottom":ai.bottom=(0,Cn.getMeasurement)(ci);break;case"margin-left":ai.left=(0,Cn.getMeasurement)(ci);break;case"margin-right":ai.right=(0,Cn.getMeasurement)(ci);break;case"line-height":Vn=(0,Cn.getMeasurement)(ci);break}if(Ii.pushData(Qn,ai,Vn),this[In.$content])Ii.addString(this[In.$content]);else for(const Yn of this[In.$getChildren]()){if(Yn[In.$nodeName]==="#text"){Ii.addString(Yn[In.$content]);continue}Yn[In.$pushGlyphs](Ii)}xi&&Ii.popFont()}[In.$toHTML](Ii){const xi=[];if(this[In.$extra]={children:xi},this[In.$childrenToHTML]({}),xi.length===0&&!this[In.$content])return Cn.HTMLResult.EMPTY;let Qn;return this[ui]?Qn=this[In.$content]?this[In.$content].replaceAll(Hn,`
`):void 0:Qn=this[In.$content]||void 0,Cn.HTMLResult.success({name:this[In.$nodeName],attributes:{href:this.href,style:On(this.style,this,this[ui])},children:xi,value:Qn})}}class ri extends ii{constructor(Ii){super(Ii,"a"),this.href=(0,jn.fixURL)(Ii.href)||""}}class di extends ii{constructor(Ii){super(Ii,"b")}[In.$pushGlyphs](Ii){Ii.pushFont({weight:"bold"}),super[In.$pushGlyphs](Ii),Ii.popFont()}}class fi extends ii{constructor(Ii){super(Ii,"body")}[In.$toHTML](Ii){const xi=super[In.$toHTML](Ii),{html:Qn}=xi;return Qn?(Qn.name="div",Qn.attributes.class=["xfaRich"],xi):Cn.HTMLResult.EMPTY}}class wi extends ii{constructor(Ii){super(Ii,"br")}[In.$text](){return`
`}[In.$pushGlyphs](Ii){Ii.addString(`
`)}[In.$toHTML](Ii){return Cn.HTMLResult.success({name:"br"})}}class Jn extends ii{constructor(Ii){super(Ii,"html")}[In.$toHTML](Ii){var Qn;const xi=[];if(this[In.$extra]={children:xi},this[In.$childrenToHTML]({}),xi.length===0)return Cn.HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:{}},value:this[In.$content]||""});if(xi.length===1){const ai=xi[0];if((Qn=ai.attributes)!=null&&Qn.class.includes("xfaRich"))return Cn.HTMLResult.success(ai)}return Cn.HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:{}},children:xi})}}class pi extends ii{constructor(Ii){super(Ii,"i")}[In.$pushGlyphs](Ii){Ii.pushFont({posture:"italic"}),super[In.$pushGlyphs](Ii),Ii.popFont()}}class Zn extends ii{constructor(Ii){super(Ii,"li")}}class Gn extends ii{constructor(Ii){super(Ii,"ol")}}class mi extends ii{constructor(Ii){super(Ii,"p")}[In.$pushGlyphs](Ii){super[In.$pushGlyphs](Ii,!1),Ii.addString(`
`),Ii.addPara(),Ii.popFont()}[In.$text](){return this[In.$getParent]()[In.$getChildren]().at(-1)===this?super[In.$text]():super[In.$text]()+`
`}}class Wn extends ii{constructor(Ii){super(Ii,"span")}}class ni extends ii{constructor(Ii){super(Ii,"sub")}}class li extends ii{constructor(Ii){super(Ii,"sup")}}class Ai extends ii{constructor(Ii){super(Ii,"ul")}}class gi{static[Ln.$buildXFAObject](Ii,xi){if(gi.hasOwnProperty(Ii))return gi[Ii](xi)}static a(Ii){return new ri(Ii)}static b(Ii){return new di(Ii)}static body(Ii){return new fi(Ii)}static br(Ii){return new wi(Ii)}static html(Ii){return new Jn(Ii)}static i(Ii){return new pi(Ii)}static li(Ii){return new Zn(Ii)}static ol(Ii){return new Gn(Ii)}static p(Ii){return new mi(Ii)}static span(Ii){return new Wn(Ii)}static sub(Ii){return new ni(Ii)}static sup(Ii){return new li(Ii)}static ul(Ii){return new Ai(Ii)}}Mn.XhtmlNamespace=gi},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.UnknownNamespace=void 0;var In=ti(81),Ln=ti(87);class jn{constructor(Tn){this.namespaceId=Tn}[In.$buildXFAObject](Tn,Rn){return new Ln.XmlObject(this.namespaceId,Tn,Rn)}}Mn.UnknownNamespace=jn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.DatasetReader=void 0;var In=ti(2),Ln=ti(3),jn=ti(71);function Cn(ui){try{return(0,In.stringToUTF8String)(ui)}catch(si){return(0,In.warn)(`UTF-8 decoding failed: "${si}".`),ui}}class Tn extends jn.SimpleXMLParser{constructor(si){super(si),this.node=null}onEndElement(si){const ei=super.onEndElement(si);if(ei&&si==="xfa:datasets")throw this.node=ei,new Error("Aborting DatasetXMLParser.")}}class Rn{constructor(si){if(si.datasets)this.node=new jn.SimpleXMLParser({hasAttributes:!0}).parseFromString(si.datasets).documentElement;else{const ei=new Tn({hasAttributes:!0});try{ei.parseFromString(si["xdp:xdp"])}catch{}this.node=ei.node}}getValue(si){if(!this.node||!si)return"";const ei=this.node.searchNode((0,Ln.parseXFAPath)(si),0);if(!ei)return"";const Bn=ei.firstChild;return(Bn==null?void 0:Bn.nodeName)==="value"?ei.children.map(Nn=>Cn(Nn.textContent)):Cn(ei.textContent)}}Mn.DatasetReader=Rn},(oi,Mn,ti)=>{var si;Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.XRef=void 0;var In=ti(2),Ln=ti(4),jn=ti(16),Cn=ti(3),Tn=ti(5),Rn=ti(74);class ui{constructor(Bn,Nn){Ki(this,si,null);this.stream=Bn,this.pdfManager=Nn,this.entries=[],this._xrefStms=new Set,this._cacheMap=new Map,this._pendingRefs=new Ln.RefSet,this._newPersistentRefNum=null,this._newTemporaryRefNum=null}getNewPersistentRef(Bn){this._newPersistentRefNum===null&&(this._newPersistentRefNum=this.entries.length||1);const Nn=this._newPersistentRefNum++;return this._cacheMap.set(Nn,Bn),Ln.Ref.get(Nn,0)}getNewTemporaryRef(){return this._newTemporaryRefNum===null&&(this._newTemporaryRefNum=this.entries.length||1),Ln.Ref.get(this._newTemporaryRefNum++,0)}resetNewTemporaryRef(){this._newTemporaryRefNum=null}setStartXRef(Bn){this.startXRefQueue=[Bn]}parse(Bn=!1){let Nn;Bn?((0,In.warn)("Indexing all PDF objects"),Nn=this.indexObjects()):Nn=this.readXRef(),Nn.assignXref(this),this.trailer=Nn;let Hn;try{Hn=Nn.get("Encrypt")}catch(hi){if(hi instanceof Cn.MissingDataException)throw hi;(0,In.warn)(`XRef.parse - Invalid "Encrypt" reference: "${hi}".`)}if(Hn instanceof Ln.Dict){const hi=Nn.get("ID"),Xn=hi!=null&&hi.length?hi[0]:"";Hn.suppressEncryption=!0,this.encrypt=new Rn.CipherTransformFactory(Hn,Xn,this.pdfManager.password)}let On;try{On=Nn.get("Root")}catch(hi){if(hi instanceof Cn.MissingDataException)throw hi;(0,In.warn)(`XRef.parse - Invalid "Root" reference: "${hi}".`)}if(On instanceof Ln.Dict)try{if(On.get("Pages")instanceof Ln.Dict){this.root=On;return}}catch(hi){if(hi instanceof Cn.MissingDataException)throw hi;(0,In.warn)(`XRef.parse - Invalid "Pages" reference: "${hi}".`)}throw Bn?new In.InvalidPDFException("Invalid Root reference."):new Cn.XRefParseException}processXRefTable(Bn){"tableState"in this||(this.tableState={entryNum:0,streamPos:Bn.lexer.stream.pos,parserBuf1:Bn.buf1,parserBuf2:Bn.buf2});const Nn=this.readXRefTable(Bn);if(!(0,Ln.isCmd)(Nn,"trailer"))throw new In.FormatError("Invalid XRef table: could not find trailer dictionary");let Hn=Bn.getObj();if(!(Hn instanceof Ln.Dict)&&Hn.dict&&(Hn=Hn.dict),!(Hn instanceof Ln.Dict))throw new In.FormatError("Invalid XRef table: could not parse trailer dictionary");return delete this.tableState,Hn}readXRefTable(Bn){const Nn=Bn.lexer.stream,Hn=this.tableState;Nn.pos=Hn.streamPos,Bn.buf1=Hn.parserBuf1,Bn.buf2=Hn.parserBuf2;let On;for(;;){if(!("firstEntryNum"in Hn)||!("entryCount"in Hn)){if((0,Ln.isCmd)(On=Bn.getObj(),"trailer"))break;Hn.firstEntryNum=On,Hn.entryCount=Bn.getObj()}let hi=Hn.firstEntryNum;const Xn=Hn.entryCount;if(!Number.isInteger(hi)||!Number.isInteger(Xn))throw new In.FormatError("Invalid XRef table: wrong types in subsection header");for(let ii=Hn.entryNum;ii<Xn;ii++){Hn.streamPos=Nn.pos,Hn.entryNum=ii,Hn.parserBuf1=Bn.buf1,Hn.parserBuf2=Bn.buf2;const ri={};ri.offset=Bn.getObj(),ri.gen=Bn.getObj();const di=Bn.getObj();if(di instanceof Ln.Cmd)switch(di.cmd){case"f":ri.free=!0;break;case"n":ri.uncompressed=!0;break}if(!Number.isInteger(ri.offset)||!Number.isInteger(ri.gen)||!(ri.free||ri.uncompressed))throw new In.FormatError(`Invalid entry in XRef subsection: ${hi}, ${Xn}`);ii===0&&ri.free&&hi===1&&(hi=0),this.entries[ii+hi]||(this.entries[ii+hi]=ri)}Hn.entryNum=0,Hn.streamPos=Nn.pos,Hn.parserBuf1=Bn.buf1,Hn.parserBuf2=Bn.buf2,delete Hn.firstEntryNum,delete Hn.entryCount}if(this.entries[0]&&!this.entries[0].free)throw new In.FormatError("Invalid XRef table: unexpected first object");return On}processXRefStream(Bn){if(!("streamState"in this)){const Nn=Bn.dict,Hn=Nn.get("W");let On=Nn.get("Index");On||(On=[0,Nn.get("Size")]),this.streamState={entryRanges:On,byteWidths:Hn,entryNum:0,streamPos:Bn.pos}}return this.readXRefStream(Bn),delete this.streamState,Bn.dict}readXRefStream(Bn){const Nn=this.streamState;Bn.pos=Nn.streamPos;const[Hn,On,hi]=Nn.byteWidths,Xn=Nn.entryRanges;for(;Xn.length>0;){const[ii,ri]=Xn;if(!Number.isInteger(ii)||!Number.isInteger(ri))throw new In.FormatError(`Invalid XRef range fields: ${ii}, ${ri}`);if(!Number.isInteger(Hn)||!Number.isInteger(On)||!Number.isInteger(hi))throw new In.FormatError(`Invalid XRef entry fields length: ${ii}, ${ri}`);for(let di=Nn.entryNum;di<ri;++di){Nn.entryNum=di,Nn.streamPos=Bn.pos;let fi=0,wi=0,Jn=0;for(let Zn=0;Zn<Hn;++Zn){const Gn=Bn.getByte();if(Gn===-1)throw new In.FormatError("Invalid XRef byteWidths 'type'.");fi=fi<<8|Gn}Hn===0&&(fi=1);for(let Zn=0;Zn<On;++Zn){const Gn=Bn.getByte();if(Gn===-1)throw new In.FormatError("Invalid XRef byteWidths 'offset'.");wi=wi<<8|Gn}for(let Zn=0;Zn<hi;++Zn){const Gn=Bn.getByte();if(Gn===-1)throw new In.FormatError("Invalid XRef byteWidths 'generation'.");Jn=Jn<<8|Gn}const pi={};switch(pi.offset=wi,pi.gen=Jn,fi){case 0:pi.free=!0;break;case 1:pi.uncompressed=!0;break;case 2:break;default:throw new In.FormatError(`Invalid XRef entry type: ${fi}`)}this.entries[ii+di]||(this.entries[ii+di]=pi)}Nn.entryNum=0,Nn.streamPos=Bn.pos,Xn.splice(0,2)}}indexObjects(){function ii(ai,Vn){let Yn="",ci=ai[Vn];for(;ci!==10&&ci!==13&&ci!==60&&!(++Vn>=ai.length);)Yn+=String.fromCharCode(ci),ci=ai[Vn];return Yn}function ri(ai,Vn,Yn){const ci=Yn.length,bi=ai.length;let Ci=0;for(;Vn<bi;){let Fi=0;for(;Fi<ci&&ai[Vn+Fi]===Yn[Fi];)++Fi;if(Fi>=ci)break;Vn++,Ci++}return Ci}const di=/\b(endobj|\d+\s+\d+\s+obj|xref|trailer\s*<<)\b/g,fi=/\b(startxref|\d+\s+\d+\s+obj)\b/g,wi=/^(\d+)\s+(\d+)\s+obj\b/,Jn=new Uint8Array([116,114,97,105,108,101,114]),pi=new Uint8Array([115,116,97,114,116,120,114,101,102]),Zn=new Uint8Array([47,88,82,101,102]);this.entries.length=0,this._cacheMap.clear();const Gn=this.stream;Gn.pos=0;const mi=Gn.getBytes(),Wn=(0,In.bytesToString)(mi),ni=mi.length;let li=Gn.start;const Ai=[],gi=[];for(;li<ni;){let ai=mi[li];if(ai===9||ai===10||ai===13||ai===32){++li;continue}if(ai===37){do{if(++li,li>=ni)break;ai=mi[li]}while(ai!==10&&ai!==13);continue}const Vn=ii(mi,li);let Yn;if(Vn.startsWith("xref")&&(Vn.length===4||/\s/.test(Vn[4])))li+=ri(mi,li,Jn),Ai.push(li),li+=ri(mi,li,pi);else if(Yn=wi.exec(Vn)){const ci=Yn[1]|0,bi=Yn[2]|0,Ci=li+Vn.length;let Fi,zi=!1;if(!this.entries[ci])zi=!0;else if(this.entries[ci].gen===bi)try{new jn.Parser({lexer:new jn.Lexer(Gn.makeSubStream(Ci))}).getObj(),zi=!0}catch(Ni){Ni instanceof Cn.ParserEOFException?(0,In.warn)(`indexObjects -- checking object (${Vn}): "${Ni}".`):zi=!0}zi&&(this.entries[ci]={offset:li-Gn.start,gen:bi,uncompressed:!0}),di.lastIndex=Ci;const _i=di.exec(Wn);_i?(Fi=di.lastIndex+1-li,_i[1]!=="endobj"&&((0,In.warn)(`indexObjects: Found "${_i[1]}" inside of another "obj", caused by missing "endobj" -- trying to recover.`),Fi-=_i[1].length+1)):Fi=ni-li;const ji=mi.subarray(li,li+Fi),Pi=ri(ji,0,Zn);Pi<Fi&&ji[Pi+5]<64&&(gi.push(li-Gn.start),this._xrefStms.add(li-Gn.start)),li+=Fi}else if(Vn.startsWith("trailer")&&(Vn.length===7||/\s/.test(Vn[7]))){Ai.push(li);const ci=li+Vn.length;let bi;fi.lastIndex=ci;const Ci=fi.exec(Wn);Ci?(bi=fi.lastIndex+1-li,Ci[1]!=="startxref"&&((0,In.warn)(`indexObjects: Found "${Ci[1]}" after "trailer", caused by missing "startxref" -- trying to recover.`),bi-=Ci[1].length+1)):bi=ni-li,li+=bi}else li+=Vn.length+1}for(const ai of gi)this.startXRefQueue.push(ai),this.readXRef(!0);const yi=[];let Ii=!1;for(const ai of Ai){Gn.pos=ai;const Vn=new jn.Parser({lexer:new jn.Lexer(Gn),xref:this,allowStreams:!0,recoveryMode:!0}),Yn=Vn.getObj();if(!(0,Ln.isCmd)(Yn,"trailer"))continue;const ci=Vn.getObj();ci instanceof Ln.Dict&&(yi.push(ci),ci.has("Encrypt")&&(Ii=!0))}let xi,Qn;for(const ai of[...yi,"genFallback",...yi]){if(ai==="genFallback"){if(!Qn)break;this._generationFallback=!0;continue}let Vn=!1;try{const Yn=ai.get("Root");if(!(Yn instanceof Ln.Dict))continue;const ci=Yn.get("Pages");if(!(ci instanceof Ln.Dict))continue;const bi=ci.get("Count");Number.isInteger(bi)&&(Vn=!0)}catch(Yn){Qn=Yn;continue}if(Vn&&(!Ii||ai.has("Encrypt"))&&ai.has("ID"))return ai;xi=ai}if(xi)return xi;if(this.topDict)return this.topDict;throw new In.InvalidPDFException("Invalid PDF structure.")}readXRef(Bn=!1){const Nn=this.stream,Hn=new Set;for(;this.startXRefQueue.length;){try{const On=this.startXRefQueue[0];if(Hn.has(On)){(0,In.warn)("readXRef - skipping XRef table since it was already parsed."),this.startXRefQueue.shift();continue}Hn.add(On),Nn.pos=On+Nn.start;const hi=new jn.Parser({lexer:new jn.Lexer(Nn),xref:this,allowStreams:!0});let Xn=hi.getObj(),ii;if((0,Ln.isCmd)(Xn,"xref"))ii=this.processXRefTable(hi),this.topDict||(this.topDict=ii),Xn=ii.get("XRefStm"),Number.isInteger(Xn)&&!this._xrefStms.has(Xn)&&(this._xrefStms.add(Xn),this.startXRefQueue.push(Xn),vi(this,si)??ds(this,si,Xn));else if(Number.isInteger(Xn)){if(!Number.isInteger(hi.getObj())||!(0,Ln.isCmd)(hi.getObj(),"obj")||!((Xn=hi.getObj())instanceof Tn.BaseStream))throw new In.FormatError("Invalid XRef stream");if(ii=this.processXRefStream(Xn),this.topDict||(this.topDict=ii),!ii)throw new In.FormatError("Failed to read XRef stream")}else throw new In.FormatError("Invalid XRef stream header");Xn=ii.get("Prev"),Number.isInteger(Xn)?this.startXRefQueue.push(Xn):Xn instanceof Ln.Ref&&this.startXRefQueue.push(Xn.num)}catch(On){if(On instanceof Cn.MissingDataException)throw On;(0,In.info)("(while reading XRef): "+On)}this.startXRefQueue.shift()}if(this.topDict)return this.topDict;if(!Bn)throw new Cn.XRefParseException}get lastXRefStreamPos(){return vi(this,si)??(this._xrefStms.size>0?Math.max(...this._xrefStms):null)}getEntry(Bn){const Nn=this.entries[Bn];return Nn&&!Nn.free&&Nn.offset?Nn:null}fetchIfRef(Bn,Nn=!1){return Bn instanceof Ln.Ref?this.fetch(Bn,Nn):Bn}fetch(Bn,Nn=!1){if(!(Bn instanceof Ln.Ref))throw new Error("ref object is not a reference");const Hn=Bn.num,On=this._cacheMap.get(Hn);if(On!==void 0)return On instanceof Ln.Dict&&!On.objId&&(On.objId=Bn.toString()),On;let hi=this.getEntry(Hn);if(hi===null)return this._cacheMap.set(Hn,hi),hi;if(this._pendingRefs.has(Bn))return this._pendingRefs.remove(Bn),(0,In.warn)(`Ignoring circular reference: ${Bn}.`),Ln.CIRCULAR_REF;this._pendingRefs.put(Bn);try{hi=hi.uncompressed?this.fetchUncompressed(Bn,hi,Nn):this.fetchCompressed(Bn,hi,Nn),this._pendingRefs.remove(Bn)}catch(Xn){throw this._pendingRefs.remove(Bn),Xn}return hi instanceof Ln.Dict?hi.objId=Bn.toString():hi instanceof Tn.BaseStream&&(hi.dict.objId=Bn.toString()),hi}fetchUncompressed(Bn,Nn,Hn=!1){const On=Bn.gen;let hi=Bn.num;if(Nn.gen!==On){const wi=`Inconsistent generation in XRef: ${Bn}`;if(this._generationFallback&&Nn.gen<On)return(0,In.warn)(wi),this.fetchUncompressed(Ln.Ref.get(hi,Nn.gen),Nn,Hn);throw new Cn.XRefEntryException(wi)}const Xn=this.stream.makeSubStream(Nn.offset+this.stream.start),ii=new jn.Parser({lexer:new jn.Lexer(Xn),xref:this,allowStreams:!0}),ri=ii.getObj(),di=ii.getObj(),fi=ii.getObj();if(ri!==hi||di!==On||!(fi instanceof Ln.Cmd))throw new Cn.XRefEntryException(`Bad (uncompressed) XRef entry: ${Bn}`);if(fi.cmd!=="obj"){if(fi.cmd.startsWith("obj")&&(hi=parseInt(fi.cmd.substring(3),10),!Number.isNaN(hi)))return hi;throw new Cn.XRefEntryException(`Bad (uncompressed) XRef entry: ${Bn}`)}return Nn=this.encrypt&&!Hn?ii.getObj(this.encrypt.createCipherTransform(hi,On)):ii.getObj(),Nn instanceof Tn.BaseStream||this._cacheMap.set(hi,Nn),Nn}fetchCompressed(Bn,Nn,Hn=!1){const On=Nn.offset,hi=this.fetch(Ln.Ref.get(On,0));if(!(hi instanceof Tn.BaseStream))throw new In.FormatError("bad ObjStm stream");const Xn=hi.dict.get("First"),ii=hi.dict.get("N");if(!Number.isInteger(Xn)||!Number.isInteger(ii))throw new In.FormatError("invalid first and n parameters for ObjStm stream");let ri=new jn.Parser({lexer:new jn.Lexer(hi),xref:this,allowStreams:!0});const di=new Array(ii),fi=new Array(ii);for(let pi=0;pi<ii;++pi){const Zn=ri.getObj();if(!Number.isInteger(Zn))throw new In.FormatError(`invalid object number in the ObjStm stream: ${Zn}`);const Gn=ri.getObj();if(!Number.isInteger(Gn))throw new In.FormatError(`invalid object offset in the ObjStm stream: ${Gn}`);di[pi]=Zn,fi[pi]=Gn}const wi=(hi.start||0)+Xn,Jn=new Array(ii);for(let pi=0;pi<ii;++pi){const Zn=pi<ii-1?fi[pi+1]-fi[pi]:void 0;if(Zn<0)throw new In.FormatError("Invalid offset in the ObjStm stream.");ri=new jn.Parser({lexer:new jn.Lexer(hi.makeSubStream(wi+fi[pi],Zn,hi.dict)),xref:this,allowStreams:!0});const Gn=ri.getObj();if(Jn[pi]=Gn,Gn instanceof Tn.BaseStream)continue;const mi=di[pi],Wn=this.entries[mi];Wn&&Wn.offset===On&&Wn.gen===pi&&this._cacheMap.set(mi,Gn)}if(Nn=Jn[Nn.gen],Nn===void 0)throw new Cn.XRefEntryException(`Bad (compressed) XRef entry: ${Bn}`);return Nn}async fetchIfRefAsync(Bn,Nn){return Bn instanceof Ln.Ref?this.fetchAsync(Bn,Nn):Bn}async fetchAsync(Bn,Nn){try{return this.fetch(Bn,Nn)}catch(Hn){if(!(Hn instanceof Cn.MissingDataException))throw Hn;return await this.pdfManager.requestRange(Hn.begin,Hn.end),this.fetchAsync(Bn,Nn)}}getCatalogObj(){return this.root}}si=new WeakMap,Mn.XRef=ui},(oi,Mn,ti)=>{var Rn,rh,si,oh,Bn,lc;Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.MessageHandler=void 0;var In=ti(2);const Ln={UNKNOWN:0,DATA:1,ERROR:2},jn={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Cn(Hn){switch(Hn instanceof Error||typeof Hn=="object"&&Hn!==null||(0,In.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),Hn.name){case"AbortException":return new In.AbortException(Hn.message);case"MissingPDFException":return new In.MissingPDFException(Hn.message);case"PasswordException":return new In.PasswordException(Hn.message,Hn.code);case"UnexpectedResponseException":return new In.UnexpectedResponseException(Hn.message,Hn.status);case"UnknownErrorException":return new In.UnknownErrorException(Hn.message,Hn.details);default:return new In.UnknownErrorException(Hn.message,Hn.toString())}}class Tn{constructor(On,hi,Xn){Ki(this,Rn);Ki(this,si);Ki(this,Bn);this.sourceName=On,this.targetName=hi,this.comObj=Xn,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=ii=>{const ri=ii.data;if(ri.targetName!==this.sourceName)return;if(ri.stream){Qi(this,si,oh).call(this,ri);return}if(ri.callback){const fi=ri.callbackId,wi=this.callbackCapabilities[fi];if(!wi)throw new Error(`Cannot resolve callback ${fi}`);if(delete this.callbackCapabilities[fi],ri.callback===Ln.DATA)wi.resolve(ri.data);else if(ri.callback===Ln.ERROR)wi.reject(Cn(ri.reason));else throw new Error("Unexpected callback case");return}const di=this.actionHandler[ri.action];if(!di)throw new Error(`Unknown action from worker: ${ri.action}`);if(ri.callbackId){const fi=this.sourceName,wi=ri.sourceName;new Promise(function(Jn){Jn(di(ri.data))}).then(function(Jn){Xn.postMessage({sourceName:fi,targetName:wi,callback:Ln.DATA,callbackId:ri.callbackId,data:Jn})},function(Jn){Xn.postMessage({sourceName:fi,targetName:wi,callback:Ln.ERROR,callbackId:ri.callbackId,reason:Cn(Jn)})});return}if(ri.streamId){Qi(this,Rn,rh).call(this,ri);return}di(ri.data)},Xn.addEventListener("message",this._onComObjOnMessage)}on(On,hi){const Xn=this.actionHandler;if(Xn[On])throw new Error(`There is already an actionName called "${On}"`);Xn[On]=hi}send(On,hi,Xn){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:On,data:hi},Xn)}sendWithPromise(On,hi,Xn){const ii=this.callbackId++,ri=new In.PromiseCapability;this.callbackCapabilities[ii]=ri;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:On,callbackId:ii,data:hi},Xn)}catch(di){ri.reject(di)}return ri.promise}sendWithStream(On,hi,Xn,ii){const ri=this.streamId++,di=this.sourceName,fi=this.targetName,wi=this.comObj;return new ReadableStream({start:Jn=>{const pi=new In.PromiseCapability;return this.streamControllers[ri]={controller:Jn,startCall:pi,pullCall:null,cancelCall:null,isClosed:!1},wi.postMessage({sourceName:di,targetName:fi,action:On,streamId:ri,data:hi,desiredSize:Jn.desiredSize},ii),pi.promise},pull:Jn=>{const pi=new In.PromiseCapability;return this.streamControllers[ri].pullCall=pi,wi.postMessage({sourceName:di,targetName:fi,stream:jn.PULL,streamId:ri,desiredSize:Jn.desiredSize}),pi.promise},cancel:Jn=>{(0,In.assert)(Jn instanceof Error,"cancel must have a valid reason");const pi=new In.PromiseCapability;return this.streamControllers[ri].cancelCall=pi,this.streamControllers[ri].isClosed=!0,wi.postMessage({sourceName:di,targetName:fi,stream:jn.CANCEL,streamId:ri,reason:Cn(Jn)}),pi.promise}},Xn)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}Rn=new WeakSet,rh=function(On){const hi=On.streamId,Xn=this.sourceName,ii=On.sourceName,ri=this.comObj,di=this,fi=this.actionHandler[On.action],wi={enqueue(Jn,pi=1,Zn){if(this.isCancelled)return;const Gn=this.desiredSize;this.desiredSize-=pi,Gn>0&&this.desiredSize<=0&&(this.sinkCapability=new In.PromiseCapability,this.ready=this.sinkCapability.promise),ri.postMessage({sourceName:Xn,targetName:ii,stream:jn.ENQUEUE,streamId:hi,chunk:Jn},Zn)},close(){this.isCancelled||(this.isCancelled=!0,ri.postMessage({sourceName:Xn,targetName:ii,stream:jn.CLOSE,streamId:hi}),delete di.streamSinks[hi])},error(Jn){(0,In.assert)(Jn instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,ri.postMessage({sourceName:Xn,targetName:ii,stream:jn.ERROR,streamId:hi,reason:Cn(Jn)}))},sinkCapability:new In.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:On.desiredSize,ready:null};wi.sinkCapability.resolve(),wi.ready=wi.sinkCapability.promise,this.streamSinks[hi]=wi,new Promise(function(Jn){Jn(fi(On.data,wi))}).then(function(){ri.postMessage({sourceName:Xn,targetName:ii,stream:jn.START_COMPLETE,streamId:hi,success:!0})},function(Jn){ri.postMessage({sourceName:Xn,targetName:ii,stream:jn.START_COMPLETE,streamId:hi,reason:Cn(Jn)})})},si=new WeakSet,oh=function(On){const hi=On.streamId,Xn=this.sourceName,ii=On.sourceName,ri=this.comObj,di=this.streamControllers[hi],fi=this.streamSinks[hi];switch(On.stream){case jn.START_COMPLETE:On.success?di.startCall.resolve():di.startCall.reject(Cn(On.reason));break;case jn.PULL_COMPLETE:On.success?di.pullCall.resolve():di.pullCall.reject(Cn(On.reason));break;case jn.PULL:if(!fi){ri.postMessage({sourceName:Xn,targetName:ii,stream:jn.PULL_COMPLETE,streamId:hi,success:!0});break}fi.desiredSize<=0&&On.desiredSize>0&&fi.sinkCapability.resolve(),fi.desiredSize=On.desiredSize,new Promise(function(wi){var Jn;wi((Jn=fi.onPull)==null?void 0:Jn.call(fi))}).then(function(){ri.postMessage({sourceName:Xn,targetName:ii,stream:jn.PULL_COMPLETE,streamId:hi,success:!0})},function(wi){ri.postMessage({sourceName:Xn,targetName:ii,stream:jn.PULL_COMPLETE,streamId:hi,reason:Cn(wi)})});break;case jn.ENQUEUE:if((0,In.assert)(di,"enqueue should have stream controller"),di.isClosed)break;di.controller.enqueue(On.chunk);break;case jn.CLOSE:if((0,In.assert)(di,"close should have stream controller"),di.isClosed)break;di.isClosed=!0,di.controller.close(),Qi(this,Bn,lc).call(this,di,hi);break;case jn.ERROR:(0,In.assert)(di,"error should have stream controller"),di.controller.error(Cn(On.reason)),Qi(this,Bn,lc).call(this,di,hi);break;case jn.CANCEL_COMPLETE:On.success?di.cancelCall.resolve():di.cancelCall.reject(Cn(On.reason)),Qi(this,Bn,lc).call(this,di,hi);break;case jn.CANCEL:if(!fi)break;new Promise(function(wi){var Jn;wi((Jn=fi.onCancel)==null?void 0:Jn.call(fi,Cn(On.reason)))}).then(function(){ri.postMessage({sourceName:Xn,targetName:ii,stream:jn.CANCEL_COMPLETE,streamId:hi,success:!0})},function(wi){ri.postMessage({sourceName:Xn,targetName:ii,stream:jn.CANCEL_COMPLETE,streamId:hi,reason:Cn(wi)})}),fi.sinkCapability.reject(Cn(On.reason)),fi.isCancelled=!0,delete this.streamSinks[hi];break;default:throw new Error("Unexpected stream case")}},Bn=new WeakSet,lc=async function(On,hi){var Xn,ii,ri;await Promise.allSettled([(Xn=On.startCall)==null?void 0:Xn.promise,(ii=On.pullCall)==null?void 0:ii.promise,(ri=On.cancelCall)==null?void 0:ri.promise]),delete this.streamControllers[hi]},Mn.MessageHandler=Tn},(oi,Mn,ti)=>{Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.PDFWorkerStream=void 0;var In=ti(2);class Ln{constructor(Rn){this._msgHandler=Rn,this._contentLength=null,this._fullRequestReader=null,this._rangeRequestReaders=[]}getFullReader(){return(0,In.assert)(!this._fullRequestReader,"PDFWorkerStream.getFullReader can only be called once."),this._fullRequestReader=new jn(this._msgHandler),this._fullRequestReader}getRangeReader(Rn,ui){const si=new Cn(Rn,ui,this._msgHandler);return this._rangeRequestReaders.push(si),si}cancelAllRequests(Rn){var ui;(ui=this._fullRequestReader)==null||ui.cancel(Rn);for(const si of this._rangeRequestReaders.slice(0))si.cancel(Rn)}}Mn.PDFWorkerStream=Ln;class jn{constructor(Rn){this._msgHandler=Rn,this.onProgress=null,this._contentLength=null,this._isRangeSupported=!1,this._isStreamingSupported=!1;const ui=this._msgHandler.sendWithStream("GetReader");this._reader=ui.getReader(),this._headersReady=this._msgHandler.sendWithPromise("ReaderHeadersReady").then(si=>{this._isStreamingSupported=si.isStreamingSupported,this._isRangeSupported=si.isRangeSupported,this._contentLength=si.contentLength})}get headersReady(){return this._headersReady}get contentLength(){return this._contentLength}get isStreamingSupported(){return this._isStreamingSupported}get isRangeSupported(){return this._isRangeSupported}async read(){const{value:Rn,done:ui}=await this._reader.read();return ui?{value:void 0,done:!0}:{value:Rn.buffer,done:!1}}cancel(Rn){this._reader.cancel(Rn)}}class Cn{constructor(Rn,ui,si){this._msgHandler=si,this.onProgress=null;const ei=this._msgHandler.sendWithStream("GetRangeReader",{begin:Rn,end:ui});this._reader=ei.getReader()}get isStreamingSupported(){return!1}async read(){const{value:Rn,done:ui}=await this._reader.read();return ui?{value:void 0,done:!0}:{value:Rn.buffer,done:!1}}cancel(Rn){this._reader.cancel(Rn)}}}],$n={};function Pn(oi){var Mn=$n[oi];if(Mn!==void 0)return Mn.exports;var ti=$n[oi]={exports:{}};return ki[oi](ti,ti.exports,Pn),ti.exports}var Kn={};return(()=>{var oi=Kn;Object.defineProperty(oi,"__esModule",{value:!0}),Object.defineProperty(oi,"WorkerMessageHandler",{enumerable:!0,get:function(){return Mn.WorkerMessageHandler}});var Mn=Pn(1)})(),Kn})()),function($n,Pn){typeof exports=="object"&&typeof module=="object"?module.exports=$n.pdfjsLib=Pn():typeof define=="function"&&define.amd?define("pdfjs-dist/build/pdf",[],()=>$n.pdfjsLib=Pn()):typeof exports=="object"?exports["pdfjs-dist/build/pdf"]=$n.pdfjsLib=Pn():$n["pdfjs-dist/build/pdf"]=$n.pdfjsLib=Pn()}(globalThis,()=>(()=>{var __webpack_modules__=[,(ki,$n)=>{var hs;Object.defineProperty($n,"__esModule",{value:!0}),$n.VerbosityLevel=$n.Util=$n.UnknownErrorException=$n.UnexpectedResponseException=$n.TextRenderingMode=$n.RenderingIntentFlag=$n.PromiseCapability=$n.PermissionFlag=$n.PasswordResponses=$n.PasswordException=$n.PageActionEventType=$n.OPS=$n.MissingPDFException=$n.MAX_IMAGE_SIZE_TO_CACHE=$n.LINE_FACTOR=$n.LINE_DESCENT_FACTOR=$n.InvalidPDFException=$n.ImageKind=$n.IDENTITY_MATRIX=$n.FormatError=$n.FeatureTest=$n.FONT_IDENTITY_MATRIX=$n.DocumentActionEventType=$n.CMapCompressionType=$n.BaseException=$n.BASELINE_FACTOR=$n.AnnotationType=$n.AnnotationReplyType=$n.AnnotationPrefix=$n.AnnotationMode=$n.AnnotationFlag=$n.AnnotationFieldFlag=$n.AnnotationEditorType=$n.AnnotationEditorPrefix=$n.AnnotationEditorParamsType=$n.AnnotationBorderStyleType=$n.AnnotationActionEventType=$n.AbortException=void 0,$n.assert=Ai,$n.bytesToString=Fi,$n.createValidAbsoluteUrl=yi,$n.getModificationDate=Oi,$n.getUuid=is,$n.getVerbosityLevel=mi,$n.info=Wn,$n.isArrayBuffer=$i,$n.isArrayEqual=Bi,$n.isNodeJS=void 0,$n.normalizeUnicode=ns,$n.objectFromMap=Pi,$n.objectSize=ji,$n.setVerbosityLevel=Gn,$n.shadow=Ii,$n.string32=_i,$n.stringToBytes=zi,$n.stringToPDFString=Hi,$n.stringToUTF8String=Li,$n.unreachable=li,$n.utf8StringToString=Ei,$n.warn=ni;const Pn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");$n.isNodeJS=Pn;const Kn=[1,0,0,1,0,0];$n.IDENTITY_MATRIX=Kn;const oi=[.001,0,0,.001,0,0];$n.FONT_IDENTITY_MATRIX=oi;const Mn=1e7;$n.MAX_IMAGE_SIZE_TO_CACHE=Mn;const ti=1.35;$n.LINE_FACTOR=ti;const In=.35;$n.LINE_DESCENT_FACTOR=In;const Ln=In/ti;$n.BASELINE_FACTOR=Ln;const jn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};$n.RenderingIntentFlag=jn;const Cn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};$n.AnnotationMode=Cn;const Tn="pdfjs_internal_editor_";$n.AnnotationEditorPrefix=Tn;const Rn={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};$n.AnnotationEditorType=Rn;const ui={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};$n.AnnotationEditorParamsType=ui;const si={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};$n.PermissionFlag=si;const ei={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};$n.TextRenderingMode=ei;const Bn={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};$n.ImageKind=Bn;const Nn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};$n.AnnotationType=Nn;const Hn={GROUP:"Group",REPLY:"R"};$n.AnnotationReplyType=Hn;const On={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};$n.AnnotationFlag=On;const hi={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};$n.AnnotationFieldFlag=hi;const Xn={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};$n.AnnotationBorderStyleType=Xn;const ii={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};$n.AnnotationActionEventType=ii;const ri={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};$n.DocumentActionEventType=ri;const di={O:"PageOpen",C:"PageClose"};$n.PageActionEventType=di;const fi={ERRORS:0,WARNINGS:1,INFOS:5};$n.VerbosityLevel=fi;const wi={NONE:0,BINARY:1};$n.CMapCompressionType=wi;const Jn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};$n.OPS=Jn;const pi={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};$n.PasswordResponses=pi;let Zn=fi.WARNINGS;function Gn(Yi){Number.isInteger(Yi)&&(Zn=Yi)}function mi(){return Zn}function Wn(Yi){Zn>=fi.INFOS&&console.log(`Info: ${Yi}`)}function ni(Yi){Zn>=fi.WARNINGS&&console.log(`Warning: ${Yi}`)}function li(Yi){throw new Error(Yi)}function Ai(Yi,Vi){Yi||li(Vi)}function gi(Yi){switch(Yi==null?void 0:Yi.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function yi(Yi,Vi=null,Zi=null){if(!Yi)return null;try{if(Zi&&typeof Yi=="string"){if(Zi.addDefaultProtocol&&Yi.startsWith("www.")){const ts=Yi.match(/\./g);(ts==null?void 0:ts.length)>=2&&(Yi=`http://${Yi}`)}if(Zi.tryConvertEncoding)try{Yi=Li(Yi)}catch{}}const us=Vi?new URL(Yi,Vi):new URL(Yi);if(gi(us))return us}catch{}return null}function Ii(Yi,Vi,Zi,us=!1){return Object.defineProperty(Yi,Vi,{value:Zi,enumerable:!us,configurable:!0,writable:!1}),Zi}const xi=function(){function Vi(Zi,us){this.constructor===Vi&&li("Cannot initialize BaseException."),this.message=Zi,this.name=us}return Vi.prototype=new Error,Vi.constructor=Vi,Vi}();$n.BaseException=xi;class Qn extends xi{constructor(Vi,Zi){super(Vi,"PasswordException"),this.code=Zi}}$n.PasswordException=Qn;class ai extends xi{constructor(Vi,Zi){super(Vi,"UnknownErrorException"),this.details=Zi}}$n.UnknownErrorException=ai;class Vn extends xi{constructor(Vi){super(Vi,"InvalidPDFException")}}$n.InvalidPDFException=Vn;class Yn extends xi{constructor(Vi){super(Vi,"MissingPDFException")}}$n.MissingPDFException=Yn;class ci extends xi{constructor(Vi,Zi){super(Vi,"UnexpectedResponseException"),this.status=Zi}}$n.UnexpectedResponseException=ci;class bi extends xi{constructor(Vi){super(Vi,"FormatError")}}$n.FormatError=bi;class Ci extends xi{constructor(Vi){super(Vi,"AbortException")}}$n.AbortException=Ci;function Fi(Yi){(typeof Yi!="object"||(Yi==null?void 0:Yi.length)===void 0)&&li("Invalid argument for bytesToString");const Vi=Yi.length,Zi=8192;if(Vi<Zi)return String.fromCharCode.apply(null,Yi);const us=[];for(let ts=0;ts<Vi;ts+=Zi){const es=Math.min(ts+Zi,Vi),rs=Yi.subarray(ts,es);us.push(String.fromCharCode.apply(null,rs))}return us.join("")}function zi(Yi){typeof Yi!="string"&&li("Invalid argument for stringToBytes");const Vi=Yi.length,Zi=new Uint8Array(Vi);for(let us=0;us<Vi;++us)Zi[us]=Yi.charCodeAt(us)&255;return Zi}function _i(Yi){return String.fromCharCode(Yi>>24&255,Yi>>16&255,Yi>>8&255,Yi&255)}function ji(Yi){return Object.keys(Yi).length}function Pi(Yi){const Vi=Object.create(null);for(const[Zi,us]of Yi)Vi[Zi]=us;return Vi}function Ni(){const Yi=new Uint8Array(4);return Yi[0]=1,new Uint32Array(Yi.buffer,0,1)[0]===1}function Si(){try{return new Function(""),!0}catch{return!1}}class Ti{static get isLittleEndian(){return Ii(this,"isLittleEndian",Ni())}static get isEvalSupported(){return Ii(this,"isEvalSupported",Si())}static get isOffscreenCanvasSupported(){return Ii(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Ii(this,"platform",{isWin:!1,isMac:!1}):Ii(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Vi,Zi;return Ii(this,"isCSSRoundSupported",(Zi=(Vi=globalThis.CSS)==null?void 0:Vi.supports)==null?void 0:Zi.call(Vi,"width: round(1.5px, 1px)"))}}$n.FeatureTest=Ti;const Ri=[...Array(256).keys()].map(Yi=>Yi.toString(16).padStart(2,"0"));class Mi{static makeHexColor(Vi,Zi,us){return`#${Ri[Vi]}${Ri[Zi]}${Ri[us]}`}static scaleMinMax(Vi,Zi){let us;Vi[0]?(Vi[0]<0&&(us=Zi[0],Zi[0]=Zi[1],Zi[1]=us),Zi[0]*=Vi[0],Zi[1]*=Vi[0],Vi[3]<0&&(us=Zi[2],Zi[2]=Zi[3],Zi[3]=us),Zi[2]*=Vi[3],Zi[3]*=Vi[3]):(us=Zi[0],Zi[0]=Zi[2],Zi[2]=us,us=Zi[1],Zi[1]=Zi[3],Zi[3]=us,Vi[1]<0&&(us=Zi[2],Zi[2]=Zi[3],Zi[3]=us),Zi[2]*=Vi[1],Zi[3]*=Vi[1],Vi[2]<0&&(us=Zi[0],Zi[0]=Zi[1],Zi[1]=us),Zi[0]*=Vi[2],Zi[1]*=Vi[2]),Zi[0]+=Vi[4],Zi[1]+=Vi[4],Zi[2]+=Vi[5],Zi[3]+=Vi[5]}static transform(Vi,Zi){return[Vi[0]*Zi[0]+Vi[2]*Zi[1],Vi[1]*Zi[0]+Vi[3]*Zi[1],Vi[0]*Zi[2]+Vi[2]*Zi[3],Vi[1]*Zi[2]+Vi[3]*Zi[3],Vi[0]*Zi[4]+Vi[2]*Zi[5]+Vi[4],Vi[1]*Zi[4]+Vi[3]*Zi[5]+Vi[5]]}static applyTransform(Vi,Zi){const us=Vi[0]*Zi[0]+Vi[1]*Zi[2]+Zi[4],ts=Vi[0]*Zi[1]+Vi[1]*Zi[3]+Zi[5];return[us,ts]}static applyInverseTransform(Vi,Zi){const us=Zi[0]*Zi[3]-Zi[1]*Zi[2],ts=(Vi[0]*Zi[3]-Vi[1]*Zi[2]+Zi[2]*Zi[5]-Zi[4]*Zi[3])/us,es=(-Vi[0]*Zi[1]+Vi[1]*Zi[0]+Zi[4]*Zi[1]-Zi[5]*Zi[0])/us;return[ts,es]}static getAxialAlignedBoundingBox(Vi,Zi){const us=this.applyTransform(Vi,Zi),ts=this.applyTransform(Vi.slice(2,4),Zi),es=this.applyTransform([Vi[0],Vi[3]],Zi),rs=this.applyTransform([Vi[2],Vi[1]],Zi);return[Math.min(us[0],ts[0],es[0],rs[0]),Math.min(us[1],ts[1],es[1],rs[1]),Math.max(us[0],ts[0],es[0],rs[0]),Math.max(us[1],ts[1],es[1],rs[1])]}static inverseTransform(Vi){const Zi=Vi[0]*Vi[3]-Vi[1]*Vi[2];return[Vi[3]/Zi,-Vi[1]/Zi,-Vi[2]/Zi,Vi[0]/Zi,(Vi[2]*Vi[5]-Vi[4]*Vi[3])/Zi,(Vi[4]*Vi[1]-Vi[5]*Vi[0])/Zi]}static singularValueDecompose2dScale(Vi){const Zi=[Vi[0],Vi[2],Vi[1],Vi[3]],us=Vi[0]*Zi[0]+Vi[1]*Zi[2],ts=Vi[0]*Zi[1]+Vi[1]*Zi[3],es=Vi[2]*Zi[0]+Vi[3]*Zi[2],rs=Vi[2]*Zi[1]+Vi[3]*Zi[3],ss=(us+rs)/2,os=Math.sqrt((us+rs)**2-4*(us*rs-es*ts))/2,ks=ss+os||1,xs=ss-os||1;return[Math.sqrt(ks),Math.sqrt(xs)]}static normalizeRect(Vi){const Zi=Vi.slice(0);return Vi[0]>Vi[2]&&(Zi[0]=Vi[2],Zi[2]=Vi[0]),Vi[1]>Vi[3]&&(Zi[1]=Vi[3],Zi[3]=Vi[1]),Zi}static intersect(Vi,Zi){const us=Math.max(Math.min(Vi[0],Vi[2]),Math.min(Zi[0],Zi[2])),ts=Math.min(Math.max(Vi[0],Vi[2]),Math.max(Zi[0],Zi[2]));if(us>ts)return null;const es=Math.max(Math.min(Vi[1],Vi[3]),Math.min(Zi[1],Zi[3])),rs=Math.min(Math.max(Vi[1],Vi[3]),Math.max(Zi[1],Zi[3]));return es>rs?null:[us,es,ts,rs]}static bezierBoundingBox(Vi,Zi,us,ts,es,rs,ss,os){const ks=[],xs=[[],[]];let Rs,ms,Bs,ws,Ts,Is,ls,Wi;for(let ps=0;ps<2;++ps){if(ps===0?(ms=6*Vi-12*us+6*es,Rs=-3*Vi+9*us-9*es+3*ss,Bs=3*us-3*Vi):(ms=6*Zi-12*ts+6*rs,Rs=-3*Zi+9*ts-9*rs+3*os,Bs=3*ts-3*Zi),Math.abs(Rs)<1e-12){if(Math.abs(ms)<1e-12)continue;ws=-Bs/ms,0<ws&&ws<1&&ks.push(ws);continue}ls=ms*ms-4*Bs*Rs,Wi=Math.sqrt(ls),!(ls<0)&&(Ts=(-ms+Wi)/(2*Rs),0<Ts&&Ts<1&&ks.push(Ts),Is=(-ms-Wi)/(2*Rs),0<Is&&Is<1&&ks.push(Is))}let Ji=ks.length,cs;const fs=Ji;for(;Ji--;)ws=ks[Ji],cs=1-ws,xs[0][Ji]=cs*cs*cs*Vi+3*cs*cs*ws*us+3*cs*ws*ws*es+ws*ws*ws*ss,xs[1][Ji]=cs*cs*cs*Zi+3*cs*cs*ws*ts+3*cs*ws*ws*rs+ws*ws*ws*os;return xs[0][fs]=Vi,xs[1][fs]=Zi,xs[0][fs+1]=ss,xs[1][fs+1]=os,xs[0].length=xs[1].length=fs+2,[Math.min(...xs[0]),Math.min(...xs[1]),Math.max(...xs[0]),Math.max(...xs[1])]}}$n.Util=Mi;const Ui=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Hi(Yi){if(Yi[0]>="ï"){let Zi;if(Yi[0]==="þ"&&Yi[1]==="ÿ"?Zi="utf-16be":Yi[0]==="ÿ"&&Yi[1]==="þ"?Zi="utf-16le":Yi[0]==="ï"&&Yi[1]==="»"&&Yi[2]==="¿"&&(Zi="utf-8"),Zi)try{const us=new TextDecoder(Zi,{fatal:!0}),ts=zi(Yi);return us.decode(ts)}catch(us){ni(`stringToPDFString: "${us}".`)}}const Vi=[];for(let Zi=0,us=Yi.length;Zi<us;Zi++){const ts=Ui[Yi.charCodeAt(Zi)];Vi.push(ts?String.fromCharCode(ts):Yi.charAt(Zi))}return Vi.join("")}function Li(Yi){return decodeURIComponent(escape(Yi))}function Ei(Yi){return unescape(encodeURIComponent(Yi))}function $i(Yi){return typeof Yi=="object"&&(Yi==null?void 0:Yi.byteLength)!==void 0}function Bi(Yi,Vi){if(Yi.length!==Vi.length)return!1;for(let Zi=0,us=Yi.length;Zi<us;Zi++)if(Yi[Zi]!==Vi[Zi])return!1;return!0}function Oi(Yi=new Date){return[Yi.getUTCFullYear().toString(),(Yi.getUTCMonth()+1).toString().padStart(2,"0"),Yi.getUTCDate().toString().padStart(2,"0"),Yi.getUTCHours().toString().padStart(2,"0"),Yi.getUTCMinutes().toString().padStart(2,"0"),Yi.getUTCSeconds().toString().padStart(2,"0")].join("")}class Xi{constructor(){Ki(this,hs,!1);this.promise=new Promise((Vi,Zi)=>{this.resolve=us=>{ds(this,hs,!0),Vi(us)},this.reject=us=>{ds(this,hs,!0),Zi(us)}})}get settled(){return vi(this,hs)}}hs=new WeakMap,$n.PromiseCapability=Xi;let Gi=null,qi=null;function ns(Yi){return Gi||(Gi=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,qi=new Map([["ﬅ","ſt"]])),Yi.replaceAll(Gi,(Vi,Zi,us)=>Zi?Zi.normalize("NFKC"):qi.get(us))}function is(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Yi=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Yi);else for(let Vi=0;Vi<32;Vi++)Yi[Vi]=Math.floor(Math.random()*255);return Fi(Yi)}const as="pdfjs_internal_id_";$n.AnnotationPrefix=as},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var ki,Pn,Kn,oi,Lo,ti,hc,Ln,jn,Cn,Tn,Rn,ui,si,ei,Bn,uc,Hn,On,nl,Xn,ii;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(di){if(typeof di=="string"||di instanceof URL?di={url:di}:(0,_util.isArrayBuffer)(di)&&(di={data:di}),typeof di!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!di.url&&!di.data&&!di.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const fi=new PDFDocumentLoadingTask,{docId:wi}=fi,Jn=di.url?getUrlProp(di.url):null,pi=di.data?getDataProp(di.data):null,Zn=di.httpHeaders||null,Gn=di.withCredentials===!0,mi=di.password??null,Wn=di.range instanceof PDFDataRangeTransport?di.range:null,ni=Number.isInteger(di.rangeChunkSize)&&di.rangeChunkSize>0?di.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let li=di.worker instanceof PDFWorker?di.worker:null;const Ai=di.verbosity,gi=typeof di.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(di.docBaseUrl)?di.docBaseUrl:null,yi=typeof di.cMapUrl=="string"?di.cMapUrl:null,Ii=di.cMapPacked!==!1,xi=di.CMapReaderFactory||DefaultCMapReaderFactory,Qn=typeof di.standardFontDataUrl=="string"?di.standardFontDataUrl:null,ai=di.StandardFontDataFactory||DefaultStandardFontDataFactory,Vn=di.stopAtErrors!==!0,Yn=Number.isInteger(di.maxImageSize)&&di.maxImageSize>-1?di.maxImageSize:-1,ci=di.isEvalSupported!==!1,bi=typeof di.isOffscreenCanvasSupported=="boolean"?di.isOffscreenCanvasSupported:!_util.isNodeJS,Ci=Number.isInteger(di.canvasMaxAreaInBytes)?di.canvasMaxAreaInBytes:-1,Fi=typeof di.disableFontFace=="boolean"?di.disableFontFace:_util.isNodeJS,zi=di.fontExtraProperties===!0,_i=di.enableXfa===!0,ji=di.ownerDocument||globalThis.document,Pi=di.disableRange===!0,Ni=di.disableStream===!0,Si=di.disableAutoFetch===!0,Ti=di.pdfBug===!0,Ri=Wn?Wn.length:di.length??NaN,Mi=typeof di.useSystemFonts=="boolean"?di.useSystemFonts:!_util.isNodeJS&&!Fi,Ui=typeof di.useWorkerFetch=="boolean"?di.useWorkerFetch:xi===_display_utils.DOMCMapReaderFactory&&ai===_display_utils.DOMStandardFontDataFactory&&yi&&Qn&&(0,_display_utils.isValidFetchUrl)(yi,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(Qn,document.baseURI),Hi=di.canvasFactory||new DefaultCanvasFactory({ownerDocument:ji}),Li=di.filterFactory||new DefaultFilterFactory({docId:wi,ownerDocument:ji}),Ei=null;(0,_util.setVerbosityLevel)(Ai);const $i={canvasFactory:Hi,filterFactory:Li};if(Ui||($i.cMapReaderFactory=new xi({baseUrl:yi,isCompressed:Ii}),$i.standardFontDataFactory=new ai({baseUrl:Qn})),!li){const Xi={verbosity:Ai,port:_worker_options.GlobalWorkerOptions.workerPort};li=Xi.port?PDFWorker.fromPort(Xi):new PDFWorker(Xi),fi._worker=li}const Bi={docId:wi,apiVersion:"3.11.174",data:pi,password:mi,disableAutoFetch:Si,rangeChunkSize:ni,length:Ri,docBaseUrl:gi,enableXfa:_i,evaluatorOptions:{maxImageSize:Yn,disableFontFace:Fi,ignoreErrors:Vn,isEvalSupported:ci,isOffscreenCanvasSupported:bi,canvasMaxAreaInBytes:Ci,fontExtraProperties:zi,useSystemFonts:Mi,cMapUrl:Ui?yi:null,standardFontDataUrl:Ui?Qn:null}},Oi={ignoreErrors:Vn,isEvalSupported:ci,disableFontFace:Fi,fontExtraProperties:zi,enableXfa:_i,ownerDocument:ji,disableAutoFetch:Si,pdfBug:Ti,styleElement:Ei};return li.promise.then(function(){if(fi.destroyed)throw new Error("Loading aborted");const Xi=_fetchDocument(li,Bi),Gi=new Promise(function(qi){let ns;Wn?ns=new _transport_stream.PDFDataTransportStream({length:Ri,initialData:Wn.initialData,progressiveDone:Wn.progressiveDone,contentDispositionFilename:Wn.contentDispositionFilename,disableRange:Pi,disableStream:Ni},Wn):pi||(ns=(as=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(as):(0,_display_utils.isValidFetchUrl)(as.url)?new _displayFetch_stream.PDFFetchStream(as):new _displayNetwork.PDFNetworkStream(as))({url:Jn,length:Ri,httpHeaders:Zn,withCredentials:Gn,rangeChunkSize:ni,disableRange:Pi,disableStream:Ni})),qi(ns)});return Promise.all([Xi,Gi]).then(function([qi,ns]){if(fi.destroyed)throw new Error("Loading aborted");const is=new _message_handler.MessageHandler(wi,qi,li.port),as=new WorkerTransport(is,fi,ns,Oi,$i);fi._transport=as,is.send("Ready",null)})}).catch(fi._capability.reject),fi}async function _fetchDocument(di,fi){if(di.destroyed)throw new Error("Worker was destroyed");const wi=await di.messageHandler.sendWithPromise("GetDocRequest",fi,fi.data?[fi.data.buffer]:null);if(di.destroyed)throw new Error("Worker was destroyed");return wi}function getUrlProp(di){if(di instanceof URL)return di.href;try{return new URL(di,window.location).href}catch{if(_util.isNodeJS&&typeof di=="string")return di}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(di){if(_util.isNodeJS&&typeof Buffer<"u"&&di instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(di instanceof Uint8Array&&di.byteLength===di.buffer.byteLength)return di;if(typeof di=="string")return(0,_util.stringToBytes)(di);if(typeof di=="object"&&!isNaN(di==null?void 0:di.length)||(0,_util.isArrayBuffer)(di))return new Uint8Array(di);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const $n=class $n{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${wr($n,ki)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var fi,wi,Jn;this.destroyed=!0;try{(fi=this._worker)!=null&&fi.port&&(this._worker._pendingDestroy=!0),await((wi=this._transport)==null?void 0:wi.destroy())}catch(pi){throw(Jn=this._worker)!=null&&Jn.port&&delete this._worker._pendingDestroy,pi}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};ki=new WeakMap,Ki($n,ki,0);let PDFDocumentLoadingTask=$n;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(fi,wi,Jn=!1,pi=null){this.length=fi,this.initialData=wi,this.progressiveDone=Jn,this.contentDispositionFilename=pi,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(fi){this._rangeListeners.push(fi)}addProgressListener(fi){this._progressListeners.push(fi)}addProgressiveReadListener(fi){this._progressiveReadListeners.push(fi)}addProgressiveDoneListener(fi){this._progressiveDoneListeners.push(fi)}onDataRange(fi,wi){for(const Jn of this._rangeListeners)Jn(fi,wi)}onDataProgress(fi,wi){this._readyCapability.promise.then(()=>{for(const Jn of this._progressListeners)Jn(fi,wi)})}onDataProgressiveRead(fi){this._readyCapability.promise.then(()=>{for(const wi of this._progressiveReadListeners)wi(fi)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const fi of this._progressiveDoneListeners)fi()})}transportReady(){this._readyCapability.resolve()}requestDataRange(fi,wi){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(fi,wi){this._pdfInfo=fi,this._transport=wi,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(Jn=>{if(!Jn)return Jn;const pi=[];for(const Zn in Jn)pi.push(...Jn[Zn]);return pi}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(fi){return this._transport.getPage(fi)}getPageIndex(fi){return this._transport.getPageIndex(fi)}getDestinations(){return this._transport.getDestinations()}getDestination(fi){return this._transport.getDestination(fi)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(fi=!1){return this._transport.startCleanup(fi||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(fi,wi,Jn,pi=!1){Ki(this,oi);Ki(this,ti);Ki(this,Pn,null);Ki(this,Kn,!1);this._pageIndex=fi,this._pageInfo=wi,this._transport=Jn,this._stats=pi?new _display_utils.StatTimer:null,this._pdfBug=pi,this.commonObjs=Jn.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:fi,rotation:wi=this.rotate,offsetX:Jn=0,offsetY:pi=0,dontFlip:Zn=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:fi,rotation:wi,offsetX:Jn,offsetY:pi,dontFlip:Zn})}getAnnotations({intent:fi="display"}={}){const wi=this._transport.getRenderingIntent(fi);return this._transport.getAnnotations(this._pageIndex,wi.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var fi;return((fi=this._transport._htmlForXfa)==null?void 0:fi.children[this._pageIndex])||null}render({canvasContext:fi,viewport:wi,intent:Jn="display",annotationMode:pi=_util.AnnotationMode.ENABLE,transform:Zn=null,background:Gn=null,optionalContentConfigPromise:mi=null,annotationCanvasMap:Wn=null,pageColors:ni=null,printAnnotationStorage:li=null}){var ai,Vn;(ai=this._stats)==null||ai.time("Overall");const Ai=this._transport.getRenderingIntent(Jn,pi,li);ds(this,Kn,!1),Qi(this,ti,hc).call(this),mi||(mi=this._transport.getOptionalContentConfig());let gi=this._intentStates.get(Ai.cacheKey);gi||(gi=Object.create(null),this._intentStates.set(Ai.cacheKey,gi)),gi.streamReaderCancelTimeout&&(clearTimeout(gi.streamReaderCancelTimeout),gi.streamReaderCancelTimeout=null);const yi=!!(Ai.renderingIntent&_util.RenderingIntentFlag.PRINT);gi.displayReadyCapability||(gi.displayReadyCapability=new _util.PromiseCapability,gi.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Vn=this._stats)==null||Vn.time("Page Request"),this._pumpOperatorList(Ai));const Ii=Yn=>{var ci,bi;gi.renderTasks.delete(xi),(this._maybeCleanupAfterRender||yi)&&ds(this,Kn,!0),Qi(this,oi,Lo).call(this,!yi),Yn?(xi.capability.reject(Yn),this._abortOperatorList({intentState:gi,reason:Yn instanceof Error?Yn:new Error(Yn)})):xi.capability.resolve(),(ci=this._stats)==null||ci.timeEnd("Rendering"),(bi=this._stats)==null||bi.timeEnd("Overall")},xi=new InternalRenderTask({callback:Ii,params:{canvasContext:fi,viewport:wi,transform:Zn,background:Gn},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Wn,operatorList:gi.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!yi,pdfBug:this._pdfBug,pageColors:ni});(gi.renderTasks||(gi.renderTasks=new Set)).add(xi);const Qn=xi.task;return Promise.all([gi.displayReadyCapability.promise,mi]).then(([Yn,ci])=>{var bi;if(this.destroyed){Ii();return}(bi=this._stats)==null||bi.time("Rendering"),xi.initializeGraphics({transparency:Yn,optionalContentConfig:ci}),xi.operatorListChanged()}).catch(Ii),Qn}getOperatorList({intent:fi="display",annotationMode:wi=_util.AnnotationMode.ENABLE,printAnnotationStorage:Jn=null}={}){var Wn;function pi(){Gn.operatorList.lastChunk&&(Gn.opListReadCapability.resolve(Gn.operatorList),Gn.renderTasks.delete(mi))}const Zn=this._transport.getRenderingIntent(fi,wi,Jn,!0);let Gn=this._intentStates.get(Zn.cacheKey);Gn||(Gn=Object.create(null),this._intentStates.set(Zn.cacheKey,Gn));let mi;return Gn.opListReadCapability||(mi=Object.create(null),mi.operatorListChanged=pi,Gn.opListReadCapability=new _util.PromiseCapability,(Gn.renderTasks||(Gn.renderTasks=new Set)).add(mi),Gn.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Wn=this._stats)==null||Wn.time("Page Request"),this._pumpOperatorList(Zn)),Gn.opListReadCapability.promise}streamTextContent({includeMarkedContent:fi=!1,disableNormalization:wi=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:fi===!0,disableNormalization:wi===!0},{highWaterMark:100,size(pi){return pi.items.length}})}getTextContent(fi={}){if(this._transport._htmlForXfa)return this.getXfa().then(Jn=>_xfa_text.XfaText.textContent(Jn));const wi=this.streamTextContent(fi);return new Promise(function(Jn,pi){function Zn(){Gn.read().then(function({value:Wn,done:ni}){if(ni){Jn(mi);return}Object.assign(mi.styles,Wn.styles),mi.items.push(...Wn.items),Zn()},pi)}const Gn=wi.getReader(),mi={items:[],styles:Object.create(null)};Zn()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const fi=[];for(const wi of this._intentStates.values())if(this._abortOperatorList({intentState:wi,reason:new Error("Page was destroyed."),force:!0}),!wi.opListReadCapability)for(const Jn of wi.renderTasks)fi.push(Jn.completed),Jn.cancel();return this.objs.clear(),ds(this,Kn,!1),Qi(this,ti,hc).call(this),Promise.all(fi)}cleanup(fi=!1){ds(this,Kn,!0);const wi=Qi(this,oi,Lo).call(this,!1);return fi&&wi&&this._stats&&(this._stats=new _display_utils.StatTimer),wi}_startRenderPage(fi,wi){var pi,Zn;const Jn=this._intentStates.get(wi);Jn&&((pi=this._stats)==null||pi.timeEnd("Page Request"),(Zn=Jn.displayReadyCapability)==null||Zn.resolve(fi))}_renderPageChunk(fi,wi){for(let Jn=0,pi=fi.length;Jn<pi;Jn++)wi.operatorList.fnArray.push(fi.fnArray[Jn]),wi.operatorList.argsArray.push(fi.argsArray[Jn]);wi.operatorList.lastChunk=fi.lastChunk,wi.operatorList.separateAnnots=fi.separateAnnots;for(const Jn of wi.renderTasks)Jn.operatorListChanged();fi.lastChunk&&Qi(this,oi,Lo).call(this,!0)}_pumpOperatorList({renderingIntent:fi,cacheKey:wi,annotationStorageSerializable:Jn}){const{map:pi,transfers:Zn}=Jn,mi=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:fi,cacheKey:wi,annotationStorage:pi},Zn).getReader(),Wn=this._intentStates.get(wi);Wn.streamReader=mi;const ni=()=>{mi.read().then(({value:li,done:Ai})=>{if(Ai){Wn.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(li,Wn),ni())},li=>{if(Wn.streamReader=null,!this._transport.destroyed){if(Wn.operatorList){Wn.operatorList.lastChunk=!0;for(const Ai of Wn.renderTasks)Ai.operatorListChanged();Qi(this,oi,Lo).call(this,!0)}if(Wn.displayReadyCapability)Wn.displayReadyCapability.reject(li);else if(Wn.opListReadCapability)Wn.opListReadCapability.reject(li);else throw li}})};ni()}_abortOperatorList({intentState:fi,reason:wi,force:Jn=!1}){if(fi.streamReader){if(fi.streamReaderCancelTimeout&&(clearTimeout(fi.streamReaderCancelTimeout),fi.streamReaderCancelTimeout=null),!Jn){if(fi.renderTasks.size>0)return;if(wi instanceof _display_utils.RenderingCancelledException){let pi=RENDERING_CANCELLED_TIMEOUT;wi.extraDelay>0&&wi.extraDelay<1e3&&(pi+=wi.extraDelay),fi.streamReaderCancelTimeout=setTimeout(()=>{fi.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:fi,reason:wi,force:!0})},pi);return}}if(fi.streamReader.cancel(new _util.AbortException(wi.message)).catch(()=>{}),fi.streamReader=null,!this._transport.destroyed){for(const[pi,Zn]of this._intentStates)if(Zn===fi){this._intentStates.delete(pi);break}this.cleanup()}}}get stats(){return this._stats}}Pn=new WeakMap,Kn=new WeakMap,oi=new WeakSet,Lo=function(fi=!1){if(Qi(this,ti,hc).call(this),!vi(this,Kn)||this.destroyed)return!1;if(fi)return ds(this,Pn,setTimeout(()=>{ds(this,Pn,null),Qi(this,oi,Lo).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:wi,operatorList:Jn}of this._intentStates.values())if(wi.size>0||!Jn.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ds(this,Kn,!1),!0},ti=new WeakSet,hc=function(){vi(this,Pn)&&(clearTimeout(vi(this,Pn)),ds(this,Pn,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Ki(this,Ln,new Set);Ki(this,jn,Promise.resolve())}postMessage(fi,wi){const Jn={data:structuredClone(fi,wi?{transfer:wi}:null)};vi(this,jn).then(()=>{for(const pi of vi(this,Ln))pi.call(this,Jn)})}addEventListener(fi,wi){vi(this,Ln).add(wi)}removeEventListener(fi,wi){vi(this,Ln).delete(wi)}terminate(){vi(this,Ln).clear()}}Ln=new WeakMap,jn=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof require=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const di=(Cn=document==null?void 0:document.currentScript)==null?void 0:Cn.src;di&&(PDFWorkerUtil.fallbackWorkerSrc=di.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(di,fi){let wi;try{if(wi=new URL(di),!wi.origin||wi.origin==="null")return!1}catch{return!1}const Jn=new URL(fi,wi);return wi.origin===Jn.origin},PDFWorkerUtil.createCDNWrapper=function(di){const fi=`importScripts("${di}");`;return URL.createObjectURL(new Blob([fi]))}}const _PDFWorker=class _PDFWorker{constructor({name:di=null,port:fi=null,verbosity:wi=(0,_util.getVerbosityLevel)()}={}){var Jn;if(this.name=di,this.destroyed=!1,this.verbosity=wi,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,fi){if((Jn=vi(_PDFWorker,Tn))!=null&&Jn.has(fi))throw new Error("Cannot use more than one PDFWorker per port.");(vi(_PDFWorker,Tn)||ds(_PDFWorker,Tn,new WeakMap)).set(fi,this),this._initializeFromPort(fi);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(di){this._port=di,this._messageHandler=new _message_handler.MessageHandler("main","worker",di),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:di}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,di)||(di=PDFWorkerUtil.createCDNWrapper(new URL(di,window.location).href));const fi=new Worker(di),wi=new _message_handler.MessageHandler("main","worker",fi),Jn=()=>{fi.removeEventListener("error",pi),wi.destroy(),fi.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},pi=()=>{this._webWorker||Jn()};fi.addEventListener("error",pi),wi.on("test",Gn=>{if(fi.removeEventListener("error",pi),this.destroyed){Jn();return}Gn?(this._messageHandler=wi,this._port=fi,this._webWorker=fi,this._readyCapability.resolve(),wi.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),wi.destroy(),fi.terminate())}),wi.on("ready",Gn=>{if(fi.removeEventListener("error",pi),this.destroyed){Jn();return}try{Zn()}catch{this._setupFakeWorker()}});const Zn=()=>{const Gn=new Uint8Array;wi.send("test",Gn,[Gn.buffer])};Zn();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(di=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const fi=new LoopbackPort;this._port=fi;const wi=`fake${PDFWorkerUtil.fakeWorkerId++}`,Jn=new _message_handler.MessageHandler(wi+"_worker",wi,fi);di.setup(Jn,fi);const pi=new _message_handler.MessageHandler(wi,wi+"_worker",fi);this._messageHandler=pi,this._readyCapability.resolve(),pi.send("configure",{verbosity:this.verbosity})}).catch(di=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${di.message}".`))})}destroy(){var di;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(di=vi(_PDFWorker,Tn))==null||di.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(di){var wi;if(!(di!=null&&di.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const fi=(wi=vi(this,Tn))==null?void 0:wi.get(di.port);if(fi){if(fi._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return fi}return new _PDFWorker(di)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var di;try{return((di=globalThis.pdfjsWorker)==null?void 0:di.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof require=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};Tn=new WeakMap,Ki(_PDFWorker,Tn,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(fi,wi,Jn,pi,Zn){Ki(this,Bn);Ki(this,Rn,new Map);Ki(this,ui,new Map);Ki(this,si,new Map);Ki(this,ei,null);this.messageHandler=fi,this.loadingTask=wi,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:pi.ownerDocument,styleElement:pi.styleElement}),this._params=pi,this.canvasFactory=Zn.canvasFactory,this.filterFactory=Zn.filterFactory,this.cMapReaderFactory=Zn.cMapReaderFactory,this.standardFontDataFactory=Zn.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=Jn,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(fi,wi=_util.AnnotationMode.ENABLE,Jn=null,pi=!1){let Zn=_util.RenderingIntentFlag.DISPLAY,Gn=_annotation_storage.SerializableEmpty;switch(fi){case"any":Zn=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Zn=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${fi}`)}switch(wi){case _util.AnnotationMode.DISABLE:Zn+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Zn+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Zn+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,Gn=(Zn&_util.RenderingIntentFlag.PRINT&&Jn instanceof _annotation_storage.PrintAnnotationStorage?Jn:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${wi}`)}return pi&&(Zn+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Zn,cacheKey:`${Zn}_${Gn.hash}`,annotationStorageSerializable:Gn}}destroy(){var Jn;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(Jn=vi(this,ei))==null||Jn.reject(new Error("Worker was destroyed during onPassword callback"));const fi=[];for(const pi of vi(this,ui).values())fi.push(pi._destroy());vi(this,ui).clear(),vi(this,si).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const wi=this.messageHandler.sendWithPromise("Terminate",null);return fi.push(wi),Promise.all(fi).then(()=>{var pi;this.commonObjs.clear(),this.fontLoader.clear(),vi(this,Rn).clear(),this.filterFactory.destroy(),(pi=this._networkStream)==null||pi.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:fi,loadingTask:wi}=this;fi.on("GetReader",(Jn,pi)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Zn=>{this._lastProgress={loaded:Zn.loaded,total:Zn.total}},pi.onPull=()=>{this._fullReader.read().then(function({value:Zn,done:Gn}){if(Gn){pi.close();return}(0,_util.assert)(Zn instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),pi.enqueue(new Uint8Array(Zn),1,[Zn])}).catch(Zn=>{pi.error(Zn)})},pi.onCancel=Zn=>{this._fullReader.cancel(Zn),pi.ready.catch(Gn=>{if(!this.destroyed)throw Gn})}}),fi.on("ReaderHeadersReady",Jn=>{const pi=new _util.PromiseCapability,Zn=this._fullReader;return Zn.headersReady.then(()=>{var Gn;(!Zn.isStreamingSupported||!Zn.isRangeSupported)&&(this._lastProgress&&((Gn=wi.onProgress)==null||Gn.call(wi,this._lastProgress)),Zn.onProgress=mi=>{var Wn;(Wn=wi.onProgress)==null||Wn.call(wi,{loaded:mi.loaded,total:mi.total})}),pi.resolve({isStreamingSupported:Zn.isStreamingSupported,isRangeSupported:Zn.isRangeSupported,contentLength:Zn.contentLength})},pi.reject),pi.promise}),fi.on("GetRangeReader",(Jn,pi)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Zn=this._networkStream.getRangeReader(Jn.begin,Jn.end);if(!Zn){pi.close();return}pi.onPull=()=>{Zn.read().then(function({value:Gn,done:mi}){if(mi){pi.close();return}(0,_util.assert)(Gn instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),pi.enqueue(new Uint8Array(Gn),1,[Gn])}).catch(Gn=>{pi.error(Gn)})},pi.onCancel=Gn=>{Zn.cancel(Gn),pi.ready.catch(mi=>{if(!this.destroyed)throw mi})}}),fi.on("GetDoc",({pdfInfo:Jn})=>{this._numPages=Jn.numPages,this._htmlForXfa=Jn.htmlForXfa,delete Jn.htmlForXfa,wi._capability.resolve(new PDFDocumentProxy(Jn,this))}),fi.on("DocException",function(Jn){let pi;switch(Jn.name){case"PasswordException":pi=new _util.PasswordException(Jn.message,Jn.code);break;case"InvalidPDFException":pi=new _util.InvalidPDFException(Jn.message);break;case"MissingPDFException":pi=new _util.MissingPDFException(Jn.message);break;case"UnexpectedResponseException":pi=new _util.UnexpectedResponseException(Jn.message,Jn.status);break;case"UnknownErrorException":pi=new _util.UnknownErrorException(Jn.message,Jn.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}wi._capability.reject(pi)}),fi.on("PasswordRequest",Jn=>{if(ds(this,ei,new _util.PromiseCapability),wi.onPassword){const pi=Zn=>{Zn instanceof Error?vi(this,ei).reject(Zn):vi(this,ei).resolve({password:Zn})};try{wi.onPassword(pi,Jn.code)}catch(Zn){vi(this,ei).reject(Zn)}}else vi(this,ei).reject(new _util.PasswordException(Jn.message,Jn.code));return vi(this,ei).promise}),fi.on("DataLoaded",Jn=>{var pi;(pi=wi.onProgress)==null||pi.call(wi,{loaded:Jn.length,total:Jn.length}),this.downloadInfoCapability.resolve(Jn)}),fi.on("StartRenderPage",Jn=>{if(this.destroyed)return;vi(this,ui).get(Jn.pageIndex)._startRenderPage(Jn.transparency,Jn.cacheKey)}),fi.on("commonobj",([Jn,pi,Zn])=>{var Gn;if(!this.destroyed&&!this.commonObjs.has(Jn))switch(pi){case"Font":const mi=this._params;if("error"in Zn){const li=Zn.error;(0,_util.warn)(`Error during font loading: ${li}`),this.commonObjs.resolve(Jn,li);break}const Wn=mi.pdfBug&&((Gn=globalThis.FontInspector)!=null&&Gn.enabled)?(li,Ai)=>globalThis.FontInspector.fontAdded(li,Ai):null,ni=new _font_loader.FontFaceObject(Zn,{isEvalSupported:mi.isEvalSupported,disableFontFace:mi.disableFontFace,ignoreErrors:mi.ignoreErrors,inspectFont:Wn});this.fontLoader.bind(ni).catch(li=>fi.sendWithPromise("FontFallback",{id:Jn})).finally(()=>{!mi.fontExtraProperties&&ni.data&&(ni.data=null),this.commonObjs.resolve(Jn,ni)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(Jn,Zn);break;default:throw new Error(`Got unknown common object type ${pi}`)}}),fi.on("obj",([Jn,pi,Zn,Gn])=>{var Wn;if(this.destroyed)return;const mi=vi(this,ui).get(pi);if(!mi.objs.has(Jn))switch(Zn){case"Image":if(mi.objs.resolve(Jn,Gn),Gn){let ni;if(Gn.bitmap){const{width:li,height:Ai}=Gn;ni=li*Ai*4}else ni=((Wn=Gn.data)==null?void 0:Wn.length)||0;ni>_util.MAX_IMAGE_SIZE_TO_CACHE&&(mi._maybeCleanupAfterRender=!0)}break;case"Pattern":mi.objs.resolve(Jn,Gn);break;default:throw new Error(`Got unknown object type ${Zn}`)}}),fi.on("DocProgress",Jn=>{var pi;this.destroyed||(pi=wi.onProgress)==null||pi.call(wi,{loaded:Jn.loaded,total:Jn.total})}),fi.on("FetchBuiltInCMap",Jn=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(Jn):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),fi.on("FetchStandardFontData",Jn=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(Jn):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var Jn;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:fi,transfers:wi}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:fi,filename:((Jn=this._fullReader)==null?void 0:Jn.filename)??null},wi).finally(()=>{this.annotationStorage.resetModified()})}getPage(fi){if(!Number.isInteger(fi)||fi<=0||fi>this._numPages)return Promise.reject(new Error("Invalid page request."));const wi=fi-1,Jn=vi(this,si).get(wi);if(Jn)return Jn;const pi=this.messageHandler.sendWithPromise("GetPage",{pageIndex:wi}).then(Zn=>{if(this.destroyed)throw new Error("Transport destroyed");const Gn=new PDFPageProxy(wi,Zn,this,this._params.pdfBug);return vi(this,ui).set(wi,Gn),Gn});return vi(this,si).set(wi,pi),pi}getPageIndex(fi){return typeof fi!="object"||fi===null||!Number.isInteger(fi.num)||fi.num<0||!Number.isInteger(fi.gen)||fi.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:fi.num,gen:fi.gen})}getAnnotations(fi,wi){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:fi,intent:wi})}getFieldObjects(){return Qi(this,Bn,uc).call(this,"GetFieldObjects")}hasJSActions(){return Qi(this,Bn,uc).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(fi){return typeof fi!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:fi})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Qi(this,Bn,uc).call(this,"GetDocJSActions")}getPageJSActions(fi){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:fi})}getStructTree(fi){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:fi})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(fi=>new _optional_content_config.OptionalContentConfig(fi))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const fi="GetMetadata",wi=vi(this,Rn).get(fi);if(wi)return wi;const Jn=this.messageHandler.sendWithPromise(fi,null).then(pi=>{var Zn,Gn;return{info:pi[0],metadata:pi[1]?new _metadata.Metadata(pi[1]):null,contentDispositionFilename:((Zn=this._fullReader)==null?void 0:Zn.filename)??null,contentLength:((Gn=this._fullReader)==null?void 0:Gn.contentLength)??null}});return vi(this,Rn).set(fi,Jn),Jn}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(fi=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const wi of vi(this,ui).values())if(!wi.cleanup())throw new Error(`startCleanup: Page ${wi.pageNumber} is currently rendering.`);this.commonObjs.clear(),fi||this.fontLoader.clear(),vi(this,Rn).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:fi,enableXfa:wi}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:fi,enableXfa:wi})}}Rn=new WeakMap,ui=new WeakMap,si=new WeakMap,ei=new WeakMap,Bn=new WeakSet,uc=function(fi,wi=null){const Jn=vi(this,Rn).get(fi);if(Jn)return Jn;const pi=this.messageHandler.sendWithPromise(fi,wi);return vi(this,Rn).set(fi,pi),pi};class PDFObjects{constructor(){Ki(this,On);Ki(this,Hn,Object.create(null))}get(fi,wi=null){if(wi){const pi=Qi(this,On,nl).call(this,fi);return pi.capability.promise.then(()=>wi(pi.data)),null}const Jn=vi(this,Hn)[fi];if(!(Jn!=null&&Jn.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${fi}.`);return Jn.data}has(fi){const wi=vi(this,Hn)[fi];return(wi==null?void 0:wi.capability.settled)||!1}resolve(fi,wi=null){const Jn=Qi(this,On,nl).call(this,fi);Jn.data=wi,Jn.capability.resolve()}clear(){var fi;for(const wi in vi(this,Hn)){const{data:Jn}=vi(this,Hn)[wi];(fi=Jn==null?void 0:Jn.bitmap)==null||fi.close()}ds(this,Hn,Object.create(null))}}Hn=new WeakMap,On=new WeakSet,nl=function(fi){var wi;return(wi=vi(this,Hn))[fi]||(wi[fi]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(fi){Ki(this,Xn,null);ds(this,Xn,fi),this.onContinue=null}get promise(){return vi(this,Xn).capability.promise}cancel(fi=0){vi(this,Xn).cancel(null,fi)}get separateAnnots(){const{separateAnnots:fi}=vi(this,Xn).operatorList;if(!fi)return!1;const{annotationCanvasMap:wi}=vi(this,Xn);return fi.form||fi.canvas&&(wi==null?void 0:wi.size)>0}}Xn=new WeakMap,exports.RenderTask=RenderTask;const ri=class ri{constructor({callback:fi,params:wi,objs:Jn,commonObjs:pi,annotationCanvasMap:Zn,operatorList:Gn,pageIndex:mi,canvasFactory:Wn,filterFactory:ni,useRequestAnimationFrame:li=!1,pdfBug:Ai=!1,pageColors:gi=null}){this.callback=fi,this.params=wi,this.objs=Jn,this.commonObjs=pi,this.annotationCanvasMap=Zn,this.operatorListIdx=null,this.operatorList=Gn,this._pageIndex=mi,this.canvasFactory=Wn,this.filterFactory=ni,this._pdfBug=Ai,this.pageColors=gi,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=li===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=wi.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:fi=!1,optionalContentConfig:wi}){var mi,Wn;if(this.cancelled)return;if(this._canvas){if(vi(ri,ii).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");vi(ri,ii).add(this._canvas)}this._pdfBug&&((mi=globalThis.StepperManager)!=null&&mi.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Jn,viewport:pi,transform:Zn,background:Gn}=this.params;this.gfx=new _canvas.CanvasGraphics(Jn,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:wi},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Zn,viewport:pi,transparency:fi,background:Gn}),this.operatorListIdx=0,this.graphicsReady=!0,(Wn=this.graphicsReadyCallback)==null||Wn.call(this)}cancel(fi=null,wi=0){var Jn;this.running=!1,this.cancelled=!0,(Jn=this.gfx)==null||Jn.endDrawing(),vi(ri,ii).delete(this._canvas),this.callback(fi||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,wi))}operatorListChanged(){var fi;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(fi=this.stepper)==null||fi.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),vi(ri,ii).delete(this._canvas),this.callback())))}};ii=new WeakMap,Ki(ri,ii,new WeakSet);let InternalRenderTask=ri;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(ki,$n,Pn)=>{var jn,Cn,Tn,ch,ui;Object.defineProperty($n,"__esModule",{value:!0}),$n.SerializableEmpty=$n.PrintAnnotationStorage=$n.AnnotationStorage=void 0;var Kn=Pn(1),oi=Pn(4),Mn=Pn(8);const ti=Object.freeze({map:null,hash:"",transfers:void 0});$n.SerializableEmpty=ti;class In{constructor(){Ki(this,Tn);Ki(this,jn,!1);Ki(this,Cn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(ei,Bn){const Nn=vi(this,Cn).get(ei);return Nn===void 0?Bn:Object.assign(Bn,Nn)}getRawValue(ei){return vi(this,Cn).get(ei)}remove(ei){if(vi(this,Cn).delete(ei),vi(this,Cn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const Bn of vi(this,Cn).values())if(Bn instanceof oi.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(ei,Bn){const Nn=vi(this,Cn).get(ei);let Hn=!1;if(Nn!==void 0)for(const[On,hi]of Object.entries(Bn))Nn[On]!==hi&&(Hn=!0,Nn[On]=hi);else Hn=!0,vi(this,Cn).set(ei,Bn);Hn&&Qi(this,Tn,ch).call(this),Bn instanceof oi.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(Bn.constructor._type)}has(ei){return vi(this,Cn).has(ei)}getAll(){return vi(this,Cn).size>0?(0,Kn.objectFromMap)(vi(this,Cn)):null}setAll(ei){for(const[Bn,Nn]of Object.entries(ei))this.setValue(Bn,Nn)}get size(){return vi(this,Cn).size}resetModified(){vi(this,jn)&&(ds(this,jn,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Ln(this)}get serializable(){if(vi(this,Cn).size===0)return ti;const ei=new Map,Bn=new Mn.MurmurHash3_64,Nn=[],Hn=Object.create(null);let On=!1;for(const[hi,Xn]of vi(this,Cn)){const ii=Xn instanceof oi.AnnotationEditor?Xn.serialize(!1,Hn):Xn;ii&&(ei.set(hi,ii),Bn.update(`${hi}:${JSON.stringify(ii)}`),On||(On=!!ii.bitmap))}if(On)for(const hi of ei.values())hi.bitmap&&Nn.push(hi.bitmap);return ei.size>0?{map:ei,hash:Bn.hexdigest(),transfers:Nn}:ti}}jn=new WeakMap,Cn=new WeakMap,Tn=new WeakSet,ch=function(){vi(this,jn)||(ds(this,jn,!0),typeof this.onSetModified=="function"&&this.onSetModified())},$n.AnnotationStorage=In;class Ln extends In{constructor(Bn){super();Ki(this,ui,void 0);const{map:Nn,hash:Hn,transfers:On}=Bn.serializable,hi=structuredClone(Nn,On?{transfer:On}:null);ds(this,ui,{map:hi,hash:Hn,transfers:On})}get print(){(0,Kn.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return vi(this,ui)}}ui=new WeakMap,$n.PrintAnnotationStorage=Ln},(ki,$n,Pn)=>{var Ln,jn,Cn,Tn,Rn,ui,si,ei,Bn,Nn,Hn,On,hi,Xn,ii,il,di,sl,wi,al,pi,rl,Gn,lh,Wn,hh,li,uh,gi,ol,Ii,dh;Object.defineProperty($n,"__esModule",{value:!0}),$n.AnnotationEditor=void 0;var Kn=Pn(5),oi=Pn(1),Mn=Pn(6);const Qn=class Qn{constructor(Vn){Ki(this,ii);Ki(this,di);Ki(this,pi);Ki(this,Gn);Ki(this,Wn);Ki(this,li);Ki(this,gi);Ki(this,Ii);Ki(this,Ln,"");Ki(this,jn,!1);Ki(this,Cn,null);Ki(this,Tn,null);Ki(this,Rn,null);Ki(this,ui,!1);Ki(this,si,null);Ki(this,ei,this.focusin.bind(this));Ki(this,Bn,this.focusout.bind(this));Ki(this,Nn,!1);Ki(this,Hn,!1);Ki(this,On,!1);ta(this,"_initialOptions",Object.create(null));ta(this,"_uiManager",null);ta(this,"_focusEventsAllowed",!0);ta(this,"_l10nPromise",null);Ki(this,hi,!1);Ki(this,Xn,Qn._zIndex++);this.constructor===Qn&&(0,oi.unreachable)("Cannot initialize AnnotationEditor."),this.parent=Vn.parent,this.id=Vn.id,this.width=this.height=null,this.pageIndex=Vn.parent.pageIndex,this.name=Vn.name,this.div=null,this._uiManager=Vn.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=Vn.isCentered,this._structTreeParentId=null;const{rotation:Yn,rawDims:{pageWidth:ci,pageHeight:bi,pageX:Ci,pageY:Fi}}=this.parent.viewport;this.rotation=Yn,this.pageRotation=(360+Yn-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[ci,bi],this.pageTranslation=[Ci,Fi];const[zi,_i]=this.parentDimensions;this.x=Vn.x/zi,this.y=Vn.y/_i,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,oi.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(Vn){const Yn=new In({id:Vn.parent.getNextId(),parent:Vn.parent,uiManager:Vn._uiManager});Yn.annotationElementId=Vn.annotationElementId,Yn.deleted=!0,Yn._uiManager.addToAnnotationStorage(Yn)}static initialize(Vn,Yn=null){if(Qn._l10nPromise||(Qn._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(bi=>[bi,Vn.get(bi)]))),Yn!=null&&Yn.strings)for(const bi of Yn.strings)Qn._l10nPromise.set(bi,Vn.get(bi));if(Qn._borderLineWidth!==-1)return;const ci=getComputedStyle(document.documentElement);Qn._borderLineWidth=parseFloat(ci.getPropertyValue("--outline-width"))||0}static updateDefaultParams(Vn,Yn){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(Vn){return!1}static paste(Vn,Yn){(0,oi.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return vi(this,hi)}set _isDraggable(Vn){var Yn;ds(this,hi,Vn),(Yn=this.div)==null||Yn.classList.toggle("draggable",Vn)}center(){const[Vn,Yn]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*Yn/(Vn*2),this.y+=this.width*Vn/(Yn*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*Yn/(Vn*2),this.y-=this.width*Vn/(Yn*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(Vn){this._uiManager.addCommands(Vn)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=vi(this,Xn)}setParent(Vn){Vn!==null&&(this.pageIndex=Vn.pageIndex,this.pageDimensions=Vn.pageDimensions),this.parent=Vn}focusin(Vn){this._focusEventsAllowed&&(vi(this,Nn)?ds(this,Nn,!1):this.parent.setSelected(this))}focusout(Vn){var ci;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const Yn=Vn.relatedTarget;Yn!=null&&Yn.closest(`#${this.id}`)||(Vn.preventDefault(),(ci=this.parent)!=null&&ci.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(Vn,Yn,ci,bi){const[Ci,Fi]=this.parentDimensions;[ci,bi]=this.screenToPageTranslation(ci,bi),this.x=(Vn+ci)/Ci,this.y=(Yn+bi)/Fi,this.fixAndSetPosition()}translate(Vn,Yn){Qi(this,ii,il).call(this,this.parentDimensions,Vn,Yn)}translateInPage(Vn,Yn){Qi(this,ii,il).call(this,this.pageDimensions,Vn,Yn),this.div.scrollIntoView({block:"nearest"})}drag(Vn,Yn){const[ci,bi]=this.parentDimensions;if(this.x+=Vn/ci,this.y+=Yn/bi,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:ji,y:Pi}=this.div.getBoundingClientRect();this.parent.findNewParent(this,ji,Pi)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Ci,y:Fi}=this;const[zi,_i]=Qi(this,di,sl).call(this);Ci+=zi,Fi+=_i,this.div.style.left=`${(100*Ci).toFixed(2)}%`,this.div.style.top=`${(100*Fi).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[Vn,Yn]=this.pageDimensions;let{x:ci,y:bi,width:Ci,height:Fi}=this;switch(Ci*=Vn,Fi*=Yn,ci*=Vn,bi*=Yn,this.rotation){case 0:ci=Math.max(0,Math.min(Vn-Ci,ci)),bi=Math.max(0,Math.min(Yn-Fi,bi));break;case 90:ci=Math.max(0,Math.min(Vn-Fi,ci)),bi=Math.min(Yn,Math.max(Ci,bi));break;case 180:ci=Math.min(Vn,Math.max(Ci,ci)),bi=Math.min(Yn,Math.max(Fi,bi));break;case 270:ci=Math.min(Vn,Math.max(Fi,ci)),bi=Math.max(0,Math.min(Yn-Ci,bi));break}this.x=ci/=Vn,this.y=bi/=Yn;const[zi,_i]=Qi(this,di,sl).call(this);ci+=zi,bi+=_i;const{style:ji}=this.div;ji.left=`${(100*ci).toFixed(2)}%`,ji.top=`${(100*bi).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(Vn,Yn){var ci;return Qi(ci=Qn,wi,al).call(ci,Vn,Yn,this.parentRotation)}pageTranslationToScreen(Vn,Yn){var ci;return Qi(ci=Qn,wi,al).call(ci,Vn,Yn,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:Vn,pageDimensions:[Yn,ci]}=this,bi=Yn*Vn,Ci=ci*Vn;return oi.FeatureTest.isCSSRoundSupported?[Math.round(bi),Math.round(Ci)]:[bi,Ci]}setDims(Vn,Yn){var Ci;const[ci,bi]=this.parentDimensions;this.div.style.width=`${(100*Vn/ci).toFixed(2)}%`,vi(this,ui)||(this.div.style.height=`${(100*Yn/bi).toFixed(2)}%`),(Ci=vi(this,Cn))==null||Ci.classList.toggle("small",Vn<Qn.SMALL_EDITOR_SIZE||Yn<Qn.SMALL_EDITOR_SIZE)}fixDims(){const{style:Vn}=this.div,{height:Yn,width:ci}=Vn,bi=ci.endsWith("%"),Ci=!vi(this,ui)&&Yn.endsWith("%");if(bi&&Ci)return;const[Fi,zi]=this.parentDimensions;bi||(Vn.width=`${(100*parseFloat(ci)/Fi).toFixed(2)}%`),!vi(this,ui)&&!Ci&&(Vn.height=`${(100*parseFloat(Yn)/zi).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(vi(this,Cn))return;const Vn=ds(this,Cn,document.createElement("button"));Vn.className="altText";const Yn=await Qn._l10nPromise.get("editor_alt_text_button_label");Vn.textContent=Yn,Vn.setAttribute("aria-label",Yn),Vn.tabIndex="0",Vn.addEventListener("contextmenu",Mn.noContextMenu),Vn.addEventListener("pointerdown",ci=>ci.stopPropagation()),Vn.addEventListener("click",ci=>{ci.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),Vn.addEventListener("keydown",ci=>{ci.target===Vn&&ci.key==="Enter"&&(ci.preventDefault(),this._uiManager.editAltText(this))}),Qi(this,gi,ol).call(this),this.div.append(Vn),Qn.SMALL_EDITOR_SIZE||(Qn.SMALL_EDITOR_SIZE=Math.min(128,Math.round(Vn.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:vi(this,Ln),decorative:vi(this,jn)}}set altTextData({altText:Vn,decorative:Yn}){vi(this,Ln)===Vn&&vi(this,jn)===Yn||(ds(this,Ln,Vn),ds(this,jn,Yn),Qi(this,gi,ol).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",vi(this,ei)),this.div.addEventListener("focusout",vi(this,Bn));const[Vn,Yn]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*Yn/Vn).toFixed(2)}%`,this.div.style.maxHeight=`${(100*Vn/Yn).toFixed(2)}%`);const[ci,bi]=this.getInitialTranslation();return this.translate(ci,bi),(0,Kn.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(Vn){const{isMac:Yn}=oi.FeatureTest.platform;if(Vn.button!==0||Vn.ctrlKey&&Yn){Vn.preventDefault();return}ds(this,Nn,!0),Qi(this,Ii,dh).call(this,Vn)}moveInDOM(){var Vn;(Vn=this.parent)==null||Vn.moveEditorInDOM(this)}_setParentAndPosition(Vn,Yn,ci){Vn.changeParent(this),this.x=Yn,this.y=ci,this.fixAndSetPosition()}getRect(Vn,Yn){const ci=this.parentScale,[bi,Ci]=this.pageDimensions,[Fi,zi]=this.pageTranslation,_i=Vn/ci,ji=Yn/ci,Pi=this.x*bi,Ni=this.y*Ci,Si=this.width*bi,Ti=this.height*Ci;switch(this.rotation){case 0:return[Pi+_i+Fi,Ci-Ni-ji-Ti+zi,Pi+_i+Si+Fi,Ci-Ni-ji+zi];case 90:return[Pi+ji+Fi,Ci-Ni+_i+zi,Pi+ji+Ti+Fi,Ci-Ni+_i+Si+zi];case 180:return[Pi-_i-Si+Fi,Ci-Ni+ji+zi,Pi-_i+Fi,Ci-Ni+ji+Ti+zi];case 270:return[Pi-ji-Ti+Fi,Ci-Ni-_i-Si+zi,Pi-ji+Fi,Ci-Ni-_i+zi];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(Vn,Yn){const[ci,bi,Ci,Fi]=Vn,zi=Ci-ci,_i=Fi-bi;switch(this.rotation){case 0:return[ci,Yn-Fi,zi,_i];case 90:return[ci,Yn-bi,_i,zi];case 180:return[Ci,Yn-bi,zi,_i];case 270:return[Ci,Yn-Fi,_i,zi];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ds(this,On,!0)}disableEditMode(){ds(this,On,!1)}isInEditMode(){return vi(this,On)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var Vn,Yn;(Vn=this.div)==null||Vn.addEventListener("focusin",vi(this,ei)),(Yn=this.div)==null||Yn.addEventListener("focusout",vi(this,Bn))}serialize(Vn=!1,Yn=null){(0,oi.unreachable)("An editor must be serializable")}static deserialize(Vn,Yn,ci){const bi=new this.prototype.constructor({parent:Yn,id:Yn.getNextId(),uiManager:ci});bi.rotation=Vn.rotation;const[Ci,Fi]=bi.pageDimensions,[zi,_i,ji,Pi]=bi.getRectInCurrentCoords(Vn.rect,Fi);return bi.x=zi/Ci,bi.y=_i/Fi,bi.width=ji/Ci,bi.height=Pi/Fi,bi}remove(){var Vn;this.div.removeEventListener("focusin",vi(this,ei)),this.div.removeEventListener("focusout",vi(this,Bn)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(Vn=vi(this,Cn))==null||Vn.remove(),ds(this,Cn,null),ds(this,Tn,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Qi(this,Gn,lh).call(this),vi(this,si).classList.remove("hidden"))}select(){var Vn;this.makeResizable(),(Vn=this.div)==null||Vn.classList.add("selectedEditor")}unselect(){var Vn,Yn,ci;(Vn=vi(this,si))==null||Vn.classList.add("hidden"),(Yn=this.div)==null||Yn.classList.remove("selectedEditor"),(ci=this.div)!=null&&ci.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(Vn,Yn){}disableEditing(){vi(this,Cn)&&(vi(this,Cn).hidden=!0)}enableEditing(){vi(this,Cn)&&(vi(this,Cn).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return vi(this,Hn)}set isEditing(Vn){ds(this,Hn,Vn),this.parent&&(Vn?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(Vn,Yn){ds(this,ui,!0);const ci=Vn/Yn,{style:bi}=this.div;bi.aspectRatio=ci,bi.height="auto"}static get MIN_SIZE(){return 16}};Ln=new WeakMap,jn=new WeakMap,Cn=new WeakMap,Tn=new WeakMap,Rn=new WeakMap,ui=new WeakMap,si=new WeakMap,ei=new WeakMap,Bn=new WeakMap,Nn=new WeakMap,Hn=new WeakMap,On=new WeakMap,hi=new WeakMap,Xn=new WeakMap,ii=new WeakSet,il=function([Vn,Yn],ci,bi){[ci,bi]=this.screenToPageTranslation(ci,bi),this.x+=ci/Vn,this.y+=bi/Yn,this.fixAndSetPosition()},di=new WeakSet,sl=function(){const[Vn,Yn]=this.parentDimensions,{_borderLineWidth:ci}=Qn,bi=ci/Vn,Ci=ci/Yn;switch(this.rotation){case 90:return[-bi,Ci];case 180:return[bi,Ci];case 270:return[bi,-Ci];default:return[-bi,-Ci]}},wi=new WeakSet,al=function(Vn,Yn,ci){switch(ci){case 90:return[Yn,-Vn];case 180:return[-Vn,-Yn];case 270:return[-Yn,Vn];default:return[Vn,Yn]}},pi=new WeakSet,rl=function(Vn){switch(Vn){case 90:{const[Yn,ci]=this.pageDimensions;return[0,-Yn/ci,ci/Yn,0]}case 180:return[-1,0,0,-1];case 270:{const[Yn,ci]=this.pageDimensions;return[0,Yn/ci,-ci/Yn,0]}default:return[1,0,0,1]}},Gn=new WeakSet,lh=function(){if(vi(this,si))return;ds(this,si,document.createElement("div")),vi(this,si).classList.add("resizers");const Vn=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||Vn.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const Yn of Vn){const ci=document.createElement("div");vi(this,si).append(ci),ci.classList.add("resizer",Yn),ci.addEventListener("pointerdown",Qi(this,Wn,hh).bind(this,Yn)),ci.addEventListener("contextmenu",Mn.noContextMenu)}this.div.prepend(vi(this,si))},Wn=new WeakSet,hh=function(Vn,Yn){Yn.preventDefault();const{isMac:ci}=oi.FeatureTest.platform;if(Yn.button!==0||Yn.ctrlKey&&ci)return;const bi=Qi(this,li,uh).bind(this,Vn),Ci=this._isDraggable;this._isDraggable=!1;const Fi={passive:!0,capture:!0};window.addEventListener("pointermove",bi,Fi);const zi=this.x,_i=this.y,ji=this.width,Pi=this.height,Ni=this.parent.div.style.cursor,Si=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(Yn.target).cursor;const Ti=()=>{this._isDraggable=Ci,window.removeEventListener("pointerup",Ti),window.removeEventListener("blur",Ti),window.removeEventListener("pointermove",bi,Fi),this.parent.div.style.cursor=Ni,this.div.style.cursor=Si;const Ri=this.x,Mi=this.y,Ui=this.width,Hi=this.height;Ri===zi&&Mi===_i&&Ui===ji&&Hi===Pi||this.addCommands({cmd:()=>{this.width=Ui,this.height=Hi,this.x=Ri,this.y=Mi;const[Li,Ei]=this.parentDimensions;this.setDims(Li*Ui,Ei*Hi),this.fixAndSetPosition()},undo:()=>{this.width=ji,this.height=Pi,this.x=zi,this.y=_i;const[Li,Ei]=this.parentDimensions;this.setDims(Li*ji,Ei*Pi),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Ti),window.addEventListener("blur",Ti)},li=new WeakSet,uh=function(Vn,Yn){const[ci,bi]=this.parentDimensions,Ci=this.x,Fi=this.y,zi=this.width,_i=this.height,ji=Qn.MIN_SIZE/ci,Pi=Qn.MIN_SIZE/bi,Ni=us=>Math.round(us*1e4)/1e4,Si=Qi(this,pi,rl).call(this,this.rotation),Ti=(us,ts)=>[Si[0]*us+Si[2]*ts,Si[1]*us+Si[3]*ts],Ri=Qi(this,pi,rl).call(this,360-this.rotation),Mi=(us,ts)=>[Ri[0]*us+Ri[2]*ts,Ri[1]*us+Ri[3]*ts];let Ui,Hi,Li=!1,Ei=!1;switch(Vn){case"topLeft":Li=!0,Ui=(us,ts)=>[0,0],Hi=(us,ts)=>[us,ts];break;case"topMiddle":Ui=(us,ts)=>[us/2,0],Hi=(us,ts)=>[us/2,ts];break;case"topRight":Li=!0,Ui=(us,ts)=>[us,0],Hi=(us,ts)=>[0,ts];break;case"middleRight":Ei=!0,Ui=(us,ts)=>[us,ts/2],Hi=(us,ts)=>[0,ts/2];break;case"bottomRight":Li=!0,Ui=(us,ts)=>[us,ts],Hi=(us,ts)=>[0,0];break;case"bottomMiddle":Ui=(us,ts)=>[us/2,ts],Hi=(us,ts)=>[us/2,0];break;case"bottomLeft":Li=!0,Ui=(us,ts)=>[0,ts],Hi=(us,ts)=>[us,0];break;case"middleLeft":Ei=!0,Ui=(us,ts)=>[0,ts/2],Hi=(us,ts)=>[us,ts/2];break}const $i=Ui(zi,_i),Bi=Hi(zi,_i);let Oi=Ti(...Bi);const Xi=Ni(Ci+Oi[0]),Gi=Ni(Fi+Oi[1]);let qi=1,ns=1,[is,as]=this.screenToPageTranslation(Yn.movementX,Yn.movementY);if([is,as]=Mi(is/ci,as/bi),Li){const us=Math.hypot(zi,_i);qi=ns=Math.max(Math.min(Math.hypot(Bi[0]-$i[0]-is,Bi[1]-$i[1]-as)/us,1/zi,1/_i),ji/zi,Pi/_i)}else Ei?qi=Math.max(ji,Math.min(1,Math.abs(Bi[0]-$i[0]-is)))/zi:ns=Math.max(Pi,Math.min(1,Math.abs(Bi[1]-$i[1]-as)))/_i;const hs=Ni(zi*qi),Yi=Ni(_i*ns);Oi=Ti(...Hi(hs,Yi));const Vi=Xi-Oi[0],Zi=Gi-Oi[1];this.width=hs,this.height=Yi,this.x=Vi,this.y=Zi,this.setDims(ci*hs,bi*Yi),this.fixAndSetPosition()},gi=new WeakSet,ol=async function(){var ci;const Vn=vi(this,Cn);if(!Vn)return;if(!vi(this,Ln)&&!vi(this,jn)){Vn.classList.remove("done"),(ci=vi(this,Tn))==null||ci.remove();return}Qn._l10nPromise.get("editor_alt_text_edit_button_label").then(bi=>{Vn.setAttribute("aria-label",bi)});let Yn=vi(this,Tn);if(!Yn){ds(this,Tn,Yn=document.createElement("span")),Yn.className="tooltip",Yn.setAttribute("role","tooltip");const bi=Yn.id=`alt-text-tooltip-${this.id}`;Vn.setAttribute("aria-describedby",bi);const Ci=100;Vn.addEventListener("mouseenter",()=>{ds(this,Rn,setTimeout(()=>{ds(this,Rn,null),vi(this,Tn).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},Ci))}),Vn.addEventListener("mouseleave",()=>{var Fi;clearTimeout(vi(this,Rn)),ds(this,Rn,null),(Fi=vi(this,Tn))==null||Fi.classList.remove("show")})}Vn.classList.add("done"),Yn.innerText=vi(this,jn)?await Qn._l10nPromise.get("editor_alt_text_decorative_tooltip"):vi(this,Ln),Yn.parentNode||Vn.append(Yn)},Ii=new WeakSet,dh=function(Vn){if(!this._isDraggable)return;const Yn=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let ci,bi;Yn&&(ci={passive:!0,capture:!0},bi=Fi=>{const[zi,_i]=this.screenToPageTranslation(Fi.movementX,Fi.movementY);this._uiManager.dragSelectedEditors(zi,_i)},window.addEventListener("pointermove",bi,ci));const Ci=()=>{if(window.removeEventListener("pointerup",Ci),window.removeEventListener("blur",Ci),Yn&&window.removeEventListener("pointermove",bi,ci),ds(this,Nn,!1),!this._uiManager.endDragSession()){const{isMac:Fi}=oi.FeatureTest.platform;Vn.ctrlKey&&!Fi||Vn.shiftKey||Vn.metaKey&&Fi?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",Ci),window.addEventListener("blur",Ci)},Ki(Qn,wi),ta(Qn,"_borderLineWidth",-1),ta(Qn,"_colorManager",new Kn.ColorManager),ta(Qn,"_zIndex",1),ta(Qn,"SMALL_EDITOR_SIZE",0);let ti=Qn;$n.AnnotationEditor=ti;class In extends ti{constructor(Vn){super(Vn),this.annotationElementId=Vn.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(ki,$n,Pn)=>{var ui,si,ei,Bn,Nn,cl,hi,Xn,ii,ri,di,fh,Jn,pi,Zn,Gn,mi,Wn,ni,li,Ai,gi,yi,Ii,xi,Qn,ai,Vn,Yn,ci,bi,Ci,Fi,zi,_i,ji,Pi,Ni,Si,Ti,Ri,Mi,Ui,Hi,Li,Ei,$i,gh,Oi,ll,Gi,hl,ns,dc,as,ul,Yi,dl,Zi,za,ts,F0,rs,ph,os,mh,xs,fl,ms,I0,ws,gl;Object.defineProperty($n,"__esModule",{value:!0}),$n.KeyboardManager=$n.CommandManager=$n.ColorManager=$n.AnnotationEditorUIManager=void 0,$n.bindEvents=Mn,$n.opacityToHex=ti;var Kn=Pn(1),oi=Pn(6);function Mn(ls,Wi,Ji){for(const cs of Ji)Wi.addEventListener(cs,ls[cs].bind(ls))}function ti(ls){return Math.round(Math.min(255,Math.max(1,255*ls))).toString(16).padStart(2,"0")}class In{constructor(){Ki(this,ui,0)}getId(){return`${Kn.AnnotationEditorPrefix}${wr(this,ui)._++}`}}ui=new WeakMap;const On=class On{constructor(){Ki(this,Nn);Ki(this,si,(0,Kn.getUuid)());Ki(this,ei,0);Ki(this,Bn,null)}static get _isSVGFittingCanvas(){const Wi='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',cs=new OffscreenCanvas(1,3).getContext("2d"),fs=new Image;fs.src=Wi;const ps=fs.decode().then(()=>(cs.drawImage(fs,0,0,1,1,0,0,1,3),new Uint32Array(cs.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,Kn.shadow)(this,"_isSVGFittingCanvas",ps)}async getFromFile(Wi){const{lastModified:Ji,name:cs,size:fs,type:ps}=Wi;return Qi(this,Nn,cl).call(this,`${Ji}_${cs}_${fs}_${ps}`,Wi)}async getFromUrl(Wi){return Qi(this,Nn,cl).call(this,Wi,Wi)}async getFromId(Wi){vi(this,Bn)||ds(this,Bn,new Map);const Ji=vi(this,Bn).get(Wi);return Ji?Ji.bitmap?(Ji.refCounter+=1,Ji):Ji.file?this.getFromFile(Ji.file):this.getFromUrl(Ji.url):null}getSvgUrl(Wi){const Ji=vi(this,Bn).get(Wi);return Ji!=null&&Ji.isSvg?Ji.svgUrl:null}deleteId(Wi){vi(this,Bn)||ds(this,Bn,new Map);const Ji=vi(this,Bn).get(Wi);Ji&&(Ji.refCounter-=1,Ji.refCounter===0&&(Ji.bitmap=null))}isValidId(Wi){return Wi.startsWith(`image_${vi(this,si)}_`)}};si=new WeakMap,ei=new WeakMap,Bn=new WeakMap,Nn=new WeakSet,cl=async function(Wi,Ji){vi(this,Bn)||ds(this,Bn,new Map);let cs=vi(this,Bn).get(Wi);if(cs===null)return null;if(cs!=null&&cs.bitmap)return cs.refCounter+=1,cs;try{cs||(cs={bitmap:null,id:`image_${vi(this,si)}_${wr(this,ei)._++}`,refCounter:0,isSvg:!1});let fs;if(typeof Ji=="string"){cs.url=Ji;const ps=await fetch(Ji);if(!ps.ok)throw new Error(ps.statusText);fs=await ps.blob()}else fs=cs.file=Ji;if(fs.type==="image/svg+xml"){const ps=On._isSVGFittingCanvas,gs=new FileReader,bs=new Image,vs=new Promise((_s,Us)=>{bs.onload=()=>{cs.bitmap=bs,cs.isSvg=!0,_s()},gs.onload=async()=>{const Ds=cs.svgUrl=gs.result;bs.src=await ps?`${Ds}#svgView(preserveAspectRatio(none))`:Ds},bs.onerror=gs.onerror=Us});gs.readAsDataURL(fs),await vs}else cs.bitmap=await createImageBitmap(fs);cs.refCounter=1}catch(fs){console.error(fs),cs=null}return vi(this,Bn).set(Wi,cs),cs&&vi(this,Bn).set(cs.id,cs),cs};let Ln=On;class jn{constructor(Wi=128){Ki(this,hi,[]);Ki(this,Xn,!1);Ki(this,ii,void 0);Ki(this,ri,-1);ds(this,ii,Wi)}add({cmd:Wi,undo:Ji,mustExec:cs,type:fs=NaN,overwriteIfSameType:ps=!1,keepUndo:gs=!1}){if(cs&&Wi(),vi(this,Xn))return;const bs={cmd:Wi,undo:Ji,type:fs};if(vi(this,ri)===-1){vi(this,hi).length>0&&(vi(this,hi).length=0),ds(this,ri,0),vi(this,hi).push(bs);return}if(ps&&vi(this,hi)[vi(this,ri)].type===fs){gs&&(bs.undo=vi(this,hi)[vi(this,ri)].undo),vi(this,hi)[vi(this,ri)]=bs;return}const vs=vi(this,ri)+1;vs===vi(this,ii)?vi(this,hi).splice(0,1):(ds(this,ri,vs),vs<vi(this,hi).length&&vi(this,hi).splice(vs)),vi(this,hi).push(bs)}undo(){vi(this,ri)!==-1&&(ds(this,Xn,!0),vi(this,hi)[vi(this,ri)].undo(),ds(this,Xn,!1),ds(this,ri,vi(this,ri)-1))}redo(){vi(this,ri)<vi(this,hi).length-1&&(ds(this,ri,vi(this,ri)+1),ds(this,Xn,!0),vi(this,hi)[vi(this,ri)].cmd(),ds(this,Xn,!1))}hasSomethingToUndo(){return vi(this,ri)!==-1}hasSomethingToRedo(){return vi(this,ri)<vi(this,hi).length-1}destroy(){ds(this,hi,null)}}hi=new WeakMap,Xn=new WeakMap,ii=new WeakMap,ri=new WeakMap,$n.CommandManager=jn;class Cn{constructor(Wi){Ki(this,di);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Ji}=Kn.FeatureTest.platform;for(const[cs,fs,ps={}]of Wi)for(const gs of cs){const bs=gs.startsWith("mac+");Ji&&bs?(this.callbacks.set(gs.slice(4),{callback:fs,options:ps}),this.allKeys.add(gs.split("+").at(-1))):!Ji&&!bs&&(this.callbacks.set(gs,{callback:fs,options:ps}),this.allKeys.add(gs.split("+").at(-1)))}}exec(Wi,Ji){if(!this.allKeys.has(Ji.key))return;const cs=this.callbacks.get(Qi(this,di,fh).call(this,Ji));if(!cs)return;const{callback:fs,options:{bubbles:ps=!1,args:gs=[],checker:bs=null}}=cs;bs&&!bs(Wi,Ji)||(fs.bind(Wi,...gs)(),ps||(Ji.stopPropagation(),Ji.preventDefault()))}}di=new WeakSet,fh=function(Wi){Wi.altKey&&this.buffer.push("alt"),Wi.ctrlKey&&this.buffer.push("ctrl"),Wi.metaKey&&this.buffer.push("meta"),Wi.shiftKey&&this.buffer.push("shift"),this.buffer.push(Wi.key);const Ji=this.buffer.join("+");return this.buffer.length=0,Ji},$n.KeyboardManager=Cn;const wi=class wi{get _colors(){const Wi=new Map([["CanvasText",null],["Canvas",null]]);return(0,oi.getColorValues)(Wi),(0,Kn.shadow)(this,"_colors",Wi)}convert(Wi){const Ji=(0,oi.getRGB)(Wi);if(!window.matchMedia("(forced-colors: active)").matches)return Ji;for(const[cs,fs]of this._colors)if(fs.every((ps,gs)=>ps===Ji[gs]))return wi._colorsMapping.get(cs);return Ji}getHexCode(Wi){const Ji=this._colors.get(Wi);return Ji?Kn.Util.makeHexColor(...Ji):Wi}};ta(wi,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Tn=wi;$n.ColorManager=Tn;const Is=class Is{constructor(Wi,Ji,cs,fs,ps,gs){Ki(this,$i);Ki(this,Oi);Ki(this,Gi);Ki(this,ns);Ki(this,as);Ki(this,Yi);Ki(this,Zi);Ki(this,ts);Ki(this,rs);Ki(this,os);Ki(this,xs);Ki(this,ms);Ki(this,ws);Ki(this,Jn,null);Ki(this,pi,new Map);Ki(this,Zn,new Map);Ki(this,Gn,null);Ki(this,mi,null);Ki(this,Wn,new jn);Ki(this,ni,0);Ki(this,li,new Set);Ki(this,Ai,null);Ki(this,gi,null);Ki(this,yi,new Set);Ki(this,Ii,null);Ki(this,xi,new In);Ki(this,Qn,!1);Ki(this,ai,!1);Ki(this,Vn,null);Ki(this,Yn,Kn.AnnotationEditorType.NONE);Ki(this,ci,new Set);Ki(this,bi,null);Ki(this,Ci,this.blur.bind(this));Ki(this,Fi,this.focus.bind(this));Ki(this,zi,this.copy.bind(this));Ki(this,_i,this.cut.bind(this));Ki(this,ji,this.paste.bind(this));Ki(this,Pi,this.keydown.bind(this));Ki(this,Ni,this.onEditingAction.bind(this));Ki(this,Si,this.onPageChanging.bind(this));Ki(this,Ti,this.onScaleChanging.bind(this));Ki(this,Ri,this.onRotationChanging.bind(this));Ki(this,Mi,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Ki(this,Ui,[0,0]);Ki(this,Hi,null);Ki(this,Li,null);Ki(this,Ei,null);ds(this,Li,Wi),ds(this,Ei,Ji),ds(this,Gn,cs),this._eventBus=fs,this._eventBus._on("editingaction",vi(this,Ni)),this._eventBus._on("pagechanging",vi(this,Si)),this._eventBus._on("scalechanging",vi(this,Ti)),this._eventBus._on("rotationchanging",vi(this,Ri)),ds(this,mi,ps.annotationStorage),ds(this,Ii,ps.filterFactory),ds(this,bi,gs),this.viewParameters={realScale:oi.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const Wi=Is.prototype,Ji=ps=>{const{activeElement:gs}=document;return gs&&vi(ps,Li).contains(gs)&&ps.hasSomethingToControl()},cs=this.TRANSLATE_SMALL,fs=this.TRANSLATE_BIG;return(0,Kn.shadow)(this,"_keyboardManager",new Cn([[["ctrl+a","mac+meta+a"],Wi.selectAll],[["ctrl+z","mac+meta+z"],Wi.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],Wi.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],Wi.delete],[["Escape","mac+Escape"],Wi.unselectAll],[["ArrowLeft","mac+ArrowLeft"],Wi.translateSelectedEditors,{args:[-cs,0],checker:Ji}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Wi.translateSelectedEditors,{args:[-fs,0],checker:Ji}],[["ArrowRight","mac+ArrowRight"],Wi.translateSelectedEditors,{args:[cs,0],checker:Ji}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Wi.translateSelectedEditors,{args:[fs,0],checker:Ji}],[["ArrowUp","mac+ArrowUp"],Wi.translateSelectedEditors,{args:[0,-cs],checker:Ji}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Wi.translateSelectedEditors,{args:[0,-fs],checker:Ji}],[["ArrowDown","mac+ArrowDown"],Wi.translateSelectedEditors,{args:[0,cs],checker:Ji}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Wi.translateSelectedEditors,{args:[0,fs],checker:Ji}]]))}destroy(){Qi(this,ns,dc).call(this),Qi(this,Oi,ll).call(this),this._eventBus._off("editingaction",vi(this,Ni)),this._eventBus._off("pagechanging",vi(this,Si)),this._eventBus._off("scalechanging",vi(this,Ti)),this._eventBus._off("rotationchanging",vi(this,Ri));for(const Wi of vi(this,Zn).values())Wi.destroy();vi(this,Zn).clear(),vi(this,pi).clear(),vi(this,yi).clear(),ds(this,Jn,null),vi(this,ci).clear(),vi(this,Wn).destroy(),vi(this,Gn).destroy()}get hcmFilter(){return(0,Kn.shadow)(this,"hcmFilter",vi(this,bi)?vi(this,Ii).addHCMFilter(vi(this,bi).foreground,vi(this,bi).background):"none")}get direction(){return(0,Kn.shadow)(this,"direction",getComputedStyle(vi(this,Li)).direction)}editAltText(Wi){var Ji;(Ji=vi(this,Gn))==null||Ji.editAltText(this,Wi)}onPageChanging({pageNumber:Wi}){ds(this,ni,Wi-1)}focusMainContainer(){vi(this,Li).focus()}findParent(Wi,Ji){for(const cs of vi(this,Zn).values()){const{x:fs,y:ps,width:gs,height:bs}=cs.div.getBoundingClientRect();if(Wi>=fs&&Wi<=fs+gs&&Ji>=ps&&Ji<=ps+bs)return cs}return null}disableUserSelect(Wi=!1){vi(this,Ei).classList.toggle("noUserSelect",Wi)}addShouldRescale(Wi){vi(this,yi).add(Wi)}removeShouldRescale(Wi){vi(this,yi).delete(Wi)}onScaleChanging({scale:Wi}){this.commitOrRemove(),this.viewParameters.realScale=Wi*oi.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Ji of vi(this,yi))Ji.onScaleChanging()}onRotationChanging({pagesRotation:Wi}){this.commitOrRemove(),this.viewParameters.rotation=Wi}addToAnnotationStorage(Wi){!Wi.isEmpty()&&vi(this,mi)&&!vi(this,mi).has(Wi.id)&&vi(this,mi).setValue(Wi.id,Wi)}blur(){if(!this.hasSelection)return;const{activeElement:Wi}=document;for(const Ji of vi(this,ci))if(Ji.div.contains(Wi)){ds(this,Vn,[Ji,Wi]),Ji._focusEventsAllowed=!1;break}}focus(){if(!vi(this,Vn))return;const[Wi,Ji]=vi(this,Vn);ds(this,Vn,null),Ji.addEventListener("focusin",()=>{Wi._focusEventsAllowed=!0},{once:!0}),Ji.focus()}addEditListeners(){Qi(this,Gi,hl).call(this),Qi(this,as,ul).call(this)}removeEditListeners(){Qi(this,ns,dc).call(this),Qi(this,Yi,dl).call(this)}copy(Wi){var cs;if(Wi.preventDefault(),(cs=vi(this,Jn))==null||cs.commitOrRemove(),!this.hasSelection)return;const Ji=[];for(const fs of vi(this,ci)){const ps=fs.serialize(!0);ps&&Ji.push(ps)}Ji.length!==0&&Wi.clipboardData.setData("application/pdfjs",JSON.stringify(Ji))}cut(Wi){this.copy(Wi),this.delete()}paste(Wi){Wi.preventDefault();const{clipboardData:Ji}=Wi;for(const ps of Ji.items)for(const gs of vi(this,gi))if(gs.isHandlingMimeForPasting(ps.type)){gs.paste(ps,this.currentLayer);return}let cs=Ji.getData("application/pdfjs");if(!cs)return;try{cs=JSON.parse(cs)}catch(ps){(0,Kn.warn)(`paste: "${ps.message}".`);return}if(!Array.isArray(cs))return;this.unselectAll();const fs=this.currentLayer;try{const ps=[];for(const vs of cs){const _s=fs.deserialize(vs);if(!_s)return;ps.push(_s)}const gs=()=>{for(const vs of ps)Qi(this,xs,fl).call(this,vs);Qi(this,ws,gl).call(this,ps)},bs=()=>{for(const vs of ps)vs.remove()};this.addCommands({cmd:gs,undo:bs,mustExec:!0})}catch(ps){(0,Kn.warn)(`paste: "${ps.message}".`)}}keydown(Wi){var Ji;(Ji=this.getActive())!=null&&Ji.shouldGetKeyboardEvents()||Is._keyboardManager.exec(this,Wi)}onEditingAction(Wi){["undo","redo","delete","selectAll"].includes(Wi.name)&&this[Wi.name]()}setEditingState(Wi){Wi?(Qi(this,$i,gh).call(this),Qi(this,Gi,hl).call(this),Qi(this,as,ul).call(this),Qi(this,Zi,za).call(this,{isEditing:vi(this,Yn)!==Kn.AnnotationEditorType.NONE,isEmpty:Qi(this,ms,I0).call(this),hasSomethingToUndo:vi(this,Wn).hasSomethingToUndo(),hasSomethingToRedo:vi(this,Wn).hasSomethingToRedo(),hasSelectedEditor:!1})):(Qi(this,Oi,ll).call(this),Qi(this,ns,dc).call(this),Qi(this,Yi,dl).call(this),Qi(this,Zi,za).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(Wi){if(!vi(this,gi)){ds(this,gi,Wi);for(const Ji of vi(this,gi))Qi(this,ts,F0).call(this,Ji.defaultPropertiesToUpdate)}}getId(){return vi(this,xi).getId()}get currentLayer(){return vi(this,Zn).get(vi(this,ni))}getLayer(Wi){return vi(this,Zn).get(Wi)}get currentPageIndex(){return vi(this,ni)}addLayer(Wi){vi(this,Zn).set(Wi.pageIndex,Wi),vi(this,Qn)?Wi.enable():Wi.disable()}removeLayer(Wi){vi(this,Zn).delete(Wi.pageIndex)}updateMode(Wi,Ji=null){if(vi(this,Yn)!==Wi){if(ds(this,Yn,Wi),Wi===Kn.AnnotationEditorType.NONE){this.setEditingState(!1),Qi(this,os,mh).call(this);return}this.setEditingState(!0),Qi(this,rs,ph).call(this),this.unselectAll();for(const cs of vi(this,Zn).values())cs.updateMode(Wi);if(Ji){for(const cs of vi(this,pi).values())if(cs.annotationElementId===Ji){this.setSelected(cs),cs.enterInEditMode();break}}}}updateToolbar(Wi){Wi!==vi(this,Yn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:Wi})}updateParams(Wi,Ji){if(vi(this,gi)){if(Wi===Kn.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(Wi);return}for(const cs of vi(this,ci))cs.updateParams(Wi,Ji);for(const cs of vi(this,gi))cs.updateDefaultParams(Wi,Ji)}}enableWaiting(Wi=!1){if(vi(this,ai)!==Wi){ds(this,ai,Wi);for(const Ji of vi(this,Zn).values())Wi?Ji.disableClick():Ji.enableClick(),Ji.div.classList.toggle("waiting",Wi)}}getEditors(Wi){const Ji=[];for(const cs of vi(this,pi).values())cs.pageIndex===Wi&&Ji.push(cs);return Ji}getEditor(Wi){return vi(this,pi).get(Wi)}addEditor(Wi){vi(this,pi).set(Wi.id,Wi)}removeEditor(Wi){var Ji;vi(this,pi).delete(Wi.id),this.unselect(Wi),(!Wi.annotationElementId||!vi(this,li).has(Wi.annotationElementId))&&((Ji=vi(this,mi))==null||Ji.remove(Wi.id))}addDeletedAnnotationElement(Wi){vi(this,li).add(Wi.annotationElementId),Wi.deleted=!0}isDeletedAnnotationElement(Wi){return vi(this,li).has(Wi)}removeDeletedAnnotationElement(Wi){vi(this,li).delete(Wi.annotationElementId),Wi.deleted=!1}setActiveEditor(Wi){vi(this,Jn)!==Wi&&(ds(this,Jn,Wi),Wi&&Qi(this,ts,F0).call(this,Wi.propertiesToUpdate))}toggleSelected(Wi){if(vi(this,ci).has(Wi)){vi(this,ci).delete(Wi),Wi.unselect(),Qi(this,Zi,za).call(this,{hasSelectedEditor:this.hasSelection});return}vi(this,ci).add(Wi),Wi.select(),Qi(this,ts,F0).call(this,Wi.propertiesToUpdate),Qi(this,Zi,za).call(this,{hasSelectedEditor:!0})}setSelected(Wi){for(const Ji of vi(this,ci))Ji!==Wi&&Ji.unselect();vi(this,ci).clear(),vi(this,ci).add(Wi),Wi.select(),Qi(this,ts,F0).call(this,Wi.propertiesToUpdate),Qi(this,Zi,za).call(this,{hasSelectedEditor:!0})}isSelected(Wi){return vi(this,ci).has(Wi)}unselect(Wi){Wi.unselect(),vi(this,ci).delete(Wi),Qi(this,Zi,za).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return vi(this,ci).size!==0}undo(){vi(this,Wn).undo(),Qi(this,Zi,za).call(this,{hasSomethingToUndo:vi(this,Wn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Qi(this,ms,I0).call(this)})}redo(){vi(this,Wn).redo(),Qi(this,Zi,za).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:vi(this,Wn).hasSomethingToRedo(),isEmpty:Qi(this,ms,I0).call(this)})}addCommands(Wi){vi(this,Wn).add(Wi),Qi(this,Zi,za).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Qi(this,ms,I0).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const Wi=[...vi(this,ci)],Ji=()=>{for(const fs of Wi)fs.remove()},cs=()=>{for(const fs of Wi)Qi(this,xs,fl).call(this,fs)};this.addCommands({cmd:Ji,undo:cs,mustExec:!0})}commitOrRemove(){var Wi;(Wi=vi(this,Jn))==null||Wi.commitOrRemove()}hasSomethingToControl(){return vi(this,Jn)||this.hasSelection}selectAll(){for(const Wi of vi(this,ci))Wi.commit();Qi(this,ws,gl).call(this,vi(this,pi).values())}unselectAll(){if(vi(this,Jn)){vi(this,Jn).commitOrRemove();return}if(this.hasSelection){for(const Wi of vi(this,ci))Wi.unselect();vi(this,ci).clear(),Qi(this,Zi,za).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(Wi,Ji,cs=!1){if(cs||this.commitOrRemove(),!this.hasSelection)return;vi(this,Ui)[0]+=Wi,vi(this,Ui)[1]+=Ji;const[fs,ps]=vi(this,Ui),gs=[...vi(this,ci)],bs=1e3;vi(this,Hi)&&clearTimeout(vi(this,Hi)),ds(this,Hi,setTimeout(()=>{ds(this,Hi,null),vi(this,Ui)[0]=vi(this,Ui)[1]=0,this.addCommands({cmd:()=>{for(const vs of gs)vi(this,pi).has(vs.id)&&vs.translateInPage(fs,ps)},undo:()=>{for(const vs of gs)vi(this,pi).has(vs.id)&&vs.translateInPage(-fs,-ps)},mustExec:!1})},bs));for(const vs of gs)vs.translateInPage(Wi,Ji)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),ds(this,Ai,new Map);for(const Wi of vi(this,ci))vi(this,Ai).set(Wi,{savedX:Wi.x,savedY:Wi.y,savedPageIndex:Wi.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!vi(this,Ai))return!1;this.disableUserSelect(!1);const Wi=vi(this,Ai);ds(this,Ai,null);let Ji=!1;for(const[{x:fs,y:ps,pageIndex:gs},bs]of Wi)bs.newX=fs,bs.newY=ps,bs.newPageIndex=gs,Ji||(Ji=fs!==bs.savedX||ps!==bs.savedY||gs!==bs.savedPageIndex);if(!Ji)return!1;const cs=(fs,ps,gs,bs)=>{if(vi(this,pi).has(fs.id)){const vs=vi(this,Zn).get(bs);vs?fs._setParentAndPosition(vs,ps,gs):(fs.pageIndex=bs,fs.x=ps,fs.y=gs)}};return this.addCommands({cmd:()=>{for(const[fs,{newX:ps,newY:gs,newPageIndex:bs}]of Wi)cs(fs,ps,gs,bs)},undo:()=>{for(const[fs,{savedX:ps,savedY:gs,savedPageIndex:bs}]of Wi)cs(fs,ps,gs,bs)},mustExec:!0}),!0}dragSelectedEditors(Wi,Ji){if(vi(this,Ai))for(const cs of vi(this,Ai).keys())cs.drag(Wi,Ji)}rebuild(Wi){if(Wi.parent===null){const Ji=this.getLayer(Wi.pageIndex);Ji?(Ji.changeParent(Wi),Ji.addOrRebuild(Wi)):(this.addEditor(Wi),this.addToAnnotationStorage(Wi),Wi.rebuild())}else Wi.parent.addOrRebuild(Wi)}isActive(Wi){return vi(this,Jn)===Wi}getActive(){return vi(this,Jn)}getMode(){return vi(this,Yn)}get imageManager(){return(0,Kn.shadow)(this,"imageManager",new Ln)}};Jn=new WeakMap,pi=new WeakMap,Zn=new WeakMap,Gn=new WeakMap,mi=new WeakMap,Wn=new WeakMap,ni=new WeakMap,li=new WeakMap,Ai=new WeakMap,gi=new WeakMap,yi=new WeakMap,Ii=new WeakMap,xi=new WeakMap,Qn=new WeakMap,ai=new WeakMap,Vn=new WeakMap,Yn=new WeakMap,ci=new WeakMap,bi=new WeakMap,Ci=new WeakMap,Fi=new WeakMap,zi=new WeakMap,_i=new WeakMap,ji=new WeakMap,Pi=new WeakMap,Ni=new WeakMap,Si=new WeakMap,Ti=new WeakMap,Ri=new WeakMap,Mi=new WeakMap,Ui=new WeakMap,Hi=new WeakMap,Li=new WeakMap,Ei=new WeakMap,$i=new WeakSet,gh=function(){window.addEventListener("focus",vi(this,Fi)),window.addEventListener("blur",vi(this,Ci))},Oi=new WeakSet,ll=function(){window.removeEventListener("focus",vi(this,Fi)),window.removeEventListener("blur",vi(this,Ci))},Gi=new WeakSet,hl=function(){window.addEventListener("keydown",vi(this,Pi),{capture:!0})},ns=new WeakSet,dc=function(){window.removeEventListener("keydown",vi(this,Pi),{capture:!0})},as=new WeakSet,ul=function(){document.addEventListener("copy",vi(this,zi)),document.addEventListener("cut",vi(this,_i)),document.addEventListener("paste",vi(this,ji))},Yi=new WeakSet,dl=function(){document.removeEventListener("copy",vi(this,zi)),document.removeEventListener("cut",vi(this,_i)),document.removeEventListener("paste",vi(this,ji))},Zi=new WeakSet,za=function(Wi){Object.entries(Wi).some(([cs,fs])=>vi(this,Mi)[cs]!==fs)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(vi(this,Mi),Wi)})},ts=new WeakSet,F0=function(Wi){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:Wi})},rs=new WeakSet,ph=function(){if(!vi(this,Qn)){ds(this,Qn,!0);for(const Wi of vi(this,Zn).values())Wi.enable()}},os=new WeakSet,mh=function(){if(this.unselectAll(),vi(this,Qn)){ds(this,Qn,!1);for(const Wi of vi(this,Zn).values())Wi.disable()}},xs=new WeakSet,fl=function(Wi){const Ji=vi(this,Zn).get(Wi.pageIndex);Ji?Ji.addOrRebuild(Wi):this.addEditor(Wi)},ms=new WeakSet,I0=function(){if(vi(this,pi).size===0)return!0;if(vi(this,pi).size===1)for(const Wi of vi(this,pi).values())return Wi.isEmpty();return!1},ws=new WeakSet,gl=function(Wi){vi(this,ci).clear();for(const Ji of Wi)Ji.isEmpty()||(vi(this,ci).add(Ji),Ji.select());Qi(this,Zi,za).call(this,{hasSelectedEditor:!0})},ta(Is,"TRANSLATE_SMALL",1),ta(Is,"TRANSLATE_BIG",10);let Rn=Is;$n.AnnotationEditorUIManager=Rn},(ki,$n,Pn)=>{var ni,li,Ai,gi,yi,Ii,xi,Qn,ai,Vn,Yn,ci,Do,Ci,No,zi,pl,ji,fc,Ni,gc,Ti,O0,Mi,_0;Object.defineProperty($n,"__esModule",{value:!0}),$n.StatTimer=$n.RenderingCancelledException=$n.PixelsPerInch=$n.PageViewport=$n.PDFDateString=$n.DOMStandardFontDataFactory=$n.DOMSVGFactory=$n.DOMFilterFactory=$n.DOMCanvasFactory=$n.DOMCMapReaderFactory=void 0,$n.deprecated=ri,$n.getColorValues=pi,$n.getCurrentTransform=Zn,$n.getCurrentTransformInverse=Gn,$n.getFilenameFromUrl=Nn,$n.getPdfFilenameFromUrl=Hn,$n.getRGB=Jn,$n.getXfaPageViewport=wi,$n.isDataScheme=ei,$n.isPdfFile=Bn,$n.isValidFetchUrl=hi,$n.loadScript=ii,$n.noContextMenu=Xn,$n.setLayerDimensions=mi;var Kn=Pn(7),oi=Pn(1);const Mn="http://www.w3.org/2000/svg",Wn=class Wn{};ta(Wn,"CSS",96),ta(Wn,"PDF",72),ta(Wn,"PDF_TO_CSS_UNITS",Wn.CSS/Wn.PDF);let ti=Wn;$n.PixelsPerInch=ti;class In extends Kn.BaseFilterFactory{constructor({docId:Ei,ownerDocument:$i=globalThis.document}={}){super();Ki(this,ci);Ki(this,Ci);Ki(this,zi);Ki(this,ji);Ki(this,Ni);Ki(this,Ti);Ki(this,Mi);Ki(this,ni,void 0);Ki(this,li,void 0);Ki(this,Ai,void 0);Ki(this,gi,void 0);Ki(this,yi,void 0);Ki(this,Ii,void 0);Ki(this,xi,void 0);Ki(this,Qn,void 0);Ki(this,ai,void 0);Ki(this,Vn,void 0);Ki(this,Yn,0);ds(this,Ai,Ei),ds(this,gi,$i)}addFilter(Ei){if(!Ei)return"none";let $i=vi(this,ci,Do).get(Ei);if($i)return $i;let Bi,Oi,Xi,Gi;if(Ei.length===1){const as=Ei[0],hs=new Array(256);for(let Yi=0;Yi<256;Yi++)hs[Yi]=as[Yi]/255;Gi=Bi=Oi=Xi=hs.join(",")}else{const[as,hs,Yi]=Ei,Vi=new Array(256),Zi=new Array(256),us=new Array(256);for(let ts=0;ts<256;ts++)Vi[ts]=as[ts]/255,Zi[ts]=hs[ts]/255,us[ts]=Yi[ts]/255;Bi=Vi.join(","),Oi=Zi.join(","),Xi=us.join(","),Gi=`${Bi}${Oi}${Xi}`}if($i=vi(this,ci,Do).get(Gi),$i)return vi(this,ci,Do).set(Ei,$i),$i;const qi=`g_${vi(this,Ai)}_transfer_map_${wr(this,Yn)._++}`,ns=`url(#${qi})`;vi(this,ci,Do).set(Ei,ns),vi(this,ci,Do).set(Gi,ns);const is=Qi(this,ji,fc).call(this,qi);return Qi(this,Ti,O0).call(this,Bi,Oi,Xi,is),ns}addHCMFilter(Ei,$i){var hs;const Bi=`${Ei}-${$i}`;if(vi(this,Ii)===Bi)return vi(this,xi);if(ds(this,Ii,Bi),ds(this,xi,"none"),(hs=vi(this,yi))==null||hs.remove(),!Ei||!$i)return vi(this,xi);const Oi=Qi(this,Mi,_0).call(this,Ei);Ei=oi.Util.makeHexColor(...Oi);const Xi=Qi(this,Mi,_0).call(this,$i);if($i=oi.Util.makeHexColor(...Xi),vi(this,Ci,No).style.color="",Ei==="#000000"&&$i==="#ffffff"||Ei===$i)return vi(this,xi);const Gi=new Array(256);for(let Yi=0;Yi<=255;Yi++){const Vi=Yi/255;Gi[Yi]=Vi<=.03928?Vi/12.92:((Vi+.055)/1.055)**2.4}const qi=Gi.join(","),ns=`g_${vi(this,Ai)}_hcm_filter`,is=ds(this,Qn,Qi(this,ji,fc).call(this,ns));Qi(this,Ti,O0).call(this,qi,qi,qi,is),Qi(this,zi,pl).call(this,is);const as=(Yi,Vi)=>{const Zi=Oi[Yi]/255,us=Xi[Yi]/255,ts=new Array(Vi+1);for(let es=0;es<=Vi;es++)ts[es]=Zi+es/Vi*(us-Zi);return ts.join(",")};return Qi(this,Ti,O0).call(this,as(0,5),as(1,5),as(2,5),is),ds(this,xi,`url(#${ns})`),vi(this,xi)}addHighlightHCMFilter(Ei,$i,Bi,Oi){var us;const Xi=`${Ei}-${$i}-${Bi}-${Oi}`;if(vi(this,ai)===Xi)return vi(this,Vn);if(ds(this,ai,Xi),ds(this,Vn,"none"),(us=vi(this,Qn))==null||us.remove(),!Ei||!$i)return vi(this,Vn);const[Gi,qi]=[Ei,$i].map(Qi(this,Mi,_0).bind(this));let ns=Math.round(.2126*Gi[0]+.7152*Gi[1]+.0722*Gi[2]),is=Math.round(.2126*qi[0]+.7152*qi[1]+.0722*qi[2]),[as,hs]=[Bi,Oi].map(Qi(this,Mi,_0).bind(this));is<ns&&([ns,is,as,hs]=[is,ns,hs,as]),vi(this,Ci,No).style.color="";const Yi=(ts,es,rs)=>{const ss=new Array(256),os=(is-ns)/rs,ks=ts/255,xs=(es-ts)/(255*rs);let Rs=0;for(let ms=0;ms<=rs;ms++){const Bs=Math.round(ns+ms*os),ws=ks+ms*xs;for(let Ts=Rs;Ts<=Bs;Ts++)ss[Ts]=ws;Rs=Bs+1}for(let ms=Rs;ms<256;ms++)ss[ms]=ss[Rs-1];return ss.join(",")},Vi=`g_${vi(this,Ai)}_hcm_highlight_filter`,Zi=ds(this,Qn,Qi(this,ji,fc).call(this,Vi));return Qi(this,zi,pl).call(this,Zi),Qi(this,Ti,O0).call(this,Yi(as[0],hs[0],5),Yi(as[1],hs[1],5),Yi(as[2],hs[2],5),Zi),ds(this,Vn,`url(#${Vi})`),vi(this,Vn)}destroy(Ei=!1){Ei&&(vi(this,xi)||vi(this,Vn))||(vi(this,li)&&(vi(this,li).parentNode.parentNode.remove(),ds(this,li,null)),vi(this,ni)&&(vi(this,ni).clear(),ds(this,ni,null)),ds(this,Yn,0))}}ni=new WeakMap,li=new WeakMap,Ai=new WeakMap,gi=new WeakMap,yi=new WeakMap,Ii=new WeakMap,xi=new WeakMap,Qn=new WeakMap,ai=new WeakMap,Vn=new WeakMap,Yn=new WeakMap,ci=new WeakSet,Do=function(){return vi(this,ni)||ds(this,ni,new Map)},Ci=new WeakSet,No=function(){if(!vi(this,li)){const Ei=vi(this,gi).createElement("div"),{style:$i}=Ei;$i.visibility="hidden",$i.contain="strict",$i.width=$i.height=0,$i.position="absolute",$i.top=$i.left=0,$i.zIndex=-1;const Bi=vi(this,gi).createElementNS(Mn,"svg");Bi.setAttribute("width",0),Bi.setAttribute("height",0),ds(this,li,vi(this,gi).createElementNS(Mn,"defs")),Ei.append(Bi),Bi.append(vi(this,li)),vi(this,gi).body.append(Ei)}return vi(this,li)},zi=new WeakSet,pl=function(Ei){const $i=vi(this,gi).createElementNS(Mn,"feColorMatrix");$i.setAttribute("type","matrix"),$i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),Ei.append($i)},ji=new WeakSet,fc=function(Ei){const $i=vi(this,gi).createElementNS(Mn,"filter");return $i.setAttribute("color-interpolation-filters","sRGB"),$i.setAttribute("id",Ei),vi(this,Ci,No).append($i),$i},Ni=new WeakSet,gc=function(Ei,$i,Bi){const Oi=vi(this,gi).createElementNS(Mn,$i);Oi.setAttribute("type","discrete"),Oi.setAttribute("tableValues",Bi),Ei.append(Oi)},Ti=new WeakSet,O0=function(Ei,$i,Bi,Oi){const Xi=vi(this,gi).createElementNS(Mn,"feComponentTransfer");Oi.append(Xi),Qi(this,Ni,gc).call(this,Xi,"feFuncR",Ei),Qi(this,Ni,gc).call(this,Xi,"feFuncG",$i),Qi(this,Ni,gc).call(this,Xi,"feFuncB",Bi)},Mi=new WeakSet,_0=function(Ei){return vi(this,Ci,No).style.color=Ei,Jn(getComputedStyle(vi(this,Ci,No)).getPropertyValue("color"))},$n.DOMFilterFactory=In;class Ln extends Kn.BaseCanvasFactory{constructor({ownerDocument:Li=globalThis.document}={}){super(),this._document=Li}_createCanvas(Li,Ei){const $i=this._document.createElement("canvas");return $i.width=Li,$i.height=Ei,$i}}$n.DOMCanvasFactory=Ln;async function jn(Hi,Li=!1){if(hi(Hi,document.baseURI)){const Ei=await fetch(Hi);if(!Ei.ok)throw new Error(Ei.statusText);return Li?new Uint8Array(await Ei.arrayBuffer()):(0,oi.stringToBytes)(await Ei.text())}return new Promise((Ei,$i)=>{const Bi=new XMLHttpRequest;Bi.open("GET",Hi,!0),Li&&(Bi.responseType="arraybuffer"),Bi.onreadystatechange=()=>{if(Bi.readyState===XMLHttpRequest.DONE){if(Bi.status===200||Bi.status===0){let Oi;if(Li&&Bi.response?Oi=new Uint8Array(Bi.response):!Li&&Bi.responseText&&(Oi=(0,oi.stringToBytes)(Bi.responseText)),Oi){Ei(Oi);return}}$i(new Error(Bi.statusText))}},Bi.send(null)})}class Cn extends Kn.BaseCMapReaderFactory{_fetchData(Li,Ei){return jn(Li,this.isCompressed).then($i=>({cMapData:$i,compressionType:Ei}))}}$n.DOMCMapReaderFactory=Cn;class Tn extends Kn.BaseStandardFontDataFactory{_fetchData(Li){return jn(Li,!0)}}$n.DOMStandardFontDataFactory=Tn;class Rn extends Kn.BaseSVGFactory{_createSVG(Li){return document.createElementNS(Mn,Li)}}$n.DOMSVGFactory=Rn;class ui{constructor({viewBox:Li,scale:Ei,rotation:$i,offsetX:Bi=0,offsetY:Oi=0,dontFlip:Xi=!1}){this.viewBox=Li,this.scale=Ei,this.rotation=$i,this.offsetX=Bi,this.offsetY=Oi;const Gi=(Li[2]+Li[0])/2,qi=(Li[3]+Li[1])/2;let ns,is,as,hs;switch($i%=360,$i<0&&($i+=360),$i){case 180:ns=-1,is=0,as=0,hs=1;break;case 90:ns=0,is=1,as=1,hs=0;break;case 270:ns=0,is=-1,as=-1,hs=0;break;case 0:ns=1,is=0,as=0,hs=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Xi&&(as=-as,hs=-hs);let Yi,Vi,Zi,us;ns===0?(Yi=Math.abs(qi-Li[1])*Ei+Bi,Vi=Math.abs(Gi-Li[0])*Ei+Oi,Zi=(Li[3]-Li[1])*Ei,us=(Li[2]-Li[0])*Ei):(Yi=Math.abs(Gi-Li[0])*Ei+Bi,Vi=Math.abs(qi-Li[1])*Ei+Oi,Zi=(Li[2]-Li[0])*Ei,us=(Li[3]-Li[1])*Ei),this.transform=[ns*Ei,is*Ei,as*Ei,hs*Ei,Yi-ns*Ei*Gi-as*Ei*qi,Vi-is*Ei*Gi-hs*Ei*qi],this.width=Zi,this.height=us}get rawDims(){const{viewBox:Li}=this;return(0,oi.shadow)(this,"rawDims",{pageWidth:Li[2]-Li[0],pageHeight:Li[3]-Li[1],pageX:Li[0],pageY:Li[1]})}clone({scale:Li=this.scale,rotation:Ei=this.rotation,offsetX:$i=this.offsetX,offsetY:Bi=this.offsetY,dontFlip:Oi=!1}={}){return new ui({viewBox:this.viewBox.slice(),scale:Li,rotation:Ei,offsetX:$i,offsetY:Bi,dontFlip:Oi})}convertToViewportPoint(Li,Ei){return oi.Util.applyTransform([Li,Ei],this.transform)}convertToViewportRectangle(Li){const Ei=oi.Util.applyTransform([Li[0],Li[1]],this.transform),$i=oi.Util.applyTransform([Li[2],Li[3]],this.transform);return[Ei[0],Ei[1],$i[0],$i[1]]}convertToPdfPoint(Li,Ei){return oi.Util.applyInverseTransform([Li,Ei],this.transform)}}$n.PageViewport=ui;class si extends oi.BaseException{constructor(Li,Ei=0){super(Li,"RenderingCancelledException"),this.extraDelay=Ei}}$n.RenderingCancelledException=si;function ei(Hi){const Li=Hi.length;let Ei=0;for(;Ei<Li&&Hi[Ei].trim()==="";)Ei++;return Hi.substring(Ei,Ei+5).toLowerCase()==="data:"}function Bn(Hi){return typeof Hi=="string"&&/\.pdf$/i.test(Hi)}function Nn(Hi,Li=!1){return Li||([Hi]=Hi.split(/[#?]/,1)),Hi.substring(Hi.lastIndexOf("/")+1)}function Hn(Hi,Li="document.pdf"){if(typeof Hi!="string")return Li;if(ei(Hi))return(0,oi.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Li;const Ei=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,$i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Bi=Ei.exec(Hi);let Oi=$i.exec(Bi[1])||$i.exec(Bi[2])||$i.exec(Bi[3]);if(Oi&&(Oi=Oi[0],Oi.includes("%")))try{Oi=$i.exec(decodeURIComponent(Oi))[0]}catch{}return Oi||Li}class On{constructor(){ta(this,"started",Object.create(null));ta(this,"times",[])}time(Li){Li in this.started&&(0,oi.warn)(`Timer is already running for ${Li}`),this.started[Li]=Date.now()}timeEnd(Li){Li in this.started||(0,oi.warn)(`Timer has not been started for ${Li}`),this.times.push({name:Li,start:this.started[Li],end:Date.now()}),delete this.started[Li]}toString(){const Li=[];let Ei=0;for(const{name:$i}of this.times)Ei=Math.max($i.length,Ei);for(const{name:$i,start:Bi,end:Oi}of this.times)Li.push(`${$i.padEnd(Ei)} ${Oi-Bi}ms
`);return Li.join("")}}$n.StatTimer=On;function hi(Hi,Li){try{const{protocol:Ei}=Li?new URL(Hi,Li):new URL(Hi);return Ei==="http:"||Ei==="https:"}catch{return!1}}function Xn(Hi){Hi.preventDefault()}function ii(Hi,Li=!1){return new Promise((Ei,$i)=>{const Bi=document.createElement("script");Bi.src=Hi,Bi.onload=function(Oi){Li&&Bi.remove(),Ei(Oi)},Bi.onerror=function(){$i(new Error(`Cannot load script at: ${Bi.src}`))},(document.head||document.documentElement).append(Bi)})}function ri(Hi){console.log("Deprecated API usage: "+Hi)}let di;class fi{static toDateObject(Li){if(!Li||typeof Li!="string")return null;di||(di=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const Ei=di.exec(Li);if(!Ei)return null;const $i=parseInt(Ei[1],10);let Bi=parseInt(Ei[2],10);Bi=Bi>=1&&Bi<=12?Bi-1:0;let Oi=parseInt(Ei[3],10);Oi=Oi>=1&&Oi<=31?Oi:1;let Xi=parseInt(Ei[4],10);Xi=Xi>=0&&Xi<=23?Xi:0;let Gi=parseInt(Ei[5],10);Gi=Gi>=0&&Gi<=59?Gi:0;let qi=parseInt(Ei[6],10);qi=qi>=0&&qi<=59?qi:0;const ns=Ei[7]||"Z";let is=parseInt(Ei[8],10);is=is>=0&&is<=23?is:0;let as=parseInt(Ei[9],10)||0;return as=as>=0&&as<=59?as:0,ns==="-"?(Xi+=is,Gi+=as):ns==="+"&&(Xi-=is,Gi-=as),new Date(Date.UTC($i,Bi,Oi,Xi,Gi,qi))}}$n.PDFDateString=fi;function wi(Hi,{scale:Li=1,rotation:Ei=0}){const{width:$i,height:Bi}=Hi.attributes.style,Oi=[0,0,parseInt($i),parseInt(Bi)];return new ui({viewBox:Oi,scale:Li,rotation:Ei})}function Jn(Hi){if(Hi.startsWith("#")){const Li=parseInt(Hi.slice(1),16);return[(Li&16711680)>>16,(Li&65280)>>8,Li&255]}return Hi.startsWith("rgb(")?Hi.slice(4,-1).split(",").map(Li=>parseInt(Li)):Hi.startsWith("rgba(")?Hi.slice(5,-1).split(",").map(Li=>parseInt(Li)).slice(0,3):((0,oi.warn)(`Not a valid color format: "${Hi}"`),[0,0,0])}function pi(Hi){const Li=document.createElement("span");Li.style.visibility="hidden",document.body.append(Li);for(const Ei of Hi.keys()){Li.style.color=Ei;const $i=window.getComputedStyle(Li).color;Hi.set(Ei,Jn($i))}Li.remove()}function Zn(Hi){const{a:Li,b:Ei,c:$i,d:Bi,e:Oi,f:Xi}=Hi.getTransform();return[Li,Ei,$i,Bi,Oi,Xi]}function Gn(Hi){const{a:Li,b:Ei,c:$i,d:Bi,e:Oi,f:Xi}=Hi.getTransform().invertSelf();return[Li,Ei,$i,Bi,Oi,Xi]}function mi(Hi,Li,Ei=!1,$i=!0){if(Li instanceof ui){const{pageWidth:Bi,pageHeight:Oi}=Li.rawDims,{style:Xi}=Hi,Gi=oi.FeatureTest.isCSSRoundSupported,qi=`var(--scale-factor) * ${Bi}px`,ns=`var(--scale-factor) * ${Oi}px`,is=Gi?`round(${qi}, 1px)`:`calc(${qi})`,as=Gi?`round(${ns}, 1px)`:`calc(${ns})`;!Ei||Li.rotation%180===0?(Xi.width=is,Xi.height=as):(Xi.width=as,Xi.height=is)}$i&&Hi.setAttribute("data-main-rotation",Li.rotation)}},(ki,$n,Pn)=>{Object.defineProperty($n,"__esModule",{value:!0}),$n.BaseStandardFontDataFactory=$n.BaseSVGFactory=$n.BaseFilterFactory=$n.BaseCanvasFactory=$n.BaseCMapReaderFactory=void 0;var Kn=Pn(1);class oi{constructor(){this.constructor===oi&&(0,Kn.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(Cn){return"none"}addHCMFilter(Cn,Tn){return"none"}addHighlightHCMFilter(Cn,Tn,Rn,ui){return"none"}destroy(Cn=!1){}}$n.BaseFilterFactory=oi;class Mn{constructor(){this.constructor===Mn&&(0,Kn.unreachable)("Cannot initialize BaseCanvasFactory.")}create(Cn,Tn){if(Cn<=0||Tn<=0)throw new Error("Invalid canvas size");const Rn=this._createCanvas(Cn,Tn);return{canvas:Rn,context:Rn.getContext("2d")}}reset(Cn,Tn,Rn){if(!Cn.canvas)throw new Error("Canvas is not specified");if(Tn<=0||Rn<=0)throw new Error("Invalid canvas size");Cn.canvas.width=Tn,Cn.canvas.height=Rn}destroy(Cn){if(!Cn.canvas)throw new Error("Canvas is not specified");Cn.canvas.width=0,Cn.canvas.height=0,Cn.canvas=null,Cn.context=null}_createCanvas(Cn,Tn){(0,Kn.unreachable)("Abstract method `_createCanvas` called.")}}$n.BaseCanvasFactory=Mn;class ti{constructor({baseUrl:Cn=null,isCompressed:Tn=!0}){this.constructor===ti&&(0,Kn.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=Cn,this.isCompressed=Tn}async fetch({name:Cn}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!Cn)throw new Error("CMap name must be specified.");const Tn=this.baseUrl+Cn+(this.isCompressed?".bcmap":""),Rn=this.isCompressed?Kn.CMapCompressionType.BINARY:Kn.CMapCompressionType.NONE;return this._fetchData(Tn,Rn).catch(ui=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${Tn}`)})}_fetchData(Cn,Tn){(0,Kn.unreachable)("Abstract method `_fetchData` called.")}}$n.BaseCMapReaderFactory=ti;class In{constructor({baseUrl:Cn=null}){this.constructor===In&&(0,Kn.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=Cn}async fetch({filename:Cn}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!Cn)throw new Error("Font filename must be specified.");const Tn=`${this.baseUrl}${Cn}`;return this._fetchData(Tn).catch(Rn=>{throw new Error(`Unable to load font data at: ${Tn}`)})}_fetchData(Cn){(0,Kn.unreachable)("Abstract method `_fetchData` called.")}}$n.BaseStandardFontDataFactory=In;class Ln{constructor(){this.constructor===Ln&&(0,Kn.unreachable)("Cannot initialize BaseSVGFactory.")}create(Cn,Tn,Rn=!1){if(Cn<=0||Tn<=0)throw new Error("Invalid SVG dimensions");const ui=this._createSVG("svg:svg");return ui.setAttribute("version","1.1"),Rn||(ui.setAttribute("width",`${Cn}px`),ui.setAttribute("height",`${Tn}px`)),ui.setAttribute("preserveAspectRatio","none"),ui.setAttribute("viewBox",`0 0 ${Cn} ${Tn}`),ui}createElement(Cn){if(typeof Cn!="string")throw new Error("Invalid SVG element type");return this._createSVG(Cn)}_createSVG(Cn){(0,Kn.unreachable)("Abstract method `_createSVG` called.")}}$n.BaseSVGFactory=Ln},(ki,$n,Pn)=>{Object.defineProperty($n,"__esModule",{value:!0}),$n.MurmurHash3_64=void 0;var Kn=Pn(1);const oi=3285377520,Mn=4294901760,ti=65535;class In{constructor(jn){this.h1=jn?jn&4294967295:oi,this.h2=jn?jn&4294967295:oi}update(jn){let Cn,Tn;if(typeof jn=="string"){Cn=new Uint8Array(jn.length*2),Tn=0;for(let ri=0,di=jn.length;ri<di;ri++){const fi=jn.charCodeAt(ri);fi<=255?Cn[Tn++]=fi:(Cn[Tn++]=fi>>>8,Cn[Tn++]=fi&255)}}else if((0,Kn.isArrayBuffer)(jn))Cn=jn.slice(),Tn=Cn.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const Rn=Tn>>2,ui=Tn-Rn*4,si=new Uint32Array(Cn.buffer,0,Rn);let ei=0,Bn=0,Nn=this.h1,Hn=this.h2;const On=3432918353,hi=461845907,Xn=On&ti,ii=hi&ti;for(let ri=0;ri<Rn;ri++)ri&1?(ei=si[ri],ei=ei*On&Mn|ei*Xn&ti,ei=ei<<15|ei>>>17,ei=ei*hi&Mn|ei*ii&ti,Nn^=ei,Nn=Nn<<13|Nn>>>19,Nn=Nn*5+3864292196):(Bn=si[ri],Bn=Bn*On&Mn|Bn*Xn&ti,Bn=Bn<<15|Bn>>>17,Bn=Bn*hi&Mn|Bn*ii&ti,Hn^=Bn,Hn=Hn<<13|Hn>>>19,Hn=Hn*5+3864292196);switch(ei=0,ui){case 3:ei^=Cn[Rn*4+2]<<16;case 2:ei^=Cn[Rn*4+1]<<8;case 1:ei^=Cn[Rn*4],ei=ei*On&Mn|ei*Xn&ti,ei=ei<<15|ei>>>17,ei=ei*hi&Mn|ei*ii&ti,Rn&1?Nn^=ei:Hn^=ei}this.h1=Nn,this.h2=Hn}hexdigest(){let jn=this.h1,Cn=this.h2;return jn^=Cn>>>1,jn=jn*3981806797&Mn|jn*36045&ti,Cn=Cn*4283543511&Mn|((Cn<<16|jn>>>16)*2950163797&Mn)>>>16,jn^=Cn>>>1,jn=jn*444984403&Mn|jn*60499&ti,Cn=Cn*3301882366&Mn|((Cn<<16|jn>>>16)*3120437893&Mn)>>>16,jn^=Cn>>>1,(jn>>>0).toString(16).padStart(8,"0")+(Cn>>>0).toString(16).padStart(8,"0")}}$n.MurmurHash3_64=In},(ki,$n,Pn)=>{var ti;Object.defineProperty($n,"__esModule",{value:!0}),$n.FontLoader=$n.FontFaceObject=void 0;var Kn=Pn(1);class oi{constructor({ownerDocument:Ln=globalThis.document,styleElement:jn=null}){Ki(this,ti,new Set);this._document=Ln,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(Ln){this.nativeFontFaces.add(Ln),this._document.fonts.add(Ln)}removeNativeFontFace(Ln){this.nativeFontFaces.delete(Ln),this._document.fonts.delete(Ln)}insertRule(Ln){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const jn=this.styleElement.sheet;jn.insertRule(Ln,jn.cssRules.length)}clear(){for(const Ln of this.nativeFontFaces)this._document.fonts.delete(Ln);this.nativeFontFaces.clear(),vi(this,ti).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(Ln){if(!(!Ln||vi(this,ti).has(Ln.loadedName))){if((0,Kn.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:jn,src:Cn,style:Tn}=Ln,Rn=new FontFace(jn,Cn,Tn);this.addNativeFontFace(Rn);try{await Rn.load(),vi(this,ti).add(jn)}catch{(0,Kn.warn)(`Cannot load system font: ${Ln.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(Rn)}return}(0,Kn.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(Ln){if(Ln.attached||Ln.missingFile&&!Ln.systemFontInfo)return;if(Ln.attached=!0,Ln.systemFontInfo){await this.loadSystemFont(Ln.systemFontInfo);return}if(this.isFontLoadingAPISupported){const Cn=Ln.createNativeFontFace();if(Cn){this.addNativeFontFace(Cn);try{await Cn.loaded}catch(Tn){throw(0,Kn.warn)(`Failed to load font '${Cn.family}': '${Tn}'.`),Ln.disableFontFace=!0,Tn}}return}const jn=Ln.createFontFaceRule();if(jn){if(this.insertRule(jn),this.isSyncFontLoadingSupported)return;await new Promise(Cn=>{const Tn=this._queueLoadingCallback(Cn);this._prepareFontLoadEvent(Ln,Tn)})}}get isFontLoadingAPISupported(){var jn;const Ln=!!((jn=this._document)!=null&&jn.fonts);return(0,Kn.shadow)(this,"isFontLoadingAPISupported",Ln)}get isSyncFontLoadingSupported(){let Ln=!1;return(Kn.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(Ln=!0),(0,Kn.shadow)(this,"isSyncFontLoadingSupported",Ln)}_queueLoadingCallback(Ln){function jn(){for((0,Kn.assert)(!Tn.done,"completeRequest() cannot be called twice."),Tn.done=!0;Cn.length>0&&Cn[0].done;){const Rn=Cn.shift();setTimeout(Rn.callback,0)}}const{loadingRequests:Cn}=this,Tn={done:!1,complete:jn,callback:Ln};return Cn.push(Tn),Tn}get _loadTestFont(){const Ln=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,Kn.shadow)(this,"_loadTestFont",Ln)}_prepareFontLoadEvent(Ln,jn){function Cn(Jn,pi){return Jn.charCodeAt(pi)<<24|Jn.charCodeAt(pi+1)<<16|Jn.charCodeAt(pi+2)<<8|Jn.charCodeAt(pi+3)&255}function Tn(Jn,pi,Zn,Gn){const mi=Jn.substring(0,pi),Wn=Jn.substring(pi+Zn);return mi+Gn+Wn}let Rn,ui;const si=this._document.createElement("canvas");si.width=1,si.height=1;const ei=si.getContext("2d");let Bn=0;function Nn(Jn,pi){if(++Bn>30){(0,Kn.warn)("Load test font never loaded."),pi();return}if(ei.font="30px "+Jn,ei.fillText(".",0,20),ei.getImageData(0,0,1,1).data[3]>0){pi();return}setTimeout(Nn.bind(null,Jn,pi))}const Hn=`lt${Date.now()}${this.loadTestFontId++}`;let On=this._loadTestFont;On=Tn(On,976,Hn.length,Hn);const Xn=16,ii=1482184792;let ri=Cn(On,Xn);for(Rn=0,ui=Hn.length-3;Rn<ui;Rn+=4)ri=ri-ii+Cn(Hn,Rn)|0;Rn<Hn.length&&(ri=ri-ii+Cn(Hn+"XXX",Rn)|0),On=Tn(On,Xn,4,(0,Kn.string32)(ri));const di=`url(data:font/opentype;base64,${btoa(On)});`,fi=`@font-face {font-family:"${Hn}";src:${di}}`;this.insertRule(fi);const wi=this._document.createElement("div");wi.style.visibility="hidden",wi.style.width=wi.style.height="10px",wi.style.position="absolute",wi.style.top=wi.style.left="0px";for(const Jn of[Ln.loadedName,Hn]){const pi=this._document.createElement("span");pi.textContent="Hi",pi.style.fontFamily=Jn,wi.append(pi)}this._document.body.append(wi),Nn(Hn,()=>{wi.remove(),jn.complete()})}}ti=new WeakMap,$n.FontLoader=oi;class Mn{constructor(Ln,{isEvalSupported:jn=!0,disableFontFace:Cn=!1,ignoreErrors:Tn=!1,inspectFont:Rn=null}){this.compiledGlyphs=Object.create(null);for(const ui in Ln)this[ui]=Ln[ui];this.isEvalSupported=jn!==!1,this.disableFontFace=Cn===!0,this.ignoreErrors=Tn===!0,this._inspectFont=Rn}createNativeFontFace(){var jn;if(!this.data||this.disableFontFace)return null;let Ln;if(!this.cssFontInfo)Ln=new FontFace(this.loadedName,this.data,{});else{const Cn={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(Cn.style=`oblique ${this.cssFontInfo.italicAngle}deg`),Ln=new FontFace(this.cssFontInfo.fontFamily,this.data,Cn)}return(jn=this._inspectFont)==null||jn.call(this,this),Ln}createFontFaceRule(){var Tn;if(!this.data||this.disableFontFace)return null;const Ln=(0,Kn.bytesToString)(this.data),jn=`url(data:${this.mimetype};base64,${btoa(Ln)});`;let Cn;if(!this.cssFontInfo)Cn=`@font-face {font-family:"${this.loadedName}";src:${jn}}`;else{let Rn=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(Rn+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),Cn=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${Rn}src:${jn}}`}return(Tn=this._inspectFont)==null||Tn.call(this,this,jn),Cn}getPathGenerator(Ln,jn){if(this.compiledGlyphs[jn]!==void 0)return this.compiledGlyphs[jn];let Cn;try{Cn=Ln.get(this.loadedName+"_path_"+jn)}catch(Tn){if(!this.ignoreErrors)throw Tn;return(0,Kn.warn)(`getPathGenerator - ignoring character: "${Tn}".`),this.compiledGlyphs[jn]=function(Rn,ui){}}if(this.isEvalSupported&&Kn.FeatureTest.isEvalSupported){const Tn=[];for(const Rn of Cn){const ui=Rn.args!==void 0?Rn.args.join(","):"";Tn.push("c.",Rn.cmd,"(",ui,`);
`)}return this.compiledGlyphs[jn]=new Function("c","size",Tn.join(""))}return this.compiledGlyphs[jn]=function(Tn,Rn){for(const ui of Cn)ui.cmd==="scale"&&(ui.args=[Rn,-Rn]),Tn[ui.cmd].apply(Tn,ui.args)}}}$n.FontFaceObject=Mn},(ki,$n,Pn)=>{Object.defineProperty($n,"__esModule",{value:!0}),$n.NodeStandardFontDataFactory=$n.NodeFilterFactory=$n.NodeCanvasFactory=$n.NodeCMapReaderFactory=void 0;var Kn=Pn(7);Pn(1);const oi=function(jn){return new Promise((Cn,Tn)=>{require("fs").readFile(jn,(ui,si)=>{if(ui||!si){Tn(new Error(ui));return}Cn(new Uint8Array(si))})})};class Mn extends Kn.BaseFilterFactory{}$n.NodeFilterFactory=Mn;class ti extends Kn.BaseCanvasFactory{_createCanvas(Cn,Tn){return require("canvas").createCanvas(Cn,Tn)}}$n.NodeCanvasFactory=ti;class In extends Kn.BaseCMapReaderFactory{_fetchData(Cn,Tn){return oi(Cn).then(Rn=>({cMapData:Rn,compressionType:Tn}))}}$n.NodeCMapReaderFactory=In;class Ln extends Kn.BaseStandardFontDataFactory{_fetchData(Cn){return oi(Cn)}}$n.NodeStandardFontDataFactory=Ln},(ki,$n,Pn)=>{var li,ml,gi,xl;Object.defineProperty($n,"__esModule",{value:!0}),$n.CanvasGraphics=void 0;var Kn=Pn(1),oi=Pn(6),Mn=Pn(12),ti=Pn(13);const In=16,Ln=100,jn=4096,Cn=15,Tn=10,Rn=1e3,ui=16;function si(xi,Qn){if(xi._removeMirroring)throw new Error("Context is already forwarding operations.");xi.__originalSave=xi.save,xi.__originalRestore=xi.restore,xi.__originalRotate=xi.rotate,xi.__originalScale=xi.scale,xi.__originalTranslate=xi.translate,xi.__originalTransform=xi.transform,xi.__originalSetTransform=xi.setTransform,xi.__originalResetTransform=xi.resetTransform,xi.__originalClip=xi.clip,xi.__originalMoveTo=xi.moveTo,xi.__originalLineTo=xi.lineTo,xi.__originalBezierCurveTo=xi.bezierCurveTo,xi.__originalRect=xi.rect,xi.__originalClosePath=xi.closePath,xi.__originalBeginPath=xi.beginPath,xi._removeMirroring=()=>{xi.save=xi.__originalSave,xi.restore=xi.__originalRestore,xi.rotate=xi.__originalRotate,xi.scale=xi.__originalScale,xi.translate=xi.__originalTranslate,xi.transform=xi.__originalTransform,xi.setTransform=xi.__originalSetTransform,xi.resetTransform=xi.__originalResetTransform,xi.clip=xi.__originalClip,xi.moveTo=xi.__originalMoveTo,xi.lineTo=xi.__originalLineTo,xi.bezierCurveTo=xi.__originalBezierCurveTo,xi.rect=xi.__originalRect,xi.closePath=xi.__originalClosePath,xi.beginPath=xi.__originalBeginPath,delete xi._removeMirroring},xi.save=function(){Qn.save(),this.__originalSave()},xi.restore=function(){Qn.restore(),this.__originalRestore()},xi.translate=function(Vn,Yn){Qn.translate(Vn,Yn),this.__originalTranslate(Vn,Yn)},xi.scale=function(Vn,Yn){Qn.scale(Vn,Yn),this.__originalScale(Vn,Yn)},xi.transform=function(Vn,Yn,ci,bi,Ci,Fi){Qn.transform(Vn,Yn,ci,bi,Ci,Fi),this.__originalTransform(Vn,Yn,ci,bi,Ci,Fi)},xi.setTransform=function(Vn,Yn,ci,bi,Ci,Fi){Qn.setTransform(Vn,Yn,ci,bi,Ci,Fi),this.__originalSetTransform(Vn,Yn,ci,bi,Ci,Fi)},xi.resetTransform=function(){Qn.resetTransform(),this.__originalResetTransform()},xi.rotate=function(Vn){Qn.rotate(Vn),this.__originalRotate(Vn)},xi.clip=function(Vn){Qn.clip(Vn),this.__originalClip(Vn)},xi.moveTo=function(ai,Vn){Qn.moveTo(ai,Vn),this.__originalMoveTo(ai,Vn)},xi.lineTo=function(ai,Vn){Qn.lineTo(ai,Vn),this.__originalLineTo(ai,Vn)},xi.bezierCurveTo=function(ai,Vn,Yn,ci,bi,Ci){Qn.bezierCurveTo(ai,Vn,Yn,ci,bi,Ci),this.__originalBezierCurveTo(ai,Vn,Yn,ci,bi,Ci)},xi.rect=function(ai,Vn,Yn,ci){Qn.rect(ai,Vn,Yn,ci),this.__originalRect(ai,Vn,Yn,ci)},xi.closePath=function(){Qn.closePath(),this.__originalClosePath()},xi.beginPath=function(){Qn.beginPath(),this.__originalBeginPath()}}class ei{constructor(Qn){this.canvasFactory=Qn,this.cache=Object.create(null)}getCanvas(Qn,ai,Vn){let Yn;return this.cache[Qn]!==void 0?(Yn=this.cache[Qn],this.canvasFactory.reset(Yn,ai,Vn)):(Yn=this.canvasFactory.create(ai,Vn),this.cache[Qn]=Yn),Yn}delete(Qn){delete this.cache[Qn]}clear(){for(const Qn in this.cache){const ai=this.cache[Qn];this.canvasFactory.destroy(ai),delete this.cache[Qn]}}}function Bn(xi,Qn,ai,Vn,Yn,ci,bi,Ci,Fi,zi){const[_i,ji,Pi,Ni,Si,Ti]=(0,oi.getCurrentTransform)(xi);if(ji===0&&Pi===0){const Ui=bi*_i+Si,Hi=Math.round(Ui),Li=Ci*Ni+Ti,Ei=Math.round(Li),$i=(bi+Fi)*_i+Si,Bi=Math.abs(Math.round($i)-Hi)||1,Oi=(Ci+zi)*Ni+Ti,Xi=Math.abs(Math.round(Oi)-Ei)||1;return xi.setTransform(Math.sign(_i),0,0,Math.sign(Ni),Hi,Ei),xi.drawImage(Qn,ai,Vn,Yn,ci,0,0,Bi,Xi),xi.setTransform(_i,ji,Pi,Ni,Si,Ti),[Bi,Xi]}if(_i===0&&Ni===0){const Ui=Ci*Pi+Si,Hi=Math.round(Ui),Li=bi*ji+Ti,Ei=Math.round(Li),$i=(Ci+zi)*Pi+Si,Bi=Math.abs(Math.round($i)-Hi)||1,Oi=(bi+Fi)*ji+Ti,Xi=Math.abs(Math.round(Oi)-Ei)||1;return xi.setTransform(0,Math.sign(ji),Math.sign(Pi),0,Hi,Ei),xi.drawImage(Qn,ai,Vn,Yn,ci,0,0,Xi,Bi),xi.setTransform(_i,ji,Pi,Ni,Si,Ti),[Xi,Bi]}xi.drawImage(Qn,ai,Vn,Yn,ci,bi,Ci,Fi,zi);const Ri=Math.hypot(_i,ji),Mi=Math.hypot(Pi,Ni);return[Ri*Fi,Mi*zi]}function Nn(xi){const{width:Qn,height:ai}=xi;if(Qn>Rn||ai>Rn)return null;const Vn=1e3,Yn=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),ci=Qn+1;let bi=new Uint8Array(ci*(ai+1)),Ci,Fi,zi;const _i=Qn+7&-8;let ji=new Uint8Array(_i*ai),Pi=0;for(const Mi of xi.data){let Ui=128;for(;Ui>0;)ji[Pi++]=Mi&Ui?0:255,Ui>>=1}let Ni=0;for(Pi=0,ji[Pi]!==0&&(bi[0]=1,++Ni),Fi=1;Fi<Qn;Fi++)ji[Pi]!==ji[Pi+1]&&(bi[Fi]=ji[Pi]?2:1,++Ni),Pi++;for(ji[Pi]!==0&&(bi[Fi]=2,++Ni),Ci=1;Ci<ai;Ci++){Pi=Ci*_i,zi=Ci*ci,ji[Pi-_i]!==ji[Pi]&&(bi[zi]=ji[Pi]?1:8,++Ni);let Mi=(ji[Pi]?4:0)+(ji[Pi-_i]?8:0);for(Fi=1;Fi<Qn;Fi++)Mi=(Mi>>2)+(ji[Pi+1]?4:0)+(ji[Pi-_i+1]?8:0),Yn[Mi]&&(bi[zi+Fi]=Yn[Mi],++Ni),Pi++;if(ji[Pi-_i]!==ji[Pi]&&(bi[zi+Fi]=ji[Pi]?2:4,++Ni),Ni>Vn)return null}for(Pi=_i*(ai-1),zi=Ci*ci,ji[Pi]!==0&&(bi[zi]=8,++Ni),Fi=1;Fi<Qn;Fi++)ji[Pi]!==ji[Pi+1]&&(bi[zi+Fi]=ji[Pi]?4:8,++Ni),Pi++;if(ji[Pi]!==0&&(bi[zi+Fi]=4,++Ni),Ni>Vn)return null;const Si=new Int32Array([0,ci,-1,0,-ci,0,0,0,1]),Ti=new Path2D;for(Ci=0;Ni&&Ci<=ai;Ci++){let Mi=Ci*ci;const Ui=Mi+Qn;for(;Mi<Ui&&!bi[Mi];)Mi++;if(Mi===Ui)continue;Ti.moveTo(Mi%ci,Ci);const Hi=Mi;let Li=bi[Mi];do{const Ei=Si[Li];do Mi+=Ei;while(!bi[Mi]);const $i=bi[Mi];$i!==5&&$i!==10?(Li=$i,bi[Mi]=0):(Li=$i&51*Li>>4,bi[Mi]&=Li>>2|Li<<2),Ti.lineTo(Mi%ci,Mi/ci|0),bi[Mi]||--Ni}while(Hi!==Mi);--Ci}return ji=null,bi=null,function(Mi){Mi.save(),Mi.scale(1/Qn,-1/ai),Mi.translate(0,-ai),Mi.fill(Ti),Mi.beginPath(),Mi.restore()}}class Hn{constructor(Qn,ai){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Kn.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=Kn.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Kn.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,Qn,ai])}clone(){const Qn=Object.create(this);return Qn.clipBox=this.clipBox.slice(),Qn}setCurrentPoint(Qn,ai){this.x=Qn,this.y=ai}updatePathMinMax(Qn,ai,Vn){[ai,Vn]=Kn.Util.applyTransform([ai,Vn],Qn),this.minX=Math.min(this.minX,ai),this.minY=Math.min(this.minY,Vn),this.maxX=Math.max(this.maxX,ai),this.maxY=Math.max(this.maxY,Vn)}updateRectMinMax(Qn,ai){const Vn=Kn.Util.applyTransform(ai,Qn),Yn=Kn.Util.applyTransform(ai.slice(2),Qn);this.minX=Math.min(this.minX,Vn[0],Yn[0]),this.minY=Math.min(this.minY,Vn[1],Yn[1]),this.maxX=Math.max(this.maxX,Vn[0],Yn[0]),this.maxY=Math.max(this.maxY,Vn[1],Yn[1])}updateScalingPathMinMax(Qn,ai){Kn.Util.scaleMinMax(Qn,ai),this.minX=Math.min(this.minX,ai[0]),this.maxX=Math.max(this.maxX,ai[1]),this.minY=Math.min(this.minY,ai[2]),this.maxY=Math.max(this.maxY,ai[3])}updateCurvePathMinMax(Qn,ai,Vn,Yn,ci,bi,Ci,Fi,zi,_i){const ji=Kn.Util.bezierBoundingBox(ai,Vn,Yn,ci,bi,Ci,Fi,zi);if(_i){_i[0]=Math.min(_i[0],ji[0],ji[2]),_i[1]=Math.max(_i[1],ji[0],ji[2]),_i[2]=Math.min(_i[2],ji[1],ji[3]),_i[3]=Math.max(_i[3],ji[1],ji[3]);return}this.updateRectMinMax(Qn,ji)}getPathBoundingBox(Qn=Mn.PathType.FILL,ai=null){const Vn=[this.minX,this.minY,this.maxX,this.maxY];if(Qn===Mn.PathType.STROKE){ai||(0,Kn.unreachable)("Stroke bounding box must include transform.");const Yn=Kn.Util.singularValueDecompose2dScale(ai),ci=Yn[0]*this.lineWidth/2,bi=Yn[1]*this.lineWidth/2;Vn[0]-=ci,Vn[1]-=bi,Vn[2]+=ci,Vn[3]+=bi}return Vn}updateClipFromPath(){const Qn=Kn.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(Qn||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(Qn){this.clipBox=Qn,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(Qn=Mn.PathType.FILL,ai=null){return Kn.Util.intersect(this.clipBox,this.getPathBoundingBox(Qn,ai))}}function On(xi,Qn){if(typeof ImageData<"u"&&Qn instanceof ImageData){xi.putImageData(Qn,0,0);return}const ai=Qn.height,Vn=Qn.width,Yn=ai%ui,ci=(ai-Yn)/ui,bi=Yn===0?ci:ci+1,Ci=xi.createImageData(Vn,ui);let Fi=0,zi;const _i=Qn.data,ji=Ci.data;let Pi,Ni,Si,Ti;if(Qn.kind===Kn.ImageKind.GRAYSCALE_1BPP){const Ri=_i.byteLength,Mi=new Uint32Array(ji.buffer,0,ji.byteLength>>2),Ui=Mi.length,Hi=Vn+7>>3,Li=4294967295,Ei=Kn.FeatureTest.isLittleEndian?4278190080:255;for(Pi=0;Pi<bi;Pi++){for(Si=Pi<ci?ui:Yn,zi=0,Ni=0;Ni<Si;Ni++){const $i=Ri-Fi;let Bi=0;const Oi=$i>Hi?Vn:$i*8-7,Xi=Oi&-8;let Gi=0,qi=0;for(;Bi<Xi;Bi+=8)qi=_i[Fi++],Mi[zi++]=qi&128?Li:Ei,Mi[zi++]=qi&64?Li:Ei,Mi[zi++]=qi&32?Li:Ei,Mi[zi++]=qi&16?Li:Ei,Mi[zi++]=qi&8?Li:Ei,Mi[zi++]=qi&4?Li:Ei,Mi[zi++]=qi&2?Li:Ei,Mi[zi++]=qi&1?Li:Ei;for(;Bi<Oi;Bi++)Gi===0&&(qi=_i[Fi++],Gi=128),Mi[zi++]=qi&Gi?Li:Ei,Gi>>=1}for(;zi<Ui;)Mi[zi++]=0;xi.putImageData(Ci,0,Pi*ui)}}else if(Qn.kind===Kn.ImageKind.RGBA_32BPP){for(Ni=0,Ti=Vn*ui*4,Pi=0;Pi<ci;Pi++)ji.set(_i.subarray(Fi,Fi+Ti)),Fi+=Ti,xi.putImageData(Ci,0,Ni),Ni+=ui;Pi<bi&&(Ti=Vn*Yn*4,ji.set(_i.subarray(Fi,Fi+Ti)),xi.putImageData(Ci,0,Ni))}else if(Qn.kind===Kn.ImageKind.RGB_24BPP)for(Si=ui,Ti=Vn*Si,Pi=0;Pi<bi;Pi++){for(Pi>=ci&&(Si=Yn,Ti=Vn*Si),zi=0,Ni=Ti;Ni--;)ji[zi++]=_i[Fi++],ji[zi++]=_i[Fi++],ji[zi++]=_i[Fi++],ji[zi++]=255;xi.putImageData(Ci,0,Pi*ui)}else throw new Error(`bad image kind: ${Qn.kind}`)}function hi(xi,Qn){if(Qn.bitmap){xi.drawImage(Qn.bitmap,0,0);return}const ai=Qn.height,Vn=Qn.width,Yn=ai%ui,ci=(ai-Yn)/ui,bi=Yn===0?ci:ci+1,Ci=xi.createImageData(Vn,ui);let Fi=0;const zi=Qn.data,_i=Ci.data;for(let ji=0;ji<bi;ji++){const Pi=ji<ci?ui:Yn;({srcPos:Fi}=(0,ti.convertBlackAndWhiteToRGBA)({src:zi,srcPos:Fi,dest:_i,width:Vn,height:Pi,nonBlackColor:0})),xi.putImageData(Ci,0,ji*ui)}}function Xn(xi,Qn){const ai=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const Vn of ai)xi[Vn]!==void 0&&(Qn[Vn]=xi[Vn]);xi.setLineDash!==void 0&&(Qn.setLineDash(xi.getLineDash()),Qn.lineDashOffset=xi.lineDashOffset)}function ii(xi){if(xi.strokeStyle=xi.fillStyle="#000000",xi.fillRule="nonzero",xi.globalAlpha=1,xi.lineWidth=1,xi.lineCap="butt",xi.lineJoin="miter",xi.miterLimit=10,xi.globalCompositeOperation="source-over",xi.font="10px sans-serif",xi.setLineDash!==void 0&&(xi.setLineDash([]),xi.lineDashOffset=0),!Kn.isNodeJS){const{filter:Qn}=xi;Qn!=="none"&&Qn!==""&&(xi.filter="none")}}function ri(xi,Qn,ai,Vn){const Yn=xi.length;for(let ci=3;ci<Yn;ci+=4){const bi=xi[ci];if(bi===0)xi[ci-3]=Qn,xi[ci-2]=ai,xi[ci-1]=Vn;else if(bi<255){const Ci=255-bi;xi[ci-3]=xi[ci-3]*bi+Qn*Ci>>8,xi[ci-2]=xi[ci-2]*bi+ai*Ci>>8,xi[ci-1]=xi[ci-1]*bi+Vn*Ci>>8}}}function di(xi,Qn,ai){const Vn=xi.length,Yn=1/255;for(let ci=3;ci<Vn;ci+=4){const bi=ai?ai[xi[ci]]:xi[ci];Qn[ci]=Qn[ci]*bi*Yn|0}}function fi(xi,Qn,ai){const Vn=xi.length;for(let Yn=3;Yn<Vn;Yn+=4){const ci=xi[Yn-3]*77+xi[Yn-2]*152+xi[Yn-1]*28;Qn[Yn]=ai?Qn[Yn]*ai[ci>>8]>>8:Qn[Yn]*ci>>16}}function wi(xi,Qn,ai,Vn,Yn,ci,bi,Ci,Fi,zi,_i){const ji=!!ci,Pi=ji?ci[0]:0,Ni=ji?ci[1]:0,Si=ji?ci[2]:0,Ti=Yn==="Luminosity"?fi:di,Mi=Math.min(Vn,Math.ceil(1048576/ai));for(let Ui=0;Ui<Vn;Ui+=Mi){const Hi=Math.min(Mi,Vn-Ui),Li=xi.getImageData(Ci-zi,Ui+(Fi-_i),ai,Hi),Ei=Qn.getImageData(Ci,Ui+Fi,ai,Hi);ji&&ri(Li.data,Pi,Ni,Si),Ti(Li.data,Ei.data,bi),Qn.putImageData(Ei,Ci,Ui+Fi)}}function Jn(xi,Qn,ai,Vn){const Yn=Vn[0],ci=Vn[1],bi=Vn[2]-Yn,Ci=Vn[3]-ci;bi===0||Ci===0||(wi(Qn.context,ai,bi,Ci,Qn.subtype,Qn.backdrop,Qn.transferMap,Yn,ci,Qn.offsetX,Qn.offsetY),xi.save(),xi.globalAlpha=1,xi.globalCompositeOperation="source-over",xi.setTransform(1,0,0,1,0,0),xi.drawImage(ai.canvas,0,0),xi.restore())}function pi(xi,Qn){const ai=Kn.Util.singularValueDecompose2dScale(xi);ai[0]=Math.fround(ai[0]),ai[1]=Math.fround(ai[1]);const Vn=Math.fround((globalThis.devicePixelRatio||1)*oi.PixelsPerInch.PDF_TO_CSS_UNITS);return Qn!==void 0?Qn:ai[0]<=Vn||ai[1]<=Vn}const Zn=["butt","round","square"],Gn=["miter","round","bevel"],mi={},Wn={},Ii=class Ii{constructor(Qn,ai,Vn,Yn,ci,{optionalContentConfig:bi,markedContentStack:Ci=null},Fi,zi){Ki(this,li);Ki(this,gi);this.ctx=Qn,this.current=new Hn(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=ai,this.objs=Vn,this.canvasFactory=Yn,this.filterFactory=ci,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Ci||[],this.optionalContentConfig=bi,this.cachedCanvases=new ei(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Fi,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=zi,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(Qn,ai=null){return typeof Qn=="string"?Qn.startsWith("g_")?this.commonObjs.get(Qn):this.objs.get(Qn):ai}beginDrawing({transform:Qn,viewport:ai,transparency:Vn=!1,background:Yn=null}){const ci=this.ctx.canvas.width,bi=this.ctx.canvas.height,Ci=this.ctx.fillStyle;if(this.ctx.fillStyle=Yn||"#ffffff",this.ctx.fillRect(0,0,ci,bi),this.ctx.fillStyle=Ci,Vn){const Fi=this.cachedCanvases.getCanvas("transparent",ci,bi);this.compositeCtx=this.ctx,this.transparentCanvas=Fi.canvas,this.ctx=Fi.context,this.ctx.save(),this.ctx.transform(...(0,oi.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),ii(this.ctx),Qn&&(this.ctx.transform(...Qn),this.outputScaleX=Qn[0],this.outputScaleY=Qn[0]),this.ctx.transform(...ai.transform),this.viewportScale=ai.scale,this.baseTransform=(0,oi.getCurrentTransform)(this.ctx)}executeOperatorList(Qn,ai,Vn,Yn){const ci=Qn.argsArray,bi=Qn.fnArray;let Ci=ai||0;const Fi=ci.length;if(Fi===Ci)return Ci;const zi=Fi-Ci>Tn&&typeof Vn=="function",_i=zi?Date.now()+Cn:0;let ji=0;const Pi=this.commonObjs,Ni=this.objs;let Si;for(;;){if(Yn!==void 0&&Ci===Yn.nextBreakPoint)return Yn.breakIt(Ci,Vn),Ci;if(Si=bi[Ci],Si!==Kn.OPS.dependency)this[Si].apply(this,ci[Ci]);else for(const Ti of ci[Ci]){const Ri=Ti.startsWith("g_")?Pi:Ni;if(!Ri.has(Ti))return Ri.get(Ti,Vn),Ci}if(Ci++,Ci===Fi)return Ci;if(zi&&++ji>Tn){if(Date.now()>_i)return Vn(),Ci;ji=0}}}endDrawing(){Qi(this,li,ml).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const Qn of this._cachedBitmapsMap.values()){for(const ai of Qn.values())typeof HTMLCanvasElement<"u"&&ai instanceof HTMLCanvasElement&&(ai.width=ai.height=0);Qn.clear()}this._cachedBitmapsMap.clear(),Qi(this,gi,xl).call(this)}_scaleImage(Qn,ai){const Vn=Qn.width,Yn=Qn.height;let ci=Math.max(Math.hypot(ai[0],ai[1]),1),bi=Math.max(Math.hypot(ai[2],ai[3]),1),Ci=Vn,Fi=Yn,zi="prescale1",_i,ji;for(;ci>2&&Ci>1||bi>2&&Fi>1;){let Pi=Ci,Ni=Fi;ci>2&&Ci>1&&(Pi=Ci>=16384?Math.floor(Ci/2)-1||1:Math.ceil(Ci/2),ci/=Ci/Pi),bi>2&&Fi>1&&(Ni=Fi>=16384?Math.floor(Fi/2)-1||1:Math.ceil(Fi)/2,bi/=Fi/Ni),_i=this.cachedCanvases.getCanvas(zi,Pi,Ni),ji=_i.context,ji.clearRect(0,0,Pi,Ni),ji.drawImage(Qn,0,0,Ci,Fi,0,0,Pi,Ni),Qn=_i.canvas,Ci=Pi,Fi=Ni,zi=zi==="prescale1"?"prescale2":"prescale1"}return{img:Qn,paintWidth:Ci,paintHeight:Fi}}_createMaskCanvas(Qn){const ai=this.ctx,{width:Vn,height:Yn}=Qn,ci=this.current.fillColor,bi=this.current.patternFill,Ci=(0,oi.getCurrentTransform)(ai);let Fi,zi,_i,ji;if((Qn.bitmap||Qn.data)&&Qn.count>1){const Bi=Qn.bitmap||Qn.data.buffer;zi=JSON.stringify(bi?Ci:[Ci.slice(0,4),ci]),Fi=this._cachedBitmapsMap.get(Bi),Fi||(Fi=new Map,this._cachedBitmapsMap.set(Bi,Fi));const Oi=Fi.get(zi);if(Oi&&!bi){const Xi=Math.round(Math.min(Ci[0],Ci[2])+Ci[4]),Gi=Math.round(Math.min(Ci[1],Ci[3])+Ci[5]);return{canvas:Oi,offsetX:Xi,offsetY:Gi}}_i=Oi}_i||(ji=this.cachedCanvases.getCanvas("maskCanvas",Vn,Yn),hi(ji.context,Qn));let Pi=Kn.Util.transform(Ci,[1/Vn,0,0,-1/Yn,0,0]);Pi=Kn.Util.transform(Pi,[1,0,0,1,0,-Yn]);const Ni=Kn.Util.applyTransform([0,0],Pi),Si=Kn.Util.applyTransform([Vn,Yn],Pi),Ti=Kn.Util.normalizeRect([Ni[0],Ni[1],Si[0],Si[1]]),Ri=Math.round(Ti[2]-Ti[0])||1,Mi=Math.round(Ti[3]-Ti[1])||1,Ui=this.cachedCanvases.getCanvas("fillCanvas",Ri,Mi),Hi=Ui.context,Li=Math.min(Ni[0],Si[0]),Ei=Math.min(Ni[1],Si[1]);Hi.translate(-Li,-Ei),Hi.transform(...Pi),_i||(_i=this._scaleImage(ji.canvas,(0,oi.getCurrentTransformInverse)(Hi)),_i=_i.img,Fi&&bi&&Fi.set(zi,_i)),Hi.imageSmoothingEnabled=pi((0,oi.getCurrentTransform)(Hi),Qn.interpolate),Bn(Hi,_i,0,0,_i.width,_i.height,0,0,Vn,Yn),Hi.globalCompositeOperation="source-in";const $i=Kn.Util.transform((0,oi.getCurrentTransformInverse)(Hi),[1,0,0,1,-Li,-Ei]);return Hi.fillStyle=bi?ci.getPattern(ai,this,$i,Mn.PathType.FILL):ci,Hi.fillRect(0,0,Vn,Yn),Fi&&!bi&&(this.cachedCanvases.delete("fillCanvas"),Fi.set(zi,Ui.canvas)),{canvas:Ui.canvas,offsetX:Math.round(Li),offsetY:Math.round(Ei)}}setLineWidth(Qn){Qn!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=Qn,this.ctx.lineWidth=Qn}setLineCap(Qn){this.ctx.lineCap=Zn[Qn]}setLineJoin(Qn){this.ctx.lineJoin=Gn[Qn]}setMiterLimit(Qn){this.ctx.miterLimit=Qn}setDash(Qn,ai){const Vn=this.ctx;Vn.setLineDash!==void 0&&(Vn.setLineDash(Qn),Vn.lineDashOffset=ai)}setRenderingIntent(Qn){}setFlatness(Qn){}setGState(Qn){for(const[ai,Vn]of Qn)switch(ai){case"LW":this.setLineWidth(Vn);break;case"LC":this.setLineCap(Vn);break;case"LJ":this.setLineJoin(Vn);break;case"ML":this.setMiterLimit(Vn);break;case"D":this.setDash(Vn[0],Vn[1]);break;case"RI":this.setRenderingIntent(Vn);break;case"FL":this.setFlatness(Vn);break;case"Font":this.setFont(Vn[0],Vn[1]);break;case"CA":this.current.strokeAlpha=Vn;break;case"ca":this.current.fillAlpha=Vn,this.ctx.globalAlpha=Vn;break;case"BM":this.ctx.globalCompositeOperation=Vn;break;case"SMask":this.current.activeSMask=Vn?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(Vn);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const Qn=this.inSMaskMode;this.current.activeSMask&&!Qn?this.beginSMaskMode():!this.current.activeSMask&&Qn&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const Qn=this.ctx.canvas.width,ai=this.ctx.canvas.height,Vn="smaskGroupAt"+this.groupLevel,Yn=this.cachedCanvases.getCanvas(Vn,Qn,ai);this.suspendedCtx=this.ctx,this.ctx=Yn.context;const ci=this.ctx;ci.setTransform(...(0,oi.getCurrentTransform)(this.suspendedCtx)),Xn(this.suspendedCtx,ci),si(ci,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Xn(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(Qn){if(!this.current.activeSMask)return;Qn?(Qn[0]=Math.floor(Qn[0]),Qn[1]=Math.floor(Qn[1]),Qn[2]=Math.ceil(Qn[2]),Qn[3]=Math.ceil(Qn[3])):Qn=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const ai=this.current.activeSMask,Vn=this.suspendedCtx;Jn(Vn,ai,this.ctx,Qn),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(Xn(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const Qn=this.current;this.stateStack.push(Qn),this.current=Qn.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Xn(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(Qn,ai,Vn,Yn,ci,bi){this.ctx.transform(Qn,ai,Vn,Yn,ci,bi),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(Qn,ai,Vn){const Yn=this.ctx,ci=this.current;let bi=ci.x,Ci=ci.y,Fi,zi;const _i=(0,oi.getCurrentTransform)(Yn),ji=_i[0]===0&&_i[3]===0||_i[1]===0&&_i[2]===0,Pi=ji?Vn.slice(0):null;for(let Ni=0,Si=0,Ti=Qn.length;Ni<Ti;Ni++)switch(Qn[Ni]|0){case Kn.OPS.rectangle:bi=ai[Si++],Ci=ai[Si++];const Ri=ai[Si++],Mi=ai[Si++],Ui=bi+Ri,Hi=Ci+Mi;Yn.moveTo(bi,Ci),Ri===0||Mi===0?Yn.lineTo(Ui,Hi):(Yn.lineTo(Ui,Ci),Yn.lineTo(Ui,Hi),Yn.lineTo(bi,Hi)),ji||ci.updateRectMinMax(_i,[bi,Ci,Ui,Hi]),Yn.closePath();break;case Kn.OPS.moveTo:bi=ai[Si++],Ci=ai[Si++],Yn.moveTo(bi,Ci),ji||ci.updatePathMinMax(_i,bi,Ci);break;case Kn.OPS.lineTo:bi=ai[Si++],Ci=ai[Si++],Yn.lineTo(bi,Ci),ji||ci.updatePathMinMax(_i,bi,Ci);break;case Kn.OPS.curveTo:Fi=bi,zi=Ci,bi=ai[Si+4],Ci=ai[Si+5],Yn.bezierCurveTo(ai[Si],ai[Si+1],ai[Si+2],ai[Si+3],bi,Ci),ci.updateCurvePathMinMax(_i,Fi,zi,ai[Si],ai[Si+1],ai[Si+2],ai[Si+3],bi,Ci,Pi),Si+=6;break;case Kn.OPS.curveTo2:Fi=bi,zi=Ci,Yn.bezierCurveTo(bi,Ci,ai[Si],ai[Si+1],ai[Si+2],ai[Si+3]),ci.updateCurvePathMinMax(_i,Fi,zi,bi,Ci,ai[Si],ai[Si+1],ai[Si+2],ai[Si+3],Pi),bi=ai[Si+2],Ci=ai[Si+3],Si+=4;break;case Kn.OPS.curveTo3:Fi=bi,zi=Ci,bi=ai[Si+2],Ci=ai[Si+3],Yn.bezierCurveTo(ai[Si],ai[Si+1],bi,Ci,bi,Ci),ci.updateCurvePathMinMax(_i,Fi,zi,ai[Si],ai[Si+1],bi,Ci,bi,Ci,Pi),Si+=4;break;case Kn.OPS.closePath:Yn.closePath();break}ji&&ci.updateScalingPathMinMax(_i,Pi),ci.setCurrentPoint(bi,Ci)}closePath(){this.ctx.closePath()}stroke(Qn=!0){const ai=this.ctx,Vn=this.current.strokeColor;ai.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof Vn=="object"&&(Vn!=null&&Vn.getPattern)?(ai.save(),ai.strokeStyle=Vn.getPattern(ai,this,(0,oi.getCurrentTransformInverse)(ai),Mn.PathType.STROKE),this.rescaleAndStroke(!1),ai.restore()):this.rescaleAndStroke(!0)),Qn&&this.consumePath(this.current.getClippedPathBoundingBox()),ai.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(Qn=!0){const ai=this.ctx,Vn=this.current.fillColor,Yn=this.current.patternFill;let ci=!1;Yn&&(ai.save(),ai.fillStyle=Vn.getPattern(ai,this,(0,oi.getCurrentTransformInverse)(ai),Mn.PathType.FILL),ci=!0);const bi=this.current.getClippedPathBoundingBox();this.contentVisible&&bi!==null&&(this.pendingEOFill?(ai.fill("evenodd"),this.pendingEOFill=!1):ai.fill()),ci&&ai.restore(),Qn&&this.consumePath(bi)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=mi}eoClip(){this.pendingClip=Wn}beginText(){this.current.textMatrix=Kn.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const Qn=this.pendingTextPaths,ai=this.ctx;if(Qn===void 0){ai.beginPath();return}ai.save(),ai.beginPath();for(const Vn of Qn)ai.setTransform(...Vn.transform),ai.translate(Vn.x,Vn.y),Vn.addToPath(ai,Vn.fontSize);ai.restore(),ai.clip(),ai.beginPath(),delete this.pendingTextPaths}setCharSpacing(Qn){this.current.charSpacing=Qn}setWordSpacing(Qn){this.current.wordSpacing=Qn}setHScale(Qn){this.current.textHScale=Qn/100}setLeading(Qn){this.current.leading=-Qn}setFont(Qn,ai){var _i;const Vn=this.commonObjs.get(Qn),Yn=this.current;if(!Vn)throw new Error(`Can't find font for ${Qn}`);if(Yn.fontMatrix=Vn.fontMatrix||Kn.FONT_IDENTITY_MATRIX,(Yn.fontMatrix[0]===0||Yn.fontMatrix[3]===0)&&(0,Kn.warn)("Invalid font matrix for font "+Qn),ai<0?(ai=-ai,Yn.fontDirection=-1):Yn.fontDirection=1,this.current.font=Vn,this.current.fontSize=ai,Vn.isType3Font)return;const ci=Vn.loadedName||"sans-serif",bi=((_i=Vn.systemFontInfo)==null?void 0:_i.css)||`"${ci}", ${Vn.fallbackName}`;let Ci="normal";Vn.black?Ci="900":Vn.bold&&(Ci="bold");const Fi=Vn.italic?"italic":"normal";let zi=ai;ai<In?zi=In:ai>Ln&&(zi=Ln),this.current.fontSizeScale=ai/zi,this.ctx.font=`${Fi} ${Ci} ${zi}px ${bi}`}setTextRenderingMode(Qn){this.current.textRenderingMode=Qn}setTextRise(Qn){this.current.textRise=Qn}moveText(Qn,ai){this.current.x=this.current.lineX+=Qn,this.current.y=this.current.lineY+=ai}setLeadingMoveText(Qn,ai){this.setLeading(-ai),this.moveText(Qn,ai)}setTextMatrix(Qn,ai,Vn,Yn,ci,bi){this.current.textMatrix=[Qn,ai,Vn,Yn,ci,bi],this.current.textMatrixScale=Math.hypot(Qn,ai),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(Qn,ai,Vn,Yn){const ci=this.ctx,bi=this.current,Ci=bi.font,Fi=bi.textRenderingMode,zi=bi.fontSize/bi.fontSizeScale,_i=Fi&Kn.TextRenderingMode.FILL_STROKE_MASK,ji=!!(Fi&Kn.TextRenderingMode.ADD_TO_PATH_FLAG),Pi=bi.patternFill&&!Ci.missingFile;let Ni;(Ci.disableFontFace||ji||Pi)&&(Ni=Ci.getPathGenerator(this.commonObjs,Qn)),Ci.disableFontFace||Pi?(ci.save(),ci.translate(ai,Vn),ci.beginPath(),Ni(ci,zi),Yn&&ci.setTransform(...Yn),(_i===Kn.TextRenderingMode.FILL||_i===Kn.TextRenderingMode.FILL_STROKE)&&ci.fill(),(_i===Kn.TextRenderingMode.STROKE||_i===Kn.TextRenderingMode.FILL_STROKE)&&ci.stroke(),ci.restore()):((_i===Kn.TextRenderingMode.FILL||_i===Kn.TextRenderingMode.FILL_STROKE)&&ci.fillText(Qn,ai,Vn),(_i===Kn.TextRenderingMode.STROKE||_i===Kn.TextRenderingMode.FILL_STROKE)&&ci.strokeText(Qn,ai,Vn)),ji&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,oi.getCurrentTransform)(ci),x:ai,y:Vn,fontSize:zi,addToPath:Ni})}get isFontSubpixelAAEnabled(){const{context:Qn}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);Qn.scale(1.5,1),Qn.fillText("I",0,10);const ai=Qn.getImageData(0,0,10,10).data;let Vn=!1;for(let Yn=3;Yn<ai.length;Yn+=4)if(ai[Yn]>0&&ai[Yn]<255){Vn=!0;break}return(0,Kn.shadow)(this,"isFontSubpixelAAEnabled",Vn)}showText(Qn){const ai=this.current,Vn=ai.font;if(Vn.isType3Font)return this.showType3Text(Qn);const Yn=ai.fontSize;if(Yn===0)return;const ci=this.ctx,bi=ai.fontSizeScale,Ci=ai.charSpacing,Fi=ai.wordSpacing,zi=ai.fontDirection,_i=ai.textHScale*zi,ji=Qn.length,Pi=Vn.vertical,Ni=Pi?1:-1,Si=Vn.defaultVMetrics,Ti=Yn*ai.fontMatrix[0],Ri=ai.textRenderingMode===Kn.TextRenderingMode.FILL&&!Vn.disableFontFace&&!ai.patternFill;ci.save(),ci.transform(...ai.textMatrix),ci.translate(ai.x,ai.y+ai.textRise),zi>0?ci.scale(_i,-1):ci.scale(_i,1);let Mi;if(ai.patternFill){ci.save();const $i=ai.fillColor.getPattern(ci,this,(0,oi.getCurrentTransformInverse)(ci),Mn.PathType.FILL);Mi=(0,oi.getCurrentTransform)(ci),ci.restore(),ci.fillStyle=$i}let Ui=ai.lineWidth;const Hi=ai.textMatrixScale;if(Hi===0||Ui===0){const $i=ai.textRenderingMode&Kn.TextRenderingMode.FILL_STROKE_MASK;($i===Kn.TextRenderingMode.STROKE||$i===Kn.TextRenderingMode.FILL_STROKE)&&(Ui=this.getSinglePixelWidth())}else Ui/=Hi;if(bi!==1&&(ci.scale(bi,bi),Ui/=bi),ci.lineWidth=Ui,Vn.isInvalidPDFjsFont){const $i=[];let Bi=0;for(const Oi of Qn)$i.push(Oi.unicode),Bi+=Oi.width;ci.fillText($i.join(""),0,0),ai.x+=Bi*Ti*_i,ci.restore(),this.compose();return}let Li=0,Ei;for(Ei=0;Ei<ji;++Ei){const $i=Qn[Ei];if(typeof $i=="number"){Li+=Ni*$i*Yn/1e3;continue}let Bi=!1;const Oi=($i.isSpace?Fi:0)+Ci,Xi=$i.fontChar,Gi=$i.accent;let qi,ns,is=$i.width;if(Pi){const hs=$i.vmetric||Si,Yi=-($i.vmetric?hs[1]:is*.5)*Ti,Vi=hs[2]*Ti;is=hs?-hs[0]:is,qi=Yi/bi,ns=(Li+Vi)/bi}else qi=Li/bi,ns=0;if(Vn.remeasure&&is>0){const hs=ci.measureText(Xi).width*1e3/Yn*bi;if(is<hs&&this.isFontSubpixelAAEnabled){const Yi=is/hs;Bi=!0,ci.save(),ci.scale(Yi,1),qi/=Yi}else is!==hs&&(qi+=(is-hs)/2e3*Yn/bi)}if(this.contentVisible&&($i.isInFont||Vn.missingFile)){if(Ri&&!Gi)ci.fillText(Xi,qi,ns);else if(this.paintChar(Xi,qi,ns,Mi),Gi){const hs=qi+Yn*Gi.offset.x/bi,Yi=ns-Yn*Gi.offset.y/bi;this.paintChar(Gi.fontChar,hs,Yi,Mi)}}const as=Pi?is*Ti-Oi*zi:is*Ti+Oi*zi;Li+=as,Bi&&ci.restore()}Pi?ai.y-=Li:ai.x+=Li*_i,ci.restore(),this.compose()}showType3Text(Qn){const ai=this.ctx,Vn=this.current,Yn=Vn.font,ci=Vn.fontSize,bi=Vn.fontDirection,Ci=Yn.vertical?1:-1,Fi=Vn.charSpacing,zi=Vn.wordSpacing,_i=Vn.textHScale*bi,ji=Vn.fontMatrix||Kn.FONT_IDENTITY_MATRIX,Pi=Qn.length,Ni=Vn.textRenderingMode===Kn.TextRenderingMode.INVISIBLE;let Si,Ti,Ri,Mi;if(!(Ni||ci===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,ai.save(),ai.transform(...Vn.textMatrix),ai.translate(Vn.x,Vn.y),ai.scale(_i,bi),Si=0;Si<Pi;++Si){if(Ti=Qn[Si],typeof Ti=="number"){Mi=Ci*Ti*ci/1e3,this.ctx.translate(Mi,0),Vn.x+=Mi*_i;continue}const Ui=(Ti.isSpace?zi:0)+Fi,Hi=Yn.charProcOperatorList[Ti.operatorListId];if(!Hi){(0,Kn.warn)(`Type3 character "${Ti.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Ti,this.save(),ai.scale(ci,ci),ai.transform(...ji),this.executeOperatorList(Hi),this.restore()),Ri=Kn.Util.applyTransform([Ti.width,0],ji)[0]*ci+Ui,ai.translate(Ri,0),Vn.x+=Ri*_i}ai.restore(),this.processingType3=null}}setCharWidth(Qn,ai){}setCharWidthAndBounds(Qn,ai,Vn,Yn,ci,bi){this.ctx.rect(Vn,Yn,ci-Vn,bi-Yn),this.ctx.clip(),this.endPath()}getColorN_Pattern(Qn){let ai;if(Qn[0]==="TilingPattern"){const Vn=Qn[1],Yn=this.baseTransform||(0,oi.getCurrentTransform)(this.ctx),ci={createCanvasGraphics:bi=>new Ii(bi,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};ai=new Mn.TilingPattern(Qn,Vn,this.ctx,ci,Yn)}else ai=this._getPattern(Qn[1],Qn[2]);return ai}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(Qn,ai,Vn){const Yn=Kn.Util.makeHexColor(Qn,ai,Vn);this.ctx.strokeStyle=Yn,this.current.strokeColor=Yn}setFillRGBColor(Qn,ai,Vn){const Yn=Kn.Util.makeHexColor(Qn,ai,Vn);this.ctx.fillStyle=Yn,this.current.fillColor=Yn,this.current.patternFill=!1}_getPattern(Qn,ai=null){let Vn;return this.cachedPatterns.has(Qn)?Vn=this.cachedPatterns.get(Qn):(Vn=(0,Mn.getShadingPattern)(this.getObject(Qn)),this.cachedPatterns.set(Qn,Vn)),ai&&(Vn.matrix=ai),Vn}shadingFill(Qn){if(!this.contentVisible)return;const ai=this.ctx;this.save();const Vn=this._getPattern(Qn);ai.fillStyle=Vn.getPattern(ai,this,(0,oi.getCurrentTransformInverse)(ai),Mn.PathType.SHADING);const Yn=(0,oi.getCurrentTransformInverse)(ai);if(Yn){const{width:ci,height:bi}=ai.canvas,[Ci,Fi,zi,_i]=Kn.Util.getAxialAlignedBoundingBox([0,0,ci,bi],Yn);this.ctx.fillRect(Ci,Fi,zi-Ci,_i-Fi)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,Kn.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,Kn.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(Qn,ai){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(Qn)&&Qn.length===6&&this.transform(...Qn),this.baseTransform=(0,oi.getCurrentTransform)(this.ctx),ai)){const Vn=ai[2]-ai[0],Yn=ai[3]-ai[1];this.ctx.rect(ai[0],ai[1],Vn,Yn),this.current.updateRectMinMax((0,oi.getCurrentTransform)(this.ctx),ai),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(Qn){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const ai=this.ctx;Qn.isolated||(0,Kn.info)("TODO: Support non-isolated groups."),Qn.knockout&&(0,Kn.warn)("Knockout groups not supported.");const Vn=(0,oi.getCurrentTransform)(ai);if(Qn.matrix&&ai.transform(...Qn.matrix),!Qn.bbox)throw new Error("Bounding box is required.");let Yn=Kn.Util.getAxialAlignedBoundingBox(Qn.bbox,(0,oi.getCurrentTransform)(ai));const ci=[0,0,ai.canvas.width,ai.canvas.height];Yn=Kn.Util.intersect(Yn,ci)||[0,0,0,0];const bi=Math.floor(Yn[0]),Ci=Math.floor(Yn[1]);let Fi=Math.max(Math.ceil(Yn[2])-bi,1),zi=Math.max(Math.ceil(Yn[3])-Ci,1),_i=1,ji=1;Fi>jn&&(_i=Fi/jn,Fi=jn),zi>jn&&(ji=zi/jn,zi=jn),this.current.startNewPathAndClipBox([0,0,Fi,zi]);let Pi="groupAt"+this.groupLevel;Qn.smask&&(Pi+="_smask_"+this.smaskCounter++%2);const Ni=this.cachedCanvases.getCanvas(Pi,Fi,zi),Si=Ni.context;Si.scale(1/_i,1/ji),Si.translate(-bi,-Ci),Si.transform(...Vn),Qn.smask?this.smaskStack.push({canvas:Ni.canvas,context:Si,offsetX:bi,offsetY:Ci,scaleX:_i,scaleY:ji,subtype:Qn.smask.subtype,backdrop:Qn.smask.backdrop,transferMap:Qn.smask.transferMap||null,startTransformInverse:null}):(ai.setTransform(1,0,0,1,0,0),ai.translate(bi,Ci),ai.scale(_i,ji),ai.save()),Xn(ai,Si),this.ctx=Si,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(ai),this.groupLevel++}endGroup(Qn){if(!this.contentVisible)return;this.groupLevel--;const ai=this.ctx,Vn=this.groupStack.pop();if(this.ctx=Vn,this.ctx.imageSmoothingEnabled=!1,Qn.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const Yn=(0,oi.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...Yn);const ci=Kn.Util.getAxialAlignedBoundingBox([0,0,ai.canvas.width,ai.canvas.height],Yn);this.ctx.drawImage(ai.canvas,0,0),this.ctx.restore(),this.compose(ci)}}beginAnnotation(Qn,ai,Vn,Yn,ci){if(Qi(this,li,ml).call(this),ii(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(ai)&&ai.length===4){const bi=ai[2]-ai[0],Ci=ai[3]-ai[1];if(ci&&this.annotationCanvasMap){Vn=Vn.slice(),Vn[4]-=ai[0],Vn[5]-=ai[1],ai=ai.slice(),ai[0]=ai[1]=0,ai[2]=bi,ai[3]=Ci;const[Fi,zi]=Kn.Util.singularValueDecompose2dScale((0,oi.getCurrentTransform)(this.ctx)),{viewportScale:_i}=this,ji=Math.ceil(bi*this.outputScaleX*_i),Pi=Math.ceil(Ci*this.outputScaleY*_i);this.annotationCanvas=this.canvasFactory.create(ji,Pi);const{canvas:Ni,context:Si}=this.annotationCanvas;this.annotationCanvasMap.set(Qn,Ni),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Si,this.ctx.save(),this.ctx.setTransform(Fi,0,0,-zi,0,Ci*zi),ii(this.ctx)}else ii(this.ctx),this.ctx.rect(ai[0],ai[1],bi,Ci),this.ctx.clip(),this.endPath()}this.current=new Hn(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...Vn),this.transform(...Yn)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Qi(this,gi,xl).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(Qn){if(!this.contentVisible)return;const ai=Qn.count;Qn=this.getObject(Qn.data,Qn),Qn.count=ai;const Vn=this.ctx,Yn=this.processingType3;if(Yn&&(Yn.compiled===void 0&&(Yn.compiled=Nn(Qn)),Yn.compiled)){Yn.compiled(Vn);return}const ci=this._createMaskCanvas(Qn),bi=ci.canvas;Vn.save(),Vn.setTransform(1,0,0,1,0,0),Vn.drawImage(bi,ci.offsetX,ci.offsetY),Vn.restore(),this.compose()}paintImageMaskXObjectRepeat(Qn,ai,Vn=0,Yn=0,ci,bi){if(!this.contentVisible)return;Qn=this.getObject(Qn.data,Qn);const Ci=this.ctx;Ci.save();const Fi=(0,oi.getCurrentTransform)(Ci);Ci.transform(ai,Vn,Yn,ci,0,0);const zi=this._createMaskCanvas(Qn);Ci.setTransform(1,0,0,1,zi.offsetX-Fi[4],zi.offsetY-Fi[5]);for(let _i=0,ji=bi.length;_i<ji;_i+=2){const Pi=Kn.Util.transform(Fi,[ai,Vn,Yn,ci,bi[_i],bi[_i+1]]),[Ni,Si]=Kn.Util.applyTransform([0,0],Pi);Ci.drawImage(zi.canvas,Ni,Si)}Ci.restore(),this.compose()}paintImageMaskXObjectGroup(Qn){if(!this.contentVisible)return;const ai=this.ctx,Vn=this.current.fillColor,Yn=this.current.patternFill;for(const ci of Qn){const{data:bi,width:Ci,height:Fi,transform:zi}=ci,_i=this.cachedCanvases.getCanvas("maskCanvas",Ci,Fi),ji=_i.context;ji.save();const Pi=this.getObject(bi,ci);hi(ji,Pi),ji.globalCompositeOperation="source-in",ji.fillStyle=Yn?Vn.getPattern(ji,this,(0,oi.getCurrentTransformInverse)(ai),Mn.PathType.FILL):Vn,ji.fillRect(0,0,Ci,Fi),ji.restore(),ai.save(),ai.transform(...zi),ai.scale(1,-1),Bn(ai,_i.canvas,0,0,Ci,Fi,0,-1,1,1),ai.restore()}this.compose()}paintImageXObject(Qn){if(!this.contentVisible)return;const ai=this.getObject(Qn);if(!ai){(0,Kn.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(ai)}paintImageXObjectRepeat(Qn,ai,Vn,Yn){if(!this.contentVisible)return;const ci=this.getObject(Qn);if(!ci){(0,Kn.warn)("Dependent image isn't ready yet");return}const bi=ci.width,Ci=ci.height,Fi=[];for(let zi=0,_i=Yn.length;zi<_i;zi+=2)Fi.push({transform:[ai,0,0,Vn,Yn[zi],Yn[zi+1]],x:0,y:0,w:bi,h:Ci});this.paintInlineImageXObjectGroup(ci,Fi)}applyTransferMapsToCanvas(Qn){return this.current.transferMaps!=="none"&&(Qn.filter=this.current.transferMaps,Qn.drawImage(Qn.canvas,0,0),Qn.filter="none"),Qn.canvas}applyTransferMapsToBitmap(Qn){if(this.current.transferMaps==="none")return Qn.bitmap;const{bitmap:ai,width:Vn,height:Yn}=Qn,ci=this.cachedCanvases.getCanvas("inlineImage",Vn,Yn),bi=ci.context;return bi.filter=this.current.transferMaps,bi.drawImage(ai,0,0),bi.filter="none",ci.canvas}paintInlineImageXObject(Qn){if(!this.contentVisible)return;const ai=Qn.width,Vn=Qn.height,Yn=this.ctx;if(this.save(),!Kn.isNodeJS){const{filter:Ci}=Yn;Ci!=="none"&&Ci!==""&&(Yn.filter="none")}Yn.scale(1/ai,-1/Vn);let ci;if(Qn.bitmap)ci=this.applyTransferMapsToBitmap(Qn);else if(typeof HTMLElement=="function"&&Qn instanceof HTMLElement||!Qn.data)ci=Qn;else{const Fi=this.cachedCanvases.getCanvas("inlineImage",ai,Vn).context;On(Fi,Qn),ci=this.applyTransferMapsToCanvas(Fi)}const bi=this._scaleImage(ci,(0,oi.getCurrentTransformInverse)(Yn));Yn.imageSmoothingEnabled=pi((0,oi.getCurrentTransform)(Yn),Qn.interpolate),Bn(Yn,bi.img,0,0,bi.paintWidth,bi.paintHeight,0,-Vn,ai,Vn),this.compose(),this.restore()}paintInlineImageXObjectGroup(Qn,ai){if(!this.contentVisible)return;const Vn=this.ctx;let Yn;if(Qn.bitmap)Yn=Qn.bitmap;else{const ci=Qn.width,bi=Qn.height,Fi=this.cachedCanvases.getCanvas("inlineImage",ci,bi).context;On(Fi,Qn),Yn=this.applyTransferMapsToCanvas(Fi)}for(const ci of ai)Vn.save(),Vn.transform(...ci.transform),Vn.scale(1,-1),Bn(Vn,Yn,ci.x,ci.y,ci.w,ci.h,0,-1,1,1),Vn.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(Qn){}markPointProps(Qn,ai){}beginMarkedContent(Qn){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(Qn,ai){Qn==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(ai)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(Qn){const ai=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(Qn);const Vn=this.ctx;this.pendingClip&&(ai||(this.pendingClip===Wn?Vn.clip("evenodd"):Vn.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),Vn.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const Qn=(0,oi.getCurrentTransform)(this.ctx);if(Qn[1]===0&&Qn[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(Qn[0]),Math.abs(Qn[3]));else{const ai=Math.abs(Qn[0]*Qn[3]-Qn[2]*Qn[1]),Vn=Math.hypot(Qn[0],Qn[2]),Yn=Math.hypot(Qn[1],Qn[3]);this._cachedGetSinglePixelWidth=Math.max(Vn,Yn)/ai}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:Qn}=this.current,{a:ai,b:Vn,c:Yn,d:ci}=this.ctx.getTransform();let bi,Ci;if(Vn===0&&Yn===0){const Fi=Math.abs(ai),zi=Math.abs(ci);if(Fi===zi)if(Qn===0)bi=Ci=1/Fi;else{const _i=Fi*Qn;bi=Ci=_i<1?1/_i:1}else if(Qn===0)bi=1/Fi,Ci=1/zi;else{const _i=Fi*Qn,ji=zi*Qn;bi=_i<1?1/_i:1,Ci=ji<1?1/ji:1}}else{const Fi=Math.abs(ai*ci-Vn*Yn),zi=Math.hypot(ai,Vn),_i=Math.hypot(Yn,ci);if(Qn===0)bi=_i/Fi,Ci=zi/Fi;else{const ji=Qn*Fi;bi=_i>ji?_i/ji:1,Ci=zi>ji?zi/ji:1}}this._cachedScaleForStroking[0]=bi,this._cachedScaleForStroking[1]=Ci}return this._cachedScaleForStroking}rescaleAndStroke(Qn){const{ctx:ai}=this,{lineWidth:Vn}=this.current,[Yn,ci]=this.getScaleForStroking();if(ai.lineWidth=Vn||1,Yn===1&&ci===1){ai.stroke();return}const bi=ai.getLineDash();if(Qn&&ai.save(),ai.scale(Yn,ci),bi.length>0){const Ci=Math.max(Yn,ci);ai.setLineDash(bi.map(Fi=>Fi/Ci)),ai.lineDashOffset/=Ci}ai.stroke(),Qn&&ai.restore()}isContentVisible(){for(let Qn=this.markedContentStack.length-1;Qn>=0;Qn--)if(!this.markedContentStack[Qn].visible)return!1;return!0}};li=new WeakSet,ml=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},gi=new WeakSet,xl=function(){if(this.pageColors){const Qn=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(Qn!=="none"){const ai=this.ctx.filter;this.ctx.filter=Qn,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=ai}}};let ni=Ii;$n.CanvasGraphics=ni;for(const xi in Kn.OPS)ni.prototype[xi]!==void 0&&(ni.prototype[Kn.OPS[xi]]=ni.prototype[xi])},(ki,$n,Pn)=>{Object.defineProperty($n,"__esModule",{value:!0}),$n.TilingPattern=$n.PathType=void 0,$n.getShadingPattern=ui;var Kn=Pn(1),oi=Pn(6);const Mn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};$n.PathType=Mn;function ti(Nn,Hn){if(!Hn)return;const On=Hn[2]-Hn[0],hi=Hn[3]-Hn[1],Xn=new Path2D;Xn.rect(Hn[0],Hn[1],On,hi),Nn.clip(Xn)}class In{constructor(){this.constructor===In&&(0,Kn.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,Kn.unreachable)("Abstract method `getPattern` called.")}}class Ln extends In{constructor(Hn){super(),this._type=Hn[1],this._bbox=Hn[2],this._colorStops=Hn[3],this._p0=Hn[4],this._p1=Hn[5],this._r0=Hn[6],this._r1=Hn[7],this.matrix=null}_createGradient(Hn){let On;this._type==="axial"?On=Hn.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(On=Hn.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const hi of this._colorStops)On.addColorStop(hi[0],hi[1]);return On}getPattern(Hn,On,hi,Xn){let ii;if(Xn===Mn.STROKE||Xn===Mn.FILL){const ri=On.current.getClippedPathBoundingBox(Xn,(0,oi.getCurrentTransform)(Hn))||[0,0,0,0],di=Math.ceil(ri[2]-ri[0])||1,fi=Math.ceil(ri[3]-ri[1])||1,wi=On.cachedCanvases.getCanvas("pattern",di,fi,!0),Jn=wi.context;Jn.clearRect(0,0,Jn.canvas.width,Jn.canvas.height),Jn.beginPath(),Jn.rect(0,0,Jn.canvas.width,Jn.canvas.height),Jn.translate(-ri[0],-ri[1]),hi=Kn.Util.transform(hi,[1,0,0,1,ri[0],ri[1]]),Jn.transform(...On.baseTransform),this.matrix&&Jn.transform(...this.matrix),ti(Jn,this._bbox),Jn.fillStyle=this._createGradient(Jn),Jn.fill(),ii=Hn.createPattern(wi.canvas,"no-repeat");const pi=new DOMMatrix(hi);ii.setTransform(pi)}else ti(Hn,this._bbox),ii=this._createGradient(Hn);return ii}}function jn(Nn,Hn,On,hi,Xn,ii,ri,di){const fi=Hn.coords,wi=Hn.colors,Jn=Nn.data,pi=Nn.width*4;let Zn;fi[On+1]>fi[hi+1]&&(Zn=On,On=hi,hi=Zn,Zn=ii,ii=ri,ri=Zn),fi[hi+1]>fi[Xn+1]&&(Zn=hi,hi=Xn,Xn=Zn,Zn=ri,ri=di,di=Zn),fi[On+1]>fi[hi+1]&&(Zn=On,On=hi,hi=Zn,Zn=ii,ii=ri,ri=Zn);const Gn=(fi[On]+Hn.offsetX)*Hn.scaleX,mi=(fi[On+1]+Hn.offsetY)*Hn.scaleY,Wn=(fi[hi]+Hn.offsetX)*Hn.scaleX,ni=(fi[hi+1]+Hn.offsetY)*Hn.scaleY,li=(fi[Xn]+Hn.offsetX)*Hn.scaleX,Ai=(fi[Xn+1]+Hn.offsetY)*Hn.scaleY;if(mi>=Ai)return;const gi=wi[ii],yi=wi[ii+1],Ii=wi[ii+2],xi=wi[ri],Qn=wi[ri+1],ai=wi[ri+2],Vn=wi[di],Yn=wi[di+1],ci=wi[di+2],bi=Math.round(mi),Ci=Math.round(Ai);let Fi,zi,_i,ji,Pi,Ni,Si,Ti;for(let Ri=bi;Ri<=Ci;Ri++){if(Ri<ni){const Ei=Ri<mi?0:(mi-Ri)/(mi-ni);Fi=Gn-(Gn-Wn)*Ei,zi=gi-(gi-xi)*Ei,_i=yi-(yi-Qn)*Ei,ji=Ii-(Ii-ai)*Ei}else{let Ei;Ri>Ai?Ei=1:ni===Ai?Ei=0:Ei=(ni-Ri)/(ni-Ai),Fi=Wn-(Wn-li)*Ei,zi=xi-(xi-Vn)*Ei,_i=Qn-(Qn-Yn)*Ei,ji=ai-(ai-ci)*Ei}let Mi;Ri<mi?Mi=0:Ri>Ai?Mi=1:Mi=(mi-Ri)/(mi-Ai),Pi=Gn-(Gn-li)*Mi,Ni=gi-(gi-Vn)*Mi,Si=yi-(yi-Yn)*Mi,Ti=Ii-(Ii-ci)*Mi;const Ui=Math.round(Math.min(Fi,Pi)),Hi=Math.round(Math.max(Fi,Pi));let Li=pi*Ri+Ui*4;for(let Ei=Ui;Ei<=Hi;Ei++)Mi=(Fi-Ei)/(Fi-Pi),Mi<0?Mi=0:Mi>1&&(Mi=1),Jn[Li++]=zi-(zi-Ni)*Mi|0,Jn[Li++]=_i-(_i-Si)*Mi|0,Jn[Li++]=ji-(ji-Ti)*Mi|0,Jn[Li++]=255}}function Cn(Nn,Hn,On){const hi=Hn.coords,Xn=Hn.colors;let ii,ri;switch(Hn.type){case"lattice":const di=Hn.verticesPerRow,fi=Math.floor(hi.length/di)-1,wi=di-1;for(ii=0;ii<fi;ii++){let Jn=ii*di;for(let pi=0;pi<wi;pi++,Jn++)jn(Nn,On,hi[Jn],hi[Jn+1],hi[Jn+di],Xn[Jn],Xn[Jn+1],Xn[Jn+di]),jn(Nn,On,hi[Jn+di+1],hi[Jn+1],hi[Jn+di],Xn[Jn+di+1],Xn[Jn+1],Xn[Jn+di])}break;case"triangles":for(ii=0,ri=hi.length;ii<ri;ii+=3)jn(Nn,On,hi[ii],hi[ii+1],hi[ii+2],Xn[ii],Xn[ii+1],Xn[ii+2]);break;default:throw new Error("illegal figure")}}class Tn extends In{constructor(Hn){super(),this._coords=Hn[2],this._colors=Hn[3],this._figures=Hn[4],this._bounds=Hn[5],this._bbox=Hn[7],this._background=Hn[8],this.matrix=null}_createMeshCanvas(Hn,On,hi){const di=Math.floor(this._bounds[0]),fi=Math.floor(this._bounds[1]),wi=Math.ceil(this._bounds[2])-di,Jn=Math.ceil(this._bounds[3])-fi,pi=Math.min(Math.ceil(Math.abs(wi*Hn[0]*1.1)),3e3),Zn=Math.min(Math.ceil(Math.abs(Jn*Hn[1]*1.1)),3e3),Gn=wi/pi,mi=Jn/Zn,Wn={coords:this._coords,colors:this._colors,offsetX:-di,offsetY:-fi,scaleX:1/Gn,scaleY:1/mi},ni=pi+2*2,li=Zn+2*2,Ai=hi.getCanvas("mesh",ni,li,!1),gi=Ai.context,yi=gi.createImageData(pi,Zn);if(On){const xi=yi.data;for(let Qn=0,ai=xi.length;Qn<ai;Qn+=4)xi[Qn]=On[0],xi[Qn+1]=On[1],xi[Qn+2]=On[2],xi[Qn+3]=255}for(const xi of this._figures)Cn(yi,xi,Wn);return gi.putImageData(yi,2,2),{canvas:Ai.canvas,offsetX:di-2*Gn,offsetY:fi-2*mi,scaleX:Gn,scaleY:mi}}getPattern(Hn,On,hi,Xn){ti(Hn,this._bbox);let ii;if(Xn===Mn.SHADING)ii=Kn.Util.singularValueDecompose2dScale((0,oi.getCurrentTransform)(Hn));else if(ii=Kn.Util.singularValueDecompose2dScale(On.baseTransform),this.matrix){const di=Kn.Util.singularValueDecompose2dScale(this.matrix);ii=[ii[0]*di[0],ii[1]*di[1]]}const ri=this._createMeshCanvas(ii,Xn===Mn.SHADING?null:this._background,On.cachedCanvases);return Xn!==Mn.SHADING&&(Hn.setTransform(...On.baseTransform),this.matrix&&Hn.transform(...this.matrix)),Hn.translate(ri.offsetX,ri.offsetY),Hn.scale(ri.scaleX,ri.scaleY),Hn.createPattern(ri.canvas,"no-repeat")}}class Rn extends In{getPattern(){return"hotpink"}}function ui(Nn){switch(Nn[0]){case"RadialAxial":return new Ln(Nn);case"Mesh":return new Tn(Nn);case"Dummy":return new Rn}throw new Error(`Unknown IR type: ${Nn[0]}`)}const si={COLORED:1,UNCOLORED:2},Bn=class Bn{constructor(Hn,On,hi,Xn,ii){this.operatorList=Hn[2],this.matrix=Hn[3]||[1,0,0,1,0,0],this.bbox=Hn[4],this.xstep=Hn[5],this.ystep=Hn[6],this.paintType=Hn[7],this.tilingType=Hn[8],this.color=On,this.ctx=hi,this.canvasGraphicsFactory=Xn,this.baseTransform=ii}createPatternCanvas(Hn){const On=this.operatorList,hi=this.bbox,Xn=this.xstep,ii=this.ystep,ri=this.paintType,di=this.tilingType,fi=this.color,wi=this.canvasGraphicsFactory;(0,Kn.info)("TilingType: "+di);const Jn=hi[0],pi=hi[1],Zn=hi[2],Gn=hi[3],mi=Kn.Util.singularValueDecompose2dScale(this.matrix),Wn=Kn.Util.singularValueDecompose2dScale(this.baseTransform),ni=[mi[0]*Wn[0],mi[1]*Wn[1]],li=this.getSizeAndScale(Xn,this.ctx.canvas.width,ni[0]),Ai=this.getSizeAndScale(ii,this.ctx.canvas.height,ni[1]),gi=Hn.cachedCanvases.getCanvas("pattern",li.size,Ai.size,!0),yi=gi.context,Ii=wi.createCanvasGraphics(yi);Ii.groupLevel=Hn.groupLevel,this.setFillAndStrokeStyleToContext(Ii,ri,fi);let xi=Jn,Qn=pi,ai=Zn,Vn=Gn;return Jn<0&&(xi=0,ai+=Math.abs(Jn)),pi<0&&(Qn=0,Vn+=Math.abs(pi)),yi.translate(-(li.scale*xi),-(Ai.scale*Qn)),Ii.transform(li.scale,0,0,Ai.scale,0,0),yi.save(),this.clipBbox(Ii,xi,Qn,ai,Vn),Ii.baseTransform=(0,oi.getCurrentTransform)(Ii.ctx),Ii.executeOperatorList(On),Ii.endDrawing(),{canvas:gi.canvas,scaleX:li.scale,scaleY:Ai.scale,offsetX:xi,offsetY:Qn}}getSizeAndScale(Hn,On,hi){Hn=Math.abs(Hn);const Xn=Math.max(Bn.MAX_PATTERN_SIZE,On);let ii=Math.ceil(Hn*hi);return ii>=Xn?ii=Xn:hi=ii/Hn,{scale:hi,size:ii}}clipBbox(Hn,On,hi,Xn,ii){const ri=Xn-On,di=ii-hi;Hn.ctx.rect(On,hi,ri,di),Hn.current.updateRectMinMax((0,oi.getCurrentTransform)(Hn.ctx),[On,hi,Xn,ii]),Hn.clip(),Hn.endPath()}setFillAndStrokeStyleToContext(Hn,On,hi){const Xn=Hn.ctx,ii=Hn.current;switch(On){case si.COLORED:const ri=this.ctx;Xn.fillStyle=ri.fillStyle,Xn.strokeStyle=ri.strokeStyle,ii.fillColor=ri.fillStyle,ii.strokeColor=ri.strokeStyle;break;case si.UNCOLORED:const di=Kn.Util.makeHexColor(hi[0],hi[1],hi[2]);Xn.fillStyle=di,Xn.strokeStyle=di,ii.fillColor=di,ii.strokeColor=di;break;default:throw new Kn.FormatError(`Unsupported paint type: ${On}`)}}getPattern(Hn,On,hi,Xn){let ii=hi;Xn!==Mn.SHADING&&(ii=Kn.Util.transform(ii,On.baseTransform),this.matrix&&(ii=Kn.Util.transform(ii,this.matrix)));const ri=this.createPatternCanvas(On);let di=new DOMMatrix(ii);di=di.translate(ri.offsetX,ri.offsetY),di=di.scale(1/ri.scaleX,1/ri.scaleY);const fi=Hn.createPattern(ri.canvas,"repeat");return fi.setTransform(di),fi}};ta(Bn,"MAX_PATTERN_SIZE",3e3);let ei=Bn;$n.TilingPattern=ei},(ki,$n,Pn)=>{Object.defineProperty($n,"__esModule",{value:!0}),$n.convertBlackAndWhiteToRGBA=Mn,$n.convertToRGBA=oi,$n.grayToRGBA=In;var Kn=Pn(1);function oi(Ln){switch(Ln.kind){case Kn.ImageKind.GRAYSCALE_1BPP:return Mn(Ln);case Kn.ImageKind.RGB_24BPP:return ti(Ln)}return null}function Mn({src:Ln,srcPos:jn=0,dest:Cn,width:Tn,height:Rn,nonBlackColor:ui=4294967295,inverseDecode:si=!1}){const ei=Kn.FeatureTest.isLittleEndian?4278190080:255,[Bn,Nn]=si?[ui,ei]:[ei,ui],Hn=Tn>>3,On=Tn&7,hi=Ln.length;Cn=new Uint32Array(Cn.buffer);let Xn=0;for(let ii=0;ii<Rn;ii++){for(const di=jn+Hn;jn<di;jn++){const fi=jn<hi?Ln[jn]:255;Cn[Xn++]=fi&128?Nn:Bn,Cn[Xn++]=fi&64?Nn:Bn,Cn[Xn++]=fi&32?Nn:Bn,Cn[Xn++]=fi&16?Nn:Bn,Cn[Xn++]=fi&8?Nn:Bn,Cn[Xn++]=fi&4?Nn:Bn,Cn[Xn++]=fi&2?Nn:Bn,Cn[Xn++]=fi&1?Nn:Bn}if(On===0)continue;const ri=jn<hi?Ln[jn++]:255;for(let di=0;di<On;di++)Cn[Xn++]=ri&1<<7-di?Nn:Bn}return{srcPos:jn,destPos:Xn}}function ti({src:Ln,srcPos:jn=0,dest:Cn,destPos:Tn=0,width:Rn,height:ui}){let si=0;const ei=Ln.length>>2,Bn=new Uint32Array(Ln.buffer,jn,ei);if(Kn.FeatureTest.isLittleEndian){for(;si<ei-2;si+=3,Tn+=4){const Nn=Bn[si],Hn=Bn[si+1],On=Bn[si+2];Cn[Tn]=Nn|4278190080,Cn[Tn+1]=Nn>>>24|Hn<<8|4278190080,Cn[Tn+2]=Hn>>>16|On<<16|4278190080,Cn[Tn+3]=On>>>8|4278190080}for(let Nn=si*4,Hn=Ln.length;Nn<Hn;Nn+=3)Cn[Tn++]=Ln[Nn]|Ln[Nn+1]<<8|Ln[Nn+2]<<16|4278190080}else{for(;si<ei-2;si+=3,Tn+=4){const Nn=Bn[si],Hn=Bn[si+1],On=Bn[si+2];Cn[Tn]=Nn|255,Cn[Tn+1]=Nn<<24|Hn>>>8|255,Cn[Tn+2]=Hn<<16|On>>>16|255,Cn[Tn+3]=On<<8|255}for(let Nn=si*4,Hn=Ln.length;Nn<Hn;Nn+=3)Cn[Tn++]=Ln[Nn]<<24|Ln[Nn+1]<<16|Ln[Nn+2]<<8|255}return{srcPos:jn,destPos:Tn}}function In(Ln,jn){if(Kn.FeatureTest.isLittleEndian)for(let Cn=0,Tn=Ln.length;Cn<Tn;Cn++)jn[Cn]=Ln[Cn]*65793|4278190080;else for(let Cn=0,Tn=Ln.length;Cn<Tn;Cn++)jn[Cn]=Ln[Cn]*16843008|255}},(ki,$n)=>{Object.defineProperty($n,"__esModule",{value:!0}),$n.GlobalWorkerOptions=void 0;const Pn=Object.create(null);$n.GlobalWorkerOptions=Pn,Pn.workerPort=null,Pn.workerSrc=""},(ki,$n,Pn)=>{var Ln,xh,Cn,bh,Rn,pc;Object.defineProperty($n,"__esModule",{value:!0}),$n.MessageHandler=void 0;var Kn=Pn(1);const oi={UNKNOWN:0,DATA:1,ERROR:2},Mn={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ti(si){switch(si instanceof Error||typeof si=="object"&&si!==null||(0,Kn.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),si.name){case"AbortException":return new Kn.AbortException(si.message);case"MissingPDFException":return new Kn.MissingPDFException(si.message);case"PasswordException":return new Kn.PasswordException(si.message,si.code);case"UnexpectedResponseException":return new Kn.UnexpectedResponseException(si.message,si.status);case"UnknownErrorException":return new Kn.UnknownErrorException(si.message,si.details);default:return new Kn.UnknownErrorException(si.message,si.toString())}}class In{constructor(ei,Bn,Nn){Ki(this,Ln);Ki(this,Cn);Ki(this,Rn);this.sourceName=ei,this.targetName=Bn,this.comObj=Nn,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=Hn=>{const On=Hn.data;if(On.targetName!==this.sourceName)return;if(On.stream){Qi(this,Cn,bh).call(this,On);return}if(On.callback){const Xn=On.callbackId,ii=this.callbackCapabilities[Xn];if(!ii)throw new Error(`Cannot resolve callback ${Xn}`);if(delete this.callbackCapabilities[Xn],On.callback===oi.DATA)ii.resolve(On.data);else if(On.callback===oi.ERROR)ii.reject(ti(On.reason));else throw new Error("Unexpected callback case");return}const hi=this.actionHandler[On.action];if(!hi)throw new Error(`Unknown action from worker: ${On.action}`);if(On.callbackId){const Xn=this.sourceName,ii=On.sourceName;new Promise(function(ri){ri(hi(On.data))}).then(function(ri){Nn.postMessage({sourceName:Xn,targetName:ii,callback:oi.DATA,callbackId:On.callbackId,data:ri})},function(ri){Nn.postMessage({sourceName:Xn,targetName:ii,callback:oi.ERROR,callbackId:On.callbackId,reason:ti(ri)})});return}if(On.streamId){Qi(this,Ln,xh).call(this,On);return}hi(On.data)},Nn.addEventListener("message",this._onComObjOnMessage)}on(ei,Bn){const Nn=this.actionHandler;if(Nn[ei])throw new Error(`There is already an actionName called "${ei}"`);Nn[ei]=Bn}send(ei,Bn,Nn){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:ei,data:Bn},Nn)}sendWithPromise(ei,Bn,Nn){const Hn=this.callbackId++,On=new Kn.PromiseCapability;this.callbackCapabilities[Hn]=On;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:ei,callbackId:Hn,data:Bn},Nn)}catch(hi){On.reject(hi)}return On.promise}sendWithStream(ei,Bn,Nn,Hn){const On=this.streamId++,hi=this.sourceName,Xn=this.targetName,ii=this.comObj;return new ReadableStream({start:ri=>{const di=new Kn.PromiseCapability;return this.streamControllers[On]={controller:ri,startCall:di,pullCall:null,cancelCall:null,isClosed:!1},ii.postMessage({sourceName:hi,targetName:Xn,action:ei,streamId:On,data:Bn,desiredSize:ri.desiredSize},Hn),di.promise},pull:ri=>{const di=new Kn.PromiseCapability;return this.streamControllers[On].pullCall=di,ii.postMessage({sourceName:hi,targetName:Xn,stream:Mn.PULL,streamId:On,desiredSize:ri.desiredSize}),di.promise},cancel:ri=>{(0,Kn.assert)(ri instanceof Error,"cancel must have a valid reason");const di=new Kn.PromiseCapability;return this.streamControllers[On].cancelCall=di,this.streamControllers[On].isClosed=!0,ii.postMessage({sourceName:hi,targetName:Xn,stream:Mn.CANCEL,streamId:On,reason:ti(ri)}),di.promise}},Nn)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}Ln=new WeakSet,xh=function(ei){const Bn=ei.streamId,Nn=this.sourceName,Hn=ei.sourceName,On=this.comObj,hi=this,Xn=this.actionHandler[ei.action],ii={enqueue(ri,di=1,fi){if(this.isCancelled)return;const wi=this.desiredSize;this.desiredSize-=di,wi>0&&this.desiredSize<=0&&(this.sinkCapability=new Kn.PromiseCapability,this.ready=this.sinkCapability.promise),On.postMessage({sourceName:Nn,targetName:Hn,stream:Mn.ENQUEUE,streamId:Bn,chunk:ri},fi)},close(){this.isCancelled||(this.isCancelled=!0,On.postMessage({sourceName:Nn,targetName:Hn,stream:Mn.CLOSE,streamId:Bn}),delete hi.streamSinks[Bn])},error(ri){(0,Kn.assert)(ri instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,On.postMessage({sourceName:Nn,targetName:Hn,stream:Mn.ERROR,streamId:Bn,reason:ti(ri)}))},sinkCapability:new Kn.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:ei.desiredSize,ready:null};ii.sinkCapability.resolve(),ii.ready=ii.sinkCapability.promise,this.streamSinks[Bn]=ii,new Promise(function(ri){ri(Xn(ei.data,ii))}).then(function(){On.postMessage({sourceName:Nn,targetName:Hn,stream:Mn.START_COMPLETE,streamId:Bn,success:!0})},function(ri){On.postMessage({sourceName:Nn,targetName:Hn,stream:Mn.START_COMPLETE,streamId:Bn,reason:ti(ri)})})},Cn=new WeakSet,bh=function(ei){const Bn=ei.streamId,Nn=this.sourceName,Hn=ei.sourceName,On=this.comObj,hi=this.streamControllers[Bn],Xn=this.streamSinks[Bn];switch(ei.stream){case Mn.START_COMPLETE:ei.success?hi.startCall.resolve():hi.startCall.reject(ti(ei.reason));break;case Mn.PULL_COMPLETE:ei.success?hi.pullCall.resolve():hi.pullCall.reject(ti(ei.reason));break;case Mn.PULL:if(!Xn){On.postMessage({sourceName:Nn,targetName:Hn,stream:Mn.PULL_COMPLETE,streamId:Bn,success:!0});break}Xn.desiredSize<=0&&ei.desiredSize>0&&Xn.sinkCapability.resolve(),Xn.desiredSize=ei.desiredSize,new Promise(function(ii){var ri;ii((ri=Xn.onPull)==null?void 0:ri.call(Xn))}).then(function(){On.postMessage({sourceName:Nn,targetName:Hn,stream:Mn.PULL_COMPLETE,streamId:Bn,success:!0})},function(ii){On.postMessage({sourceName:Nn,targetName:Hn,stream:Mn.PULL_COMPLETE,streamId:Bn,reason:ti(ii)})});break;case Mn.ENQUEUE:if((0,Kn.assert)(hi,"enqueue should have stream controller"),hi.isClosed)break;hi.controller.enqueue(ei.chunk);break;case Mn.CLOSE:if((0,Kn.assert)(hi,"close should have stream controller"),hi.isClosed)break;hi.isClosed=!0,hi.controller.close(),Qi(this,Rn,pc).call(this,hi,Bn);break;case Mn.ERROR:(0,Kn.assert)(hi,"error should have stream controller"),hi.controller.error(ti(ei.reason)),Qi(this,Rn,pc).call(this,hi,Bn);break;case Mn.CANCEL_COMPLETE:ei.success?hi.cancelCall.resolve():hi.cancelCall.reject(ti(ei.reason)),Qi(this,Rn,pc).call(this,hi,Bn);break;case Mn.CANCEL:if(!Xn)break;new Promise(function(ii){var ri;ii((ri=Xn.onCancel)==null?void 0:ri.call(Xn,ti(ei.reason)))}).then(function(){On.postMessage({sourceName:Nn,targetName:Hn,stream:Mn.CANCEL_COMPLETE,streamId:Bn,success:!0})},function(ii){On.postMessage({sourceName:Nn,targetName:Hn,stream:Mn.CANCEL_COMPLETE,streamId:Bn,reason:ti(ii)})}),Xn.sinkCapability.reject(ti(ei.reason)),Xn.isCancelled=!0,delete this.streamSinks[Bn];break;default:throw new Error("Unexpected stream case")}},Rn=new WeakSet,pc=async function(ei,Bn){var Nn,Hn,On;await Promise.allSettled([(Nn=ei.startCall)==null?void 0:Nn.promise,(Hn=ei.pullCall)==null?void 0:Hn.promise,(On=ei.cancelCall)==null?void 0:On.promise]),delete this.streamControllers[Bn]},$n.MessageHandler=In},(ki,$n,Pn)=>{var Mn,ti;Object.defineProperty($n,"__esModule",{value:!0}),$n.Metadata=void 0;var Kn=Pn(1);class oi{constructor({parsedData:Ln,rawData:jn}){Ki(this,Mn,void 0);Ki(this,ti,void 0);ds(this,Mn,Ln),ds(this,ti,jn)}getRaw(){return vi(this,ti)}get(Ln){return vi(this,Mn).get(Ln)??null}getAll(){return(0,Kn.objectFromMap)(vi(this,Mn))}has(Ln){return vi(this,Mn).has(Ln)}}Mn=new WeakMap,ti=new WeakMap,$n.Metadata=oi},(ki,$n,Pn)=>{var Ln,jn,Cn,Tn,Rn,ui,bl;Object.defineProperty($n,"__esModule",{value:!0}),$n.OptionalContentConfig=void 0;var Kn=Pn(1),oi=Pn(8);const Mn=Symbol("INTERNAL");class ti{constructor(Bn,Nn){Ki(this,Ln,!0);this.name=Bn,this.intent=Nn}get visible(){return vi(this,Ln)}_setVisible(Bn,Nn){Bn!==Mn&&(0,Kn.unreachable)("Internal method `_setVisible` called."),ds(this,Ln,Nn)}}Ln=new WeakMap;class In{constructor(Bn){Ki(this,ui);Ki(this,jn,null);Ki(this,Cn,new Map);Ki(this,Tn,null);Ki(this,Rn,null);if(this.name=null,this.creator=null,Bn!==null){this.name=Bn.name,this.creator=Bn.creator,ds(this,Rn,Bn.order);for(const Nn of Bn.groups)vi(this,Cn).set(Nn.id,new ti(Nn.name,Nn.intent));if(Bn.baseState==="OFF")for(const Nn of vi(this,Cn).values())Nn._setVisible(Mn,!1);for(const Nn of Bn.on)vi(this,Cn).get(Nn)._setVisible(Mn,!0);for(const Nn of Bn.off)vi(this,Cn).get(Nn)._setVisible(Mn,!1);ds(this,Tn,this.getHash())}}isVisible(Bn){if(vi(this,Cn).size===0)return!0;if(!Bn)return(0,Kn.warn)("Optional content group not defined."),!0;if(Bn.type==="OCG")return vi(this,Cn).has(Bn.id)?vi(this,Cn).get(Bn.id).visible:((0,Kn.warn)(`Optional content group not found: ${Bn.id}`),!0);if(Bn.type==="OCMD"){if(Bn.expression)return Qi(this,ui,bl).call(this,Bn.expression);if(!Bn.policy||Bn.policy==="AnyOn"){for(const Nn of Bn.ids){if(!vi(this,Cn).has(Nn))return(0,Kn.warn)(`Optional content group not found: ${Nn}`),!0;if(vi(this,Cn).get(Nn).visible)return!0}return!1}else if(Bn.policy==="AllOn"){for(const Nn of Bn.ids){if(!vi(this,Cn).has(Nn))return(0,Kn.warn)(`Optional content group not found: ${Nn}`),!0;if(!vi(this,Cn).get(Nn).visible)return!1}return!0}else if(Bn.policy==="AnyOff"){for(const Nn of Bn.ids){if(!vi(this,Cn).has(Nn))return(0,Kn.warn)(`Optional content group not found: ${Nn}`),!0;if(!vi(this,Cn).get(Nn).visible)return!0}return!1}else if(Bn.policy==="AllOff"){for(const Nn of Bn.ids){if(!vi(this,Cn).has(Nn))return(0,Kn.warn)(`Optional content group not found: ${Nn}`),!0;if(vi(this,Cn).get(Nn).visible)return!1}return!0}return(0,Kn.warn)(`Unknown optional content policy ${Bn.policy}.`),!0}return(0,Kn.warn)(`Unknown group type ${Bn.type}.`),!0}setVisibility(Bn,Nn=!0){if(!vi(this,Cn).has(Bn)){(0,Kn.warn)(`Optional content group not found: ${Bn}`);return}vi(this,Cn).get(Bn)._setVisible(Mn,!!Nn),ds(this,jn,null)}get hasInitialVisibility(){return vi(this,Tn)===null||this.getHash()===vi(this,Tn)}getOrder(){return vi(this,Cn).size?vi(this,Rn)?vi(this,Rn).slice():[...vi(this,Cn).keys()]:null}getGroups(){return vi(this,Cn).size>0?(0,Kn.objectFromMap)(vi(this,Cn)):null}getGroup(Bn){return vi(this,Cn).get(Bn)||null}getHash(){if(vi(this,jn)!==null)return vi(this,jn);const Bn=new oi.MurmurHash3_64;for(const[Nn,Hn]of vi(this,Cn))Bn.update(`${Nn}:${Hn.visible}`);return ds(this,jn,Bn.hexdigest())}}jn=new WeakMap,Cn=new WeakMap,Tn=new WeakMap,Rn=new WeakMap,ui=new WeakSet,bl=function(Bn){const Nn=Bn.length;if(Nn<2)return!0;const Hn=Bn[0];for(let On=1;On<Nn;On++){const hi=Bn[On];let Xn;if(Array.isArray(hi))Xn=Qi(this,ui,bl).call(this,hi);else if(vi(this,Cn).has(hi))Xn=vi(this,Cn).get(hi).visible;else return(0,Kn.warn)(`Optional content group not found: ${hi}`),!0;switch(Hn){case"And":if(!Xn)return!1;break;case"Or":if(Xn)return!0;break;case"Not":return!Xn;default:return!0}}return Hn==="And"},$n.OptionalContentConfig=In},(ki,$n,Pn)=>{Object.defineProperty($n,"__esModule",{value:!0}),$n.PDFDataTransportStream=void 0;var Kn=Pn(1),oi=Pn(6);class Mn{constructor({length:jn,initialData:Cn,progressiveDone:Tn=!1,contentDispositionFilename:Rn=null,disableRange:ui=!1,disableStream:si=!1},ei){if((0,Kn.assert)(ei,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=Tn,this._contentDispositionFilename=Rn,(Cn==null?void 0:Cn.length)>0){const Bn=Cn instanceof Uint8Array&&Cn.byteLength===Cn.buffer.byteLength?Cn.buffer:new Uint8Array(Cn).buffer;this._queuedChunks.push(Bn)}this._pdfDataRangeTransport=ei,this._isStreamingSupported=!si,this._isRangeSupported=!ui,this._contentLength=jn,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((Bn,Nn)=>{this._onReceiveData({begin:Bn,chunk:Nn})}),this._pdfDataRangeTransport.addProgressListener((Bn,Nn)=>{this._onProgress({loaded:Bn,total:Nn})}),this._pdfDataRangeTransport.addProgressiveReadListener(Bn=>{this._onReceiveData({chunk:Bn})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:jn,chunk:Cn}){const Tn=Cn instanceof Uint8Array&&Cn.byteLength===Cn.buffer.byteLength?Cn.buffer:new Uint8Array(Cn).buffer;if(jn===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(Tn):this._queuedChunks.push(Tn);else{const Rn=this._rangeReaders.some(function(ui){return ui._begin!==jn?!1:(ui._enqueue(Tn),!0)});(0,Kn.assert)(Rn,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var jn;return((jn=this._fullRequestReader)==null?void 0:jn._loaded)??0}_onProgress(jn){var Cn,Tn,Rn,ui;jn.total===void 0?(Tn=(Cn=this._rangeReaders[0])==null?void 0:Cn.onProgress)==null||Tn.call(Cn,{loaded:jn.loaded}):(ui=(Rn=this._fullRequestReader)==null?void 0:Rn.onProgress)==null||ui.call(Rn,{loaded:jn.loaded,total:jn.total})}_onProgressiveDone(){var jn;(jn=this._fullRequestReader)==null||jn.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(jn){const Cn=this._rangeReaders.indexOf(jn);Cn>=0&&this._rangeReaders.splice(Cn,1)}getFullReader(){(0,Kn.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const jn=this._queuedChunks;return this._queuedChunks=null,new ti(this,jn,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(jn,Cn){if(Cn<=this._progressiveDataLength)return null;const Tn=new In(this,jn,Cn);return this._pdfDataRangeTransport.requestDataRange(jn,Cn),this._rangeReaders.push(Tn),Tn}cancelAllRequests(jn){var Cn;(Cn=this._fullRequestReader)==null||Cn.cancel(jn);for(const Tn of this._rangeReaders.slice(0))Tn.cancel(jn);this._pdfDataRangeTransport.abort()}}$n.PDFDataTransportStream=Mn;class ti{constructor(jn,Cn,Tn=!1,Rn=null){this._stream=jn,this._done=Tn||!1,this._filename=(0,oi.isPdfFile)(Rn)?Rn:null,this._queuedChunks=Cn||[],this._loaded=0;for(const ui of this._queuedChunks)this._loaded+=ui.byteLength;this._requests=[],this._headersReady=Promise.resolve(),jn._fullRequestReader=this,this.onProgress=null}_enqueue(jn){this._done||(this._requests.length>0?this._requests.shift().resolve({value:jn,done:!1}):this._queuedChunks.push(jn),this._loaded+=jn.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const jn=new Kn.PromiseCapability;return this._requests.push(jn),jn.promise}cancel(jn){this._done=!0;for(const Cn of this._requests)Cn.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class In{constructor(jn,Cn,Tn){this._stream=jn,this._begin=Cn,this._end=Tn,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(jn){if(!this._done){if(this._requests.length===0)this._queuedChunk=jn;else{this._requests.shift().resolve({value:jn,done:!1});for(const Tn of this._requests)Tn.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const Cn=this._queuedChunk;return this._queuedChunk=null,{value:Cn,done:!1}}if(this._done)return{value:void 0,done:!0};const jn=new Kn.PromiseCapability;return this._requests.push(jn),jn.promise}cancel(jn){this._done=!0;for(const Cn of this._requests)Cn.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(ki,$n,Pn)=>{Object.defineProperty($n,"__esModule",{value:!0}),$n.PDFFetchStream=void 0;var Kn=Pn(1),oi=Pn(20);function Mn(Tn,Rn,ui){return{method:"GET",headers:Tn,signal:ui.signal,mode:"cors",credentials:Rn?"include":"same-origin",redirect:"follow"}}function ti(Tn){const Rn=new Headers;for(const ui in Tn){const si=Tn[ui];si!==void 0&&Rn.append(ui,si)}return Rn}function In(Tn){return Tn instanceof Uint8Array?Tn.buffer:Tn instanceof ArrayBuffer?Tn:((0,Kn.warn)(`getArrayBuffer - unexpected data format: ${Tn}`),new Uint8Array(Tn).buffer)}class Ln{constructor(Rn){this.source=Rn,this.isHttp=/^https?:/i.test(Rn.url),this.httpHeaders=this.isHttp&&Rn.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var Rn;return((Rn=this._fullRequestReader)==null?void 0:Rn._loaded)??0}getFullReader(){return(0,Kn.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new jn(this),this._fullRequestReader}getRangeReader(Rn,ui){if(ui<=this._progressiveDataLength)return null;const si=new Cn(this,Rn,ui);return this._rangeRequestReaders.push(si),si}cancelAllRequests(Rn){var ui;(ui=this._fullRequestReader)==null||ui.cancel(Rn);for(const si of this._rangeRequestReaders.slice(0))si.cancel(Rn)}}$n.PDFFetchStream=Ln;class jn{constructor(Rn){this._stream=Rn,this._reader=null,this._loaded=0,this._filename=null;const ui=Rn.source;this._withCredentials=ui.withCredentials||!1,this._contentLength=ui.length,this._headersCapability=new Kn.PromiseCapability,this._disableRange=ui.disableRange||!1,this._rangeChunkSize=ui.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!ui.disableStream,this._isRangeSupported=!ui.disableRange,this._headers=ti(this._stream.httpHeaders);const si=ui.url;fetch(si,Mn(this._headers,this._withCredentials,this._abortController)).then(ei=>{if(!(0,oi.validateResponseStatus)(ei.status))throw(0,oi.createResponseStatusError)(ei.status,si);this._reader=ei.body.getReader(),this._headersCapability.resolve();const Bn=On=>ei.headers.get(On),{allowRangeRequests:Nn,suggestedLength:Hn}=(0,oi.validateRangeRequestCapabilities)({getResponseHeader:Bn,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Nn,this._contentLength=Hn||this._contentLength,this._filename=(0,oi.extractFilenameFromHeader)(Bn),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Kn.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var si;await this._headersCapability.promise;const{value:Rn,done:ui}=await this._reader.read();return ui?{value:Rn,done:ui}:(this._loaded+=Rn.byteLength,(si=this.onProgress)==null||si.call(this,{loaded:this._loaded,total:this._contentLength}),{value:In(Rn),done:!1})}cancel(Rn){var ui;(ui=this._reader)==null||ui.cancel(Rn),this._abortController.abort()}}class Cn{constructor(Rn,ui,si){this._stream=Rn,this._reader=null,this._loaded=0;const ei=Rn.source;this._withCredentials=ei.withCredentials||!1,this._readCapability=new Kn.PromiseCapability,this._isStreamingSupported=!ei.disableStream,this._abortController=new AbortController,this._headers=ti(this._stream.httpHeaders),this._headers.append("Range",`bytes=${ui}-${si-1}`);const Bn=ei.url;fetch(Bn,Mn(this._headers,this._withCredentials,this._abortController)).then(Nn=>{if(!(0,oi.validateResponseStatus)(Nn.status))throw(0,oi.createResponseStatusError)(Nn.status,Bn);this._readCapability.resolve(),this._reader=Nn.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var si;await this._readCapability.promise;const{value:Rn,done:ui}=await this._reader.read();return ui?{value:Rn,done:ui}:(this._loaded+=Rn.byteLength,(si=this.onProgress)==null||si.call(this,{loaded:this._loaded}),{value:In(Rn),done:!1})}cancel(Rn){var ui;(ui=this._reader)==null||ui.cancel(Rn),this._abortController.abort()}}},(ki,$n,Pn)=>{Object.defineProperty($n,"__esModule",{value:!0}),$n.createResponseStatusError=Ln,$n.extractFilenameFromHeader=In,$n.validateRangeRequestCapabilities=ti,$n.validateResponseStatus=jn;var Kn=Pn(1),oi=Pn(21),Mn=Pn(6);function ti({getResponseHeader:Cn,isHttp:Tn,rangeChunkSize:Rn,disableRange:ui}){const si={allowRangeRequests:!1,suggestedLength:void 0},ei=parseInt(Cn("Content-Length"),10);return!Number.isInteger(ei)||(si.suggestedLength=ei,ei<=2*Rn)||ui||!Tn||Cn("Accept-Ranges")!=="bytes"||(Cn("Content-Encoding")||"identity")!=="identity"||(si.allowRangeRequests=!0),si}function In(Cn){const Tn=Cn("Content-Disposition");if(Tn){let Rn=(0,oi.getFilenameFromContentDispositionHeader)(Tn);if(Rn.includes("%"))try{Rn=decodeURIComponent(Rn)}catch{}if((0,Mn.isPdfFile)(Rn))return Rn}return null}function Ln(Cn,Tn){return Cn===404||Cn===0&&Tn.startsWith("file:")?new Kn.MissingPDFException('Missing PDF "'+Tn+'".'):new Kn.UnexpectedResponseException(`Unexpected server response (${Cn}) while retrieving PDF "${Tn}".`,Cn)}function jn(Cn){return Cn===200||Cn===206}},(ki,$n,Pn)=>{Object.defineProperty($n,"__esModule",{value:!0}),$n.getFilenameFromContentDispositionHeader=oi;var Kn=Pn(1);function oi(Mn){let ti=!0,In=Ln("filename\\*","i").exec(Mn);if(In){In=In[1];let ei=Rn(In);return ei=unescape(ei),ei=ui(ei),ei=si(ei),Cn(ei)}if(In=Tn(Mn),In){const ei=si(In);return Cn(ei)}if(In=Ln("filename","i").exec(Mn),In){In=In[1];let ei=Rn(In);return ei=si(ei),Cn(ei)}function Ln(ei,Bn){return new RegExp("(?:^|;)\\s*"+ei+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Bn)}function jn(ei,Bn){if(ei){if(!/^[\x00-\xFF]+$/.test(Bn))return Bn;try{const Nn=new TextDecoder(ei,{fatal:!0}),Hn=(0,Kn.stringToBytes)(Bn);Bn=Nn.decode(Hn),ti=!1}catch{}}return Bn}function Cn(ei){return ti&&/[\x80-\xff]/.test(ei)&&(ei=jn("utf-8",ei),ti&&(ei=jn("iso-8859-1",ei))),ei}function Tn(ei){const Bn=[];let Nn;const Hn=Ln("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(Nn=Hn.exec(ei))!==null;){let[,hi,Xn,ii]=Nn;if(hi=parseInt(hi,10),hi in Bn){if(hi===0)break;continue}Bn[hi]=[Xn,ii]}const On=[];for(let hi=0;hi<Bn.length&&hi in Bn;++hi){let[Xn,ii]=Bn[hi];ii=Rn(ii),Xn&&(ii=unescape(ii),hi===0&&(ii=ui(ii))),On.push(ii)}return On.join("")}function Rn(ei){if(ei.startsWith('"')){const Bn=ei.slice(1).split('\\"');for(let Nn=0;Nn<Bn.length;++Nn){const Hn=Bn[Nn].indexOf('"');Hn!==-1&&(Bn[Nn]=Bn[Nn].slice(0,Hn),Bn.length=Nn+1),Bn[Nn]=Bn[Nn].replaceAll(/\\(.)/g,"$1")}ei=Bn.join('"')}return ei}function ui(ei){const Bn=ei.indexOf("'");if(Bn===-1)return ei;const Nn=ei.slice(0,Bn),On=ei.slice(Bn+1).replace(/^[^']*'/,"");return jn(Nn,On)}function si(ei){return!ei.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(ei)?ei:ei.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Bn,Nn,Hn,On){if(Hn==="q"||Hn==="Q")return On=On.replaceAll("_"," "),On=On.replaceAll(/=([0-9a-fA-F]{2})/g,function(hi,Xn){return String.fromCharCode(parseInt(Xn,16))}),jn(Nn,On);try{On=atob(On)}catch{}return jn(Nn,On)})}return""}},(ki,$n,Pn)=>{Object.defineProperty($n,"__esModule",{value:!0}),$n.PDFNetworkStream=void 0;var Kn=Pn(1),oi=Pn(20);const Mn=200,ti=206;function In(Rn){const ui=Rn.response;return typeof ui!="string"?ui:(0,Kn.stringToBytes)(ui).buffer}class Ln{constructor(ui,si={}){this.url=ui,this.isHttp=/^https?:/i.test(ui),this.httpHeaders=this.isHttp&&si.httpHeaders||Object.create(null),this.withCredentials=si.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(ui,si,ei){const Bn={begin:ui,end:si};for(const Nn in ei)Bn[Nn]=ei[Nn];return this.request(Bn)}requestFull(ui){return this.request(ui)}request(ui){const si=new XMLHttpRequest,ei=this.currXhrId++,Bn=this.pendingRequests[ei]={xhr:si};si.open("GET",this.url),si.withCredentials=this.withCredentials;for(const Nn in this.httpHeaders){const Hn=this.httpHeaders[Nn];Hn!==void 0&&si.setRequestHeader(Nn,Hn)}return this.isHttp&&"begin"in ui&&"end"in ui?(si.setRequestHeader("Range",`bytes=${ui.begin}-${ui.end-1}`),Bn.expectedStatus=ti):Bn.expectedStatus=Mn,si.responseType="arraybuffer",ui.onError&&(si.onerror=function(Nn){ui.onError(si.status)}),si.onreadystatechange=this.onStateChange.bind(this,ei),si.onprogress=this.onProgress.bind(this,ei),Bn.onHeadersReceived=ui.onHeadersReceived,Bn.onDone=ui.onDone,Bn.onError=ui.onError,Bn.onProgress=ui.onProgress,si.send(null),ei}onProgress(ui,si){var Bn;const ei=this.pendingRequests[ui];ei&&((Bn=ei.onProgress)==null||Bn.call(ei,si))}onStateChange(ui,si){var hi,Xn,ii;const ei=this.pendingRequests[ui];if(!ei)return;const Bn=ei.xhr;if(Bn.readyState>=2&&ei.onHeadersReceived&&(ei.onHeadersReceived(),delete ei.onHeadersReceived),Bn.readyState!==4||!(ui in this.pendingRequests))return;if(delete this.pendingRequests[ui],Bn.status===0&&this.isHttp){(hi=ei.onError)==null||hi.call(ei,Bn.status);return}const Nn=Bn.status||Mn;if(!(Nn===Mn&&ei.expectedStatus===ti)&&Nn!==ei.expectedStatus){(Xn=ei.onError)==null||Xn.call(ei,Bn.status);return}const On=In(Bn);if(Nn===ti){const ri=Bn.getResponseHeader("Content-Range"),di=/bytes (\d+)-(\d+)\/(\d+)/.exec(ri);ei.onDone({begin:parseInt(di[1],10),chunk:On})}else On?ei.onDone({begin:0,chunk:On}):(ii=ei.onError)==null||ii.call(ei,Bn.status)}getRequestXhr(ui){return this.pendingRequests[ui].xhr}isPendingRequest(ui){return ui in this.pendingRequests}abortRequest(ui){const si=this.pendingRequests[ui].xhr;delete this.pendingRequests[ui],si.abort()}}class jn{constructor(ui){this._source=ui,this._manager=new Ln(ui.url,{httpHeaders:ui.httpHeaders,withCredentials:ui.withCredentials}),this._rangeChunkSize=ui.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(ui){const si=this._rangeRequestReaders.indexOf(ui);si>=0&&this._rangeRequestReaders.splice(si,1)}getFullReader(){return(0,Kn.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Cn(this._manager,this._source),this._fullRequestReader}getRangeReader(ui,si){const ei=new Tn(this._manager,ui,si);return ei.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(ei),ei}cancelAllRequests(ui){var si;(si=this._fullRequestReader)==null||si.cancel(ui);for(const ei of this._rangeRequestReaders.slice(0))ei.cancel(ui)}}$n.PDFNetworkStream=jn;class Cn{constructor(ui,si){this._manager=ui;const ei={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=si.url,this._fullRequestId=ui.requestFull(ei),this._headersReceivedCapability=new Kn.PromiseCapability,this._disableRange=si.disableRange||!1,this._contentLength=si.length,this._rangeChunkSize=si.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const ui=this._fullRequestId,si=this._manager.getRequestXhr(ui),ei=Hn=>si.getResponseHeader(Hn),{allowRangeRequests:Bn,suggestedLength:Nn}=(0,oi.validateRangeRequestCapabilities)({getResponseHeader:ei,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});Bn&&(this._isRangeSupported=!0),this._contentLength=Nn||this._contentLength,this._filename=(0,oi.extractFilenameFromHeader)(ei),this._isRangeSupported&&this._manager.abortRequest(ui),this._headersReceivedCapability.resolve()}_onDone(ui){if(ui&&(this._requests.length>0?this._requests.shift().resolve({value:ui.chunk,done:!1}):this._cachedChunks.push(ui.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const si of this._requests)si.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(ui){this._storedError=(0,oi.createResponseStatusError)(ui,this._url),this._headersReceivedCapability.reject(this._storedError);for(const si of this._requests)si.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(ui){var si;(si=this.onProgress)==null||si.call(this,{loaded:ui.loaded,total:ui.lengthComputable?ui.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const ui=new Kn.PromiseCapability;return this._requests.push(ui),ui.promise}cancel(ui){this._done=!0,this._headersReceivedCapability.reject(ui);for(const si of this._requests)si.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Tn{constructor(ui,si,ei){this._manager=ui;const Bn={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=ui.url,this._requestId=ui.requestRange(si,ei,Bn),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var ui;(ui=this.onClosed)==null||ui.call(this,this)}_onDone(ui){const si=ui.chunk;this._requests.length>0?this._requests.shift().resolve({value:si,done:!1}):this._queuedChunk=si,this._done=!0;for(const ei of this._requests)ei.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(ui){this._storedError=(0,oi.createResponseStatusError)(ui,this._url);for(const si of this._requests)si.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(ui){var si;this.isStreamingSupported||(si=this.onProgress)==null||si.call(this,{loaded:ui.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const si=this._queuedChunk;return this._queuedChunk=null,{value:si,done:!1}}if(this._done)return{value:void 0,done:!0};const ui=new Kn.PromiseCapability;return this._requests.push(ui),ui.promise}cancel(ui){this._done=!0;for(const si of this._requests)si.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(ki,$n,Pn)=>{Object.defineProperty($n,"__esModule",{value:!0}),$n.PDFNodeStream=void 0;var Kn=Pn(1),oi=Pn(20);const Mn=/^file:\/\/\/[a-zA-Z]:\//;function ti(ei){const Bn=require("url"),Nn=Bn.parse(ei);return Nn.protocol==="file:"||Nn.host?Nn:/^[a-z]:[/\\]/i.test(ei)?Bn.parse(`file:///${ei}`):(Nn.host||(Nn.protocol="file:"),Nn)}class In{constructor(Bn){this.source=Bn,this.url=ti(Bn.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&Bn.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var Bn;return((Bn=this._fullRequestReader)==null?void 0:Bn._loaded)??0}getFullReader(){return(0,Kn.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new ui(this):new Tn(this),this._fullRequestReader}getRangeReader(Bn,Nn){if(Nn<=this._progressiveDataLength)return null;const Hn=this.isFsUrl?new si(this,Bn,Nn):new Rn(this,Bn,Nn);return this._rangeRequestReaders.push(Hn),Hn}cancelAllRequests(Bn){var Nn;(Nn=this._fullRequestReader)==null||Nn.cancel(Bn);for(const Hn of this._rangeRequestReaders.slice(0))Hn.cancel(Bn)}}$n.PDFNodeStream=In;class Ln{constructor(Bn){this._url=Bn.url,this._done=!1,this._storedError=null,this.onProgress=null;const Nn=Bn.source;this._contentLength=Nn.length,this._loaded=0,this._filename=null,this._disableRange=Nn.disableRange||!1,this._rangeChunkSize=Nn.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!Nn.disableStream,this._isRangeSupported=!Nn.disableRange,this._readableStream=null,this._readCapability=new Kn.PromiseCapability,this._headersCapability=new Kn.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Hn;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const Bn=this._readableStream.read();return Bn===null?(this._readCapability=new Kn.PromiseCapability,this.read()):(this._loaded+=Bn.length,(Hn=this.onProgress)==null||Hn.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(Bn).buffer,done:!1})}cancel(Bn){if(!this._readableStream){this._error(Bn);return}this._readableStream.destroy(Bn)}_error(Bn){this._storedError=Bn,this._readCapability.resolve()}_setReadableStream(Bn){this._readableStream=Bn,Bn.on("readable",()=>{this._readCapability.resolve()}),Bn.on("end",()=>{Bn.destroy(),this._done=!0,this._readCapability.resolve()}),Bn.on("error",Nn=>{this._error(Nn)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Kn.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class jn{constructor(Bn){this._url=Bn.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new Kn.PromiseCapability;const Nn=Bn.source;this._isStreamingSupported=!Nn.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Hn;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const Bn=this._readableStream.read();return Bn===null?(this._readCapability=new Kn.PromiseCapability,this.read()):(this._loaded+=Bn.length,(Hn=this.onProgress)==null||Hn.call(this,{loaded:this._loaded}),{value:new Uint8Array(Bn).buffer,done:!1})}cancel(Bn){if(!this._readableStream){this._error(Bn);return}this._readableStream.destroy(Bn)}_error(Bn){this._storedError=Bn,this._readCapability.resolve()}_setReadableStream(Bn){this._readableStream=Bn,Bn.on("readable",()=>{this._readCapability.resolve()}),Bn.on("end",()=>{Bn.destroy(),this._done=!0,this._readCapability.resolve()}),Bn.on("error",Nn=>{this._error(Nn)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function Cn(ei,Bn){return{protocol:ei.protocol,auth:ei.auth,host:ei.hostname,port:ei.port,path:ei.path,method:"GET",headers:Bn}}class Tn extends Ln{constructor(Bn){super(Bn);const Nn=Hn=>{if(Hn.statusCode===404){const ii=new Kn.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=ii,this._headersCapability.reject(ii);return}this._headersCapability.resolve(),this._setReadableStream(Hn);const On=ii=>this._readableStream.headers[ii.toLowerCase()],{allowRangeRequests:hi,suggestedLength:Xn}=(0,oi.validateRangeRequestCapabilities)({getResponseHeader:On,isHttp:Bn.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=hi,this._contentLength=Xn||this._contentLength,this._filename=(0,oi.extractFilenameFromHeader)(On)};if(this._request=null,this._url.protocol==="http:"){const Hn=require("http");this._request=Hn.request(Cn(this._url,Bn.httpHeaders),Nn)}else{const Hn=require("https");this._request=Hn.request(Cn(this._url,Bn.httpHeaders),Nn)}this._request.on("error",Hn=>{this._storedError=Hn,this._headersCapability.reject(Hn)}),this._request.end()}}class Rn extends jn{constructor(Bn,Nn,Hn){super(Bn),this._httpHeaders={};for(const hi in Bn.httpHeaders){const Xn=Bn.httpHeaders[hi];Xn!==void 0&&(this._httpHeaders[hi]=Xn)}this._httpHeaders.Range=`bytes=${Nn}-${Hn-1}`;const On=hi=>{if(hi.statusCode===404){const Xn=new Kn.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Xn;return}this._setReadableStream(hi)};if(this._request=null,this._url.protocol==="http:"){const hi=require("http");this._request=hi.request(Cn(this._url,this._httpHeaders),On)}else{const hi=require("https");this._request=hi.request(Cn(this._url,this._httpHeaders),On)}this._request.on("error",hi=>{this._storedError=hi}),this._request.end()}}class ui extends Ln{constructor(Bn){super(Bn);let Nn=decodeURIComponent(this._url.path);Mn.test(this._url.href)&&(Nn=Nn.replace(/^\//,""));const Hn=require("fs");Hn.lstat(Nn,(On,hi)=>{if(On){On.code==="ENOENT"&&(On=new Kn.MissingPDFException(`Missing PDF "${Nn}".`)),this._storedError=On,this._headersCapability.reject(On);return}this._contentLength=hi.size,this._setReadableStream(Hn.createReadStream(Nn)),this._headersCapability.resolve()})}}class si extends jn{constructor(Bn,Nn,Hn){super(Bn);let On=decodeURIComponent(this._url.path);Mn.test(this._url.href)&&(On=On.replace(/^\//,""));const hi=require("fs");this._setReadableStream(hi.createReadStream(On,{start:Nn,end:Hn-1}))}}},(ki,$n,Pn)=>{Object.defineProperty($n,"__esModule",{value:!0}),$n.SVGGraphics=void 0;var Kn=Pn(6),oi=Pn(1);const Mn={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},ti="http://www.w3.org/XML/1998/namespace",In="http://www.w3.org/1999/xlink",Ln=["butt","round","square"],jn=["miter","round","bevel"],Cn=function(hi,Xn="",ii=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!ii)return URL.createObjectURL(new Blob([hi],{type:Xn}));const ri="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let di=`data:${Xn};base64,`;for(let fi=0,wi=hi.length;fi<wi;fi+=3){const Jn=hi[fi]&255,pi=hi[fi+1]&255,Zn=hi[fi+2]&255,Gn=Jn>>2,mi=(Jn&3)<<4|pi>>4,Wn=fi+1<wi?(pi&15)<<2|Zn>>6:64,ni=fi+2<wi?Zn&63:64;di+=ri[Gn]+ri[mi]+ri[Wn]+ri[ni]}return di},Tn=function(){const hi=new Uint8Array([137,80,78,71,13,10,26,10]),Xn=12,ii=new Int32Array(256);for(let Zn=0;Zn<256;Zn++){let Gn=Zn;for(let mi=0;mi<8;mi++)Gn=Gn&1?3988292384^Gn>>1&2147483647:Gn>>1&2147483647;ii[Zn]=Gn}function ri(Zn,Gn,mi){let Wn=-1;for(let ni=Gn;ni<mi;ni++){const li=(Wn^Zn[ni])&255,Ai=ii[li];Wn=Wn>>>8^Ai}return Wn^-1}function di(Zn,Gn,mi,Wn){let ni=Wn;const li=Gn.length;mi[ni]=li>>24&255,mi[ni+1]=li>>16&255,mi[ni+2]=li>>8&255,mi[ni+3]=li&255,ni+=4,mi[ni]=Zn.charCodeAt(0)&255,mi[ni+1]=Zn.charCodeAt(1)&255,mi[ni+2]=Zn.charCodeAt(2)&255,mi[ni+3]=Zn.charCodeAt(3)&255,ni+=4,mi.set(Gn,ni),ni+=Gn.length;const Ai=ri(mi,Wn+4,ni);mi[ni]=Ai>>24&255,mi[ni+1]=Ai>>16&255,mi[ni+2]=Ai>>8&255,mi[ni+3]=Ai&255}function fi(Zn,Gn,mi){let Wn=1,ni=0;for(let li=Gn;li<mi;++li)Wn=(Wn+(Zn[li]&255))%65521,ni=(ni+Wn)%65521;return ni<<16|Wn}function wi(Zn){if(!oi.isNodeJS)return Jn(Zn);try{const Gn=parseInt(process.versions.node)>=8?Zn:Buffer.from(Zn),mi=require("zlib").deflateSync(Gn,{level:9});return mi instanceof Uint8Array?mi:new Uint8Array(mi)}catch(Gn){(0,oi.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Gn)}return Jn(Zn)}function Jn(Zn){let Gn=Zn.length;const mi=65535,Wn=Math.ceil(Gn/mi),ni=new Uint8Array(2+Gn+Wn*5+4);let li=0;ni[li++]=120,ni[li++]=156;let Ai=0;for(;Gn>mi;)ni[li++]=0,ni[li++]=255,ni[li++]=255,ni[li++]=0,ni[li++]=0,ni.set(Zn.subarray(Ai,Ai+mi),li),li+=mi,Ai+=mi,Gn-=mi;ni[li++]=1,ni[li++]=Gn&255,ni[li++]=Gn>>8&255,ni[li++]=~Gn&65535&255,ni[li++]=(~Gn&65535)>>8&255,ni.set(Zn.subarray(Ai),li),li+=Zn.length-Ai;const gi=fi(Zn,0,Zn.length);return ni[li++]=gi>>24&255,ni[li++]=gi>>16&255,ni[li++]=gi>>8&255,ni[li++]=gi&255,ni}function pi(Zn,Gn,mi,Wn){const ni=Zn.width,li=Zn.height;let Ai,gi,yi;const Ii=Zn.data;switch(Gn){case oi.ImageKind.GRAYSCALE_1BPP:gi=0,Ai=1,yi=ni+7>>3;break;case oi.ImageKind.RGB_24BPP:gi=2,Ai=8,yi=ni*3;break;case oi.ImageKind.RGBA_32BPP:gi=6,Ai=8,yi=ni*4;break;default:throw new Error("invalid format")}const xi=new Uint8Array((1+yi)*li);let Qn=0,ai=0;for(let Fi=0;Fi<li;++Fi)xi[Qn++]=0,xi.set(Ii.subarray(ai,ai+yi),Qn),ai+=yi,Qn+=yi;if(Gn===oi.ImageKind.GRAYSCALE_1BPP&&Wn){Qn=0;for(let Fi=0;Fi<li;Fi++){Qn++;for(let zi=0;zi<yi;zi++)xi[Qn++]^=255}}const Vn=new Uint8Array([ni>>24&255,ni>>16&255,ni>>8&255,ni&255,li>>24&255,li>>16&255,li>>8&255,li&255,Ai,gi,0,0,0]),Yn=wi(xi),ci=hi.length+Xn*3+Vn.length+Yn.length,bi=new Uint8Array(ci);let Ci=0;return bi.set(hi,Ci),Ci+=hi.length,di("IHDR",Vn,bi,Ci),Ci+=Xn+Vn.length,di("IDATA",Yn,bi,Ci),Ci+=Xn+Yn.length,di("IEND",new Uint8Array(0),bi,Ci),Cn(bi,"image/png",mi)}return function(Gn,mi,Wn){const ni=Gn.kind===void 0?oi.ImageKind.GRAYSCALE_1BPP:Gn.kind;return pi(Gn,ni,mi,Wn)}}();class Rn{constructor(){this.fontSizeScale=1,this.fontWeight=Mn.fontWeight,this.fontSize=0,this.textMatrix=oi.IDENTITY_MATRIX,this.fontMatrix=oi.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=oi.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=Mn.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(Xn,ii){this.x=Xn,this.y=ii}}function ui(hi){let Xn=[];const ii=[];for(const ri of hi){if(ri.fn==="save"){Xn.push({fnId:92,fn:"group",items:[]}),ii.push(Xn),Xn=Xn.at(-1).items;continue}ri.fn==="restore"?Xn=ii.pop():Xn.push(ri)}return Xn}function si(hi){if(Number.isInteger(hi))return hi.toString();const Xn=hi.toFixed(10);let ii=Xn.length-1;if(Xn[ii]!=="0")return Xn;do ii--;while(Xn[ii]==="0");return Xn.substring(0,Xn[ii]==="."?ii:ii+1)}function ei(hi){if(hi[4]===0&&hi[5]===0){if(hi[1]===0&&hi[2]===0)return hi[0]===1&&hi[3]===1?"":`scale(${si(hi[0])} ${si(hi[3])})`;if(hi[0]===hi[3]&&hi[1]===-hi[2]){const Xn=Math.acos(hi[0])*180/Math.PI;return`rotate(${si(Xn)})`}}else if(hi[0]===1&&hi[1]===0&&hi[2]===0&&hi[3]===1)return`translate(${si(hi[4])} ${si(hi[5])})`;return`matrix(${si(hi[0])} ${si(hi[1])} ${si(hi[2])} ${si(hi[3])} ${si(hi[4])} ${si(hi[5])})`}let Bn=0,Nn=0,Hn=0;class On{constructor(Xn,ii,ri=!1){(0,Kn.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new Kn.DOMSVGFactory,this.current=new Rn,this.transformMatrix=oi.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=Xn,this.objs=ii,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!ri,this._operatorIdMapping=[];for(const di in oi.OPS)this._operatorIdMapping[oi.OPS[di]]=di}getObject(Xn,ii=null){return typeof Xn=="string"?Xn.startsWith("g_")?this.commonObjs.get(Xn):this.objs.get(Xn):ii}save(){this.transformStack.push(this.transformMatrix);const Xn=this.current;this.extraStack.push(Xn),this.current=Xn.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(Xn){this.save(),this.executeOpTree(Xn),this.restore()}loadDependencies(Xn){const ii=Xn.fnArray,ri=Xn.argsArray;for(let di=0,fi=ii.length;di<fi;di++)if(ii[di]===oi.OPS.dependency)for(const wi of ri[di]){const Jn=wi.startsWith("g_")?this.commonObjs:this.objs,pi=new Promise(Zn=>{Jn.get(wi,Zn)});this.current.dependencies.push(pi)}return Promise.all(this.current.dependencies)}transform(Xn,ii,ri,di,fi,wi){const Jn=[Xn,ii,ri,di,fi,wi];this.transformMatrix=oi.Util.transform(this.transformMatrix,Jn),this.tgrp=null}getSVG(Xn,ii){this.viewport=ii;const ri=this._initialize(ii);return this.loadDependencies(Xn).then(()=>(this.transformMatrix=oi.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(Xn)),ri))}convertOpList(Xn){const ii=this._operatorIdMapping,ri=Xn.argsArray,di=Xn.fnArray,fi=[];for(let wi=0,Jn=di.length;wi<Jn;wi++){const pi=di[wi];fi.push({fnId:pi,fn:ii[pi],args:ri[wi]})}return ui(fi)}executeOpTree(Xn){for(const ii of Xn){const ri=ii.fn,di=ii.fnId,fi=ii.args;switch(di|0){case oi.OPS.beginText:this.beginText();break;case oi.OPS.dependency:break;case oi.OPS.setLeading:this.setLeading(fi);break;case oi.OPS.setLeadingMoveText:this.setLeadingMoveText(fi[0],fi[1]);break;case oi.OPS.setFont:this.setFont(fi);break;case oi.OPS.showText:this.showText(fi[0]);break;case oi.OPS.showSpacedText:this.showText(fi[0]);break;case oi.OPS.endText:this.endText();break;case oi.OPS.moveText:this.moveText(fi[0],fi[1]);break;case oi.OPS.setCharSpacing:this.setCharSpacing(fi[0]);break;case oi.OPS.setWordSpacing:this.setWordSpacing(fi[0]);break;case oi.OPS.setHScale:this.setHScale(fi[0]);break;case oi.OPS.setTextMatrix:this.setTextMatrix(fi[0],fi[1],fi[2],fi[3],fi[4],fi[5]);break;case oi.OPS.setTextRise:this.setTextRise(fi[0]);break;case oi.OPS.setTextRenderingMode:this.setTextRenderingMode(fi[0]);break;case oi.OPS.setLineWidth:this.setLineWidth(fi[0]);break;case oi.OPS.setLineJoin:this.setLineJoin(fi[0]);break;case oi.OPS.setLineCap:this.setLineCap(fi[0]);break;case oi.OPS.setMiterLimit:this.setMiterLimit(fi[0]);break;case oi.OPS.setFillRGBColor:this.setFillRGBColor(fi[0],fi[1],fi[2]);break;case oi.OPS.setStrokeRGBColor:this.setStrokeRGBColor(fi[0],fi[1],fi[2]);break;case oi.OPS.setStrokeColorN:this.setStrokeColorN(fi);break;case oi.OPS.setFillColorN:this.setFillColorN(fi);break;case oi.OPS.shadingFill:this.shadingFill(fi[0]);break;case oi.OPS.setDash:this.setDash(fi[0],fi[1]);break;case oi.OPS.setRenderingIntent:this.setRenderingIntent(fi[0]);break;case oi.OPS.setFlatness:this.setFlatness(fi[0]);break;case oi.OPS.setGState:this.setGState(fi[0]);break;case oi.OPS.fill:this.fill();break;case oi.OPS.eoFill:this.eoFill();break;case oi.OPS.stroke:this.stroke();break;case oi.OPS.fillStroke:this.fillStroke();break;case oi.OPS.eoFillStroke:this.eoFillStroke();break;case oi.OPS.clip:this.clip("nonzero");break;case oi.OPS.eoClip:this.clip("evenodd");break;case oi.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case oi.OPS.paintImageXObject:this.paintImageXObject(fi[0]);break;case oi.OPS.paintInlineImageXObject:this.paintInlineImageXObject(fi[0]);break;case oi.OPS.paintImageMaskXObject:this.paintImageMaskXObject(fi[0]);break;case oi.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(fi[0],fi[1]);break;case oi.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case oi.OPS.closePath:this.closePath();break;case oi.OPS.closeStroke:this.closeStroke();break;case oi.OPS.closeFillStroke:this.closeFillStroke();break;case oi.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case oi.OPS.nextLine:this.nextLine();break;case oi.OPS.transform:this.transform(fi[0],fi[1],fi[2],fi[3],fi[4],fi[5]);break;case oi.OPS.constructPath:this.constructPath(fi[0],fi[1]);break;case oi.OPS.endPath:this.endPath();break;case 92:this.group(ii.items);break;default:(0,oi.warn)(`Unimplemented operator ${ri}`);break}}}setWordSpacing(Xn){this.current.wordSpacing=Xn}setCharSpacing(Xn){this.current.charSpacing=Xn}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(Xn,ii,ri,di,fi,wi){const Jn=this.current;Jn.textMatrix=Jn.lineMatrix=[Xn,ii,ri,di,fi,wi],Jn.textMatrixScale=Math.hypot(Xn,ii),Jn.x=Jn.lineX=0,Jn.y=Jn.lineY=0,Jn.xcoords=[],Jn.ycoords=[],Jn.tspan=this.svgFactory.createElement("svg:tspan"),Jn.tspan.setAttributeNS(null,"font-family",Jn.fontFamily),Jn.tspan.setAttributeNS(null,"font-size",`${si(Jn.fontSize)}px`),Jn.tspan.setAttributeNS(null,"y",si(-Jn.y)),Jn.txtElement=this.svgFactory.createElement("svg:text"),Jn.txtElement.append(Jn.tspan)}beginText(){const Xn=this.current;Xn.x=Xn.lineX=0,Xn.y=Xn.lineY=0,Xn.textMatrix=oi.IDENTITY_MATRIX,Xn.lineMatrix=oi.IDENTITY_MATRIX,Xn.textMatrixScale=1,Xn.tspan=this.svgFactory.createElement("svg:tspan"),Xn.txtElement=this.svgFactory.createElement("svg:text"),Xn.txtgrp=this.svgFactory.createElement("svg:g"),Xn.xcoords=[],Xn.ycoords=[]}moveText(Xn,ii){const ri=this.current;ri.x=ri.lineX+=Xn,ri.y=ri.lineY+=ii,ri.xcoords=[],ri.ycoords=[],ri.tspan=this.svgFactory.createElement("svg:tspan"),ri.tspan.setAttributeNS(null,"font-family",ri.fontFamily),ri.tspan.setAttributeNS(null,"font-size",`${si(ri.fontSize)}px`),ri.tspan.setAttributeNS(null,"y",si(-ri.y))}showText(Xn){const ii=this.current,ri=ii.font,di=ii.fontSize;if(di===0)return;const fi=ii.fontSizeScale,wi=ii.charSpacing,Jn=ii.wordSpacing,pi=ii.fontDirection,Zn=ii.textHScale*pi,Gn=ri.vertical,mi=Gn?1:-1,Wn=ri.defaultVMetrics,ni=di*ii.fontMatrix[0];let li=0;for(const yi of Xn){if(yi===null){li+=pi*Jn;continue}else if(typeof yi=="number"){li+=mi*yi*di/1e3;continue}const Ii=(yi.isSpace?Jn:0)+wi,xi=yi.fontChar;let Qn,ai,Vn=yi.width;if(Gn){let ci;const bi=yi.vmetric||Wn;ci=yi.vmetric?bi[1]:Vn*.5,ci=-ci*ni;const Ci=bi[2]*ni;Vn=bi?-bi[0]:Vn,Qn=ci/fi,ai=(li+Ci)/fi}else Qn=li/fi,ai=0;(yi.isInFont||ri.missingFile)&&(ii.xcoords.push(ii.x+Qn),Gn&&ii.ycoords.push(-ii.y+ai),ii.tspan.textContent+=xi);const Yn=Gn?Vn*ni-Ii*pi:Vn*ni+Ii*pi;li+=Yn}ii.tspan.setAttributeNS(null,"x",ii.xcoords.map(si).join(" ")),Gn?ii.tspan.setAttributeNS(null,"y",ii.ycoords.map(si).join(" ")):ii.tspan.setAttributeNS(null,"y",si(-ii.y)),Gn?ii.y-=li:ii.x+=li*Zn,ii.tspan.setAttributeNS(null,"font-family",ii.fontFamily),ii.tspan.setAttributeNS(null,"font-size",`${si(ii.fontSize)}px`),ii.fontStyle!==Mn.fontStyle&&ii.tspan.setAttributeNS(null,"font-style",ii.fontStyle),ii.fontWeight!==Mn.fontWeight&&ii.tspan.setAttributeNS(null,"font-weight",ii.fontWeight);const Ai=ii.textRenderingMode&oi.TextRenderingMode.FILL_STROKE_MASK;if(Ai===oi.TextRenderingMode.FILL||Ai===oi.TextRenderingMode.FILL_STROKE?(ii.fillColor!==Mn.fillColor&&ii.tspan.setAttributeNS(null,"fill",ii.fillColor),ii.fillAlpha<1&&ii.tspan.setAttributeNS(null,"fill-opacity",ii.fillAlpha)):ii.textRenderingMode===oi.TextRenderingMode.ADD_TO_PATH?ii.tspan.setAttributeNS(null,"fill","transparent"):ii.tspan.setAttributeNS(null,"fill","none"),Ai===oi.TextRenderingMode.STROKE||Ai===oi.TextRenderingMode.FILL_STROKE){const yi=1/(ii.textMatrixScale||1);this._setStrokeAttributes(ii.tspan,yi)}let gi=ii.textMatrix;ii.textRise!==0&&(gi=gi.slice(),gi[5]+=ii.textRise),ii.txtElement.setAttributeNS(null,"transform",`${ei(gi)} scale(${si(Zn)}, -1)`),ii.txtElement.setAttributeNS(ti,"xml:space","preserve"),ii.txtElement.append(ii.tspan),ii.txtgrp.append(ii.txtElement),this._ensureTransformGroup().append(ii.txtElement)}setLeadingMoveText(Xn,ii){this.setLeading(-ii),this.moveText(Xn,ii)}addFontStyle(Xn){if(!Xn.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const ii=Cn(Xn.data,Xn.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${Xn.loadedName}"; src: url(${ii}); }
`}setFont(Xn){const ii=this.current,ri=this.commonObjs.get(Xn[0]);let di=Xn[1];ii.font=ri,this.embedFonts&&!ri.missingFile&&!this.embeddedFonts[ri.loadedName]&&(this.addFontStyle(ri),this.embeddedFonts[ri.loadedName]=ri),ii.fontMatrix=ri.fontMatrix||oi.FONT_IDENTITY_MATRIX;let fi="normal";ri.black?fi="900":ri.bold&&(fi="bold");const wi=ri.italic?"italic":"normal";di<0?(di=-di,ii.fontDirection=-1):ii.fontDirection=1,ii.fontSize=di,ii.fontFamily=ri.loadedName,ii.fontWeight=fi,ii.fontStyle=wi,ii.tspan=this.svgFactory.createElement("svg:tspan"),ii.tspan.setAttributeNS(null,"y",si(-ii.y)),ii.xcoords=[],ii.ycoords=[]}endText(){var ii;const Xn=this.current;Xn.textRenderingMode&oi.TextRenderingMode.ADD_TO_PATH_FLAG&&((ii=Xn.txtElement)!=null&&ii.hasChildNodes())&&(Xn.element=Xn.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(Xn){Xn>0&&(this.current.lineWidth=Xn)}setLineCap(Xn){this.current.lineCap=Ln[Xn]}setLineJoin(Xn){this.current.lineJoin=jn[Xn]}setMiterLimit(Xn){this.current.miterLimit=Xn}setStrokeAlpha(Xn){this.current.strokeAlpha=Xn}setStrokeRGBColor(Xn,ii,ri){this.current.strokeColor=oi.Util.makeHexColor(Xn,ii,ri)}setFillAlpha(Xn){this.current.fillAlpha=Xn}setFillRGBColor(Xn,ii,ri){this.current.fillColor=oi.Util.makeHexColor(Xn,ii,ri),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(Xn){this.current.strokeColor=this._makeColorN_Pattern(Xn)}setFillColorN(Xn){this.current.fillColor=this._makeColorN_Pattern(Xn)}shadingFill(Xn){const{width:ii,height:ri}=this.viewport,di=oi.Util.inverseTransform(this.transformMatrix),[fi,wi,Jn,pi]=oi.Util.getAxialAlignedBoundingBox([0,0,ii,ri],di),Zn=this.svgFactory.createElement("svg:rect");Zn.setAttributeNS(null,"x",fi),Zn.setAttributeNS(null,"y",wi),Zn.setAttributeNS(null,"width",Jn-fi),Zn.setAttributeNS(null,"height",pi-wi),Zn.setAttributeNS(null,"fill",this._makeShadingPattern(Xn)),this.current.fillAlpha<1&&Zn.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Zn)}_makeColorN_Pattern(Xn){return Xn[0]==="TilingPattern"?this._makeTilingPattern(Xn):this._makeShadingPattern(Xn)}_makeTilingPattern(Xn){const ii=Xn[1],ri=Xn[2],di=Xn[3]||oi.IDENTITY_MATRIX,[fi,wi,Jn,pi]=Xn[4],Zn=Xn[5],Gn=Xn[6],mi=Xn[7],Wn=`shading${Hn++}`,[ni,li,Ai,gi]=oi.Util.normalizeRect([...oi.Util.applyTransform([fi,wi],di),...oi.Util.applyTransform([Jn,pi],di)]),[yi,Ii]=oi.Util.singularValueDecompose2dScale(di),xi=Zn*yi,Qn=Gn*Ii,ai=this.svgFactory.createElement("svg:pattern");ai.setAttributeNS(null,"id",Wn),ai.setAttributeNS(null,"patternUnits","userSpaceOnUse"),ai.setAttributeNS(null,"width",xi),ai.setAttributeNS(null,"height",Qn),ai.setAttributeNS(null,"x",`${ni}`),ai.setAttributeNS(null,"y",`${li}`);const Vn=this.svg,Yn=this.transformMatrix,ci=this.current.fillColor,bi=this.current.strokeColor,Ci=this.svgFactory.create(Ai-ni,gi-li);if(this.svg=Ci,this.transformMatrix=di,mi===2){const Fi=oi.Util.makeHexColor(...ii);this.current.fillColor=Fi,this.current.strokeColor=Fi}return this.executeOpTree(this.convertOpList(ri)),this.svg=Vn,this.transformMatrix=Yn,this.current.fillColor=ci,this.current.strokeColor=bi,ai.append(Ci.childNodes[0]),this.defs.append(ai),`url(#${Wn})`}_makeShadingPattern(Xn){switch(typeof Xn=="string"&&(Xn=this.objs.get(Xn)),Xn[0]){case"RadialAxial":const ii=`shading${Hn++}`,ri=Xn[3];let di;switch(Xn[1]){case"axial":const fi=Xn[4],wi=Xn[5];di=this.svgFactory.createElement("svg:linearGradient"),di.setAttributeNS(null,"id",ii),di.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),di.setAttributeNS(null,"x1",fi[0]),di.setAttributeNS(null,"y1",fi[1]),di.setAttributeNS(null,"x2",wi[0]),di.setAttributeNS(null,"y2",wi[1]);break;case"radial":const Jn=Xn[4],pi=Xn[5],Zn=Xn[6],Gn=Xn[7];di=this.svgFactory.createElement("svg:radialGradient"),di.setAttributeNS(null,"id",ii),di.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),di.setAttributeNS(null,"cx",pi[0]),di.setAttributeNS(null,"cy",pi[1]),di.setAttributeNS(null,"r",Gn),di.setAttributeNS(null,"fx",Jn[0]),di.setAttributeNS(null,"fy",Jn[1]),di.setAttributeNS(null,"fr",Zn);break;default:throw new Error(`Unknown RadialAxial type: ${Xn[1]}`)}for(const fi of ri){const wi=this.svgFactory.createElement("svg:stop");wi.setAttributeNS(null,"offset",fi[0]),wi.setAttributeNS(null,"stop-color",fi[1]),di.append(wi)}return this.defs.append(di),`url(#${ii})`;case"Mesh":return(0,oi.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${Xn[0]}`)}}setDash(Xn,ii){this.current.dashArray=Xn,this.current.dashPhase=ii}constructPath(Xn,ii){const ri=this.current;let di=ri.x,fi=ri.y,wi=[],Jn=0;for(const pi of Xn)switch(pi|0){case oi.OPS.rectangle:di=ii[Jn++],fi=ii[Jn++];const Zn=ii[Jn++],Gn=ii[Jn++],mi=di+Zn,Wn=fi+Gn;wi.push("M",si(di),si(fi),"L",si(mi),si(fi),"L",si(mi),si(Wn),"L",si(di),si(Wn),"Z");break;case oi.OPS.moveTo:di=ii[Jn++],fi=ii[Jn++],wi.push("M",si(di),si(fi));break;case oi.OPS.lineTo:di=ii[Jn++],fi=ii[Jn++],wi.push("L",si(di),si(fi));break;case oi.OPS.curveTo:di=ii[Jn+4],fi=ii[Jn+5],wi.push("C",si(ii[Jn]),si(ii[Jn+1]),si(ii[Jn+2]),si(ii[Jn+3]),si(di),si(fi)),Jn+=6;break;case oi.OPS.curveTo2:wi.push("C",si(di),si(fi),si(ii[Jn]),si(ii[Jn+1]),si(ii[Jn+2]),si(ii[Jn+3])),di=ii[Jn+2],fi=ii[Jn+3],Jn+=4;break;case oi.OPS.curveTo3:di=ii[Jn+2],fi=ii[Jn+3],wi.push("C",si(ii[Jn]),si(ii[Jn+1]),si(di),si(fi),si(di),si(fi)),Jn+=4;break;case oi.OPS.closePath:wi.push("Z");break}wi=wi.join(" "),ri.path&&Xn.length>0&&Xn[0]!==oi.OPS.rectangle&&Xn[0]!==oi.OPS.moveTo?wi=ri.path.getAttributeNS(null,"d")+wi:(ri.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(ri.path)),ri.path.setAttributeNS(null,"d",wi),ri.path.setAttributeNS(null,"fill","none"),ri.element=ri.path,ri.setCurrentPoint(di,fi)}endPath(){const Xn=this.current;if(Xn.path=null,!this.pendingClip)return;if(!Xn.element){this.pendingClip=null;return}const ii=`clippath${Bn++}`,ri=this.svgFactory.createElement("svg:clipPath");ri.setAttributeNS(null,"id",ii),ri.setAttributeNS(null,"transform",ei(this.transformMatrix));const di=Xn.element.cloneNode(!0);if(this.pendingClip==="evenodd"?di.setAttributeNS(null,"clip-rule","evenodd"):di.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,ri.append(di),this.defs.append(ri),Xn.activeClipUrl){Xn.clipGroup=null;for(const fi of this.extraStack)fi.clipGroup=null;ri.setAttributeNS(null,"clip-path",Xn.activeClipUrl)}Xn.activeClipUrl=`url(#${ii})`,this.tgrp=null}clip(Xn){this.pendingClip=Xn}closePath(){const Xn=this.current;if(Xn.path){const ii=`${Xn.path.getAttributeNS(null,"d")}Z`;Xn.path.setAttributeNS(null,"d",ii)}}setLeading(Xn){this.current.leading=-Xn}setTextRise(Xn){this.current.textRise=Xn}setTextRenderingMode(Xn){this.current.textRenderingMode=Xn}setHScale(Xn){this.current.textHScale=Xn/100}setRenderingIntent(Xn){}setFlatness(Xn){}setGState(Xn){for(const[ii,ri]of Xn)switch(ii){case"LW":this.setLineWidth(ri);break;case"LC":this.setLineCap(ri);break;case"LJ":this.setLineJoin(ri);break;case"ML":this.setMiterLimit(ri);break;case"D":this.setDash(ri[0],ri[1]);break;case"RI":this.setRenderingIntent(ri);break;case"FL":this.setFlatness(ri);break;case"Font":this.setFont(ri);break;case"CA":this.setStrokeAlpha(ri);break;case"ca":this.setFillAlpha(ri);break;default:(0,oi.warn)(`Unimplemented graphic state operator ${ii}`);break}}fill(){const Xn=this.current;Xn.element&&(Xn.element.setAttributeNS(null,"fill",Xn.fillColor),Xn.element.setAttributeNS(null,"fill-opacity",Xn.fillAlpha),this.endPath())}stroke(){const Xn=this.current;Xn.element&&(this._setStrokeAttributes(Xn.element),Xn.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(Xn,ii=1){const ri=this.current;let di=ri.dashArray;ii!==1&&di.length>0&&(di=di.map(function(fi){return ii*fi})),Xn.setAttributeNS(null,"stroke",ri.strokeColor),Xn.setAttributeNS(null,"stroke-opacity",ri.strokeAlpha),Xn.setAttributeNS(null,"stroke-miterlimit",si(ri.miterLimit)),Xn.setAttributeNS(null,"stroke-linecap",ri.lineCap),Xn.setAttributeNS(null,"stroke-linejoin",ri.lineJoin),Xn.setAttributeNS(null,"stroke-width",si(ii*ri.lineWidth)+"px"),Xn.setAttributeNS(null,"stroke-dasharray",di.map(si).join(" ")),Xn.setAttributeNS(null,"stroke-dashoffset",si(ii*ri.dashPhase)+"px")}eoFill(){var Xn;(Xn=this.current.element)==null||Xn.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var Xn;(Xn=this.current.element)==null||Xn.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const Xn=this.svgFactory.createElement("svg:rect");Xn.setAttributeNS(null,"x","0"),Xn.setAttributeNS(null,"y","0"),Xn.setAttributeNS(null,"width","1px"),Xn.setAttributeNS(null,"height","1px"),Xn.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(Xn)}paintImageXObject(Xn){const ii=this.getObject(Xn);if(!ii){(0,oi.warn)(`Dependent image with object ID ${Xn} is not ready yet`);return}this.paintInlineImageXObject(ii)}paintInlineImageXObject(Xn,ii){const ri=Xn.width,di=Xn.height,fi=Tn(Xn,this.forceDataSchema,!!ii),wi=this.svgFactory.createElement("svg:rect");wi.setAttributeNS(null,"x","0"),wi.setAttributeNS(null,"y","0"),wi.setAttributeNS(null,"width",si(ri)),wi.setAttributeNS(null,"height",si(di)),this.current.element=wi,this.clip("nonzero");const Jn=this.svgFactory.createElement("svg:image");Jn.setAttributeNS(In,"xlink:href",fi),Jn.setAttributeNS(null,"x","0"),Jn.setAttributeNS(null,"y",si(-di)),Jn.setAttributeNS(null,"width",si(ri)+"px"),Jn.setAttributeNS(null,"height",si(di)+"px"),Jn.setAttributeNS(null,"transform",`scale(${si(1/ri)} ${si(-1/di)})`),ii?ii.append(Jn):this._ensureTransformGroup().append(Jn)}paintImageMaskXObject(Xn){const ii=this.getObject(Xn.data,Xn);if(ii.bitmap){(0,oi.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const ri=this.current,di=ii.width,fi=ii.height,wi=ri.fillColor;ri.maskId=`mask${Nn++}`;const Jn=this.svgFactory.createElement("svg:mask");Jn.setAttributeNS(null,"id",ri.maskId);const pi=this.svgFactory.createElement("svg:rect");pi.setAttributeNS(null,"x","0"),pi.setAttributeNS(null,"y","0"),pi.setAttributeNS(null,"width",si(di)),pi.setAttributeNS(null,"height",si(fi)),pi.setAttributeNS(null,"fill",wi),pi.setAttributeNS(null,"mask",`url(#${ri.maskId})`),this.defs.append(Jn),this._ensureTransformGroup().append(pi),this.paintInlineImageXObject(ii,Jn)}paintFormXObjectBegin(Xn,ii){if(Array.isArray(Xn)&&Xn.length===6&&this.transform(Xn[0],Xn[1],Xn[2],Xn[3],Xn[4],Xn[5]),ii){const ri=ii[2]-ii[0],di=ii[3]-ii[1],fi=this.svgFactory.createElement("svg:rect");fi.setAttributeNS(null,"x",ii[0]),fi.setAttributeNS(null,"y",ii[1]),fi.setAttributeNS(null,"width",si(ri)),fi.setAttributeNS(null,"height",si(di)),this.current.element=fi,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(Xn){const ii=this.svgFactory.create(Xn.width,Xn.height),ri=this.svgFactory.createElement("svg:defs");ii.append(ri),this.defs=ri;const di=this.svgFactory.createElement("svg:g");return di.setAttributeNS(null,"transform",ei(Xn.transform)),ii.append(di),this.svg=di,ii}_ensureClipGroup(){if(!this.current.clipGroup){const Xn=this.svgFactory.createElement("svg:g");Xn.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(Xn),this.current.clipGroup=Xn}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",ei(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}$n.SVGGraphics=On},(ki,$n)=>{Object.defineProperty($n,"__esModule",{value:!0}),$n.XfaText=void 0;class Pn{static textContent(oi){const Mn=[],ti={items:Mn,styles:Object.create(null)};function In(Ln){var Tn;if(!Ln)return;let jn=null;const Cn=Ln.name;if(Cn==="#text")jn=Ln.value;else if(Pn.shouldBuildText(Cn))(Tn=Ln==null?void 0:Ln.attributes)!=null&&Tn.textContent?jn=Ln.attributes.textContent:Ln.value&&(jn=Ln.value);else return;if(jn!==null&&Mn.push({str:jn}),!!Ln.children)for(const Rn of Ln.children)In(Rn)}return In(oi),ti}static shouldBuildText(oi){return!(oi==="textarea"||oi==="input"||oi==="option"||oi==="select")}}$n.XfaText=Pn},(ki,$n,Pn)=>{Object.defineProperty($n,"__esModule",{value:!0}),$n.TextLayerRenderTask=void 0,$n.renderTextLayer=ei,$n.updateTextLayer=Bn;var Kn=Pn(1),oi=Pn(6);const Mn=1e5,ti=30,In=.8,Ln=new Map;function jn(Nn,Hn){let On;if(Hn&&Kn.FeatureTest.isOffscreenCanvasSupported)On=new OffscreenCanvas(Nn,Nn).getContext("2d",{alpha:!1});else{const hi=document.createElement("canvas");hi.width=hi.height=Nn,On=hi.getContext("2d",{alpha:!1})}return On}function Cn(Nn,Hn){const On=Ln.get(Nn);if(On)return On;const hi=jn(ti,Hn);hi.font=`${ti}px ${Nn}`;const Xn=hi.measureText("");let ii=Xn.fontBoundingBoxAscent,ri=Math.abs(Xn.fontBoundingBoxDescent);if(ii){const fi=ii/(ii+ri);return Ln.set(Nn,fi),hi.canvas.width=hi.canvas.height=0,fi}hi.strokeStyle="red",hi.clearRect(0,0,ti,ti),hi.strokeText("g",0,0);let di=hi.getImageData(0,0,ti,ti).data;ri=0;for(let fi=di.length-1-3;fi>=0;fi-=4)if(di[fi]>0){ri=Math.ceil(fi/4/ti);break}hi.clearRect(0,0,ti,ti),hi.strokeText("A",0,ti),di=hi.getImageData(0,0,ti,ti).data,ii=0;for(let fi=0,wi=di.length;fi<wi;fi+=4)if(di[fi]>0){ii=ti-Math.floor(fi/4/ti);break}if(hi.canvas.width=hi.canvas.height=0,ii){const fi=ii/(ii+ri);return Ln.set(Nn,fi),fi}return Ln.set(Nn,In),In}function Tn(Nn,Hn,On){const hi=document.createElement("span"),Xn={angle:0,canvasWidth:0,hasText:Hn.str!=="",hasEOL:Hn.hasEOL,fontSize:0};Nn._textDivs.push(hi);const ii=Kn.Util.transform(Nn._transform,Hn.transform);let ri=Math.atan2(ii[1],ii[0]);const di=On[Hn.fontName];di.vertical&&(ri+=Math.PI/2);const fi=Math.hypot(ii[2],ii[3]),wi=fi*Cn(di.fontFamily,Nn._isOffscreenCanvasSupported);let Jn,pi;ri===0?(Jn=ii[4],pi=ii[5]-wi):(Jn=ii[4]+wi*Math.sin(ri),pi=ii[5]-wi*Math.cos(ri));const Zn="calc(var(--scale-factor)*",Gn=hi.style;Nn._container===Nn._rootContainer?(Gn.left=`${(100*Jn/Nn._pageWidth).toFixed(2)}%`,Gn.top=`${(100*pi/Nn._pageHeight).toFixed(2)}%`):(Gn.left=`${Zn}${Jn.toFixed(2)}px)`,Gn.top=`${Zn}${pi.toFixed(2)}px)`),Gn.fontSize=`${Zn}${fi.toFixed(2)}px)`,Gn.fontFamily=di.fontFamily,Xn.fontSize=fi,hi.setAttribute("role","presentation"),hi.textContent=Hn.str,hi.dir=Hn.dir,Nn._fontInspectorEnabled&&(hi.dataset.fontName=Hn.fontName),ri!==0&&(Xn.angle=ri*(180/Math.PI));let mi=!1;if(Hn.str.length>1)mi=!0;else if(Hn.str!==" "&&Hn.transform[0]!==Hn.transform[3]){const Wn=Math.abs(Hn.transform[0]),ni=Math.abs(Hn.transform[3]);Wn!==ni&&Math.max(Wn,ni)/Math.min(Wn,ni)>1.5&&(mi=!0)}mi&&(Xn.canvasWidth=di.vertical?Hn.height:Hn.width),Nn._textDivProperties.set(hi,Xn),Nn._isReadableStream&&Nn._layoutText(hi)}function Rn(Nn){const{div:Hn,scale:On,properties:hi,ctx:Xn,prevFontSize:ii,prevFontFamily:ri}=Nn,{style:di}=Hn;let fi="";if(hi.canvasWidth!==0&&hi.hasText){const{fontFamily:wi}=di,{canvasWidth:Jn,fontSize:pi}=hi;(ii!==pi||ri!==wi)&&(Xn.font=`${pi*On}px ${wi}`,Nn.prevFontSize=pi,Nn.prevFontFamily=wi);const{width:Zn}=Xn.measureText(Hn.textContent);Zn>0&&(fi=`scaleX(${Jn*On/Zn})`)}hi.angle!==0&&(fi=`rotate(${hi.angle}deg) ${fi}`),fi.length>0&&(di.transform=fi)}function ui(Nn){if(Nn._canceled)return;const Hn=Nn._textDivs,On=Nn._capability;if(Hn.length>Mn){On.resolve();return}if(!Nn._isReadableStream)for(const Xn of Hn)Nn._layoutText(Xn);On.resolve()}class si{constructor({textContentSource:Hn,container:On,viewport:hi,textDivs:Xn,textDivProperties:ii,textContentItemsStr:ri,isOffscreenCanvasSupported:di}){var Zn;this._textContentSource=Hn,this._isReadableStream=Hn instanceof ReadableStream,this._container=this._rootContainer=On,this._textDivs=Xn||[],this._textContentItemsStr=ri||[],this._isOffscreenCanvasSupported=di,this._fontInspectorEnabled=!!((Zn=globalThis.FontInspector)!=null&&Zn.enabled),this._reader=null,this._textDivProperties=ii||new WeakMap,this._canceled=!1,this._capability=new Kn.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:hi.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:jn(0,di)};const{pageWidth:fi,pageHeight:wi,pageX:Jn,pageY:pi}=hi.rawDims;this._transform=[1,0,0,-1,-Jn,pi+wi],this._pageWidth=fi,this._pageHeight=wi,(0,oi.setLayerDimensions)(On,hi),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new Kn.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new Kn.AbortException("TextLayer task cancelled."))}_processItems(Hn,On){for(const hi of Hn){if(hi.str===void 0){if(hi.type==="beginMarkedContentProps"||hi.type==="beginMarkedContent"){const Xn=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),hi.id!==null&&this._container.setAttribute("id",`${hi.id}`),Xn.append(this._container)}else hi.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(hi.str),Tn(this,hi,On)}}_layoutText(Hn){const On=this._layoutTextParams.properties=this._textDivProperties.get(Hn);if(this._layoutTextParams.div=Hn,Rn(this._layoutTextParams),On.hasText&&this._container.append(Hn),On.hasEOL){const hi=document.createElement("br");hi.setAttribute("role","presentation"),this._container.append(hi)}}_render(){const Hn=new Kn.PromiseCapability;let On=Object.create(null);if(this._isReadableStream){const hi=()=>{this._reader.read().then(({value:Xn,done:ii})=>{if(ii){Hn.resolve();return}Object.assign(On,Xn.styles),this._processItems(Xn.items,On),hi()},Hn.reject)};this._reader=this._textContentSource.getReader(),hi()}else if(this._textContentSource){const{items:hi,styles:Xn}=this._textContentSource;this._processItems(hi,Xn),Hn.resolve()}else throw new Error('No "textContentSource" parameter specified.');Hn.promise.then(()=>{On=null,ui(this)},this._capability.reject)}}$n.TextLayerRenderTask=si;function ei(Nn){!Nn.textContentSource&&(Nn.textContent||Nn.textContentStream)&&((0,oi.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),Nn.textContentSource=Nn.textContent||Nn.textContentStream);const{container:Hn,viewport:On}=Nn,hi=getComputedStyle(Hn),Xn=hi.getPropertyValue("visibility"),ii=parseFloat(hi.getPropertyValue("--scale-factor"));Xn==="visible"&&(!ii||Math.abs(ii-On.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const ri=new si(Nn);return ri._render(),ri}function Bn({container:Nn,viewport:Hn,textDivs:On,textDivProperties:hi,isOffscreenCanvasSupported:Xn,mustRotate:ii=!0,mustRescale:ri=!0}){if(ii&&(0,oi.setLayerDimensions)(Nn,{rotation:Hn.rotation}),ri){const di=jn(0,Xn),wi={prevFontSize:null,prevFontFamily:null,div:null,scale:Hn.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:di};for(const Jn of On)wi.properties=hi.get(Jn),wi.div=Jn,Rn(wi)}}},(ki,$n,Pn)=>{var Cn,Tn,Rn,ui,si,ei,Bn,Nn,Hn,On,hi,yl,ii,mc,di,wl,wi,Sl;Object.defineProperty($n,"__esModule",{value:!0}),$n.AnnotationEditorLayer=void 0;var Kn=Pn(1),oi=Pn(4),Mn=Pn(28),ti=Pn(33),In=Pn(6),Ln=Pn(34);const pi=class pi{constructor({uiManager:Gn,pageIndex:mi,div:Wn,accessibilityManager:ni,annotationLayer:li,viewport:Ai,l10n:gi}){Ki(this,hi);Ki(this,ii);Ki(this,di);Ki(this,wi);Ki(this,Cn,void 0);Ki(this,Tn,!1);Ki(this,Rn,null);Ki(this,ui,this.pointerup.bind(this));Ki(this,si,this.pointerdown.bind(this));Ki(this,ei,new Map);Ki(this,Bn,!1);Ki(this,Nn,!1);Ki(this,Hn,!1);Ki(this,On,void 0);const yi=[Mn.FreeTextEditor,ti.InkEditor,Ln.StampEditor];if(!pi._initialized){pi._initialized=!0;for(const Ii of yi)Ii.initialize(gi)}Gn.registerEditorTypes(yi),ds(this,On,Gn),this.pageIndex=mi,this.div=Wn,ds(this,Cn,ni),ds(this,Rn,li),this.viewport=Ai,vi(this,On).addLayer(this)}get isEmpty(){return vi(this,ei).size===0}updateToolbar(Gn){vi(this,On).updateToolbar(Gn)}updateMode(Gn=vi(this,On).getMode()){Qi(this,wi,Sl).call(this),Gn===Kn.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),Gn!==Kn.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",Gn===Kn.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",Gn===Kn.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",Gn===Kn.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(Gn){if(!Gn&&vi(this,On).getMode()!==Kn.AnnotationEditorType.INK)return;if(!Gn){for(const Wn of vi(this,ei).values())if(Wn.isEmpty()){Wn.setInBackground();return}}Qi(this,ii,mc).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(Gn){vi(this,On).setEditingState(Gn)}addCommands(Gn){vi(this,On).addCommands(Gn)}enable(){this.div.style.pointerEvents="auto";const Gn=new Set;for(const Wn of vi(this,ei).values())Wn.enableEditing(),Wn.annotationElementId&&Gn.add(Wn.annotationElementId);if(!vi(this,Rn))return;const mi=vi(this,Rn).getEditableAnnotations();for(const Wn of mi){if(Wn.hide(),vi(this,On).isDeletedAnnotationElement(Wn.data.id)||Gn.has(Wn.data.id))continue;const ni=this.deserialize(Wn);ni&&(this.addOrRebuild(ni),ni.enableEditing())}}disable(){var mi;ds(this,Hn,!0),this.div.style.pointerEvents="none";const Gn=new Set;for(const Wn of vi(this,ei).values()){if(Wn.disableEditing(),!Wn.annotationElementId||Wn.serialize()!==null){Gn.add(Wn.annotationElementId);continue}(mi=this.getEditableAnnotation(Wn.annotationElementId))==null||mi.show(),Wn.remove()}if(vi(this,Rn)){const Wn=vi(this,Rn).getEditableAnnotations();for(const ni of Wn){const{id:li}=ni.data;Gn.has(li)||vi(this,On).isDeletedAnnotationElement(li)||ni.show()}}Qi(this,wi,Sl).call(this),this.isEmpty&&(this.div.hidden=!0),ds(this,Hn,!1)}getEditableAnnotation(Gn){var mi;return((mi=vi(this,Rn))==null?void 0:mi.getEditableAnnotation(Gn))||null}setActiveEditor(Gn){vi(this,On).getActive()!==Gn&&vi(this,On).setActiveEditor(Gn)}enableClick(){this.div.addEventListener("pointerdown",vi(this,si)),this.div.addEventListener("pointerup",vi(this,ui))}disableClick(){this.div.removeEventListener("pointerdown",vi(this,si)),this.div.removeEventListener("pointerup",vi(this,ui))}attach(Gn){vi(this,ei).set(Gn.id,Gn);const{annotationElementId:mi}=Gn;mi&&vi(this,On).isDeletedAnnotationElement(mi)&&vi(this,On).removeDeletedAnnotationElement(Gn)}detach(Gn){var mi;vi(this,ei).delete(Gn.id),(mi=vi(this,Cn))==null||mi.removePointerInTextLayer(Gn.contentDiv),!vi(this,Hn)&&Gn.annotationElementId&&vi(this,On).addDeletedAnnotationElement(Gn)}remove(Gn){this.detach(Gn),vi(this,On).removeEditor(Gn),Gn.div.contains(document.activeElement)&&setTimeout(()=>{vi(this,On).focusMainContainer()},0),Gn.div.remove(),Gn.isAttachedToDOM=!1,vi(this,Nn)||this.addInkEditorIfNeeded(!1)}changeParent(Gn){var mi;Gn.parent!==this&&(Gn.annotationElementId&&(vi(this,On).addDeletedAnnotationElement(Gn.annotationElementId),oi.AnnotationEditor.deleteAnnotationElement(Gn),Gn.annotationElementId=null),this.attach(Gn),(mi=Gn.parent)==null||mi.detach(Gn),Gn.setParent(this),Gn.div&&Gn.isAttachedToDOM&&(Gn.div.remove(),this.div.append(Gn.div)))}add(Gn){if(this.changeParent(Gn),vi(this,On).addEditor(Gn),this.attach(Gn),!Gn.isAttachedToDOM){const mi=Gn.render();this.div.append(mi),Gn.isAttachedToDOM=!0}Gn.fixAndSetPosition(),Gn.onceAdded(),vi(this,On).addToAnnotationStorage(Gn)}moveEditorInDOM(Gn){var Wn;if(!Gn.isAttachedToDOM)return;const{activeElement:mi}=document;Gn.div.contains(mi)&&(Gn._focusEventsAllowed=!1,setTimeout(()=>{Gn.div.contains(document.activeElement)?Gn._focusEventsAllowed=!0:(Gn.div.addEventListener("focusin",()=>{Gn._focusEventsAllowed=!0},{once:!0}),mi.focus())},0)),Gn._structTreeParentId=(Wn=vi(this,Cn))==null?void 0:Wn.moveElementInDOM(this.div,Gn.div,Gn.contentDiv,!0)}addOrRebuild(Gn){Gn.needsToBeRebuilt()?Gn.rebuild():this.add(Gn)}addUndoableEditor(Gn){const mi=()=>Gn._uiManager.rebuild(Gn),Wn=()=>{Gn.remove()};this.addCommands({cmd:mi,undo:Wn,mustExec:!1})}getNextId(){return vi(this,On).getId()}pasteEditor(Gn,mi){vi(this,On).updateToolbar(Gn),vi(this,On).updateMode(Gn);const{offsetX:Wn,offsetY:ni}=Qi(this,di,wl).call(this),li=this.getNextId(),Ai=Qi(this,hi,yl).call(this,{parent:this,id:li,x:Wn,y:ni,uiManager:vi(this,On),isCentered:!0,...mi});Ai&&this.add(Ai)}deserialize(Gn){switch(Gn.annotationType??Gn.annotationEditorType){case Kn.AnnotationEditorType.FREETEXT:return Mn.FreeTextEditor.deserialize(Gn,this,vi(this,On));case Kn.AnnotationEditorType.INK:return ti.InkEditor.deserialize(Gn,this,vi(this,On));case Kn.AnnotationEditorType.STAMP:return Ln.StampEditor.deserialize(Gn,this,vi(this,On))}return null}addNewEditor(){Qi(this,ii,mc).call(this,Qi(this,di,wl).call(this),!0)}setSelected(Gn){vi(this,On).setSelected(Gn)}toggleSelected(Gn){vi(this,On).toggleSelected(Gn)}isSelected(Gn){return vi(this,On).isSelected(Gn)}unselect(Gn){vi(this,On).unselect(Gn)}pointerup(Gn){const{isMac:mi}=Kn.FeatureTest.platform;if(!(Gn.button!==0||Gn.ctrlKey&&mi)&&Gn.target===this.div&&vi(this,Bn)){if(ds(this,Bn,!1),!vi(this,Tn)){ds(this,Tn,!0);return}if(vi(this,On).getMode()===Kn.AnnotationEditorType.STAMP){vi(this,On).unselectAll();return}Qi(this,ii,mc).call(this,Gn,!1)}}pointerdown(Gn){if(vi(this,Bn)){ds(this,Bn,!1);return}const{isMac:mi}=Kn.FeatureTest.platform;if(Gn.button!==0||Gn.ctrlKey&&mi||Gn.target!==this.div)return;ds(this,Bn,!0);const Wn=vi(this,On).getActive();ds(this,Tn,!Wn||Wn.isEmpty())}findNewParent(Gn,mi,Wn){const ni=vi(this,On).findParent(mi,Wn);return ni===null||ni===this?!1:(ni.changeParent(Gn),!0)}destroy(){var Gn,mi;((Gn=vi(this,On).getActive())==null?void 0:Gn.parent)===this&&(vi(this,On).commitOrRemove(),vi(this,On).setActiveEditor(null));for(const Wn of vi(this,ei).values())(mi=vi(this,Cn))==null||mi.removePointerInTextLayer(Wn.contentDiv),Wn.setParent(null),Wn.isAttachedToDOM=!1,Wn.div.remove();this.div=null,vi(this,ei).clear(),vi(this,On).removeLayer(this)}render({viewport:Gn}){this.viewport=Gn,(0,In.setLayerDimensions)(this.div,Gn);for(const mi of vi(this,On).getEditors(this.pageIndex))this.add(mi);this.updateMode()}update({viewport:Gn}){vi(this,On).commitOrRemove(),this.viewport=Gn,(0,In.setLayerDimensions)(this.div,{rotation:Gn.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:Gn,pageHeight:mi}=this.viewport.rawDims;return[Gn,mi]}};Cn=new WeakMap,Tn=new WeakMap,Rn=new WeakMap,ui=new WeakMap,si=new WeakMap,ei=new WeakMap,Bn=new WeakMap,Nn=new WeakMap,Hn=new WeakMap,On=new WeakMap,hi=new WeakSet,yl=function(Gn){switch(vi(this,On).getMode()){case Kn.AnnotationEditorType.FREETEXT:return new Mn.FreeTextEditor(Gn);case Kn.AnnotationEditorType.INK:return new ti.InkEditor(Gn);case Kn.AnnotationEditorType.STAMP:return new Ln.StampEditor(Gn)}return null},ii=new WeakSet,mc=function(Gn,mi){const Wn=this.getNextId(),ni=Qi(this,hi,yl).call(this,{parent:this,id:Wn,x:Gn.offsetX,y:Gn.offsetY,uiManager:vi(this,On),isCentered:mi});return ni&&this.add(ni),ni},di=new WeakSet,wl=function(){const{x:Gn,y:mi,width:Wn,height:ni}=this.div.getBoundingClientRect(),li=Math.max(0,Gn),Ai=Math.max(0,mi),gi=Math.min(window.innerWidth,Gn+Wn),yi=Math.min(window.innerHeight,mi+ni),Ii=(li+gi)/2-Gn,xi=(Ai+yi)/2-mi,[Qn,ai]=this.viewport.rotation%180===0?[Ii,xi]:[xi,Ii];return{offsetX:Qn,offsetY:ai}},wi=new WeakSet,Sl=function(){ds(this,Nn,!0);for(const Gn of vi(this,ei).values())Gn.isEmpty()&&Gn.remove();ds(this,Nn,!1)},ta(pi,"_initialized",!1);let jn=pi;$n.AnnotationEditorLayer=jn},(ki,$n,Pn)=>{var Ln,jn,Cn,Tn,Rn,ui,si,ei,Bn,Nn,yh,On,wh,Xn,Sh,ri,M0,fi,Al,Jn,Ah,Zn,vl;Object.defineProperty($n,"__esModule",{value:!0}),$n.FreeTextEditor=void 0;var Kn=Pn(1),oi=Pn(5),Mn=Pn(4),ti=Pn(29);const mi=class mi extends Mn.AnnotationEditor{constructor(li){super({...li,name:"freeTextEditor"});Ki(this,Nn);Ki(this,On);Ki(this,Xn);Ki(this,ri);Ki(this,fi);Ki(this,Jn);Ki(this,Zn);Ki(this,Ln,this.editorDivBlur.bind(this));Ki(this,jn,this.editorDivFocus.bind(this));Ki(this,Cn,this.editorDivInput.bind(this));Ki(this,Tn,this.editorDivKeydown.bind(this));Ki(this,Rn,void 0);Ki(this,ui,"");Ki(this,si,`${this.id}-editor`);Ki(this,ei,void 0);Ki(this,Bn,null);ds(this,Rn,li.color||mi._defaultColor||Mn.AnnotationEditor._defaultLineColor),ds(this,ei,li.fontSize||mi._defaultFontSize)}static get _keyboardManager(){const li=mi.prototype,Ai=Ii=>Ii.isEmpty(),gi=oi.AnnotationEditorUIManager.TRANSLATE_SMALL,yi=oi.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,Kn.shadow)(this,"_keyboardManager",new oi.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],li.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],li.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],li._translateEmpty,{args:[-gi,0],checker:Ai}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],li._translateEmpty,{args:[-yi,0],checker:Ai}],[["ArrowRight","mac+ArrowRight"],li._translateEmpty,{args:[gi,0],checker:Ai}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],li._translateEmpty,{args:[yi,0],checker:Ai}],[["ArrowUp","mac+ArrowUp"],li._translateEmpty,{args:[0,-gi],checker:Ai}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],li._translateEmpty,{args:[0,-yi],checker:Ai}],[["ArrowDown","mac+ArrowDown"],li._translateEmpty,{args:[0,gi],checker:Ai}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],li._translateEmpty,{args:[0,yi],checker:Ai}]]))}static initialize(li){Mn.AnnotationEditor.initialize(li,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const Ai=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Ai.getPropertyValue("--freetext-padding"))}static updateDefaultParams(li,Ai){switch(li){case Kn.AnnotationEditorParamsType.FREETEXT_SIZE:mi._defaultFontSize=Ai;break;case Kn.AnnotationEditorParamsType.FREETEXT_COLOR:mi._defaultColor=Ai;break}}updateParams(li,Ai){switch(li){case Kn.AnnotationEditorParamsType.FREETEXT_SIZE:Qi(this,Nn,yh).call(this,Ai);break;case Kn.AnnotationEditorParamsType.FREETEXT_COLOR:Qi(this,On,wh).call(this,Ai);break}}static get defaultPropertiesToUpdate(){return[[Kn.AnnotationEditorParamsType.FREETEXT_SIZE,mi._defaultFontSize],[Kn.AnnotationEditorParamsType.FREETEXT_COLOR,mi._defaultColor||Mn.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[Kn.AnnotationEditorParamsType.FREETEXT_SIZE,vi(this,ei)],[Kn.AnnotationEditorParamsType.FREETEXT_COLOR,vi(this,Rn)]]}_translateEmpty(li,Ai){this._uiManager.translateSelectedEditors(li,Ai,!0)}getInitialTranslation(){const li=this.parentScale;return[-mi._internalPadding*li,-(mi._internalPadding+vi(this,ei))*li]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(Kn.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",vi(this,Tn)),this.editorDiv.addEventListener("focus",vi(this,jn)),this.editorDiv.addEventListener("blur",vi(this,Ln)),this.editorDiv.addEventListener("input",vi(this,Cn)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",vi(this,si)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",vi(this,Tn)),this.editorDiv.removeEventListener("focus",vi(this,jn)),this.editorDiv.removeEventListener("blur",vi(this,Ln)),this.editorDiv.removeEventListener("input",vi(this,Cn)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(li){this._focusEventsAllowed&&(super.focusin(li),li.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var li;if(this.width){Qi(this,Zn,vl).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(li=this._initialOptions)!=null&&li.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const li=vi(this,ui),Ai=ds(this,ui,Qi(this,Xn,Sh).call(this).trimEnd());if(li===Ai)return;const gi=yi=>{if(ds(this,ui,yi),!yi){this.remove();return}Qi(this,fi,Al).call(this),this._uiManager.rebuild(this),Qi(this,ri,M0).call(this)};this.addCommands({cmd:()=>{gi(Ai)},undo:()=>{gi(li)},mustExec:!1}),Qi(this,ri,M0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(li){this.enterInEditMode()}keydown(li){li.target===this.div&&li.key==="Enter"&&(this.enterInEditMode(),li.preventDefault())}editorDivKeydown(li){mi._keyboardManager.exec(this,li)}editorDivFocus(li){this.isEditing=!0}editorDivBlur(li){this.isEditing=!1}editorDivInput(li){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let li,Ai;this.width&&(li=this.x,Ai=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",vi(this,si)),this.enableEditing(),Mn.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(yi=>{var Ii;return(Ii=this.editorDiv)==null?void 0:Ii.setAttribute("aria-label",yi)}),Mn.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(yi=>{var Ii;return(Ii=this.editorDiv)==null?void 0:Ii.setAttribute("default-content",yi)}),this.editorDiv.contentEditable=!0;const{style:gi}=this.editorDiv;if(gi.fontSize=`calc(${vi(this,ei)}px * var(--scale-factor))`,gi.color=vi(this,Rn),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,oi.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[yi,Ii]=this.parentDimensions;if(this.annotationElementId){const{position:xi}=vi(this,Bn);let[Qn,ai]=this.getInitialTranslation();[Qn,ai]=this.pageTranslationToScreen(Qn,ai);const[Vn,Yn]=this.pageDimensions,[ci,bi]=this.pageTranslation;let Ci,Fi;switch(this.rotation){case 0:Ci=li+(xi[0]-ci)/Vn,Fi=Ai+this.height-(xi[1]-bi)/Yn;break;case 90:Ci=li+(xi[0]-ci)/Vn,Fi=Ai-(xi[1]-bi)/Yn,[Qn,ai]=[ai,-Qn];break;case 180:Ci=li-this.width+(xi[0]-ci)/Vn,Fi=Ai-(xi[1]-bi)/Yn,[Qn,ai]=[-Qn,-ai];break;case 270:Ci=li+(xi[0]-ci-this.height*Yn)/Vn,Fi=Ai+(xi[1]-bi-this.width*Vn)/Yn,[Qn,ai]=[-ai,Qn];break}this.setAt(Ci*yi,Fi*Ii,Qn,ai)}else this.setAt(li*yi,Ai*Ii,this.width*yi,this.height*Ii);Qi(this,fi,Al).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(li,Ai,gi){let yi=null;if(li instanceof ti.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:xi,fontColor:Qn},rect:ai,rotation:Vn,id:Yn},textContent:ci,textPosition:bi,parent:{page:{pageNumber:Ci}}}=li;if(!ci||ci.length===0)return null;yi=li={annotationType:Kn.AnnotationEditorType.FREETEXT,color:Array.from(Qn),fontSize:xi,value:ci.join(`
`),position:bi,pageIndex:Ci-1,rect:ai,rotation:Vn,id:Yn,deleted:!1}}const Ii=super.deserialize(li,Ai,gi);return ds(Ii,ei,li.fontSize),ds(Ii,Rn,Kn.Util.makeHexColor(...li.color)),ds(Ii,ui,li.value),Ii.annotationElementId=li.id||null,ds(Ii,Bn,yi),Ii}serialize(li=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const Ai=mi._internalPadding*this.parentScale,gi=this.getRect(Ai,Ai),yi=Mn.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:vi(this,Rn)),Ii={annotationType:Kn.AnnotationEditorType.FREETEXT,color:yi,fontSize:vi(this,ei),value:vi(this,ui),pageIndex:this.pageIndex,rect:gi,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return li?Ii:this.annotationElementId&&!Qi(this,Jn,Ah).call(this,Ii)?null:(Ii.id=this.annotationElementId,Ii)}};Ln=new WeakMap,jn=new WeakMap,Cn=new WeakMap,Tn=new WeakMap,Rn=new WeakMap,ui=new WeakMap,si=new WeakMap,ei=new WeakMap,Bn=new WeakMap,Nn=new WeakSet,yh=function(li){const Ai=yi=>{this.editorDiv.style.fontSize=`calc(${yi}px * var(--scale-factor))`,this.translate(0,-(yi-vi(this,ei))*this.parentScale),ds(this,ei,yi),Qi(this,ri,M0).call(this)},gi=vi(this,ei);this.addCommands({cmd:()=>{Ai(li)},undo:()=>{Ai(gi)},mustExec:!0,type:Kn.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},On=new WeakSet,wh=function(li){const Ai=vi(this,Rn);this.addCommands({cmd:()=>{ds(this,Rn,this.editorDiv.style.color=li)},undo:()=>{ds(this,Rn,this.editorDiv.style.color=Ai)},mustExec:!0,type:Kn.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Xn=new WeakSet,Sh=function(){const li=this.editorDiv.getElementsByTagName("div");if(li.length===0)return this.editorDiv.innerText;const Ai=[];for(const gi of li)Ai.push(gi.innerText.replace(/\r\n?|\n/,""));return Ai.join(`
`)},ri=new WeakSet,M0=function(){const[li,Ai]=this.parentDimensions;let gi;if(this.isAttachedToDOM)gi=this.div.getBoundingClientRect();else{const{currentLayer:yi,div:Ii}=this,xi=Ii.style.display;Ii.style.display="hidden",yi.div.append(this.div),gi=Ii.getBoundingClientRect(),Ii.remove(),Ii.style.display=xi}this.rotation%180===this.parentRotation%180?(this.width=gi.width/li,this.height=gi.height/Ai):(this.width=gi.height/li,this.height=gi.width/Ai),this.fixAndSetPosition()},fi=new WeakSet,Al=function(){if(this.editorDiv.replaceChildren(),!!vi(this,ui))for(const li of vi(this,ui).split(`
`)){const Ai=document.createElement("div");Ai.append(li?document.createTextNode(li):document.createElement("br")),this.editorDiv.append(Ai)}},Jn=new WeakSet,Ah=function(li){const{value:Ai,fontSize:gi,color:yi,rect:Ii,pageIndex:xi}=vi(this,Bn);return li.value!==Ai||li.fontSize!==gi||li.rect.some((Qn,ai)=>Math.abs(Qn-Ii[ai])>=1)||li.color.some((Qn,ai)=>Qn!==yi[ai])||li.pageIndex!==xi},Zn=new WeakSet,vl=function(li=!1){if(!this.annotationElementId)return;if(Qi(this,ri,M0).call(this),!li&&(this.width===0||this.height===0)){setTimeout(()=>Qi(this,Zn,vl).call(this,!0),0);return}const Ai=mi._internalPadding*this.parentScale;vi(this,Bn).rect=this.getRect(Ai,Ai)},ta(mi,"_freeTextDefaultContent",""),ta(mi,"_internalPadding",0),ta(mi,"_defaultColor",null),ta(mi,"_defaultFontSize",10),ta(mi,"_type","freetext");let In=mi;$n.FreeTextEditor=In},(ki,$n,Pn)=>{var ai,Yn,to,bi,vh,Fi,zi,_i,ji,Pi,Ni,Si,Ti,Ri,Mi,Ui,Hi,Li,Ei,$i,Bi,Oi,Xi,kh,qi,xc,is,kl,hs,Cl,Vi,Zi,us,ts,es,rs,ss,Tl,ks,xs,Rs,ms,Ch,ws,El;Object.defineProperty($n,"__esModule",{value:!0}),$n.StampAnnotationElement=$n.InkAnnotationElement=$n.FreeTextAnnotationElement=$n.AnnotationLayer=void 0;var Kn=Pn(1),oi=Pn(6),Mn=Pn(3),ti=Pn(30),In=Pn(31),Ln=Pn(32);const jn=1e3,Cn=9,Tn=new WeakSet;function Rn(Is){return{width:Is[2]-Is[0],height:Is[3]-Is[1]}}class ui{static create(ls){switch(ls.data.annotationType){case Kn.AnnotationType.LINK:return new ei(ls);case Kn.AnnotationType.TEXT:return new Bn(ls);case Kn.AnnotationType.WIDGET:switch(ls.data.fieldType){case"Tx":return new Hn(ls);case"Btn":return ls.data.radioButton?new Xn(ls):ls.data.checkBox?new hi(ls):new ii(ls);case"Ch":return new ri(ls);case"Sig":return new On(ls)}return new Nn(ls);case Kn.AnnotationType.POPUP:return new di(ls);case Kn.AnnotationType.FREETEXT:return new wi(ls);case Kn.AnnotationType.LINE:return new Jn(ls);case Kn.AnnotationType.SQUARE:return new pi(ls);case Kn.AnnotationType.CIRCLE:return new Zn(ls);case Kn.AnnotationType.POLYLINE:return new Gn(ls);case Kn.AnnotationType.CARET:return new Wn(ls);case Kn.AnnotationType.INK:return new ni(ls);case Kn.AnnotationType.POLYGON:return new mi(ls);case Kn.AnnotationType.HIGHLIGHT:return new li(ls);case Kn.AnnotationType.UNDERLINE:return new Ai(ls);case Kn.AnnotationType.SQUIGGLY:return new gi(ls);case Kn.AnnotationType.STRIKEOUT:return new yi(ls);case Kn.AnnotationType.STAMP:return new Ii(ls);case Kn.AnnotationType.FILEATTACHMENT:return new xi(ls);default:return new si(ls)}}}const Vn=class Vn{constructor(ls,{isRenderable:Wi=!1,ignoreBorder:Ji=!1,createQuadrilaterals:cs=!1}={}){Ki(this,ai,!1);this.isRenderable=Wi,this.data=ls.data,this.layer=ls.layer,this.linkService=ls.linkService,this.downloadManager=ls.downloadManager,this.imageResourcesPath=ls.imageResourcesPath,this.renderForms=ls.renderForms,this.svgFactory=ls.svgFactory,this.annotationStorage=ls.annotationStorage,this.enableScripting=ls.enableScripting,this.hasJSActions=ls.hasJSActions,this._fieldObjects=ls.fieldObjects,this.parent=ls.parent,Wi&&(this.container=this._createContainer(Ji)),cs&&this._createQuadrilaterals()}static _hasPopupData({titleObj:ls,contentsObj:Wi,richText:Ji}){return!!(ls!=null&&ls.str||Wi!=null&&Wi.str||Ji!=null&&Ji.str)}get hasPopupData(){return Vn._hasPopupData(this.data)}_createContainer(ls){const{data:Wi,parent:{page:Ji,viewport:cs}}=this,fs=document.createElement("section");fs.setAttribute("data-annotation-id",Wi.id),this instanceof Nn||(fs.tabIndex=jn),fs.style.zIndex=this.parent.zIndex++,this.data.popupRef&&fs.setAttribute("aria-haspopup","dialog"),Wi.noRotate&&fs.classList.add("norotate");const{pageWidth:ps,pageHeight:gs,pageX:bs,pageY:vs}=cs.rawDims;if(!Wi.rect||this instanceof di){const{rotation:js}=Wi;return!Wi.hasOwnCanvas&&js!==0&&this.setRotation(js,fs),fs}const{width:_s,height:Us}=Rn(Wi.rect),Ds=Kn.Util.normalizeRect([Wi.rect[0],Ji.view[3]-Wi.rect[1]+Ji.view[1],Wi.rect[2],Ji.view[3]-Wi.rect[3]+Ji.view[1]]);if(!ls&&Wi.borderStyle.width>0){fs.style.borderWidth=`${Wi.borderStyle.width}px`;const js=Wi.borderStyle.horizontalCornerRadius,Vs=Wi.borderStyle.verticalCornerRadius;if(js>0||Vs>0){const As=`calc(${js}px * var(--scale-factor)) / calc(${Vs}px * var(--scale-factor))`;fs.style.borderRadius=As}else if(this instanceof Xn){const As=`calc(${_s}px * var(--scale-factor)) / calc(${Us}px * var(--scale-factor))`;fs.style.borderRadius=As}switch(Wi.borderStyle.style){case Kn.AnnotationBorderStyleType.SOLID:fs.style.borderStyle="solid";break;case Kn.AnnotationBorderStyleType.DASHED:fs.style.borderStyle="dashed";break;case Kn.AnnotationBorderStyleType.BEVELED:(0,Kn.warn)("Unimplemented border style: beveled");break;case Kn.AnnotationBorderStyleType.INSET:(0,Kn.warn)("Unimplemented border style: inset");break;case Kn.AnnotationBorderStyleType.UNDERLINE:fs.style.borderBottomStyle="solid";break}const Ss=Wi.borderColor||null;Ss?(ds(this,ai,!0),fs.style.borderColor=Kn.Util.makeHexColor(Ss[0]|0,Ss[1]|0,Ss[2]|0)):fs.style.borderWidth=0}fs.style.left=`${100*(Ds[0]-bs)/ps}%`,fs.style.top=`${100*(Ds[1]-vs)/gs}%`;const{rotation:Ms}=Wi;return Wi.hasOwnCanvas||Ms===0?(fs.style.width=`${100*_s/ps}%`,fs.style.height=`${100*Us/gs}%`):this.setRotation(Ms,fs),fs}setRotation(ls,Wi=this.container){if(!this.data.rect)return;const{pageWidth:Ji,pageHeight:cs}=this.parent.viewport.rawDims,{width:fs,height:ps}=Rn(this.data.rect);let gs,bs;ls%180===0?(gs=100*fs/Ji,bs=100*ps/cs):(gs=100*ps/Ji,bs=100*fs/cs),Wi.style.width=`${gs}%`,Wi.style.height=`${bs}%`,Wi.setAttribute("data-main-rotation",(360-ls)%360)}get _commonActions(){const ls=(Wi,Ji,cs)=>{const fs=cs.detail[Wi],ps=fs[0],gs=fs.slice(1);cs.target.style[Ji]=ti.ColorConverters[`${ps}_HTML`](gs),this.annotationStorage.setValue(this.data.id,{[Ji]:ti.ColorConverters[`${ps}_rgb`](gs)})};return(0,Kn.shadow)(this,"_commonActions",{display:Wi=>{const{display:Ji}=Wi.detail,cs=Ji%2===1;this.container.style.visibility=cs?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:cs,noPrint:Ji===1||Ji===2})},print:Wi=>{this.annotationStorage.setValue(this.data.id,{noPrint:!Wi.detail.print})},hidden:Wi=>{const{hidden:Ji}=Wi.detail;this.container.style.visibility=Ji?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Ji,noView:Ji})},focus:Wi=>{setTimeout(()=>Wi.target.focus({preventScroll:!1}),0)},userName:Wi=>{Wi.target.title=Wi.detail.userName},readonly:Wi=>{Wi.target.disabled=Wi.detail.readonly},required:Wi=>{this._setRequired(Wi.target,Wi.detail.required)},bgColor:Wi=>{ls("bgColor","backgroundColor",Wi)},fillColor:Wi=>{ls("fillColor","backgroundColor",Wi)},fgColor:Wi=>{ls("fgColor","color",Wi)},textColor:Wi=>{ls("textColor","color",Wi)},borderColor:Wi=>{ls("borderColor","borderColor",Wi)},strokeColor:Wi=>{ls("strokeColor","borderColor",Wi)},rotation:Wi=>{const Ji=Wi.detail.rotation;this.setRotation(Ji),this.annotationStorage.setValue(this.data.id,{rotation:Ji})}})}_dispatchEventFromSandbox(ls,Wi){const Ji=this._commonActions;for(const cs of Object.keys(Wi.detail)){const fs=ls[cs]||Ji[cs];fs==null||fs(Wi)}}_setDefaultPropertiesFromJS(ls){if(!this.enableScripting)return;const Wi=this.annotationStorage.getRawValue(this.data.id);if(!Wi)return;const Ji=this._commonActions;for(const[cs,fs]of Object.entries(Wi)){const ps=Ji[cs];if(ps){const gs={detail:{[cs]:fs},target:ls};ps(gs),delete Wi[cs]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:ls}=this.data;if(!ls)return;const[Wi,Ji,cs,fs]=this.data.rect;if(ls.length===1){const[,{x:Vs,y:Ss},{x:As,y:Es}]=ls[0];if(cs===Vs&&fs===Ss&&Wi===As&&Ji===Es)return}const{style:ps}=this.container;let gs;if(vi(this,ai)){const{borderColor:Vs,borderWidth:Ss}=ps;ps.borderWidth=0,gs=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Vs}" stroke-width="${Ss}">`],this.container.classList.add("hasBorder")}const bs=cs-Wi,vs=fs-Ji,{svgFactory:_s}=this,Us=_s.createElement("svg");Us.classList.add("quadrilateralsContainer"),Us.setAttribute("width",0),Us.setAttribute("height",0);const Ds=_s.createElement("defs");Us.append(Ds);const Ms=_s.createElement("clipPath"),js=`clippath_${this.data.id}`;Ms.setAttribute("id",js),Ms.setAttribute("clipPathUnits","objectBoundingBox"),Ds.append(Ms);for(const[,{x:Vs,y:Ss},{x:As,y:Es}]of ls){const Os=_s.createElement("rect"),$s=(As-Wi)/bs,Ws=(fs-Ss)/vs,Ns=(Vs-As)/bs,Ls=(Ss-Es)/vs;Os.setAttribute("x",$s),Os.setAttribute("y",Ws),Os.setAttribute("width",Ns),Os.setAttribute("height",Ls),Ms.append(Os),gs==null||gs.push(`<rect vector-effect="non-scaling-stroke" x="${$s}" y="${Ws}" width="${Ns}" height="${Ls}"/>`)}vi(this,ai)&&(gs.push("</g></svg>')"),ps.backgroundImage=gs.join("")),this.container.append(Us),this.container.style.clipPath=`url(#${js})`}_createPopup(){const{container:ls,data:Wi}=this;ls.setAttribute("aria-haspopup","dialog");const Ji=new di({data:{color:Wi.color,titleObj:Wi.titleObj,modificationDate:Wi.modificationDate,contentsObj:Wi.contentsObj,richText:Wi.richText,parentRect:Wi.rect,borderStyle:0,id:`popup_${Wi.id}`,rotation:Wi.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Ji.render())}render(){(0,Kn.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(ls,Wi=null){const Ji=[];if(this._fieldObjects){const cs=this._fieldObjects[ls];if(cs)for(const{page:fs,id:ps,exportValues:gs}of cs){if(fs===-1||ps===Wi)continue;const bs=typeof gs=="string"?gs:null,vs=document.querySelector(`[data-element-id="${ps}"]`);if(vs&&!Tn.has(vs)){(0,Kn.warn)(`_getElementsByName - element not allowed: ${ps}`);continue}Ji.push({id:ps,exportValue:bs,domElement:vs})}return Ji}for(const cs of document.getElementsByName(ls)){const{exportValue:fs}=cs,ps=cs.getAttribute("data-element-id");ps!==Wi&&Tn.has(cs)&&Ji.push({id:ps,exportValue:fs,domElement:cs})}return Ji}show(){var ls;this.container&&(this.container.hidden=!1),(ls=this.popup)==null||ls.maybeShow()}hide(){var ls;this.container&&(this.container.hidden=!0),(ls=this.popup)==null||ls.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const ls=this.getElementsToTriggerPopup();if(Array.isArray(ls))for(const Wi of ls)Wi.classList.add("highlightArea");else ls.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:ls,data:{id:Wi}}=this;this.container.addEventListener("dblclick",()=>{var Ji;(Ji=this.linkService.eventBus)==null||Ji.dispatch("switchannotationeditormode",{source:this,mode:ls,editId:Wi})})}};ai=new WeakMap;let si=Vn;class ei extends si{constructor(Wi,Ji=null){super(Wi,{isRenderable:!0,ignoreBorder:!!(Ji!=null&&Ji.ignoreBorder),createQuadrilaterals:!0});Ki(this,Yn);Ki(this,bi);this.isTooltipOnly=Wi.data.isTooltipOnly}render(){const{data:Wi,linkService:Ji}=this,cs=document.createElement("a");cs.setAttribute("data-element-id",Wi.id);let fs=!1;return Wi.url?(Ji.addLinkAttributes(cs,Wi.url,Wi.newWindow),fs=!0):Wi.action?(this._bindNamedAction(cs,Wi.action),fs=!0):Wi.attachment?(this._bindAttachment(cs,Wi.attachment),fs=!0):Wi.setOCGState?(Qi(this,bi,vh).call(this,cs,Wi.setOCGState),fs=!0):Wi.dest?(this._bindLink(cs,Wi.dest),fs=!0):(Wi.actions&&(Wi.actions.Action||Wi.actions["Mouse Up"]||Wi.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(cs,Wi),fs=!0),Wi.resetForm?(this._bindResetFormAction(cs,Wi.resetForm),fs=!0):this.isTooltipOnly&&!fs&&(this._bindLink(cs,""),fs=!0)),this.container.classList.add("linkAnnotation"),fs&&this.container.append(cs),this.container}_bindLink(Wi,Ji){Wi.href=this.linkService.getDestinationHash(Ji),Wi.onclick=()=>(Ji&&this.linkService.goToDestination(Ji),!1),(Ji||Ji==="")&&Qi(this,Yn,to).call(this)}_bindNamedAction(Wi,Ji){Wi.href=this.linkService.getAnchorUrl(""),Wi.onclick=()=>(this.linkService.executeNamedAction(Ji),!1),Qi(this,Yn,to).call(this)}_bindAttachment(Wi,Ji){Wi.href=this.linkService.getAnchorUrl(""),Wi.onclick=()=>{var cs;return(cs=this.downloadManager)==null||cs.openOrDownloadData(this.container,Ji.content,Ji.filename),!1},Qi(this,Yn,to).call(this)}_bindJSAction(Wi,Ji){Wi.href=this.linkService.getAnchorUrl("");const cs=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const fs of Object.keys(Ji.actions)){const ps=cs.get(fs);ps&&(Wi[ps]=()=>{var gs;return(gs=this.linkService.eventBus)==null||gs.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Ji.id,name:fs}}),!1})}Wi.onclick||(Wi.onclick=()=>!1),Qi(this,Yn,to).call(this)}_bindResetFormAction(Wi,Ji){const cs=Wi.onclick;if(cs||(Wi.href=this.linkService.getAnchorUrl("")),Qi(this,Yn,to).call(this),!this._fieldObjects){(0,Kn.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),cs||(Wi.onclick=()=>!1);return}Wi.onclick=()=>{var Us;cs==null||cs();const{fields:fs,refs:ps,include:gs}=Ji,bs=[];if(fs.length!==0||ps.length!==0){const Ds=new Set(ps);for(const Ms of fs){const js=this._fieldObjects[Ms]||[];for(const{id:Vs}of js)Ds.add(Vs)}for(const Ms of Object.values(this._fieldObjects))for(const js of Ms)Ds.has(js.id)===gs&&bs.push(js)}else for(const Ds of Object.values(this._fieldObjects))bs.push(...Ds);const vs=this.annotationStorage,_s=[];for(const Ds of bs){const{id:Ms}=Ds;switch(_s.push(Ms),Ds.type){case"text":{const Vs=Ds.defaultValue||"";vs.setValue(Ms,{value:Vs});break}case"checkbox":case"radiobutton":{const Vs=Ds.defaultValue===Ds.exportValues;vs.setValue(Ms,{value:Vs});break}case"combobox":case"listbox":{const Vs=Ds.defaultValue||"";vs.setValue(Ms,{value:Vs});break}default:continue}const js=document.querySelector(`[data-element-id="${Ms}"]`);if(js){if(!Tn.has(js)){(0,Kn.warn)(`_bindResetFormAction - element not allowed: ${Ms}`);continue}}else continue;js.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Us=this.linkService.eventBus)==null||Us.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:_s,name:"ResetForm"}})),!1}}}Yn=new WeakSet,to=function(){this.container.setAttribute("data-internal-link","")},bi=new WeakSet,vh=function(Wi,Ji){Wi.href=this.linkService.getAnchorUrl(""),Wi.onclick=()=>(this.linkService.executeSetOCGState(Ji),!1),Qi(this,Yn,to).call(this)};class Bn extends si{constructor(ls){super(ls,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const ls=document.createElement("img");return ls.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",ls.alt="[{{type}} Annotation]",ls.dataset.l10nId="text_annotation_type",ls.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(ls),this.container}}class Nn extends si{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(ls){var Wi;this.data.hasOwnCanvas&&(((Wi=ls.previousSibling)==null?void 0:Wi.nodeName)==="CANVAS"&&(ls.previousSibling.hidden=!0),ls.hidden=!1)}_getKeyModifier(ls){const{isWin:Wi,isMac:Ji}=Kn.FeatureTest.platform;return Wi&&ls.ctrlKey||Ji&&ls.metaKey}_setEventListener(ls,Wi,Ji,cs,fs){Ji.includes("mouse")?ls.addEventListener(Ji,ps=>{var gs;(gs=this.linkService.eventBus)==null||gs.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:cs,value:fs(ps),shift:ps.shiftKey,modifier:this._getKeyModifier(ps)}})}):ls.addEventListener(Ji,ps=>{var gs;if(Ji==="blur"){if(!Wi.focused||!ps.relatedTarget)return;Wi.focused=!1}else if(Ji==="focus"){if(Wi.focused)return;Wi.focused=!0}fs&&((gs=this.linkService.eventBus)==null||gs.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:cs,value:fs(ps)}}))})}_setEventListeners(ls,Wi,Ji,cs){var fs,ps,gs;for(const[bs,vs]of Ji)(vs==="Action"||(fs=this.data.actions)!=null&&fs[vs])&&((vs==="Focus"||vs==="Blur")&&(Wi||(Wi={focused:!1})),this._setEventListener(ls,Wi,bs,vs,cs),vs==="Focus"&&!((ps=this.data.actions)!=null&&ps.Blur)?this._setEventListener(ls,Wi,"blur","Blur",null):vs==="Blur"&&!((gs=this.data.actions)!=null&&gs.Focus)&&this._setEventListener(ls,Wi,"focus","Focus",null))}_setBackgroundColor(ls){const Wi=this.data.backgroundColor||null;ls.style.backgroundColor=Wi===null?"transparent":Kn.Util.makeHexColor(Wi[0],Wi[1],Wi[2])}_setTextStyle(ls){const Wi=["left","center","right"],{fontColor:Ji}=this.data.defaultAppearanceData,cs=this.data.defaultAppearanceData.fontSize||Cn,fs=ls.style;let ps;const gs=2,bs=vs=>Math.round(10*vs)/10;if(this.data.multiLine){const vs=Math.abs(this.data.rect[3]-this.data.rect[1]-gs),_s=Math.round(vs/(Kn.LINE_FACTOR*cs))||1,Us=vs/_s;ps=Math.min(cs,bs(Us/Kn.LINE_FACTOR))}else{const vs=Math.abs(this.data.rect[3]-this.data.rect[1]-gs);ps=Math.min(cs,bs(vs/Kn.LINE_FACTOR))}fs.fontSize=`calc(${ps}px * var(--scale-factor))`,fs.color=Kn.Util.makeHexColor(Ji[0],Ji[1],Ji[2]),this.data.textAlignment!==null&&(fs.textAlign=Wi[this.data.textAlignment])}_setRequired(ls,Wi){Wi?ls.setAttribute("required",!0):ls.removeAttribute("required"),ls.setAttribute("aria-required",Wi)}}class Hn extends Nn{constructor(ls){const Wi=ls.renderForms||!ls.data.hasAppearance&&!!ls.data.fieldValue;super(ls,{isRenderable:Wi})}setPropertyOnSiblings(ls,Wi,Ji,cs){const fs=this.annotationStorage;for(const ps of this._getElementsByName(ls.name,ls.id))ps.domElement&&(ps.domElement[Wi]=Ji),fs.setValue(ps.id,{[cs]:Ji})}render(){var cs,fs;const ls=this.annotationStorage,Wi=this.data.id;this.container.classList.add("textWidgetAnnotation");let Ji=null;if(this.renderForms){const ps=ls.getValue(Wi,{value:this.data.fieldValue});let gs=ps.value||"";const bs=ls.getValue(Wi,{charLimit:this.data.maxLen}).charLimit;bs&&gs.length>bs&&(gs=gs.slice(0,bs));let vs=ps.formattedValue||((cs=this.data.textContent)==null?void 0:cs.join(`
`))||null;vs&&this.data.comb&&(vs=vs.replaceAll(/\s+/g,""));const _s={userValue:gs,formattedValue:vs,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Ji=document.createElement("textarea"),Ji.textContent=vs??gs,this.data.doNotScroll&&(Ji.style.overflowY="hidden")):(Ji=document.createElement("input"),Ji.type="text",Ji.setAttribute("value",vs??gs),this.data.doNotScroll&&(Ji.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Ji.hidden=!0),Tn.add(Ji),Ji.setAttribute("data-element-id",Wi),Ji.disabled=this.data.readOnly,Ji.name=this.data.fieldName,Ji.tabIndex=jn,this._setRequired(Ji,this.data.required),bs&&(Ji.maxLength=bs),Ji.addEventListener("input",Ds=>{ls.setValue(Wi,{value:Ds.target.value}),this.setPropertyOnSiblings(Ji,"value",Ds.target.value,"value"),_s.formattedValue=null}),Ji.addEventListener("resetform",Ds=>{const Ms=this.data.defaultFieldValue??"";Ji.value=_s.userValue=Ms,_s.formattedValue=null});let Us=Ds=>{const{formattedValue:Ms}=_s;Ms!=null&&(Ds.target.value=Ms),Ds.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Ji.addEventListener("focus",Ms=>{if(_s.focused)return;const{target:js}=Ms;_s.userValue&&(js.value=_s.userValue),_s.lastCommittedValue=js.value,_s.commitKey=1,_s.focused=!0}),Ji.addEventListener("updatefromsandbox",Ms=>{this.showElementAndHideCanvas(Ms.target);const js={value(Vs){_s.userValue=Vs.detail.value??"",ls.setValue(Wi,{value:_s.userValue.toString()}),Vs.target.value=_s.userValue},formattedValue(Vs){const{formattedValue:Ss}=Vs.detail;_s.formattedValue=Ss,Ss!=null&&Vs.target!==document.activeElement&&(Vs.target.value=Ss),ls.setValue(Wi,{formattedValue:Ss})},selRange(Vs){Vs.target.setSelectionRange(...Vs.detail.selRange)},charLimit:Vs=>{var Os;const{charLimit:Ss}=Vs.detail,{target:As}=Vs;if(Ss===0){As.removeAttribute("maxLength");return}As.setAttribute("maxLength",Ss);let Es=_s.userValue;!Es||Es.length<=Ss||(Es=Es.slice(0,Ss),As.value=_s.userValue=Es,ls.setValue(Wi,{value:Es}),(Os=this.linkService.eventBus)==null||Os.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Wi,name:"Keystroke",value:Es,willCommit:!0,commitKey:1,selStart:As.selectionStart,selEnd:As.selectionEnd}}))}};this._dispatchEventFromSandbox(js,Ms)}),Ji.addEventListener("keydown",Ms=>{var Ss;_s.commitKey=1;let js=-1;if(Ms.key==="Escape"?js=0:Ms.key==="Enter"&&!this.data.multiLine?js=2:Ms.key==="Tab"&&(_s.commitKey=3),js===-1)return;const{value:Vs}=Ms.target;_s.lastCommittedValue!==Vs&&(_s.lastCommittedValue=Vs,_s.userValue=Vs,(Ss=this.linkService.eventBus)==null||Ss.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Wi,name:"Keystroke",value:Vs,willCommit:!0,commitKey:js,selStart:Ms.target.selectionStart,selEnd:Ms.target.selectionEnd}}))});const Ds=Us;Us=null,Ji.addEventListener("blur",Ms=>{var Vs;if(!_s.focused||!Ms.relatedTarget)return;_s.focused=!1;const{value:js}=Ms.target;_s.userValue=js,_s.lastCommittedValue!==js&&((Vs=this.linkService.eventBus)==null||Vs.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Wi,name:"Keystroke",value:js,willCommit:!0,commitKey:_s.commitKey,selStart:Ms.target.selectionStart,selEnd:Ms.target.selectionEnd}})),Ds(Ms)}),(fs=this.data.actions)!=null&&fs.Keystroke&&Ji.addEventListener("beforeinput",Ms=>{var Ws;_s.lastCommittedValue=null;const{data:js,target:Vs}=Ms,{value:Ss,selectionStart:As,selectionEnd:Es}=Vs;let Os=As,$s=Es;switch(Ms.inputType){case"deleteWordBackward":{const Ns=Ss.substring(0,As).match(/\w*[^\w]*$/);Ns&&(Os-=Ns[0].length);break}case"deleteWordForward":{const Ns=Ss.substring(As).match(/^[^\w]*\w*/);Ns&&($s+=Ns[0].length);break}case"deleteContentBackward":As===Es&&(Os-=1);break;case"deleteContentForward":As===Es&&($s+=1);break}Ms.preventDefault(),(Ws=this.linkService.eventBus)==null||Ws.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Wi,name:"Keystroke",value:Ss,change:js||"",willCommit:!1,selStart:Os,selEnd:$s}})}),this._setEventListeners(Ji,_s,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ms=>Ms.target.value)}if(Us&&Ji.addEventListener("blur",Us),this.data.comb){const Ms=(this.data.rect[2]-this.data.rect[0])/bs;Ji.classList.add("comb"),Ji.style.letterSpacing=`calc(${Ms}px * var(--scale-factor) - 1ch)`}}else Ji=document.createElement("div"),Ji.textContent=this.data.fieldValue,Ji.style.verticalAlign="middle",Ji.style.display="table-cell";return this._setTextStyle(Ji),this._setBackgroundColor(Ji),this._setDefaultPropertiesFromJS(Ji),this.container.append(Ji),this.container}}class On extends Nn{constructor(ls){super(ls,{isRenderable:!!ls.data.hasOwnCanvas})}}class hi extends Nn{constructor(ls){super(ls,{isRenderable:ls.renderForms})}render(){const ls=this.annotationStorage,Wi=this.data,Ji=Wi.id;let cs=ls.getValue(Ji,{value:Wi.exportValue===Wi.fieldValue}).value;typeof cs=="string"&&(cs=cs!=="Off",ls.setValue(Ji,{value:cs})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const fs=document.createElement("input");return Tn.add(fs),fs.setAttribute("data-element-id",Ji),fs.disabled=Wi.readOnly,this._setRequired(fs,this.data.required),fs.type="checkbox",fs.name=Wi.fieldName,cs&&fs.setAttribute("checked",!0),fs.setAttribute("exportValue",Wi.exportValue),fs.tabIndex=jn,fs.addEventListener("change",ps=>{const{name:gs,checked:bs}=ps.target;for(const vs of this._getElementsByName(gs,Ji)){const _s=bs&&vs.exportValue===Wi.exportValue;vs.domElement&&(vs.domElement.checked=_s),ls.setValue(vs.id,{value:_s})}ls.setValue(Ji,{value:bs})}),fs.addEventListener("resetform",ps=>{const gs=Wi.defaultFieldValue||"Off";ps.target.checked=gs===Wi.exportValue}),this.enableScripting&&this.hasJSActions&&(fs.addEventListener("updatefromsandbox",ps=>{const gs={value(bs){bs.target.checked=bs.detail.value!=="Off",ls.setValue(Ji,{value:bs.target.checked})}};this._dispatchEventFromSandbox(gs,ps)}),this._setEventListeners(fs,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ps=>ps.target.checked)),this._setBackgroundColor(fs),this._setDefaultPropertiesFromJS(fs),this.container.append(fs),this.container}}class Xn extends Nn{constructor(ls){super(ls,{isRenderable:ls.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const ls=this.annotationStorage,Wi=this.data,Ji=Wi.id;let cs=ls.getValue(Ji,{value:Wi.fieldValue===Wi.buttonValue}).value;typeof cs=="string"&&(cs=cs!==Wi.buttonValue,ls.setValue(Ji,{value:cs}));const fs=document.createElement("input");if(Tn.add(fs),fs.setAttribute("data-element-id",Ji),fs.disabled=Wi.readOnly,this._setRequired(fs,this.data.required),fs.type="radio",fs.name=Wi.fieldName,cs&&fs.setAttribute("checked",!0),fs.tabIndex=jn,fs.addEventListener("change",ps=>{const{name:gs,checked:bs}=ps.target;for(const vs of this._getElementsByName(gs,Ji))ls.setValue(vs.id,{value:!1});ls.setValue(Ji,{value:bs})}),fs.addEventListener("resetform",ps=>{const gs=Wi.defaultFieldValue;ps.target.checked=gs!=null&&gs===Wi.buttonValue}),this.enableScripting&&this.hasJSActions){const ps=Wi.buttonValue;fs.addEventListener("updatefromsandbox",gs=>{const bs={value:vs=>{const _s=ps===vs.detail.value;for(const Us of this._getElementsByName(vs.target.name)){const Ds=_s&&Us.id===Ji;Us.domElement&&(Us.domElement.checked=Ds),ls.setValue(Us.id,{value:Ds})}}};this._dispatchEventFromSandbox(bs,gs)}),this._setEventListeners(fs,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],gs=>gs.target.checked)}return this._setBackgroundColor(fs),this._setDefaultPropertiesFromJS(fs),this.container.append(fs),this.container}}class ii extends ei{constructor(ls){super(ls,{ignoreBorder:ls.data.hasAppearance})}render(){const ls=super.render();ls.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(ls.title=this.data.alternativeText);const Wi=ls.lastChild;return this.enableScripting&&this.hasJSActions&&Wi&&(this._setDefaultPropertiesFromJS(Wi),Wi.addEventListener("updatefromsandbox",Ji=>{this._dispatchEventFromSandbox({},Ji)})),ls}}class ri extends Nn{constructor(ls){super(ls,{isRenderable:ls.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const ls=this.annotationStorage,Wi=this.data.id,Ji=ls.getValue(Wi,{value:this.data.fieldValue}),cs=document.createElement("select");Tn.add(cs),cs.setAttribute("data-element-id",Wi),cs.disabled=this.data.readOnly,this._setRequired(cs,this.data.required),cs.name=this.data.fieldName,cs.tabIndex=jn;let fs=this.data.combo&&this.data.options.length>0;this.data.combo||(cs.size=this.data.options.length,this.data.multiSelect&&(cs.multiple=!0)),cs.addEventListener("resetform",_s=>{const Us=this.data.defaultFieldValue;for(const Ds of cs.options)Ds.selected=Ds.value===Us});for(const _s of this.data.options){const Us=document.createElement("option");Us.textContent=_s.displayValue,Us.value=_s.exportValue,Ji.value.includes(_s.exportValue)&&(Us.setAttribute("selected",!0),fs=!1),cs.append(Us)}let ps=null;if(fs){const _s=document.createElement("option");_s.value=" ",_s.setAttribute("hidden",!0),_s.setAttribute("selected",!0),cs.prepend(_s),ps=()=>{_s.remove(),cs.removeEventListener("input",ps),ps=null},cs.addEventListener("input",ps)}const gs=_s=>{const Us=_s?"value":"textContent",{options:Ds,multiple:Ms}=cs;return Ms?Array.prototype.filter.call(Ds,js=>js.selected).map(js=>js[Us]):Ds.selectedIndex===-1?null:Ds[Ds.selectedIndex][Us]};let bs=gs(!1);const vs=_s=>{const Us=_s.target.options;return Array.prototype.map.call(Us,Ds=>({displayValue:Ds.textContent,exportValue:Ds.value}))};return this.enableScripting&&this.hasJSActions?(cs.addEventListener("updatefromsandbox",_s=>{const Us={value(Ds){ps==null||ps();const Ms=Ds.detail.value,js=new Set(Array.isArray(Ms)?Ms:[Ms]);for(const Vs of cs.options)Vs.selected=js.has(Vs.value);ls.setValue(Wi,{value:gs(!0)}),bs=gs(!1)},multipleSelection(Ds){cs.multiple=!0},remove(Ds){const Ms=cs.options,js=Ds.detail.remove;Ms[js].selected=!1,cs.remove(js),Ms.length>0&&Array.prototype.findIndex.call(Ms,Ss=>Ss.selected)===-1&&(Ms[0].selected=!0),ls.setValue(Wi,{value:gs(!0),items:vs(Ds)}),bs=gs(!1)},clear(Ds){for(;cs.length!==0;)cs.remove(0);ls.setValue(Wi,{value:null,items:[]}),bs=gs(!1)},insert(Ds){const{index:Ms,displayValue:js,exportValue:Vs}=Ds.detail.insert,Ss=cs.children[Ms],As=document.createElement("option");As.textContent=js,As.value=Vs,Ss?Ss.before(As):cs.append(As),ls.setValue(Wi,{value:gs(!0),items:vs(Ds)}),bs=gs(!1)},items(Ds){const{items:Ms}=Ds.detail;for(;cs.length!==0;)cs.remove(0);for(const js of Ms){const{displayValue:Vs,exportValue:Ss}=js,As=document.createElement("option");As.textContent=Vs,As.value=Ss,cs.append(As)}cs.options.length>0&&(cs.options[0].selected=!0),ls.setValue(Wi,{value:gs(!0),items:vs(Ds)}),bs=gs(!1)},indices(Ds){const Ms=new Set(Ds.detail.indices);for(const js of Ds.target.options)js.selected=Ms.has(js.index);ls.setValue(Wi,{value:gs(!0)}),bs=gs(!1)},editable(Ds){Ds.target.disabled=!Ds.detail.editable}};this._dispatchEventFromSandbox(Us,_s)}),cs.addEventListener("input",_s=>{var Ds;const Us=gs(!0);ls.setValue(Wi,{value:Us}),_s.preventDefault(),(Ds=this.linkService.eventBus)==null||Ds.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Wi,name:"Keystroke",value:bs,changeEx:Us,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(cs,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],_s=>_s.target.value)):cs.addEventListener("input",function(_s){ls.setValue(Wi,{value:gs(!0)})}),this.data.combo&&this._setTextStyle(cs),this._setBackgroundColor(cs),this._setDefaultPropertiesFromJS(cs),this.container.append(cs),this.container}}class di extends si{constructor(ls){const{data:Wi,elements:Ji}=ls;super(ls,{isRenderable:si._hasPopupData(Wi)}),this.elements=Ji}render(){this.container.classList.add("popupAnnotation");const ls=new fi({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),Wi=[];for(const Ji of this.elements)Ji.popup=ls,Wi.push(Ji.data.id),Ji.addHighlightArea();return this.container.setAttribute("aria-controls",Wi.map(Ji=>`${Kn.AnnotationPrefix}${Ji}`).join(",")),this.container}}class fi{constructor({container:ls,color:Wi,elements:Ji,titleObj:cs,modificationDate:fs,contentsObj:ps,richText:gs,parent:bs,rect:vs,parentRect:_s,open:Us}){Ki(this,Xi);Ki(this,qi);Ki(this,is);Ki(this,hs);Ki(this,Fi,null);Ki(this,zi,Qi(this,Xi,kh).bind(this));Ki(this,_i,Qi(this,hs,Cl).bind(this));Ki(this,ji,Qi(this,is,kl).bind(this));Ki(this,Pi,Qi(this,qi,xc).bind(this));Ki(this,Ni,null);Ki(this,Si,null);Ki(this,Ti,null);Ki(this,Ri,null);Ki(this,Mi,null);Ki(this,Ui,null);Ki(this,Hi,!1);Ki(this,Li,null);Ki(this,Ei,null);Ki(this,$i,null);Ki(this,Bi,null);Ki(this,Oi,!1);var Ms;ds(this,Si,ls),ds(this,Bi,cs),ds(this,Ti,ps),ds(this,$i,gs),ds(this,Mi,bs),ds(this,Ni,Wi),ds(this,Ei,vs),ds(this,Ui,_s),ds(this,Ri,Ji);const Ds=oi.PDFDateString.toDateObject(fs);Ds&&ds(this,Fi,bs.l10n.get("annotation_date_string",{date:Ds.toLocaleDateString(),time:Ds.toLocaleTimeString()})),this.trigger=Ji.flatMap(js=>js.getElementsToTriggerPopup());for(const js of this.trigger)js.addEventListener("click",vi(this,Pi)),js.addEventListener("mouseenter",vi(this,ji)),js.addEventListener("mouseleave",vi(this,_i)),js.classList.add("popupTriggerArea");for(const js of Ji)(Ms=js.container)==null||Ms.addEventListener("keydown",vi(this,zi));vi(this,Si).hidden=!0,Us&&Qi(this,qi,xc).call(this)}render(){if(vi(this,Li))return;const{page:{view:ls},viewport:{rawDims:{pageWidth:Wi,pageHeight:Ji,pageX:cs,pageY:fs}}}=vi(this,Mi),ps=ds(this,Li,document.createElement("div"));if(ps.className="popup",vi(this,Ni)){const Os=ps.style.outlineColor=Kn.Util.makeHexColor(...vi(this,Ni));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?ps.style.backgroundColor=`color-mix(in srgb, ${Os} 30%, white)`:ps.style.backgroundColor=Kn.Util.makeHexColor(...vi(this,Ni).map(Ws=>Math.floor(.7*(255-Ws)+Ws)))}const gs=document.createElement("span");gs.className="header";const bs=document.createElement("h1");if(gs.append(bs),{dir:bs.dir,str:bs.textContent}=vi(this,Bi),ps.append(gs),vi(this,Fi)){const Os=document.createElement("span");Os.classList.add("popupDate"),vi(this,Fi).then($s=>{Os.textContent=$s}),gs.append(Os)}const vs=vi(this,Ti),_s=vi(this,$i);if(_s!=null&&_s.str&&(!(vs!=null&&vs.str)||vs.str===_s.str))Ln.XfaLayer.render({xfaHtml:_s.html,intent:"richText",div:ps}),ps.lastChild.classList.add("richText","popupContent");else{const Os=this._formatContents(vs);ps.append(Os)}let Us=!!vi(this,Ui),Ds=Us?vi(this,Ui):vi(this,Ei);for(const Os of vi(this,Ri))if(!Ds||Kn.Util.intersect(Os.data.rect,Ds)!==null){Ds=Os.data.rect,Us=!0;break}const Ms=Kn.Util.normalizeRect([Ds[0],ls[3]-Ds[1]+ls[1],Ds[2],ls[3]-Ds[3]+ls[1]]),Vs=Us?Ds[2]-Ds[0]+5:0,Ss=Ms[0]+Vs,As=Ms[1],{style:Es}=vi(this,Si);Es.left=`${100*(Ss-cs)/Wi}%`,Es.top=`${100*(As-fs)/Ji}%`,vi(this,Si).append(ps)}_formatContents({str:ls,dir:Wi}){const Ji=document.createElement("p");Ji.classList.add("popupContent"),Ji.dir=Wi;const cs=ls.split(/(?:\r\n?|\n)/);for(let fs=0,ps=cs.length;fs<ps;++fs){const gs=cs[fs];Ji.append(document.createTextNode(gs)),fs<ps-1&&Ji.append(document.createElement("br"))}return Ji}forceHide(){ds(this,Oi,this.isVisible),vi(this,Oi)&&(vi(this,Si).hidden=!0)}maybeShow(){vi(this,Oi)&&(ds(this,Oi,!1),vi(this,Si).hidden=!1)}get isVisible(){return vi(this,Si).hidden===!1}}Fi=new WeakMap,zi=new WeakMap,_i=new WeakMap,ji=new WeakMap,Pi=new WeakMap,Ni=new WeakMap,Si=new WeakMap,Ti=new WeakMap,Ri=new WeakMap,Mi=new WeakMap,Ui=new WeakMap,Hi=new WeakMap,Li=new WeakMap,Ei=new WeakMap,$i=new WeakMap,Bi=new WeakMap,Oi=new WeakMap,Xi=new WeakSet,kh=function(ls){ls.altKey||ls.shiftKey||ls.ctrlKey||ls.metaKey||(ls.key==="Enter"||ls.key==="Escape"&&vi(this,Hi))&&Qi(this,qi,xc).call(this)},qi=new WeakSet,xc=function(){ds(this,Hi,!vi(this,Hi)),vi(this,Hi)?(Qi(this,is,kl).call(this),vi(this,Si).addEventListener("click",vi(this,Pi)),vi(this,Si).addEventListener("keydown",vi(this,zi))):(Qi(this,hs,Cl).call(this),vi(this,Si).removeEventListener("click",vi(this,Pi)),vi(this,Si).removeEventListener("keydown",vi(this,zi)))},is=new WeakSet,kl=function(){vi(this,Li)||this.render(),this.isVisible?vi(this,Hi)&&vi(this,Si).classList.add("focused"):(vi(this,Si).hidden=!1,vi(this,Si).style.zIndex=parseInt(vi(this,Si).style.zIndex)+1e3)},hs=new WeakSet,Cl=function(){vi(this,Si).classList.remove("focused"),!(vi(this,Hi)||!this.isVisible)&&(vi(this,Si).hidden=!0,vi(this,Si).style.zIndex=parseInt(vi(this,Si).style.zIndex)-1e3)};class wi extends si{constructor(ls){super(ls,{isRenderable:!0,ignoreBorder:!0}),this.textContent=ls.data.textContent,this.textPosition=ls.data.textPosition,this.annotationEditorType=Kn.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const ls=document.createElement("div");ls.classList.add("annotationTextContent"),ls.setAttribute("role","comment");for(const Wi of this.textContent){const Ji=document.createElement("span");Ji.textContent=Wi,ls.append(Ji)}this.container.append(ls)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}$n.FreeTextAnnotationElement=wi;class Jn extends si{constructor(Wi){super(Wi,{isRenderable:!0,ignoreBorder:!0});Ki(this,Vi,null)}render(){this.container.classList.add("lineAnnotation");const Wi=this.data,{width:Ji,height:cs}=Rn(Wi.rect),fs=this.svgFactory.create(Ji,cs,!0),ps=ds(this,Vi,this.svgFactory.createElement("svg:line"));return ps.setAttribute("x1",Wi.rect[2]-Wi.lineCoordinates[0]),ps.setAttribute("y1",Wi.rect[3]-Wi.lineCoordinates[1]),ps.setAttribute("x2",Wi.rect[2]-Wi.lineCoordinates[2]),ps.setAttribute("y2",Wi.rect[3]-Wi.lineCoordinates[3]),ps.setAttribute("stroke-width",Wi.borderStyle.width||1),ps.setAttribute("stroke","transparent"),ps.setAttribute("fill","transparent"),fs.append(ps),this.container.append(fs),!Wi.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return vi(this,Vi)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vi=new WeakMap;class pi extends si{constructor(Wi){super(Wi,{isRenderable:!0,ignoreBorder:!0});Ki(this,Zi,null)}render(){this.container.classList.add("squareAnnotation");const Wi=this.data,{width:Ji,height:cs}=Rn(Wi.rect),fs=this.svgFactory.create(Ji,cs,!0),ps=Wi.borderStyle.width,gs=ds(this,Zi,this.svgFactory.createElement("svg:rect"));return gs.setAttribute("x",ps/2),gs.setAttribute("y",ps/2),gs.setAttribute("width",Ji-ps),gs.setAttribute("height",cs-ps),gs.setAttribute("stroke-width",ps||1),gs.setAttribute("stroke","transparent"),gs.setAttribute("fill","transparent"),fs.append(gs),this.container.append(fs),!Wi.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return vi(this,Zi)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zi=new WeakMap;class Zn extends si{constructor(Wi){super(Wi,{isRenderable:!0,ignoreBorder:!0});Ki(this,us,null)}render(){this.container.classList.add("circleAnnotation");const Wi=this.data,{width:Ji,height:cs}=Rn(Wi.rect),fs=this.svgFactory.create(Ji,cs,!0),ps=Wi.borderStyle.width,gs=ds(this,us,this.svgFactory.createElement("svg:ellipse"));return gs.setAttribute("cx",Ji/2),gs.setAttribute("cy",cs/2),gs.setAttribute("rx",Ji/2-ps/2),gs.setAttribute("ry",cs/2-ps/2),gs.setAttribute("stroke-width",ps||1),gs.setAttribute("stroke","transparent"),gs.setAttribute("fill","transparent"),fs.append(gs),this.container.append(fs),!Wi.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return vi(this,us)}addHighlightArea(){this.container.classList.add("highlightArea")}}us=new WeakMap;class Gn extends si{constructor(Wi){super(Wi,{isRenderable:!0,ignoreBorder:!0});Ki(this,ts,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const Wi=this.data,{width:Ji,height:cs}=Rn(Wi.rect),fs=this.svgFactory.create(Ji,cs,!0);let ps=[];for(const bs of Wi.vertices){const vs=bs.x-Wi.rect[0],_s=Wi.rect[3]-bs.y;ps.push(vs+","+_s)}ps=ps.join(" ");const gs=ds(this,ts,this.svgFactory.createElement(this.svgElementName));return gs.setAttribute("points",ps),gs.setAttribute("stroke-width",Wi.borderStyle.width||1),gs.setAttribute("stroke","transparent"),gs.setAttribute("fill","transparent"),fs.append(gs),this.container.append(fs),!Wi.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return vi(this,ts)}addHighlightArea(){this.container.classList.add("highlightArea")}}ts=new WeakMap;class mi extends Gn{constructor(ls){super(ls),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Wn extends si{constructor(ls){super(ls,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class ni extends si{constructor(Wi){super(Wi,{isRenderable:!0,ignoreBorder:!0});Ki(this,es,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=Kn.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const Wi=this.data,{width:Ji,height:cs}=Rn(Wi.rect),fs=this.svgFactory.create(Ji,cs,!0);for(const ps of Wi.inkLists){let gs=[];for(const vs of ps){const _s=vs.x-Wi.rect[0],Us=Wi.rect[3]-vs.y;gs.push(`${_s},${Us}`)}gs=gs.join(" ");const bs=this.svgFactory.createElement(this.svgElementName);vi(this,es).push(bs),bs.setAttribute("points",gs),bs.setAttribute("stroke-width",Wi.borderStyle.width||1),bs.setAttribute("stroke","transparent"),bs.setAttribute("fill","transparent"),!Wi.popupRef&&this.hasPopupData&&this._createPopup(),fs.append(bs)}return this.container.append(fs),this.container}getElementsToTriggerPopup(){return vi(this,es)}addHighlightArea(){this.container.classList.add("highlightArea")}}es=new WeakMap,$n.InkAnnotationElement=ni;class li extends si{constructor(ls){super(ls,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Ai extends si{constructor(ls){super(ls,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class gi extends si{constructor(ls){super(ls,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class yi extends si{constructor(ls){super(ls,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Ii extends si{constructor(ls){super(ls,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}$n.StampAnnotationElement=Ii;class xi extends si{constructor(Wi){var fs;super(Wi,{isRenderable:!0});Ki(this,ss);Ki(this,rs,null);const{filename:Ji,content:cs}=this.data.file;this.filename=(0,oi.getFilenameFromUrl)(Ji,!0),this.content=cs,(fs=this.linkService.eventBus)==null||fs.dispatch("fileattachmentannotation",{source:this,filename:Ji,content:cs})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:Wi,data:Ji}=this;let cs;Ji.hasAppearance||Ji.fillAlpha===0?cs=document.createElement("div"):(cs=document.createElement("img"),cs.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(Ji.name)?"paperclip":"pushpin"}.svg`,Ji.fillAlpha&&Ji.fillAlpha<1&&(cs.style=`filter: opacity(${Math.round(Ji.fillAlpha*100)}%);`)),cs.addEventListener("dblclick",Qi(this,ss,Tl).bind(this)),ds(this,rs,cs);const{isMac:fs}=Kn.FeatureTest.platform;return Wi.addEventListener("keydown",ps=>{ps.key==="Enter"&&(fs?ps.metaKey:ps.ctrlKey)&&Qi(this,ss,Tl).call(this)}),!Ji.popupRef&&this.hasPopupData?this._createPopup():cs.classList.add("popupTriggerArea"),Wi.append(cs),Wi}getElementsToTriggerPopup(){return vi(this,rs)}addHighlightArea(){this.container.classList.add("highlightArea")}}rs=new WeakMap,ss=new WeakSet,Tl=function(){var Wi;(Wi=this.downloadManager)==null||Wi.openOrDownloadData(this.container,this.content,this.filename)};class Qn{constructor({div:ls,accessibilityManager:Wi,annotationCanvasMap:Ji,l10n:cs,page:fs,viewport:ps}){Ki(this,ms);Ki(this,ws);Ki(this,ks,null);Ki(this,xs,null);Ki(this,Rs,new Map);this.div=ls,ds(this,ks,Wi),ds(this,xs,Ji),this.l10n=cs,this.page=fs,this.viewport=ps,this.zIndex=0,this.l10n||(this.l10n=In.NullL10n)}async render(ls){const{annotations:Wi}=ls,Ji=this.div;(0,oi.setLayerDimensions)(Ji,this.viewport);const cs=new Map,fs={data:null,layer:Ji,linkService:ls.linkService,downloadManager:ls.downloadManager,imageResourcesPath:ls.imageResourcesPath||"",renderForms:ls.renderForms!==!1,svgFactory:new oi.DOMSVGFactory,annotationStorage:ls.annotationStorage||new Mn.AnnotationStorage,enableScripting:ls.enableScripting===!0,hasJSActions:ls.hasJSActions,fieldObjects:ls.fieldObjects,parent:this,elements:null};for(const ps of Wi){if(ps.noHTML)continue;const gs=ps.annotationType===Kn.AnnotationType.POPUP;if(gs){const _s=cs.get(ps.id);if(!_s)continue;fs.elements=_s}else{const{width:_s,height:Us}=Rn(ps.rect);if(_s<=0||Us<=0)continue}fs.data=ps;const bs=ui.create(fs);if(!bs.isRenderable)continue;if(!gs&&ps.popupRef){const _s=cs.get(ps.popupRef);_s?_s.push(bs):cs.set(ps.popupRef,[bs])}bs.annotationEditorType>0&&vi(this,Rs).set(bs.data.id,bs);const vs=bs.render();ps.hidden&&(vs.style.visibility="hidden"),Qi(this,ms,Ch).call(this,vs,ps.id)}Qi(this,ws,El).call(this),await this.l10n.translate(Ji)}update({viewport:ls}){const Wi=this.div;this.viewport=ls,(0,oi.setLayerDimensions)(Wi,{rotation:ls.rotation}),Qi(this,ws,El).call(this),Wi.hidden=!1}getEditableAnnotations(){return Array.from(vi(this,Rs).values())}getEditableAnnotation(ls){return vi(this,Rs).get(ls)}}ks=new WeakMap,xs=new WeakMap,Rs=new WeakMap,ms=new WeakSet,Ch=function(ls,Wi){var cs;const Ji=ls.firstChild||ls;Ji.id=`${Kn.AnnotationPrefix}${Wi}`,this.div.append(ls),(cs=vi(this,ks))==null||cs.moveElementInDOM(this.div,ls,Ji,!1)},ws=new WeakSet,El=function(){if(!vi(this,xs))return;const ls=this.div;for(const[Wi,Ji]of vi(this,xs)){const cs=ls.querySelector(`[data-annotation-id="${Wi}"]`);if(!cs)continue;const{firstChild:fs}=cs;fs?fs.nodeName==="CANVAS"?fs.replaceWith(Ji):fs.before(Ji):cs.append(Ji)}vi(this,xs).clear()},$n.AnnotationLayer=Qn},(ki,$n)=>{Object.defineProperty($n,"__esModule",{value:!0}),$n.ColorConverters=void 0;function Pn(Mn){return Math.floor(Math.max(0,Math.min(1,Mn))*255).toString(16).padStart(2,"0")}function Kn(Mn){return Math.max(0,Math.min(255,255*Mn))}class oi{static CMYK_G([ti,In,Ln,jn]){return["G",1-Math.min(1,.3*ti+.59*Ln+.11*In+jn)]}static G_CMYK([ti]){return["CMYK",0,0,0,1-ti]}static G_RGB([ti]){return["RGB",ti,ti,ti]}static G_rgb([ti]){return ti=Kn(ti),[ti,ti,ti]}static G_HTML([ti]){const In=Pn(ti);return`#${In}${In}${In}`}static RGB_G([ti,In,Ln]){return["G",.3*ti+.59*In+.11*Ln]}static RGB_rgb(ti){return ti.map(Kn)}static RGB_HTML(ti){return`#${ti.map(Pn).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([ti,In,Ln,jn]){return["RGB",1-Math.min(1,ti+jn),1-Math.min(1,Ln+jn),1-Math.min(1,In+jn)]}static CMYK_rgb([ti,In,Ln,jn]){return[Kn(1-Math.min(1,ti+jn)),Kn(1-Math.min(1,Ln+jn)),Kn(1-Math.min(1,In+jn))]}static CMYK_HTML(ti){const In=this.CMYK_RGB(ti).slice(1);return this.RGB_HTML(In)}static RGB_CMYK([ti,In,Ln]){const jn=1-ti,Cn=1-In,Tn=1-Ln,Rn=Math.min(jn,Cn,Tn);return["CMYK",jn,Cn,Tn,Rn]}}$n.ColorConverters=oi},(ki,$n)=>{Object.defineProperty($n,"__esModule",{value:!0}),$n.NullL10n=void 0,$n.getL10nFallback=Kn;const Pn={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};Pn.print_progress_percent="{{progress}}%";function Kn(ti,In){switch(ti){case"find_match_count":ti=`find_match_count[${In.total===1?"one":"other"}]`;break;case"find_match_count_limit":ti=`find_match_count_limit[${In.limit===1?"one":"other"}]`;break}return Pn[ti]||""}function oi(ti,In){return In?ti.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(Ln,jn)=>jn in In?In[jn]:"{{"+jn+"}}"):ti}const Mn={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(ti,In=null,Ln=Kn(ti,In)){return oi(Ln,In)},async translate(ti){}};$n.NullL10n=Mn},(ki,$n,Pn)=>{Object.defineProperty($n,"__esModule",{value:!0}),$n.XfaLayer=void 0;var Kn=Pn(25);class oi{static setupStorage(ti,In,Ln,jn,Cn){const Tn=jn.getValue(In,{value:null});switch(Ln.name){case"textarea":if(Tn.value!==null&&(ti.textContent=Tn.value),Cn==="print")break;ti.addEventListener("input",Rn=>{jn.setValue(In,{value:Rn.target.value})});break;case"input":if(Ln.attributes.type==="radio"||Ln.attributes.type==="checkbox"){if(Tn.value===Ln.attributes.xfaOn?ti.setAttribute("checked",!0):Tn.value===Ln.attributes.xfaOff&&ti.removeAttribute("checked"),Cn==="print")break;ti.addEventListener("change",Rn=>{jn.setValue(In,{value:Rn.target.checked?Rn.target.getAttribute("xfaOn"):Rn.target.getAttribute("xfaOff")})})}else{if(Tn.value!==null&&ti.setAttribute("value",Tn.value),Cn==="print")break;ti.addEventListener("input",Rn=>{jn.setValue(In,{value:Rn.target.value})})}break;case"select":if(Tn.value!==null){ti.setAttribute("value",Tn.value);for(const Rn of Ln.children)Rn.attributes.value===Tn.value?Rn.attributes.selected=!0:Rn.attributes.hasOwnProperty("selected")&&delete Rn.attributes.selected}ti.addEventListener("input",Rn=>{const ui=Rn.target.options,si=ui.selectedIndex===-1?"":ui[ui.selectedIndex].value;jn.setValue(In,{value:si})});break}}static setAttributes({html:ti,element:In,storage:Ln=null,intent:jn,linkService:Cn}){const{attributes:Tn}=In,Rn=ti instanceof HTMLAnchorElement;Tn.type==="radio"&&(Tn.name=`${Tn.name}-${jn}`);for(const[ui,si]of Object.entries(Tn))if(si!=null)switch(ui){case"class":si.length&&ti.setAttribute(ui,si.join(" "));break;case"dataId":break;case"id":ti.setAttribute("data-element-id",si);break;case"style":Object.assign(ti.style,si);break;case"textContent":ti.textContent=si;break;default:(!Rn||ui!=="href"&&ui!=="newWindow")&&ti.setAttribute(ui,si)}Rn&&Cn.addLinkAttributes(ti,Tn.href,Tn.newWindow),Ln&&Tn.dataId&&this.setupStorage(ti,Tn.dataId,In,Ln)}static render(ti){var ei;const In=ti.annotationStorage,Ln=ti.linkService,jn=ti.xfaHtml,Cn=ti.intent||"display",Tn=document.createElement(jn.name);jn.attributes&&this.setAttributes({html:Tn,element:jn,intent:Cn,linkService:Ln});const Rn=[[jn,-1,Tn]],ui=ti.div;if(ui.append(Tn),ti.viewport){const Bn=`matrix(${ti.viewport.transform.join(",")})`;ui.style.transform=Bn}Cn!=="richText"&&ui.setAttribute("class","xfaLayer xfaFont");const si=[];for(;Rn.length>0;){const[Bn,Nn,Hn]=Rn.at(-1);if(Nn+1===Bn.children.length){Rn.pop();continue}const On=Bn.children[++Rn.at(-1)[1]];if(On===null)continue;const{name:hi}=On;if(hi==="#text"){const ii=document.createTextNode(On.value);si.push(ii),Hn.append(ii);continue}const Xn=(ei=On==null?void 0:On.attributes)!=null&&ei.xmlns?document.createElementNS(On.attributes.xmlns,hi):document.createElement(hi);if(Hn.append(Xn),On.attributes&&this.setAttributes({html:Xn,element:On,storage:In,intent:Cn,linkService:Ln}),On.children&&On.children.length>0)Rn.push([On,-1,Xn]);else if(On.value){const ii=document.createTextNode(On.value);Kn.XfaText.shouldBuildText(hi)&&si.push(ii),Xn.append(ii)}}for(const Bn of ui.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))Bn.setAttribute("readOnly",!0);return{textDivs:si}}static update(ti){const In=`matrix(${ti.viewport.transform.join(",")})`;ti.div.style.transform=In,ti.div.hidden=!1}}$n.XfaLayer=oi},(ki,$n,Pn)=>{var jn,Cn,Tn,Rn,ui,si,ei,Bn,Nn,Hn,On,hi,Xn,ii,ri,Th,fi,Eh,Jn,Fh,Zn,Ih,mi,Fl,ni,Oh,Ai,Il,yi,_h,xi,Mh,ai,Ph,Yn,Rh,bi,Lh,Fi,Sr,_i,Ol,Pi,bc,Si,yc,Ri,Bo,Ui,_l,Li,wc,$i,Dh,Oi,Ml,Gi,Nh,ns,Bh,as,Pl,Yi,Sc,Zi,$o;Object.defineProperty($n,"__esModule",{value:!0}),$n.InkEditor=void 0;var Kn=Pn(1),oi=Pn(4),Mn=Pn(29),ti=Pn(6),In=Pn(5);const ts=class ts extends oi.AnnotationEditor{constructor(ss){super({...ss,name:"inkEditor"});Ki(this,ri);Ki(this,fi);Ki(this,Jn);Ki(this,Zn);Ki(this,mi);Ki(this,ni);Ki(this,Ai);Ki(this,yi);Ki(this,xi);Ki(this,ai);Ki(this,Yn);Ki(this,bi);Ki(this,Fi);Ki(this,_i);Ki(this,Pi);Ki(this,Si);Ki(this,Ri);Ki(this,Ui);Ki(this,Li);Ki(this,ns);Ki(this,as);Ki(this,Yi);Ki(this,Zi);Ki(this,jn,0);Ki(this,Cn,0);Ki(this,Tn,this.canvasPointermove.bind(this));Ki(this,Rn,this.canvasPointerleave.bind(this));Ki(this,ui,this.canvasPointerup.bind(this));Ki(this,si,this.canvasPointerdown.bind(this));Ki(this,ei,new Path2D);Ki(this,Bn,!1);Ki(this,Nn,!1);Ki(this,Hn,!1);Ki(this,On,null);Ki(this,hi,0);Ki(this,Xn,0);Ki(this,ii,null);this.color=ss.color||null,this.thickness=ss.thickness||null,this.opacity=ss.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(ss){oi.AnnotationEditor.initialize(ss,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(ss,os){switch(ss){case Kn.AnnotationEditorParamsType.INK_THICKNESS:ts._defaultThickness=os;break;case Kn.AnnotationEditorParamsType.INK_COLOR:ts._defaultColor=os;break;case Kn.AnnotationEditorParamsType.INK_OPACITY:ts._defaultOpacity=os/100;break}}updateParams(ss,os){switch(ss){case Kn.AnnotationEditorParamsType.INK_THICKNESS:Qi(this,ri,Th).call(this,os);break;case Kn.AnnotationEditorParamsType.INK_COLOR:Qi(this,fi,Eh).call(this,os);break;case Kn.AnnotationEditorParamsType.INK_OPACITY:Qi(this,Jn,Fh).call(this,os);break}}static get defaultPropertiesToUpdate(){return[[Kn.AnnotationEditorParamsType.INK_THICKNESS,ts._defaultThickness],[Kn.AnnotationEditorParamsType.INK_COLOR,ts._defaultColor||oi.AnnotationEditor._defaultLineColor],[Kn.AnnotationEditorParamsType.INK_OPACITY,Math.round(ts._defaultOpacity*100)]]}get propertiesToUpdate(){return[[Kn.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ts._defaultThickness],[Kn.AnnotationEditorParamsType.INK_COLOR,this.color||ts._defaultColor||oi.AnnotationEditor._defaultLineColor],[Kn.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??ts._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Qi(this,Pi,bc).call(this),Qi(this,Si,yc).call(this)),this.isAttachedToDOM||(this.parent.add(this),Qi(this,Ri,Bo).call(this)),Qi(this,Zi,$o).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,vi(this,On).disconnect(),ds(this,On,null),super.remove())}setParent(ss){!this.parent&&ss?this._uiManager.removeShouldRescale(this):this.parent&&ss===null&&this._uiManager.addShouldRescale(this),super.setParent(ss)}onScaleChanging(){const[ss,os]=this.parentDimensions,ks=this.width*ss,xs=this.height*os;this.setDimensions(ks,xs)}enableEditMode(){vi(this,Bn)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",vi(this,si)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",vi(this,si)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){vi(this,Bn)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ds(this,Bn,!0),this.div.classList.add("disabled"),Qi(this,Zi,$o).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(ss){this._focusEventsAllowed&&(super.focusin(ss),this.enableEditMode())}canvasPointerdown(ss){ss.button!==0||!this.isInEditMode()||vi(this,Bn)||(this.setInForeground(),ss.preventDefault(),ss.type!=="mouse"&&this.div.focus(),Qi(this,ni,Oh).call(this,ss.offsetX,ss.offsetY))}canvasPointermove(ss){ss.preventDefault(),Qi(this,Ai,Il).call(this,ss.offsetX,ss.offsetY)}canvasPointerup(ss){ss.preventDefault(),Qi(this,_i,Ol).call(this,ss)}canvasPointerleave(ss){Qi(this,_i,Ol).call(this,ss)}get isResizable(){return!this.isEmpty()&&vi(this,Bn)}render(){if(this.div)return this.div;let ss,os;this.width&&(ss=this.x,os=this.y),super.render(),oi.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Bs=>{var ws;return(ws=this.div)==null?void 0:ws.setAttribute("aria-label",Bs)});const[ks,xs,Rs,ms]=Qi(this,Zn,Ih).call(this);if(this.setAt(ks,xs,0,0),this.setDims(Rs,ms),Qi(this,Pi,bc).call(this),this.width){const[Bs,ws]=this.parentDimensions;this.setAspectRatio(this.width*Bs,this.height*ws),this.setAt(ss*Bs,os*ws,this.width*Bs,this.height*ws),ds(this,Hn,!0),Qi(this,Ri,Bo).call(this),this.setDims(this.width*Bs,this.height*ws),Qi(this,Fi,Sr).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Qi(this,Si,yc).call(this),this.div}setDimensions(ss,os){const ks=Math.round(ss),xs=Math.round(os);if(vi(this,hi)===ks&&vi(this,Xn)===xs)return;ds(this,hi,ks),ds(this,Xn,xs),this.canvas.style.visibility="hidden";const[Rs,ms]=this.parentDimensions;this.width=ss/Rs,this.height=os/ms,this.fixAndSetPosition(),vi(this,Bn)&&Qi(this,Ui,_l).call(this,ss,os),Qi(this,Ri,Bo).call(this),Qi(this,Fi,Sr).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(ss,os,ks){var fs,ps,gs;if(ss instanceof Mn.InkAnnotationElement)return null;const xs=super.deserialize(ss,os,ks);xs.thickness=ss.thickness,xs.color=Kn.Util.makeHexColor(...ss.color),xs.opacity=ss.opacity;const[Rs,ms]=xs.pageDimensions,Bs=xs.width*Rs,ws=xs.height*ms,Ts=xs.parentScale,Is=ss.thickness/2;ds(xs,Bn,!0),ds(xs,hi,Math.round(Bs)),ds(xs,Xn,Math.round(ws));const{paths:ls,rect:Wi,rotation:Ji}=ss;for(let{bezier:bs}of ls){bs=Qi(fs=ts,Gi,Nh).call(fs,bs,Wi,Ji);const vs=[];xs.paths.push(vs);let _s=Ts*(bs[0]-Is),Us=Ts*(bs[1]-Is);for(let Ms=2,js=bs.length;Ms<js;Ms+=6){const Vs=Ts*(bs[Ms]-Is),Ss=Ts*(bs[Ms+1]-Is),As=Ts*(bs[Ms+2]-Is),Es=Ts*(bs[Ms+3]-Is),Os=Ts*(bs[Ms+4]-Is),$s=Ts*(bs[Ms+5]-Is);vs.push([[_s,Us],[Vs,Ss],[As,Es],[Os,$s]]),_s=Os,Us=$s}const Ds=Qi(this,$i,Dh).call(this,vs);xs.bezierPath2D.push(Ds)}const cs=Qi(ps=xs,as,Pl).call(ps);return ds(xs,Cn,Math.max(oi.AnnotationEditor.MIN_SIZE,cs[2]-cs[0])),ds(xs,jn,Math.max(oi.AnnotationEditor.MIN_SIZE,cs[3]-cs[1])),Qi(gs=xs,Ui,_l).call(gs,Bs,ws),xs}serialize(){if(this.isEmpty())return null;const ss=this.getRect(0,0),os=oi.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Kn.AnnotationEditorType.INK,color:os,thickness:this.thickness,opacity:this.opacity,paths:Qi(this,ns,Bh).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,ss),pageIndex:this.pageIndex,rect:ss,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};jn=new WeakMap,Cn=new WeakMap,Tn=new WeakMap,Rn=new WeakMap,ui=new WeakMap,si=new WeakMap,ei=new WeakMap,Bn=new WeakMap,Nn=new WeakMap,Hn=new WeakMap,On=new WeakMap,hi=new WeakMap,Xn=new WeakMap,ii=new WeakMap,ri=new WeakSet,Th=function(ss){const os=this.thickness;this.addCommands({cmd:()=>{this.thickness=ss,Qi(this,Zi,$o).call(this)},undo:()=>{this.thickness=os,Qi(this,Zi,$o).call(this)},mustExec:!0,type:Kn.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},fi=new WeakSet,Eh=function(ss){const os=this.color;this.addCommands({cmd:()=>{this.color=ss,Qi(this,Fi,Sr).call(this)},undo:()=>{this.color=os,Qi(this,Fi,Sr).call(this)},mustExec:!0,type:Kn.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Jn=new WeakSet,Fh=function(ss){ss/=100;const os=this.opacity;this.addCommands({cmd:()=>{this.opacity=ss,Qi(this,Fi,Sr).call(this)},undo:()=>{this.opacity=os,Qi(this,Fi,Sr).call(this)},mustExec:!0,type:Kn.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Zn=new WeakSet,Ih=function(){const{parentRotation:ss,parentDimensions:[os,ks]}=this;switch(ss){case 90:return[0,ks,ks,os];case 180:return[os,ks,os,ks];case 270:return[os,0,ks,os];default:return[0,0,os,ks]}},mi=new WeakSet,Fl=function(){const{ctx:ss,color:os,opacity:ks,thickness:xs,parentScale:Rs,scaleFactor:ms}=this;ss.lineWidth=xs*Rs/ms,ss.lineCap="round",ss.lineJoin="round",ss.miterLimit=10,ss.strokeStyle=`${os}${(0,In.opacityToHex)(ks)}`},ni=new WeakSet,Oh=function(ss,os){this.canvas.addEventListener("contextmenu",ti.noContextMenu),this.canvas.addEventListener("pointerleave",vi(this,Rn)),this.canvas.addEventListener("pointermove",vi(this,Tn)),this.canvas.addEventListener("pointerup",vi(this,ui)),this.canvas.removeEventListener("pointerdown",vi(this,si)),this.isEditing=!0,vi(this,Hn)||(ds(this,Hn,!0),Qi(this,Ri,Bo).call(this),this.thickness||(this.thickness=ts._defaultThickness),this.color||(this.color=ts._defaultColor||oi.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=ts._defaultOpacity)),this.currentPath.push([ss,os]),ds(this,Nn,!1),Qi(this,mi,Fl).call(this),ds(this,ii,()=>{Qi(this,ai,Ph).call(this),vi(this,ii)&&window.requestAnimationFrame(vi(this,ii))}),window.requestAnimationFrame(vi(this,ii))},Ai=new WeakSet,Il=function(ss,os){const[ks,xs]=this.currentPath.at(-1);if(this.currentPath.length>1&&ss===ks&&os===xs)return;const Rs=this.currentPath;let ms=vi(this,ei);if(Rs.push([ss,os]),ds(this,Nn,!0),Rs.length<=2){ms.moveTo(...Rs[0]),ms.lineTo(ss,os);return}Rs.length===3&&(ds(this,ei,ms=new Path2D),ms.moveTo(...Rs[0])),Qi(this,Yn,Rh).call(this,ms,...Rs.at(-3),...Rs.at(-2),ss,os)},yi=new WeakSet,_h=function(){if(this.currentPath.length===0)return;const ss=this.currentPath.at(-1);vi(this,ei).lineTo(...ss)},xi=new WeakSet,Mh=function(ss,os){ds(this,ii,null),ss=Math.min(Math.max(ss,0),this.canvas.width),os=Math.min(Math.max(os,0),this.canvas.height),Qi(this,Ai,Il).call(this,ss,os),Qi(this,yi,_h).call(this);let ks;if(this.currentPath.length!==1)ks=Qi(this,bi,Lh).call(this);else{const ws=[ss,os];ks=[[ws,ws.slice(),ws.slice(),ws]]}const xs=vi(this,ei),Rs=this.currentPath;this.currentPath=[],ds(this,ei,new Path2D);const ms=()=>{this.allRawPaths.push(Rs),this.paths.push(ks),this.bezierPath2D.push(xs),this.rebuild()},Bs=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Qi(this,Pi,bc).call(this),Qi(this,Si,yc).call(this)),Qi(this,Zi,$o).call(this))};this.addCommands({cmd:ms,undo:Bs,mustExec:!0})},ai=new WeakSet,Ph=function(){if(!vi(this,Nn))return;ds(this,Nn,!1);const ss=Math.ceil(this.thickness*this.parentScale),os=this.currentPath.slice(-3),ks=os.map(ms=>ms[0]),xs=os.map(ms=>ms[1]);Math.min(...ks)-ss,Math.max(...ks)+ss,Math.min(...xs)-ss,Math.max(...xs)+ss;const{ctx:Rs}=this;Rs.save(),Rs.clearRect(0,0,this.canvas.width,this.canvas.height);for(const ms of this.bezierPath2D)Rs.stroke(ms);Rs.stroke(vi(this,ei)),Rs.restore()},Yn=new WeakSet,Rh=function(ss,os,ks,xs,Rs,ms,Bs){const ws=(os+xs)/2,Ts=(ks+Rs)/2,Is=(xs+ms)/2,ls=(Rs+Bs)/2;ss.bezierCurveTo(ws+2*(xs-ws)/3,Ts+2*(Rs-Ts)/3,Is+2*(xs-Is)/3,ls+2*(Rs-ls)/3,Is,ls)},bi=new WeakSet,Lh=function(){const ss=this.currentPath;if(ss.length<=2)return[[ss[0],ss[0],ss.at(-1),ss.at(-1)]];const os=[];let ks,[xs,Rs]=ss[0];for(ks=1;ks<ss.length-2;ks++){const[Wi,Ji]=ss[ks],[cs,fs]=ss[ks+1],ps=(Wi+cs)/2,gs=(Ji+fs)/2,bs=[xs+2*(Wi-xs)/3,Rs+2*(Ji-Rs)/3],vs=[ps+2*(Wi-ps)/3,gs+2*(Ji-gs)/3];os.push([[xs,Rs],bs,vs,[ps,gs]]),[xs,Rs]=[ps,gs]}const[ms,Bs]=ss[ks],[ws,Ts]=ss[ks+1],Is=[xs+2*(ms-xs)/3,Rs+2*(Bs-Rs)/3],ls=[ws+2*(ms-ws)/3,Ts+2*(Bs-Ts)/3];return os.push([[xs,Rs],Is,ls,[ws,Ts]]),os},Fi=new WeakSet,Sr=function(){if(this.isEmpty()){Qi(this,Li,wc).call(this);return}Qi(this,mi,Fl).call(this);const{canvas:ss,ctx:os}=this;os.setTransform(1,0,0,1,0,0),os.clearRect(0,0,ss.width,ss.height),Qi(this,Li,wc).call(this);for(const ks of this.bezierPath2D)os.stroke(ks)},_i=new WeakSet,Ol=function(ss){this.canvas.removeEventListener("pointerleave",vi(this,Rn)),this.canvas.removeEventListener("pointermove",vi(this,Tn)),this.canvas.removeEventListener("pointerup",vi(this,ui)),this.canvas.addEventListener("pointerdown",vi(this,si)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",ti.noContextMenu)},10),Qi(this,xi,Mh).call(this,ss.offsetX,ss.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Pi=new WeakSet,bc=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",oi.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(ss=>{var os;return(os=this.canvas)==null?void 0:os.setAttribute("aria-label",ss)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Si=new WeakSet,yc=function(){ds(this,On,new ResizeObserver(ss=>{const os=ss[0].contentRect;os.width&&os.height&&this.setDimensions(os.width,os.height)})),vi(this,On).observe(this.div)},Ri=new WeakSet,Bo=function(){if(!vi(this,Hn))return;const[ss,os]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*ss),this.canvas.height=Math.ceil(this.height*os),Qi(this,Li,wc).call(this)},Ui=new WeakSet,_l=function(ss,os){const ks=Qi(this,Yi,Sc).call(this),xs=(ss-ks)/vi(this,Cn),Rs=(os-ks)/vi(this,jn);this.scaleFactor=Math.min(xs,Rs)},Li=new WeakSet,wc=function(){const ss=Qi(this,Yi,Sc).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+ss,this.translationY*this.scaleFactor+ss)},$i=new WeakSet,Dh=function(ss){const os=new Path2D;for(let ks=0,xs=ss.length;ks<xs;ks++){const[Rs,ms,Bs,ws]=ss[ks];ks===0&&os.moveTo(...Rs),os.bezierCurveTo(ms[0],ms[1],Bs[0],Bs[1],ws[0],ws[1])}return os},Oi=new WeakSet,Ml=function(ss,os,ks){const[xs,Rs,ms,Bs]=os;switch(ks){case 0:for(let ws=0,Ts=ss.length;ws<Ts;ws+=2)ss[ws]+=xs,ss[ws+1]=Bs-ss[ws+1];break;case 90:for(let ws=0,Ts=ss.length;ws<Ts;ws+=2){const Is=ss[ws];ss[ws]=ss[ws+1]+xs,ss[ws+1]=Is+Rs}break;case 180:for(let ws=0,Ts=ss.length;ws<Ts;ws+=2)ss[ws]=ms-ss[ws],ss[ws+1]+=Rs;break;case 270:for(let ws=0,Ts=ss.length;ws<Ts;ws+=2){const Is=ss[ws];ss[ws]=ms-ss[ws+1],ss[ws+1]=Bs-Is}break;default:throw new Error("Invalid rotation")}return ss},Gi=new WeakSet,Nh=function(ss,os,ks){const[xs,Rs,ms,Bs]=os;switch(ks){case 0:for(let ws=0,Ts=ss.length;ws<Ts;ws+=2)ss[ws]-=xs,ss[ws+1]=Bs-ss[ws+1];break;case 90:for(let ws=0,Ts=ss.length;ws<Ts;ws+=2){const Is=ss[ws];ss[ws]=ss[ws+1]-Rs,ss[ws+1]=Is-xs}break;case 180:for(let ws=0,Ts=ss.length;ws<Ts;ws+=2)ss[ws]=ms-ss[ws],ss[ws+1]-=Rs;break;case 270:for(let ws=0,Ts=ss.length;ws<Ts;ws+=2){const Is=ss[ws];ss[ws]=Bs-ss[ws+1],ss[ws+1]=ms-Is}break;default:throw new Error("Invalid rotation")}return ss},ns=new WeakSet,Bh=function(ss,os,ks,xs){var Ts,Is;const Rs=[],ms=this.thickness/2,Bs=ss*os+ms,ws=ss*ks+ms;for(const ls of this.paths){const Wi=[],Ji=[];for(let cs=0,fs=ls.length;cs<fs;cs++){const[ps,gs,bs,vs]=ls[cs],_s=ss*ps[0]+Bs,Us=ss*ps[1]+ws,Ds=ss*gs[0]+Bs,Ms=ss*gs[1]+ws,js=ss*bs[0]+Bs,Vs=ss*bs[1]+ws,Ss=ss*vs[0]+Bs,As=ss*vs[1]+ws;cs===0&&(Wi.push(_s,Us),Ji.push(_s,Us)),Wi.push(Ds,Ms,js,Vs,Ss,As),Ji.push(Ds,Ms),cs===fs-1&&Ji.push(Ss,As)}Rs.push({bezier:Qi(Ts=ts,Oi,Ml).call(Ts,Wi,xs,this.rotation),points:Qi(Is=ts,Oi,Ml).call(Is,Ji,xs,this.rotation)})}return Rs},as=new WeakSet,Pl=function(){let ss=1/0,os=-1/0,ks=1/0,xs=-1/0;for(const Rs of this.paths)for(const[ms,Bs,ws,Ts]of Rs){const Is=Kn.Util.bezierBoundingBox(...ms,...Bs,...ws,...Ts);ss=Math.min(ss,Is[0]),ks=Math.min(ks,Is[1]),os=Math.max(os,Is[2]),xs=Math.max(xs,Is[3])}return[ss,ks,os,xs]},Yi=new WeakSet,Sc=function(){return vi(this,Bn)?Math.ceil(this.thickness*this.parentScale):0},Zi=new WeakSet,$o=function(ss=!1){if(this.isEmpty())return;if(!vi(this,Bn)){Qi(this,Fi,Sr).call(this);return}const os=Qi(this,as,Pl).call(this),ks=Qi(this,Yi,Sc).call(this);ds(this,Cn,Math.max(oi.AnnotationEditor.MIN_SIZE,os[2]-os[0])),ds(this,jn,Math.max(oi.AnnotationEditor.MIN_SIZE,os[3]-os[1]));const xs=Math.ceil(ks+vi(this,Cn)*this.scaleFactor),Rs=Math.ceil(ks+vi(this,jn)*this.scaleFactor),[ms,Bs]=this.parentDimensions;this.width=xs/ms,this.height=Rs/Bs,this.setAspectRatio(xs,Rs);const ws=this.translationX,Ts=this.translationY;this.translationX=-os[0],this.translationY=-os[1],Qi(this,Ri,Bo).call(this),Qi(this,Fi,Sr).call(this),ds(this,hi,xs),ds(this,Xn,Rs),this.setDims(xs,Rs);const Is=ss?ks/this.scaleFactor/2:0;this.translate(ws-this.translationX-Is,Ts-this.translationY-Is)},Ki(ts,$i),Ki(ts,Oi),Ki(ts,Gi),ta(ts,"_defaultColor",null),ta(ts,"_defaultOpacity",1),ta(ts,"_defaultThickness",1),ta(ts,"_type","ink");let Ln=ts;$n.InkEditor=Ln},(ki,$n,Pn)=>{var Ln,jn,Cn,Tn,Rn,ui,si,ei,Bn,Nn,Hn,P0,hi,R0,ii,Ac,di,Rl,wi,$h,pi,Uh,Gn,Ll,Wn,vc,li,jh;Object.defineProperty($n,"__esModule",{value:!0}),$n.StampEditor=void 0;var Kn=Pn(1),oi=Pn(4),Mn=Pn(6),ti=Pn(29);const gi=class gi extends oi.AnnotationEditor{constructor(xi){super({...xi,name:"stampEditor"});Ki(this,Hn);Ki(this,hi);Ki(this,ii);Ki(this,di);Ki(this,wi);Ki(this,pi);Ki(this,Gn);Ki(this,Wn);Ki(this,li);Ki(this,Ln,null);Ki(this,jn,null);Ki(this,Cn,null);Ki(this,Tn,null);Ki(this,Rn,null);Ki(this,ui,null);Ki(this,si,null);Ki(this,ei,null);Ki(this,Bn,!1);Ki(this,Nn,!1);ds(this,Tn,xi.bitmapUrl),ds(this,Rn,xi.bitmapFile)}static initialize(xi){oi.AnnotationEditor.initialize(xi)}static get supportedTypes(){const xi=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,Kn.shadow)(this,"supportedTypes",xi.map(Qn=>`image/${Qn}`))}static get supportedTypesStr(){return(0,Kn.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(xi){return this.supportedTypes.includes(xi)}static paste(xi,Qn){Qn.pasteEditor(Kn.AnnotationEditorType.STAMP,{bitmapFile:xi.getAsFile()})}remove(){var xi,Qn;vi(this,jn)&&(ds(this,Ln,null),this._uiManager.imageManager.deleteId(vi(this,jn)),(xi=vi(this,ui))==null||xi.remove(),ds(this,ui,null),(Qn=vi(this,si))==null||Qn.disconnect(),ds(this,si,null)),super.remove()}rebuild(){if(!this.parent){vi(this,jn)&&Qi(this,ii,Ac).call(this);return}super.rebuild(),this.div!==null&&(vi(this,jn)&&Qi(this,ii,Ac).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(vi(this,Cn)||vi(this,Ln)||vi(this,Tn)||vi(this,Rn))}get isResizable(){return!0}render(){if(this.div)return this.div;let xi,Qn;if(this.width&&(xi=this.x,Qn=this.y),super.render(),this.div.hidden=!0,vi(this,Ln)?Qi(this,di,Rl).call(this):Qi(this,ii,Ac).call(this),this.width){const[ai,Vn]=this.parentDimensions;this.setAt(xi*ai,Qn*Vn,this.width*ai,this.height*Vn)}return this.div}static deserialize(xi,Qn,ai){if(xi instanceof ti.StampAnnotationElement)return null;const Vn=super.deserialize(xi,Qn,ai),{rect:Yn,bitmapUrl:ci,bitmapId:bi,isSvg:Ci,accessibilityData:Fi}=xi;bi&&ai.imageManager.isValidId(bi)?ds(Vn,jn,bi):ds(Vn,Tn,ci),ds(Vn,Bn,Ci);const[zi,_i]=Vn.pageDimensions;return Vn.width=(Yn[2]-Yn[0])/zi,Vn.height=(Yn[3]-Yn[1])/_i,Fi&&(Vn.altTextData=Fi),Vn}serialize(xi=!1,Qn=null){if(this.isEmpty())return null;const ai={annotationType:Kn.AnnotationEditorType.STAMP,bitmapId:vi(this,jn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:vi(this,Bn),structTreeParentId:this._structTreeParentId};if(xi)return ai.bitmapUrl=Qi(this,Wn,vc).call(this,!0),ai.accessibilityData=this.altTextData,ai;const{decorative:Vn,altText:Yn}=this.altTextData;if(!Vn&&Yn&&(ai.accessibilityData={type:"Figure",alt:Yn}),Qn===null)return ai;Qn.stamps||(Qn.stamps=new Map);const ci=vi(this,Bn)?(ai.rect[2]-ai.rect[0])*(ai.rect[3]-ai.rect[1]):null;if(!Qn.stamps.has(vi(this,jn)))Qn.stamps.set(vi(this,jn),{area:ci,serialized:ai}),ai.bitmap=Qi(this,Wn,vc).call(this,!1);else if(vi(this,Bn)){const bi=Qn.stamps.get(vi(this,jn));ci>bi.area&&(bi.area=ci,bi.serialized.bitmap.close(),bi.serialized.bitmap=Qi(this,Wn,vc).call(this,!1))}return ai}};Ln=new WeakMap,jn=new WeakMap,Cn=new WeakMap,Tn=new WeakMap,Rn=new WeakMap,ui=new WeakMap,si=new WeakMap,ei=new WeakMap,Bn=new WeakMap,Nn=new WeakMap,Hn=new WeakSet,P0=function(xi,Qn=!1){if(!xi){this.remove();return}ds(this,Ln,xi.bitmap),Qn||(ds(this,jn,xi.id),ds(this,Bn,xi.isSvg)),Qi(this,di,Rl).call(this)},hi=new WeakSet,R0=function(){ds(this,Cn,null),this._uiManager.enableWaiting(!1),vi(this,ui)&&this.div.focus()},ii=new WeakSet,Ac=function(){if(vi(this,jn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(vi(this,jn)).then(Qn=>Qi(this,Hn,P0).call(this,Qn,!0)).finally(()=>Qi(this,hi,R0).call(this));return}if(vi(this,Tn)){const Qn=vi(this,Tn);ds(this,Tn,null),this._uiManager.enableWaiting(!0),ds(this,Cn,this._uiManager.imageManager.getFromUrl(Qn).then(ai=>Qi(this,Hn,P0).call(this,ai)).finally(()=>Qi(this,hi,R0).call(this)));return}if(vi(this,Rn)){const Qn=vi(this,Rn);ds(this,Rn,null),this._uiManager.enableWaiting(!0),ds(this,Cn,this._uiManager.imageManager.getFromFile(Qn).then(ai=>Qi(this,Hn,P0).call(this,ai)).finally(()=>Qi(this,hi,R0).call(this)));return}const xi=document.createElement("input");xi.type="file",xi.accept=gi.supportedTypesStr,ds(this,Cn,new Promise(Qn=>{xi.addEventListener("change",async()=>{if(!xi.files||xi.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const ai=await this._uiManager.imageManager.getFromFile(xi.files[0]);Qi(this,Hn,P0).call(this,ai)}Qn()}),xi.addEventListener("cancel",()=>{this.remove(),Qn()})}).finally(()=>Qi(this,hi,R0).call(this))),xi.click()},di=new WeakSet,Rl=function(){const{div:xi}=this;let{width:Qn,height:ai}=vi(this,Ln);const[Vn,Yn]=this.pageDimensions,ci=.75;if(this.width)Qn=this.width*Vn,ai=this.height*Yn;else if(Qn>ci*Vn||ai>ci*Yn){const zi=Math.min(ci*Vn/Qn,ci*Yn/ai);Qn*=zi,ai*=zi}const[bi,Ci]=this.parentDimensions;this.setDims(Qn*bi/Vn,ai*Ci/Yn),this._uiManager.enableWaiting(!1);const Fi=ds(this,ui,document.createElement("canvas"));xi.append(Fi),xi.hidden=!1,Qi(this,Gn,Ll).call(this,Qn,ai),Qi(this,li,jh).call(this),vi(this,Nn)||(this.parent.addUndoableEditor(this),ds(this,Nn,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},wi=new WeakSet,$h=function(xi,Qn){var ci;const[ai,Vn]=this.parentDimensions;this.width=xi/ai,this.height=Qn/Vn,this.setDims(xi,Qn),(ci=this._initialOptions)!=null&&ci.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,vi(this,ei)!==null&&clearTimeout(vi(this,ei)),ds(this,ei,setTimeout(()=>{ds(this,ei,null),Qi(this,Gn,Ll).call(this,xi,Qn)},200))},pi=new WeakSet,Uh=function(xi,Qn){const{width:ai,height:Vn}=vi(this,Ln);let Yn=ai,ci=Vn,bi=vi(this,Ln);for(;Yn>2*xi||ci>2*Qn;){const Ci=Yn,Fi=ci;Yn>2*xi&&(Yn=Yn>=16384?Math.floor(Yn/2)-1:Math.ceil(Yn/2)),ci>2*Qn&&(ci=ci>=16384?Math.floor(ci/2)-1:Math.ceil(ci/2));const zi=new OffscreenCanvas(Yn,ci);zi.getContext("2d").drawImage(bi,0,0,Ci,Fi,0,0,Yn,ci),bi=zi.transferToImageBitmap()}return bi},Gn=new WeakSet,Ll=function(xi,Qn){xi=Math.ceil(xi),Qn=Math.ceil(Qn);const ai=vi(this,ui);if(!ai||ai.width===xi&&ai.height===Qn)return;ai.width=xi,ai.height=Qn;const Vn=vi(this,Bn)?vi(this,Ln):Qi(this,pi,Uh).call(this,xi,Qn),Yn=ai.getContext("2d");Yn.filter=this._uiManager.hcmFilter,Yn.drawImage(Vn,0,0,Vn.width,Vn.height,0,0,xi,Qn)},Wn=new WeakSet,vc=function(xi){if(xi){if(vi(this,Bn)){const Vn=this._uiManager.imageManager.getSvgUrl(vi(this,jn));if(Vn)return Vn}const Qn=document.createElement("canvas");return{width:Qn.width,height:Qn.height}=vi(this,Ln),Qn.getContext("2d").drawImage(vi(this,Ln),0,0),Qn.toDataURL()}if(vi(this,Bn)){const[Qn,ai]=this.pageDimensions,Vn=Math.round(this.width*Qn*Mn.PixelsPerInch.PDF_TO_CSS_UNITS),Yn=Math.round(this.height*ai*Mn.PixelsPerInch.PDF_TO_CSS_UNITS),ci=new OffscreenCanvas(Vn,Yn);return ci.getContext("2d").drawImage(vi(this,Ln),0,0,vi(this,Ln).width,vi(this,Ln).height,0,0,Vn,Yn),ci.transferToImageBitmap()}return structuredClone(vi(this,Ln))},li=new WeakSet,jh=function(){ds(this,si,new ResizeObserver(xi=>{const Qn=xi[0].contentRect;Qn.width&&Qn.height&&Qi(this,wi,$h).call(this,Qn.width,Qn.height)})),vi(this,si).observe(this.div)},ta(gi,"_type","stamp");let In=gi;$n.StampEditor=In}],__webpack_module_cache__={};function __w_pdfjs_require__(ki){var $n=__webpack_module_cache__[ki];if($n!==void 0)return $n.exports;var Pn=__webpack_module_cache__[ki]={exports:{}};return __webpack_modules__[ki](Pn,Pn.exports,__w_pdfjs_require__),Pn.exports}var __webpack_exports__={};return(()=>{var ki=__webpack_exports__;Object.defineProperty(ki,"__esModule",{value:!0}),Object.defineProperty(ki,"AbortException",{enumerable:!0,get:function(){return $n.AbortException}}),Object.defineProperty(ki,"AnnotationEditorLayer",{enumerable:!0,get:function(){return Mn.AnnotationEditorLayer}}),Object.defineProperty(ki,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return $n.AnnotationEditorParamsType}}),Object.defineProperty(ki,"AnnotationEditorType",{enumerable:!0,get:function(){return $n.AnnotationEditorType}}),Object.defineProperty(ki,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return ti.AnnotationEditorUIManager}}),Object.defineProperty(ki,"AnnotationLayer",{enumerable:!0,get:function(){return In.AnnotationLayer}}),Object.defineProperty(ki,"AnnotationMode",{enumerable:!0,get:function(){return $n.AnnotationMode}}),Object.defineProperty(ki,"CMapCompressionType",{enumerable:!0,get:function(){return $n.CMapCompressionType}}),Object.defineProperty(ki,"DOMSVGFactory",{enumerable:!0,get:function(){return Kn.DOMSVGFactory}}),Object.defineProperty(ki,"FeatureTest",{enumerable:!0,get:function(){return $n.FeatureTest}}),Object.defineProperty(ki,"GlobalWorkerOptions",{enumerable:!0,get:function(){return Ln.GlobalWorkerOptions}}),Object.defineProperty(ki,"ImageKind",{enumerable:!0,get:function(){return $n.ImageKind}}),Object.defineProperty(ki,"InvalidPDFException",{enumerable:!0,get:function(){return $n.InvalidPDFException}}),Object.defineProperty(ki,"MissingPDFException",{enumerable:!0,get:function(){return $n.MissingPDFException}}),Object.defineProperty(ki,"OPS",{enumerable:!0,get:function(){return $n.OPS}}),Object.defineProperty(ki,"PDFDataRangeTransport",{enumerable:!0,get:function(){return Pn.PDFDataRangeTransport}}),Object.defineProperty(ki,"PDFDateString",{enumerable:!0,get:function(){return Kn.PDFDateString}}),Object.defineProperty(ki,"PDFWorker",{enumerable:!0,get:function(){return Pn.PDFWorker}}),Object.defineProperty(ki,"PasswordResponses",{enumerable:!0,get:function(){return $n.PasswordResponses}}),Object.defineProperty(ki,"PermissionFlag",{enumerable:!0,get:function(){return $n.PermissionFlag}}),Object.defineProperty(ki,"PixelsPerInch",{enumerable:!0,get:function(){return Kn.PixelsPerInch}}),Object.defineProperty(ki,"PromiseCapability",{enumerable:!0,get:function(){return $n.PromiseCapability}}),Object.defineProperty(ki,"RenderingCancelledException",{enumerable:!0,get:function(){return Kn.RenderingCancelledException}}),Object.defineProperty(ki,"SVGGraphics",{enumerable:!0,get:function(){return Pn.SVGGraphics}}),Object.defineProperty(ki,"UnexpectedResponseException",{enumerable:!0,get:function(){return $n.UnexpectedResponseException}}),Object.defineProperty(ki,"Util",{enumerable:!0,get:function(){return $n.Util}}),Object.defineProperty(ki,"VerbosityLevel",{enumerable:!0,get:function(){return $n.VerbosityLevel}}),Object.defineProperty(ki,"XfaLayer",{enumerable:!0,get:function(){return jn.XfaLayer}}),Object.defineProperty(ki,"build",{enumerable:!0,get:function(){return Pn.build}}),Object.defineProperty(ki,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return $n.createValidAbsoluteUrl}}),Object.defineProperty(ki,"getDocument",{enumerable:!0,get:function(){return Pn.getDocument}}),Object.defineProperty(ki,"getFilenameFromUrl",{enumerable:!0,get:function(){return Kn.getFilenameFromUrl}}),Object.defineProperty(ki,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return Kn.getPdfFilenameFromUrl}}),Object.defineProperty(ki,"getXfaPageViewport",{enumerable:!0,get:function(){return Kn.getXfaPageViewport}}),Object.defineProperty(ki,"isDataScheme",{enumerable:!0,get:function(){return Kn.isDataScheme}}),Object.defineProperty(ki,"isPdfFile",{enumerable:!0,get:function(){return Kn.isPdfFile}}),Object.defineProperty(ki,"loadScript",{enumerable:!0,get:function(){return Kn.loadScript}}),Object.defineProperty(ki,"noContextMenu",{enumerable:!0,get:function(){return Kn.noContextMenu}}),Object.defineProperty(ki,"normalizeUnicode",{enumerable:!0,get:function(){return $n.normalizeUnicode}}),Object.defineProperty(ki,"renderTextLayer",{enumerable:!0,get:function(){return oi.renderTextLayer}}),Object.defineProperty(ki,"setLayerDimensions",{enumerable:!0,get:function(){return Kn.setLayerDimensions}}),Object.defineProperty(ki,"shadow",{enumerable:!0,get:function(){return $n.shadow}}),Object.defineProperty(ki,"updateTextLayer",{enumerable:!0,get:function(){return oi.updateTextLayer}}),Object.defineProperty(ki,"version",{enumerable:!0,get:function(){return Pn.version}});var $n=__w_pdfjs_require__(1),Pn=__w_pdfjs_require__(2),Kn=__w_pdfjs_require__(6),oi=__w_pdfjs_require__(26),Mn=__w_pdfjs_require__(27),ti=__w_pdfjs_require__(5),In=__w_pdfjs_require__(29),Ln=__w_pdfjs_require__(14),jn=__w_pdfjs_require__(32)})(),__webpack_exports__})());const findIndices=(ki,$n)=>ki.map((Pn,Kn,oi)=>$n(Pn,Kn,oi)?Kn:null).filter(Pn=>Pn!=null),splitAt=(ki,$n)=>[-1,...$n,ki.length].reduce(({xs:Pn,a:Kn},oi)=>({xs:(Pn==null?void 0:Pn.concat([ki.slice(Kn+1,oi)]))??[],a:oi}),{}).xs,concatArrays=(ki,$n)=>ki.slice(0,-1).concat([ki[ki.length-1].concat($n[0])]).concat($n.slice(1)),isNumber=/\d/,isCFI=/^epubcfi\((.*)\)$/,escapeCFI=ki=>ki.replace(/[\^[\](),;=]/g,"^$&"),wrap=ki=>isCFI.test(ki)?ki:`epubcfi(${ki})`,unwrap=ki=>{var $n;return(($n=ki.match(isCFI))==null?void 0:$n[1])??ki},lift=ki=>(...$n)=>`epubcfi(${ki(...$n.map(Pn=>{var Kn;return((Kn=Pn.match(isCFI))==null?void 0:Kn[1])??Pn}))})`,joinIndir=lift((...ki)=>ki.join("!")),tokenizer=ki=>{const $n=[];let Pn,Kn,oi="";const Mn=In=>($n.push(In),Pn=null,oi=""),ti=In=>(oi+=In,Kn=!1);for(const In of Array.from(ki.trim()).concat("")){if(In==="^"&&!Kn){Kn=!0;continue}if(Pn==="!")Mn(["!"]);else if(Pn===",")Mn([","]);else if(Pn==="/"||Pn===":")if(isNumber.test(In)){ti(In);continue}else Mn([Pn,parseInt(oi)]);else if(Pn==="~")if(isNumber.test(In)||In==="."){ti(In);continue}else Mn(["~",parseFloat(oi)]);else if(Pn==="@"){if(In===":"){Mn(["@",parseFloat(oi)]),Pn="@";continue}if(isNumber.test(In)||In==="."){ti(In);continue}else Mn(["@",parseFloat(oi)])}else if(Pn==="["){In===";"&&!Kn?(Mn(["[",oi]),Pn=";"):In===","&&!Kn?(Mn(["[",oi]),Pn="["):In==="]"&&!Kn?Mn(["[",oi]):ti(In);continue}else if(Pn!=null&&Pn.startsWith(";")){In==="="&&!Kn?(Pn=`;${oi}`,oi=""):In===";"&&!Kn?(Mn([Pn,oi]),Pn=";"):In==="]"&&!Kn?Mn([Pn,oi]):ti(In);continue}(In==="/"||In===":"||In==="~"||In==="@"||In==="["||In==="!"||In===",")&&(Pn=In)}return $n},findTokens=(ki,$n)=>findIndices(ki,([Pn])=>Pn===$n),parser=ki=>{const $n=[];let Pn;for(const[Kn,oi]of ki){if(Kn==="/")$n.push({index:oi});else{const Mn=$n[$n.length-1];if(Kn===":")Mn.offset=oi;else if(Kn==="~")Mn.temporal=oi;else if(Kn==="@")Mn.spatial=(Mn.spatial??[]).concat(oi);else if(Kn===";s")Mn.side=oi;else if(Kn==="[")if(Pn==="/"&&oi)Mn.id=oi;else{Mn.text=(Mn.text??[]).concat(oi);continue}}Pn=Kn}return $n},parserIndir=ki=>splitAt(ki,findTokens(ki,"!")).map(parser),parse=ki=>{const $n=tokenizer(unwrap(ki)),Pn=findTokens($n,",");if(!Pn.length)return parserIndir($n);const[Kn,oi,Mn]=splitAt($n,Pn).map(parserIndir);return{parent:Kn,start:oi,end:Mn}},partToString=({index:ki,id:$n,offset:Pn,temporal:Kn,spatial:oi,text:Mn,side:ti})=>{var Ln;const In=ti?`;s=${ti}`:"";return`/${ki}`+($n?`[${escapeCFI($n)}${In}]`:"")+(Pn!=null&&ki%2?`:${Pn}`:"")+(Kn?`~${Kn}`:"")+(oi?`@${oi.join(":")}`:"")+(Mn||!$n&&ti?"["+(((Ln=Mn==null?void 0:Mn.map(escapeCFI))==null?void 0:Ln.join(","))??"")+In+"]":"")},toInnerString=ki=>ki.parent?[ki.parent,ki.start,ki.end].map(toInnerString).join(","):ki.map($n=>$n.map(partToString).join("")).join("!"),toString=ki=>wrap(toInnerString(ki)),collapse=(ki,$n)=>typeof ki=="string"?toString(collapse(parse(ki),$n)):ki.parent?concatArrays(ki.parent,ki[$n?"end":"start"]):ki,buildRange=(ki,$n)=>{typeof ki=="string"&&(ki=parse(ki)),typeof $n=="string"&&($n=parse($n)),ki=collapse(ki),$n=collapse($n,!0);const Pn=ki[ki.length-1],Kn=$n[$n.length-1],oi=[],Mn=[],ti=[];let In=!0;const Ln=Math.max(Pn.length,Kn.length);for(let Cn=0;Cn<Ln;Cn++){const Tn=Pn[Cn],Rn=Kn[Cn];In&&(In=(Tn==null?void 0:Tn.index)===(Rn==null?void 0:Rn.index)&&!(Tn!=null&&Tn.offset)&&!(Rn!=null&&Rn.offset)),In?oi.push(Tn):(Tn&&Mn.push(Tn),Rn&&ti.push(Rn))}const jn=ki.slice(0,-1).concat([oi]);return toString({parent:jn,start:[Mn],end:[ti]})},isTextNode=({nodeType:ki})=>ki===3||ki===4,isElementNode=({nodeType:ki})=>ki===1,getChildNodes=(ki,$n)=>{const Pn=Array.from(ki.childNodes).filter(Kn=>isTextNode(Kn)||isElementNode(Kn));return $n?Pn.map(Kn=>{const oi=$n(Kn);return oi===NodeFilter.FILTER_REJECT?null:oi===NodeFilter.FILTER_SKIP?getChildNodes(Kn,$n):Kn}).flat().filter(Kn=>Kn):Pn},indexChildNodes=(ki,$n)=>{const Pn=getChildNodes(ki,$n).reduce((Kn,oi)=>{let Mn=Kn[Kn.length-1];return Mn?isTextNode(oi)?Array.isArray(Mn)?Mn.push(oi):isTextNode(Mn)?Kn[Kn.length-1]=[Mn,oi]:Kn.push(oi):isElementNode(Mn)?Kn.push(null,oi):Kn.push(oi):Kn.push(oi),Kn},[]);return isElementNode(Pn[0])&&Pn.unshift("first"),isElementNode(Pn[Pn.length-1])&&Pn.push("last"),Pn.unshift("before"),Pn.push("after"),Pn},partsToNode=(ki,$n,Pn)=>{const{id:Kn}=$n[$n.length-1];if(Kn){const ti=ki.ownerDocument.getElementById(Kn);if(ti)return{node:ti,offset:0}}for(const{index:ti}of $n){const In=ki?indexChildNodes(ki,Pn)[ti]:null;if(In==="first")return{node:ki.firstChild??ki};if(In==="last")return{node:ki.lastChild??ki};if(In==="before")return{node:ki,before:!0};if(In==="after")return{node:ki,after:!0};ki=In}const{offset:oi}=$n[$n.length-1];if(!Array.isArray(ki))return{node:ki,offset:oi};let Mn=0;for(const ti of ki){const{length:In}=ti.nodeValue;if(Mn+In>=oi)return{node:ti,offset:oi-Mn};Mn+=In}},nodeToParts=(ki,$n,Pn)=>{const{parentNode:Kn,id:oi}=ki,Mn=indexChildNodes(Kn,Pn),ti=Mn.findIndex(jn=>Array.isArray(jn)?jn.some(Cn=>Cn===ki):jn===ki),In=Mn[ti];if(Array.isArray(In)){let jn=0;for(const Cn of In)if(Cn===ki){jn+=$n;break}else jn+=Cn.nodeValue.length;$n=jn}const Ln={id:oi,index:ti,offset:$n};return(Kn!==ki.ownerDocument.documentElement?nodeToParts(Kn,null,Pn).concat(Ln):[Ln]).filter(jn=>jn.index!==-1)},fromRange=(ki,$n)=>{const{startContainer:Pn,startOffset:Kn,endContainer:oi,endOffset:Mn}=ki,ti=nodeToParts(Pn,Kn,$n);if(ki.collapsed)return toString([ti]);const In=nodeToParts(oi,Mn,$n);return buildRange([ti],[In])},toRange=(ki,$n,Pn)=>{const Kn=collapse($n),oi=collapse($n,!0),Mn=ki.documentElement,ti=partsToNode(Mn,Kn[0],Pn),In=partsToNode(Mn,oi[0],Pn),Ln=ki.createRange();return ti.before?Ln.setStartBefore(ti.node):ti.after?Ln.setStartAfter(ti.node):Ln.setStart(ti.node,ti.offset),In.before?Ln.setEndBefore(In.node):In.after?Ln.setEndAfter(In.node):Ln.setEnd(In.node,In.offset),Ln},fromElements=ki=>{const $n=[],{parentNode:Pn}=ki[0],Kn=nodeToParts(Pn);for(const[oi,Mn]of indexChildNodes(Pn).entries()){const ti=ki[$n.length];Mn===ti&&$n.push(toString([Kn.concat({id:ti.id,index:oi})]))}return $n},toElement=(ki,$n)=>partsToNode(ki.documentElement,collapse($n)).node,fake={fromIndex:ki=>wrap(`/6/${(ki+1)*2}`),toIndex:ki=>(ki==null?void 0:ki.at(-1).index)/2-1},assignIDs=ki=>{let $n=0;const Pn=Kn=>{if(Kn.id=$n++,Kn.subitems)for(const oi of Kn.subitems)Pn(oi)};for(const Kn of ki)Pn(Kn);return ki},flatten=ki=>ki.map($n=>{var Pn;return(Pn=$n.subitems)!=null&&Pn.length?[$n,flatten($n.subitems)].flat():$n}).flat();class TOCProgress{async init({toc:$n,ids:Pn,splitHref:Kn,getFragment:oi}){assignIDs($n);const Mn=flatten($n),ti=new Map;for(const[Ln,jn]of Mn.entries()){const[Cn,Tn]=await Kn(jn==null?void 0:jn.href)??[],Rn={fragment:Tn,item:jn};ti.has(Cn)?ti.get(Cn).items.push(Rn):ti.set(Cn,{prev:Mn[Ln-1],items:[Rn]})}const In=new Map;for(const[Ln,jn]of Pn.entries())ti.has(jn)?In.set(jn,ti.get(jn)):In.set(jn,In.get(Pn[Ln-1]));this.ids=Pn,this.map=In,this.getFragment=oi}getProgress($n,Pn){var Ln;if(!this.ids)return;const Kn=this.ids[$n],oi=this.map.get(Kn);if(!oi)return null;const{prev:Mn,items:ti}=oi;if(!ti)return Mn;if(!Pn||ti.length===1&&!ti[0].fragment)return ti[0].item;const In=Pn.startContainer.getRootNode();for(const[jn,{fragment:Cn}]of ti.entries()){const Tn=this.getFragment(In,Cn);if(Tn&&Pn.comparePoint(Tn,0)>0)return((Ln=ti[jn-1])==null?void 0:Ln.item)??Mn}return ti[ti.length-1].item}}class SectionProgress{constructor($n,Pn,Kn){Ki(this,da);this.sizes=$n.map(oi=>oi.linear!="no"&&oi.size>0?oi.size:0),this.sizePerLoc=Pn,this.sizePerTimeUnit=Kn,this.sizeTotal=this.sizes.reduce((oi,Mn)=>oi+Mn,0),this.sectionFractions=Qi(this,da,Hh).call(this)}getProgress($n,Pn,Kn=0){const{sizes:oi,sizePerLoc:Mn,sizePerTimeUnit:ti,sizeTotal:In}=this,Ln=oi[$n]??0,Cn=oi.slice(0,$n).reduce((si,ei)=>si+ei,0)+Pn*Ln,Tn=Cn+Kn*Ln,Rn=In-Cn,ui=(1-Pn)*Ln;return{fraction:Tn/In,section:{current:$n,total:oi.length},location:{current:Math.floor(Cn/Mn),next:Math.floor(Tn/Mn),total:Math.ceil(In/Mn)},time:{section:ui/ti,total:Rn/ti}}}getSection($n){if($n<=0)return[0,0];if($n>=1)return[this.sizes.length-1,1];$n=$n+Number.EPSILON;const{sizeTotal:Pn}=this;let Kn=this.sectionFractions.findIndex(Mn=>Mn>$n)-1;if(Kn<0)return[0,0];for(;!this.sizes[Kn];)Kn++;const oi=($n-this.sectionFractions[Kn])/(this.sizes[Kn]/Pn);return[Kn,oi]}}da=new WeakSet,Hh=function(){const{sizeTotal:$n}=this,Pn=[0];let Kn=0;for(const oi of this.sizes)Pn.push((Kn+=oi)/$n);return Pn};const createSVGElement=ki=>document.createElementNS("http://www.w3.org/2000/svg",ki);class Overlayer{constructor(){Ki(this,pa,createSVGElement("svg"));Ki(this,_a,new Map);Object.assign(vi(this,pa).style,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",pointerEvents:"none"})}get element(){return vi(this,pa)}add($n,Pn,Kn,oi){vi(this,_a).has($n)&&this.remove($n),typeof Pn=="function"&&(Pn=Pn(vi(this,pa).getRootNode()));const Mn=Pn.getClientRects(),ti=Kn(Mn,oi);vi(this,pa).append(ti),vi(this,_a).set($n,{range:Pn,draw:Kn,options:oi,element:ti,rects:Mn})}remove($n){vi(this,_a).has($n)&&(vi(this,pa).removeChild(vi(this,_a).get($n).element),vi(this,_a).delete($n))}redraw(){for(const $n of vi(this,_a).values()){const{range:Pn,draw:Kn,options:oi,element:Mn}=$n;vi(this,pa).removeChild(Mn);const ti=Pn.getClientRects(),In=Kn(ti,oi);vi(this,pa).append(In),$n.element=In,$n.rects=ti}}hitTest({x:$n,y:Pn}){const Kn=Array.from(vi(this,_a).entries());for(let oi=Kn.length-1;oi>=0;oi--){const[Mn,ti]=Kn[oi];for(const{left:In,top:Ln,right:jn,bottom:Cn}of ti.rects)if(Ln<=Pn&&In<=$n&&Cn>Pn&&jn>$n)return[Mn,ti.range]}return[]}static underline($n,Pn={}){const{color:Kn="red",width:oi=2,writingMode:Mn}=Pn,ti=createSVGElement("g");if(ti.setAttribute("fill",Kn),Mn==="vertical-rl"||Mn==="vertical-lr")for(const{right:In,top:Ln,height:jn}of $n){const Cn=createSVGElement("rect");Cn.setAttribute("x",In-oi),Cn.setAttribute("y",Ln),Cn.setAttribute("height",jn),Cn.setAttribute("width",oi),ti.append(Cn)}else for(const{left:In,bottom:Ln,width:jn}of $n){const Cn=createSVGElement("rect");Cn.setAttribute("x",In),Cn.setAttribute("y",Ln-oi),Cn.setAttribute("height",oi),Cn.setAttribute("width",jn),ti.append(Cn)}return ti}static strikethrough($n,Pn={}){const{color:Kn="red",width:oi=2,writingMode:Mn}=Pn,ti=createSVGElement("g");if(ti.setAttribute("fill",Kn),Mn==="vertical-rl"||Mn==="vertical-lr")for(const{right:In,left:Ln,top:jn,height:Cn}of $n){const Tn=createSVGElement("rect");Tn.setAttribute("x",(In+Ln)/2),Tn.setAttribute("y",jn),Tn.setAttribute("height",Cn),Tn.setAttribute("width",oi),ti.append(Tn)}else for(const{left:In,top:Ln,bottom:jn,width:Cn}of $n){const Tn=createSVGElement("rect");Tn.setAttribute("x",In),Tn.setAttribute("y",(Ln+jn)/2),Tn.setAttribute("height",oi),Tn.setAttribute("width",Cn),ti.append(Tn)}return ti}static squiggly($n,Pn={}){const{color:Kn="red",width:oi=2,writingMode:Mn}=Pn,ti=createSVGElement("g");ti.setAttribute("fill","none"),ti.setAttribute("stroke",Kn),ti.setAttribute("stroke-width",oi);const In=oi*1.5;if(Mn==="vertical-rl"||Mn==="vertical-lr")for(const{right:Ln,top:jn,height:Cn}of $n){const Tn=createSVGElement("path"),Rn=Math.round(Cn/In/1.5),ui=Cn/Rn,si=Array.from({length:Rn},(ei,Bn)=>`l${Bn%2?-In:In} ${ui}`).join("");Tn.setAttribute("d",`M${Ln} ${jn}${si}`),ti.append(Tn)}else for(const{left:Ln,bottom:jn,width:Cn}of $n){const Tn=createSVGElement("path"),Rn=Math.round(Cn/In/1.5),ui=Cn/Rn,si=Array.from({length:Rn},(ei,Bn)=>`l${ui} ${Bn%2?In:-In}`).join("");Tn.setAttribute("d",`M${Ln} ${jn}${si}`),ti.append(Tn)}return ti}static highlight($n,Pn={}){const{color:Kn="red"}=Pn,oi=createSVGElement("g");oi.setAttribute("fill",Kn),oi.style.opacity="var(--overlayer-highlight-opacity, .3)",oi.style.mixBlendMode="var(--overlayer-highlight-blend-mode, normal)";for(const{left:Mn,top:ti,height:In,width:Ln}of $n){const jn=createSVGElement("rect");jn.setAttribute("x",Mn),jn.setAttribute("y",ti),jn.setAttribute("height",In),jn.setAttribute("width",Ln),oi.append(jn)}return oi}static outline($n,Pn={}){const{color:Kn="red",width:oi=3,radius:Mn=3}=Pn,ti=createSVGElement("g");ti.setAttribute("fill","none"),ti.setAttribute("stroke",Kn),ti.setAttribute("stroke-width",oi);for(const{left:In,top:Ln,height:jn,width:Cn}of $n){const Tn=createSVGElement("rect");Tn.setAttribute("x",In),Tn.setAttribute("y",Ln),Tn.setAttribute("height",jn),Tn.setAttribute("width",Cn),Tn.setAttribute("rx",Mn),ti.append(Tn)}return ti}static copyImage([$n],Pn={}){const{src:Kn}=Pn,oi=createSVGElement("image"),{left:Mn,top:ti,height:In,width:Ln}=$n;return oi.setAttribute("href",Kn),oi.setAttribute("x",Mn),oi.setAttribute("y",ti),oi.setAttribute("height",In),oi.setAttribute("width",Ln),oi}}pa=new WeakMap,_a=new WeakMap;const walkRange=(ki,$n)=>{const Pn=[];for(let Kn=$n.currentNode;Kn;Kn=$n.nextNode()){const oi=ki.comparePoint(Kn,0);if(oi===0)Pn.push(Kn);else if(oi>0)break}return Pn},walkDocument=(ki,$n)=>{const Pn=[];for(let Kn=$n.nextNode();Kn;Kn=$n.nextNode())Pn.push(Kn);return Pn},filter$1=NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT|NodeFilter.SHOW_CDATA_SECTION,acceptNode=ki=>{if(ki.nodeType===1){const $n=ki.tagName.toLowerCase();return $n==="script"||$n==="style"?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_ACCEPT},textWalker=function*(ki,$n){const Pn=ki.commonAncestorContainer??ki.body??ki,Kn=document.createTreeWalker(Pn,filter$1,{acceptNode}),Mn=(ki.commonAncestorContainer?walkRange:walkDocument)(ki,Kn),ti=Mn.map(Ln=>Ln.nodeValue),In=(Ln,jn,Cn,Tn)=>{const Rn=document.createRange();return Rn.setStart(Mn[Ln],jn),Rn.setEnd(Mn[Cn],Tn),Rn};for(const Ln of $n(ti,In))yield Ln},SEARCH_PREFIX="foliate-search:";class History extends EventTarget{constructor(){super(...arguments);Ki(this,Ra,[]);Ki(this,La,-1)}pushState(Pn){const Kn=vi(this,Ra)[vi(this,La)];Kn===Pn||Kn!=null&&Kn.fraction&&Kn.fraction===Pn.fraction||(vi(this,Ra)[++wr(this,La)._]=Pn,vi(this,Ra).length=vi(this,La)+1,this.dispatchEvent(new Event("index-change")))}replaceState(Pn){const Kn=vi(this,La);vi(this,Ra)[Kn]=Pn}back(){const Pn=vi(this,La);if(Pn<=0)return;const Kn={state:vi(this,Ra)[Pn-1]};ds(this,La,Pn-1),this.dispatchEvent(new CustomEvent("popstate",{detail:Kn})),this.dispatchEvent(new Event("index-change"))}forward(){const Pn=vi(this,La);if(Pn>=vi(this,Ra).length-1)return;const Kn={state:vi(this,Ra)[Pn+1]};ds(this,La,Pn+1),this.dispatchEvent(new CustomEvent("popstate",{detail:Kn})),this.dispatchEvent(new Event("index-change"))}get canGoBack(){return vi(this,La)>0}get canGoForward(){return vi(this,La)<vi(this,Ra).length-1}clear(){ds(this,Ra,[]),ds(this,La,-1)}}Ra=new WeakMap,La=new WeakMap;const languageInfo=ki=>{var $n,Pn;if(!ki)return{};try{const Kn=Intl.getCanonicalLocales(ki)[0],oi=new Intl.Locale(Kn),Mn=["zh","ja","kr"].includes(oi.language),ti=(Pn=(($n=oi.getTextInfo)==null?void 0:$n.call(oi))??oi.textInfo)==null?void 0:Pn.direction;return{canonical:Kn,locale:oi,isCJK:Mn,direction:ti}}catch(Kn){return console.warn(Kn),{}}};let View$1=(Kl=class extends HTMLElement{constructor(){super();Ki(this,Ga);Ki(this,$0);Ki(this,U0);Ki(this,j0);Ki(this,ao);Ki(this,H0);Ki(this,X0);Ki(this,z0);Ki(this,B0,this.attachShadow({mode:"open"}));Ki(this,rr,void 0);Ki(this,Wa,void 0);Ki(this,kr,void 0);Ki(this,or,new Map);ta(this,"isFixedLayout",!1);ta(this,"lastLocation");ta(this,"history",new History);this.history.addEventListener("popstate",({detail:Pn})=>{const Kn=this.resolveNavigation(Pn.state);this.renderer.goTo(Kn)})}async open(Pn){var Kn,oi,Mn;if(this.book=Pn,this.language=languageInfo((Kn=Pn.metadata)==null?void 0:Kn.language),Pn.splitTOCHref&&Pn.getTOCFragment){const ti=Pn.sections.map(jn=>jn.id);ds(this,rr,new SectionProgress(Pn.sections,1500,1600));const In=Pn.splitTOCHref.bind(Pn),Ln=Pn.getTOCFragment.bind(Pn);ds(this,Wa,new TOCProgress),await vi(this,Wa).init({toc:Pn.toc??[],ids:ti,splitHref:In,getFragment:Ln}),ds(this,kr,new TOCProgress),await vi(this,kr).init({toc:Pn.pageList??[],ids:ti,splitHref:In,getFragment:Ln})}if(this.isFixedLayout=((oi=this.book.rendition)==null?void 0:oi.layout)==="pre-paginated",this.isFixedLayout?(await Promise.resolve().then(()=>fixedLayout),this.renderer=document.createElement("foliate-fxl")):(await Promise.resolve().then(()=>paginator),this.renderer=document.createElement("foliate-paginator")),this.renderer.setAttribute("exportparts","head,foot,filter"),this.renderer.addEventListener("load",ti=>Qi(this,U0,zh).call(this,ti.detail)),this.renderer.addEventListener("relocate",ti=>Qi(this,$0,Xh).call(this,ti.detail)),this.renderer.addEventListener("create-overlayer",ti=>ti.detail.attach(Qi(this,H0,Gh).call(this,ti.detail))),this.renderer.open(Pn),vi(this,B0).append(this.renderer),Pn.sections.some(ti=>ti.mediaOverlay)){(Mn=Pn.media).activeClass||(Mn.activeClass="-epub-media-overlay-active");const ti=Pn.media.activeClass;this.mediaOverlay=Pn.getMediaOverlay();let In;this.mediaOverlay.addEventListener("highlight",Ln=>{const jn=this.resolveNavigation(Ln.detail.text);this.renderer.goTo(jn).then(()=>{const{doc:Cn}=this.renderer.getContents().find(Rn=>Rn.index=jn.index),Tn=jn.anchor(Cn);Tn.classList.add(ti),In=new WeakRef(Tn)})}),this.mediaOverlay.addEventListener("unhighlight",()=>{var Ln,jn;(jn=(Ln=In==null?void 0:In.deref())==null?void 0:Ln.classList)==null||jn.remove(ti)})}}close(){var Pn,Kn;(Pn=this.renderer)==null||Pn.destroy(),(Kn=this.renderer)==null||Kn.remove(),ds(this,rr,null),ds(this,Wa,null),ds(this,kr,null),ds(this,or,new Map),this.lastLocation=null,this.history.clear(),this.tts=null,this.mediaOverlay=null}goToTextStart(){var Pn,Kn;return this.goTo(((Kn=(Pn=this.book.landmarks)==null?void 0:Pn.find(oi=>oi.type.includes("bodymatter")||oi.type.includes("text")))==null?void 0:Kn.href)??this.book.sections.findIndex(oi=>oi.linear!=="no"))}async init({lastLocation:Pn,showTextStart:Kn}){const oi=Pn?this.resolveNavigation(Pn):null;oi?(await this.renderer.goTo(oi),this.history.pushState(Pn)):Kn?await this.goToTextStart():(this.history.pushState(0),await this.next())}async addAnnotation(Pn,Kn){var jn;const{value:oi}=Pn;if(oi.startsWith(SEARCH_PREFIX)){const Cn=oi.replace(SEARCH_PREFIX,""),{index:Tn,anchor:Rn}=await this.resolveNavigation(Cn),ui=Qi(this,ao,kc).call(this,Tn);if(ui){const{overlayer:si,doc:ei}=ui;if(Kn){si.remove(oi);return}const Bn=ei?Rn(ei):Rn;si.add(oi,Bn,Overlayer.outline)}return}const{index:Mn,anchor:ti}=await this.resolveNavigation(oi),In=Qi(this,ao,kc).call(this,Mn);if(In){const{overlayer:Cn,doc:Tn}=In;if(Cn.remove(oi),!Kn){const Rn=Tn?ti(Tn):ti,ui=(si,ei)=>Cn.add(oi,Rn,si,ei);Qi(this,Ga,Ar).call(this,"draw-annotation",{draw:ui,annotation:Pn,doc:Tn,range:Rn})}}const Ln=((jn=vi(this,Wa).getProgress(Mn))==null?void 0:jn.label)??"";return{index:Mn,label:Ln}}deleteAnnotation(Pn){return this.addAnnotation(Pn,!0)}async showAnnotation(Pn){const{value:Kn}=Pn,oi=await this.goTo(Kn);if(oi){const{index:Mn,anchor:ti}=oi,{doc:In}=Qi(this,ao,kc).call(this,Mn),Ln=ti(In);Qi(this,Ga,Ar).call(this,"show-annotation",{value:Kn,index:Mn,range:Ln})}}getCFI(Pn,Kn){const oi=this.book.sections[Pn].cfi??fake.fromIndex(Pn);return Kn?joinIndir(oi,fromRange(Kn)):oi}resolveCFI(Pn){if(this.book.resolveCFI)return this.book.resolveCFI(Pn);{const Kn=parse(Pn);return{index:fake.toIndex((Kn.parent??Kn).shift()),anchor:ti=>toRange(ti,Kn)}}}resolveNavigation(Pn){try{if(typeof Pn=="number")return{index:Pn};if(typeof Pn.fraction=="number"){const[Kn,oi]=vi(this,rr).getSection(Pn.fraction);return{index:Kn,anchor:oi}}return isCFI.test(Pn)?this.resolveCFI(Pn):this.book.resolveHref(Pn)}catch(Kn){console.error(Kn),console.error(`Could not resolve target ${Pn}`)}}async goTo(Pn){const Kn=this.resolveNavigation(Pn);try{return await this.renderer.goTo(Kn),this.history.pushState(Pn),Kn}catch(oi){console.error(oi),console.error(`Could not go to ${Pn}`)}}async goToFraction(Pn){const[Kn,oi]=vi(this,rr).getSection(Pn);await this.renderer.goTo({index:Kn,anchor:oi}),this.history.pushState({fraction:Pn})}async select(Pn){try{const Kn=await this.resolveNavigation(Pn);await this.renderer.goTo({...Kn,select:!0}),this.history.pushState(Pn)}catch(Kn){console.error(Kn),console.error(`Could not go to ${Pn}`)}}deselect(){for(const{doc:Pn}of this.renderer.getContents())Pn.defaultView.getSelection().removeAllRanges()}getSectionFractions(){var Pn;return(((Pn=vi(this,rr))==null?void 0:Pn.sectionFractions)??[]).map(Kn=>Kn+Number.EPSILON)}getProgressOf(Pn,Kn){var ti,In;const oi=(ti=vi(this,Wa))==null?void 0:ti.getProgress(Pn,Kn),Mn=(In=vi(this,kr))==null?void 0:In.getProgress(Pn,Kn);return{tocItem:oi,pageItem:Mn}}async getTOCItemOf(Pn){try{const{index:Kn,anchor:oi}=await this.resolveNavigation(Pn),Mn=await this.book.sections[Kn].createDocument(),ti=oi(Mn),In=ti instanceof Range,Ln=In?ti:Mn.createRange();return In||Ln.selectNodeContents(ti),vi(this,Wa).getProgress(Kn,Ln)}catch(Kn){console.error(Kn),console.error(`Could not get ${Pn}`)}}async prev(Pn){await this.renderer.prev(Pn)}async next(Pn){await this.renderer.next(Pn)}goLeft(){return this.book.dir==="rtl"?this.next():this.prev()}goRight(){return this.book.dir==="rtl"?this.prev():this.next()}async*search(Pn){var jn;this.clearSearch();const{searchMatcher:Kn}=await Promise.resolve().then(()=>search$1),{query:oi,index:Mn}=Pn,ti=Kn(textWalker,{defaultLocale:this.language,...Pn}),In=Mn!=null?Qi(this,X0,qh).call(this,ti,oi,Mn):Qi(this,z0,Vh).call(this,ti,oi),Ln=[];vi(this,or).set(Mn,Ln);for await(const Cn of In)if(Cn.subitems){const Tn=Cn.subitems.map(({cfi:Rn})=>({value:SEARCH_PREFIX+Rn}));vi(this,or).set(Cn.index,Tn);for(const Rn of Tn)this.addAnnotation(Rn);yield{label:((jn=vi(this,Wa).getProgress(Cn.index))==null?void 0:jn.label)??"",subitems:Cn.subitems}}else{if(Cn.cfi){const Tn={value:SEARCH_PREFIX+Cn.cfi};Ln.push(Tn),this.addAnnotation(Tn)}yield Cn}yield"done"}clearSearch(){for(const Pn of vi(this,or).values())for(const Kn of Pn)this.deleteAnnotation(Kn);vi(this,or).clear()}async initTTS(){const Pn=this.renderer.getContents()[0].doc;if(this.tts&&this.tts.doc===Pn)return;const{TTS:Kn}=await Promise.resolve().then(()=>tts);this.tts=new Kn(Pn,textWalker,oi=>this.renderer.scrollToAnchor(oi,!0))}startMediaOverlay(){const{index:Pn}=this.renderer.getContents()[0];return this.mediaOverlay.start(Pn)}},B0=new WeakMap,rr=new WeakMap,Wa=new WeakMap,kr=new WeakMap,or=new WeakMap,Ga=new WeakSet,Ar=function(Pn,Kn,oi){return this.dispatchEvent(new CustomEvent(Pn,{detail:Kn,cancelable:oi}))},$0=new WeakSet,Xh=function({reason:Pn,range:Kn,index:oi,fraction:Mn,size:ti}){var Tn,Rn,ui;const In=((Tn=vi(this,rr))==null?void 0:Tn.getProgress(oi,Mn,ti))??{},Ln=(Rn=vi(this,Wa))==null?void 0:Rn.getProgress(oi,Kn),jn=(ui=vi(this,kr))==null?void 0:ui.getProgress(oi,Kn),Cn=this.getCFI(oi,Kn);this.lastLocation={...In,tocItem:Ln,pageItem:jn,cfi:Cn,range:Kn},(Pn==="snap"||Pn==="page"||Pn==="scroll")&&this.history.replaceState(Cn),Qi(this,Ga,Ar).call(this,"relocate",this.lastLocation)},U0=new WeakSet,zh=function({doc:Pn,index:Kn}){var oi,Mn;(oi=Pn.documentElement).lang||(oi.lang=this.language.canonical??""),this.language.isCJK||(Mn=Pn.documentElement).dir||(Mn.dir=this.language.direction??""),Qi(this,j0,Wh).call(this,Pn,Kn),Qi(this,Ga,Ar).call(this,"load",{doc:Pn,index:Kn})},j0=new WeakSet,Wh=function(Pn,Kn){const{book:oi}=this,Mn=oi.sections[Kn];for(const ti of Pn.querySelectorAll("a[href]"))ti.addEventListener("click",In=>{var Cn,Tn;In.preventDefault();const Ln=ti.getAttribute("href"),jn=((Cn=Mn==null?void 0:Mn.resolveHref)==null?void 0:Cn.call(Mn,Ln))??Ln;(Tn=oi==null?void 0:oi.isExternal)!=null&&Tn.call(oi,jn)?Promise.resolve(Qi(this,Ga,Ar).call(this,"external-link",{a:ti,href:jn},!0)).then(Rn=>Rn?globalThis.open(jn,"_blank"):null).catch(Rn=>console.error(Rn)):Promise.resolve(Qi(this,Ga,Ar).call(this,"link",{a:ti,href:jn},!0)).then(Rn=>Rn?this.goTo(jn):null).catch(Rn=>console.error(Rn))})},ao=new WeakSet,kc=function(Pn){return this.renderer.getContents().find(Kn=>Kn.index===Pn&&Kn.overlayer)},H0=new WeakSet,Gh=function({doc:Pn,index:Kn}){const oi=new Overlayer;Pn.addEventListener("click",ti=>{const[In,Ln]=oi.hitTest(ti);In&&!In.startsWith(SEARCH_PREFIX)&&Qi(this,Ga,Ar).call(this,"show-annotation",{value:In,index:Kn,range:Ln})},!1);const Mn=vi(this,or).get(Kn);if(Mn)for(const ti of Mn)this.addAnnotation(ti);return Qi(this,Ga,Ar).call(this,"create-overlay",{index:Kn}),oi},X0=new WeakSet,qh=async function*(Pn,Kn,oi){const Mn=await this.book.sections[oi].createDocument();for(const{range:ti,excerpt:In}of Pn(Mn,Kn))yield{cfi:this.getCFI(oi,ti),excerpt:In}},z0=new WeakSet,Vh=async function*(Pn,Kn){const{sections:oi}=this.book;for(const[Mn,{createDocument:ti}]of oi.entries()){if(!ti)continue;const In=await ti(),Ln=Array.from(Pn(In,Kn),({range:Cn,excerpt:Tn})=>({cfi:this.getCFI(Mn,Cn),excerpt:Tn}));yield{progress:(Mn+1)/oi.length},Ln.length&&(yield{index:Mn,subitems:Ln})}},Kl);customElements.define("foliate-view",View$1);const isZip=async ki=>{const $n=new Uint8Array(await ki.slice(0,4).arrayBuffer());return $n[0]===80&&$n[1]===75&&$n[2]===3&&$n[3]===4},isPDF=async ki=>{const $n=new Uint8Array(await ki.slice(0,5).arrayBuffer());return $n[0]===37&&$n[1]===80&&$n[2]===68&&$n[3]===70&&$n[4]===45},makeZipLoader=async ki=>{const{configure:$n,ZipReader:Pn,BlobReader:Kn,TextWriter:oi,BlobWriter:Mn}=await Promise.resolve().then(()=>zip);$n({useWebWorkers:!1});const In=await new Pn(new Kn(ki)).getEntries(),Ln=new Map(In.map(ui=>[ui.filename,ui])),jn=ui=>(si,...ei)=>Ln.has(si)?ui(Ln.get(si),...ei):null,Cn=jn(ui=>ui.getData(new oi)),Tn=jn((ui,si)=>ui.getData(new Mn(si)));return{entries:In,loadText:Cn,loadBlob:Tn,getSize:ui=>{var si;return((si=Ln.get(ui))==null?void 0:si.uncompressedSize)??0}}},getFileEntries=async ki=>ki.isFile?ki:(await Promise.all(Array.from(await new Promise(($n,Pn)=>ki.createReader().readEntries(Kn=>$n(Kn),Kn=>Pn(Kn))),getFileEntries))).flat(),makeDirectoryLoader=async ki=>{const $n=await getFileEntries(ki),Pn=await Promise.all($n.map(Cn=>new Promise((Tn,Rn)=>Cn.file(ui=>Tn([ui,Cn.fullPath]),ui=>Rn(ui))))),Kn=new Map(Pn.map(([Cn,Tn])=>[Tn.replace(ki.fullPath+"/",""),Cn])),oi=new TextDecoder,Mn=Cn=>Cn?oi.decode(Cn):null,ti=Cn=>{var Tn;return((Tn=Kn.get(Cn))==null?void 0:Tn.arrayBuffer())??null};return{loadText:async Cn=>Mn(await ti(Cn)),loadBlob:Cn=>Kn.get(Cn),getSize:Cn=>{var Tn;return((Tn=Kn.get(Cn))==null?void 0:Tn.size)??0}}},isCBZ=({name:ki,type:$n})=>$n==="application/vnd.comicbook+zip"||ki.endsWith(".cbz"),isFB2=({name:ki,type:$n})=>$n==="application/x-fictionbook+xml"||ki.endsWith(".fb2"),isFBZ=({name:ki,type:$n})=>$n==="application/x-zip-compressed-fb2"||ki.endsWith(".fb2.zip")||ki.endsWith(".fbz"),getView=async(ki,$n)=>{let Pn;if(ki.isDirectory){const oi=await makeDirectoryLoader(ki),{EPUB:Mn}=await Promise.resolve().then(()=>epub);Pn=await new Mn(oi).init()}else if(ki.size)if(await isZip(ki)){const oi=await makeZipLoader(ki);if(isCBZ(ki)){const{makeComicBook:Mn}=await Promise.resolve().then(()=>comicBook);Pn=Mn(oi,ki)}else if(isFBZ(ki)){const{makeFB2:Mn}=await Promise.resolve().then(()=>fb2),{entries:ti}=oi,In=ti.find(jn=>jn.filename.endsWith(".fb2")),Ln=await oi.loadBlob((In??ti[0]).filename);Pn=await Mn(Ln)}else{const{EPUB:Mn}=await Promise.resolve().then(()=>epub);Pn=await new Mn(oi).init()}}else if(await isPDF(ki)){const{makePDF:oi}=await Promise.resolve().then(()=>pdf);Pn=await oi(ki)}else{const{isMOBI:oi,MOBI:Mn}=await Promise.resolve().then(()=>mobi);if(await oi(ki)){const ti=await Promise.resolve().then(()=>fflate);Pn=await new Mn({unzlib:ti.unzlibSync}).open(ki)}else if(isFB2(ki)){const{makeFB2:ti}=await Promise.resolve().then(()=>fb2);Pn=await ti(ki)}}else throw new Error("File not found");if(!Pn)throw new Error("File type not supported");const Kn=document.createElement("foliate-view");return $n.append(Kn),await Kn.open(Pn),Kn};function keyListener(ki,$n){ki.addEventListener("keyup",Pn=>{Pn.key==="ArrowUp"||Pn.key==="ArrowRight"?$n("next"):(Pn.key==="ArrowDown"||Pn.key==="ArrowLeft")&&$n("prev")},!1)}function wheelListener(ki,$n){let oi=0,Mn;ki.addEventListener("wheel",ti=>{ti.ignore||(ti.ignore=!0,clearTimeout(Mn),oi+=ti.deltaY,Mn=setTimeout(()=>{if(Math.abs(oi)>=750){let In=Math.sign(oi)>0?"next":"prev";$n(In),oi=0}oi=0},50))})}function swipListener(ki,$n){let Mn,ti,In;ki.addEventListener("touchstart",Ln=>{Ln.ignore||(Ln.ignore=!0,Mn=Ln.changedTouches[0].pageX,ti=Ln.changedTouches[0].pageY,In=Date.now())},!1),ki.addEventListener("touchend",Ln=>{var Rn,ui;if(Ln.ignore)return;Ln.ignore=!0;const jn=Ln.changedTouches[0].pageX-Mn,Cn=Ln.changedTouches[0].pageY-ti;Date.now()-In<=500&&(Math.abs(jn)>=50&&Math.abs(Cn)<=200?$n(jn<0?"prev":"next"):Math.abs(Cn)>=50&&Math.abs(jn)<=200?$n(Cn<0?"up":"down"):((ui=(Rn=ki==null?void 0:ki.defaultView)==null?void 0:Rn.getSelection())==null||ui.removeAllRanges(),ki.dispatchEvent(new MouseEvent("click",{clientX:Mn,clientY:ti})),Ln.preventDefault()))},!1)}const _export_sfc=(ki,$n)=>{const Pn=ki.__vccOpts||ki;for(const[Kn,oi]of $n)Pn[Kn]=oi;return Pn},_hoisted_1$1={class:"reader"},_hoisted_2$1={class:"viewHolder"},_hoisted_3$1={key:0},_sfc_main$1={__name:"BookView",props:{url:{type:[String,File]},location:{type:[String,Number]},tocChanged:Function,getRendition:Function},emits:["update:location"],setup(ki,{expose:$n,emit:Pn}){const Kn=ki,{tocChanged:oi,getRendition:Mn}=Kn,{url:ti,location:In}=vue.toRefs(Kn),Ln=Pn;let jn=null;const Cn=vue.ref(null),Tn=vue.ref(!1),Rn=({spacing:ii,justify:ri,hyphenate:di})=>`
    @namespace epub "http://www.idpf.org/2007/ops";
    html {
        color-scheme: light dark;
    }
    /* https://github.com/whatwg/html/issues/5426 */
    @media (prefers-color-scheme: dark) {
        a:link {
            color: lightblue;
        }
    }
    p, li, blockquote, dd {
        line-height: ${ii};
        text-align: ${ri?"justify":"start"};
        -webkit-hyphens: ${di?"auto":"manual"};
        hyphens: ${di?"auto":"manual"};
        -webkit-hyphenate-limit-before: 3;
        -webkit-hyphenate-limit-after: 2;
        -webkit-hyphenate-limit-lines: 2;
        hanging-punctuation: allow-end last;
        widows: 2;
    }
    /* prevent the above from overriding the align attribute */
    [align="left"] { text-align: left; }
    [align="right"] { text-align: right; }
    [align="center"] { text-align: center; }
    [align="justify"] { text-align: justify; }

    pre {
        white-space: pre-wrap !important;
    }
    aside[epub|type~="endnote"],
    aside[epub|type~="footnote"],
    aside[epub|type~="note"],
    aside[epub|type~="rearnote"] {
        display: none;
    }
`,ui=async()=>{ti.value&&(jn&&jn.close(),typeof ti.value=="string"?fetch(ti.value).then(ii=>ii.blob()).then(async ii=>{const ri=ti.value.split("/");jn=await getView(new File([ii],ri[ri.length-1]),Cn.value),si()}).catch(ii=>console.error(ii)):(jn=await getView(ti.value,Cn.value),si()))},si=()=>{var ri,di;Tn.value=!0;const{book:ii}=jn;(di=(ri=jn.renderer).setStyles)==null||di.call(ri,Rn({spacing:1.4,justify:!0,hyphenate:!0})),Bn(),Mn(jn),oi&&oi(ii.toc),In.value?jn==null||jn.goTo(In.value):jn.renderer.next()},ei=ii=>{ii==="next"?On():ii==="prev"&&hi()},Bn=()=>{jn.addEventListener("load",Nn),jn.addEventListener("relocate",Hn)},Nn=({detail:{doc:ii}})=>{wheelListener(ii,ei),swipListener(ii,ei),keyListener(ii,ei)},Hn=({detail:ii})=>{Ln("update:location",ii)},On=()=>jn==null?void 0:jn.next(),hi=()=>jn==null?void 0:jn.prev(),Xn=ii=>jn==null?void 0:jn.goTo(ii);return vue.watch(ti,()=>{ui()}),vue.onMounted(()=>{ui()}),$n({nextPage:On,prevPage:hi,setLocation:Xn}),(ii,ri)=>(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$1,[vue.createElementVNode("div",_hoisted_2$1,[vue.withDirectives(vue.createElementVNode("div",{ref_key:"viewer",ref:Cn,id:"viewer"},null,512),[[vue.vShow,Tn.value]]),Tn.value?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("div",_hoisted_3$1,[vue.renderSlot(ii.$slots,"loadingView",{},void 0,!0)]))])]))}},BookView=_export_sfc(_sfc_main$1,[["__scopeId","data-v-27a30866"]]),_hoisted_1={class:"container"},_hoisted_2=vue.createElementVNode("span",{class:"tocButtonBar",style:{top:"35%"}},null,-1),_hoisted_3=vue.createElementVNode("span",{class:"tocButtonBar",style:{top:"66%"}},null,-1),_hoisted_4=[_hoisted_2,_hoisted_3],_hoisted_5=["title"],_hoisted_6=vue.createElementVNode("div",{class:"loadingView"},"Loading…",-1),_hoisted_7={key:0},_hoisted_8={class:"tocArea"},_sfc_main={__name:"VueReader",props:{title:{type:String},showToc:{type:Boolean,default:!0},title:{type:String,default:""},getRendition:{type:Function},backgroundColor:{type:String,default:"#fff"}},setup(ki){const $n=vue.defineComponent({name:"TocComponent",props:{toc:{type:Array,default:()=>[]},current:{type:[String,Number],default:""},setLocation:{type:Function,required:!0},isSubmenu:{type:Boolean,default:!1,required:!1}},setup(Bn){const Nn=vue.getCurrentInstance(),Hn=vue.h.bind(Nn),{setLocation:On,isSubmenu:hi}=Bn,{toc:Xn,current:ii}=vue.toRefs(Bn);return()=>Xn.value.map((ri,di)=>Hn("div",{key:di},[Hn("button",{class:["tocAreaButton",ri.href===ii.value?"active":""],onClick:()=>{ri.subitems&&ri.subitems.length>0?(ri.expansion=!ri.expansion,On(ri.href,!1)):On(ri.href)}},[hi?" ".repeat(4)+ri.label:ri.label,ri.subitems&&ri.subitems.length>0&&Hn("div",{class:`${ri.expansion?"open":""} expansion`})]),ri.subitems&&ri.subitems.length>0&&Hn(vue.Transition,{name:"collapse-transition"},{default:()=>Hn("div",{style:{display:ri.expansion?void 0:"none"}},[Hn($n,{toc:ri.subitems,current:ii.value,setLocation:On,isSubmenu:!0})])})]))}}),Pn=ki,Kn=vue.reactive({toc:[],expandedToc:!1}),{getRendition:oi}=Pn,{toc:Mn,expandedToc:ti}=vue.toRefs(Kn),In=vue.ref(null),Ln=vue.ref(null),jn=vue.ref(""),Cn=Bn=>{var On;oi&&oi(Bn);const{book:Nn}=Bn,Hn=(On=Nn.metadata)==null?void 0:On.title;jn.value=Hn||""},Tn=Bn=>{Mn.value=Bn},Rn=()=>{ti.value=!ti.value},ui=()=>{var Bn;(Bn=In.value)==null||Bn.nextPage()},si=()=>{var Bn;(Bn=In.value)==null||Bn.prevPage()},ei=(Bn,Nn=!0)=>{In.value.setLocation(Bn),ti.value=!1,ti.value=!Nn};return(Bn,Nn)=>(vue.openBlock(),vue.createElementBlock("div",_hoisted_1,[vue.createElementVNode("div",{class:vue.normalizeClass(["readerArea",{containerExpanded:vue.unref(ti)}]),style:vue.normalizeStyle({backgroundColor:ki.backgroundColor})},[ki.showToc?(vue.openBlock(),vue.createElementBlock("button",{key:0,class:vue.normalizeClass(["tocButton",{tocButtonExpanded:vue.unref(ti)}]),type:"button",onClick:Rn},_hoisted_4,2)):vue.createCommentVNode("",!0),vue.renderSlot(Bn.$slots,"title",{},()=>[vue.createElementVNode("div",{class:"titleArea",title:ki.title||jn.value},vue.toDisplayString(ki.title||jn.value),9,_hoisted_5)]),vue.createVNode(BookView,vue.mergeProps({ref_key:"bookRef",ref:In},Bn.$attrs,{tocChanged:Tn,getRendition:Cn}),{loadingView:vue.withCtx(()=>[vue.renderSlot(Bn.$slots,"loadingView",{},()=>[_hoisted_6])]),_:3},16),vue.createElementVNode("button",{class:"arrow pre",onClick:si},"‹"),vue.createElementVNode("button",{class:"arrow next",onClick:ui},"›")],6),ki.showToc?(vue.openBlock(),vue.createElementBlock("div",_hoisted_7,[vue.createElementVNode("div",_hoisted_8,[vue.createVNode(vue.unref($n),{toc:vue.unref(Mn),current:Ln.value,setLocation:ei},null,8,["toc","current"])]),vue.unref(ti)?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"tocBackground",onClick:Rn})):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0)]))}},parseViewport=ki=>{var $n,Pn;return(Pn=($n=ki==null?void 0:ki.split(/[,;\s]/))==null?void 0:$n.filter(Kn=>Kn))==null?void 0:Pn.map(Kn=>Kn.split("=").map(oi=>oi.trim()))},getViewport=(ki,$n)=>{var oi,Mn;if(ki.documentElement.localName==="svg"){const[,,ti,In]=((oi=ki.documentElement.getAttribute("viewBox"))==null?void 0:oi.split(/\s/))??[];return{width:ti,height:In}}const Pn=parseViewport((Mn=ki.querySelector('meta[name="viewport"]'))==null?void 0:Mn.getAttribute("content"));if(Pn)return Object.fromEntries(Pn);if(typeof $n=="string")return parseViewport($n);if($n)return $n;const Kn=ki.querySelector("img");return Kn?{width:Kn.naturalWidth,height:Kn.naturalHeight}:(console.warn(new Error("Missing viewport properties")),{width:1e3,height:2e3})};class FixedLayout extends HTMLElement{constructor(){super();Ki(this,oo);Ki(this,Ur);Ki(this,Wo);Ki(this,Go);Ki(this,qo);Ki(this,co);Ki(this,$r,this.attachShadow({mode:"closed"}));Ki(this,zo,new ResizeObserver(()=>Qi(this,Ur,L0).call(this)));Ki(this,cr,void 0);Ki(this,Cr,-1);ta(this,"defaultViewport");ta(this,"spread");Ki(this,ro,!1);Ki(this,qa,void 0);Ki(this,Va,void 0);Ki(this,Ka,void 0);Ki(this,Tr,void 0);const Pn=new CSSStyleSheet;vi(this,$r).adoptedStyleSheets=[Pn],Pn.replaceSync(`:host {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }`),vi(this,zo).observe(this)}open(Pn){this.book=Pn;const{rendition:Kn}=Pn;this.spread=Kn==null?void 0:Kn.spread,this.defaultViewport=Kn==null?void 0:Kn.viewport;const oi=Pn.dir==="rtl",Mn=!oi;this.rtl=oi,(Kn==null?void 0:Kn.spread)==="none"?ds(this,cr,Pn.sections.map(ti=>({center:ti}))):ds(this,cr,Pn.sections.reduce((ti,In)=>{const Ln=ti[ti.length-1],{linear:jn,pageSpread:Cn}=In;if(jn==="no")return ti;const Tn=()=>{const Rn={};return ti.push(Rn),Rn};if(Cn==="center"){const Rn=Ln.left||Ln.right?Tn():Ln;Rn.center=In}else if(Cn==="left"){const Rn=Ln.center||Ln.left||Mn?Tn():Ln;Rn.left=In}else if(Cn==="right"){const Rn=Ln.center||Ln.right||oi?Tn():Ln;Rn.right=In}else Mn?Ln.center||Ln.right?Tn().left=In:Ln.left?Ln.right=In:Ln.left=In:Ln.center||Ln.left?Tn().right=In:Ln.right?Ln.left=In:Ln.right=In;return ti},[{}]))}get index(){const Pn=vi(this,cr)[vi(this,Cr)],Kn=(Pn==null?void 0:Pn.center)??(this.side==="left"?Pn.left??Pn.right:Pn.right??Pn.left);return this.book.sections.indexOf(Kn)}getSpreadOf(Pn){const Kn=vi(this,cr);for(let oi=0;oi<Kn.length;oi++){const{left:Mn,right:ti,center:In}=Kn[oi];if(Mn===Pn)return{index:oi,side:"left"};if(ti===Pn)return{index:oi,side:"right"};if(In===Pn)return{index:oi,side:"center"}}}async goToSpread(Pn,Kn,oi){var ti,In,Ln,jn,Cn,Tn;if(Pn<0||Pn>vi(this,cr).length-1)return;if(Pn===vi(this,Cr)){Qi(this,Ur,L0).call(this,Kn);return}ds(this,Cr,Pn);const Mn=vi(this,cr)[Pn];if(Mn.center){const Rn=this.book.sections.indexOf(Mn.center),ui=await((In=(ti=Mn.center)==null?void 0:ti.load)==null?void 0:In.call(ti));await Qi(this,Wo,Dl).call(this,{center:{index:Rn,src:ui}})}else{const Rn=this.book.sections.indexOf(Mn.left),ui=this.book.sections.indexOf(Mn.right),si=await((jn=(Ln=Mn.left)==null?void 0:Ln.load)==null?void 0:jn.call(Ln)),ei=await((Tn=(Cn=Mn.right)==null?void 0:Cn.load)==null?void 0:Tn.call(Cn)),Bn={index:Rn,src:si},Nn={index:ui,src:ei};await Qi(this,Wo,Dl).call(this,{left:Bn,right:Nn,side:Kn})}Qi(this,co,Tc).call(this,oi)}async select(Pn){await this.goTo(Pn)}async goTo(Pn){const{book:Kn}=this,oi=await Pn,Mn=Kn.sections[oi.index];if(!Mn)return;const{index:ti,side:In}=this.getSpreadOf(Mn);await this.goToSpread(ti,In)}async next(){if(this.rtl?Qi(this,Go,Nl).call(this):Qi(this,qo,Bl).call(this))Qi(this,co,Tc).call(this,"page");else return this.goToSpread(vi(this,Cr)+1,this.rtl?"right":"left","page")}async prev(){if(this.rtl?Qi(this,qo,Bl).call(this):Qi(this,Go,Nl).call(this))Qi(this,co,Tc).call(this,"page");else return this.goToSpread(vi(this,Cr)-1,this.rtl?"left":"right","page")}getContents(){return Array.from(vi(this,$r).querySelectorAll("iframe"),Pn=>({doc:Pn.contentDocument}))}destroy(){vi(this,zo).unobserve(this)}}$r=new WeakMap,zo=new WeakMap,cr=new WeakMap,Cr=new WeakMap,ro=new WeakMap,qa=new WeakMap,Va=new WeakMap,Ka=new WeakMap,Tr=new WeakMap,oo=new WeakSet,Cc=async function({index:Pn,src:Kn}){const oi=document.createElement("div"),Mn=document.createElement("iframe");return oi.append(Mn),Object.assign(Mn.style,{border:"0",display:"none",overflow:"hidden"}),Mn.setAttribute("sandbox","allow-same-origin allow-scripts"),Mn.setAttribute("scrolling","no"),Mn.setAttribute("part","filter"),vi(this,$r).append(oi),Kn?new Promise(ti=>{const In=()=>{Mn.removeEventListener("load",In);const Ln=Mn.contentDocument;this.dispatchEvent(new CustomEvent("load",{detail:{doc:Ln,index:Pn}}));const{width:jn,height:Cn}=getViewport(Ln,this.defaultViewport);ti({element:oi,iframe:Mn,width:parseFloat(jn),height:parseFloat(Cn)})};Mn.addEventListener("load",In),Mn.src=Kn}):{blank:!0,element:oi,iframe:Mn}},Ur=new WeakSet,L0=function(Pn=vi(this,Tr)){if(!Pn)return;const Kn=vi(this,qa)??{},oi=vi(this,Ka)??vi(this,Va),Mn=Pn==="left"?Kn:oi,{width:ti,height:In}=this.getBoundingClientRect(),Ln=this.spread!=="both"&&this.spread!=="portrait"&&In>ti;ds(this,ro,Ln);const jn=Kn.width??oi.width,Cn=Kn.height??oi.height,Tn=Ln||vi(this,Ka)?Math.min(ti/(Mn.width??jn),In/(Mn.height??Cn)):Math.min(ti/((Kn.width??jn)+(oi.width??jn)),In/Math.max(Kn.height??Cn,oi.height??Cn)),Rn=ui=>{const{element:si,iframe:ei,width:Bn,height:Nn,blank:Hn}=ui;Object.assign(ei.style,{width:`${Bn}px`,height:`${Nn}px`,transform:`scale(${Tn})`,transformOrigin:"top left",display:Hn?"none":"block"}),Object.assign(si.style,{width:`${(Bn??jn)*Tn}px`,height:`${(Nn??Cn)*Tn}px`,overflow:"hidden",display:"block"}),Ln&&ui!==Mn&&(si.style.display="none")};vi(this,Ka)?Rn(vi(this,Ka)):(Rn(Kn),Rn(oi))},Wo=new WeakSet,Dl=async function({left:Pn,right:Kn,center:oi,side:Mn}){vi(this,$r).replaceChildren(),ds(this,qa,null),ds(this,Va,null),ds(this,Ka,null),oi?(ds(this,Ka,await Qi(this,oo,Cc).call(this,oi)),ds(this,Tr,"center"),Qi(this,Ur,L0).call(this)):(ds(this,qa,await Qi(this,oo,Cc).call(this,Pn)),ds(this,Va,await Qi(this,oo,Cc).call(this,Kn)),ds(this,Tr,vi(this,qa).blank?"right":vi(this,Va).blank?"left":Mn),Qi(this,Ur,L0).call(this))},Go=new WeakSet,Nl=function(){var Pn,Kn,oi,Mn;if(!(vi(this,Ka)||(Pn=vi(this,qa))!=null&&Pn.blank)&&vi(this,ro)&&((Mn=(oi=(Kn=vi(this,qa))==null?void 0:Kn.element)==null?void 0:oi.style)==null?void 0:Mn.display)==="none")return vi(this,Va).element.style.display="none",vi(this,qa).element.style.display="block",ds(this,Tr,"left"),!0},qo=new WeakSet,Bl=function(){var Pn,Kn,oi,Mn;if(!(vi(this,Ka)||(Pn=vi(this,Va))!=null&&Pn.blank)&&vi(this,ro)&&((Mn=(oi=(Kn=vi(this,Va))==null?void 0:Kn.element)==null?void 0:oi.style)==null?void 0:Mn.display)==="none")return vi(this,qa).element.style.display="none",vi(this,Va).element.style.display="block",ds(this,Tr,"right"),!0},co=new WeakSet,Tc=function(Pn){this.dispatchEvent(new CustomEvent("relocate",{detail:{reason:Pn,range:null,index:this.index,fraction:0,size:1}}))},customElements.define("foliate-fxl",FixedLayout);const fixedLayout=Object.freeze(Object.defineProperty({__proto__:null,FixedLayout},Symbol.toStringTag,{value:"Module"})),wait=ki=>new Promise($n=>setTimeout($n,ki)),debounce=(ki,$n,Pn)=>{let Kn;return(...oi)=>{const Mn=()=>{Kn=null,Pn||ki(...oi)},ti=Pn&&!Kn;Kn&&clearTimeout(Kn),Kn=setTimeout(Mn,$n),ti&&ki(...oi)}},lerp=(ki,$n,Pn)=>Pn*($n-ki)+ki,easeOutQuad=ki=>1-(1-ki)*(1-ki),animate=(ki,$n,Pn,Kn,oi)=>new Promise(Mn=>{let ti;const In=Ln=>{ti??(ti=Ln);const jn=Math.min(1,(Ln-ti)/Pn);oi(lerp(ki,$n,Kn(jn))),jn<1?requestAnimationFrame(In):Mn()};requestAnimationFrame(In)}),uncollapse=ki=>{if(!(ki!=null&&ki.collapsed))return ki;const{endOffset:$n,endContainer:Pn}=ki;if(Pn.nodeType===1)return Pn;if($n+1<Pn.length)ki.setEnd(Pn,$n+1);else if($n>1)ki.setStart(Pn,$n-1);else return Pn.parentNode;return ki},makeRange=(ki,$n,Pn,Kn=Pn)=>{const oi=ki.createRange();return oi.setStart($n,Pn),oi.setEnd($n,Kn),oi},bisectNode=(ki,$n,Pn,Kn=0,oi=$n.nodeValue.length)=>{if(oi-Kn===1)return Pn(makeRange(ki,$n,Kn),makeRange(ki,$n,oi))<0?Kn:oi;const Mn=Math.floor(Kn+(oi-Kn)/2),ti=Pn(makeRange(ki,$n,Kn,Mn),makeRange(ki,$n,Mn,oi));return ti<0?bisectNode(ki,$n,Pn,Kn,Mn):ti>0?bisectNode(ki,$n,Pn,Mn,oi):Mn},{SHOW_ELEMENT,SHOW_TEXT,SHOW_CDATA_SECTION,FILTER_ACCEPT,FILTER_REJECT,FILTER_SKIP}=NodeFilter,filter=SHOW_ELEMENT|SHOW_TEXT|SHOW_CDATA_SECTION,getVisibleRange=(ki,$n,Pn,Kn)=>{const oi=Rn=>{var si,ei;const ui=(si=Rn.localName)==null?void 0:si.toLowerCase();if(ui==="script"||ui==="style")return FILTER_REJECT;if(Rn.nodeType===1){const{left:Bn,right:Nn}=Kn(Rn.getBoundingClientRect());if(Nn<$n||Bn>Pn)return FILTER_REJECT;if(Bn>=$n&&Nn<=Pn)return FILTER_ACCEPT}else{if(!((ei=Rn.nodeValue)!=null&&ei.trim()))return FILTER_SKIP;const Bn=ki.createRange();Bn.selectNodeContents(Rn);const{left:Nn,right:Hn}=Kn(Bn.getBoundingClientRect());if(Hn>=$n&&Nn<=Pn)return FILTER_ACCEPT}return FILTER_SKIP},Mn=ki.createTreeWalker(ki.body,filter,{acceptNode:oi}),ti=[];for(let Rn=Mn.nextNode();Rn;Rn=Mn.nextNode())ti.push(Rn);const In=ti[0]??ki.body,Ln=ti[ti.length-1]??In,jn=In.nodeType===1?0:bisectNode(ki,In,(Rn,ui)=>{const si=Kn(Rn.getBoundingClientRect()),ei=Kn(ui.getBoundingClientRect());return si.right<$n&&ei.left>$n?0:ei.left>$n?-1:1}),Cn=Ln.nodeType===1?0:bisectNode(ki,Ln,(Rn,ui)=>{const si=Kn(Rn.getBoundingClientRect()),ei=Kn(ui.getBoundingClientRect());return si.right<Pn&&ei.left>Pn?0:ei.left>Pn?-1:1}),Tn=ki.createRange();return Tn.setStart(In,jn),Tn.setEnd(Ln,Cn),Tn},getDirection=ki=>{const{defaultView:$n}=ki,{writingMode:Pn,direction:Kn}=$n.getComputedStyle(ki.body),oi=Pn==="vertical-rl"||Pn==="vertical-lr",Mn=ki.body.dir==="rtl"||Kn==="rtl"||ki.documentElement.dir==="rtl";return{vertical:oi,rtl:Mn}},getBackground=ki=>{const $n=ki.defaultView.getComputedStyle(ki.body);return $n.backgroundColor==="rgba(0, 0, 0, 0)"&&$n.backgroundImage==="none"?ki.defaultView.getComputedStyle(ki.documentElement).background:$n.background},makeMarginals=(ki,$n)=>Array.from({length:ki},()=>{const Pn=document.createElement("div"),Kn=document.createElement("div");return Pn.append(Kn),Kn.setAttribute("part",$n),Pn}),setStylesImportant=(ki,$n)=>{const{style:Pn}=ki;for(const[Kn,oi]of Object.entries($n))Pn.setProperty(Kn,oi,"important")};class View{constructor({container:$n,onExpand:Pn}){Ki(this,Vo,new ResizeObserver(()=>this.expand()));Ki(this,Na,document.createElement("div"));Ki(this,ka,document.createElement("iframe"));Ki(this,Ko,document.createRange());Ki(this,Ta,void 0);Ki(this,Ma,!1);Ki(this,Yo,!1);Ki(this,lo,!0);Ki(this,er,void 0);Ki(this,ho,{});this.container=$n,this.onExpand=Pn,vi(this,ka).setAttribute("part","filter"),vi(this,Na).append(vi(this,ka)),Object.assign(vi(this,Na).style,{boxSizing:"content-box",position:"relative",overflow:"hidden",flex:"0 0 auto",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}),Object.assign(vi(this,ka).style,{overflow:"hidden",border:"0",display:"none",width:"100%",height:"100%"}),vi(this,ka).setAttribute("sandbox","allow-same-origin allow-scripts"),vi(this,ka).setAttribute("scrolling","no")}get element(){return vi(this,Na)}get document(){return vi(this,ka).contentDocument}async load($n,Pn,Kn){if(typeof $n!="string")throw new Error(`${$n} is not string`);return new Promise(oi=>{vi(this,ka).addEventListener("load",()=>{const Mn=this.document;Pn==null||Pn(Mn),vi(this,ka).style.display="block";const{vertical:ti,rtl:In}=getDirection(Mn),Ln=getBackground(Mn);vi(this,ka).style.display="none",ds(this,Ma,ti),ds(this,Yo,In),vi(this,Ko).selectNodeContents(Mn.body);const jn=Kn==null?void 0:Kn({vertical:ti,rtl:In,background:Ln});vi(this,ka).style.display="block",this.render(jn),vi(this,Vo).observe(Mn.body),Mn.fonts.ready.then(()=>this.expand()),oi()},{once:!0}),vi(this,ka).src=$n})}render($n){$n&&(ds(this,lo,$n.flow!=="scrolled"),ds(this,ho,$n),vi(this,lo)?this.columnize($n):this.scrolled($n))}scrolled({gap:$n,columnWidth:Pn}){const Kn=vi(this,Ma),oi=this.document;setStylesImportant(oi.documentElement,{"box-sizing":"border-box",padding:Kn?`${$n}px 0`:`0 ${$n}px`,"column-width":"auto",height:"auto",width:"auto"}),setStylesImportant(oi.body,{[Kn?"max-height":"max-width"]:`${Pn}px`,margin:"auto"}),this.setImageSize(),this.expand()}columnize({width:$n,height:Pn,gap:Kn,columnWidth:oi}){const Mn=vi(this,Ma);ds(this,er,Mn?Pn:$n);const ti=this.document;setStylesImportant(ti.documentElement,{"box-sizing":"border-box","column-width":`${Math.trunc(oi)}px`,"column-gap":`${Kn}px`,"column-fill":"auto",...Mn?{width:`${$n}px`}:{height:`${Pn}px`},padding:Mn?`${Kn/2}px 0`:`0 ${Kn/2}px`,overflow:"hidden","overflow-wrap":"break-word",position:"static",border:"0",margin:"0","max-height":"none","max-width":"none","min-height":"none","min-width":"none","-webkit-line-box-contain":"block glyphs replaced"}),setStylesImportant(ti.body,{"max-height":"none","max-width":"none",margin:"0"}),this.setImageSize(),this.expand()}setImageSize(){const{width:$n,height:Pn,margin:Kn}=vi(this,ho),oi=vi(this,Ma),Mn=this.document;for(const ti of Mn.body.querySelectorAll("img, svg, video")){const{maxHeight:In,maxWidth:Ln}=Mn.defaultView.getComputedStyle(ti);setStylesImportant(ti,{"max-height":oi?In!=="none"&&In!=="0px"?In:"100%":`${Pn-Kn*2}px`,"max-width":oi?`${$n-Kn*2}px`:Ln!=="none"&&Ln!=="0px"?Ln:"100%","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"})}}expand(){const{documentElement:$n}=this.document;if(vi(this,lo)){const Pn=vi(this,Ma)?"height":"width",Kn=vi(this,Ma)?"width":"height",oi=vi(this,Ko).getBoundingClientRect(),Mn=$n.getBoundingClientRect(),In=(vi(this,Ma)?0:vi(this,Yo)?Mn.right-oi.right:oi.left-Mn.left)+oi[Pn],jn=Math.ceil(In/vi(this,er))*vi(this,er);vi(this,Na).style.padding="0",vi(this,ka).style[Pn]=`${jn}px`,vi(this,Na).style[Pn]=`${jn+vi(this,er)*2}px`,vi(this,ka).style[Kn]="100%",vi(this,Na).style[Kn]="100%",$n.style[Pn]=`${vi(this,er)}px`,vi(this,Ta)&&(vi(this,Ta).element.style.margin="0",vi(this,Ta).element.style.left=vi(this,Ma)?"0":`${vi(this,er)}px`,vi(this,Ta).element.style.top=vi(this,Ma)?`${vi(this,er)}px`:"0",vi(this,Ta).element.style[Pn]=`${jn}px`,vi(this,Ta).redraw())}else{const Pn=vi(this,Ma)?"width":"height",Kn=vi(this,Ma)?"height":"width",Mn=$n.getBoundingClientRect()[Pn],{margin:ti}=vi(this,ho),In=vi(this,Ma)?`0 ${ti}px`:`${ti}px 0`;vi(this,Na).style.padding=In,vi(this,ka).style[Pn]=`${Mn}px`,vi(this,Na).style[Pn]=`${Mn}px`,vi(this,ka).style[Kn]="100%",vi(this,Na).style[Kn]="100%",vi(this,Ta)&&(vi(this,Ta).element.style.margin=In,vi(this,Ta).element.style.left="0",vi(this,Ta).element.style.top="0",vi(this,Ta).element.style[Pn]=`${Mn}px`,vi(this,Ta).redraw())}this.onExpand()}set overlayer($n){ds(this,Ta,$n),vi(this,Na).append($n.element)}get overlayer(){return vi(this,Ta)}destroy(){this.document&&vi(this,Vo).unobserve(this.document.body)}}Vo=new WeakMap,Na=new WeakMap,ka=new WeakMap,Ko=new WeakMap,Ta=new WeakMap,Ma=new WeakMap,Yo=new WeakMap,lo=new WeakMap,er=new WeakMap,ho=new WeakMap;class Paginator extends HTMLElement{constructor(){super();Ki(this,W0);Ki(this,t0);Ki(this,n0);Ki(this,i0);Ki(this,s0);Ki(this,Wr);Ki(this,G0);Ki(this,Ir);Ki(this,Or);Ki(this,q0);Ki(this,V0);Ki(this,Gr);Ki(this,a0);Ki(this,r0);Ki(this,po);Ki(this,K0);Ki(this,Y0);Ki(this,fr);Ki(this,o0);Ki(this,lr,this.attachShadow({mode:"open"}));Ki(this,Jo,new ResizeObserver(()=>this.render()));Ki(this,hr,void 0);Ki(this,jr,void 0);Ki(this,Ba,void 0);Ki(this,Er,void 0);Ki(this,Hr,void 0);Ki(this,ma,void 0);Ki(this,ja,!1);Ki(this,Ya,!1);Ki(this,ur,0);Ki(this,tr,-1);Ki(this,dr,0);Ki(this,uo,!1);Ki(this,Xr,!1);Ki(this,Zo,void 0);Ki(this,Qo,new WeakMap);Ki(this,e0,matchMedia("(prefers-color-scheme: dark)"));Ki(this,fo,void 0);Ki(this,Fr,void 0);Ki(this,zr,void 0);Ki(this,go,void 0);vi(this,lr).innerHTML=`<style>
        :host {
            display: block;
            container-type: size;
        }
        :host, #top {
            box-sizing: border-box;
            position: relative;
            overflow: hidden;
            width: 100%;
            height: 100%;
        }
        #top {
            --_gap: 7%;
            --_margin: 48px;
            --_max-inline-size: 720px;
            --_max-block-size: 1440px;
            --_max-column-count: 2;
            --_max-column-count-portrait: 1;
            --_max-column-count-spread: var(--_max-column-count);
            --_half-gap: calc(var(--_gap) / 2);
            --_max-width: calc(var(--_max-inline-size) * var(--_max-column-count-spread));
            --_max-height: var(--_max-block-size);
            display: grid;
            grid-template-columns:
                minmax(var(--_half-gap), 1fr)
                var(--_half-gap)
                minmax(0, calc(var(--_max-width) - var(--_gap)))
                var(--_half-gap)
                minmax(var(--_half-gap), 1fr);
            grid-template-rows:
                minmax(var(--_margin), 1fr)
                minmax(0, var(--_max-height))
                minmax(var(--_margin), 1fr);
            &.vertical {
                --_max-column-count-spread: var(--_max-column-count-portrait);
                --_max-width: var(--_max-block-size);
                --_max-height: calc(var(--_max-inline-size) * var(--_max-column-count-spread));
            }
            @container (orientation: portrait) {
                & {
                    --_max-column-count-spread: var(--_max-column-count-portrait);
                }
                &.vertical {
                    --_max-column-count-spread: var(--_max-column-count);
                }
            }
        }
        #background {
            grid-column: 1 / -1;
            grid-row: 1 / -1;
        }
        #container {
            grid-column: 2 / 5;
            grid-row: 2;
            overflow: hidden;
        }
        :host([flow="scrolled"]) #container {
            grid-column: 1 / -1;
            grid-row: 1 / -1;
            overflow: auto;
        }
        #header {
            grid-column: 3 / 4;
            grid-row: 1;
        }
        #footer {
            grid-column: 3 / 4;
            grid-row: 3;
            align-self: end;
        }
        #header, #footer {
            display: grid;
            height: var(--_margin);
        }
        :is(#header, #footer) > * {
            display: flex;
            align-items: center;
            min-width: 0;
        }
        :is(#header, #footer) > * > * {
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            text-align: center;
            font-size: .75em;
            opacity: .6;
        }
        </style>
        <div id="top">
            <div id="background" part="filter"></div>
            <div id="header"></div>
            <div id="container"></div>
            <div id="footer"></div>
        </div>
        `,ds(this,hr,vi(this,lr).getElementById("top")),ds(this,jr,vi(this,lr).getElementById("background")),ds(this,Ba,vi(this,lr).getElementById("container")),ds(this,Er,vi(this,lr).getElementById("header")),ds(this,Hr,vi(this,lr).getElementById("footer")),vi(this,Jo).observe(vi(this,Ba)),vi(this,Ba).addEventListener("scroll",debounce(()=>{this.scrolled&&(vi(this,uo)?ds(this,uo,!1):Qi(this,Gr,N0).call(this,"scroll"))},250));const Pn={passive:!1};this.addEventListener("touchstart",Qi(this,n0,Ul).bind(this),Pn),this.addEventListener("touchmove",Qi(this,i0,jl).bind(this),Pn),this.addEventListener("touchend",Qi(this,s0,Hl).bind(this)),this.addEventListener("load",({detail:{doc:Kn}})=>{Kn.addEventListener("touchstart",Qi(this,n0,Ul).bind(this),Pn),Kn.addEventListener("touchmove",Qi(this,i0,jl).bind(this),Pn),Kn.addEventListener("touchend",Qi(this,s0,Hl).bind(this))}),ds(this,fo,()=>{vi(this,ma)&&(vi(this,jr).style.background=getBackground(vi(this,ma).document))}),vi(this,e0).addEventListener("change",vi(this,fo))}attributeChangedCallback(Pn,Kn,oi){switch(Pn){case"flow":this.render();break;case"gap":case"margin":case"max-block-size":case"max-column-count":vi(this,hr).style.setProperty("--_"+Pn,oi);break;case"max-inline-size":vi(this,hr).style.setProperty("--_"+Pn,oi),this.render();break}}open(Pn){this.bookDir=Pn.dir,this.sections=Pn.sections}render(){vi(this,ma)&&(vi(this,ma).render(Qi(this,t0,$l).call(this,{vertical:vi(this,ja),rtl:vi(this,Ya)})),this.scrollToAnchor(vi(this,dr)))}get scrolled(){return this.getAttribute("flow")==="scrolled"}get scrollProp(){const{scrolled:Pn}=this;return vi(this,ja)?Pn?"scrollLeft":"scrollTop":Pn?"scrollTop":"scrollLeft"}get sideProp(){const{scrolled:Pn}=this;return vi(this,ja)?Pn?"width":"height":Pn?"height":"width"}get size(){return vi(this,Ba).getBoundingClientRect()[this.sideProp]}get viewSize(){return vi(this,ma).element.getBoundingClientRect()[this.sideProp]}get start(){return Math.abs(vi(this,Ba)[this.scrollProp])}get end(){return this.start+this.size}get page(){return Math.floor((this.start+this.end)/2/this.size)}get pages(){return Math.round(this.viewSize/this.size)}scrollBy(Pn,Kn){const oi=vi(this,ja)?Kn:Pn,Mn=vi(this,Ba),{scrollProp:ti}=this,[In,Ln,jn]=vi(this,Fr),Cn=vi(this,Ya),Tn=Cn?In-jn:In-Ln,Rn=Cn?In+Ln:In+jn;Mn[ti]=Math.max(Tn,Math.min(Rn,Mn[ti]+oi))}snap(Pn,Kn){const oi=vi(this,ja)?Kn:Pn,[Mn,ti,In]=vi(this,Fr),{start:Ln,end:jn,pages:Cn,size:Tn}=this,Rn=Math.abs(Mn)-ti,ui=Math.abs(Mn)+In,si=oi*(vi(this,Ya)?-Tn:Tn),ei=Math.floor(Math.max(Rn,Math.min(ui,(Ln+jn)/2+(isNaN(si)?0:si)))/Tn);Qi(this,Or,jo).call(this,ei,"snap").then(()=>{const Bn=ei<=0?-1:ei>=Cn-1?1:null;if(Bn)return Qi(this,po,Ec).call(this,{index:Qi(this,fr,no).call(this,Bn),anchor:Bn<0?()=>1:()=>0})})}async scrollToAnchor(Pn,Kn){var Ln,jn;ds(this,dr,Pn);const oi=(jn=(Ln=uncollapse(Pn))==null?void 0:Ln.getClientRects)==null?void 0:jn.call(Ln);if(oi){const Cn=Array.from(oi).find(Tn=>Tn.width>0&&Tn.height>0)||oi[0];if(!Cn)return;await Qi(this,G0,Yh).call(this,Cn,"anchor"),Kn&&Qi(this,q0,Jh).call(this);return}if(this.scrolled){await Qi(this,Ir,Uo).call(this,Pn*this.viewSize,"anchor");return}const{pages:Mn}=this;if(!Mn)return;const ti=Mn-2,In=Math.round(Pn*(ti-1));await Qi(this,Or,jo).call(this,In+1,"anchor")}async goTo(Pn){if(vi(this,Xr))return;const Kn=await Pn;if(Qi(this,r0,zl).call(this,Kn.index))return Qi(this,po,Ec).call(this,Kn)}get atStart(){return Qi(this,fr,no).call(this,-1)==null&&this.page<=1}get atEnd(){return Qi(this,fr,no).call(this,1)==null&&this.page>=this.pages-2}prev(Pn){return Qi(this,o0,Wl).call(this,-1,Pn)}next(Pn){return Qi(this,o0,Wl).call(this,1,Pn)}prevSection(){return this.goTo({index:Qi(this,fr,no).call(this,-1)})}nextSection(){return this.goTo({index:Qi(this,fr,no).call(this,1)})}firstSection(){const Pn=this.sections.findIndex(Kn=>Kn.linear!=="no");return this.goTo({index:Pn})}lastSection(){const Pn=this.sections.findLastIndex(Kn=>Kn.linear!=="no");return this.goTo({index:Pn})}getContents(){return vi(this,ma)?[{index:vi(this,tr),overlayer:vi(this,ma).overlayer,doc:vi(this,ma).document}]:[]}setStyles(Pn){var ti,In,Ln,jn,Cn;ds(this,Zo,Pn);const Kn=vi(this,Qo).get((ti=vi(this,ma))==null?void 0:ti.document);if(!Kn)return;const[oi,Mn]=Kn;if(Array.isArray(Pn)){const[Tn,Rn]=Pn;oi.textContent=Tn,Mn.textContent=Rn}else Mn.textContent=Pn;vi(this,jr).style.background=getBackground(vi(this,ma).document),(Cn=(jn=(Ln=(In=vi(this,ma))==null?void 0:In.document)==null?void 0:Ln.fonts)==null?void 0:jn.ready)==null||Cn.then(()=>vi(this,ma).expand())}destroy(){var Pn,Kn;vi(this,Jo).unobserve(this),vi(this,ma).destroy(),ds(this,ma,null),(Kn=(Pn=this.sections[vi(this,tr)])==null?void 0:Pn.unload)==null||Kn.call(Pn),vi(this,e0).removeEventListener("change",vi(this,fo))}}lr=new WeakMap,Jo=new WeakMap,hr=new WeakMap,jr=new WeakMap,Ba=new WeakMap,Er=new WeakMap,Hr=new WeakMap,ma=new WeakMap,ja=new WeakMap,Ya=new WeakMap,ur=new WeakMap,tr=new WeakMap,dr=new WeakMap,uo=new WeakMap,Xr=new WeakMap,Zo=new WeakMap,Qo=new WeakMap,e0=new WeakMap,fo=new WeakMap,Fr=new WeakMap,zr=new WeakMap,go=new WeakMap,W0=new WeakSet,Kh=function(){return vi(this,ma)&&(vi(this,ma).destroy(),vi(this,Ba).removeChild(vi(this,ma).element)),ds(this,ma,new View({container:this,onExpand:()=>this.scrollToAnchor(vi(this,dr))})),vi(this,Ba).append(vi(this,ma).element),vi(this,ma)},t0=new WeakSet,$l=function({vertical:Pn,rtl:Kn,background:oi}){ds(this,ja,Pn),ds(this,Ya,Kn),vi(this,hr).classList.toggle("vertical",Pn),vi(this,jr).style.background=oi;const{width:Mn,height:ti}=vi(this,Ba).getBoundingClientRect(),In=Pn?ti:Mn,Ln=getComputedStyle(vi(this,hr)),jn=parseFloat(Ln.getPropertyValue("--_max-inline-size")),Cn=parseInt(Ln.getPropertyValue("--_max-column-count-spread")),Tn=parseFloat(Ln.getPropertyValue("--_margin"));ds(this,ur,Tn);const Rn=parseFloat(Ln.getPropertyValue("--_gap"))/100,ui=-Rn/(Rn-1)*In,si=this.getAttribute("flow");if(si==="scrolled"){this.setAttribute("dir",Pn?"rtl":"ltr"),vi(this,hr).style.padding="0";const Xn=jn;return this.heads=null,this.feet=null,vi(this,Er).replaceChildren(),vi(this,Hr).replaceChildren(),{flow:si,margin:Tn,gap:ui,columnWidth:Xn}}const ei=Math.min(Cn,Math.ceil(In/jn)),Bn=In/ei-ui;this.setAttribute("dir",Kn?"rtl":"ltr");const Nn=Pn?Math.min(2,Math.ceil(Mn/jn)):ei,Hn={gridTemplateColumns:`repeat(${Nn}, 1fr)`,gap:`${ui}px`,direction:this.bookDir==="rtl"?"rtl":"ltr"};Object.assign(vi(this,Er).style,Hn),Object.assign(vi(this,Hr).style,Hn);const On=makeMarginals(Nn,"head"),hi=makeMarginals(Nn,"foot");return this.heads=On.map(Xn=>Xn.children[0]),this.feet=hi.map(Xn=>Xn.children[0]),vi(this,Er).replaceChildren(...On),vi(this,Hr).replaceChildren(...hi),{height:ti,width:Mn,margin:Tn,gap:ui,columnWidth:Bn}},n0=new WeakSet,Ul=function(Pn){const Kn=Pn.changedTouches[0];ds(this,zr,{x:Kn==null?void 0:Kn.screenX,y:Kn==null?void 0:Kn.screenY,t:Pn.timeStamp,vx:0,xy:0})},i0=new WeakSet,jl=function(Pn){const Kn=vi(this,zr);if(Kn.pinched||(Kn.pinched=globalThis.visualViewport.scale>1,this.scrolled||Kn.pinched))return;if(Pn.touches.length>1){vi(this,go)&&Pn.preventDefault();return}Pn.preventDefault();const oi=Pn.changedTouches[0],Mn=oi.screenX,ti=oi.screenY,In=Kn.x-Mn,Ln=Kn.y-ti,jn=Pn.timeStamp-Kn.t;Kn.x=Mn,Kn.y=ti,Kn.t=Pn.timeStamp,Kn.vx=In/jn,Kn.vy=Ln/jn,ds(this,go,!0),this.scrollBy(In,Ln)},s0=new WeakSet,Hl=function(){ds(this,go,!1),!this.scrolled&&requestAnimationFrame(()=>{globalThis.visualViewport.scale===1&&this.snap(vi(this,zr).vx,vi(this,zr).vy)})},Wr=new WeakSet,D0=function(){if(this.scrolled){const Kn=this.viewSize,oi=vi(this,ur);return vi(this,ja)?({left:Mn,right:ti})=>({left:Kn-ti-oi,right:Kn-Mn-oi}):({top:Mn,bottom:ti})=>({left:Mn+oi,right:ti+oi})}const Pn=this.pages*this.size;return vi(this,Ya)?({left:Kn,right:oi})=>({left:Pn-oi,right:Pn-Kn}):vi(this,ja)?({top:Kn,bottom:oi})=>({left:Kn,right:oi}):Kn=>Kn},G0=new WeakSet,Yh=async function(Pn,Kn){if(this.scrolled){const Mn=Qi(this,Wr,D0).call(this)(Pn).left-vi(this,ur);return Qi(this,Ir,Uo).call(this,Mn,Kn)}const oi=Qi(this,Wr,D0).call(this)(Pn).left+vi(this,ur)/2;return Qi(this,Or,jo).call(this,Math.floor(oi/this.size)+(vi(this,Ya)?-1:1),Kn)},Ir=new WeakSet,Uo=async function(Pn,Kn,oi){const Mn=vi(this,Ba),{scrollProp:ti,size:In}=this;if(Mn[ti]===Pn){ds(this,Fr,[Pn,this.atStart?0:In,this.atEnd?0:In]),Qi(this,Gr,N0).call(this,Kn);return}if(this.scrolled&&vi(this,ja)&&(Pn=-Pn),(Kn==="snap"||oi)&&this.hasAttribute("animated"))return animate(Mn[ti],Pn,300,easeOutQuad,Ln=>Mn[ti]=Ln).then(()=>{ds(this,Fr,[Pn,this.atStart?0:In,this.atEnd?0:In]),Qi(this,Gr,N0).call(this,Kn)});Mn[ti]=Pn,ds(this,Fr,[Pn,this.atStart?0:In,this.atEnd?0:In]),Qi(this,Gr,N0).call(this,Kn)},Or=new WeakSet,jo=async function(Pn,Kn,oi){const Mn=this.size*(vi(this,Ya)?-Pn:Pn);return Qi(this,Ir,Uo).call(this,Mn,Kn,oi)},q0=new WeakSet,Jh=function(){const{defaultView:Pn}=vi(this,ma).document;if(vi(this,dr).startContainer){const Kn=Pn.getSelection();Kn.removeAllRanges(),Kn.addRange(vi(this,dr))}},V0=new WeakSet,Zh=function(){if(this.scrolled)return getVisibleRange(vi(this,ma).document,this.start+vi(this,ur),this.end-vi(this,ur),Qi(this,Wr,D0).call(this));const Pn=vi(this,Ya)?-this.size:this.size;return getVisibleRange(vi(this,ma).document,this.start-Pn,this.end-Pn,Qi(this,Wr,D0).call(this))},Gr=new WeakSet,N0=function(Pn){const Kn=Qi(this,V0,Zh).call(this);Pn!=="anchor"?ds(this,dr,Kn):ds(this,uo,!0);const oi=vi(this,tr),Mn={reason:Pn,range:Kn,index:oi};if(this.scrolled)Mn.fraction=this.start/this.viewSize;else if(this.pages>0){const{page:ti,pages:In}=this;vi(this,Er).style.visibility=ti>1?"visible":"hidden",Mn.fraction=(ti-1)/(In-2),Mn.size=1/(In-2)}this.dispatchEvent(new CustomEvent("relocate",{detail:Mn}))},a0=new WeakSet,Xl=async function(Pn){const{index:Kn,src:oi,anchor:Mn,onLoad:ti,select:In}=await Pn;if(ds(this,tr,Kn),oi){const Ln=Qi(this,W0,Kh).call(this),jn=Tn=>{if(Tn.head){const Rn=Tn.createElement("style");Tn.head.prepend(Rn);const ui=Tn.createElement("style");Tn.head.append(ui),vi(this,Qo).set(Tn,[Rn,ui])}ti==null||ti({doc:Tn,index:Kn})},Cn=Qi(this,t0,$l).bind(this);await Ln.load(oi,jn,Cn),this.dispatchEvent(new CustomEvent("create-overlayer",{detail:{doc:Ln.document,index:Kn,attach:Tn=>Ln.overlayer=Tn}})),ds(this,ma,Ln)}await this.scrollToAnchor((typeof Mn=="function"?Mn(vi(this,ma).document):Mn)??0,In)},r0=new WeakSet,zl=function(Pn){return Pn>=0&&Pn<=this.sections.length-1},po=new WeakSet,Ec=async function({index:Pn,anchor:Kn,select:oi}){if(Pn===vi(this,tr))await Qi(this,a0,Xl).call(this,{index:Pn,anchor:Kn,select:oi});else{const Mn=vi(this,tr),ti=In=>{var Ln,jn;(jn=(Ln=this.sections[Mn])==null?void 0:Ln.unload)==null||jn.call(Ln),this.setStyles(vi(this,Zo)),this.dispatchEvent(new CustomEvent("load",{detail:In}))};await Qi(this,a0,Xl).call(this,Promise.resolve(this.sections[Pn].load()).then(In=>({index:Pn,src:In,anchor:Kn,onLoad:ti,select:oi})).catch(In=>(console.warn(In),console.warn(new Error(`Failed to load section ${Pn}`)),{})))}},K0=new WeakSet,Qh=function(Pn){if(!vi(this,ma))return!0;if(this.scrolled)return this.start>0?Qi(this,Ir,Uo).call(this,Math.max(0,this.start-(Pn??this.size)),null,!0):!0;if(this.atStart)return;const Kn=this.page-1;return Qi(this,Or,jo).call(this,Kn,"page",!0).then(()=>Kn<=0)},Y0=new WeakSet,eu=function(Pn){if(!vi(this,ma))return!0;if(this.scrolled)return this.viewSize-this.end>2?Qi(this,Ir,Uo).call(this,Math.min(this.viewSize,Pn?this.start+Pn:this.end),null,!0):!0;if(this.atEnd)return;const Kn=this.page+1,oi=this.pages;return Qi(this,Or,jo).call(this,Kn,"page",!0).then(()=>Kn>=oi-1)},fr=new WeakSet,no=function(Pn){var Kn;for(let oi=vi(this,tr)+Pn;Qi(this,r0,zl).call(this,oi);oi+=Pn)if(((Kn=this.sections[oi])==null?void 0:Kn.linear)!=="no")return oi},o0=new WeakSet,Wl=async function(Pn,Kn){if(vi(this,Xr))return;ds(this,Xr,!0);const oi=Pn===-1,Mn=await(oi?Qi(this,K0,Qh).call(this,Kn):Qi(this,Y0,eu).call(this,Kn));Mn&&await Qi(this,po,Ec).call(this,{index:Qi(this,fr,no).call(this,Pn),anchor:oi?()=>1:()=>0}),(Mn||!this.hasAttribute("animated"))&&await wait(100),ds(this,Xr,!1)},ta(Paginator,"observedAttributes",["flow","gap","margin","max-inline-size","max-block-size","max-column-count"]),customElements.define("foliate-paginator",Paginator);const paginator=Object.freeze(Object.defineProperty({__proto__:null,Paginator},Symbol.toStringTag,{value:"Module"})),CONTEXT_LENGTH=50,normalizeWhitespace$2=ki=>ki.replace(/\s+/g," "),makeExcerpt=(ki,{startIndex:$n,startOffset:Pn,endIndex:Kn,endOffset:oi})=>{const Mn=ki[$n],ti=ki[Kn],In=Mn===ti?Mn.slice(Pn,oi):Mn.slice(Pn)+ki.slice(Mn+1,ti).join("")+ti.slice(0,oi),Ln=normalizeWhitespace$2(Mn.slice(0,Pn)).trimStart(),jn=normalizeWhitespace$2(ti.slice(oi)).trimEnd(),Cn=Ln.length<CONTEXT_LENGTH?"":"…",Tn=jn.length<CONTEXT_LENGTH?"":"…",Rn=`${Cn}${Ln.slice(-CONTEXT_LENGTH)}`,ui=`${jn.slice(0,CONTEXT_LENGTH)}${Tn}`;return{pre:Rn,match:In,post:ui}},simpleSearch=function*(ki,$n,Pn={}){const{locales:Kn="en",sensitivity:oi}=Pn,Mn=oi==="variant",ti=ki.join(""),In=Mn?ti:ti.toLocaleLowerCase(Kn),Ln=Mn?$n:$n.toLocaleLowerCase(Kn),jn=Ln.length;let Cn=-1,Tn=-1,Rn=0;do if(Cn=In.indexOf(Ln,Cn+1),Cn>-1){for(;Rn<=Cn;)Rn+=ki[++Tn].length;const ui=Tn,si=Cn-(Rn-ki[Tn].length),ei=Cn+jn;for(;Rn<=ei;)Rn+=ki[++Tn].length;const Bn=Tn,Nn=ei-(Rn-ki[Tn].length),Hn={startIndex:ui,startOffset:si,endIndex:Bn,endOffset:Nn};yield{range:Hn,excerpt:makeExcerpt(ki,Hn)}}while(Cn>-1)},segmenterSearch=function*(ki,$n,Pn={}){var Rn;const{locales:Kn="en",granularity:oi="word",sensitivity:Mn="base"}=Pn;let ti,In;try{ti=new Intl.Segmenter(Kn,{usage:"search",granularity:oi}),In=new Intl.Collator(Kn,{sensitivity:Mn})}catch(ui){console.warn(ui),ti=new Intl.Segmenter("en",{usage:"search",granularity:oi}),In=new Intl.Collator("en",{sensitivity:Mn})}const Ln=Array.from(ti.segment($n)).length,jn=[];let Cn=0,Tn=ti.segment(ki[Cn])[Symbol.iterator]();e:for(;Cn<ki.length;){for(;jn.length<Ln;){const{done:si,value:ei}=Tn.next();if(si)if(Cn++,Cn<ki.length){Tn=ti.segment(ki[Cn])[Symbol.iterator]();continue}else break e;const{index:Bn,segment:Nn}=ei;if(/[^\p{Format}]/u.test(Nn)){if(/\s/u.test(Nn)){/\s/u.test((Rn=jn[jn.length-1])==null?void 0:Rn.segment)||jn.push({strIndex:Cn,index:Bn,segment:" "});continue}ei.strIndex=Cn,jn.push(ei)}}const ui=jn.map(si=>si.segment).join("");if(In.compare($n,ui)===0){const si=Cn,ei=jn[jn.length-1],Bn=ei.index+ei.segment.length,Nn=jn[0].strIndex,Hn=jn[0].index,On={startIndex:Nn,startOffset:Hn,endIndex:si,endOffset:Bn};yield{range:On,excerpt:makeExcerpt(ki,On)}}jn.shift()}},search=(ki,$n,Pn)=>{const{granularity:Kn="grapheme",sensitivity:oi="base"}=Pn;return!(Intl!=null&&Intl.Segmenter)||Kn==="grapheme"&&(oi==="variant"||oi==="accent")?simpleSearch(ki,$n,Pn):segmenterSearch(ki,$n,Pn)},searchMatcher=(ki,$n)=>{const{defalutLocale:Pn,matchCase:Kn,matchDiacritics:oi,matchWholeWords:Mn}=$n;return function*(ti,In){const Ln=ki(ti,function*(jn,Cn){for(const Tn of search(jn,In,{locales:ti.body.lang||ti.documentElement.lang||Pn||"en",granularity:Mn?"word":"grapheme",sensitivity:oi&&Kn?"variant":oi&&!Kn?"accent":!oi&&Kn?"case":"base"})){const{startIndex:Rn,startOffset:ui,endIndex:si,endOffset:ei}=Tn.range;Tn.range=Cn(Rn,ui,si,ei),yield Tn}});for(const jn of Ln)yield jn}},search$1=Object.freeze(Object.defineProperty({__proto__:null,search,searchMatcher},Symbol.toStringTag,{value:"Module"})),NS$2={XML:"http://www.w3.org/XML/1998/namespace",SSML:"http://www.w3.org/2001/10/synthesis"},blockTags=new Set(["article","aside","audio","blockquote","caption","details","dialog","div","dl","dt","dd","figure","footer","form","figcaption","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","math","nav","ol","p","pre","section","tr"]),getLang=ki=>{var Pn;const $n=ki.lang||((Pn=ki==null?void 0:ki.getAttributeNS)==null?void 0:Pn.call(ki,NS$2.XML,"lang"));return $n||(ki.parentElement?getLang(ki.parentElement):null)},getAlphabet=ki=>{var Pn;const $n=(Pn=ki==null?void 0:ki.getAttributeNS)==null?void 0:Pn.call(ki,NS$2.XML,"lang");return $n||(ki.parentElement?getAlphabet(ki.parentElement):null)},getSegmenter=(ki="en",$n="word")=>{const Pn=new Intl.Segmenter(ki,{granularity:$n}),Kn=$n==="word";return function*(oi,Mn){const ti=oi.join("");let In=0,Ln=-1,jn=0;for(const{index:Cn,segment:Tn,isWordLike:Rn}of Pn.segment(ti)){if(Kn&&!Rn)continue;for(;jn<=Cn;)jn+=oi[++Ln].length;const ui=Ln,si=Cn-(jn-oi[Ln].length),ei=Cn+Tn.length;if(ei<ti.length)for(;jn<=ei;)jn+=oi[++Ln].length;const Bn=Ln,Nn=ei-(jn-oi[Ln].length);yield[(In++).toString(),Mn(ui,si,Bn,Nn)]}}},fragmentToSSML=(ki,$n)=>{const Pn=document.implementation.createDocument(NS$2.SSML,"speak"),{lang:Kn}=$n;Kn&&Pn.documentElement.setAttributeNS(NS$2.XML,"lang",Kn);const oi=(Mn,ti,In)=>{if(!Mn)return;if(Mn.nodeType===3)return Pn.createTextNode(Mn.textContent);if(Mn.nodeType===4)return Pn.createCDATASection(Mn.textContent);if(Mn.nodeType!==1)return;let Ln;const jn=Mn.nodeName.toLowerCase();jn==="foliate-mark"?(Ln=Pn.createElementNS(NS$2.SSML,"mark"),Ln.setAttribute("name",Mn.dataset.name)):jn==="br"?Ln=Pn.createElementNS(NS$2.SSML,"break"):(jn==="em"||jn==="strong")&&(Ln=Pn.createElementNS(NS$2.SSML,"emphasis"));const Cn=Mn.lang||Mn.getAttributeNS(NS$2.XML,"lang");Cn&&(Ln||(Ln=Pn.createElementNS(NS$2.SSML,"lang")),Ln.setAttributeNS(NS$2.XML,"lang",Cn));const Tn=Mn.getAttributeNS(NS$2.SSML,"alphabet")||In;if(!Ln){const ui=Mn.getAttributeNS(NS$2.SSML,"ph");ui&&(Ln=Pn.createElementNS(NS$2.SSML,"phoneme"),Tn&&Ln.setAttribute("alphabet",Tn),Ln.setAttribute("ph",ui))}Ln||(Ln=ti);let Rn=Mn.firstChild;for(;Rn;){const ui=oi(Rn,Ln,Tn);ui&&Ln!==ui&&Ln.append(ui),Rn=Rn.nextSibling}return Ln};return oi(ki.firstChild,Pn.documentElement,$n.alphabet),Pn},getFragmentWithMarks=(ki,$n,Pn)=>{const Kn=getLang(ki.commonAncestorContainer),oi=getAlphabet(ki.commonAncestorContainer),Mn=getSegmenter(Kn,Pn),ti=ki.cloneContents(),In=[...$n(ki,Mn)],Ln=[...$n(ti,Mn)];for(const[Cn,Tn]of Ln){const Rn=document.createElement("foliate-mark");Rn.dataset.name=Cn,Tn.insertNode(Rn)}const jn=fragmentToSSML(ti,{lang:Kn,alphabet:oi});return{entries:In,ssml:jn}},rangeIsEmpty=ki=>!ki.toString().trim();function*getBlocks(ki){let $n;const Pn=ki.createTreeWalker(ki.body,NodeFilter.SHOW_ELEMENT);for(let Kn=Pn.nextNode();Kn;Kn=Pn.nextNode()){const oi=Kn.tagName.toLowerCase();blockTags.has(oi)&&($n&&($n.setEndBefore(Kn),rangeIsEmpty($n)||(yield $n)),$n=ki.createRange(),$n.setStart(Kn,0))}$n||($n=ki.createRange(),$n.setStart(ki.body.firstChild??ki.body,0)),$n.setEndAfter(ki.body.lastChild??ki.body),rangeIsEmpty($n)||(yield $n)}class ListIterator{constructor($n,Pn=Kn=>Kn){Ki(this,Ca,[]);Ki(this,mo,void 0);Ki(this,$a,-1);Ki(this,Ja,void 0);ds(this,mo,$n),ds(this,Ja,Pn)}current(){if(vi(this,Ca)[vi(this,$a)])return vi(this,Ja).call(this,vi(this,Ca)[vi(this,$a)])}first(){if(vi(this,Ca)[0])return ds(this,$a,0),vi(this,Ja).call(this,vi(this,Ca)[0])}prev(){const $n=vi(this,$a)-1;if(vi(this,Ca)[$n])return ds(this,$a,$n),vi(this,Ja).call(this,vi(this,Ca)[$n])}next(){const $n=vi(this,$a)+1;if(vi(this,Ca)[$n])return ds(this,$a,$n),vi(this,Ja).call(this,vi(this,Ca)[$n]);for(;;){const{done:Pn,value:Kn}=vi(this,mo).next();if(Pn)break;if(vi(this,Ca).push(Kn),vi(this,Ca)[$n])return ds(this,$a,$n),vi(this,Ja).call(this,vi(this,Ca)[$n])}}find($n){const Pn=vi(this,Ca).findIndex(Kn=>$n(Kn));if(Pn>-1)return ds(this,$a,Pn),vi(this,Ja).call(this,vi(this,Ca)[Pn]);for(;;){const{done:Kn,value:oi}=vi(this,mo).next();if(Kn)break;if(vi(this,Ca).push(oi),$n(oi))return ds(this,$a,vi(this,Ca).length-1),vi(this,Ja).call(this,oi)}}}Ca=new WeakMap,mo=new WeakMap,$a=new WeakMap,Ja=new WeakMap;class TTS{constructor($n,Pn,Kn){Ki(this,bo);Ki(this,_r);Ki(this,gr,void 0);Ki(this,xo,void 0);Ki(this,nr,void 0);Ki(this,c0,new XMLSerializer);this.doc=$n,this.highlight=Kn,ds(this,gr,new ListIterator(getBlocks($n),oi=>{const{entries:Mn,ssml:ti}=getFragmentWithMarks(oi,Pn);return ds(this,xo,new Map(Mn)),[ti,oi]}))}start(){ds(this,nr,null);const[$n]=vi(this,gr).first()??[];return $n?Qi(this,_r,Ho).call(this,$n,Pn=>Qi(this,bo,Fc).call(this,Pn,vi(this,nr))):this.next()}resume(){const[$n]=vi(this,gr).current()??[];return $n?Qi(this,_r,Ho).call(this,$n,Pn=>Qi(this,bo,Fc).call(this,Pn,vi(this,nr))):this.next()}prev($n){ds(this,nr,null);const[Pn,Kn]=vi(this,gr).prev()??[];return $n&&Kn&&this.highlight(Kn.cloneRange()),Qi(this,_r,Ho).call(this,Pn)}next($n){ds(this,nr,null);const[Pn,Kn]=vi(this,gr).next()??[];return $n&&Kn&&this.highlight(Kn.cloneRange()),Qi(this,_r,Ho).call(this,Pn)}from($n){ds(this,nr,null);const[Pn]=vi(this,gr).find(oi=>$n.compareBoundaryPoints(Range.END_TO_START,oi)<=0);let Kn;for(const[oi,Mn]of vi(this,xo).entries())if($n.compareBoundaryPoints(Range.START_TO_START,Mn)<=0){Kn=oi;break}return Qi(this,_r,Ho).call(this,Pn,oi=>Qi(this,bo,Fc).call(this,oi,Kn))}setMark($n){const Pn=vi(this,xo).get($n);Pn&&(ds(this,nr,$n),this.highlight(Pn.cloneRange()))}}gr=new WeakMap,xo=new WeakMap,nr=new WeakMap,c0=new WeakMap,bo=new WeakSet,Fc=function($n,Pn){return Pn?$n.querySelector(`mark[name="${CSS.escape(Pn)}"`):null},_r=new WeakSet,Ho=function($n,Pn){var Mn,ti;if(!$n)return;if(!Pn)return vi(this,c0).serializeToString($n);const Kn=document.implementation.createDocument(NS$2.SSML,"speak");Kn.documentElement.replaceWith(Kn.importNode($n.documentElement,!0));let oi=(Mn=Pn(Kn))==null?void 0:Mn.previousSibling;for(;oi;){const In=oi.previousSibling??((ti=oi.parentNode)==null?void 0:ti.previousSibling);oi.parentNode.removeChild(oi),oi=In}return vi(this,c0).serializeToString(Kn)};const tts=Object.freeze(Object.defineProperty({__proto__:null,TTS},Symbol.toStringTag,{value:"Module"})),e$1=0,t$1=1,n$1=-2,i$1=-3,r$1=-4,a$1=-5,s$1=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],o$1=1440,l$1=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],c$1=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],u$1=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d$1=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],f$1=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],h$1=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],_$1=15;function w$1(){let ki,$n,Pn,Kn,oi,Mn;function ti(Ln,jn,Cn,Tn,Rn,ui,si,ei,Bn,Nn,Hn){let On,hi,Xn,ii,ri,di,fi,wi,Jn,pi,Zn,Gn,mi,Wn,ni;pi=0,ri=Cn;do Pn[Ln[jn+pi]]++,pi++,ri--;while(ri!==0);if(Pn[0]==Cn)return si[0]=-1,ei[0]=0,e$1;for(wi=ei[0],di=1;di<=_$1&&Pn[di]===0;di++);for(fi=di,wi<di&&(wi=di),ri=_$1;ri!==0&&Pn[ri]===0;ri--);for(Xn=ri,wi>ri&&(wi=ri),ei[0]=wi,Wn=1<<di;di<ri;di++,Wn<<=1)if((Wn-=Pn[di])<0)return i$1;if((Wn-=Pn[ri])<0)return i$1;for(Pn[ri]+=Wn,Mn[1]=di=0,pi=1,mi=2;--ri!=0;)Mn[mi]=di+=Pn[pi],mi++,pi++;ri=0,pi=0;do(di=Ln[jn+pi])!==0&&(Hn[Mn[di]++]=ri),pi++;while(++ri<Cn);for(Cn=Mn[Xn],Mn[0]=ri=0,pi=0,ii=-1,Gn=-wi,oi[0]=0,Zn=0,ni=0;fi<=Xn;fi++)for(On=Pn[fi];On--!=0;){for(;fi>Gn+wi;){if(ii++,Gn+=wi,ni=Xn-Gn,ni=ni>wi?wi:ni,(hi=1<<(di=fi-Gn))>On+1&&(hi-=On+1,mi=fi,di<ni))for(;++di<ni&&!((hi<<=1)<=Pn[++mi]);)hi-=Pn[mi];if(ni=1<<di,Nn[0]+ni>o$1)return i$1;oi[ii]=Zn=Nn[0],Nn[0]+=ni,ii!==0?(Mn[ii]=ri,Kn[0]=di,Kn[1]=wi,di=ri>>>Gn-wi,Kn[2]=Zn-oi[ii-1]-di,Bn.set(Kn,3*(oi[ii-1]+di))):si[0]=Zn}for(Kn[1]=fi-Gn,pi>=Cn?Kn[0]=192:Hn[pi]<Tn?(Kn[0]=Hn[pi]<256?0:96,Kn[2]=Hn[pi++]):(Kn[0]=ui[Hn[pi]-Tn]+16+64,Kn[2]=Rn[Hn[pi++]-Tn]),hi=1<<fi-Gn,di=ri>>>Gn;di<ni;di+=hi)Bn.set(Kn,3*(Zn+di));for(di=1<<fi-1;ri&di;di>>>=1)ri^=di;for(ri^=di,Jn=(1<<Gn)-1;(ri&Jn)!=Mn[ii];)ii--,Gn-=wi,Jn=(1<<Gn)-1}return Wn!==0&&Xn!=1?a$1:e$1}function In(Ln){let jn;for(ki||(ki=[],$n=[],Pn=new Int32Array(_$1+1),Kn=[],oi=new Int32Array(_$1),Mn=new Int32Array(_$1+1)),$n.length<Ln&&($n=[]),jn=0;jn<Ln;jn++)$n[jn]=0;for(jn=0;jn<_$1+1;jn++)Pn[jn]=0;for(jn=0;jn<3;jn++)Kn[jn]=0;oi.set(Pn.subarray(0,_$1),0),Mn.set(Pn.subarray(0,_$1+1),0)}this.inflate_trees_bits=function(Ln,jn,Cn,Tn,Rn){let ui;return In(19),ki[0]=0,ui=ti(Ln,0,19,19,null,null,Cn,jn,Tn,ki,$n),ui==i$1?Rn.msg="oversubscribed dynamic bit lengths tree":ui!=a$1&&jn[0]!==0||(Rn.msg="incomplete dynamic bit lengths tree",ui=i$1),ui},this.inflate_trees_dynamic=function(Ln,jn,Cn,Tn,Rn,ui,si,ei,Bn){let Nn;return In(288),ki[0]=0,Nn=ti(Cn,0,Ln,257,u$1,d$1,ui,Tn,ei,ki,$n),Nn!=e$1||Tn[0]===0?(Nn==i$1?Bn.msg="oversubscribed literal/length tree":Nn!=r$1&&(Bn.msg="incomplete literal/length tree",Nn=i$1),Nn):(In(288),Nn=ti(Cn,Ln,jn,0,f$1,h$1,si,Rn,ei,ki,$n),Nn!=e$1||Rn[0]===0&&Ln>257?(Nn==i$1?Bn.msg="oversubscribed distance tree":Nn==a$1?(Bn.msg="incomplete distance tree",Nn=i$1):Nn!=r$1&&(Bn.msg="empty distance tree with lengths",Nn=i$1),Nn):e$1)}}w$1.inflate_trees_fixed=function(ki,$n,Pn,Kn){return ki[0]=9,$n[0]=5,Pn[0]=l$1,Kn[0]=c$1,e$1};const b$1=0,p$1=1,m$1=2,g$1=3,y$1=4,x$1=5,k$1=6,v$1=7,S$1=8,z=9;function A(){const ki=this;let $n,Pn,Kn,oi,Mn=0,ti=0,In=0,Ln=0,jn=0,Cn=0,Tn=0,Rn=0,ui=0,si=0;function ei(Bn,Nn,Hn,On,hi,Xn,ii,ri){let di,fi,wi,Jn,pi,Zn,Gn,mi,Wn,ni,li,Ai,gi,yi,Ii,xi;Gn=ri.next_in_index,mi=ri.avail_in,pi=ii.bitb,Zn=ii.bitk,Wn=ii.write,ni=Wn<ii.read?ii.read-Wn-1:ii.end-Wn,li=s$1[Bn],Ai=s$1[Nn];do{for(;Zn<20;)mi--,pi|=(255&ri.read_byte(Gn++))<<Zn,Zn+=8;if(di=pi&li,fi=Hn,wi=On,xi=3*(wi+di),(Jn=fi[xi])!==0)for(;;){if(pi>>=fi[xi+1],Zn-=fi[xi+1],(16&Jn)!=0){for(Jn&=15,gi=fi[xi+2]+(pi&s$1[Jn]),pi>>=Jn,Zn-=Jn;Zn<15;)mi--,pi|=(255&ri.read_byte(Gn++))<<Zn,Zn+=8;for(di=pi&Ai,fi=hi,wi=Xn,xi=3*(wi+di),Jn=fi[xi];;){if(pi>>=fi[xi+1],Zn-=fi[xi+1],(16&Jn)!=0){for(Jn&=15;Zn<Jn;)mi--,pi|=(255&ri.read_byte(Gn++))<<Zn,Zn+=8;if(yi=fi[xi+2]+(pi&s$1[Jn]),pi>>=Jn,Zn-=Jn,ni-=gi,Wn>=yi)Ii=Wn-yi,Wn-Ii>0&&2>Wn-Ii?(ii.win[Wn++]=ii.win[Ii++],ii.win[Wn++]=ii.win[Ii++],gi-=2):(ii.win.set(ii.win.subarray(Ii,Ii+2),Wn),Wn+=2,Ii+=2,gi-=2);else{Ii=Wn-yi;do Ii+=ii.end;while(Ii<0);if(Jn=ii.end-Ii,gi>Jn){if(gi-=Jn,Wn-Ii>0&&Jn>Wn-Ii)do ii.win[Wn++]=ii.win[Ii++];while(--Jn!=0);else ii.win.set(ii.win.subarray(Ii,Ii+Jn),Wn),Wn+=Jn,Ii+=Jn,Jn=0;Ii=0}}if(Wn-Ii>0&&gi>Wn-Ii)do ii.win[Wn++]=ii.win[Ii++];while(--gi!=0);else ii.win.set(ii.win.subarray(Ii,Ii+gi),Wn),Wn+=gi,Ii+=gi,gi=0;break}if(64&Jn)return ri.msg="invalid distance code",gi=ri.avail_in-mi,gi=Zn>>3<gi?Zn>>3:gi,mi+=gi,Gn-=gi,Zn-=gi<<3,ii.bitb=pi,ii.bitk=Zn,ri.avail_in=mi,ri.total_in+=Gn-ri.next_in_index,ri.next_in_index=Gn,ii.write=Wn,i$1;di+=fi[xi+2],di+=pi&s$1[Jn],xi=3*(wi+di),Jn=fi[xi]}break}if(64&Jn)return 32&Jn?(gi=ri.avail_in-mi,gi=Zn>>3<gi?Zn>>3:gi,mi+=gi,Gn-=gi,Zn-=gi<<3,ii.bitb=pi,ii.bitk=Zn,ri.avail_in=mi,ri.total_in+=Gn-ri.next_in_index,ri.next_in_index=Gn,ii.write=Wn,t$1):(ri.msg="invalid literal/length code",gi=ri.avail_in-mi,gi=Zn>>3<gi?Zn>>3:gi,mi+=gi,Gn-=gi,Zn-=gi<<3,ii.bitb=pi,ii.bitk=Zn,ri.avail_in=mi,ri.total_in+=Gn-ri.next_in_index,ri.next_in_index=Gn,ii.write=Wn,i$1);if(di+=fi[xi+2],di+=pi&s$1[Jn],xi=3*(wi+di),(Jn=fi[xi])===0){pi>>=fi[xi+1],Zn-=fi[xi+1],ii.win[Wn++]=fi[xi+2],ni--;break}}else pi>>=fi[xi+1],Zn-=fi[xi+1],ii.win[Wn++]=fi[xi+2],ni--}while(ni>=258&&mi>=10);return gi=ri.avail_in-mi,gi=Zn>>3<gi?Zn>>3:gi,mi+=gi,Gn-=gi,Zn-=gi<<3,ii.bitb=pi,ii.bitk=Zn,ri.avail_in=mi,ri.total_in+=Gn-ri.next_in_index,ri.next_in_index=Gn,ii.write=Wn,e$1}ki.init=function(Bn,Nn,Hn,On,hi,Xn){$n=b$1,Tn=Bn,Rn=Nn,Kn=Hn,ui=On,oi=hi,si=Xn,Pn=null},ki.proc=function(Bn,Nn,Hn){let On,hi,Xn,ii,ri,di,fi,wi=0,Jn=0,pi=0;for(pi=Nn.next_in_index,ii=Nn.avail_in,wi=Bn.bitb,Jn=Bn.bitk,ri=Bn.write,di=ri<Bn.read?Bn.read-ri-1:Bn.end-ri;;)switch($n){case b$1:if(di>=258&&ii>=10&&(Bn.bitb=wi,Bn.bitk=Jn,Nn.avail_in=ii,Nn.total_in+=pi-Nn.next_in_index,Nn.next_in_index=pi,Bn.write=ri,Hn=ei(Tn,Rn,Kn,ui,oi,si,Bn,Nn),pi=Nn.next_in_index,ii=Nn.avail_in,wi=Bn.bitb,Jn=Bn.bitk,ri=Bn.write,di=ri<Bn.read?Bn.read-ri-1:Bn.end-ri,Hn!=e$1)){$n=Hn==t$1?v$1:z;break}In=Tn,Pn=Kn,ti=ui,$n=p$1;case p$1:for(On=In;Jn<On;){if(ii===0)return Bn.bitb=wi,Bn.bitk=Jn,Nn.avail_in=ii,Nn.total_in+=pi-Nn.next_in_index,Nn.next_in_index=pi,Bn.write=ri,Bn.inflate_flush(Nn,Hn);Hn=e$1,ii--,wi|=(255&Nn.read_byte(pi++))<<Jn,Jn+=8}if(hi=3*(ti+(wi&s$1[On])),wi>>>=Pn[hi+1],Jn-=Pn[hi+1],Xn=Pn[hi],Xn===0){Ln=Pn[hi+2],$n=k$1;break}if(16&Xn){jn=15&Xn,Mn=Pn[hi+2],$n=m$1;break}if(!(64&Xn)){In=Xn,ti=hi/3+Pn[hi+2];break}if(32&Xn){$n=v$1;break}return $n=z,Nn.msg="invalid literal/length code",Hn=i$1,Bn.bitb=wi,Bn.bitk=Jn,Nn.avail_in=ii,Nn.total_in+=pi-Nn.next_in_index,Nn.next_in_index=pi,Bn.write=ri,Bn.inflate_flush(Nn,Hn);case m$1:for(On=jn;Jn<On;){if(ii===0)return Bn.bitb=wi,Bn.bitk=Jn,Nn.avail_in=ii,Nn.total_in+=pi-Nn.next_in_index,Nn.next_in_index=pi,Bn.write=ri,Bn.inflate_flush(Nn,Hn);Hn=e$1,ii--,wi|=(255&Nn.read_byte(pi++))<<Jn,Jn+=8}Mn+=wi&s$1[On],wi>>=On,Jn-=On,In=Rn,Pn=oi,ti=si,$n=g$1;case g$1:for(On=In;Jn<On;){if(ii===0)return Bn.bitb=wi,Bn.bitk=Jn,Nn.avail_in=ii,Nn.total_in+=pi-Nn.next_in_index,Nn.next_in_index=pi,Bn.write=ri,Bn.inflate_flush(Nn,Hn);Hn=e$1,ii--,wi|=(255&Nn.read_byte(pi++))<<Jn,Jn+=8}if(hi=3*(ti+(wi&s$1[On])),wi>>=Pn[hi+1],Jn-=Pn[hi+1],Xn=Pn[hi],(16&Xn)!=0){jn=15&Xn,Cn=Pn[hi+2],$n=y$1;break}if(!(64&Xn)){In=Xn,ti=hi/3+Pn[hi+2];break}return $n=z,Nn.msg="invalid distance code",Hn=i$1,Bn.bitb=wi,Bn.bitk=Jn,Nn.avail_in=ii,Nn.total_in+=pi-Nn.next_in_index,Nn.next_in_index=pi,Bn.write=ri,Bn.inflate_flush(Nn,Hn);case y$1:for(On=jn;Jn<On;){if(ii===0)return Bn.bitb=wi,Bn.bitk=Jn,Nn.avail_in=ii,Nn.total_in+=pi-Nn.next_in_index,Nn.next_in_index=pi,Bn.write=ri,Bn.inflate_flush(Nn,Hn);Hn=e$1,ii--,wi|=(255&Nn.read_byte(pi++))<<Jn,Jn+=8}Cn+=wi&s$1[On],wi>>=On,Jn-=On,$n=x$1;case x$1:for(fi=ri-Cn;fi<0;)fi+=Bn.end;for(;Mn!==0;){if(di===0&&(ri==Bn.end&&Bn.read!==0&&(ri=0,di=ri<Bn.read?Bn.read-ri-1:Bn.end-ri),di===0&&(Bn.write=ri,Hn=Bn.inflate_flush(Nn,Hn),ri=Bn.write,di=ri<Bn.read?Bn.read-ri-1:Bn.end-ri,ri==Bn.end&&Bn.read!==0&&(ri=0,di=ri<Bn.read?Bn.read-ri-1:Bn.end-ri),di===0)))return Bn.bitb=wi,Bn.bitk=Jn,Nn.avail_in=ii,Nn.total_in+=pi-Nn.next_in_index,Nn.next_in_index=pi,Bn.write=ri,Bn.inflate_flush(Nn,Hn);Bn.win[ri++]=Bn.win[fi++],di--,fi==Bn.end&&(fi=0),Mn--}$n=b$1;break;case k$1:if(di===0&&(ri==Bn.end&&Bn.read!==0&&(ri=0,di=ri<Bn.read?Bn.read-ri-1:Bn.end-ri),di===0&&(Bn.write=ri,Hn=Bn.inflate_flush(Nn,Hn),ri=Bn.write,di=ri<Bn.read?Bn.read-ri-1:Bn.end-ri,ri==Bn.end&&Bn.read!==0&&(ri=0,di=ri<Bn.read?Bn.read-ri-1:Bn.end-ri),di===0)))return Bn.bitb=wi,Bn.bitk=Jn,Nn.avail_in=ii,Nn.total_in+=pi-Nn.next_in_index,Nn.next_in_index=pi,Bn.write=ri,Bn.inflate_flush(Nn,Hn);Hn=e$1,Bn.win[ri++]=Ln,di--,$n=b$1;break;case v$1:if(Jn>7&&(Jn-=8,ii++,pi--),Bn.write=ri,Hn=Bn.inflate_flush(Nn,Hn),ri=Bn.write,di=ri<Bn.read?Bn.read-ri-1:Bn.end-ri,Bn.read!=Bn.write)return Bn.bitb=wi,Bn.bitk=Jn,Nn.avail_in=ii,Nn.total_in+=pi-Nn.next_in_index,Nn.next_in_index=pi,Bn.write=ri,Bn.inflate_flush(Nn,Hn);$n=S$1;case S$1:return Hn=t$1,Bn.bitb=wi,Bn.bitk=Jn,Nn.avail_in=ii,Nn.total_in+=pi-Nn.next_in_index,Nn.next_in_index=pi,Bn.write=ri,Bn.inflate_flush(Nn,Hn);case z:return Hn=i$1,Bn.bitb=wi,Bn.bitk=Jn,Nn.avail_in=ii,Nn.total_in+=pi-Nn.next_in_index,Nn.next_in_index=pi,Bn.write=ri,Bn.inflate_flush(Nn,Hn);default:return Hn=n$1,Bn.bitb=wi,Bn.bitk=Jn,Nn.avail_in=ii,Nn.total_in+=pi-Nn.next_in_index,Nn.next_in_index=pi,Bn.write=ri,Bn.inflate_flush(Nn,Hn)}},ki.free=function(){}}const U$1=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D=0,E$1=1,F=2,O=3,T$1=4,W=5,C=6,j=7,M=8,L=9;function P(ki,$n){const Pn=this;let Kn,oi=D,Mn=0,ti=0,In=0;const Ln=[0],jn=[0],Cn=new A;let Tn=0,Rn=new Int32Array(3*o$1);const ui=new w$1;Pn.bitk=0,Pn.bitb=0,Pn.win=new Uint8Array($n),Pn.end=$n,Pn.read=0,Pn.write=0,Pn.reset=function(si,ei){ei&&(ei[0]=0),oi==C&&Cn.free(si),oi=D,Pn.bitk=0,Pn.bitb=0,Pn.read=Pn.write=0},Pn.reset(ki,null),Pn.inflate_flush=function(si,ei){let Bn,Nn,Hn;return Nn=si.next_out_index,Hn=Pn.read,Bn=(Hn<=Pn.write?Pn.write:Pn.end)-Hn,Bn>si.avail_out&&(Bn=si.avail_out),Bn!==0&&ei==a$1&&(ei=e$1),si.avail_out-=Bn,si.total_out+=Bn,si.next_out.set(Pn.win.subarray(Hn,Hn+Bn),Nn),Nn+=Bn,Hn+=Bn,Hn==Pn.end&&(Hn=0,Pn.write==Pn.end&&(Pn.write=0),Bn=Pn.write-Hn,Bn>si.avail_out&&(Bn=si.avail_out),Bn!==0&&ei==a$1&&(ei=e$1),si.avail_out-=Bn,si.total_out+=Bn,si.next_out.set(Pn.win.subarray(Hn,Hn+Bn),Nn),Nn+=Bn,Hn+=Bn),si.next_out_index=Nn,Pn.read=Hn,ei},Pn.proc=function(si,ei){let Bn,Nn,Hn,On,hi,Xn,ii,ri;for(On=si.next_in_index,hi=si.avail_in,Nn=Pn.bitb,Hn=Pn.bitk,Xn=Pn.write,ii=Xn<Pn.read?Pn.read-Xn-1:Pn.end-Xn;;){let di,fi,wi,Jn,pi,Zn,Gn,mi;switch(oi){case D:for(;Hn<3;){if(hi===0)return Pn.bitb=Nn,Pn.bitk=Hn,si.avail_in=hi,si.total_in+=On-si.next_in_index,si.next_in_index=On,Pn.write=Xn,Pn.inflate_flush(si,ei);ei=e$1,hi--,Nn|=(255&si.read_byte(On++))<<Hn,Hn+=8}switch(Bn=7&Nn,Tn=1&Bn,Bn>>>1){case 0:Nn>>>=3,Hn-=3,Bn=7&Hn,Nn>>>=Bn,Hn-=Bn,oi=E$1;break;case 1:di=[],fi=[],wi=[[]],Jn=[[]],w$1.inflate_trees_fixed(di,fi,wi,Jn),Cn.init(di[0],fi[0],wi[0],0,Jn[0],0),Nn>>>=3,Hn-=3,oi=C;break;case 2:Nn>>>=3,Hn-=3,oi=O;break;case 3:return Nn>>>=3,Hn-=3,oi=L,si.msg="invalid block type",ei=i$1,Pn.bitb=Nn,Pn.bitk=Hn,si.avail_in=hi,si.total_in+=On-si.next_in_index,si.next_in_index=On,Pn.write=Xn,Pn.inflate_flush(si,ei)}break;case E$1:for(;Hn<32;){if(hi===0)return Pn.bitb=Nn,Pn.bitk=Hn,si.avail_in=hi,si.total_in+=On-si.next_in_index,si.next_in_index=On,Pn.write=Xn,Pn.inflate_flush(si,ei);ei=e$1,hi--,Nn|=(255&si.read_byte(On++))<<Hn,Hn+=8}if((~Nn>>>16&65535)!=(65535&Nn))return oi=L,si.msg="invalid stored block lengths",ei=i$1,Pn.bitb=Nn,Pn.bitk=Hn,si.avail_in=hi,si.total_in+=On-si.next_in_index,si.next_in_index=On,Pn.write=Xn,Pn.inflate_flush(si,ei);Mn=65535&Nn,Nn=Hn=0,oi=Mn!==0?F:Tn!==0?j:D;break;case F:if(hi===0||ii===0&&(Xn==Pn.end&&Pn.read!==0&&(Xn=0,ii=Xn<Pn.read?Pn.read-Xn-1:Pn.end-Xn),ii===0&&(Pn.write=Xn,ei=Pn.inflate_flush(si,ei),Xn=Pn.write,ii=Xn<Pn.read?Pn.read-Xn-1:Pn.end-Xn,Xn==Pn.end&&Pn.read!==0&&(Xn=0,ii=Xn<Pn.read?Pn.read-Xn-1:Pn.end-Xn),ii===0)))return Pn.bitb=Nn,Pn.bitk=Hn,si.avail_in=hi,si.total_in+=On-si.next_in_index,si.next_in_index=On,Pn.write=Xn,Pn.inflate_flush(si,ei);if(ei=e$1,Bn=Mn,Bn>hi&&(Bn=hi),Bn>ii&&(Bn=ii),Pn.win.set(si.read_buf(On,Bn),Xn),On+=Bn,hi-=Bn,Xn+=Bn,ii-=Bn,(Mn-=Bn)!=0)break;oi=Tn!==0?j:D;break;case O:for(;Hn<14;){if(hi===0)return Pn.bitb=Nn,Pn.bitk=Hn,si.avail_in=hi,si.total_in+=On-si.next_in_index,si.next_in_index=On,Pn.write=Xn,Pn.inflate_flush(si,ei);ei=e$1,hi--,Nn|=(255&si.read_byte(On++))<<Hn,Hn+=8}if(ti=Bn=16383&Nn,(31&Bn)>29||(Bn>>5&31)>29)return oi=L,si.msg="too many length or distance symbols",ei=i$1,Pn.bitb=Nn,Pn.bitk=Hn,si.avail_in=hi,si.total_in+=On-si.next_in_index,si.next_in_index=On,Pn.write=Xn,Pn.inflate_flush(si,ei);if(Bn=258+(31&Bn)+(Bn>>5&31),!Kn||Kn.length<Bn)Kn=[];else for(ri=0;ri<Bn;ri++)Kn[ri]=0;Nn>>>=14,Hn-=14,In=0,oi=T$1;case T$1:for(;In<4+(ti>>>10);){for(;Hn<3;){if(hi===0)return Pn.bitb=Nn,Pn.bitk=Hn,si.avail_in=hi,si.total_in+=On-si.next_in_index,si.next_in_index=On,Pn.write=Xn,Pn.inflate_flush(si,ei);ei=e$1,hi--,Nn|=(255&si.read_byte(On++))<<Hn,Hn+=8}Kn[U$1[In++]]=7&Nn,Nn>>>=3,Hn-=3}for(;In<19;)Kn[U$1[In++]]=0;if(Ln[0]=7,Bn=ui.inflate_trees_bits(Kn,Ln,jn,Rn,si),Bn!=e$1)return(ei=Bn)==i$1&&(Kn=null,oi=L),Pn.bitb=Nn,Pn.bitk=Hn,si.avail_in=hi,si.total_in+=On-si.next_in_index,si.next_in_index=On,Pn.write=Xn,Pn.inflate_flush(si,ei);In=0,oi=W;case W:for(;Bn=ti,!(In>=258+(31&Bn)+(Bn>>5&31));){let Wn,ni;for(Bn=Ln[0];Hn<Bn;){if(hi===0)return Pn.bitb=Nn,Pn.bitk=Hn,si.avail_in=hi,si.total_in+=On-si.next_in_index,si.next_in_index=On,Pn.write=Xn,Pn.inflate_flush(si,ei);ei=e$1,hi--,Nn|=(255&si.read_byte(On++))<<Hn,Hn+=8}if(Bn=Rn[3*(jn[0]+(Nn&s$1[Bn]))+1],ni=Rn[3*(jn[0]+(Nn&s$1[Bn]))+2],ni<16)Nn>>>=Bn,Hn-=Bn,Kn[In++]=ni;else{for(ri=ni==18?7:ni-14,Wn=ni==18?11:3;Hn<Bn+ri;){if(hi===0)return Pn.bitb=Nn,Pn.bitk=Hn,si.avail_in=hi,si.total_in+=On-si.next_in_index,si.next_in_index=On,Pn.write=Xn,Pn.inflate_flush(si,ei);ei=e$1,hi--,Nn|=(255&si.read_byte(On++))<<Hn,Hn+=8}if(Nn>>>=Bn,Hn-=Bn,Wn+=Nn&s$1[ri],Nn>>>=ri,Hn-=ri,ri=In,Bn=ti,ri+Wn>258+(31&Bn)+(Bn>>5&31)||ni==16&&ri<1)return Kn=null,oi=L,si.msg="invalid bit length repeat",ei=i$1,Pn.bitb=Nn,Pn.bitk=Hn,si.avail_in=hi,si.total_in+=On-si.next_in_index,si.next_in_index=On,Pn.write=Xn,Pn.inflate_flush(si,ei);ni=ni==16?Kn[ri-1]:0;do Kn[ri++]=ni;while(--Wn!=0);In=ri}}if(jn[0]=-1,pi=[],Zn=[],Gn=[],mi=[],pi[0]=9,Zn[0]=6,Bn=ti,Bn=ui.inflate_trees_dynamic(257+(31&Bn),1+(Bn>>5&31),Kn,pi,Zn,Gn,mi,Rn,si),Bn!=e$1)return Bn==i$1&&(Kn=null,oi=L),ei=Bn,Pn.bitb=Nn,Pn.bitk=Hn,si.avail_in=hi,si.total_in+=On-si.next_in_index,si.next_in_index=On,Pn.write=Xn,Pn.inflate_flush(si,ei);Cn.init(pi[0],Zn[0],Rn,Gn[0],Rn,mi[0]),oi=C;case C:if(Pn.bitb=Nn,Pn.bitk=Hn,si.avail_in=hi,si.total_in+=On-si.next_in_index,si.next_in_index=On,Pn.write=Xn,(ei=Cn.proc(Pn,si,ei))!=t$1)return Pn.inflate_flush(si,ei);if(ei=e$1,Cn.free(si),On=si.next_in_index,hi=si.avail_in,Nn=Pn.bitb,Hn=Pn.bitk,Xn=Pn.write,ii=Xn<Pn.read?Pn.read-Xn-1:Pn.end-Xn,Tn===0){oi=D;break}oi=j;case j:if(Pn.write=Xn,ei=Pn.inflate_flush(si,ei),Xn=Pn.write,ii=Xn<Pn.read?Pn.read-Xn-1:Pn.end-Xn,Pn.read!=Pn.write)return Pn.bitb=Nn,Pn.bitk=Hn,si.avail_in=hi,si.total_in+=On-si.next_in_index,si.next_in_index=On,Pn.write=Xn,Pn.inflate_flush(si,ei);oi=M;case M:return ei=t$1,Pn.bitb=Nn,Pn.bitk=Hn,si.avail_in=hi,si.total_in+=On-si.next_in_index,si.next_in_index=On,Pn.write=Xn,Pn.inflate_flush(si,ei);case L:return ei=i$1,Pn.bitb=Nn,Pn.bitk=Hn,si.avail_in=hi,si.total_in+=On-si.next_in_index,si.next_in_index=On,Pn.write=Xn,Pn.inflate_flush(si,ei);default:return ei=n$1,Pn.bitb=Nn,Pn.bitk=Hn,si.avail_in=hi,si.total_in+=On-si.next_in_index,si.next_in_index=On,Pn.write=Xn,Pn.inflate_flush(si,ei)}}},Pn.free=function(si){Pn.reset(si,null),Pn.win=null,Rn=null},Pn.set_dictionary=function(si,ei,Bn){Pn.win.set(si.subarray(ei,ei+Bn),0),Pn.read=Pn.write=Bn},Pn.sync_point=function(){return oi==E$1?1:0}}const R=13,B=[0,0,255,255];function I(){const ki=this;function $n(Pn){return Pn&&Pn.istate?(Pn.total_in=Pn.total_out=0,Pn.msg=null,Pn.istate.mode=7,Pn.istate.blocks.reset(Pn,null),e$1):n$1}ki.mode=0,ki.method=0,ki.was=[0],ki.need=0,ki.marker=0,ki.wbits=0,ki.inflateEnd=function(Pn){return ki.blocks&&ki.blocks.free(Pn),ki.blocks=null,e$1},ki.inflateInit=function(Pn,Kn){return Pn.msg=null,ki.blocks=null,Kn<8||Kn>15?(ki.inflateEnd(Pn),n$1):(ki.wbits=Kn,Pn.istate.blocks=new P(Pn,1<<Kn),$n(Pn),e$1)},ki.inflate=function(Pn,Kn){let oi,Mn;if(!Pn||!Pn.istate||!Pn.next_in)return n$1;const ti=Pn.istate;for(Kn=Kn==4?a$1:e$1,oi=a$1;;)switch(ti.mode){case 0:if(Pn.avail_in===0)return oi;if(oi=Kn,Pn.avail_in--,Pn.total_in++,(15&(ti.method=Pn.read_byte(Pn.next_in_index++)))!=8){ti.mode=R,Pn.msg="unknown compression method",ti.marker=5;break}if(8+(ti.method>>4)>ti.wbits){ti.mode=R,Pn.msg="invalid win size",ti.marker=5;break}ti.mode=1;case 1:if(Pn.avail_in===0)return oi;if(oi=Kn,Pn.avail_in--,Pn.total_in++,Mn=255&Pn.read_byte(Pn.next_in_index++),((ti.method<<8)+Mn)%31!=0){ti.mode=R,Pn.msg="incorrect header check",ti.marker=5;break}if(!(32&Mn)){ti.mode=7;break}ti.mode=2;case 2:if(Pn.avail_in===0)return oi;oi=Kn,Pn.avail_in--,Pn.total_in++,ti.need=(255&Pn.read_byte(Pn.next_in_index++))<<24&4278190080,ti.mode=3;case 3:if(Pn.avail_in===0)return oi;oi=Kn,Pn.avail_in--,Pn.total_in++,ti.need+=(255&Pn.read_byte(Pn.next_in_index++))<<16&16711680,ti.mode=4;case 4:if(Pn.avail_in===0)return oi;oi=Kn,Pn.avail_in--,Pn.total_in++,ti.need+=(255&Pn.read_byte(Pn.next_in_index++))<<8&65280,ti.mode=5;case 5:return Pn.avail_in===0?oi:(oi=Kn,Pn.avail_in--,Pn.total_in++,ti.need+=255&Pn.read_byte(Pn.next_in_index++),ti.mode=6,2);case 6:return ti.mode=R,Pn.msg="need dictionary",ti.marker=0,n$1;case 7:if(oi=ti.blocks.proc(Pn,oi),oi==i$1){ti.mode=R,ti.marker=0;break}if(oi==e$1&&(oi=Kn),oi!=t$1)return oi;oi=Kn,ti.blocks.reset(Pn,ti.was),ti.mode=12;case 12:return Pn.avail_in=0,t$1;case R:return i$1;default:return n$1}},ki.inflateSetDictionary=function(Pn,Kn,oi){let Mn=0,ti=oi;if(!Pn||!Pn.istate||Pn.istate.mode!=6)return n$1;const In=Pn.istate;return ti>=1<<In.wbits&&(ti=(1<<In.wbits)-1,Mn=oi-ti),In.blocks.set_dictionary(Kn,Mn,ti),In.mode=7,e$1},ki.inflateSync=function(Pn){let Kn,oi,Mn,ti,In;if(!Pn||!Pn.istate)return n$1;const Ln=Pn.istate;if(Ln.mode!=R&&(Ln.mode=R,Ln.marker=0),(Kn=Pn.avail_in)===0)return a$1;for(oi=Pn.next_in_index,Mn=Ln.marker;Kn!==0&&Mn<4;)Pn.read_byte(oi)==B[Mn]?Mn++:Mn=Pn.read_byte(oi)!==0?0:4-Mn,oi++,Kn--;return Pn.total_in+=oi-Pn.next_in_index,Pn.next_in_index=oi,Pn.avail_in=Kn,Ln.marker=Mn,Mn!=4?i$1:(ti=Pn.total_in,In=Pn.total_out,$n(Pn),Pn.total_in=ti,Pn.total_out=In,Ln.mode=7,e$1)},ki.inflateSyncPoint=function(Pn){return Pn&&Pn.istate&&Pn.istate.blocks?Pn.istate.blocks.sync_point():n$1}}function N(){}N.prototype={inflateInit(ki){const $n=this;return $n.istate=new I,ki||(ki=15),$n.istate.inflateInit($n,ki)},inflate(ki){const $n=this;return $n.istate?$n.istate.inflate($n,ki):n$1},inflateEnd(){const ki=this;if(!ki.istate)return n$1;const $n=ki.istate.inflateEnd(ki);return ki.istate=null,$n},inflateSync(){const ki=this;return ki.istate?ki.istate.inflateSync(ki):n$1},inflateSetDictionary(ki,$n){const Pn=this;return Pn.istate?Pn.istate.inflateSetDictionary(Pn,ki,$n):n$1},read_byte(ki){return this.next_in[ki]},read_buf(ki,$n){return this.next_in.subarray(ki,ki+$n)}};const V=4294967295,q=65535,H=33639248,K=101075792,Z=1,G=void 0,J="undefined",Q="function";class X{constructor($n){return class extends TransformStream{constructor(Pn,Kn){const oi=new $n(Kn);super({transform(Mn,ti){ti.enqueue(oi.append(Mn))},flush(Mn){const ti=oi.flush();ti&&Mn.enqueue(ti)}})}}}}let Y=2;try{typeof navigator!=J&&navigator.hardwareConcurrency&&(Y=navigator.hardwareConcurrency)}catch(ki){}const $={chunkSize:524288,maxWorkers:Y,terminateWorkerTimeout:5e3,useWebWorkers:!0,useCompressionStream:!0,workerScripts:G,CompressionStreamNative:typeof CompressionStream!=J&&CompressionStream,DecompressionStreamNative:typeof DecompressionStream!=J&&DecompressionStream},ee=Object.assign({},$);function te(ki){const{baseURL:$n,chunkSize:Pn,maxWorkers:Kn,terminateWorkerTimeout:oi,useCompressionStream:Mn,useWebWorkers:ti,Deflate:In,Inflate:Ln,CompressionStream:jn,DecompressionStream:Cn,workerScripts:Tn}=ki;if(ne("baseURL",$n),ne("chunkSize",Pn),ne("maxWorkers",Kn),ne("terminateWorkerTimeout",oi),ne("useCompressionStream",Mn),ne("useWebWorkers",ti),In&&(ee.CompressionStream=new X(In)),Ln&&(ee.DecompressionStream=new X(Ln)),ne("CompressionStream",jn),ne("DecompressionStream",Cn),Tn!==G){const{deflate:Rn,inflate:ui}=Tn;if((Rn||ui)&&(ee.workerScripts||(ee.workerScripts={})),Rn){if(!Array.isArray(Rn))throw new Error("workerScripts.deflate must be an array");ee.workerScripts.deflate=Rn}if(ui){if(!Array.isArray(ui))throw new Error("workerScripts.inflate must be an array");ee.workerScripts.inflate=ui}}}function ne(ki,$n){$n!==G&&(ee[ki]=$n)}const ie=[];for(let ki=0;ki<256;ki++){let $n=ki;for(let Pn=0;Pn<8;Pn++)1&$n?$n=$n>>>1^3988292384:$n>>>=1;ie[ki]=$n}class re{constructor($n){this.crc=$n||-1}append($n){let Pn=0|this.crc;for(let Kn=0,oi=0|$n.length;Kn<oi;Kn++)Pn=Pn>>>8^ie[255&(Pn^$n[Kn])];this.crc=Pn}get(){return~this.crc}}class ae extends TransformStream{constructor(){let $n;const Pn=new re;super({transform(Kn,oi){Pn.append(Kn),oi.enqueue(Kn)},flush(){const Kn=new Uint8Array(4);new DataView(Kn.buffer).setUint32(0,Pn.get()),$n.value=Kn}}),$n=this}}const se={concat(ki,$n){if(ki.length===0||$n.length===0)return ki.concat($n);const Pn=ki[ki.length-1],Kn=se.getPartial(Pn);return Kn===32?ki.concat($n):se._shiftRight($n,Kn,0|Pn,ki.slice(0,ki.length-1))},bitLength(ki){const $n=ki.length;if($n===0)return 0;const Pn=ki[$n-1];return 32*($n-1)+se.getPartial(Pn)},clamp(ki,$n){if(32*ki.length<$n)return ki;const Pn=(ki=ki.slice(0,Math.ceil($n/32))).length;return $n&=31,Pn>0&&$n&&(ki[Pn-1]=se.partial($n,ki[Pn-1]&2147483648>>$n-1,1)),ki},partial:(ki,$n,Pn)=>ki===32?$n:(Pn?0|$n:$n<<32-ki)+1099511627776*ki,getPartial:ki=>Math.round(ki/1099511627776)||32,_shiftRight(ki,$n,Pn,Kn){for(Kn===void 0&&(Kn=[]);$n>=32;$n-=32)Kn.push(Pn),Pn=0;if($n===0)return Kn.concat(ki);for(let ti=0;ti<ki.length;ti++)Kn.push(Pn|ki[ti]>>>$n),Pn=ki[ti]<<32-$n;const oi=ki.length?ki[ki.length-1]:0,Mn=se.getPartial(oi);return Kn.push(se.partial($n+Mn&31,$n+Mn>32?Pn:Kn.pop(),1)),Kn}},oe={bytes:{fromBits(ki){const $n=se.bitLength(ki)/8,Pn=new Uint8Array($n);let Kn;for(let oi=0;oi<$n;oi++)!(3&oi)&&(Kn=ki[oi/4]),Pn[oi]=Kn>>>24,Kn<<=8;return Pn},toBits(ki){const $n=[];let Pn,Kn=0;for(Pn=0;Pn<ki.length;Pn++)Kn=Kn<<8|ki[Pn],(3&Pn)==3&&($n.push(Kn),Kn=0);return 3&Pn&&$n.push(se.partial(8*(3&Pn),Kn)),$n}}},le={sha1:class{constructor(ki){const $n=this;$n.blockSize=512,$n._init=[1732584193,4023233417,2562383102,271733878,3285377520],$n._key=[1518500249,1859775393,2400959708,3395469782],ki?($n._h=ki._h.slice(0),$n._buffer=ki._buffer.slice(0),$n._length=ki._length):$n.reset()}reset(){const ki=this;return ki._h=ki._init.slice(0),ki._buffer=[],ki._length=0,ki}update(ki){const $n=this;typeof ki=="string"&&(ki=oe.utf8String.toBits(ki));const Pn=$n._buffer=se.concat($n._buffer,ki),Kn=$n._length,oi=$n._length=Kn+se.bitLength(ki);if(oi>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");const Mn=new Uint32Array(Pn);let ti=0;for(let In=$n.blockSize+Kn-($n.blockSize+Kn&$n.blockSize-1);In<=oi;In+=$n.blockSize)$n._block(Mn.subarray(16*ti,16*(ti+1))),ti+=1;return Pn.splice(0,16*ti),$n}finalize(){const ki=this;let $n=ki._buffer;const Pn=ki._h;$n=se.concat($n,[se.partial(1,1)]);for(let Kn=$n.length+2;15&Kn;Kn++)$n.push(0);for($n.push(Math.floor(ki._length/4294967296)),$n.push(0|ki._length);$n.length;)ki._block($n.splice(0,16));return ki.reset(),Pn}_f(ki,$n,Pn,Kn){return ki<=19?$n&Pn|~$n&Kn:ki<=39?$n^Pn^Kn:ki<=59?$n&Pn|$n&Kn|Pn&Kn:ki<=79?$n^Pn^Kn:void 0}_S(ki,$n){return $n<<ki|$n>>>32-ki}_block(ki){const $n=this,Pn=$n._h,Kn=Array(80);for(let jn=0;jn<16;jn++)Kn[jn]=ki[jn];let oi=Pn[0],Mn=Pn[1],ti=Pn[2],In=Pn[3],Ln=Pn[4];for(let jn=0;jn<=79;jn++){jn>=16&&(Kn[jn]=$n._S(1,Kn[jn-3]^Kn[jn-8]^Kn[jn-14]^Kn[jn-16]));const Cn=$n._S(5,oi)+$n._f(jn,Mn,ti,In)+Ln+Kn[jn]+$n._key[Math.floor(jn/20)]|0;Ln=In,In=ti,ti=$n._S(30,Mn),Mn=oi,oi=Cn}Pn[0]=Pn[0]+oi|0,Pn[1]=Pn[1]+Mn|0,Pn[2]=Pn[2]+ti|0,Pn[3]=Pn[3]+In|0,Pn[4]=Pn[4]+Ln|0}}},ce={aes:class{constructor(ki){const $n=this;$n._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],$n._tables[0][0][0]||$n._precompute();const Pn=$n._tables[0][4],Kn=$n._tables[1],oi=ki.length;let Mn,ti,In,Ln=1;if(oi!==4&&oi!==6&&oi!==8)throw new Error("invalid aes key size");for($n._key=[ti=ki.slice(0),In=[]],Mn=oi;Mn<4*oi+28;Mn++){let jn=ti[Mn-1];(Mn%oi==0||oi===8&&Mn%oi==4)&&(jn=Pn[jn>>>24]<<24^Pn[jn>>16&255]<<16^Pn[jn>>8&255]<<8^Pn[255&jn],Mn%oi==0&&(jn=jn<<8^jn>>>24^Ln<<24,Ln=Ln<<1^283*(Ln>>7))),ti[Mn]=ti[Mn-oi]^jn}for(let jn=0;Mn;jn++,Mn--){const Cn=ti[3&jn?Mn:Mn-4];In[jn]=Mn<=4||jn<4?Cn:Kn[0][Pn[Cn>>>24]]^Kn[1][Pn[Cn>>16&255]]^Kn[2][Pn[Cn>>8&255]]^Kn[3][Pn[255&Cn]]}}encrypt(ki){return this._crypt(ki,0)}decrypt(ki){return this._crypt(ki,1)}_precompute(){const ki=this._tables[0],$n=this._tables[1],Pn=ki[4],Kn=$n[4],oi=[],Mn=[];let ti,In,Ln,jn;for(let Cn=0;Cn<256;Cn++)Mn[(oi[Cn]=Cn<<1^283*(Cn>>7))^Cn]=Cn;for(let Cn=ti=0;!Pn[Cn];Cn^=In||1,ti=Mn[ti]||1){let Tn=ti^ti<<1^ti<<2^ti<<3^ti<<4;Tn=Tn>>8^255&Tn^99,Pn[Cn]=Tn,Kn[Tn]=Cn,jn=oi[Ln=oi[In=oi[Cn]]];let Rn=16843009*jn^65537*Ln^257*In^16843008*Cn,ui=257*oi[Tn]^16843008*Tn;for(let si=0;si<4;si++)ki[si][Cn]=ui=ui<<24^ui>>>8,$n[si][Tn]=Rn=Rn<<24^Rn>>>8}for(let Cn=0;Cn<5;Cn++)ki[Cn]=ki[Cn].slice(0),$n[Cn]=$n[Cn].slice(0)}_crypt(ki,$n){if(ki.length!==4)throw new Error("invalid aes block size");const Pn=this._key[$n],Kn=Pn.length/4-2,oi=[0,0,0,0],Mn=this._tables[$n],ti=Mn[0],In=Mn[1],Ln=Mn[2],jn=Mn[3],Cn=Mn[4];let Tn,Rn,ui,si=ki[0]^Pn[0],ei=ki[$n?3:1]^Pn[1],Bn=ki[2]^Pn[2],Nn=ki[$n?1:3]^Pn[3],Hn=4;for(let On=0;On<Kn;On++)Tn=ti[si>>>24]^In[ei>>16&255]^Ln[Bn>>8&255]^jn[255&Nn]^Pn[Hn],Rn=ti[ei>>>24]^In[Bn>>16&255]^Ln[Nn>>8&255]^jn[255&si]^Pn[Hn+1],ui=ti[Bn>>>24]^In[Nn>>16&255]^Ln[si>>8&255]^jn[255&ei]^Pn[Hn+2],Nn=ti[Nn>>>24]^In[si>>16&255]^Ln[ei>>8&255]^jn[255&Bn]^Pn[Hn+3],Hn+=4,si=Tn,ei=Rn,Bn=ui;for(let On=0;On<4;On++)oi[$n?3&-On:On]=Cn[si>>>24]<<24^Cn[ei>>16&255]<<16^Cn[Bn>>8&255]<<8^Cn[255&Nn]^Pn[Hn++],Tn=si,si=ei,ei=Bn,Bn=Nn,Nn=Tn;return oi}}},ue={getRandomValues(ki){const $n=new Uint32Array(ki.buffer),Pn=Kn=>{let oi=987654321;const Mn=4294967295;return function(){return oi=36969*(65535&oi)+(oi>>16)&Mn,(((oi<<16)+(Kn=18e3*(65535&Kn)+(Kn>>16)&Mn)&Mn)/4294967296+.5)*(Math.random()>.5?1:-1)}};for(let Kn,oi=0;oi<ki.length;oi+=4){const Mn=Pn(4294967296*(Kn||Math.random()));Kn=987654071*Mn(),$n[oi/4]=4294967296*Mn()|0}return ki}},de={ctrGladman:class{constructor(ki,$n){this._prf=ki,this._initIv=$n,this._iv=$n}reset(){this._iv=this._initIv}update(ki){return this.calculate(this._prf,ki,this._iv)}incWord(ki){if((ki>>24&255)==255){let $n=ki>>16&255,Pn=ki>>8&255,Kn=255&ki;$n===255?($n=0,Pn===255?(Pn=0,Kn===255?Kn=0:++Kn):++Pn):++$n,ki=0,ki+=$n<<16,ki+=Pn<<8,ki+=Kn}else ki+=1<<24;return ki}incCounter(ki){(ki[0]=this.incWord(ki[0]))===0&&(ki[1]=this.incWord(ki[1]))}calculate(ki,$n,Pn){let Kn;if(!(Kn=$n.length))return[];const oi=se.bitLength($n);for(let Mn=0;Mn<Kn;Mn+=4){this.incCounter(Pn);const ti=ki.encrypt(Pn);$n[Mn]^=ti[0],$n[Mn+1]^=ti[1],$n[Mn+2]^=ti[2],$n[Mn+3]^=ti[3]}return se.clamp($n,oi)}}},fe={importKey:ki=>new fe.hmacSha1(oe.bytes.toBits(ki)),pbkdf2(ki,$n,Pn,Kn){if(Pn=Pn||1e4,Kn<0||Pn<0)throw new Error("invalid params to pbkdf2");const oi=1+(Kn>>5)<<2;let Mn,ti,In,Ln,jn;const Cn=new ArrayBuffer(oi),Tn=new DataView(Cn);let Rn=0;const ui=se;for($n=oe.bytes.toBits($n),jn=1;Rn<(oi||1);jn++){for(Mn=ti=ki.encrypt(ui.concat($n,[jn])),In=1;In<Pn;In++)for(ti=ki.encrypt(ti),Ln=0;Ln<ti.length;Ln++)Mn[Ln]^=ti[Ln];for(In=0;Rn<(oi||1)&&In<Mn.length;In++)Tn.setInt32(Rn,Mn[In]),Rn+=4}return Cn.slice(0,Kn/8)},hmacSha1:class{constructor(ki){const $n=this,Pn=$n._hash=le.sha1,Kn=[[],[]];$n._baseHash=[new Pn,new Pn];const oi=$n._baseHash[0].blockSize/32;ki.length>oi&&(ki=new Pn().update(ki).finalize());for(let Mn=0;Mn<oi;Mn++)Kn[0][Mn]=909522486^ki[Mn],Kn[1][Mn]=1549556828^ki[Mn];$n._baseHash[0].update(Kn[0]),$n._baseHash[1].update(Kn[1]),$n._resultHash=new Pn($n._baseHash[0])}reset(){const ki=this;ki._resultHash=new ki._hash(ki._baseHash[0]),ki._updated=!1}update(ki){this._updated=!0,this._resultHash.update(ki)}digest(){const ki=this,$n=ki._resultHash.finalize(),Pn=new ki._hash(ki._baseHash[1]).update($n).finalize();return ki.reset(),Pn}encrypt(ki){if(this._updated)throw new Error("encrypt on already updated hmac called!");return this.update(ki),this.digest(ki)}}},he=typeof crypto<"u"&&typeof crypto.getRandomValues=="function",_e="Invalid password",we="Invalid signature",be="zipjs-abort-check-password";function pe(ki){return he?crypto.getRandomValues(ki):ue.getRandomValues(ki)}const me=16,ge="raw",ye={name:"PBKDF2"},xe=Object.assign({hash:{name:"HMAC"}},ye),ke=Object.assign({iterations:1e3,hash:{name:"SHA-1"}},ye),ve=["deriveBits"],Se=[8,12,16],ze=[16,24,32],Ae=10,Ue=[0,0,0,0],De="undefined",Ee="function",Fe=typeof crypto!=De,Oe=Fe&&crypto.subtle,Te=Fe&&typeof Oe!=De,We=oe.bytes,Ce=ce.aes,je=de.ctrGladman,Me=fe.hmacSha1;let Le=Fe&&Te&&typeof Oe.importKey==Ee,Pe=Fe&&Te&&typeof Oe.deriveBits==Ee;class Re extends TransformStream{constructor({password:$n,signed:Pn,encryptionStrength:Kn,checkPasswordOnly:oi}){super({start(){Object.assign(this,{ready:new Promise(Mn=>this.resolveReady=Mn),password:$n,signed:Pn,strength:Kn-1,pending:new Uint8Array})},async transform(Mn,ti){const In=this,{password:Ln,strength:jn,resolveReady:Cn,ready:Tn}=In;Ln?(await async function(ui,si,ei,Bn){const Nn=await Ne(ui,si,ei,qe(Bn,0,Se[si])),Hn=qe(Bn,Se[si]);if(Nn[0]!=Hn[0]||Nn[1]!=Hn[1])throw new Error(_e)}(In,jn,Ln,qe(Mn,0,Se[jn]+2)),Mn=qe(Mn,Se[jn]+2),oi?ti.error(new Error(be)):Cn()):await Tn;const Rn=new Uint8Array(Mn.length-Ae-(Mn.length-Ae)%me);ti.enqueue(Ie(In,Mn,Rn,0,Ae,!0))},async flush(Mn){const{signed:ti,ctr:In,hmac:Ln,pending:jn,ready:Cn}=this;if(Ln&&In){await Cn;const Tn=qe(jn,0,jn.length-Ae),Rn=qe(jn,jn.length-Ae);let ui=new Uint8Array;if(Tn.length){const si=Ke(We,Tn);Ln.update(si);const ei=In.update(si);ui=He(We,ei)}if(ti){const si=qe(He(We,Ln.digest()),0,Ae);for(let ei=0;ei<Ae;ei++)if(si[ei]!=Rn[ei])throw new Error(we)}Mn.enqueue(ui)}}})}}class Be extends TransformStream{constructor({password:$n,encryptionStrength:Pn}){let Kn;super({start(){Object.assign(this,{ready:new Promise(oi=>this.resolveReady=oi),password:$n,strength:Pn-1,pending:new Uint8Array})},async transform(oi,Mn){const ti=this,{password:In,strength:Ln,resolveReady:jn,ready:Cn}=ti;let Tn=new Uint8Array;In?(Tn=await async function(ui,si,ei){const Bn=pe(new Uint8Array(Se[si])),Nn=await Ne(ui,si,ei,Bn);return Ve(Bn,Nn)}(ti,Ln,In),jn()):await Cn;const Rn=new Uint8Array(Tn.length+oi.length-oi.length%me);Rn.set(Tn,0),Mn.enqueue(Ie(ti,oi,Rn,Tn.length,0))},async flush(oi){const{ctr:Mn,hmac:ti,pending:In,ready:Ln}=this;if(ti&&Mn){await Ln;let jn=new Uint8Array;if(In.length){const Cn=Mn.update(Ke(We,In));ti.update(Cn),jn=He(We,Cn)}Kn.signature=He(We,ti.digest()).slice(0,Ae),oi.enqueue(Ve(jn,Kn.signature))}}}),Kn=this}}function Ie(ki,$n,Pn,Kn,oi,Mn){const{ctr:ti,hmac:In,pending:Ln}=ki,jn=$n.length-oi;let Cn;for(Ln.length&&($n=Ve(Ln,$n),Pn=function(Tn,Rn){if(Rn&&Rn>Tn.length){const ui=Tn;(Tn=new Uint8Array(Rn)).set(ui,0)}return Tn}(Pn,jn-jn%me)),Cn=0;Cn<=jn-me;Cn+=me){const Tn=Ke(We,qe($n,Cn,Cn+me));Mn&&In.update(Tn);const Rn=ti.update(Tn);Mn||In.update(Rn),Pn.set(He(We,Rn),Cn+Kn)}return ki.pending=qe($n,Cn),Pn}async function Ne(ki,$n,Pn,Kn){ki.password=null;const oi=function(Tn){if(typeof TextEncoder>"u"){Tn=unescape(encodeURIComponent(Tn));const Rn=new Uint8Array(Tn.length);for(let ui=0;ui<Rn.length;ui++)Rn[ui]=Tn.charCodeAt(ui);return Rn}return new TextEncoder().encode(Tn)}(Pn),Mn=await async function(Tn,Rn,ui,si,ei){if(!Le)return fe.importKey(Rn);try{return await Oe.importKey(Tn,Rn,ui,si,ei)}catch{return Le=!1,fe.importKey(Rn)}}(ge,oi,xe,!1,ve),ti=await async function(Tn,Rn,ui){if(!Pe)return fe.pbkdf2(Rn,Tn.salt,ke.iterations,ui);try{return await Oe.deriveBits(Tn,Rn,ui)}catch{return Pe=!1,fe.pbkdf2(Rn,Tn.salt,ke.iterations,ui)}}(Object.assign({salt:Kn},ke),Mn,8*(2*ze[$n]+2)),In=new Uint8Array(ti),Ln=Ke(We,qe(In,0,ze[$n])),jn=Ke(We,qe(In,ze[$n],2*ze[$n])),Cn=qe(In,2*ze[$n]);return Object.assign(ki,{keys:{key:Ln,authentication:jn,passwordVerification:Cn},ctr:new je(new Ce(Ln),Array.from(Ue)),hmac:new Me(jn)}),Cn}function Ve(ki,$n){let Pn=ki;return ki.length+$n.length&&(Pn=new Uint8Array(ki.length+$n.length),Pn.set(ki,0),Pn.set($n,ki.length)),Pn}function qe(ki,$n,Pn){return ki.subarray($n,Pn)}function He(ki,$n){return ki.fromBits($n)}function Ke(ki,$n){return ki.toBits($n)}const Ze=12;class Ge extends TransformStream{constructor({password:$n,passwordVerification:Pn,checkPasswordOnly:Kn}){super({start(){Object.assign(this,{password:$n,passwordVerification:Pn}),Ye(this,$n)},transform(oi,Mn){const ti=this;if(ti.password){const In=Qe(ti,oi.subarray(0,Ze));if(ti.password=null,In[11]!=ti.passwordVerification)throw new Error(_e);oi=oi.subarray(Ze)}Kn?Mn.error(new Error(be)):Mn.enqueue(Qe(ti,oi))}})}}class Je extends TransformStream{constructor({password:$n,passwordVerification:Pn}){super({start(){Object.assign(this,{password:$n,passwordVerification:Pn}),Ye(this,$n)},transform(Kn,oi){const Mn=this;let ti,In;if(Mn.password){Mn.password=null;const Ln=pe(new Uint8Array(Ze));Ln[11]=Mn.passwordVerification,ti=new Uint8Array(Kn.length+Ln.length),ti.set(Xe(Mn,Ln),0),In=Ze}else ti=new Uint8Array(Kn.length),In=0;ti.set(Xe(Mn,Kn),In),oi.enqueue(ti)}})}}function Qe(ki,$n){const Pn=new Uint8Array($n.length);for(let Kn=0;Kn<$n.length;Kn++)Pn[Kn]=et(ki)^$n[Kn],$e(ki,Pn[Kn]);return Pn}function Xe(ki,$n){const Pn=new Uint8Array($n.length);for(let Kn=0;Kn<$n.length;Kn++)Pn[Kn]=et(ki)^$n[Kn],$e(ki,$n[Kn]);return Pn}function Ye(ki,$n){const Pn=[305419896,591751049,878082192];Object.assign(ki,{keys:Pn,crcKey0:new re(Pn[0]),crcKey2:new re(Pn[2])});for(let Kn=0;Kn<$n.length;Kn++)$e(ki,$n.charCodeAt(Kn))}function $e(ki,$n){let[Pn,Kn,oi]=ki.keys;ki.crcKey0.append([$n]),Pn=~ki.crcKey0.get(),Kn=nt(Math.imul(nt(Kn+tt(Pn)),134775813)+1),ki.crcKey2.append([Kn>>>24]),oi=~ki.crcKey2.get(),ki.keys=[Pn,Kn,oi]}function et(ki){const $n=2|ki.keys[2];return tt(Math.imul($n,1^$n)>>>8)}function tt(ki){return 255&ki}function nt(ki){return 4294967295&ki}const it="deflate-raw";class rt extends TransformStream{constructor($n,{chunkSize:Pn,CompressionStream:Kn,CompressionStreamNative:oi}){super({});const{compressed:Mn,encrypted:ti,useCompressionStream:In,zipCrypto:Ln,signed:jn,level:Cn}=$n,Tn=this;let Rn,ui,si=st(super.readable);ti&&!Ln||!jn||(Rn=new ae,si=ct(si,Rn)),Mn&&(si=lt(si,In,{level:Cn,chunkSize:Pn},oi,Kn)),ti&&(Ln?si=ct(si,new Je($n)):(ui=new Be($n),si=ct(si,ui))),ot(Tn,si,()=>{let ei;ti&&!Ln&&(ei=ui.signature),ti&&!Ln||!jn||(ei=new DataView(Rn.value.buffer).getUint32(0)),Tn.signature=ei})}}class at extends TransformStream{constructor($n,{chunkSize:Pn,DecompressionStream:Kn,DecompressionStreamNative:oi}){super({});const{zipCrypto:Mn,encrypted:ti,signed:In,signature:Ln,compressed:jn,useCompressionStream:Cn}=$n;let Tn,Rn,ui=st(super.readable);ti&&(Mn?ui=ct(ui,new Ge($n)):(Rn=new Re($n),ui=ct(ui,Rn))),jn&&(ui=lt(ui,Cn,{chunkSize:Pn},oi,Kn)),ti&&!Mn||!In||(Tn=new ae,ui=ct(ui,Tn)),ot(this,ui,()=>{if((!ti||Mn)&&In){const si=new DataView(Tn.value.buffer);if(Ln!=si.getUint32(0,!1))throw new Error(we)}})}}function st(ki){return ct(ki,new TransformStream({transform($n,Pn){$n&&$n.length&&Pn.enqueue($n)}}))}function ot(ki,$n,Pn){$n=ct($n,new TransformStream({flush:Pn})),Object.defineProperty(ki,"readable",{get:()=>$n})}function lt(ki,$n,Pn,Kn,oi){try{ki=ct(ki,new($n&&Kn?Kn:oi)(it,Pn))}catch(Mn){if(!$n)throw Mn;ki=ct(ki,new oi(it,Pn))}return ki}function ct(ki,$n){return ki.pipeThrough($n)}const ut="message",dt="start",ft="pull",ht="data",_t="ack",wt="close",bt="inflate";class pt extends TransformStream{constructor($n,Pn){super({});const Kn=this,{codecType:oi}=$n;let Mn;oi.startsWith("deflate")?Mn=rt:oi.startsWith(bt)&&(Mn=at);let ti=0;const In=new Mn($n,Pn),Ln=super.readable,jn=new TransformStream({transform(Cn,Tn){Cn&&Cn.length&&(ti+=Cn.length,Tn.enqueue(Cn))},flush(){const{signature:Cn}=In;Object.assign(Kn,{signature:Cn,size:ti})}});Object.defineProperty(Kn,"readable",{get:()=>Ln.pipeThrough(In).pipeThrough(jn)})}}const mt=typeof Worker!=J;class gt{constructor($n,{readable:Pn,writable:Kn},{options:oi,config:Mn,streamOptions:ti,useWebWorkers:In,transferStreams:Ln,scripts:jn},Cn){const{signal:Tn}=ti;return Object.assign($n,{busy:!0,readable:Pn.pipeThrough(new yt(Pn,ti,Mn),{signal:Tn}),writable:Kn,options:Object.assign({},oi),scripts:jn,transferStreams:Ln,terminate(){const{worker:Rn,busy:ui}=$n;Rn&&!ui&&(Rn.terminate(),$n.interface=null)},onTaskFinished(){$n.busy=!1,Cn($n)}}),(In&&mt?vt:kt)($n,Mn)}}class yt extends TransformStream{constructor($n,{onstart:Pn,onprogress:Kn,size:oi,onend:Mn},{chunkSize:ti}){let In=0;super({start(){Pn&&xt(Pn,oi)},async transform(Ln,jn){In+=Ln.length,Kn&&await xt(Kn,In,oi),jn.enqueue(Ln)},flush(){$n.size=In,Mn&&xt(Mn,In)}},{highWaterMark:1,size:()=>ti})}}async function xt(ki,...$n){try{await ki(...$n)}catch{}}function kt(ki,$n){return{run:()=>async function({options:Pn,readable:Kn,writable:oi,onTaskFinished:Mn},ti){const In=new pt(Pn,ti);try{await Kn.pipeThrough(In).pipeTo(oi,{preventClose:!0,preventAbort:!0});const{signature:Ln,size:jn}=In;return{signature:Ln,size:jn}}finally{Mn()}}(ki,$n)}}function vt(ki,{baseURL:$n,chunkSize:Pn}){return ki.interface||Object.assign(ki,{worker:At(ki.scripts[0],$n,ki),interface:{run:()=>async function(Kn,oi){let Mn,ti;const In=new Promise((ei,Bn)=>{Mn=ei,ti=Bn});Object.assign(Kn,{reader:null,writer:null,resolveResult:Mn,rejectResult:ti,result:In});const{readable:Ln,options:jn,scripts:Cn}=Kn,{writable:Tn,closed:Rn}=function(ei){const Bn=ei.getWriter();let Nn;const Hn=new Promise(hi=>Nn=hi);return{writable:new WritableStream({async write(hi){await Bn.ready,await Bn.write(hi)},close(){Bn.releaseLock(),Nn()},abort:hi=>Bn.abort(hi)}),closed:Hn}}(Kn.writable);Ut({type:dt,scripts:Cn.slice(1),options:jn,config:oi,readable:Ln,writable:Tn},Kn)||Object.assign(Kn,{reader:Ln.getReader(),writer:Tn.getWriter()});const si=await In;try{await Tn.getWriter().close()}catch{}return await Rn,si}(ki,{chunkSize:Pn})}}),ki.interface}let St=!0,zt=!0;function At(ki,$n,Pn){const Kn={type:"module"};let oi,Mn;typeof ki==Q&&(ki=ki());try{oi=new URL(ki,$n)}catch{oi=ki}if(St)try{Mn=new Worker(oi)}catch{St=!1,Mn=new Worker(oi,Kn)}else Mn=new Worker(oi,Kn);return Mn.addEventListener(ut,ti=>async function({data:In},Ln){const{type:jn,value:Cn,messageId:Tn,result:Rn,error:ui}=In,{reader:si,writer:ei,resolveResult:Bn,rejectResult:Nn,onTaskFinished:Hn}=Ln;try{if(ui){const{message:hi,stack:Xn,code:ii,name:ri}=ui,di=new Error(hi);Object.assign(di,{stack:Xn,code:ii,name:ri}),On(di)}else{if(jn==ft){const{value:hi,done:Xn}=await si.read();Ut({type:ht,value:hi,done:Xn,messageId:Tn},Ln)}jn==ht&&(await ei.ready,await ei.write(new Uint8Array(Cn)),Ut({type:_t,messageId:Tn},Ln)),jn==wt&&On(null,Rn)}}catch(hi){On(hi)}function On(hi,Xn){hi?Nn(hi):Bn(Xn),ei&&ei.releaseLock(),Hn()}}(ti,Pn)),Mn}function Ut(ki,{worker:$n,writer:Pn,onTaskFinished:Kn,transferStreams:oi}){try{let{value:Mn,readable:ti,writable:In}=ki;const Ln=[];if(Mn&&(ki.value=Mn.buffer,Ln.push(ki.value)),oi&&zt?(ti&&Ln.push(ti),In&&Ln.push(In)):ki.readable=ki.writable=null,Ln.length)try{return $n.postMessage(ki,Ln),!0}catch{zt=!1,ki.readable=ki.writable=null,$n.postMessage(ki)}else $n.postMessage(ki)}catch(Mn){throw Pn&&Pn.releaseLock(),Kn(),Mn}}let Dt=[];const Et=[];let Ft=0;function Ot(ki){const{terminateTimeout:$n}=ki;$n&&(clearTimeout($n),ki.terminateTimeout=null)}const Tt=65536,Wt="writable";class Ct{constructor(){this.size=0}init(){this.initialized=!0}}class jt extends Ct{get readable(){const $n=this,{chunkSize:Pn=Tt}=$n,Kn=new ReadableStream({start(){this.chunkOffset=0},async pull(oi){const{offset:Mn=0,size:ti,diskNumberStart:In}=Kn,{chunkOffset:Ln}=this;oi.enqueue(await Vt($n,Mn+Ln,Math.min(Pn,ti-Ln),In)),Ln+Pn>ti?oi.close():this.chunkOffset+=Pn}});return Kn}}class Mt extends jt{constructor($n){super(),Object.assign(this,{blob:$n,size:$n.size})}async readUint8Array($n,Pn){const Kn=this,oi=$n+Pn;let ti=await($n||oi<Kn.size?Kn.blob.slice($n,oi):Kn.blob).arrayBuffer();return ti.byteLength>Pn&&(ti=ti.slice($n,oi)),new Uint8Array(ti)}}class Lt extends Ct{constructor($n){super();const Pn=new TransformStream,Kn=[];$n&&Kn.push(["Content-Type",$n]),Object.defineProperty(this,Wt,{get:()=>Pn.writable}),this.blob=new Response(Pn.readable,{headers:Kn}).blob()}getData(){return this.blob}}class Pt extends Lt{constructor($n){super($n),Object.assign(this,{encoding:$n,utf8:!$n||$n.toLowerCase()=="utf-8"})}async getData(){const{encoding:$n,utf8:Pn}=this,Kn=await super.getData();if(Kn.text&&Pn)return Kn.text();{const oi=new FileReader;return new Promise((Mn,ti)=>{Object.assign(oi,{onload:({target:In})=>Mn(In.result),onerror:()=>ti(oi.error)}),oi.readAsText(Kn,$n)})}}}class Rt extends jt{constructor($n){super(),this.readers=$n}async init(){const $n=this,{readers:Pn}=$n;$n.lastDiskNumber=0,$n.lastDiskOffset=0,await Promise.all(Pn.map(async(Kn,oi)=>{await Kn.init(),oi!=Pn.length-1&&($n.lastDiskOffset+=Kn.size),$n.size+=Kn.size})),super.init()}async readUint8Array($n,Pn,Kn=0){const oi=this,{readers:Mn}=this;let ti,In=Kn;In==-1&&(In=Mn.length-1);let Ln=$n;for(;Ln>=Mn[In].size;)Ln-=Mn[In].size,In++;const jn=Mn[In],Cn=jn.size;if(Ln+Pn<=Cn)ti=await Vt(jn,Ln,Pn);else{const Tn=Cn-Ln;ti=new Uint8Array(Pn),ti.set(await Vt(jn,Ln,Tn)),ti.set(await oi.readUint8Array($n+Tn,Pn-Tn,Kn),Tn)}return oi.lastDiskNumber=Math.max(In,oi.lastDiskNumber),ti}}class Bt extends Ct{constructor($n,Pn=4294967295){super();const Kn=this;let oi,Mn,ti;Object.assign(Kn,{diskNumber:0,diskOffset:0,size:0,maxSize:Pn,availableSize:Pn});const In=new WritableStream({async write(Cn){const{availableSize:Tn}=Kn;if(ti)Cn.length>=Tn?(await Ln(Cn.slice(0,Tn)),await jn(),Kn.diskOffset+=oi.size,Kn.diskNumber++,ti=null,await this.write(Cn.slice(Tn))):await Ln(Cn);else{const{value:Rn,done:ui}=await $n.next();if(ui&&!Rn)throw new Error("Writer iterator completed too soon");oi=Rn,oi.size=0,oi.maxSize&&(Kn.maxSize=oi.maxSize),Kn.availableSize=Kn.maxSize,await It(oi),Mn=Rn.writable,ti=Mn.getWriter(),await this.write(Cn)}},async close(){await ti.ready,await jn()}});async function Ln(Cn){const Tn=Cn.length;Tn&&(await ti.ready,await ti.write(Cn),oi.size+=Tn,Kn.size+=Tn,Kn.availableSize-=Tn)}async function jn(){Mn.size=oi.size,await ti.close()}Object.defineProperty(Kn,Wt,{get:()=>In})}}async function It(ki,$n){ki.init&&!ki.initialized&&await ki.init($n)}function Nt(ki){return Array.isArray(ki)&&(ki=new Rt(ki)),ki instanceof ReadableStream&&(ki={readable:ki}),ki}function Vt(ki,$n,Pn,Kn){return ki.readUint8Array($n,Pn,Kn)}const qt="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ".split(""),Ht=qt.length==256;function Kt(ki,$n){return $n&&$n.trim().toLowerCase()=="cp437"?function(Pn){if(Ht){let Kn="";for(let oi=0;oi<Pn.length;oi++)Kn+=qt[Pn[oi]];return Kn}return new TextDecoder().decode(Pn)}(ki):new TextDecoder($n).decode(ki)}const Zt="filename",Gt="rawFilename",Jt="comment",Qt="rawComment",Xt="uncompressedSize",Yt="compressedSize",$t="offset",en="diskNumberStart",tn="lastModDate",nn="rawLastModDate",rn="lastAccessDate",an="rawLastAccessDate",sn="creationDate",on="rawCreationDate",ln=[Zt,Gt,Yt,Xt,tn,nn,Jt,Qt,rn,sn,$t,en,en,"internalFileAttribute","externalFileAttribute","msDosCompatible","zip64","directory","bitFlag","encrypted","signature","filenameUTF8","commentUTF8","compressionMethod","version","versionMadeBy","extraField","rawExtraField","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","extraFieldNTFS","extraFieldExtendedTimestamp"];class cn{constructor($n){ln.forEach(Pn=>this[Pn]=$n[Pn])}}const un="File format is not recognized",dn="Zip64 extra field not found",fn="Compression method not supported",hn="Split zip file",_n="utf-8",wn="cp437",bn=[[Xt,V],[Yt,V],[$t,V],[en,q]],pn={[q]:{getValue:Dn,bytes:4},[V]:{getValue:En,bytes:8}};class mn{constructor($n,Pn={}){Object.assign(this,{reader:Nt($n),options:Pn,config:ee})}async*getEntriesGenerator($n={}){const Pn=this;let{reader:Kn}=Pn;const{config:oi}=Pn;if(await It(Kn),Kn.size!==G&&Kn.readUint8Array||(Kn=new Mt(await new Response(Kn.readable).blob()),await It(Kn)),Kn.size<22)throw new Error(un);Kn.chunkSize=function(wi){return Math.max(wi.chunkSize,64)}(oi);const Mn=await async function(wi,Jn,pi,Zn,Gn){const mi=new Uint8Array(4);(function(li,Ai,gi){li.setUint32(Ai,gi,!0)})(Fn(mi),0,Jn);const Wn=Zn+Gn;return await ni(Zn)||await ni(Math.min(Wn,pi));async function ni(li){const Ai=pi-li,gi=await Vt(wi,Ai,li);for(let yi=gi.length-Zn;yi>=0;yi--)if(gi[yi]==mi[0]&&gi[yi+1]==mi[1]&&gi[yi+2]==mi[2]&&gi[yi+3]==mi[3])return{offset:Ai+yi,buffer:gi.slice(yi,yi+Zn).buffer}}}(Kn,101010256,Kn.size,22,1048560);if(!Mn)throw Dn(Fn(await Vt(Kn,0,4)))==134695760?new Error(hn):new Error("End of central directory not found");const ti=Fn(Mn);let In=Dn(ti,12),Ln=Dn(ti,16);const jn=Mn.offset,Cn=Un(ti,20),Tn=jn+22+Cn;let Rn=Un(ti,4);const ui=Kn.lastDiskNumber||0;let si=Un(ti,6),ei=Un(ti,8),Bn=0,Nn=0;if(Ln==V||In==V||ei==q||si==q){const wi=Fn(await Vt(Kn,Mn.offset-20,20));if(Dn(wi,0)!=117853008)throw new Error("End of Zip64 central directory not found");Ln=En(wi,8);let Jn=await Vt(Kn,Ln,56,-1),pi=Fn(Jn);const Zn=Mn.offset-20-56;if(Dn(pi,0)!=K&&Ln!=Zn){const Gn=Ln;Ln=Zn,Bn=Ln-Gn,Jn=await Vt(Kn,Ln,56,-1),pi=Fn(Jn)}if(Dn(pi,0)!=K)throw new Error("End of Zip64 central directory locator not found");Rn==q&&(Rn=Dn(pi,16)),si==q&&(si=Dn(pi,20)),ei==q&&(ei=En(pi,32)),In==V&&(In=En(pi,40)),Ln-=In}if(ui!=Rn)throw new Error(hn);if(Ln<0||Ln>=Kn.size)throw new Error(un);let Hn=0,On=await Vt(Kn,Ln,In,si),hi=Fn(On);if(In){const wi=Mn.offset-In;if(Dn(hi,Hn)!=H&&Ln!=wi){const Jn=Ln;Ln=wi,Bn=Ln-Jn,On=await Vt(Kn,Ln,In,si),hi=Fn(On)}}const Xn=Mn.offset-Ln-(Kn.lastDiskOffset||0);if(In!=Xn&&Xn>=0&&(In=Xn,On=await Vt(Kn,Ln,In,si),hi=Fn(On)),Ln<0||Ln>=Kn.size)throw new Error(un);const ii=vn(Pn,$n,"filenameEncoding"),ri=vn(Pn,$n,"commentEncoding");for(let wi=0;wi<ei;wi++){const Jn=new gn(Kn,oi,Pn.options);if(Dn(hi,Hn)!=H)throw new Error("Central directory header not found");yn(Jn,hi,Hn+6);const pi=!!Jn.bitFlag.languageEncodingFlag,Zn=Hn+46,Gn=Zn+Jn.filenameLength,mi=Gn+Jn.extraFieldLength,Wn=Un(hi,Hn+4),ni=(0&Wn)==0,li=On.subarray(Zn,Gn),Ai=Un(hi,Hn+32),gi=mi+Ai,yi=On.subarray(mi,gi),Ii=pi,xi=pi,Qn=ni&&(16&An(hi,Hn+38))==16,ai=Dn(hi,Hn+42)+Bn;Object.assign(Jn,{versionMadeBy:Wn,msDosCompatible:ni,compressedSize:0,uncompressedSize:0,commentLength:Ai,directory:Qn,offset:ai,diskNumberStart:Un(hi,Hn+34),internalFileAttribute:Un(hi,Hn+36),externalFileAttribute:Dn(hi,Hn+38),rawFilename:li,filenameUTF8:Ii,commentUTF8:xi,rawExtraField:On.subarray(Gn,mi)});const[Vn,Yn]=await Promise.all([Kt(li,Ii?_n:ii||wn),Kt(yi,xi?_n:ri||wn)]);Object.assign(Jn,{rawComment:yi,filename:Vn,comment:Yn,directory:Qn||Vn.endsWith("/")}),Nn=Math.max(ai,Nn),await xn(Jn,Jn,hi,Hn+6);const ci=new cn(Jn);ci.getData=(Ci,Fi)=>Jn.getData(Ci,ci,Fi),Hn=gi;const{onprogress:bi}=$n;if(bi)try{await bi(wi+1,ei,new cn(Jn))}catch{}yield ci}const di=vn(Pn,$n,"extractPrependedData"),fi=vn(Pn,$n,"extractAppendedData");return di&&(Pn.prependedData=Nn>0?await Vt(Kn,0,Nn):new Uint8Array),Pn.comment=Cn?await Vt(Kn,jn+22,Cn):new Uint8Array,fi&&(Pn.appendedData=Tn<Kn.size?await Vt(Kn,Tn,Kn.size-Tn):new Uint8Array),!0}async getEntries($n={}){const Pn=[];for await(const Kn of this.getEntriesGenerator($n))Pn.push(Kn);return Pn}async close(){}}class gn{constructor($n,Pn,Kn){Object.assign(this,{reader:$n,config:Pn,options:Kn})}async getData($n,Pn,Kn={}){const oi=this,{reader:Mn,offset:ti,diskNumberStart:In,extraFieldAES:Ln,compressionMethod:jn,config:Cn,bitFlag:Tn,signature:Rn,rawLastModDate:ui,uncompressedSize:si,compressedSize:ei}=oi,Bn=Pn.localDirectory={},Nn=Fn(await Vt(Mn,ti,30,In));let Hn=vn(oi,Kn,"password");if(Hn=Hn&&Hn.length&&Hn,Ln&&Ln.originalCompressionMethod!=99)throw new Error(fn);if(jn!=0&&jn!=8)throw new Error(fn);if(Dn(Nn,0)!=67324752)throw new Error("Local file header not found");yn(Bn,Nn,4),Bn.rawExtraField=Bn.extraFieldLength?await Vt(Mn,ti+30+Bn.filenameLength,Bn.extraFieldLength,In):new Uint8Array,await xn(oi,Bn,Nn,4,!0),Object.assign(Pn,{lastAccessDate:Bn.lastAccessDate,creationDate:Bn.creationDate});const On=oi.encrypted&&Bn.encrypted,hi=On&&!Ln;if(On){if(!hi&&Ln.strength===G)throw new Error("Encryption method not supported");if(!Hn)throw new Error("File contains encrypted entry")}const Xn=ti+30+Bn.filenameLength+Bn.extraFieldLength,ii=ei,ri=Mn.readable;Object.assign(ri,{diskNumberStart:In,offset:Xn,size:ii});const di=vn(oi,Kn,"signal"),fi=vn(oi,Kn,"checkPasswordOnly");fi&&($n=new WritableStream),$n=function(Wn){Wn.writable===G&&typeof Wn.next==Q&&(Wn=new Bt(Wn)),Wn instanceof WritableStream&&(Wn={writable:Wn});const{writable:ni}=Wn;return ni.size===G&&(ni.size=0),Wn instanceof Bt||Object.assign(Wn,{diskNumber:0,diskOffset:0,availableSize:1/0,maxSize:1/0}),Wn}($n),await It($n,si);const{writable:wi}=$n,{onstart:Jn,onprogress:pi,onend:Zn}=Kn,Gn={options:{codecType:bt,password:Hn,zipCrypto:hi,encryptionStrength:Ln&&Ln.strength,signed:vn(oi,Kn,"checkSignature"),passwordVerification:hi&&(Tn.dataDescriptor?ui>>>8&255:Rn>>>24&255),signature:Rn,compressed:jn!=0,encrypted:On,useWebWorkers:vn(oi,Kn,"useWebWorkers"),useCompressionStream:vn(oi,Kn,"useCompressionStream"),transferStreams:vn(oi,Kn,"transferStreams"),checkPasswordOnly:fi},config:Cn,streamOptions:{signal:di,size:ii,onstart:Jn,onprogress:pi,onend:Zn}};let mi=0;try{({outputSize:mi}=await async function(Wn,ni){const{options:li,config:Ai}=ni,{transferStreams:gi,useWebWorkers:yi,useCompressionStream:Ii,codecType:xi,compressed:Qn,signed:ai,encrypted:Vn}=li,{workerScripts:Yn,maxWorkers:ci,terminateWorkerTimeout:bi}=Ai;ni.transferStreams=gi||gi===G;const Ci=!(Qn||ai||Vn||ni.transferStreams);let Fi;ni.useWebWorkers=!Ci&&(yi||yi===G&&Ai.useWebWorkers),ni.scripts=ni.useWebWorkers&&Yn?Yn[xi]:[],li.useCompressionStream=Ii||Ii===G&&Ai.useCompressionStream;const zi=Dt.find(ji=>!ji.busy);if(zi)Ot(zi),Fi=new gt(zi,Wn,ni,_i);else if(Dt.length<ci){const ji={indexWorker:Ft};Ft++,Dt.push(ji),Fi=new gt(ji,Wn,ni,_i)}else Fi=await new Promise(ji=>Et.push({resolve:ji,stream:Wn,workerOptions:ni}));return Fi.run();function _i(ji){if(Et.length){const[{resolve:Pi,stream:Ni,workerOptions:Si}]=Et.splice(0,1);Pi(new gt(ji,Ni,Si,_i))}else ji.worker?(Ot(ji),Number.isFinite(bi)&&bi>=0&&(ji.terminateTimeout=setTimeout(()=>{Dt=Dt.filter(Pi=>Pi!=ji),ji.terminate()},bi))):Dt=Dt.filter(Pi=>Pi!=ji)}}({readable:ri,writable:wi},Gn))}catch(Wn){if(!fi||Wn.message!=be)throw Wn}finally{const Wn=vn(oi,Kn,"preventClose");wi.size+=mi,Wn||wi.locked||await wi.getWriter().close()}return fi?void 0:$n.getData?$n.getData():wi}}function yn(ki,$n,Pn){const Kn=ki.rawBitFlag=Un($n,Pn+2),oi=(1&Kn)==1,Mn=Dn($n,Pn+6);Object.assign(ki,{encrypted:oi,version:Un($n,Pn),bitFlag:{level:(6&Kn)>>1,dataDescriptor:(8&Kn)==8,languageEncodingFlag:(2048&Kn)==2048},rawLastModDate:Mn,lastModDate:Sn(Mn),filenameLength:Un($n,Pn+22),extraFieldLength:Un($n,Pn+24)})}async function xn(ki,$n,Pn,Kn,oi){const{rawExtraField:Mn}=$n,ti=$n.extraField=new Map,In=Fn(new Uint8Array(Mn));let Ln=0;try{for(;Ln<Mn.length;){const Nn=Un(In,Ln),Hn=Un(In,Ln+2);ti.set(Nn,{type:Nn,data:Mn.slice(Ln+4,Ln+4+Hn)}),Ln+=4+Hn}}catch{}const jn=Un(Pn,Kn+4);Object.assign($n,{signature:Dn(Pn,Kn+10),uncompressedSize:Dn(Pn,Kn+18),compressedSize:Dn(Pn,Kn+14)});const Cn=ti.get(1);Cn&&(function(Nn,Hn){Hn.zip64=!0;const On=Fn(Nn.data),hi=bn.filter(([Xn,ii])=>Hn[Xn]==ii);for(let Xn=0,ii=0;Xn<hi.length;Xn++){const[ri,di]=hi[Xn];if(Hn[ri]==di){const fi=pn[di];Hn[ri]=Nn[ri]=fi.getValue(On,ii),ii+=fi.bytes}else if(Nn[ri])throw new Error(dn)}}(Cn,$n),$n.extraFieldZip64=Cn);const Tn=ti.get(28789);Tn&&(await kn(Tn,Zt,Gt,$n,ki),$n.extraFieldUnicodePath=Tn);const Rn=ti.get(25461);Rn&&(await kn(Rn,Jt,Qt,$n,ki),$n.extraFieldUnicodeComment=Rn);const ui=ti.get(39169);ui?(function(Nn,Hn,On){const hi=Fn(Nn.data),Xn=An(hi,4);Object.assign(Nn,{vendorVersion:An(hi,0),vendorId:An(hi,2),strength:Xn,originalCompressionMethod:On,compressionMethod:Un(hi,5)}),Hn.compressionMethod=Nn.compressionMethod}(ui,$n,jn),$n.extraFieldAES=ui):$n.compressionMethod=jn;const si=ti.get(10);si&&(function(Nn,Hn){const On=Fn(Nn.data);let hi,Xn=4;try{for(;Xn<Nn.data.length&&!hi;){const ii=Un(On,Xn),ri=Un(On,Xn+2);ii==Z&&(hi=Nn.data.slice(Xn+4,Xn+4+ri)),Xn+=4+ri}}catch{}try{if(hi&&hi.length==24){const ii=Fn(hi),ri=ii.getBigUint64(0,!0),di=ii.getBigUint64(8,!0),fi=ii.getBigUint64(16,!0);Object.assign(Nn,{rawLastModDate:ri,rawLastAccessDate:di,rawCreationDate:fi});const wi=zn(ri),Jn=zn(di),pi={lastModDate:wi,lastAccessDate:Jn,creationDate:zn(fi)};Object.assign(Nn,pi),Object.assign(Hn,pi)}}catch{}}(si,$n),$n.extraFieldNTFS=si);const ei=ti.get(21589);ei&&(function(Nn,Hn,On){const hi=Fn(Nn.data),Xn=An(hi,0),ii=[],ri=[];On?((1&Xn)==1&&(ii.push(tn),ri.push(nn)),(2&Xn)==2&&(ii.push(rn),ri.push(an)),(4&Xn)==4&&(ii.push(sn),ri.push(on))):Nn.data.length>=5&&(ii.push(tn),ri.push(nn));let di=1;ii.forEach((fi,wi)=>{if(Nn.data.length>=di+4){const Jn=Dn(hi,di);Hn[fi]=Nn[fi]=new Date(1e3*Jn);const pi=ri[wi];Nn[pi]=Jn}di+=4})}(ei,$n,oi),$n.extraFieldExtendedTimestamp=ei);const Bn=ti.get(6534);Bn&&($n.extraFieldUSDZ=Bn)}async function kn(ki,$n,Pn,Kn,oi){const Mn=Fn(ki.data),ti=new re;ti.append(oi[Pn]);const In=Fn(new Uint8Array(4));In.setUint32(0,ti.get(),!0);const Ln=Dn(Mn,1);Object.assign(ki,{version:An(Mn,0),[$n]:Kt(ki.data.subarray(5)),valid:!oi.bitFlag.languageEncodingFlag&&Ln==Dn(In,0)}),ki.valid&&(Kn[$n]=ki[$n],Kn[$n+"UTF8"]=!0)}function vn(ki,$n,Pn){return $n[Pn]===G?ki.options[Pn]:$n[Pn]}function Sn(ki){const $n=(4294901760&ki)>>16,Pn=65535&ki;try{return new Date(1980+((65024&$n)>>9),((480&$n)>>5)-1,31&$n,(63488&Pn)>>11,(2016&Pn)>>5,2*(31&Pn),0)}catch{}}function zn(ki){return new Date(Number(ki/BigInt(1e4)-BigInt(116444736e5)))}function An(ki,$n){return ki.getUint8($n)}function Un(ki,$n){return ki.getUint16($n,!0)}function Dn(ki,$n){return ki.getUint32($n,!0)}function En(ki,$n){return Number(ki.getBigUint64($n,!0))}function Fn(ki){return new DataView(ki.buffer)}te({Inflate:function(ki){const $n=new N,Pn=ki&&ki.chunkSize?Math.floor(2*ki.chunkSize):131072,Kn=new Uint8Array(Pn);let oi=!1;$n.inflateInit(),$n.next_out=Kn,this.append=function(Mn,ti){const In=[];let Ln,jn,Cn=0,Tn=0,Rn=0;if(Mn.length!==0){$n.next_in_index=0,$n.next_in=Mn,$n.avail_in=Mn.length;do{if($n.next_out_index=0,$n.avail_out=Pn,$n.avail_in!==0||oi||($n.next_in_index=0,oi=!0),Ln=$n.inflate(0),oi&&Ln===a$1){if($n.avail_in!==0)throw new Error("inflating: bad input")}else if(Ln!==e$1&&Ln!==t$1)throw new Error("inflating: "+$n.msg);if((oi||Ln===t$1)&&$n.avail_in===Mn.length)throw new Error("inflating: bad input");$n.next_out_index&&($n.next_out_index===Pn?In.push(new Uint8Array(Kn)):In.push(Kn.subarray(0,$n.next_out_index))),Rn+=$n.next_out_index,ti&&$n.next_in_index>0&&$n.next_in_index!=Cn&&(ti($n.next_in_index),Cn=$n.next_in_index)}while($n.avail_in>0||$n.avail_out===0);return In.length>1?(jn=new Uint8Array(Rn),In.forEach(function(ui){jn.set(ui,Tn),Tn+=ui.length})):jn=In[0]?new Uint8Array(In[0]):new Uint8Array,jn}},this.flush=function(){$n.inflateEnd()}}});const zip=Object.freeze(Object.defineProperty({__proto__:null,BlobReader:Mt,BlobWriter:Lt,TextWriter:Pt,ZipReader:mn,configure:te},Symbol.toStringTag,{value:"Module"})),NS$1={CONTAINER:"urn:oasis:names:tc:opendocument:xmlns:container",XHTML:"http://www.w3.org/1999/xhtml",OPF:"http://www.idpf.org/2007/opf",EPUB:"http://www.idpf.org/2007/ops",DC:"http://purl.org/dc/elements/1.1/",DCTERMS:"http://purl.org/dc/terms/",ENC:"http://www.w3.org/2001/04/xmlenc#",NCX:"http://www.daisy.org/z3986/2005/ncx/",XLINK:"http://www.w3.org/1999/xlink",SMIL:"http://www.w3.org/ns/SMIL"},MIME$2={XML:"application/xml",NCX:"application/x-dtbncx+xml",XHTML:"application/xhtml+xml",HTML:"text/html",CSS:"text/css",SVG:"image/svg+xml",JS:/\/(x-)?(javascript|ecmascript)/},camel=ki=>ki.toLowerCase().replace(/[-:](.)/g,($n,Pn)=>Pn.toUpperCase()),normalizeWhitespace$1=ki=>ki?ki.replace(/[\t\n\f\r ]+/g," ").replace(/^[\t\n\f\r ]+/,"").replace(/[\t\n\f\r ]+$/,""):"",filterAttribute=(ki,$n,Pn)=>Pn?Kn=>{var oi,Mn;return(Mn=(oi=Kn.getAttribute(ki))==null?void 0:oi.split(/\s/))==null?void 0:Mn.includes($n)}:typeof $n=="function"?Kn=>$n(Kn.getAttribute(ki)):Kn=>Kn.getAttribute(ki)===$n,getAttributes=(...ki)=>$n=>$n?Object.fromEntries(ki.map(Pn=>[camel(Pn),$n.getAttribute(Pn)])):null,getElementText$1=ki=>normalizeWhitespace$1(ki==null?void 0:ki.textContent),childGetter=(ki,$n)=>{const Pn=ki.lookupNamespaceURI(null)===$n||ki.lookupPrefix($n),Kn=Pn?(oi,Mn)=>ti=>ti.namespaceURI===$n&&ti.localName===Mn:(oi,Mn)=>ti=>ti.localName===Mn;return{$:(oi,Mn)=>[...oi.children].find(Kn(oi,Mn)),$$:(oi,Mn)=>[...oi.children].filter(Kn(oi,Mn)),$$$:Pn?(oi,Mn)=>[...oi.getElementsByTagNameNS($n,Mn)]:(oi,Mn)=>[...oi.getElementsByTagName(Mn)]}},resolveURL=(ki,$n)=>{try{if($n.includes(":"))return new URL(ki,$n);const Pn="https://invalid.invalid/",Kn=new URL(ki,Pn+$n);return Kn.search="",decodeURI(Kn.href.replace(Pn,""))}catch(Pn){return console.warn(Pn),ki}},isExternal=ki=>/^(?!blob)\w+:/i.test(ki),pathRelative=(ki,$n)=>{if(!ki)return $n;const Pn=ki.replace(/\/$/,"").split("/"),Kn=$n.replace(/\/$/,"").split("/"),oi=(Pn.length>Kn.length?Pn:Kn).findIndex((Mn,ti)=>Pn[ti]!==Kn[ti]);return oi<0?"":Array(Pn.length-oi).fill("..").concat(Kn.slice(oi)).join("/")},pathDirname=ki=>ki.slice(0,ki.lastIndexOf("/")+1),replaceSeries$1=async(ki,$n,Pn)=>{const Kn=[];ki.replace($n,(...Mn)=>(Kn.push(Mn),null));const oi=[];for(const Mn of Kn)oi.push(await Pn(...Mn));return ki.replace($n,()=>oi.shift())},regexEscape=ki=>ki.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),LANGS={attrs:["dir","xml:lang"]},ALTS={name:"alternate-script",many:!0,...LANGS,props:["file-as"]},CONTRIB={many:!0,...LANGS,props:[{name:"role",many:!0,attrs:["scheme"]},"file-as",ALTS],setLegacyAttrs:(ki,$n)=>{var Pn;if(!((Pn=ki.role)!=null&&Pn.length)){const Kn=$n.getAttributeNS(NS$1.OPF,"role");Kn&&(ki.role=[{value:Kn}])}ki.fileAs??(ki.fileAs=$n.getAttributeNS(NS$1.OPF,"file-as"))}},METADATA=[{name:"title",many:!0,...LANGS,props:["title-type","display-seq","file-as",ALTS]},{name:"identifier",many:!0,props:[{name:"identifier-type",attrs:["scheme"]}],setLegacyAttrs:(ki,$n)=>{if(!ki.identifierType){const Pn=$n.getAttributeNS(NS$1.OPF,"scheme");Pn&&(ki.identifierType={value:Pn})}}},{name:"language",many:!0},{name:"creator",...CONTRIB},{name:"contributor",...CONTRIB},{name:"publisher",...LANGS,props:["file-as",ALTS]},{name:"description",...LANGS,props:[ALTS]},{name:"rights",...LANGS,props:[ALTS]},{name:"date"},{name:"dcterms:modified",type:"meta"},{name:"subject",many:!0,...LANGS,props:["term","authority",ALTS],setLegacyAttrs:(ki,$n)=>{ki.term??(ki.term=$n.getAttributeNS(NS$1.OPF,"term")),ki.authority??(ki.authority=$n.getAttributeNS(NS$1.OPF,"authority"))}},{name:"source",many:!0},{name:"belongs-to-collection",type:"meta",many:!0,...LANGS,props:["collection-type","group-position","dcterms:identifier","file-as",ALTS,{name:"belongs-to-collection",recursive:!0}]}],getMetadata=ki=>{var Rn,ui;const{$:$n,$$:Pn}=childGetter(ki,NS$1.OPF),Kn=$n(ki.documentElement,"metadata"),oi=Array.from(Kn.children),Mn=(si,ei)=>{var ii;if(!ei)return null;const{props:Bn=[],attrs:Nn=[]}=si,Hn=getElementText$1(ei);if(!Bn.length&&!Nn.length)return Hn;const On=ei.getAttribute("id"),hi=On?oi.filter(filterAttribute("refines","#"+On)):[],Xn=Object.fromEntries([["value",Hn]].concat(Bn.map(ri=>{const{many:di,recursive:fi}=ri,wi=typeof ri=="string"?ri:ri.name,Jn=filterAttribute("property",wi),pi=fi?si:ri;return[camel(wi),di?hi.filter(Jn).map(Zn=>Mn(pi,Zn)):Mn(pi,hi.find(Jn))]})).concat(Nn.map(ri=>[camel(ri),ei.getAttribute(ri)])));return(ii=si.setLegacyAttrs)==null||ii.call(si,Xn,ei),Xn},ti=oi.filter(filterAttribute("refines",null)),In=Object.fromEntries(METADATA.map(si=>{const{type:ei,name:Bn,many:Nn}=si,Hn=ei==="meta"?On=>On.namespaceURI===NS$1.OPF&&On.getAttribute("property")===Bn:On=>On.namespaceURI===NS$1.DC&&On.localName===Bn;return[camel(Bn),Nn?ti.filter(Hn).map(On=>Mn(si,On)):Mn(si,ti.find(Hn))]})),Ln=Pn(Kn,"meta"),jn=si=>Ln.filter(filterAttribute("property",ei=>ei==null?void 0:ei.startsWith(si))).map(ei=>[ei.getAttribute("property").replace(si,""),ei]),Cn=Object.fromEntries(jn("rendition:").map(([si,ei])=>[si,getElementText$1(ei)])),Tn={narrator:[],duration:{}};for(const[si,ei]of jn("media:")){const Bn=getElementText$1(ei);si==="duration"?Tn.duration[((ui=(Rn=ei.getAttribute("refines"))==null?void 0:Rn.split("#"))==null?void 0:ui[1])??""]=parseClock(Bn):si==="active-class"?Tn.activeClass=Bn:si==="narrator"?Tn.narrator.push(Bn):si==="playback-active-class"&&(Tn.playbackActiveClass=Bn)}return{metadata:In,rendition:Cn,media:Tn}},parseNav=(ki,$n=Pn=>Pn)=>{var si;const{$:Pn,$$:Kn,$$$:oi}=childGetter(ki,NS$1.XHTML),Mn=ei=>ei?decodeURI($n(ei)):null,ti=ei=>Bn=>{var ii;const Nn=Pn(Bn,"a")??Pn(Bn,"span"),Hn=Pn(Bn,"ol"),On=Mn(Nn==null?void 0:Nn.getAttribute("href")),Xn={label:getElementText$1(Nn)||(Nn==null?void 0:Nn.getAttribute("title")),href:On,subitems:In(Hn)};return ei&&(Xn.type=(ii=Nn==null?void 0:Nn.getAttributeNS(NS$1.EPUB,"type"))==null?void 0:ii.split(/\s/)),Xn},In=(ei,Bn)=>ei?Kn(ei,"li").map(ti(Bn)):null,Ln=(ei,Bn)=>In(Pn(ei,"ol"),Bn),jn=oi(ki,"nav");let Cn=null,Tn=null,Rn=null,ui=[];for(const ei of jn){const Bn=((si=ei.getAttributeNS(NS$1.EPUB,"type"))==null?void 0:si.split(/\s/))??[];Bn.includes("toc")?Cn??(Cn=Ln(ei)):Bn.includes("page-list")?Tn??(Tn=Ln(ei)):Bn.includes("landmarks")?Rn??(Rn=Ln(ei,!0)):ui.push({label:getElementText$1(ei.firstElementChild),type:Bn,list:Ln(ei)})}return{toc:Cn,pageList:Tn,landmarks:Rn,others:ui}},parseNCX=(ki,$n=Pn=>Pn)=>{const{$:Pn,$$:Kn}=childGetter(ki,NS$1.NCX),oi=Ln=>Ln?decodeURI($n(Ln)):null,Mn=Ln=>{const jn=Pn(Ln,"navLabel"),Cn=Pn(Ln,"content"),Tn=getElementText$1(jn),Rn=oi(Cn.getAttribute("src"));if(Ln.localName==="navPoint"){const ui=Kn(Ln,"navPoint");return{label:Tn,href:Rn,subitems:ui.length?ui.map(Mn):null}}return{label:Tn,href:Rn}},ti=(Ln,jn)=>Kn(Ln,jn).map(Mn),In=(Ln,jn)=>{const Cn=Pn(ki.documentElement,Ln);return Cn?ti(Cn,jn):null};return{toc:In("navMap","navPoint"),pageList:In("pageList","pageTarget"),others:Kn(ki.documentElement,"navList").map(Ln=>({label:getElementText$1(Pn(Ln,"navLabel")),list:ti(Ln,"navTarget")}))}},parseClock=ki=>{if(!ki)return;const $n=ki.split(":").map(ti=>parseFloat(ti));if($n.length===3){const[ti,In,Ln]=$n;return ti*60*60+In*60+Ln}if($n.length===2){const[ti,In]=$n;return ti*60+In}const[Pn,Kn]=ki.split(/(?=[^\d.])/),oi=parseFloat(Pn),Mn=Kn==="h"?60*60:Kn==="min"?60:Kn==="ms"?.001:1;return oi*Mn};class MediaOverlay extends EventTarget{constructor(Pn,Kn){super();Ki(this,J0);Ki(this,yo);Ki(this,Pr);Ki(this,pr);Ki(this,d0);Ki(this,wo);Ki(this,mr);Ki(this,Mr,void 0);Ki(this,l0,void 0);Ki(this,qr,void 0);Ki(this,Ha,void 0);Ki(this,Da,void 0);Ki(this,Oa,void 0);Ki(this,h0,1);Ki(this,u0,1);this.book=Pn,this.loadXML=Kn}async start(Pn,Kn=()=>!0){var In;(In=vi(this,Oa))==null||In.pause();const oi=this.book.sections[Pn],Mn=oi==null?void 0:oi.id;if(!Mn)return;const{mediaOverlay:ti}=oi;if(!ti)return this.start(Pn+1);ds(this,qr,Pn),await Qi(this,J0,tu).call(this,ti);for(let Ln=0;Ln<vi(this,Mr).length;Ln++){const{items:jn}=vi(this,Mr)[Ln];for(let Cn=0;Cn<jn.length;Cn++)if(jn[Cn].text.split("#")[0]===Mn&&Kn(jn[Cn],Cn,jn))return Qi(this,mr,so).call(this,Ln,Cn).catch(Tn=>Qi(this,pr,io).call(this,Tn))}}pause(){var Pn;(Pn=vi(this,Oa))==null||Pn.pause()}resume(){var Pn;(Pn=vi(this,Oa))==null||Pn.play().catch(Kn=>Qi(this,pr,io).call(this,Kn))}prev(){vi(this,Da)>0?Qi(this,mr,so).call(this,vi(this,Ha),vi(this,Da)-1):vi(this,Ha)>0?Qi(this,mr,so).call(this,vi(this,Ha)-1,vi(this,Mr)[vi(this,Ha)-1].items.length-1):vi(this,qr)>0&&this.start(vi(this,qr)-1,(Pn,Kn,oi)=>Kn===oi.length-1)}next(){Qi(this,mr,so).call(this,vi(this,Ha),vi(this,Da)+1)}setVolume(Pn){ds(this,h0,Pn),vi(this,Oa)&&(vi(this,Oa).volume=Pn)}setRate(Pn){ds(this,u0,Pn),vi(this,Oa)&&(vi(this,Oa).playbackRate=Pn)}}Mr=new WeakMap,l0=new WeakMap,qr=new WeakMap,Ha=new WeakMap,Da=new WeakMap,Oa=new WeakMap,h0=new WeakMap,u0=new WeakMap,J0=new WeakSet,tu=async function(Pn){if(vi(this,l0)===Pn)return;const Kn=await this.loadXML(Pn.href),oi=In=>In?resolveURL(In,Pn.href):null,{$:Mn,$$$:ti}=childGetter(Kn,NS$1.SMIL);ds(this,Ha,-1),ds(this,Da,-1),ds(this,Mr,ti(Kn,"par").reduce((In,Ln)=>{var ei;const jn=oi((ei=Mn(Ln,"text"))==null?void 0:ei.getAttribute("src")),Cn=Mn(Ln,"audio");if(!jn||!Cn)return In;const Tn=oi(Cn.getAttribute("src")),Rn=parseClock(Cn.getAttribute("clipBegin")),ui=parseClock(Cn.getAttribute("clipEnd")),si=In.at(-1);return(si==null?void 0:si.src)===Tn?si.items.push({text:jn,begin:Rn,end:ui}):In.push({src:Tn,items:[{text:jn,begin:Rn,end:ui}]}),In},[])),ds(this,l0,Pn)},yo=new WeakSet,Ic=function(){return vi(this,Mr)[vi(this,Ha)]},Pr=new WeakSet,Xo=function(){var Pn,Kn;return(Kn=(Pn=vi(this,yo,Ic))==null?void 0:Pn.items)==null?void 0:Kn[vi(this,Da)]},pr=new WeakSet,io=function(Pn){console.error(Pn),this.dispatchEvent(new CustomEvent("error",{detail:Pn}))},d0=new WeakSet,Gl=function(){this.dispatchEvent(new CustomEvent("highlight",{detail:vi(this,Pr,Xo)}))},wo=new WeakSet,Oc=function(){this.dispatchEvent(new CustomEvent("unhighlight",{detail:vi(this,Pr,Xo)}))},mr=new WeakSet,so=async function(Pn,Kn){var In;vi(this,Oa)&&(vi(this,Oa).pause(),URL.revokeObjectURL(vi(this,Oa).src),ds(this,Oa,null)),ds(this,Ha,Pn),ds(this,Da,Kn);const oi=(In=vi(this,yo,Ic))==null?void 0:In.src;if(!oi||!vi(this,Pr,Xo))return this.start(vi(this,qr)+1);const Mn=URL.createObjectURL(await this.book.loadBlob(oi)),ti=new Audio(Mn);ds(this,Oa,ti),ti.addEventListener("timeupdate",()=>{var Tn,Rn;if(ti.paused)return;const Ln=ti.currentTime,{items:jn}=vi(this,yo,Ic);if(Ln>((Tn=vi(this,Pr,Xo))==null?void 0:Tn.end)&&(Qi(this,wo,Oc).call(this),vi(this,Da)===jn.length-1)){Qi(this,mr,so).call(this,vi(this,Ha)+1,0).catch(ui=>Qi(this,pr,io).call(this,ui));return}const Cn=vi(this,Da);for(;((Rn=jn[vi(this,Da)+1])==null?void 0:Rn.begin)<=Ln;)wr(this,Da)._++;vi(this,Da)!==Cn&&Qi(this,d0,Gl).call(this)}),ti.addEventListener("error",()=>Qi(this,pr,io).call(this,new Error(`Failed to load ${oi}`))),ti.addEventListener("playing",()=>Qi(this,d0,Gl).call(this)),ti.addEventListener("pause",()=>Qi(this,wo,Oc).call(this)),ti.addEventListener("ended",()=>{Qi(this,wo,Oc).call(this),URL.revokeObjectURL(Mn),ds(this,Oa,null),Qi(this,mr,so).call(this,Pn+1,0).catch(Ln=>Qi(this,pr,io).call(this,Ln))}),ti.addEventListener("canplaythrough",()=>{ti.currentTime=vi(this,Pr,Xo).begin??0,ti.volume=vi(this,h0),ti.playbackRate=vi(this,u0),ti.play().catch(Ln=>Qi(this,pr,io).call(this,Ln))})};const isUUID=/([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})/,getUUID=ki=>{for(const $n of ki.getElementsByTagNameNS(NS$1.DC,"identifier")){const[Pn]=getElementText$1($n).split(":").slice(-1);if(isUUID.test(Pn))return Pn}return""},getIdentifier=ki=>getElementText$1(ki.getElementById(ki.documentElement.getAttribute("unique-identifier"))??ki.getElementsByTagNameNS(NS$1.DC,"identifier")[0]),deobfuscate=async(ki,$n,Pn)=>{const Kn=new Uint8Array(await Pn.slice(0,$n).arrayBuffer());$n=Math.min($n,Kn.length);for(var oi=0;oi<$n;oi++)Kn[oi]=Kn[oi]^ki[oi%ki.length];return new Blob([Kn,Pn.slice($n)],{type:Pn.type})},WebCryptoSHA1=async ki=>{const $n=new TextEncoder().encode(ki),Pn=await globalThis.crypto.subtle.digest("SHA-1",$n);return new Uint8Array(Pn)},deobfuscators=(ki=WebCryptoSHA1)=>({"http://www.idpf.org/2008/embedding":{key:$n=>ki(getIdentifier($n).replaceAll(/[\u0020\u0009\u000d\u000a]/g,"")),decode:($n,Pn)=>deobfuscate($n,1040,Pn)},"http://ns.adobe.com/pdf/enc#RC":{key:$n=>{const Pn=getUUID($n).replaceAll("-","");return Uint8Array.from({length:16},(Kn,oi)=>parseInt(Pn.slice(oi*2,oi*2+2),16))},decode:($n,Pn)=>deobfuscate($n,1024,Pn)}});class Encryption{constructor($n){Ki(this,f0,new Map);Ki(this,So,new Map);Ki(this,g0,void 0);ds(this,g0,$n)}async init($n,Pn){if(!$n)return;const Kn=Array.from($n.getElementsByTagNameNS(NS$1.ENC,"EncryptedData"),oi=>{var Mn,ti;return{algorithm:(Mn=oi.getElementsByTagNameNS(NS$1.ENC,"EncryptionMethod")[0])==null?void 0:Mn.getAttribute("Algorithm"),uri:(ti=oi.getElementsByTagNameNS(NS$1.ENC,"CipherReference")[0])==null?void 0:ti.getAttribute("URI")}});for(const{algorithm:oi,uri:Mn}of Kn){if(!vi(this,So).has(oi)){const ti=vi(this,g0)[oi];if(!ti){console.warn("Unknown encryption algorithm");continue}const In=await ti.key(Pn);vi(this,So).set(oi,Ln=>ti.decode(In,Ln))}vi(this,f0).set(Mn,oi)}}getDecoder($n){return vi(this,So).get(vi(this,f0).get($n))??(Pn=>Pn)}}f0=new WeakMap,So=new WeakMap,g0=new WeakMap;class Resources{constructor({opf:$n,resolveHref:Pn}){var Cn,Tn,Rn,ui,si;this.opf=$n;const{$:Kn,$$:oi,$$$:Mn}=childGetter($n,NS$1.OPF),ti=Kn($n.documentElement,"manifest"),In=Kn($n.documentElement,"spine"),Ln=oi(In,"itemref");this.manifest=oi(ti,"item").map(getAttributes("href","id","media-type","properties","media-overlay")).map(ei=>{var Bn;return ei.href=Pn(ei.href),ei.properties=(Bn=ei.properties)==null?void 0:Bn.split(/\s/),ei}),this.spine=Ln.map(getAttributes("idref","id","linear","properties")).map(ei=>{var Bn;return ei.properties=(Bn=ei.properties)==null?void 0:Bn.split(/\s/),ei}),this.pageProgressionDirection=In.getAttribute("page-progression-direction"),this.navPath=(Cn=this.getItemByProperty("nav"))==null?void 0:Cn.href,this.ncxPath=(Tn=this.getItemByID(In.getAttribute("toc"))??this.manifest.find(ei=>ei.mediaType===MIME$2.NCX))==null?void 0:Tn.href;const jn=Kn($n.documentElement,"guide");jn&&(this.guide=oi(jn,"reference").map(getAttributes("type","title","href")).map(({type:ei,title:Bn,href:Nn})=>({label:Bn,type:ei.split(/\s/),href:Pn(Nn)}))),this.cover=this.getItemByProperty("cover-image")??this.getItemByID((Rn=Mn($n,"meta").find(filterAttribute("name","cover")))==null?void 0:Rn.getAttribute("content"))??this.getItemByHref((si=(ui=this.guide)==null?void 0:ui.find(ei=>ei.type.includes("cover")))==null?void 0:si.href),this.cfis=fromElements(Ln)}getItemByID($n){return this.manifest.find(Pn=>Pn.id===$n)}getItemByHref($n){return this.manifest.find(Pn=>Pn.href===$n)}getItemByProperty($n){return this.manifest.find(Pn=>{var Kn;return(Kn=Pn.properties)==null?void 0:Kn.includes($n)})}resolveCFI($n){const Pn=parse($n),Kn=(Pn.parent??Pn).shift();let oi=toElement(this.opf,Kn);oi&&oi.nodeName!=="idref"&&(Kn.at(-1).id=null,oi=toElement(this.opf,Kn));const Mn=oi==null?void 0:oi.getAttribute("idref");return{index:this.spine.findIndex(Ln=>Ln.idref===Mn),anchor:Ln=>toRange(Ln,Pn)}}}class Loader{constructor({loadText:$n,loadBlob:Pn,resources:Kn}){Ki(this,xr,new Map);Ki(this,br,new Map);Ki(this,ir,new Map);ta(this,"allowScript",!1);this.loadText=$n,this.loadBlob=Pn,this.manifest=Kn.manifest,this.assets=Kn.manifest}createURL($n,Pn,Kn,oi){if(!Pn)return"";const Mn=URL.createObjectURL(new Blob([Pn],{type:Kn}));if(vi(this,xr).set($n,Mn),vi(this,ir).set($n,1),oi){const ti=vi(this,br).get(oi);ti?ti.push($n):vi(this,br).set(oi,[$n])}return Mn}ref($n,Pn){const Kn=vi(this,br).get(Pn);return Kn!=null&&Kn.includes($n)||(vi(this,ir).set($n,vi(this,ir).get($n)+1),Kn?Kn.push($n):vi(this,br).set(Pn,[$n])),vi(this,xr).get($n)}unref($n){if(!vi(this,ir).has($n))return;const Pn=vi(this,ir).get($n)-1;if(Pn<1){URL.revokeObjectURL(vi(this,xr).get($n)),vi(this,xr).delete($n),vi(this,ir).delete($n);const Kn=vi(this,br).get($n);if(Kn)for(;Kn.length;)this.unref(Kn.pop());vi(this,br).delete($n)}else vi(this,ir).set($n,Pn)}async loadItem($n,Pn=[]){if(!$n)return null;const{href:Kn,mediaType:oi}=$n,Mn=MIME$2.JS.test($n.mediaType);if(Mn&&!this.allowScript)return null;const ti=Pn.at(-1);return vi(this,xr).has(Kn)?this.ref(Kn,ti):(Mn||[MIME$2.XHTML,MIME$2.HTML,MIME$2.CSS,MIME$2.SVG].includes(oi))&&Pn.every(Ln=>Ln!==Kn)?this.loadReplaced($n,Pn):this.createURL(Kn,await this.loadBlob(Kn),oi,ti)}async loadHref($n,Pn,Kn=[]){if(isExternal($n))return $n;const oi=resolveURL($n,Pn),Mn=this.manifest.find(ti=>ti.href===oi);return Mn?this.loadItem(Mn,Kn.concat(Pn)):$n}async loadReplaced($n,Pn=[]){const{href:Kn,mediaType:oi}=$n,Mn=Pn.at(-1),ti=await this.loadText(Kn);if(!ti)return null;if([MIME$2.XHTML,MIME$2.HTML,MIME$2.SVG].includes(oi)){let Ln=new DOMParser().parseFromString(ti,oi);if(oi===MIME$2.XHTML&&Ln.querySelector("parsererror")&&(console.warn(Ln.querySelector("parsererror").innerText),$n.mediaType=MIME$2.HTML,Ln=new DOMParser().parseFromString(ti,$n.mediaType)),[MIME$2.XHTML,MIME$2.SVG].includes($n.mediaType)){let Tn=Ln.firstChild;for(;Tn instanceof ProcessingInstruction;){if(Tn.data){const Rn=await replaceSeries$1(Tn.data,/(?:^|\s*)(href\s*=\s*['"])([^'"]*)(['"])/i,(ui,si,ei,Bn)=>this.loadHref(ei,Kn,Pn).then(Nn=>`${si}${Nn}${Bn}`));Tn.replaceWith(Ln.createProcessingInstruction(Tn.target,Rn))}Tn=Tn.nextSibling}}const jn=async(Tn,Rn)=>Tn.setAttribute(Rn,await this.loadHref(Tn.getAttribute(Rn),Kn,Pn));for(const Tn of Ln.querySelectorAll("link[href]"))await jn(Tn,"href");for(const Tn of Ln.querySelectorAll("[src]"))await jn(Tn,"src");for(const Tn of Ln.querySelectorAll("[poster]"))await jn(Tn,"poster");for(const Tn of Ln.querySelectorAll("object[data]"))await jn(Tn,"data");for(const Tn of Ln.querySelectorAll("[*|href]:not([href])"))Tn.setAttributeNS(NS$1.XLINK,"href",await this.loadHref(Tn.getAttributeNS(NS$1.XLINK,"href"),Kn,Pn));for(const Tn of Ln.querySelectorAll("style"))Tn.textContent&&(Tn.textContent=await this.replaceCSS(Tn.textContent,Kn,Pn));for(const Tn of Ln.querySelectorAll("[style]"))Tn.setAttribute("style",await this.replaceCSS(Tn.getAttribute("style"),Kn,Pn));const Cn=new XMLSerializer().serializeToString(Ln);return this.createURL(Kn,Cn,$n.mediaType,Mn)}const In=oi===MIME$2.CSS?await this.replaceCSS(ti,Kn,Pn):await this.replaceString(ti,Kn,Pn);return this.createURL(Kn,In,oi,Mn)}async replaceCSS($n,Pn,Kn=[]){const oi=await replaceSeries$1($n,/url\(\s*["']?([^'"\n]*?)\s*["']?\s*\)/gi,(Ln,jn)=>this.loadHref(jn,Pn,Kn).then(Cn=>`url("${Cn}")`)),Mn=await replaceSeries$1(oi,/@import\s*["']([^"'\n]*?)["']/gi,(Ln,jn)=>this.loadHref(jn,Pn,Kn).then(Cn=>`@import "${Cn}"`)),ti=(window==null?void 0:window.innerWidth)??800,In=(window==null?void 0:window.innerHeight)??600;return Mn.replace(new RegExp("(?<=[{\\s;])-epub-","gi"),"").replace(/(\d*\.?\d+)vw/gi,(Ln,jn)=>parseFloat(jn)*ti/100+"px").replace(/(\d*\.?\d+)vh/gi,(Ln,jn)=>parseFloat(jn)*In/100+"px").replace(/page-break-(after|before|inside)\s*:/gi,(Ln,jn)=>`-webkit-column-break-${jn}:`).replace(/break-(after|before|inside)\s*:\s*(avoid-)?page/gi,(Ln,jn,Cn)=>`break-${jn}: ${Cn??""}column`)}replaceString($n,Pn,Kn=[]){const oi=new Map,Mn=this.assets.map(In=>{if(In.href===Pn)return;const Ln=pathRelative(pathDirname(Pn),In.href),jn=encodeURI(Ln),Cn="/"+In.href,Tn=encodeURI(Cn),Rn=new Set([Ln,jn,Cn,Tn]);for(const ui of Rn)oi.set(ui,In);return Array.from(Rn)}).flat().filter(In=>In);if(!Mn.length)return $n;const ti=new RegExp(Mn.map(regexEscape).join("|"),"g");return replaceSeries$1($n,ti,async In=>this.loadItem(oi.get(In.replace(/^\//,"")),Kn.concat(Pn)))}unloadItem($n){this.unref($n==null?void 0:$n.href)}destroy(){for(const $n of vi(this,xr).values())URL.revokeObjectURL($n)}}xr=new WeakMap,br=new WeakMap,ir=new WeakMap;const getHTMLFragment=(ki,$n)=>ki.getElementById($n)??ki.querySelector(`[name="${CSS.escape($n)}"]`),getPageSpread$1=ki=>{for(const $n of ki){if($n==="page-spread-left"||$n==="rendition:page-spread-left")return"left";if($n==="page-spread-right"||$n==="rendition:page-spread-right")return"right";if($n==="rendition:page-spread-center")return"center"}},getDisplayOptions=ki=>ki?{fixedLayout:getElementText$1(ki.querySelector('option[name="fixed-layout"]')),openToSpread:getElementText$1(ki.querySelector('option[name="open-to-spread"]'))}:null;class EPUB{constructor({loadText:$n,loadBlob:Pn,getSize:Kn,sha1:oi}){Ki(this,Za);ta(this,"parser",new DOMParser);Ki(this,Vr,void 0);Ki(this,Ao,void 0);this.loadText=$n,this.loadBlob=Pn,this.getSize=Kn,ds(this,Ao,new Encryption(deobfuscators(oi)))}async init(){var ei,Bn,Nn,Hn,On,hi,Xn,ii,ri,di,fi,wi,Jn,pi,Zn;const $n=await Qi(this,Za,vr).call(this,"META-INF/container.xml");if(!$n)throw new Error("Failed to load container file");const Pn=Array.from($n.getElementsByTagNameNS(NS$1.CONTAINER,"rootfile"),getAttributes("full-path","media-type")).filter(Gn=>Gn.mediaType==="application/oebps-package+xml");if(!Pn.length)throw new Error("No package document defined in container");const Kn=Pn[0].fullPath,oi=await Qi(this,Za,vr).call(this,Kn);if(!oi)throw new Error("Failed to load package document");const Mn=await Qi(this,Za,vr).call(this,"META-INF/encryption.xml");await vi(this,Ao).init(Mn,oi),this.resources=new Resources({opf:oi,resolveHref:Gn=>resolveURL(Gn,Kn)}),ds(this,Vr,new Loader({loadText:this.loadText,loadBlob:Gn=>Promise.resolve(this.loadBlob(Gn)).then(vi(this,Ao).getDecoder(Gn)),resources:this.resources})),this.sections=this.resources.spine.map((Gn,mi)=>{const{idref:Wn,linear:ni,properties:li=[]}=Gn,Ai=this.resources.getItemByID(Wn);return Ai?{id:Ai.href,load:()=>vi(this,Vr).loadItem(Ai),unload:()=>vi(this,Vr).unloadItem(Ai),createDocument:()=>this.loadDocument(Ai),size:this.getSize(Ai.href),cfi:this.resources.cfis[mi],linear:ni,pageSpread:getPageSpread$1(li),resolveHref:gi=>resolveURL(gi,Ai.href),mediaOverlay:Ai.mediaOverlay?this.resources.getItemByID(Ai.mediaOverlay):null}:(console.warn(`Could not find item with ID "${Wn}" in manifest`),null)}).filter(Gn=>Gn);const{navPath:ti,ncxPath:In}=this.resources;if(ti)try{const Gn=Wn=>resolveURL(Wn,ti),mi=parseNav(await Qi(this,Za,vr).call(this,ti),Gn);this.toc=mi.toc,this.pageList=mi.pageList,this.landmarks=mi.landmarks}catch(Gn){console.warn(Gn)}if(!this.toc&&In)try{const Gn=Wn=>resolveURL(Wn,In),mi=parseNCX(await Qi(this,Za,vr).call(this,In),Gn);this.toc=mi.toc,this.pageList=mi.pageList}catch(Gn){console.warn(Gn)}this.landmarks??(this.landmarks=this.resources.guide);const{metadata:Ln,rendition:jn,media:Cn}=getMetadata(oi);this.rendition=jn,this.media=Cn,this.dir=this.resources.pageProgressionDirection;const Tn=getDisplayOptions(await Qi(this,Za,vr).call(this,"META-INF/com.apple.ibooks.display-options.xml")??await Qi(this,Za,vr).call(this,"META-INF/com.kobobooks.display-options.xml"));Tn&&(Tn.fixedLayout==="true"&&((ei=this.rendition).layout??(ei.layout="pre-paginated")),Tn.openToSpread==="false"&&((Bn=this.sections.find(Gn=>Gn.linear!=="no")).pageSpread??(Bn.pageSpread=this.dir==="rtl"?"left":"right"))),this.parsedMetadata=Ln;const Rn=(Nn=Ln==null?void 0:Ln.title)==null?void 0:Nn[0];this.metadata={title:Rn==null?void 0:Rn.value,subtitle:(On=(Hn=Ln==null?void 0:Ln.title)==null?void 0:Hn.find(Gn=>Gn.titleType==="subtitle"))==null?void 0:On.value,sortAs:Rn==null?void 0:Rn.fileAs,language:Ln==null?void 0:Ln.language,identifier:getIdentifier(oi),description:(hi=Ln==null?void 0:Ln.description)==null?void 0:hi.value,publisher:(Xn=Ln==null?void 0:Ln.publisher)==null?void 0:Xn.value,published:Ln==null?void 0:Ln.date,modified:Ln==null?void 0:Ln.dctermsModified,subject:(ri=(ii=Ln==null?void 0:Ln.subject)==null?void 0:ii.filter(({value:Gn,term:mi})=>Gn||mi))==null?void 0:ri.map(({value:Gn,term:mi,authority:Wn})=>({name:Gn,code:mi,scheme:Wn})),rights:(di=Ln==null?void 0:Ln.rights)==null?void 0:di.value};const ui={art:"artist",aut:"author",bkp:"producer",clr:"colorist",edt:"editor",ill:"illustrator",nrt:"narrator",trl:"translator",pbl:"publisher"},si=Gn=>mi=>{var li;const Wn=[...new Set((li=mi.role)==null?void 0:li.map(({value:Ai,scheme:gi})=>(!gi||gi==="marc:relators"?ui[Ai]:null)??Gn))],ni={name:mi.value,sortAs:mi.fileAs};return[Wn!=null&&Wn.length?Wn:[Gn],ni]};return(Zn=(pi=(fi=Ln==null?void 0:Ln.creator)==null?void 0:fi.map(si("author")))==null?void 0:pi.concat((Jn=(wi=Ln==null?void 0:Ln.contributor)==null?void 0:wi.map)==null?void 0:Jn.call(wi,si("contributor"))))==null||Zn.forEach(([Gn,mi])=>Gn.forEach(Wn=>{this.metadata[Wn]?this.metadata[Wn].push(mi):this.metadata[Wn]=[mi]})),this}async loadDocument($n){const Pn=await this.loadText($n.href);return this.parser.parseFromString(Pn,$n.mediaType)}getMediaOverlay(){return new MediaOverlay(this,Qi(this,Za,vr).bind(this))}resolveCFI($n){return this.resources.resolveCFI($n)}resolveHref($n){const[Pn,Kn]=$n.split("#"),oi=this.resources.getItemByHref(decodeURI(Pn));return oi?{index:this.resources.spine.findIndex(({idref:In})=>In===oi.id),anchor:Kn?In=>getHTMLFragment(In,Kn):()=>0}:null}splitTOCHref($n){return($n==null?void 0:$n.split("#"))??[]}getTOCFragment($n,Pn){return $n.getElementById(Pn)??$n.querySelector(`[name="${CSS.escape(Pn)}"]`)}isExternal($n){return isExternal($n)}async getCover(){var Pn;const $n=(Pn=this.resources)==null?void 0:Pn.cover;return $n!=null&&$n.href?new Blob([await this.loadBlob($n.href)],{type:$n.mediaType}):null}async getCalibreBookmarks(){const $n=await this.loadText("META-INF/calibre_bookmarks.txt"),Pn="encoding=json+base64:";if($n!=null&&$n.startsWith(Pn)){const Kn=atob($n.slice(Pn.length));return JSON.parse(Kn)}}destroy(){var $n;($n=vi(this,Vr))==null||$n.destroy()}}Vr=new WeakMap,Ao=new WeakMap,Za=new WeakSet,vr=async function($n){const Pn=await this.loadText($n);if(!Pn)return null;const Kn=this.parser.parseFromString(Pn,MIME$2.XML);if(Kn.querySelector("parsererror"))throw new Error(`XML parsing error: ${$n}
${Kn.querySelector("parsererror").innerText}`);return Kn};const epub=Object.freeze(Object.defineProperty({__proto__:null,EPUB},Symbol.toStringTag,{value:"Module"})),makeComicBook=({entries:ki,loadBlob:$n,getSize:Pn},Kn)=>{const oi=new Map,Mn=new Map,ti=async Tn=>{if(oi.has(Tn))return oi.get(Tn);const Rn=URL.createObjectURL(await $n(Tn)),ui=URL.createObjectURL(new Blob([`<img src="${Rn}">`],{type:"text/html"}));return Mn.set(Tn,[Rn,ui]),oi.set(Tn,ui),ui},In=Tn=>{var Rn,ui;(ui=(Rn=Mn.get(Tn))==null?void 0:Rn.forEach)==null||ui.call(Rn,si=>URL.revokeObjectURL(si)),Mn.delete(Tn),oi.delete(Tn)},Ln=[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".jxl",".avif"],jn=ki.map(Tn=>Tn.filename).filter(Tn=>Ln.some(Rn=>Tn.endsWith(Rn))).sort();if(!jn.length)throw new Error("No supported image files in archive");const Cn={};return Cn.getCover=()=>$n(jn[0]),Cn.metadata={title:Kn.name},Cn.sections=jn.map(Tn=>({id:Tn,load:()=>ti(Tn),unload:()=>In(Tn),size:Pn(Tn)})),Cn.toc=jn.map(Tn=>({label:Tn,href:Tn})),Cn.rendition={layout:"pre-paginated"},Cn.resolveHref=Tn=>({index:Cn.sections.findIndex(Rn=>Rn.id===Tn)}),Cn.splitTOCHref=Tn=>[Tn,null],Cn.getTOCFragment=Tn=>Tn.documentElement,Cn.destroy=()=>{for(const Tn of Mn.values())for(const Rn of Tn)URL.revokeObjectURL(Rn)},Cn},comicBook=Object.freeze(Object.defineProperty({__proto__:null,makeComicBook},Symbol.toStringTag,{value:"Module"})),normalizeWhitespace=ki=>ki?ki.replace(/[\t\n\f\r ]+/g," ").replace(/^[\t\n\f\r ]+/,"").replace(/[\t\n\f\r ]+$/,""):"",getElementText=ki=>normalizeWhitespace(ki==null?void 0:ki.textContent),NS={XLINK:"http://www.w3.org/1999/xlink",EPUB:"http://www.idpf.org/2007/ops"},MIME$1={XML:"application/xml",XHTML:"application/xhtml+xml"},STYLE={strong:["strong","self"],emphasis:["em","self"],style:["span","self"],a:"anchor",strikethrough:["s","self"],sub:["sub","self"],sup:["sup","self"],code:["code","self"],image:"image"},TABLE={tr:["tr",["align"]],th:["th",["colspan","rowspan","align","valign"]],td:["td",["colspan","rowspan","align","valign"]]},POEM={epigraph:["blockquote"],subtitle:["h2",STYLE],"text-author":["p",STYLE],date:["p",STYLE],stanza:"stanza"},SECTION={title:["header",{p:["h1",STYLE],"empty-line":["br"]}],epigraph:["blockquote","self"],image:"image",annotation:["aside"],section:["section","self"],p:["p",STYLE],poem:["blockquote",POEM],subtitle:["h2",STYLE],cite:["blockquote","self"],"empty-line":["br"],table:["table",TABLE],"text-author":["p",STYLE]};POEM.epigraph.push(SECTION);const BODY={image:"image",title:["section",{p:["h1",STYLE],"empty-line":["br"]}],epigraph:["section",SECTION],section:["section",SECTION]},getImageSrc=ki=>{const $n=ki.getAttributeNS(NS.XLINK,"href"),[,Pn]=$n.split("#"),Kn=ki.getRootNode().getElementById(Pn);return Kn?`data:${Kn.getAttribute("content-type")};base64,${Kn.textContent}`:$n};class FB2Converter{constructor($n){this.fb2=$n,this.doc=document.implementation.createDocument(NS.XHTML,"html")}image($n){const Pn=this.doc.createElement("img");return Pn.alt=$n.getAttribute("alt"),Pn.title=$n.getAttribute("title"),Pn.setAttribute("src",getImageSrc($n)),Pn}anchor($n){const Pn=this.convert($n,{a:["a",STYLE]});return Pn.setAttribute("href",$n.getAttributeNS(NS.XLINK,"href")),$n.getAttribute("type")==="note"&&Pn.setAttributeNS(NS.EPUB,"epub:type","noteref"),Pn}stanza($n){const Pn=this.convert($n,{stanza:["p",{title:["header",{p:["strong",STYLE],"empty-line":["br"]}],subtitle:["p",STYLE]}]});for(const Kn of $n.children)Kn.nodeName==="v"&&(Pn.append(this.doc.createTextNode(Kn.textContent)),Pn.append(this.doc.createElement("br")));return Pn}convert($n,Pn){if($n.nodeType===3)return this.doc.createTextNode($n.textContent);if($n.nodeType===4)return this.doc.createCDATASection($n.textContent);if($n.nodeType===8)return this.doc.createComment($n.textContent);const Kn=Pn==null?void 0:Pn[$n.nodeName];if(!Kn)return null;if(typeof Kn=="string")return this[Kn]($n);const[oi,Mn]=Kn,ti=this.doc.createElement(oi);if($n.id&&(ti.id=$n.id),ti.classList.add($n.nodeName),Array.isArray(Mn))for(const jn of Mn)ti.setAttribute(jn,$n.getAttribute(jn));const In=Mn==="self"?Pn:Array.isArray(Mn)?null:Mn;let Ln=$n.firstChild;for(;Ln;){const jn=this.convert(Ln,In);jn&&ti.append(jn),Ln=Ln.nextSibling}return ti}}const parseXML=async ki=>{var ti;const $n=await ki.arrayBuffer(),Pn=new TextDecoder("utf-8").decode($n),Kn=new DOMParser,oi=Kn.parseFromString(Pn,MIME$1.XML),Mn=oi.xmlEncoding||((ti=Pn.match(/^<\?xml\s+version\s*=\s*["']1.\d+"\s+encoding\s*=\s*["']([A-Za-z0-9._-]*)["']/))==null?void 0:ti[1]);if(Mn&&Mn.toLowerCase()!=="utf-8"){const In=new TextDecoder(Mn).decode($n);return Kn.parseFromString(In,MIME$1.XML)}return oi},style=URL.createObjectURL(new Blob([`
@namespace epub "http://www.idpf.org/2007/ops";
body > img, section > img {
    display: block;
    margin: auto;
}
.title h1 {
    text-align: center;
}
body > section > .title, body.notesBodyType > .title {
    margin: 3em 0;
}
body.notesBodyType > section .title h1 {
    text-align: start;
}
body.notesBodyType > section .title {
    margin: 1em 0;
}
p {
    text-indent: 1em;
    margin: 0;
}
:not(p) + p, p:first-child {
    text-indent: 0;
}
.poem p {
    text-indent: 0;
    margin: 1em 0;
}
.text-author, .date {
    text-align: end;
}
.text-author:before {
    content: "—";
}
table {
    border-collapse: collapse;
}
td, th {
    padding: .25em;
}
a[epub|type~="noteref"] {
    font-size: .75em;
    vertical-align: super;
}
body:not(.notesBodyType) > .title, body:not(.notesBodyType) > .epigraph {
    margin: 3em 0;
}
`],{type:"text/css"})),template=ki=>`<?xml version="1.0" encoding="utf-8"?>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head><link href="${style}" rel="stylesheet" type="text/css"/></head>
    <body>${ki}</body>
</html>`,dataID="data-foliate-id",makeFB2=async ki=>{const $n={},Pn=await parseXML(ki),Kn=new FB2Converter(Pn),oi=ui=>Pn.querySelector(ui),Mn=ui=>[...Pn.querySelectorAll(ui)],ti=ui=>{const si=getElementText(ui.querySelector("nickname"));if(si)return si;const ei=getElementText(ui.querySelector("first-name")),Bn=getElementText(ui.querySelector("middle-name")),Nn=getElementText(ui.querySelector("last-name")),Hn=[ei,Bn,Nn].filter(hi=>hi).join(" "),On=Nn?[Nn,[ei,Bn].filter(hi=>hi).join(" ")].join(", "):null;return{name:Hn,sortAs:On}},In=ui=>(ui==null?void 0:ui.getAttribute("value"))??getElementText(ui),Ln=oi("title-info annotation");if($n.metadata={title:getElementText(oi("title-info book-title")),identifier:getElementText(oi("document-info id")),language:getElementText(oi("title-info lang")),author:Mn("title-info author").map(ti),translator:Mn("title-info translator").map(ti),producer:Mn("document-info author").map(ti).concat(Mn("document-info program-used").map(getElementText)),publisher:getElementText(oi("publish-info publisher")),published:In(oi("title-info date")),modified:In(oi("document-info date")),description:Ln?Kn.convert(Ln,{annotation:["div",SECTION]}).innerHTML:null,subject:Mn("title-info genre").map(getElementText)},oi("coverpage image")){const ui=getImageSrc(oi("coverpage image"));$n.getCover=()=>fetch(ui).then(si=>si.blob())}else $n.getCover=()=>null;const jn=Array.from(Pn.querySelectorAll("body"),ui=>{const si=Kn.convert(ui,{body:["body",BODY]});return[Array.from(si.children,ei=>{const Bn=[ei,...ei.querySelectorAll("[id]")].map(Nn=>Nn.id);return{el:ei,ids:Bn}}),si]}),Cn=[],Tn=jn[0][0].map(({el:ui,ids:si})=>{const ei=Array.from(ui.querySelectorAll(":scope > section > .title"),(Bn,Nn)=>(Bn.setAttribute(dataID,Nn),{title:getElementText(Bn),index:Nn}));return{ids:si,titles:ei,el:ui}}).concat(jn.slice(1).map(([ui,si])=>{const ei=ui.map(Bn=>Bn.ids).flat();return si.classList.add("notesBodyType"),{ids:ei,el:si,linear:"no"}})).map(({ids:ui,titles:si,el:ei,linear:Bn})=>{var Xn;const Nn=template(ei.outerHTML),Hn=new Blob([Nn],{type:MIME$1.XHTML}),On=URL.createObjectURL(Hn);Cn.push(On);const hi=normalizeWhitespace(((Xn=ei.querySelector(".title, .subtitle, p"))==null?void 0:Xn.textContent)??(ei.classList.contains("title")?ei.textContent:""));return{ids:ui,title:hi,titles:si,load:()=>On,createDocument:()=>new DOMParser().parseFromString(Nn,MIME$1.XHTML),size:Hn.size-Array.from(ei.querySelectorAll("[src]"),ii=>{var ri;return((ri=ii.getAttribute("src"))==null?void 0:ri.length)??0}).reduce((ii,ri)=>ii+ri,0),linear:Bn}}),Rn=new Map;return $n.sections=Tn.map((ui,si)=>{const{ids:ei,load:Bn,createDocument:Nn,size:Hn,linear:On}=ui;for(const hi of ei)hi&&Rn.set(hi,si);return{id:si,load:Bn,createDocument:Nn,size:Hn,linear:On}}),$n.toc=Tn.map(({title:ui,titles:si},ei)=>{const Bn=ei.toString();return{label:ui,href:Bn,subitems:si!=null&&si.length?si.map(({title:Nn,index:Hn})=>({label:Nn,href:`${Bn}#${Hn}`})):null}}).filter(ui=>ui),$n.resolveHref=ui=>{const[si,ei]=ui.split("#");return si?{index:Number(si),anchor:Bn=>Bn.querySelector(`[${dataID}="${ei}"]`)}:{index:Rn.get(ei),anchor:Bn=>Bn.getElementById(ei)}},$n.splitTOCHref=ui=>{var si;return((si=ui==null?void 0:ui.split("#"))==null?void 0:si.map(ei=>Number(ei)))??[]},$n.getTOCFragment=(ui,si)=>ui.querySelector(`[${dataID}="${si}"]`),$n.destroy=()=>{for(const ui of Cn)URL.revokeObjectURL(ui)},$n},fb2=Object.freeze(Object.defineProperty({__proto__:null,makeFB2},Symbol.toStringTag,{value:"Module"})),textLayerBuilderCSS=`
/* Copyright 2014 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

:root {
  --highlight-bg-color: rgb(180 0 170);
  --highlight-selected-bg-color: rgb(0 100 0);
}

@media screen and (forced-colors: active) {
  :root {
    --highlight-bg-color: Highlight;
    --highlight-selected-bg-color: ButtonText;
  }
}

.textLayer {
  position: absolute;
  text-align: initial;
  inset: 0;
  overflow: hidden;
  opacity: 0.25;
  line-height: 1;
  text-size-adjust: none;
  forced-color-adjust: none;
  transform-origin: 0 0;
  z-index: 2;
}

.textLayer :is(span, br) {
  color: transparent;
  position: absolute;
  white-space: pre;
  cursor: text;
  transform-origin: 0% 0%;
}

/* Only necessary in Google Chrome, see issue 14205, and most unfortunately
 * the problem doesn't show up in "text" reference tests. */
/*#if !MOZCENTRAL*/
.textLayer span.markedContent {
  top: 0;
  height: 0;
}
/*#endif*/

.textLayer .highlight {
  margin: -1px;
  padding: 1px;
  background-color: var(--highlight-bg-color);
  border-radius: 4px;
}

.textLayer .highlight.appended {
  position: initial;
}

.textLayer .highlight.begin {
  border-radius: 4px 0 0 4px;
}

.textLayer .highlight.end {
  border-radius: 0 4px 4px 0;
}

.textLayer .highlight.middle {
  border-radius: 0;
}

.textLayer .highlight.selected {
  background-color: var(--highlight-selected-bg-color);
}

.textLayer ::selection {
  /*#if !MOZCENTRAL*/
  background: blue;
  /*#endif*/
  background: AccentColor; /* stylelint-disable-line declaration-block-no-duplicate-properties */
}

/* Avoids https://github.com/mozilla/pdf.js/issues/13840 in Chrome */
/*#if !MOZCENTRAL*/
.textLayer br::selection {
  background: transparent;
}
/*#endif*/

.textLayer .endOfContent {
  display: block;
  position: absolute;
  inset: 100% 0 0;
  z-index: -1;
  cursor: default;
  user-select: none;
}

.textLayer .endOfContent.active {
  top: 0;
}
`,annotationLayerBuilderCSS=`
/* Copyright 2014 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

:root {
  --annotation-unfocused-field-background: url("data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>");
  --input-focus-border-color: Highlight;
  --input-focus-outline: 1px solid Canvas;
  --input-unfocused-border-color: transparent;
  --input-disabled-border-color: transparent;
  --input-hover-border-color: black;
  --link-outline: none;
}

@media screen and (forced-colors: active) {
  :root {
    --input-focus-border-color: CanvasText;
    --input-unfocused-border-color: ActiveText;
    --input-disabled-border-color: GrayText;
    --input-hover-border-color: Highlight;
    --link-outline: 1.5px solid LinkText;
    --hcm-highligh-filter: invert(100%);
  }
  .annotationLayer .textWidgetAnnotation :is(input, textarea):required,
  .annotationLayer .choiceWidgetAnnotation select:required,
  .annotationLayer
    .buttonWidgetAnnotation:is(.checkBox, .radioButton)
    input:required {
    outline: 1.5px solid selectedItem;
  }

  .annotationLayer .linkAnnotation:hover {
    backdrop-filter: var(--hcm-highligh-filter);
  }

  .annotationLayer .linkAnnotation > a:hover {
    opacity: 0 !important;
    background: none !important;
    box-shadow: none;
  }

  .annotationLayer .popupAnnotation .popup {
    outline: calc(1.5px * var(--scale-factor)) solid CanvasText !important;
    background-color: ButtonFace !important;
    color: ButtonText !important;
  }

  .annotationLayer .highlightArea:hover::after {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    backdrop-filter: var(--hcm-highligh-filter);
    content: "";
    pointer-events: none;
  }

  .annotationLayer .popupAnnotation.focused .popup {
    outline: calc(3px * var(--scale-factor)) solid Highlight !important;
  }
}

.annotationLayer {
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
  transform-origin: 0 0;
  z-index: 3;
}

.annotationLayer[data-main-rotation="90"] .norotate {
  transform: rotate(270deg) translateX(-100%);
}
.annotationLayer[data-main-rotation="180"] .norotate {
  transform: rotate(180deg) translate(-100%, -100%);
}
.annotationLayer[data-main-rotation="270"] .norotate {
  transform: rotate(90deg) translateY(-100%);
}

.annotationLayer canvas {
  position: absolute;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.annotationLayer section {
  position: absolute;
  text-align: initial;
  pointer-events: auto;
  box-sizing: border-box;
  transform-origin: 0 0;
}

.annotationLayer .linkAnnotation {
  outline: var(--link-outline);
}

.annotationLayer :is(.linkAnnotation, .buttonWidgetAnnotation.pushButton) > a {
  position: absolute;
  font-size: 1em;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.annotationLayer
  :is(.linkAnnotation, .buttonWidgetAnnotation.pushButton):not(.hasBorder)
  > a:hover {
  opacity: 0.2;
  background-color: rgb(255 255 0);
  box-shadow: 0 2px 10px rgb(255 255 0);
}

.annotationLayer .linkAnnotation.hasBorder:hover {
  background-color: rgb(255 255 0 / 0.2);
}

.annotationLayer .hasBorder {
  background-size: 100% 100%;
}

.annotationLayer .textAnnotation img {
  position: absolute;
  cursor: pointer;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
}

.annotationLayer .textWidgetAnnotation :is(input, textarea),
.annotationLayer .choiceWidgetAnnotation select,
.annotationLayer .buttonWidgetAnnotation:is(.checkBox, .radioButton) input {
  background-image: var(--annotation-unfocused-field-background);
  border: 2px solid var(--input-unfocused-border-color);
  box-sizing: border-box;
  font: calc(9px * var(--scale-factor)) sans-serif;
  height: 100%;
  margin: 0;
  vertical-align: top;
  width: 100%;
}

.annotationLayer .textWidgetAnnotation :is(input, textarea):required,
.annotationLayer .choiceWidgetAnnotation select:required,
.annotationLayer
  .buttonWidgetAnnotation:is(.checkBox, .radioButton)
  input:required {
  outline: 1.5px solid red;
}

.annotationLayer .choiceWidgetAnnotation select option {
  padding: 0;
}

.annotationLayer .buttonWidgetAnnotation.radioButton input {
  border-radius: 50%;
}

.annotationLayer .textWidgetAnnotation textarea {
  resize: none;
}

.annotationLayer .textWidgetAnnotation :is(input, textarea)[disabled],
.annotationLayer .choiceWidgetAnnotation select[disabled],
.annotationLayer
  .buttonWidgetAnnotation:is(.checkBox, .radioButton)
  input[disabled] {
  background: none;
  border: 2px solid var(--input-disabled-border-color);
  cursor: not-allowed;
}

.annotationLayer .textWidgetAnnotation :is(input, textarea):hover,
.annotationLayer .choiceWidgetAnnotation select:hover,
.annotationLayer
  .buttonWidgetAnnotation:is(.checkBox, .radioButton)
  input:hover {
  border: 2px solid var(--input-hover-border-color);
}
.annotationLayer .textWidgetAnnotation :is(input, textarea):hover,
.annotationLayer .choiceWidgetAnnotation select:hover,
.annotationLayer .buttonWidgetAnnotation.checkBox input:hover {
  border-radius: 2px;
}

.annotationLayer .textWidgetAnnotation :is(input, textarea):focus,
.annotationLayer .choiceWidgetAnnotation select:focus {
  background: none;
  border: 2px solid var(--input-focus-border-color);
  border-radius: 2px;
  outline: var(--input-focus-outline);
}

.annotationLayer .buttonWidgetAnnotation:is(.checkBox, .radioButton) :focus {
  background-image: none;
  background-color: transparent;
}

.annotationLayer .buttonWidgetAnnotation.checkBox :focus {
  border: 2px solid var(--input-focus-border-color);
  border-radius: 2px;
  outline: var(--input-focus-outline);
}

.annotationLayer .buttonWidgetAnnotation.radioButton :focus {
  border: 2px solid var(--input-focus-border-color);
  outline: var(--input-focus-outline);
}

.annotationLayer .buttonWidgetAnnotation.checkBox input:checked::before,
.annotationLayer .buttonWidgetAnnotation.checkBox input:checked::after,
.annotationLayer .buttonWidgetAnnotation.radioButton input:checked::before {
  background-color: CanvasText;
  content: "";
  display: block;
  position: absolute;
}

.annotationLayer .buttonWidgetAnnotation.checkBox input:checked::before,
.annotationLayer .buttonWidgetAnnotation.checkBox input:checked::after {
  height: 80%;
  left: 45%;
  width: 1px;
}

.annotationLayer .buttonWidgetAnnotation.checkBox input:checked::before {
  transform: rotate(45deg);
}

.annotationLayer .buttonWidgetAnnotation.checkBox input:checked::after {
  transform: rotate(-45deg);
}

.annotationLayer .buttonWidgetAnnotation.radioButton input:checked::before {
  border-radius: 50%;
  height: 50%;
  left: 30%;
  top: 20%;
  width: 50%;
}

.annotationLayer .textWidgetAnnotation input.comb {
  font-family: monospace;
  padding-left: 2px;
  padding-right: 0;
}

.annotationLayer .textWidgetAnnotation input.comb:focus {
  /*
   * Letter spacing is placed on the right side of each character. Hence, the
   * letter spacing of the last character may be placed outside the visible
   * area, causing horizontal scrolling. We avoid this by extending the width
   * when the element has focus and revert this when it loses focus.
   */
  width: 103%;
}

.annotationLayer .buttonWidgetAnnotation:is(.checkBox, .radioButton) input {
  appearance: none;
}

.annotationLayer .fileAttachmentAnnotation .popupTriggerArea {
  height: 100%;
  width: 100%;
}

.annotationLayer .popupAnnotation {
  position: absolute;
  font-size: calc(9px * var(--scale-factor));
  pointer-events: none;
  width: max-content;
  max-width: 45%;
  height: auto;
}

.annotationLayer .popup {
  background-color: rgb(255 255 153);
  box-shadow: 0 calc(2px * var(--scale-factor)) calc(5px * var(--scale-factor))
    rgb(136 136 136);
  border-radius: calc(2px * var(--scale-factor));
  outline: 1.5px solid rgb(255 255 74);
  padding: calc(6px * var(--scale-factor));
  cursor: pointer;
  font: message-box;
  white-space: normal;
  word-wrap: break-word;
  pointer-events: auto;
}

.annotationLayer .popupAnnotation.focused .popup {
  outline-width: 3px;
}

.annotationLayer .popup * {
  font-size: calc(9px * var(--scale-factor));
}

.annotationLayer .popup > .header {
  display: inline-block;
}

.annotationLayer .popup > .header h1 {
  display: inline;
}

.annotationLayer .popup > .header .popupDate {
  display: inline-block;
  margin-left: calc(5px * var(--scale-factor));
  width: fit-content;
}

.annotationLayer .popupContent {
  border-top: 1px solid rgb(51 51 51);
  margin-top: calc(2px * var(--scale-factor));
  padding-top: calc(2px * var(--scale-factor));
}

.annotationLayer .richText > * {
  white-space: pre-wrap;
  font-size: calc(9px * var(--scale-factor));
}

.annotationLayer .popupTriggerArea {
  cursor: pointer;
}

.annotationLayer section svg {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
}

.annotationLayer .annotationTextContent {
  position: absolute;
  width: 100%;
  height: 100%;
  opacity: 0;
  color: transparent;
  user-select: none;
  pointer-events: none;
}

.annotationLayer .annotationTextContent span {
  width: 100%;
  display: inline-block;
}

.annotationLayer svg.quadrilateralsContainer {
  contain: strict;
  width: 0;
  height: 0;
  position: absolute;
  top: 0;
  left: 0;
  z-index: -1;
}
`,renderPage=async(ki,$n)=>{const Pn=ki.getViewport({scale:1}),Kn=Pn.width/Pn.height,Mn=innerWidth/innerHeight/Kn,ti=devicePixelRatio*Mn,In=ki.getViewport({scale:ti}),Ln=document.createElement("canvas");Ln.height=In.height,Ln.width=In.width;const jn=Ln.getContext("2d");await ki.render({canvasContext:jn,viewport:In}).promise;const Cn=await new Promise(ei=>Ln.toBlob(ei));if($n)return Cn;const Tn=document.createElement("div");Tn.classList.add("textLayer"),await pdfjsLib.renderTextLayer({textContentSource:await ki.getTextContent(),container:Tn,viewport:In}).promise;const Rn=document.createElement("div");Rn.classList.add("annotationLayer"),await new pdfjsLib.AnnotationLayer({page:ki,viewport:In,div:Rn}).render({annotations:await ki.getAnnotations(),linkService:{getDestinationHash:ei=>JSON.stringify(ei),addLinkAttributes:(ei,Bn)=>ei.href=Bn}});const ui=URL.createObjectURL(Cn);return URL.createObjectURL(new Blob([`
        <!DOCTYPE html>
        <meta charset="utf-8">
        <style>
        :root {
            --scale-factor: ${ti};
        }
        html, body {
            margin: 0;
            padding: 0;
        }
        ${textLayerBuilderCSS}
        ${annotationLayerBuilderCSS}
        </style>
        <img src="${ui}">
        ${Tn.outerHTML}
        ${Rn.outerHTML}
    `],{type:"text/html"}))},makeTOCItem=ki=>({label:ki.title,href:JSON.stringify(ki.dest),subitems:ki.items.length?ki.items.map(makeTOCItem):null}),makePDF=async ki=>{var In;const $n=new Uint8Array(await ki.arrayBuffer()),Pn=await pdfjsLib.getDocument({data:$n}).promise,Kn={rendition:{layout:"pre-paginated"}},oi=(In=await Pn.getMetadata())==null?void 0:In.info;Kn.metadata={title:oi==null?void 0:oi.Title,author:oi==null?void 0:oi.Author};const Mn=await Pn.getOutline();Kn.toc=Mn==null?void 0:Mn.map(makeTOCItem);const ti=new Map;return Kn.sections=Array.from({length:Pn.numPages}).map((Ln,jn)=>({id:jn,load:async()=>{const Cn=ti.get(jn);if(Cn)return Cn;const Tn=await renderPage(await Pn.getPage(jn+1));return ti.set(jn,Tn),Tn},size:1e3})),Kn.sections[0].pageSpread="right",Kn.isExternal=Ln=>/^\w+:/i.test(Ln),Kn.resolveHref=async Ln=>{const jn=JSON.parse(Ln),Cn=typeof jn=="string"?await Pn.getDestination(jn):jn;return{index:await Pn.getPageIndex(Cn[0])}},Kn.splitTOCHref=async Ln=>{const jn=JSON.parse(Ln),Cn=typeof jn=="string"?await Pn.getDestination(jn):jn;return[await Pn.getPageIndex(Cn[0]),null]},Kn.getTOCFragment=Ln=>Ln.documentElement,Kn.getCover=async()=>renderPage(await Pn.getPage(1),!0),Kn},pdf=Object.freeze(Object.defineProperty({__proto__:null,makePDF},Symbol.toStringTag,{value:"Module"})),unescapeHTML=ki=>{if(!ki)return"";const $n=document.createElement("textarea");return $n.innerHTML=ki,$n.value},MIME={XML:"application/xml",XHTML:"application/xhtml+xml",HTML:"text/html",CSS:"text/css",SVG:"image/svg+xml"},PDB_HEADER={name:[0,32,"string"],type:[60,4,"string"],creator:[64,4,"string"],numRecords:[76,2,"uint"]},PALMDOC_HEADER={compression:[0,2,"uint"],numTextRecords:[8,2,"uint"],recordSize:[10,2,"uint"],encryption:[12,2,"uint"]},MOBI_HEADER={magic:[16,4,"string"],length:[20,4,"uint"],type:[24,4,"uint"],encoding:[28,4,"uint"],uid:[32,4,"uint"],version:[36,4,"uint"],titleOffset:[84,4,"uint"],titleLength:[88,4,"uint"],localeRegion:[94,1,"uint"],localeLanguage:[95,1,"uint"],resourceStart:[108,4,"uint"],huffcdic:[112,4,"uint"],numHuffcdic:[116,4,"uint"],exthFlag:[128,4,"uint"],trailingFlags:[240,4,"uint"],indx:[244,4,"uint"]},KF8_HEADER={resourceStart:[108,4,"uint"],fdst:[192,4,"uint"],numFdst:[196,4,"uint"],frag:[248,4,"uint"],skel:[252,4,"uint"],guide:[260,4,"uint"]},EXTH_HEADER={magic:[0,4,"string"],length:[4,4,"uint"],count:[8,4,"uint"]},INDX_HEADER={magic:[0,4,"string"],length:[4,4,"uint"],type:[8,4,"uint"],idxt:[20,4,"uint"],numRecords:[24,4,"uint"],encoding:[28,4,"uint"],language:[32,4,"uint"],total:[36,4,"uint"],ordt:[40,4,"uint"],ligt:[44,4,"uint"],numLigt:[48,4,"uint"],numCncx:[52,4,"uint"]},TAGX_HEADER={magic:[0,4,"string"],length:[4,4,"uint"],numControlBytes:[8,4,"uint"]},HUFF_HEADER={magic:[0,4,"string"],offset1:[8,4,"uint"],offset2:[12,4,"uint"]},CDIC_HEADER={magic:[0,4,"string"],length:[4,4,"uint"],numEntries:[8,4,"uint"],codeLength:[12,4,"uint"]},FDST_HEADER={magic:[0,4,"string"],numEntries:[8,4,"uint"]},FONT_HEADER={flags:[8,4,"uint"],dataStart:[12,4,"uint"],keyLength:[16,4,"uint"],keyStart:[20,4,"uint"]},MOBI_ENCODING={1252:"windows-1252",65001:"utf-8"},EXTH_RECORD_TYPE={100:["creator","string",!0],101:["publisher"],103:["description"],104:["isbn"],105:["subject","string",!0],106:["date"],108:["contributor","string",!0],109:["rights"],110:["subjectCode","string",!0],112:["source","string",!0],113:["asin"],121:["boundary","uint"],122:["fixedLayout"],125:["numResources","uint"],126:["originalResolution"],127:["zeroGutter"],128:["zeroMargin"],129:["coverURI"],132:["regionMagnification"],201:["coverOffset","uint"],202:["thumbnailOffset","uint"],503:["title"],524:["language","string",!0],527:["pageProgressionDirection"]},MOBI_LANG={1:["ar","ar-SA","ar-IQ","ar-EG","ar-LY","ar-DZ","ar-MA","ar-TN","ar-OM","ar-YE","ar-SY","ar-JO","ar-LB","ar-KW","ar-AE","ar-BH","ar-QA"],2:["bg"],3:["ca"],4:["zh","zh-TW","zh-CN","zh-HK","zh-SG"],5:["cs"],6:["da"],7:["de","de-DE","de-CH","de-AT","de-LU","de-LI"],8:["el"],9:["en","en-US","en-GB","en-AU","en-CA","en-NZ","en-IE","en-ZA","en-JM",null,"en-BZ","en-TT","en-ZW","en-PH"],10:["es","es-ES","es-MX",null,"es-GT","es-CR","es-PA","es-DO","es-VE","es-CO","es-PE","es-AR","es-EC","es-CL","es-UY","es-PY","es-BO","es-SV","es-HN","es-NI","es-PR"],11:["fi"],12:["fr","fr-FR","fr-BE","fr-CA","fr-CH","fr-LU","fr-MC"],13:["he"],14:["hu"],15:["is"],16:["it","it-IT","it-CH"],17:["ja"],18:["ko"],19:["nl","nl-NL","nl-BE"],20:["no","nb","nn"],21:["pl"],22:["pt","pt-BR","pt-PT"],23:["rm"],24:["ro"],25:["ru"],26:["hr",null,"sr"],27:["sk"],28:["sq"],29:["sv","sv-SE","sv-FI"],30:["th"],31:["tr"],32:["ur"],33:["id"],34:["uk"],35:["be"],36:["sl"],37:["et"],38:["lv"],39:["lt"],41:["fa"],42:["vi"],43:["hy"],44:["az"],45:["eu"],46:["hsb"],47:["mk"],48:["st"],49:["ts"],50:["tn"],52:["xh"],53:["zu"],54:["af"],55:["ka"],56:["fo"],57:["hi"],58:["mt"],59:["se"],62:["ms"],63:["kk"],65:["sw"],67:["uz",null,"uz-UZ"],68:["tt"],69:["bn"],70:["pa"],71:["gu"],72:["or"],73:["ta"],74:["te"],75:["kn"],76:["ml"],77:["as"],78:["mr"],79:["sa"],82:["cy","cy-GB"],83:["gl","gl-ES"],87:["kok"],97:["ne"],98:["fy"]},concatTypedArray=(ki,$n)=>{const Pn=new ki.constructor(ki.length+$n.length);return Pn.set(ki),Pn.set($n,ki.length),Pn},concatTypedArray3=(ki,$n,Pn)=>{const Kn=new ki.constructor(ki.length+$n.length+Pn.length);return Kn.set(ki),Kn.set($n,ki.length),Kn.set(Pn,ki.length+$n.length),Kn},decoder=new TextDecoder,getString=ki=>decoder.decode(ki),getUint=ki=>{if(!ki)return;const $n=ki.byteLength,Pn=$n===4?"getUint32":$n===2?"getUint16":"getUint8";return new DataView(ki)[Pn](0)},getStruct=(ki,$n)=>Object.fromEntries(Array.from(Object.entries(ki)).map(([Pn,[Kn,oi,Mn]])=>[Pn,(Mn==="string"?getString:getUint)($n.slice(Kn,Kn+oi))])),getDecoder=ki=>new TextDecoder(MOBI_ENCODING[ki]),getVarLen=(ki,$n=0)=>{let Pn=0,Kn=0;for(const oi of ki.subarray($n,$n+4))if(Pn=Pn<<7|(oi&127)>>>0,Kn++,oi&128)break;return{value:Pn,length:Kn}},getVarLenFromEnd=ki=>{let $n=0;for(const Pn of ki.subarray(-4))Pn&128&&($n=0),$n=$n<<7|Pn&127;return $n},countBitsSet=ki=>{let $n=0;for(;ki>0;ki=ki>>1)(ki&1)===1&&$n++;return $n},countUnsetEnd=ki=>{let $n=0;for(;!(ki&1);)ki=ki>>1,$n++;return $n},decompressPalmDOC=ki=>{let $n=[];for(let Pn=0;Pn<ki.length;Pn++){const Kn=ki[Pn];if(Kn===0)$n.push(0);else if(Kn<=8)for(const oi of ki.subarray(Pn+1,(Pn+=Kn)+1))$n.push(oi);else if(Kn<=127)$n.push(Kn);else if(Kn<=191){const oi=Kn<<8|ki[Pn+++1],Mn=(oi&16383)>>>3,ti=(oi&7)+3;for(let In=0;In<ti;In++)$n.push($n[$n.length-Mn])}else $n.push(32,Kn^128)}return Uint8Array.from($n)},read32Bits=(ki,$n)=>{const Pn=$n>>3,Kn=$n+32,oi=Kn>>3;let Mn=0n;for(let ti=Pn;ti<=oi;ti++)Mn=Mn<<8n|BigInt(ki[ti]??0);return Mn>>8n-BigInt(Kn&7)&0xffffffffn},huffcdic=async(ki,$n)=>{const Pn=await $n(ki.huffcdic),{magic:Kn,offset1:oi,offset2:Mn}=getStruct(HUFF_HEADER,Pn);if(Kn!=="HUFF")throw new Error("Invalid HUFF record");const ti=Array.from({length:256},(Cn,Tn)=>oi+Tn*4).map(Cn=>getUint(Pn.slice(Cn,Cn+4))).map(Cn=>[Cn&128,Cn&31,Cn>>>8]),In=[null].concat(Array.from({length:32},(Cn,Tn)=>Mn+Tn*8).map(Cn=>[getUint(Pn.slice(Cn,Cn+4)),getUint(Pn.slice(Cn+4,Cn+8))])),Ln=[];for(let Cn=1;Cn<ki.numHuffcdic;Cn++){const Tn=await $n(ki.huffcdic+Cn),Rn=getStruct(CDIC_HEADER,Tn);if(Rn.magic!=="CDIC")throw new Error("Invalid CDIC record");const ui=Math.min(1<<Rn.codeLength,Rn.numEntries-Ln.length),si=Tn.slice(Rn.length);for(let ei=0;ei<ui;ei++){const Bn=getUint(si.slice(ei*2,ei*2+2)),Nn=getUint(si.slice(Bn,Bn+2)),Hn=Nn&32767,On=Nn&32768,hi=new Uint8Array(si.slice(Bn+2,Bn+2+Hn));Ln.push([hi,On])}}const jn=Cn=>{let Tn=new Uint8Array;const Rn=Cn.byteLength*8;for(let ui=0;ui<Rn;){const si=Number(read32Bits(Cn,ui));let[ei,Bn,Nn]=ti[si>>>24];if(!ei){for(;si>>>32-Bn<In[Bn][0];)Bn+=1;Nn=In[Bn][1]}if((ui+=Bn)>Rn)break;const Hn=Nn-(si>>>32-Bn);let[On,hi]=Ln[Hn];hi||(On=jn(On),Ln[Hn]=[On,!0]),Tn=concatTypedArray(Tn,On)}return Tn};return jn},getIndexData=async(ki,$n)=>{const Pn=await $n(ki),Kn=getStruct(INDX_HEADER,Pn);if(Kn.magic!=="INDX")throw new Error("Invalid INDX record");const oi=getDecoder(Kn.encoding),Mn=Pn.slice(Kn.length),ti=getStruct(TAGX_HEADER,Mn);if(ti.magic!=="TAGX")throw new Error("Invalid TAGX section");const In=(ti.length-12)/4,Ln=Array.from({length:In},(Rn,ui)=>new Uint8Array(Mn.slice(12+ui*4,12+ui*4+4))),jn={};let Cn=0;for(let Rn=0;Rn<Kn.numCncx;Rn++){const ui=await $n(ki+Kn.numRecords+Rn+1),si=new Uint8Array(ui);for(let ei=0;ei<si.byteLength;){const Bn=ei,{value:Nn,length:Hn}=getVarLen(si,ei);ei+=Hn;const On=ui.slice(ei,ei+Nn);ei+=Nn,jn[Cn+Bn]=oi.decode(On)}Cn+=65536}const Tn=[];for(let Rn=0;Rn<Kn.numRecords;Rn++){const ui=await $n(ki+1+Rn),si=new Uint8Array(ui),ei=getStruct(INDX_HEADER,ui);if(ei.magic!=="INDX")throw new Error("Invalid INDX record");for(let Bn=0;Bn<ei.numRecords;Bn++){const Nn=ei.idxt+4+2*Bn,Hn=getUint(ui.slice(Nn,Nn+2)),On=getUint(ui.slice(Hn,Hn+1)),hi=getString(ui.slice(Hn+1,Hn+1+On)),Xn=[],ii=Hn+1+On;let ri=0,di=ii+ti.numControlBytes;for(const[wi,Jn,pi,Zn]of Ln){if(Zn&1){ri++;continue}const Gn=ii+ri,mi=getUint(ui.slice(Gn,Gn+1))&pi;if(mi===pi)if(countBitsSet(pi)>1){const{value:Wn,length:ni}=getVarLen(si,di);Xn.push([wi,null,Wn,Jn]),di+=ni}else Xn.push([wi,1,null,Jn]);else Xn.push([wi,mi>>countUnsetEnd(pi),null,Jn])}const fi={};for(const[wi,Jn,pi,Zn]of Xn){const Gn=[];if(Jn!=null)for(let mi=0;mi<Jn*Zn;mi++){const{value:Wn,length:ni}=getVarLen(si,di);Gn.push(Wn),di+=ni}else{let mi=0;for(;mi<pi;){const{value:Wn,length:ni}=getVarLen(si,di);Gn.push(Wn),di+=ni,mi+=ni}}fi[wi]=Gn}Tn.push({name:hi,tagMap:fi})}}return{table:Tn,cncx:jn}},getNCX=async(ki,$n)=>{const{table:Pn,cncx:Kn}=await getIndexData(ki,$n),oi=Pn.map(({tagMap:ti},In)=>{var Ln,jn,Cn,Tn,Rn,ui;return{index:In,offset:(Ln=ti[1])==null?void 0:Ln[0],size:(jn=ti[2])==null?void 0:jn[0],label:Kn[ti[3]]??"",headingLevel:(Cn=ti[4])==null?void 0:Cn[0],pos:ti[6],parent:(Tn=ti[21])==null?void 0:Tn[0],firstChild:(Rn=ti[22])==null?void 0:Rn[0],lastChild:(ui=ti[23])==null?void 0:ui[0]}}),Mn=ti=>(ti.firstChild==null||(ti.children=oi.filter(In=>In.parent===ti.index).map(Mn)),ti);return oi.filter(ti=>ti.headingLevel===0).map(Mn)},getEXTH=(ki,$n)=>{const{magic:Pn,count:Kn}=getStruct(EXTH_HEADER,ki);if(Pn!=="EXTH")throw new Error("Invalid EXTH header");const oi=getDecoder($n),Mn={};let ti=12;for(let In=0;In<Kn;In++){const Ln=getUint(ki.slice(ti,ti+4)),jn=getUint(ki.slice(ti+4,ti+8));if(Ln in EXTH_RECORD_TYPE){const[Cn,Tn,Rn]=EXTH_RECORD_TYPE[Ln],ui=ki.slice(ti+8,ti+jn),si=Tn==="uint"?getUint(ui):oi.decode(ui);Rn?(Mn[Cn]??(Mn[Cn]=[]),Mn[Cn].push(si)):Mn[Cn]=si}ti+=jn}return Mn},getFont=async(ki,$n)=>{const{flags:Pn,dataStart:Kn,keyLength:oi,keyStart:Mn}=getStruct(FONT_HEADER,ki),ti=new Uint8Array(ki.slice(Kn));if(Pn&2){const Ln=oi===16?1024:1040,jn=new Uint8Array(ki.slice(Mn,Mn+oi)),Cn=Math.min(Ln,ti.length);for(var In=0;In<Cn;In++)ti[In]=ti[In]^jn[In%jn.length]}if(Pn&1)try{return await $n(ti)}catch(Ln){console.warn(Ln),console.warn("Failed to decompress font")}return ti},isMOBI=async ki=>getString(await ki.slice(60,68).arrayBuffer())==="BOOKMOBI";class PDB{constructor(){Ki(this,vo,void 0);Ki(this,ko,void 0);ta(this,"pdb")}async open($n){ds(this,vo,$n);const Pn=getStruct(PDB_HEADER,await $n.slice(0,78).arrayBuffer());this.pdb=Pn;const Kn=await $n.slice(78,78+Pn.numRecords*8).arrayBuffer();ds(this,ko,Array.from({length:Pn.numRecords},(oi,Mn)=>getUint(Kn.slice(Mn*8,Mn*8+4))).map((oi,Mn,ti)=>[oi,ti[Mn+1]]))}loadRecord($n){const Pn=vi(this,ko)[$n];if(!Pn)throw new RangeError("Record index out of bounds");return vi(this,vo).slice(...Pn).arrayBuffer()}async loadMagic($n){const Pn=vi(this,ko)[$n][0];return getString(await vi(this,vo).slice(Pn,Pn+4).arrayBuffer())}}vo=new WeakMap,ko=new WeakMap;class MOBI extends PDB{constructor({unzlib:Pn}){super();Ki(this,y0);Ki(this,Z0);Ki(this,Co,0);Ki(this,p0,void 0);Ki(this,m0,void 0);Ki(this,x0,void 0);Ki(this,To,void 0);Ki(this,b0,void 0);this.unzlib=Pn}async open(Pn){var oi;await super.open(Pn),this.headers=Qi(this,y0,ql).call(this,await super.loadRecord(0)),ds(this,p0,this.headers.mobi.resourceStart);let Kn=this.headers.mobi.version>=8;if(!Kn){const Mn=(oi=this.headers.exth)==null?void 0:oi.boundary;if(Mn<4294967295)try{this.headers=Qi(this,y0,ql).call(this,await super.loadRecord(Mn)),ds(this,Co,Mn),Kn=!0}catch(ti){console.warn(ti),console.warn("Failed to open KF8; falling back to MOBI")}}return await Qi(this,Z0,nu).call(this),Kn?new KF8(this).init():new MOBI6(this).init()}decode(...Pn){return vi(this,m0).decode(...Pn)}encode(...Pn){return vi(this,x0).encode(...Pn)}loadRecord(Pn){return super.loadRecord(vi(this,Co)+Pn)}loadMagic(Pn){return super.loadMagic(vi(this,Co)+Pn)}loadText(Pn){return this.loadRecord(Pn+1).then(Kn=>new Uint8Array(Kn)).then(vi(this,b0)).then(vi(this,To))}async loadResource(Pn){const Kn=await super.loadRecord(vi(this,p0)+Pn),oi=getString(Kn.slice(0,4));return oi==="FONT"?getFont(Kn,this.unzlib):oi==="VIDE"||oi==="AUDI"?Kn.slice(12):Kn}getNCX(){const Pn=this.headers.mobi.indx;if(Pn<4294967295)return getNCX(Pn,this.loadRecord.bind(this))}getMetadata(){var oi,Mn;const{mobi:Pn,exth:Kn}=this.headers;return{identifier:Pn.uid.toString(),title:unescapeHTML((Kn==null?void 0:Kn.title)||this.decode(Pn.title)),author:(oi=Kn==null?void 0:Kn.creator)==null?void 0:oi.map(unescapeHTML),publisher:unescapeHTML(Kn==null?void 0:Kn.publisher),language:(Kn==null?void 0:Kn.language)??Pn.language,published:Kn==null?void 0:Kn.date,description:unescapeHTML(Kn==null?void 0:Kn.description),subject:(Mn=Kn==null?void 0:Kn.subject)==null?void 0:Mn.map(unescapeHTML),rights:unescapeHTML(Kn==null?void 0:Kn.rights)}}async getCover(){const{exth:Pn}=this.headers,Kn=(Pn==null?void 0:Pn.coverOffset)<4294967295?Pn==null?void 0:Pn.coverOffset:(Pn==null?void 0:Pn.thumbnailOffset)<4294967295?Pn==null?void 0:Pn.thumbnailOffset:null;if(Kn!=null){const oi=await this.loadResource(Kn);return new Blob([oi])}}}Co=new WeakMap,p0=new WeakMap,m0=new WeakMap,x0=new WeakMap,To=new WeakMap,b0=new WeakMap,y0=new WeakSet,ql=function(Pn){const Kn=getStruct(PALMDOC_HEADER,Pn),oi=getStruct(MOBI_HEADER,Pn);if(oi.magic!=="MOBI")throw new Error("Missing MOBI header");const{titleOffset:Mn,titleLength:ti,localeLanguage:In,localeRegion:Ln}=oi;oi.title=Pn.slice(Mn,Mn+ti);const jn=MOBI_LANG[In];oi.language=(jn==null?void 0:jn[Ln>>2])??(jn==null?void 0:jn[0]);const Cn=oi.exthFlag&64?getEXTH(Pn.slice(oi.length+16),oi.encoding):null,Tn=oi.version>=8?getStruct(KF8_HEADER,Pn):null;return{palmdoc:Kn,mobi:oi,exth:Cn,kf8:Tn}},Z0=new WeakSet,nu=async function(){const{palmdoc:Pn,mobi:Kn}=this.headers;ds(this,m0,getDecoder(Kn.encoding)),ds(this,x0,new TextEncoder);const{compression:oi}=Pn;if(ds(this,To,oi===1?Ln=>Ln:oi===2?decompressPalmDOC:oi===17480?await huffcdic(Kn,this.loadRecord.bind(this)):null),!vi(this,To))throw new Error("Unknown compression type");const{trailingFlags:Mn}=Kn,ti=Mn&1,In=countBitsSet(Mn>>>1);ds(this,b0,Ln=>{for(let jn=0;jn<In;jn++){const Cn=getVarLenFromEnd(Ln);Ln=Ln.subarray(0,-Cn)}if(ti){const jn=(Ln[Ln.length-1]&3)+1;Ln=Ln.subarray(0,-jn)}return Ln})};const mbpPagebreakRegex=/<\s*(?:mbp:)?pagebreak[^>]*>/gi,fileposRegex=/<[^<>]+filepos=['"]{0,1}(\d+)[^<>]*>/gi,getIndent=ki=>{let $n=0;for(;ki;){const Pn=ki.parentElement;if(Pn){const Kn=Pn.tagName.toLowerCase();Kn==="p"?$n+=1.5:Kn==="blockquote"&&($n+=2)}ki=Pn}return $n};class MOBI6{constructor($n){ta(this,"parser",new DOMParser);ta(this,"serializer",new XMLSerializer);Ki(this,Kr,new Map);Ki(this,Eo,new Map);Ki(this,Yr,new Map);Ki(this,Rr,void 0);Ki(this,w0,[]);Ki(this,S0,MIME.HTML);this.mobi=$n}async init(){var Kn;let $n=new Uint8Array;for(let oi=0;oi<this.mobi.headers.palmdoc.numTextRecords;oi++)$n=concatTypedArray($n,await this.mobi.loadText(oi));const Pn=Array.from(new Uint8Array($n),oi=>String.fromCharCode(oi)).join("");ds(this,Rr,[0].concat(Array.from(Pn.matchAll(mbpPagebreakRegex),oi=>oi.index)).map((oi,Mn,ti)=>Pn.slice(oi,ti[Mn+1])).map(oi=>Uint8Array.from(oi,Mn=>Mn.charCodeAt(0))).map(oi=>({book:this,raw:oi})).reduce((oi,Mn)=>{const ti=oi[oi.length-1];return Mn.start=(ti==null?void 0:ti.end)??0,Mn.end=Mn.start+Mn.raw.byteLength,oi.concat(Mn)},[])),this.sections=vi(this,Rr).map((oi,Mn)=>({id:Mn,load:()=>this.loadSection(oi),createDocument:()=>this.createDocument(oi),size:oi.end-oi.start}));try{this.landmarks=await this.getGuide();const oi=(Kn=this.landmarks.find(({type:Mn})=>Mn==null?void 0:Mn.includes("toc")))==null?void 0:Kn.href;if(oi){const{index:Mn}=this.resolveHref(oi),ti=await this.sections[Mn].createDocument();let In,Ln=0,jn=0;const Cn=new Map,Tn=new Map;this.toc=Array.from(ti.querySelectorAll("a[filepos]")).reduce((Rn,ui)=>{var Nn;const si=getIndent(ui),ei={label:(Nn=ui.innerText)==null?void 0:Nn.trim(),href:`filepos:${ui.getAttribute("filepos")}`},Bn=si>jn?Ln+1:si===jn?Ln:Cn.get(si)??Math.max(0,Ln-1);if(Bn>Ln)In?(In.subitems??(In.subitems=[]),In.subitems.push(ei),Tn.set(Bn,In)):Rn.push(ei);else{const Hn=Tn.get(Bn);Hn?Hn.subitems.push(ei):Rn.push(ei)}return In=ei,Ln=Bn,jn=si,Cn.set(si,Bn),Rn},[])}}catch(oi){console.warn(oi)}return ds(this,w0,[...new Set(Array.from(Pn.matchAll(fileposRegex),oi=>oi[1]))].map(oi=>({filepos:oi,number:Number(oi)})).sort((oi,Mn)=>oi.number-Mn.number)),this.metadata=this.mobi.getMetadata(),this.getCover=this.mobi.getCover.bind(this.mobi),this}async getGuide(){const $n=await this.createDocument(vi(this,Rr)[0]);return Array.from($n.getElementsByTagName("reference"),Pn=>{var Kn;return{label:Pn.getAttribute("title"),type:(Kn=Pn.getAttribute("type"))==null?void 0:Kn.split(/\s/),href:`filepos:${Pn.getAttribute("filepos")}`}})}async loadResource($n){if(vi(this,Kr).has($n))return vi(this,Kr).get($n);const Pn=await this.mobi.loadResource($n),Kn=URL.createObjectURL(new Blob([Pn]));return vi(this,Kr).set($n,Kn),Kn}async loadRecindex($n){return this.loadResource(Number($n)-1)}async replaceResources($n){for(const Pn of $n.querySelectorAll("img[recindex]")){const Kn=Pn.getAttribute("recindex");try{Pn.src=await this.loadRecindex(Kn)}catch{console.warn(`Failed to load image ${Kn}`)}}for(const Pn of $n.querySelectorAll("[mediarecindex]")){const Kn=Pn.getAttribute("mediarecindex"),oi=Pn.getAttribute("recindex");try{Pn.src=await this.loadRecindex(Kn),oi&&(Pn.poster=await this.loadRecindex(oi))}catch{console.warn(`Failed to load media ${Kn}`)}}for(const Pn of $n.querySelectorAll("[filepos]")){const Kn=Pn.getAttribute("filepos");Pn.href=`filepos:${Kn}`}}async loadText($n){if(vi(this,Eo).has($n))return vi(this,Eo).get($n);const{raw:Pn}=$n,Kn=vi(this,w0).filter(({number:ti})=>ti>=$n.start&&ti<$n.end).map(ti=>({...ti,offset:ti.number-$n.start}));let oi=Pn;Kn.length&&(oi=Pn.subarray(0,Kn[0].offset),Kn.forEach(({filepos:ti,offset:In},Ln)=>{const jn=Kn[Ln+1],Cn=this.mobi.encode(`<a id="filepos${ti}"></a>`);oi=concatTypedArray3(oi,Cn,Pn.subarray(In,jn==null?void 0:jn.offset))}));const Mn=this.mobi.decode(oi).replaceAll(mbpPagebreakRegex,"");return vi(this,Eo).set($n,Mn),Mn}async createDocument($n){const Pn=await this.loadText($n);return this.parser.parseFromString(Pn,vi(this,S0))}async loadSection($n){if(vi(this,Yr).has($n))return vi(this,Yr).get($n);const Pn=await this.createDocument($n),Kn=Pn.createElement("style");Pn.head.append(Kn),Kn.append(Pn.createTextNode(`blockquote {
            margin-block-start: 0;
            margin-block-end: 0;
            margin-inline-start: 1em;
            margin-inline-end: 0;
        }`)),await this.replaceResources(Pn);const oi=this.serializer.serializeToString(Pn),Mn=URL.createObjectURL(new Blob([oi],{type:vi(this,S0)}));return vi(this,Yr).set($n,Mn),Mn}resolveHref($n){const Pn=$n.match(/filepos:(.*)/)[1],Kn=Number(Pn);return{index:vi(this,Rr).findIndex(ti=>ti.end>Kn),anchor:ti=>ti.getElementById(`filepos${Pn}`)}}splitTOCHref($n){const Pn=$n.match(/filepos:(.*)/)[1],Kn=Number(Pn);return[vi(this,Rr).findIndex(Mn=>Mn.end>Kn),`filepos${Pn}`]}getTOCFragment($n,Pn){return $n.getElementById(Pn)}isExternal($n){return/^(?!blob|filepos)\w+:/i.test($n)}destroy(){for(const $n of vi(this,Kr).values())URL.revokeObjectURL($n);for(const $n of vi(this,Yr).values())URL.revokeObjectURL($n)}}Kr=new WeakMap,Eo=new WeakMap,Yr=new WeakMap,Rr=new WeakMap,w0=new WeakMap,S0=new WeakMap;const kindleResourceRegex=/kindle:(flow|embed):(\w+)(?:\?mime=(\w+\/[-+.\w]+))?/,kindlePosRegex=/kindle:pos:fid:(\w+):off:(\w+)/,parseResourceURI=ki=>{const[$n,Pn,Kn]=ki.match(kindleResourceRegex).slice(1);return{resourceType:$n,id:parseInt(Pn,32),type:Kn}},parsePosURI=ki=>{const[$n,Pn]=ki.match(kindlePosRegex).slice(1);return{fid:parseInt($n,32),off:parseInt(Pn,32)}},makePosURI=(ki=0,$n=0)=>`kindle:pos:fid:${ki.toString(32).toUpperCase().padStart(4,"0")}:off:${$n.toString(32).toUpperCase().padStart(10,"0")}`,getFragmentSelector=ki=>{const $n=ki.match(/\s(id|name|aid)\s*=\s*['"]([^'"]*)['"]/i);if(!$n)return;const[,Pn,Kn]=$n;return`[${Pn}="${CSS.escape(Kn)}"]`},replaceSeries=async(ki,$n,Pn)=>{const Kn=[];ki.replace($n,(...Mn)=>(Kn.push(Mn),null));const oi=[];for(const Mn of Kn)oi.push(await Pn(...Mn));return ki.replace($n,()=>oi.shift())},getPageSpread=ki=>{for(const $n of ki){if($n==="page-spread-left"||$n==="rendition:page-spread-left")return"left";if($n==="page-spread-right"||$n==="rendition:page-spread-right")return"right";if($n==="rendition:page-spread-center")return"center"}};class KF8{constructor($n){Ki(this,v0);ta(this,"parser",new DOMParser);ta(this,"serializer",new XMLSerializer);Ki(this,sr,new Map);Ki(this,Fo,new Map);Ki(this,Jr,new Map);Ki(this,Zr,{});Ki(this,Qr,void 0);Ki(this,Lr,void 0);Ki(this,Dr,new Uint8Array);Ki(this,yr,new Uint8Array);Ki(this,Q0,-1);Ki(this,ec,-1);Ki(this,Nr,MIME.XHTML);Ki(this,A0,new Map);this.mobi=$n}async init(){var jn,Cn,Tn,Rn;const $n=this.mobi.loadRecord.bind(this.mobi),{kf8:Pn}=this.mobi.headers;try{const ui=await $n(Pn.fdst),si=getStruct(FDST_HEADER,ui);if(si.magic!=="FDST")throw new Error("Missing FDST record");const ei=Array.from({length:si.numEntries},(Bn,Nn)=>12+Nn*8).map(Bn=>[getUint(ui.slice(Bn,Bn+4)),getUint(ui.slice(Bn+4,Bn+8))]);vi(this,Zr).fdstTable=ei,ds(this,Lr,ei[ei.length-1][1])}catch{}const Kn=(await getIndexData(Pn.skel,$n)).table.map(({name:ui,tagMap:si},ei)=>({index:ei,name:ui,numFrag:si[1][0],offset:si[6][0],length:si[6][1]})),oi=await getIndexData(Pn.frag,$n),Mn=oi.table.map(({name:ui,tagMap:si})=>({insertOffset:parseInt(ui),selector:oi.cncx[si[2][0]],index:si[4][0],offset:si[6][0],length:si[6][1]}));vi(this,Zr).skelTable=Kn,vi(this,Zr).fragTable=Mn,ds(this,Qr,Kn.reduce((ui,si)=>{const ei=ui[ui.length-1],Bn=(ei==null?void 0:ei.fragEnd)??0,Nn=Bn+si.numFrag,Hn=Mn.slice(Bn,Nn),On=si.length+Hn.map(Xn=>Xn.length).reduce((Xn,ii)=>Xn+ii),hi=((ei==null?void 0:ei.totalLength)??0)+On;return ui.concat({skel:si,frags:Hn,fragEnd:Nn,length:On,totalLength:hi})},[]));const ti=await this.getResourcesByMagic(["RESC","PAGE"]),In=new Map;if(ti.RESC){const ui=await this.mobi.loadRecord(ti.RESC),si=this.mobi.decode(ui.slice(16)).replace(/\0/g,""),ei=si.search(/\?>/),Bn=`<package>${si.slice(ei)}</package>`,Nn=this.parser.parseFromString(Bn,MIME.XML);for(const Hn of Nn.querySelectorAll("spine > itemref")){const On=parseInt(Hn.getAttribute("skelid"));In.set(On,getPageSpread(((jn=Hn.getAttribute("properties"))==null?void 0:jn.split(" "))??[]))}}this.sections=vi(this,Qr).map((ui,si)=>ui.frags.length?{id:si,load:()=>this.loadSection(ui),createDocument:()=>this.createDocument(ui),size:ui.length,pageSpread:In.get(si)}:{linear:"no"});try{const ui=await this.mobi.getNCX(),si=({label:ei,pos:Bn,children:Nn})=>{const[Hn,On]=Bn,hi=makePosURI(Hn,On),Xn=vi(this,Fo).get(Hn);return Xn?Xn.push(On):vi(this,Fo).set(Hn,[On]),{label:unescapeHTML(ei),href:hi,subitems:Nn==null?void 0:Nn.map(si)}};this.toc=ui==null?void 0:ui.map(si),this.landmarks=await this.getGuide()}catch(ui){console.warn(ui)}const{exth:Ln}=this.mobi.headers;return this.dir=Ln.pageProgressionDirection,this.rendition={layout:Ln.fixedLayout==="true"?"pre-paginated":"reflowable",viewport:Object.fromEntries(((Rn=(Tn=(Cn=Ln.originalResolution)==null?void 0:Cn.split("x"))==null?void 0:Tn.slice(0,2))==null?void 0:Rn.map((ui,si)=>[si?"height":"width",ui]))??[])},this.metadata=this.mobi.getMetadata(),this.getCover=this.mobi.getCover.bind(this.mobi),this}async getResourcesByMagic($n){const Pn={},Kn=this.mobi.headers.kf8.resourceStart,oi=this.mobi.pdb.numRecords;for(let Mn=Kn;Mn<oi;Mn++)try{const ti=await this.mobi.loadMagic(Mn),In=$n.find(Ln=>Ln===ti);In&&(Pn[In]=Mn)}catch{}return Pn}async getGuide(){const $n=this.mobi.headers.kf8.guide;if($n<4294967295){const Pn=this.mobi.loadRecord.bind(this.mobi),{table:Kn,cncx:oi}=await getIndexData($n,Pn);return Kn.map(({name:Mn,tagMap:ti})=>{var In,Ln;return{label:oi[ti[1][0]]??"",type:Mn==null?void 0:Mn.split(/\s/),href:makePosURI(((In=ti[6])==null?void 0:In[0])??((Ln=ti[3])==null?void 0:Ln[0]))}})}}async loadResourceBlob($n){var Ln;const{resourceType:Pn,id:Kn,type:oi}=parseResourceURI($n),Mn=Pn==="flow"?await this.loadFlow(Kn):await this.mobi.loadResource(Kn-1),ti=[MIME.XHTML,MIME.HTML,MIME.CSS,MIME.SVG].includes(oi)?await this.replaceResources(this.mobi.decode(Mn)):Mn,In=oi===MIME.SVG?this.parser.parseFromString(ti,oi):null;return[new Blob([ti],{type:oi}),(Ln=In==null?void 0:In.getElementsByTagNameNS("http://www.w3.org/2000/svg","image"))!=null&&Ln.length?In.documentElement:null]}async loadResource($n){if(vi(this,sr).has($n))return vi(this,sr).get($n);const[Pn,Kn]=await this.loadResourceBlob($n),oi=Kn?$n:URL.createObjectURL(Pn);return Kn&&vi(this,A0).set(oi,Kn),vi(this,sr).set($n,oi),oi}replaceResources($n){const Pn=new RegExp(kindleResourceRegex,"g");return replaceSeries($n,Pn,this.loadResource.bind(this))}async loadRaw($n,Pn){const Kn=Pn-vi(this,Dr).length,oi=vi(this,Lr)==null?1/0:vi(this,Lr)-vi(this,yr).length-$n;if(Kn<0||Kn<oi){for(;vi(this,Dr).length<Pn;){const ti=++wr(this,Q0)._,In=await this.mobi.loadText(ti);ds(this,Dr,concatTypedArray(vi(this,Dr),In))}return vi(this,Dr).slice($n,Pn)}for(;vi(this,Lr)-vi(this,yr).length>$n;){const ti=this.mobi.headers.palmdoc.numTextRecords-1-++wr(this,ec)._,In=await this.mobi.loadText(ti);ds(this,yr,concatTypedArray(In,vi(this,yr)))}const Mn=vi(this,Lr)-vi(this,yr).length;return vi(this,yr).slice($n-Mn,Pn-Mn)}loadFlow($n){if($n<4294967295)return this.loadRaw(...vi(this,Zr).fdstTable[$n])}async loadText($n){const{skel:Pn,frags:Kn,length:oi}=$n,Mn=await this.loadRaw(Pn.offset,Pn.offset+oi);let ti=Mn.slice(0,Pn.length);for(const In of Kn){const Ln=In.insertOffset-Pn.offset,jn=Pn.length+In.offset,Cn=Mn.slice(jn,jn+In.length);ti=concatTypedArray3(ti.slice(0,Ln),Cn,ti.slice(Ln));const Tn=vi(this,Fo).get(In.index);if(Tn)for(const Rn of Tn){const ui=this.mobi.decode(Cn).slice(Rn),si=getFragmentSelector(ui);Qi(this,v0,Vl).call(this,In.index,Rn,si)}}return this.mobi.decode(ti)}async createDocument($n){const Pn=await this.loadText($n);return this.parser.parseFromString(Pn,vi(this,Nr))}async loadSection($n){if(vi(this,sr).has($n))return vi(this,sr).get($n);const Pn=await this.loadText($n),Kn=await this.replaceResources(Pn);let oi=this.parser.parseFromString(Kn,vi(this,Nr));oi.querySelector("parsererror")&&(ds(this,Nr,MIME.HTML),oi=this.parser.parseFromString(Kn,vi(this,Nr)));for(const[ti,In]of vi(this,A0))for(const Ln of oi.querySelectorAll(`img[src="${ti}"]`))Ln.replaceWith(In);const Mn=URL.createObjectURL(new Blob([this.serializer.serializeToString(oi)],{type:vi(this,Nr)}));return vi(this,sr).set($n,Mn),Mn}getIndexByFID($n){return vi(this,Qr).findIndex(Pn=>Pn.frags.some(Kn=>Kn.index===$n))}async resolveHref($n){var si;const{fid:Pn,off:Kn}=parsePosURI($n),oi=this.getIndexByFID(Pn);if(oi<0)return;const Mn=(si=vi(this,Jr).get(Pn))==null?void 0:si.get(Kn);if(Mn)return{index:oi,anchor:ei=>ei.querySelector(Mn)};const{skel:ti,frags:In}=vi(this,Qr)[oi],Ln=In.find(ei=>ei.index===Pn),jn=ti.offset+ti.length+Ln.offset,Cn=await this.loadRaw(jn,jn+Ln.length),Tn=this.mobi.decode(Cn).slice(Kn),Rn=getFragmentSelector(Tn);return Qi(this,v0,Vl).call(this,Pn,Kn,Rn),{index:oi,anchor:ei=>ei.querySelector(Rn)}}splitTOCHref($n){const Pn=parsePosURI($n);return[this.getIndexByFID(Pn.fid),Pn]}getTOCFragment($n,{fid:Pn,off:Kn}){var Mn;const oi=(Mn=vi(this,Jr).get(Pn))==null?void 0:Mn.get(Kn);return $n.querySelector(oi)}isExternal($n){return/^(?!blob|kindle)\w+:/i.test($n)}destroy(){for(const $n of vi(this,sr).values())URL.revokeObjectURL($n)}}sr=new WeakMap,Fo=new WeakMap,Jr=new WeakMap,Zr=new WeakMap,Qr=new WeakMap,Lr=new WeakMap,Dr=new WeakMap,yr=new WeakMap,Q0=new WeakMap,ec=new WeakMap,Nr=new WeakMap,A0=new WeakMap,v0=new WeakSet,Vl=function($n,Pn,Kn){const oi=vi(this,Jr).get($n);if(oi)oi.set(Pn,Kn);else{const Mn=new Map;vi(this,Jr).set($n,Mn),Mn.set(Pn,Kn)}};const mobi=Object.freeze(Object.defineProperty({__proto__:null,MOBI,isMOBI},Symbol.toStringTag,{value:"Module"}));var r=Uint8Array,e=Uint16Array,a=Uint32Array,n=new r([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),t=new r([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),i=new r([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=function(ki,$n){for(var Pn=new e(31),Kn=0;Kn<31;++Kn)Pn[Kn]=$n+=1<<ki[Kn-1];var oi=new a(Pn[30]);for(Kn=1;Kn<30;++Kn)for(var Mn=Pn[Kn];Mn<Pn[Kn+1];++Mn)oi[Mn]=Mn-Pn[Kn]<<5|Kn;return[Pn,oi]},o=f(n,2),v=o[0],l=o[1];v[28]=258,l[258]=28;for(var u=f(t,0)[0],c=new e(32768),d=0;d<32768;++d){var s=(43690&d)>>>1|(21845&d)<<1;s=(61680&(s=(52428&s)>>>2|(13107&s)<<2))>>>4|(3855&s)<<4,c[d]=((65280&s)>>>8|(255&s)<<8)>>>1}var w=function(ki,$n,Pn){for(var Kn=ki.length,oi=0,Mn=new e($n);oi<Kn;++oi)ki[oi]&&++Mn[ki[oi]-1];var ti,In=new e($n);for(oi=0;oi<$n;++oi)In[oi]=In[oi-1]+Mn[oi-1]<<1;if(Pn){ti=new e(1<<$n);var Ln=15-$n;for(oi=0;oi<Kn;++oi)if(ki[oi])for(var jn=oi<<4|ki[oi],Cn=$n-ki[oi],Tn=In[ki[oi]-1]++<<Cn,Rn=Tn|(1<<Cn)-1;Tn<=Rn;++Tn)ti[c[Tn]>>>Ln]=jn}else for(ti=new e(Kn),oi=0;oi<Kn;++oi)ki[oi]&&(ti[oi]=c[In[ki[oi]-1]++]>>>15-ki[oi]);return ti},b=new r(288);for(d=0;d<144;++d)b[d]=8;for(d=144;d<256;++d)b[d]=9;for(d=256;d<280;++d)b[d]=7;for(d=280;d<288;++d)b[d]=8;var h=new r(32);for(d=0;d<32;++d)h[d]=5;var E=w(b,9,1),p=w(h,5,1),g=function(ki){for(var $n=ki[0],Pn=1;Pn<ki.length;++Pn)ki[Pn]>$n&&($n=ki[Pn]);return $n},y=function(ki,$n,Pn){var Kn=$n/8|0;return(ki[Kn]|ki[Kn+1]<<8)>>(7&$n)&Pn},k=function(ki,$n){var Pn=$n/8|0;return(ki[Pn]|ki[Pn+1]<<8|ki[Pn+2]<<16)>>(7&$n)},T=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],m=function(ki,$n,Pn){var Kn=new Error($n||T[ki]);if(Kn.code=ki,Error.captureStackTrace&&Error.captureStackTrace(Kn,m),!Pn)throw Kn;return Kn},x=function(ki,$n,Pn){var Kn=ki.length;if(!Kn||Pn&&Pn.f&&!Pn.l)return $n||new r(0);var oi=!$n||Pn,Mn=!Pn||Pn.i;Pn||(Pn={}),$n||($n=new r(3*Kn));var ti=function(Vn){var Yn=$n.length;if(Vn>Yn){var ci=new r(Math.max(2*Yn,Vn));ci.set($n),$n=ci}},In=Pn.f||0,Ln=Pn.p||0,jn=Pn.b||0,Cn=Pn.l,Tn=Pn.d,Rn=Pn.m,ui=Pn.n,si=8*Kn;do{if(!Cn){In=y(ki,Ln,1);var ei=y(ki,Ln+1,3);if(Ln+=3,!ei){var Bn=ki[(Jn=4+((Ln+7)/8|0))-4]|ki[Jn-3]<<8,Nn=Jn+Bn;if(Nn>Kn){Mn&&m(0);break}oi&&ti(jn+Bn),$n.set(ki.subarray(Jn,Nn),jn),Pn.b=jn+=Bn,Pn.p=Ln=8*Nn,Pn.f=In;continue}if(ei==1)Cn=E,Tn=p,Rn=9,ui=5;else if(ei==2){var Hn=y(ki,Ln,31)+257,On=y(ki,Ln+10,15)+4,hi=Hn+y(ki,Ln+5,31)+1;Ln+=14;for(var Xn=new r(hi),ii=new r(19),ri=0;ri<On;++ri)ii[i[ri]]=y(ki,Ln+3*ri,7);Ln+=3*On;var di=g(ii),fi=(1<<di)-1,wi=w(ii,di,1);for(ri=0;ri<hi;){var Jn,pi=wi[y(ki,Ln,fi)];if(Ln+=15&pi,(Jn=pi>>>4)<16)Xn[ri++]=Jn;else{var Zn=0,Gn=0;for(Jn==16?(Gn=3+y(ki,Ln,3),Ln+=2,Zn=Xn[ri-1]):Jn==17?(Gn=3+y(ki,Ln,7),Ln+=3):Jn==18&&(Gn=11+y(ki,Ln,127),Ln+=7);Gn--;)Xn[ri++]=Zn}}var mi=Xn.subarray(0,Hn),Wn=Xn.subarray(Hn);Rn=g(mi),ui=g(Wn),Cn=w(mi,Rn,1),Tn=w(Wn,ui,1)}else m(1);if(Ln>si){Mn&&m(0);break}}oi&&ti(jn+131072);for(var ni=(1<<Rn)-1,li=(1<<ui)-1,Ai=Ln;;Ai=Ln){var gi=(Zn=Cn[k(ki,Ln)&ni])>>>4;if((Ln+=15&Zn)>si){Mn&&m(0);break}if(Zn||m(2),gi<256)$n[jn++]=gi;else{if(gi==256){Ai=Ln,Cn=null;break}var yi=gi-254;if(gi>264){var Ii=n[ri=gi-257];yi=y(ki,Ln,(1<<Ii)-1)+v[ri],Ln+=Ii}var xi=Tn[k(ki,Ln)&li],Qn=xi>>>4;if(xi||m(3),Ln+=15&xi,Wn=u[Qn],Qn>3&&(Ii=t[Qn],Wn+=k(ki,Ln)&(1<<Ii)-1,Ln+=Ii),Ln>si){Mn&&m(0);break}oi&&ti(jn+131072);for(var ai=jn+yi;jn<ai;jn+=4)$n[jn]=$n[jn-Wn],$n[jn+1]=$n[jn+1-Wn],$n[jn+2]=$n[jn+2-Wn],$n[jn+3]=$n[jn+3-Wn];jn=ai}}Pn.l=Cn,Pn.p=Ai,Pn.b=jn,Pn.f=In,Cn&&(In=1,Pn.m=Rn,Pn.d=Tn,Pn.n=ui)}while(!In);return jn==$n.length?$n:function(Vn,Yn,ci){(Yn==null||Yn<0)&&(Yn=0),(ci==null||ci>Vn.length)&&(ci=Vn.length);var bi=new(Vn.BYTES_PER_ELEMENT==2?e:Vn.BYTES_PER_ELEMENT==4?a:r)(ci-Yn);return bi.set(Vn.subarray(Yn,ci)),bi}($n,0,jn)},S=new r(0);function U(ki,$n){return x((((15&(Pn=ki)[0])!=8||Pn[0]>>>4>7||(Pn[0]<<8|Pn[1])%31)&&m(6,"invalid zlib data"),32&Pn[1]&&m(6,"invalid zlib data: preset dictionaries not supported"),ki.subarray(2,-4)),$n);var Pn}var _=typeof TextDecoder<"u"&&new TextDecoder;try{_.decode(S,{stream:!0})}catch(ki){}const fflate=Object.freeze(Object.defineProperty({__proto__:null,unzlibSync:U},Symbol.toStringTag,{value:"Module"}));exports.BookView=BookView,exports.VueReader=_sfc_main,exports.default=_sfc_main,Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
